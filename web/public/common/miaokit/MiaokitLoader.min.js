var MiaokitModule=function(a,b){if(a===void 0){a={m_bUnity:true,m_pUnityPath:undefined,m_pModulePath:undefined,m_pServer:undefined}}if(b===void 0){b="WWW.YONGTOC.COM"}var c=this;c["m_pEngine"]=a.m_bUnity?"Unity":"Sisyphus";c["m_pEnginePath"]=a.m_pUnityPath;c["m_pModulePath"]=a.m_pModulePath;c["m_pServer"]=a.m_pServer;c["m_pID"]=b;c["Merge"](c)};var MiaokitMerge=function(d){var e=[];d["Merge"]=d["Merge"]||function(f){for(var g=0,h=e;g<h.length;g++){var i=h[g];var j=i(f);if(j){for(var k=0,l=j;k<l.length;k++){var m=l[k];f[m._name]=m}}}};return function(n){e.push(n)}}(MiaokitModule.prototype);MiaokitMerge(function(o){var p=undefined;var q=undefined;var r={};var s=function(u,v){if(v===void 0){v=undefined}var w=0;this.length=u(-1);this[Symbol.iterator]=function(){return{next:function(){var x=u(w);if(x){var y=p(x);w=v?w+1:y.m_nObject;return{value:y,done:false}}return{value:undefined,done:true}}}}};r["Transform"]=function(z){Object.defineProperty(z,"position",{get:function(){var A=this["_GetPosition"]()/4;var B=o["WASM"].HEAPF32();return{x:B[A],y:B[A+1],z:B[A+2]}},set:function(C){this["_SetPosition"](C.x,C.y,C.z)}});Object.defineProperty(z,"euler",{get:function(){var D=this["_GetEuler"]()/4;var E=o["WASM"].HEAPF32();return{x:E[D],y:E[D+1],z:E[D+2]}},set:function(F){this["_SetEuler"](F.x,F.y,F.z)}});Object.defineProperty(z,"rotation",{get:function(){var G=this["_GetRotation"]()/4;var H=o["WASM"].HEAPF32();return{x:H[G],y:H[G+1],z:H[G+2],w:H[G+3]}},set:function(I){this["_SetRotation"](I.x,I.y,I.z,I.w)}});Object.defineProperty(z,"scale",{get:function(){var J=this["_GetScale"]()/4;var K=o["WASM"].HEAPF32();return{x:K[J],y:K[J+1],z:K[J+2]}},set:function(L){this["_SetScale"](L.x,L.y,L.z)}});Object.defineProperty(z,"localPosition",{get:function(){var M=this["_GetLocalPosition"]()/4;var N=o["WASM"].HEAPF32();return{x:N[M],y:N[M+1],z:N[M+2]}},set:function(O){this["_SetLocalPosition"](O.x,O.y,O.z)}});Object.defineProperty(z,"localEuler",{get:function(){var P=this["_GetLocalEuler"]()/4;var Q=o["WASM"].HEAPF32();return{x:Q[P],y:Q[P+1],z:Q[P+2]}},set:function(R){this["_SetLocalEuler"](R.x,R.y,R.z)}});Object.defineProperty(z,"localRotation",{get:function(){var S=this["_GetLocalRotation"]()/4;var T=o["WASM"].HEAPF32();return{x:T[S],y:T[S+1],z:T[S+2],w:T[S+3]}},set:function(U){this["_SetLocalRotation"](U.x,U.y,U.z,U.w)}});Object.defineProperty(z,"localScale",{get:function(){var V=this["_GetLocalScale"]()/4;var W=o["WASM"].HEAPF32();return{x:W[V],y:W[V+1],z:W[V+2]}},set:function(X){this["_SetLocalScale"](X.x,X.y,X.z)}});Object.defineProperty(z,"right",{get:function(){var Y=this["_GetRight"]()/4;var Z=o["WASM"].HEAPF32();return{x:Z[Y],y:Z[Y+1],z:Z[Y+2]}},set:function($){this["_SetRight"]($.x,$.y,$.z)}});Object.defineProperty(z,"up",{get:function(){var _=this["_GetUp"]()/4;var aa=o["WASM"].HEAPF32();return{x:aa[_],y:aa[_+1],z:aa[_+2]}},set:function(){var ba=this["_SetUp"]()/4;var ca=o["WASM"].HEAPF32();return{x:ca[ba],y:ca[ba+1],z:ca[ba+2]}}});Object.defineProperty(z,"forward",{get:function(){var da=this["_GetForward"]()/4;var ea=o["WASM"].HEAPF32();return{x:ea[da],y:ea[da+1],z:ea[da+2]}},set:function(){var fa=this["_SetForward"]()/4;var ga=o["WASM"].HEAPF32();return{x:ga[fa],y:ga[fa+1],z:ga[fa+2]}}});z["Rotate"]=function(ha,ia){this["_Rotate"](ha.x,ha.y,ha.z,ia)};z["Rotate2"]=function(ja,ka,la){this["_Rotate2"](ja.x,ja.y,ja.z,ka,la)};z["Translate"]=function(ma,na){this["_Translate"](ma.x,ma.y,ma.z,na)};z["TransformPoint"]=function(oa){var pa=this["_TransformPoint"](oa.x,oa.y,oa.z)/4;var qa=o["WASM"].HEAPF32();return{x:qa[pa],y:qa[pa+1],z:qa[pa+2]}}};r["GameObject"]=function(ra){Object.defineProperty(ra,"name",{get:function(){if(!this._name){var sa=this._GetName(0);var ta=this._GetName(1);this._name=o["WASM"].GetString(ta,sa)}return this._name}});Object.defineProperty(ra,"transform",{get:function(){return p(this["_GetTransform"]())}});Object.defineProperty(ra,"mesh",{get:function(){return p(this["_GetMesh"]())},set:function(ua){this["_SetMesh"](ua.m_nObject)}});Object.defineProperty(ra,"children",{get:function(){var va=this;return new s(function(wa){return va._IterChild(wa)},true)}});Object.defineProperty(ra,"parent",{get:function(){return p(this["_GetParent"]())}});Object.defineProperty(ra,"data",{get:function(){return p(this["_GetUserData"]())},set:function(xa){}});Object.defineProperty(ra,"enableCollider",{set:function(ya){this["_EnableCollider"](ya)}});Object.defineProperty(ra,"active",{set:function(za){this["_Active"](za)}});Object.defineProperty(ra,"highlight",{set:function(Aa){this["_Highlight"](Aa)}});Object.defineProperty(ra,"transparent",{set:function(Ba){this["_Transparent"](Ba)}});ra["Destory"]=function(){this["_Destory"]()};o["GameObject"]=function(){return p(ra._GameObject())}};r["Miaokit"]=function(Ca){Ca["LoadTile"]=function(Da){var Ea=this["_Malloc"](Da.byteLength);if(Ea){o["WASM"]["HEAPU8"](Ea,Da.byteLength).set(new Uint8Array(Da));var Fa=this["_LoadTile"](Ea,Da.byteLength);var Ga=p(Fa);return Ga}return null};Ca["Analyze"]=function(Ha){var Ia=this["_Analyze"]();var Ja=o["WASM"].HEAP32()[Ia/4];var Ka=o["WASM"].GetString(Ia+4,Ja);try{var La=JSON.parse(Ka);var Ma=q(Ha).concat(La);return Ma}catch(Na){console.log(Ka)}return null};Ca["PickEntity"]=function(Oa){return p(this["_PickEntity"](Oa))};Ca["GetScene"]=function(Pa){return p(this["_GetScene"](Pa))};Ca["WorldToScreenPoint"]=function(Qa){var Ra=this["_WorldToScreenPoint"](Qa.x,Qa.y,Qa.z)/4;var Sa=o["WASM"].HEAPF32();return{x:Sa[Ra],y:Sa[Ra+1],z:Sa[Ra+2]}};Ca["ScreenPointToRay"]=function(Ta){var Ua=this["_ScreenPointToRay"](Ta.x,Ta.y,Ta.z)/4;var Va=o["WASM"].HEAPF32();return{m_mOrigin:{x:Va[Ua],y:Va[Ua+1],z:Va[Ua+2]},m_mDirection:{x:Va[Ua+4],y:Va[Ua+5],z:Va[Ua+6]}}};Object.defineProperty(Ca,"camera",{get:function(){return p(this["_GetCamera"]())}});Object.defineProperty(Ca,"cameraMode",{set:function(Wa){this["_SetCameraMode"](Wa)}});Object.defineProperty(Ca,"gis",{get:function(){if(!this._gis){this._gis=r["Gis"]["g_pIns"]}return this._gis}});Object.defineProperty(Ca,"progress",{get:function(){return this["_GetProgress"]()}})};r["Mesh"]=function(Xa){Xa["SetVertices"]=function(Ya,Za){this["m_aVertex"]=this["m_aVertex"]||[];this["m_aVertex"].push({m_pArray:Za,m_nSlot:this["_SlotLut"][Ya],m_nItemSize:this["_SizeLut"][Ya]})};Xa["SetIndices"]=function($a,_a,ab){this["m_aIndex"]=this["m_aIndex"]||[];this["m_aIndex"][$a]={m_pArray:_a,m_nItemSize:ab}};Xa["Apply"]=function(){var bb=this["m_aVertex"];var cb=this["m_aIndex"];if(!bb||!cb){return}var db=2+2*bb.length+3*cb.length;var eb=this._CreateBuffer(db);var fb=o["WASM"]["HEAP32"](eb,db*4);var gb=0;fb[gb++]=bb.length;fb[gb++]=cb.length;for(var hb=0;hb<bb.length;hb++){fb[gb++]=bb[hb].m_nSlot;fb[gb++]=bb[hb].m_pArray.length/bb[hb].m_nItemSize}for(var hb=0;hb<cb.length;hb++){fb[gb++]=0;fb[gb++]=0;fb[gb++]=cb[hb].m_pArray.length}this._CreateBuffer(0);for(var hb=0;hb<bb.length;hb++){var ib=bb[hb].m_pArray;var jb=this._GetVertexBuffer(hb);var kb=o["WASM"]["HEAPF32"](jb,ib.length*4);kb.set(ib)}for(var hb=0;hb<cb.length;hb++){var ib=cb[hb].m_pArray;var jb=this._GetIndexBuffer(hb);var kb=o["WASM"]["HEAP32"](jb,ib.length*4);kb.set(ib)}this._Apply();this["m_aVertex"]=undefined;this["m_aIndex"]=undefined};Xa["_SlotLut"]={position:0,normal:1,uv:2,color:3,tangent:4,uv2:9,uv3:10,uv4:11,uv5:12,uv6:13,uv7:14,uv8:15};Xa["_SizeLut"]={position:3,normal:3,uv:2,color:4,tangent:4,uv2:2,uv3:2,uv4:2,uv5:2,uv6:2,uv7:2,uv8:2};Object.defineProperty(Xa,"position",{set:function(lb){this.SetVertices("position",lb)}});Object.defineProperty(Xa,"normal",{set:function(mb){this.SetVertices("normal",mb)}});Object.defineProperty(Xa,"uv",{set:function(nb){this.SetVertices("uv",nb)}});Object.defineProperty(Xa,"triangles",{set:function(ob){this.SetIndices(0,ob)}});Object.defineProperty(Xa,"material",{set:function(pb){this.SetMaterial(0,pb)}});o["Mesh"]=function(){return p(Xa._Mesh())}};r["Texture2D"]=function(qb){qb["SetImageData"]=function(rb){var sb=this._CreateBuffer(rb.byteLength);if(sb){o["WASM"]["HEAPU8"](sb,rb.byteLength).set(new Uint8Array(rb));this._Apply()}};qb["Load"]=function(tb){var ub=this;o["Fetch"](tb,function(vb){if(vb){ub.SetImageData(vb)}})};o["Texture2D"]=function(wb){var xb=p(qb._Texture2D());if(wb){if("string"===typeof wb){this.Load(wb)}else{this.SetImageData(wb)}}return xb}};r["Material"]=function(yb){if("Sisyphus"===o["m_pEngine"]){o["ShaderLab"].ExpandMaterial(yb)}yb["GetTexture"]=function(){return p(this["_GetTexture"]())};yb["SetTexture"]=function(zb){this["_SetTexture"](zb.m_nObject)};o["Material"]=function(Ab){if(Ab===void 0){Ab=undefined}var Bb=null;if(Ab){var Cb=o["ShaderLab"]["Pipeline"]["InternalShader"];var Db=Cb[0];Cb[0]=Ab;Bb=p(yb._Material());Cb[0]=Db}else{Bb=p(yb._Material())}return Bb}};r["Tile"]=function(Eb){Object.defineProperty(Eb,"scenes",{get:function(){var Fb=this;return new s(function(Gb){return Fb._IterWork(Gb)})}})};r["Scene"]=function(Hb){Hb["GetLayer"]=function(Ib){return p(this["_GetLayer"](Ib))};Object.defineProperty(Hb,"id",{get:function(){if(!this._id){var Jb=this._GetID(0);var Kb=this._GetID(1);this._id=o["WASM"].GetString(Kb,Jb)}return this._id}});Object.defineProperty(Hb,"layers",{get:function(){var Lb=this;return new s(function(Mb){return Lb._IterLayer(Mb)})}});Object.defineProperty(Hb,"object3D",{get:function(){if(undefined===this._object3D){var Nb=this._GetObject(this.m_nObject);if(0===Nb){this._object3D=null;return null}this._object3D=p(Nb)}return this._object3D}});Object.defineProperty(Hb,"viewState",{get:function(){return{m_mTarget:{x:0,y:0,z:0},m_nPitch:45,m_nYaw:0,m_nDistance:60,m_mOrthoTarget:{x:0,y:0,z:0},m_nOrthoScaled:0,m_nOrthoRotate:0}}});Object.defineProperty(Hb,"binding",{get:function(){return p(this._GetBinding())}})};r["Layer"]=function(Ob){Object.defineProperty(Ob,"id",{get:function(){if(!this._id){var Pb=this._GetID(0);var Qb=this._GetID(1);this._id=o["WASM"].GetString(Qb,Pb)}return this._id}});Object.defineProperty(Ob,"sites",{get:function(){var Rb=this;return new s(function(Sb){return Rb._IterSite(Sb)})}});Object.defineProperty(Ob,"object3D",{get:function(){if(undefined===this._object3D){var Tb=this._GetObject(this.m_nObject);if(0===Tb){this._object3D=null;return null}this._object3D=p(Tb)}return this._object3D}});Object.defineProperty(Ob,"viewState",{get:function(){var Ub=this["_GetViewState"]();if(0<Ub){var Vb=o["WASM"]["HEAPF32"](Ub,4*11);var Wb=0;return{m_mTarget:{x:Vb[Wb++],y:Vb[Wb++],z:Vb[Wb++]},m_nPitch:Vb[Wb++],m_nYaw:Vb[Wb++],m_nDistance:Vb[Wb++],m_mOrthoTarget:{x:Vb[Wb++],y:Vb[Wb++],z:Vb[Wb++]},m_nOrthoScaled:Vb[Wb++],m_nOrthoRotate:Vb[Wb++]}}return null}})};r["Attachment"]=function(Xb){Object.defineProperty(Xb,"entityType",{get:function(){return this._GetEntityType()}});Object.defineProperty(Xb,"secondType",{get:function(){return this._GetSecondType()}});Object.defineProperty(Xb,"flag",{get:function(){return this._GetFlag()}});Object.defineProperty(Xb,"object3D",{get:function(){return p(this._GetObject())}});Object.defineProperty(Xb,"viewState",{get:function(){var Yb=this["_GetViewState"]();if(0<Yb){var Zb=o["WASM"]["HEAPF32"](Yb,4*11);var $b=0;var _b={m_mTarget:{x:Zb[$b++],y:Zb[$b++],z:Zb[$b++]},m_nPitch:Zb[$b++],m_nYaw:Zb[$b++],m_nDistance:Zb[$b++],m_mOrthoTarget:{x:Zb[$b++],y:Zb[$b++],z:Zb[$b++]},m_nOrthoScaled:Zb[$b++],m_nOrthoRotate:Zb[$b++]};console.log("attachment view:",_b);return _b}else{console.log("attachment view: null")}return null}})};r["Site"]=function(ac){Object.defineProperty(ac,"id",{get:function(){if(!this._id){var bc=this._GetID(0);var cc=this._GetID(1);this._id=o["WASM"].GetString(cc,bc)}return this._id}});Object.defineProperty(ac,"layer",{get:function(){return p(this["_Layer"]())}});Object.defineProperty(ac,"scene",{get:function(){return p(this["_Scene"]())}});Object.defineProperty(ac,"type",{get:function(){return this["_Type"]()}});Object.defineProperty(ac,"number",{get:function(){return this["_Number"]()}});Object.defineProperty(ac,"position",{get:function(){var dc=this["_Position"]()/4;var ec=o["WASM"].HEAPF32();return{x:ec[dc],y:ec[dc+1],z:ec[dc+2]}}})};r["Prefab"]=function(fc){fc["Instantiate"]=function(){return p(this["_Instantiate"]())};o["LoadPrefab"]=function(gc,hc){o["Fetch"](gc,function(ic){var jc=null;if(ic){var kc=fc._Prefab();var lc=p(kc);var mc=lc.CreateBuffer(ic.byteLength);if(mc){o["WASM"]["HEAPU8"](mc,ic.byteLength).set(new Uint8Array(ic));lc.Apply();jc=lc}}hc(jc)})}};r["Gis"]=function(nc){nc["Update"]=function(oc,pc,qc){return this["_Update"](oc,pc,qc)};nc["AddSvetile"]=function(rc){var sc=o["WASM"]["EncodeString"](rc.m_pUrl);var tc=this["_CreateSvetileDesc"](sc.byteLength);var uc=o["WASM"]["HEAPU32"](tc,4*8);uc[0]=rc.m_nID;uc[1]=rc.m_nFlags;o["WASM"]["HEAPU8"](uc[2],sc.byteLength).set(sc,0);uc[3]=0;uc[4]=o["WASM"]["RegisterDelegate"](function(wc,xc){rc.OnActive(p(wc),0<xc)});var vc=o["WASM"]["HEAPF32"](tc+20,16);vc[0]=rc.m_mLngLat.x;vc[1]=rc.m_mLngLat.y;vc[2]=rc.m_mSize.x;vc[3]=rc.m_mSize.y;this["_AddSvetile"](tc)};nc["AddMapbox"]=function(yc){var zc=this["_GetMapboxDesc"]();var Ac=o["WASM"]["HEAPF32"](zc,40);Ac[0]=yc.m_mOffset.x;Ac[1]=yc.m_mOffset.y;Ac[2]=yc.m_mOffset.z;Ac[3]=yc.m_mScale.x;Ac[4]=yc.m_mScale.y;Ac[5]=yc.m_mScale.z;Ac[6]=yc.m_mLngLat.x;Ac[7]=yc.m_mLngLat.y;Ac[8]=yc.m_mSize.x;Ac[9]=yc.m_mSize.y;this["_AddMapbox"](zc)};nc["AddGameObject"]=function(Bc,Cc,Dc){this["_AddGameObject"](Bc.m_nObject,Cc,Dc)};Object.defineProperty(nc,"imageServer",{set:function(Ec){if(!Ec){Ec="http://t%d.tianditu.gov.cn/DataServer?T=vec_c&tk=fb14b0853d59b619e18c259898bd0d4d&x=%d&y=%d&l=%d"}var Fc=this["_GetServer"](0);o["WASM"].SetString(Fc,Ec)}});Object.defineProperty(nc,"terrainServer",{set:function(Gc){if(!Gc){Gc="https://t%d.tianditu.gov.cn/dem_sjk/DataServer?T=ele_c&tk=fb14b0853d59b619e18c259898bd0d4d&x=%d&y=%d&l=%d"}var Hc=this["_GetServer"](1);o["WASM"].SetString(Hc,Gc)}})};r["Dioramas3MX"]=function(Ic){Ic["_Load3MX"]=function(Jc,Kc,Lc){var Mc=this;var Nc=Mc.m_pFileLut[Jc];var Oc=Nc.m_pPath+Nc.m_aFile[Kc];o["Request"]("GET","arraybuffer",Oc,null,null,function(Pc){if(!Pc){return}var Qc=new Uint32Array(Pc,0,2);if(1113083187===Qc[0]){var Rc=Qc[1]>>8;var Sc=9+Rc;var Tc=Pc.byteLength-Sc;var Uc=new Uint8Array(Pc,9,Rc);var Vc=Mc.m_pTextDecoder.decode(Uc);var Wc=JSON.parse(Vc);var Xc={m_pPath:Oc.substring(0,Oc.lastIndexOf("/")+1),m_aFile:[]};var Yc=[];var Zc=[];var $c=Wc.resources;var _c=0;for(var ad=0;ad<$c.length;ad++){Yc.push(ad);if("textureBuffer"===$c[ad].type){Yc.push(0);Zc.push(ad);if("jpg"===$c[ad].format){Yc.push(0)}else if("png"===$c[ad].format){Yc.push(1)}else{Yc.push(1e4)}}else if("geometryBuffer"===$c[ad].type){Yc.push(1);if("ctm"===$c[ad].format){Yc.push(0)}else{Yc.push(1e4)}}else{Yc.push(1e4);Yc.push(1e4)}Yc.push($c[ad].size);Yc.push(_c);_c+=$c[ad].size;Yc.push(1e4);if($c[ad].texture){for(var bd=0;bd<$c.length;bd++){if($c[ad].texture===$c[bd].id){Yc[Yc.length-1]=bd;break}}}}var cd=[];var dd=Wc.nodes;for(var ad=0;ad<dd.length;ad++){var ed=dd[ad];var fd=ed.bbMax[0]-ed.bbMin[0];var gd=ed.bbMax[1]-ed.bbMin[1];var hd=ed.bbMax[2]-ed.bbMin[2];var id=Math.sqrt(fd*fd+gd*gd+hd*hd);cd.push(Math.floor(parseInt(ed.bbMin[0]+ed.bbMax[0])*.5*100));cd.push(Math.floor(parseInt(ed.bbMin[1]+ed.bbMax[1])*.5*100));cd.push(Math.floor(parseInt(ed.bbMin[2]+ed.bbMax[2])*.5*100));cd.push(Math.floor(id*100));cd.push(Math.floor(ed.maxScreenDiameter));var jd=ed.children?ed.children.length:0;if(0<jd){cd.push(Xc.m_aFile.length);for(var bd=0;bd<jd;bd++){Xc.m_aFile.push(ed.children[bd])}cd.push(Xc.m_aFile.length)}else{cd.push(-1);cd.push(-1)}var kd=ed.resources?ed.resources.length:0;if(0<kd){cd.push(Zc.length);for(var bd=0;bd<kd;bd++){for(var ld=0;ld<$c.length;ld++){if(ed.resources[bd]===$c[ld].id){Zc.push(ld);break}}}cd.push(Zc.length)}else{cd.push(-1);cd.push(-1)}}var md=4+9*dd.length+6*Zc.length;var nd=4*md;var od=nd+Tc;var pd=Mc["_CreateBuffer"](od);if(pd){var qd=o["WASM"]["HEAP32"](pd,nd);qd[0]=nd;qd[1]=dd.length;qd[2]=Zc.length;qd[3]=Mc.m_pFileLut.length;qd.set(cd,4);var rd=4+cd.length;for(var ad=0;ad<Zc.length;ad++){var sd=6*Zc[ad];for(var bd=0;bd<6;bd++){qd[rd++]=Yc[sd++]}}var td=o["WASM"]["HEAPU8"](pd+nd,Tc);td.set(new Uint8Array(Pc,Sc,Tc));Mc["_Dispose"](Lc)}Mc.m_pFileLut.push(Xc)}})};Ic["Update"]=function(){return this["_Update"]()};Object.defineProperty(Ic,"object3D",{get:function(){return p(this["_GetObject"]())}});o["Dioramas3MX"]=function(ud,vd){var wd=p(Ic._Dioramas3MX());wd.m_pFileLut=[];wd.m_pTextDecoder=new TextDecoder("utf-8");if(vd){if(vd.m_pGis){vd.m_pGis.AddGameObject(wd.object3D,vd.m_mLngLat.x,vd.m_mLngLat.y);wd.object3D.transform.Translate(vd.m_mOffset,1);wd.object3D.transform.Rotate({x:0,y:0,z:0},1)}}o["Request"]("GET","json",ud,null,null,function(xd){wd["m_pMeta"]=xd;var yd={m_pPath:ud.substring(0,ud.lastIndexOf("/")+1),m_aFile:[]};var zd=[0];for(var Ad=0;Ad<xd.layers.length;Ad++){if("meshPyramid"===xd.layers[Ad].type){zd.push(Ad);zd.push(yd.m_aFile.length);yd.m_aFile.push(xd.layers[Ad].root)}}zd[0]=yd.m_aFile.length;var Bd=wd["_CreateBuffer"](4*zd.length);var Cd=o["WASM"]["HEAP32"](Bd,4*zd.length);Cd.set(zd);wd["_Initialize"](Bd);wd.m_pFileLut.push(yd)});return wd}};function t(Dd,Ed,Fd){p=Ed;q=Fd;for(var Gd=0,Hd=Dd;Gd<Hd.length;Gd++){var Id=Hd[Gd];if(Id){var Jd=Id.prototype;if(r[Jd._type_name]){r[Jd._type_name](Jd)}if("Miaokit"===Jd._type_name){o["Miaokit"]=new Id(0,0)}else if("Gis"===Jd._type_name){r["Gis"]["g_pIns"]=new Id(0,0)}}}}o["WASM"]=o["WASM"]||{};o["WASM"]["LoadClass"]=t;return[]});MiaokitMerge(function(Kd){Kd["m_pLogo"]=null;Kd["m_pEngine"]=Kd["m_pEngine"]||"Unity";Kd["m_pEnginePath"]=Kd["m_pEnginePath"]||"js/Miaokit/MiaokitU3D/Build/MiaokitU3D.json";Kd["m_pModulePath"]=Kd["m_pModulePath"]||"./js/Miaokit/Miaokit.wasm";Kd["m_pServer"]=Kd["m_pServer"]||"http://sve.yongtoc.com/";Kd["m_aTiles"]=[];var Ld=Kd["m_pEngine"];var Md=Kd["m_pEnginePath"];var Nd=Kd["m_pModulePath"];var Od=Kd["m_pServer"];var Pd=Kd["m_aTiles"];var Qd=undefined;var Rd=false;function Sd(){Kd["Track"]("Preload");Kd["Fetch"](Nd,function(Xd){if(Qd){Qd(Xd)}else{Qd=Xd}});var Vd=function(Yd){var Zd=Pd[Yd];Kd["Fetch"](Zd.m_pPath,function($d){Zd["m_pData"]=$d;Zd["m_pTile"]=null;if(Pd["m_pLoader"]){Pd["m_pLoader"](Zd)}})};for(var Wd=0;Wd<Pd.length;Wd++){Vd(Wd)}}function Td(_d,ae){Kd["Track"]("LoadEngine");Kd["WASM"]["LoadEngine"]({OnEngineLoad:function(be){Kd["Track"]("LoadEngine End");if(Qd){Kd["Track"]("LoadMiaokit");Kd["WASM"]["LoadMiaokit"](Qd,be,function(){Ud(function(){_d();Rd=true})})}else{Kd["Track"]("LoadMiaokit Delay");Qd=function(ce){Kd["Track"]("LoadMiaokit");Kd["WASM"]["LoadMiaokit"](ce,be,function(){Ud(function(){_d();Rd=true})})}}},OnRenderingEvent:function(de){if(Rd){ae(de)}}})}function Ud(ee){Kd["Track"]("LoadMiaokit End");var fe=Pd.length;if(0==fe){ee()}Pd["m_pLoader"]=function(ie){ie["m_pTile"]=Kd["Miaokit"]["LoadTile"](ie["m_pData"]);ie["m_pData"]=null;if(ie["Active"]){ie["Active"]()}if(0===--fe){ee()}};for(var ge=0;ge<Pd.length;ge++){var he=Pd[ge];if(he["m_pData"]){Pd["m_pLoader"](he)}}}Sd["_name"]="Preload";Td["_name"]="Load";return[Sd,Td]});MiaokitMerge(function(je){var ke=function(){function me(){}me.Clamp=function(ne,oe,pe){if(ne>pe){return pe}if(ne<oe){return oe}return ne};return me}();var le=function(){function qe(re,se,te){this.x=0;this.y=0;this.z=0;this.x=re;this.y=se;this.z=te}qe.Scale=function(ue,ve){return{x:ve.x*ue,y:ve.y*ue,z:ve.z*ue}};return qe}();ke["_name"]="Mathf";le["_name"]="Vector3";return[ke,le]});MiaokitMerge(function(we){var xe=null;var ye=null;var ze=null;var Ae=[null];var Be=[null];var Ce=[null];var De=1;var Ee=0;var Fe=[undefined];var Ge=null;function He(Se){Se["isnanf"]=isNaN;Se["isinff"]=isFinite;Se["powf"]=Math.pow;Se["sqrtf"]=Math.sqrt;Se["expf"]=Math.exp;Se["logf"]=Math.log;Se["floorf"]=Math.floor;Se["ceilf"]=Math.ceil;Se["sinf"]=Math.sin;Se["cosf"]=Math.cos;Se["tanf"]=Math.tan;Se["asinf"]=Math.asin;Se["acosf"]=Math.acos;Se["atanf"]=Math.atan;Se["atan2f"]=Math.atan2;Se["ldexpf"]=function(Te,Ue){return Te*Math.pow(2,Ue)}}function Ie(Ve){var We=we["GL"];var Xe=We.Ctx.getParameter(34047);Ve["glTexImage2DExt"]=function(Ye,Ze){var $e=Be[Ze];if($e){We.Ctx.texParameterf(Ye,34046,Xe);We.Ctx.texImage2D(Ye,0,We.Ctx.RGB,We.Ctx.RGB,We.Ctx.UNSIGNED_BYTE,$e);Be[Ze]=null}};Ve["glCreateShader"]=We._glCreateShader;Ve["glDeleteShader"]=We._glDeleteShader;Ve["glShaderSource"]=We._glShaderSource;Ve["glCompileShader"]=We._glCompileShader;Ve["glGetShaderiv"]=We._glGetShaderiv;Ve["glGetShaderInfoLog"]=We._glGetShaderInfoLog;Ve["glCreateProgram"]=We._glCreateProgram;Ve["glDeleteProgram"]=We._glDeleteProgram;Ve["glAttachShader"]=We._glAttachShader;Ve["glLinkProgram"]=We._glLinkProgram;Ve["glUseProgram"]=We._glUseProgram;Ve["glGetProgramiv"]=We._glGetProgramiv;Ve["glGetProgramInfoLog"]=We._glGetProgramInfoLog;Ve["glBindAttribLocation"]=We._glBindAttribLocation;Ve["glGenVertexArrays"]=We._glGenVertexArrays;Ve["glDeleteVertexArrays"]=We._glDeleteVertexArrays;Ve["glBindVertexArray"]=We._glBindVertexArray;Ve["glVertexAttribPointer"]=We._glVertexAttribPointer;Ve["glEnableVertexAttribArray"]=We._glEnableVertexAttribArray;Ve["glGetActiveUniform"]=We._glGetActiveUniform;Ve["glGetUniformLocation"]=We._glGetUniformLocation;Ve["glUniform1i"]=We._glUniform1i;Ve["glUniform1fv"]=We._glUniform1fv;Ve["glUniform2fv"]=We._glUniform2fv;Ve["glUniform3fv"]=We._glUniform3fv;Ve["glUniform4fv"]=We._glUniform4fv;Ve["glUniform1iv"]=We._glUniform1iv;Ve["glUniform2iv"]=We._glUniform2iv;Ve["glUniform3iv"]=We._glUniform3iv;Ve["glUniform4iv"]=We._glUniform4iv;Ve["glUniformMatrix3fv"]=We._glUniformMatrix3fv;Ve["glUniformMatrix4fv"]=We._glUniformMatrix4fv;Ve["glGenTextures"]=We._glGenTextures;Ve["glDeleteTextures"]=We._glDeleteTextures;Ve["glActiveTexture"]=We._glActiveTexture;Ve["glBindTexture"]=We._glBindTexture;Ve["glTexStorage2D"]=We._glTexStorage2D;Ve["glTexParameteri"]=We._glTexParameteri;Ve["glTexImage2D"]=We._glTexImage2D;Ve["glGenerateMipmap"]=We._glGenerateMipmap;Ve["glGenBuffers"]=We._glGenBuffers;Ve["glDeleteBuffers"]=We._glDeleteBuffers;Ve["glBindBuffer"]=We._glBindBuffer;Ve["glBufferData"]=We._glBufferData;Ve["glMapBufferRange"]=We._glMapBufferRange;Ve["glUnmapBuffer"]=We._glUnmapBuffer;Ve["glGenFramebuffers"]=We._glGenFramebuffers;Ve["glDeleteFramebuffers"]=We._glDeleteFramebuffers;Ve["glBindFramebuffer"]=We._glBindFramebuffer;Ve["glFramebufferTexture2D"]=We._glFramebufferTexture2D;Ve["glCheckFramebufferStatus"]=We._glCheckFramebufferStatus;Ve["glClearColor"]=We._glClearColor;Ve["glClear"]=We._glClear;Ve["glBlendFuncSeparate"]=We._glBlendFuncSeparate;Ve["glBlendEquationSeparate"]=We._glBlendEquationSeparate;Ve["glEnable"]=We._glEnable;Ve["glDisable"]=We._glDisable;Ve["glDepthFunc"]=We._glDepthFunc;Ve["glDepthMask"]=We._glDepthMask;Ve["glClearDepthf"]=We._glClearDepthf;Ve["glClearStencil"]=We._glClearStencil;Ve["glCullFace"]=We._glCullFace;Ve["glPolygonOffset"]=We._glPolygonOffset;Ve["glViewport"]=We._glViewport;Ve["glDrawArrays"]=We._glDrawArrays;Ve["glDrawArraysInstanced"]=We._glDrawArraysInstanced;Ve["glDrawElements"]=We._glDrawElements;Ve["glDrawElementsInstanced"]=We._glDrawElementsInstanced;Ve["glFlush"]=We._glFlush;Ve["glFinish"]=We._glFinish}function Je(_e){function af(kf){var lf=we["WASM"].GetString(kf);if(!lf.startsWith("http")){lf=we["m_pServer"]+lf}if(lf.endsWith("assetbundle")){lf+=".bin"}return lf}function bf(mf,nf,of,pf){var qf=af(mf);var rf=xe.get(of);var sf=xe.get(pf);we["Fetch"](qf,function(tf){if(tf){var uf=rf(nf,tf.byteLength);if(uf){we["WASM"]["HEAPU8"](uf,tf.byteLength).set(new Uint8Array(tf))}}else{console.error("资源丢失:",qf)}sf(nf)})}function cf(vf,wf,xf){var yf=af(vf);var zf=xe.get(xf);var Af=new Image;Af.crossOrigin="anonymous";Af.src=yf;Af.onload=function(Bf){zf(wf,Be.push(Af)-1)}}function df(Cf,Df,Ef,Ff){bf(Cf,Df,Ef,Ff)}function ef(Gf,Hf,If,Jf){Ge["LoadTerrain"](Gf,Hf,If,Jf)}function ff(Kf,Lf,Mf,Nf){var Of=we["WASM"]["HEAP32"](Kf,16);Ge["LoadBlockbox"](Lf,Of[0],Of[1],Of[2],Of[3],Mf,Nf)}function gf(Pf,Qf){var Rf=we["WASM"]["HEAP32"](Pf,12);var Sf=Me(Rf[0]);if(Sf){Sf["_Load3MX"](Rf[1],Rf[2],Qf)}}function hf(Tf,Uf,Vf,Wf){bf(Tf,Uf,Vf,Wf)}var jf=[undefined,bf,cf,df,ef,ff,gf,hf];_e["APP_LOAD"]=function(Xf,Yf,Zf,$f,_f){jf[Xf](Yf,Zf,$f,_f)}}function Ke(ag){var bg={NaN:NaN,Infinity:Infinity};He(ag);Ie(ag);Je(ag);ag["APP_DYNAMIC_LINK"]=function(cg,dg){var eg=we["WASM"]["HEAPU32"](cg,dg);var fg=eg[0];var gg=eg[1];for(var hg=0;hg<fg;hg++){var ig=eg[2+hg]-1;var jg=eg[gg++];var kg=eg[gg++];var lg=we["WASM"].GetString(jg,kg);var mg=JSON.parse(lg);var ng=function(rg,sg){this["m_nID"]=rg;this["m_nObject"]=sg};var og=ng.prototype;og["_type_name"]=mg[0];og["_type_id"]=hg+1;og["_ins_count"]=0;Fe[hg+1]=ng;var pg=function(tg){var ug=xe.get(eg[gg++]);gg++;var vg=function(){var wg=Array.prototype.slice.call(arguments);wg.unshift(this.m_nObject);return ug.apply(this,wg)};if(0===tg){og["_"+mg[tg]]=vg}else{og[mg[tg]]=vg}};for(var qg=0;qg<ig;qg++){pg(qg)}}we["WASM"]["LoadClass"](Fe,Me,Pe);we["Miaokit"]["ResizeCavans"]=function(xg,yg){if(ze.SE_RESIZE){ze.SE_RESIZE(xg,yg)}}};ag["APP_PRINT"]=function(zg,Ag,Bg){var Cg=we["WASM"].GetString(zg,Ag);we["Track"](Cg,Bg)};ag["APP_DO_ACTION"]=function(Dg,Eg,Fg,Gg){Ae[Dg](Eg,Fg,Gg)};ag["APP_CREATE_OBJ"]=function(Hg,Ig){if(0<Hg){var Jg=Ne();var Kg=new Fe[Hg](Jg,Ig);Ce[Jg]=Kg;Fe[Hg].prototype._ins_count++;return Jg}else{if(-21==Hg){var Lg=we["WASM"]["HEAP32"](Ig,16);var Mg=Lg[0];var Ng=Lg[1];var Og=Lg[2];var Pg=Lg[3];var Qg=we["WASM"]["HEAP8"](Og,Ng);var Rg=new Blob([Qg]);var Sg=window.URL.createObjectURL(Rg);var Tg=xe.get(Pg);var Ug=new Image;Ug.src=Sg;Ug.onload=function(Vg){Tg(Mg,Be.push(Ug)-1);window.URL.revokeObjectURL(Sg)}}}return 0};ag["APP_FREE_OBJ"]=function(Wg){var Xg=Ce[Wg];Fe[Xg._type_id].prototype._ins_count--;Oe(Wg)};ag["APP_DO"]=we["ShaderLab"].OperateMaterial;ye=ag["memory"];we["WASM"]["m_pMemory"]=we["WASM"]["m_pMemory"]||ye;return{env:ag,global:bg}}function Le(Yg,Zg,$g){Zg=Ke(Zg);WebAssembly.instantiate(Yg,Zg).then(function(_g){return _g.instance}).then(function(ah){ze=ah.exports;xe=ze.__indirect_function_table;we["WASM"]["Update"]=ah.exports.SE_UPDATE;we["WASM"]["Malloc"]=ah.exports.Malloc;we["WASM"]["Free"]=ah.exports.Free;we["ShaderLab"]["DrawPass_"]=ah.exports.SE_DRAW_PASS;we["ShaderLab"]["SetSunlight"]=ah.exports.SE_SUNLIGHT;we["ShaderLab"]["CreateUniformsDesc"]=ah.exports.SE_CREATE_UNIFORMS_DESC;we["ShaderLab"]["GetTexture"]=function(bh){return ze.SE_GL_RESOURCE(9,bh)};we["Track"]("Start thread");we["WASM"]["Worker"]=Re(function(){we["Track"]("Start thread succeed")});ze.Start();$g()})}function Me(ch){return Ce[ch]}function Ne(){var dh=De;if(Ce.length>De){De=Ce[De]}else{De++}Ee++;return dh}function Oe(eh){Ce[eh]=De;De=eh;Ee--}function Pe(fh){var gh="'系统运行':{";gh+="'时间':"+(we.Time()/1e3).toFixed(0);gh+=", '帧率':"+fh;gh+=", 'WASM内存':"+we.WASM.m_pMemory.buffer.byteLength/1024/1024;gh+="}";var hh="'JS对象':{";hh+="'工厂':["+Ce.length+", "+Ee+", "+(Ce.length-Ee)+"]";for(var ih=1;ih<Fe.length;ih++){hh+=", '"+Fe[ih].prototype._type_name+"':"+Fe[ih].prototype._ins_count}hh+="}";return[gh,hh]}function Qe(jh){var kh=Ae.length;Ae.push(jh);return kh}function Re(lh){var mh=ze.UTIL_WORKER_CODE();var nh=we["WASM"]["HEAPU32"](mh,16);if(false){Ge=new Worker(window.URL.createObjectURL(new Blob([we["WASM"]["HEAPU8"](nh[2],nh[3])])));var oh=we["WASM"]["HEAPU8"]().slice(nh[0],nh[0]+nh[1]);var ph=oh.buffer;Ge.postMessage({m_nID:1,m_aCode:ph},[ph])}else{var qh=we["m_pModulePath"].replace(".wasm","");Ge=new Worker(qh+"Worker.min.js");fetch(qh+"Worker.wasm").then(function(rh){return rh.arrayBuffer()}).then(function(sh){if(sh){Ge.postMessage({m_nID:1,m_aCode:sh},[sh])}else{console.error("fetch error: ./js/Miaokit/MiaokitWorker.wasm",sh)}}).catch(function(th){console.error("fetch error: ./js/Miaokit/MiaokitWorker.wasm",th)})}Ge.onmessage=function(uh){var vh=uh.data;switch(vh.m_nID){case 1:lh();lh=null;break;case 2:Ge["OnLoadTerrain"](vh);break;case 3:Ge["OnLoadBlockbox"](vh);break;default:console.error("子线程消息异常:",vh);break}};Ge["LoadTerrain"]=function(wh,xh,yh,zh){Ge.postMessage({m_nID:2,m_pPath:we["WASM"].GetString(wh),m_nRequest:xh,m_nAlloc:yh,m_nCallback:zh})};Ge["OnLoadTerrain"]=function(Ah){var Bh=xe.get(Ah.m_nAlloc);var Ch=xe.get(Ah.m_nCallback);var Dh=Ah.m_pData;if(Dh){var Eh=Bh(Ah.m_nRequest,Dh.byteLength);if(Eh){we["WASM"]["HEAPU8"](Eh,Dh.byteLength).set(new Uint8Array(Dh))}}else{console.warn("Terrain miss:",Ah.m_pPath)}Ch(Ah.m_nRequest)};Ge["LoadBlockbox"]=function Fh(Gh,Hh,Ih,Jh,Kh,Lh,Mh){Ge.postMessage({m_nID:3,m_nRequest:Gh,m_nCol:Hh,m_nRow:Ih,m_nColOffset:Jh,m_nRowOffset:Kh,m_nAlloc:Lh,m_nCallback:Mh})};Ge["OnLoadBlockbox"]=function(Nh){var Oh=xe.get(Nh.m_nAlloc);var Ph=xe.get(Nh.m_nCallback);var Qh=Nh.m_pData;var Rh=[0,0,0,0];for(var Sh=0;Sh<4;Sh++){var Th=Qh[Sh];if(0<Th.m_nVertexCount&&0<Th.m_nSubmeshCount){var Uh=new we.Mesh;var Vh=new Int32Array(Th.m_aIndex);Uh.position=new Float32Array(Th.m_aPosition);Uh.normal=new Float32Array(Th.m_aNormal);Uh.uv=new Float32Array(Th.m_aUV);for(var Wh=0;Wh<Th.m_nSubmeshCount;Wh++){var Xh=Vh[2*Wh];var Yh=Vh[2*Wh+1];var Zh=[];for(var $h=Xh;$h<Yh;$h++){Zh.push($h)}Uh.SetIndices(Wh,new Int32Array(Zh),4)}Uh.Apply();Rh[Sh]=Uh.m_nObject}else{Rh[Sh]=0}}var _h=Oh(Nh.m_nRequest,16);if(_h){we["WASM"]["HEAPU32"](_h,16).set(new Uint32Array(Rh));Ph(Nh.m_nRequest)}};return Ge}we["WASM"]=we["WASM"]||{};we["WASM"]["LoadMiaokit"]=Le;we["WASM"]["GetObject"]=Me;we["WASM"]["RegisterDelegate"]=Qe;return[]});MiaokitMerge(function(ai){var bi=undefined;var ci={};var di=[];var ei={RGBA32_FLOAT:function(){return[bi.RGBA,bi.RGBA,bi.FLOAT]},RGBA16_FLOAT:function(){return[bi.RGBA,bi.RGBA,36193]},RGBA8:function(){return[bi.RGBA,bi.RGBA,bi.UNSIGNED_BYTE]},D16_UNORM:function(){return[bi.DEPTH_COMPONENT,bi.DEPTH_COMPONENT,bi.UNSIGNED_SHORT]},D24_UNORM:function(){return[bi.DEPTH_COMPONENT,bi.DEPTH_COMPONENT,bi.UNSIGNED_INT]},D24S8_UNORM:function(){return[bi.DEPTH_STENCIL,bi.DEPTH_STENCIL,34042]}};var fi={Opaque:1,Transparent:2,Outline:4,CastShadow:8,ReceiveShadow:16};var gi=null;var hi=["u_Object","u_Color","u_EyePos","u_MatW","u_MatVP","u_MatWVP","u_MainTex","u_Sunlight"];var ii=[null];var ji=[null];var ki=[null];var li=[null];var mi=[new Int32Array([0,0,0,0]),new Float32Array([0,0,0,0]),new Float32Array([1,0,0,0,1,0,0,0,1]),new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),new Int32Array([0,0,0,0]),new Int32Array([0,0,0,0])];var ni=[function(Hi,Ii,Ji){bi.uniform4iv(ii[Hi],li[Ii])},function(Ki,Li,Mi){bi.uniform4fv(ii[Ki],li[Li])},function(Ni,Oi,Pi){bi.uniformMatrix3fv(ii[Ni],false,li[Oi])},function(Qi,Ri,Si){bi.uniformMatrix4fv(ii[Qi],false,li[Ri])},function(Ti,Ui,Vi){var Wi=li[Ui];var Xi=Wi[1];if(Wi[0]){Xi=Fi.GetTexture(Xi);if(Xi){Wi[0]=0;Wi[1]=Xi}}bi.uniform1i(ii[Ti],Vi);bi.activeTexture(33984+Vi);bi.bindTexture(3553,di[Xi])},function(Yi,Zi){console.error("Unsupported UniformCubemap!")}];var oi=[null];var pi=[null];var qi=[function($i){var _i=ai["ShaderLab"]["Pipeline"]["InternalShader"][$i];var aj=yi(_i);return aj.id},vi,function(bj,cj,dj,ej){ni[bj](cj,dj,ej);return 0},function(fj,gj,hj,ij){var jj=ai["WASM"].GetString(ij);var kj=li[fj];var lj=ki[kj[19]];var mj=lj[jj];return undefined===mj?0:mj},function(nj,oj){pi[oj][1]();return 0},function(){Fi.Draw()},zi];var ri=1280;var si=720;var ti=0;var ui=null;function vi(pj,qj,rj,sj){var tj=null;switch(qj){case 0:tj=new Int32Array(gi,sj,4);tj.set(mi[0]);break;case 1:tj=new Float32Array(gi,sj,4);tj.set(mi[1]);break;case 2:tj=new Float32Array(gi,sj,9);tj.set(mi[2]);break;case 3:tj=new Float32Array(gi,sj,16);tj.set(mi[3]);break;case 4:tj=new Int32Array(gi,sj,4);tj.set(mi[4]);break;case 5:tj=new Int32Array(gi,sj,4);tj.set(mi[5]);break;case 6:tj=new Int32Array(gi,sj,rj);break;default:console.error("Unsupported uniform type:",qj);break}li[pj]=tj;return pj}function wi(uj,vj){var wj=bi.createShader(uj);if(!wj){console.error("Could not create shader object!");return null}bi.shaderSource(wj,vj);bi.compileShader(wj);if(!bi.getShaderParameter(wj,bi.COMPILE_STATUS)){var xj=bi.getShaderInfoLog(wj);bi.deleteShader(wj);console.error("Could not compile shader! \n\n"+xj);return null}return wj}function xi(yj){var zj=yj.program;var Aj=0;{bi.bindAttribLocation(zj,0,"a_Position");bi.bindAttribLocation(zj,1,"a_Normal");bi.bindAttribLocation(zj,2,"a_UV");bi.bindAttribLocation(zj,3,"a_Color");bi.bindAttribLocation(zj,4,"a_Tangent");bi.bindAttribLocation(zj,5,"a_Binormal");bi.bindAttribLocation(zj,9,"a_UV2");if(7<bi.getProgramParameter(zj,bi.ACTIVE_ATTRIBUTES)){bi.bindAttribLocation(zj,10,"a_UV3");bi.bindAttribLocation(zj,11,"a_UV4");bi.bindAttribLocation(zj,12,"a_UV5");bi.bindAttribLocation(zj,13,"a_UV6");bi.bindAttribLocation(zj,14,"a_UV7");bi.bindAttribLocation(zj,15,"a_UV8")}}{bi.linkProgram(zj);if(!bi.getProgramParameter(zj,bi.LINK_STATUS)){var Bj=bi.getProgramInfoLog(zj);console.error("Could not compile program! \n\n"+Bj);return 0}}{var Cj=bi.getProgramParameter(zj,35718);var Dj=Fi.CreateUniformsDesc(Cj);var Ej=li[Dj];var Fj={};var Gj=0;Ej[19]=ki.push(Fj)-1;oi[Ej[19]]=yj;for(var Hj=0;Hj<2;Hj++){for(var Ij=0;Ij<Cj;Ij++){var Bj=bi.getActiveUniform(zj,Ij);var Jj=Bj.type;if(35678===Jj||35680===Jj){if(0!==Hj){continue}}else{if(1!==Hj){continue}}var Kj=Bj.name;var Lj=bi.getUniformLocation(zj,Kj);var Mj=ii.push(Lj)-1;for(var Nj=0;Nj<hi.length;Nj++){if(Kj===hi[Nj]){Ej[Nj]=Gj;break}}switch(Jj){case 35669:Jj=0;break;case 35666:Jj=1;break;case 35675:Jj=2;break;case 35676:Jj=3;break;case 35678:Jj=4;break;case 35680:Jj=5;break;default:console.error("Unsupported uniform type:",Bj);break}Ej[20+Gj]=Mj;Ej[20+Cj+Gj]=Jj;Fj[Kj]=Gj;ji[Mj]=Kj;Gj++}}Aj=Ej[16]}{var Oj=0;if(yj.mark){for(var Pj=0,Qj=yj.mark;Pj<Qj.length;Pj++){var Rj=Qj[Pj];Oj|=fi[Rj]}}yj.mode=Oj}return Aj}function yi(Sj){if(!Sj){return null}var Tj=ci[Sj];if(!Tj){console.error("Could not find shader:",Sj);return null}if(Tj.program){return Tj}Tj.vs=wi(bi.VERTEX_SHADER,ci["Common"]["DeclareVS"]+Tj.vs_src+ci["Common"][Tj.type+"VS"]);if(!Tj.vs){console.error("Could not create vertex shader:",Sj);return null}Tj.fs=wi(bi.FRAGMENT_SHADER,ci["Common"]["DeclareFS"]+Tj.fs_src+ci["Common"][Tj.type+"FS"]);if(!Tj.fs){bi.deleteShader(Tj.vs);Tj.vs=null;console.error("Could not create fragment shader:",Sj);return null}Tj.program=bi.createProgram();if(!Tj.program){bi.deleteShader(Tj.vs);bi.deleteShader(Tj.fs);Tj.vs=null;Tj.fs=null;console.error("Could not create program object!");return null}bi.attachShader(Tj.program,Tj.vs);bi.attachShader(Tj.program,Tj.fs);Tj.id=xi(Tj);if(!Tj.id){bi.deleteProgram(Tj.program);bi.deleteShader(Tj.vs);bi.deleteShader(Tj.fs);Tj.program=null;Tj.vs=null;Tj.fs=null}return Tj}function zi(Uj,Vj){var Wj=undefined;var Xj=undefined;var Yj=undefined;var Zj=undefined;var $j=0;function _j(){var jk=li[Uj];var kk=li[Vj];var lk=oi[jk[19]];var mk=jk[20];var nk=20+jk[17];Wj=lk.program;Xj=ki[jk[19]];Yj=jk;Zj=[];$j=jk[17];var ok=function(xk){var yk=xk;var zk=li[kk[yk]];var Ak=ii[mk+yk];var Bk=jk[nk+yk];var Ck=[function(){return zk},function(Dk){zk.set(Dk)},undefined];switch(Bk){case 0:Ck[2]=function(){bi.uniform4iv(Ak,zk)};break;case 1:Ck[2]=function(){bi.uniform4fv(Ak,zk)};break;case 2:Ck[2]=function(){bi.uniformMatrix3fv(Ak,false,zk)};break;case 3:Ck[2]=function(){bi.uniformMatrix4fv(Ak,false,zk)};break;case 4:Ck[2]=function(){var Ek=zk[1];if(zk[0]){Ek=Fi.GetTexture(Ek);if(Ek){zk[0]=0;zk[1]=Ek}}bi.uniform1i(Ak,yk);bi.activeTexture(33984+yk);bi.bindTexture(3553,di[Ek])};break;default:console.error("Unsupported uniform type!",Bk);break}Zj[yk]=Ck};for(var pk=0;pk<$j;pk++){ok(pk)}if(lk.uniform_values){for(var qk=0,rk=lk.uniform_values;qk<rk.length;qk++){var sk=rk[qk];var tk=Xj[sk[0]];if(undefined!==tk){var uk=jk[nk+tk];if(4===uk||5===uk){var vk=Fi.Pipeline["Resource"][sk[1]];var wk=[0,vk.Handle,0,0];Zj[tk][1](wk)}}}}return lk.mode}function ak(){if(ui){ui(pi[Vj],bi)}bi.useProgram(Wj);ti=Uj;for(var Fk=0,Gk=Zj;Fk<Gk.length;Fk++){var Hk=Gk[Fk];Hk[2]()}}function bk(Ik){return Xj[Ik]}function ck(Jk){return Zj[Jk][0]()}function dk(Kk){Kk=Yj[Kk];if(-1<Kk){return Zj[Kk][0]()}return null}function ek(Lk){var Mk=Xj[Lk];if(undefined!==Mk){return Zj[Mk][0]()}return null}function fk(Nk,Ok){Zj[Nk][1](Ok);if(ti===Uj){Zj[Nk][2]()}}function gk(Pk,Qk){Pk=Yj[Pk];if(-1<Pk){Zj[Pk][1](Qk);if(ti===Uj){Zj[Pk][2]()}}}function hk(Rk,Sk){var Tk=Xj[Rk];if(undefined!==Tk){Zj[Tk][1](Sk);if(ti===Uj){Zj[Tk][2]()}}}function ik(Uk){Zj[Uk][2]()}pi[Vj]=[_j,ak,bk,ck,dk,ek,fk,gk,hk,ik];return _j()}function Ai(Vk){{Object.defineProperty(Vk,"Attr",{get:function(){if(!this.Attr_){this.Attr_=pi[this._VarList()]}return this.Attr_}})}{var Wk=function(Yk){var Zk=Yk;Object.defineProperty(Vk,hi[Yk],{get:function(){return this.Attr[4](Zk)},set:function($k){if($k){this.Attr[7](Zk,$k)}}})};for(var Xk=0;Xk<hi.length;Xk++){Wk(Xk)}}{}}function Bi(_k,al,bl,cl,dl){return qi[_k](al,bl,cl,dl)}function Ci(el){var fl=bi.createTexture();if(!fl){console.error("Could not create texture object!");return null}bi.bindTexture(bi.TEXTURE_2D,fl);bi.texParameteri(bi.TEXTURE_2D,bi.TEXTURE_MIN_FILTER,bi.LINEAR);bi.texParameteri(bi.TEXTURE_2D,bi.TEXTURE_MAG_FILTER,bi.LINEAR);bi.texParameteri(bi.TEXTURE_2D,bi.TEXTURE_WRAP_S,bi.CLAMP_TO_EDGE);bi.texParameteri(bi.TEXTURE_2D,bi.TEXTURE_WRAP_T,bi.CLAMP_TO_EDGE);var gl=new Image;gl.crossOrigin="anonymous";gl.src=el.URL;gl.onload=function(hl){bi.bindTexture(bi.TEXTURE_2D,fl);bi.texImage2D(bi.TEXTURE_2D,0,bi.RGB,bi.RGB,bi.UNSIGNED_BYTE,gl);bi.bindTexture(bi.TEXTURE_2D,null)};bi.bindTexture(bi.TEXTURE_2D,null);return fl}function Di(il,jl,kl,ll){if(ll===void 0){ll=null}var ml=bi.createTexture();if(!ml){console.error("Could not create texture object!");return null}bi.bindTexture(bi.TEXTURE_2D,ml);bi.texParameteri(bi.TEXTURE_2D,bi.TEXTURE_MIN_FILTER,bi.NEAREST);bi.texParameteri(bi.TEXTURE_2D,bi.TEXTURE_MAG_FILTER,bi.NEAREST);bi.texParameteri(bi.TEXTURE_2D,bi.TEXTURE_WRAP_S,bi.CLAMP_TO_EDGE);bi.texParameteri(bi.TEXTURE_2D,bi.TEXTURE_WRAP_T,bi.CLAMP_TO_EDGE);var nl=ei[il]();bi.texImage2D(bi.TEXTURE_2D,0,nl[0],jl,kl,0,nl[1],nl[2],ll);bi.bindTexture(bi.TEXTURE_2D,null);ml["_Format"]=nl;return ml}function Ei(ol,pl){var ql=bi.createFramebuffer();if(!ql){console.error("Could not create framebuffer object!");return null}bi.bindFramebuffer(bi.FRAMEBUFFER,ql);bi.framebufferTexture2D(bi.FRAMEBUFFER,bi.COLOR_ATTACHMENT0,bi.TEXTURE_2D,ol,0);if(pl&&pl["_Format"][0]===bi.DEPTH_STENCIL){bi.framebufferTexture2D(bi.FRAMEBUFFER,bi.DEPTH_STENCIL_ATTACHMENT,bi.TEXTURE_2D,pl,0)}else{bi.framebufferTexture2D(bi.FRAMEBUFFER,bi.DEPTH_ATTACHMENT,bi.TEXTURE_2D,pl,0)}if(bi.FRAMEBUFFER_COMPLETE!=bi.checkFramebufferStatus(bi.FRAMEBUFFER)){bi.deleteFramebuffer(ql);console.error("Framebuffer check failed!");return null}return ql}var Fi={_name:"ShaderLab",Shader:ci,Pipeline:{},Init:function(rl){bi=ai["GL"]["Ctx"];di=ai["GL"]["_textures"];ri=bi.canvas.width;si=bi.canvas.height;for(var sl=0,tl=this.Pipeline.RenderTarget;sl<tl.length;sl++){var ul=tl[sl];if(ul){var vl=ul.Width||ri;var wl=ul.Height||si;ul.Texture=Di(ul.Format,vl,wl);ul.Handle=ai["GL"]["RegisterTexture"](ul.Texture);ul.Size=[1/vl,1/wl,vl,wl]}}for(var xl=0,yl=this.Pipeline.Resource;xl<yl.length;xl++){var zl=yl[xl];if(zl){if("2D"===zl.TYPE){zl.Texture=Ci(zl);zl.Handle=ai["GL"]["RegisterTexture"](zl.Texture)}}}function Al(Kl){var Ll=Kl.RenderTarget;if(Ll){var Ml=Fi.Pipeline["RenderTarget"][Ll[0]];var Nl=Fi.Pipeline["RenderTarget"][Ll[1]];Kl.Framebuffer=Ei(Ml.Texture,Nl?Nl.Texture:null);Kl.Framebuffer.width=Ml.Size[2];Kl.Framebuffer.height=Ml.Size[3]}else{Kl.Framebuffer=null}}for(var Bl=0,Cl=this.Pipeline.Pass;Bl<Cl.length;Bl++){var Dl=Cl[Bl];if(Dl){if("Clear"===Dl.Type){Dl._Type=2}else{Dl._Type="Render"===Dl.Type?0:1}Dl._Mask=0;for(var El=0,Fl=Dl.Mask;El<Fl.length;El++){var Gl=Fl[El];Dl._Mask+=fi[Gl]}Al(Dl);if(Dl.Pingpong){for(var Hl=0,Il=Dl.Pingpong;Hl<Il.length;Hl++){var Jl=Il[Hl];Al(Jl)}}}}},Draw:function(){var Ol=0;for(var Pl=0,Ql=this.Pipeline.Pass;Pl<Ql.length;Pl++){var Rl=Ql[Pl];Gi.BeginDrawPass();if(Rl.Pingpong){for(var Sl=0;Sl<Rl.PingpongCount;Sl++){for(var Tl=0;Tl<Rl.Pingpong.length;Tl++){Rl.Framebuffer=Rl.Pingpong[Tl].Framebuffer;Rl.SetUniforms=Rl.Pingpong[Tl].SetUniforms;this.DrawPass(Rl,Fi.DrawPass_)}}}else{this.DrawPass(Rl,Fi.DrawPass_)}Gi.EndDrawPass(Ol++)}},DrawPass:function(Ul,Vl){bi.bindFramebuffer(bi.FRAMEBUFFER,Ul.Framebuffer);if(Ul.Framebuffer){bi.viewport(0,0,Ul.Framebuffer.width,Ul.Framebuffer.height)}else{bi.viewport(0,0,ri,si)}var Wl=Ul.Depth;if(Wl){bi.enable(bi.DEPTH_TEST);bi.depthMask(Wl.Write);bi.depthFunc(bi[Wl.Func])}else{bi.disable(bi.DEPTH_TEST)}var Xl=Ul.Blend;if(Xl){bi.enable(bi.BLEND);bi.blendEquationSeparate(bi[Xl.ColorFunc],bi[Xl.AlphaFunc]);bi.blendFuncSeparate(bi[Xl.ColorSrc],bi[Xl.ColorDest],bi[Xl.AlphaSrc],bi[Xl.AlphaDest])}else{bi.disable(bi.BLEND)}var Yl=Ul.Stencil;if(Yl){bi.enable(bi.STENCIL_TEST);bi.stencilFunc(bi[Yl.Func],Yl.Value,Yl.Mask);bi.stencilOp(bi[Yl.Faild],bi[Yl.ZFaild],bi[Yl.Pass])}else{bi.disable(bi.STENCIL_TEST)}var Zl=Ul.ClearTarget;if(Zl){var $l=0;if(Zl.Color){bi.clearColor(Zl.Color.r,Zl.Color.g,Zl.Color.b,Zl.Color.a);$l+=bi.COLOR_BUFFER_BIT}if(undefined!==Zl.Depth){bi.clearDepth(Zl.Depth);$l+=bi.DEPTH_BUFFER_BIT}if(undefined!==Zl.Stencil){bi.clearStencil(Zl.Stencil);$l+=bi.STENCIL_BUFFER_BIT}bi.clear($l)}ui=Ul.SetUniforms;if(Ul.Shader){if(!Ul._Material){Ul._Material=new ai["Material"](Ul.Shader)}Ul._Material._Bind()}Vl(Ul._Type,Ul._Mask)},PreflushBuffer:function(){var _l=li.length;var am=new Array(_l);for(var bm=0;bm<_l;bm++){var cm=li[bm];if(cm){if("Float32Array"===cm.constructor.name){am[bm]=cm.length}else{am[bm]=-cm.length}li[bm]=cm.byteOffset}}return am},FlushBuffer:function(dm,em){gi=dm;var fm=li.length;for(var gm=0;gm<fm;gm++){var hm=li[gm];if(hm){var im=em[gm];if(0<im){li[gm]=new Float32Array(gi,hm,im)}else{li[gm]=new Int32Array(gi,hm,-im)}}}for(var gm=0;gm<fm;gm++){var jm=pi[gm];if(jm){jm[0]()}}ai["GL"]["FlushHeap"]()},ResizeCanvas:function(km,lm){},ExpandMaterial:Ai,OperateMaterial:Bi,CreateUniformsDesc:undefined,GetTexture:undefined,DrawPass_:undefined,SetSunlight:undefined};var Gi={_name:"Profiler",m_pMsg:"",m_nCycleStart:0,m_nCycleTick:0,m_nBeginCycle:0,m_nTotalCycle:0,m_nBeginScript:0,m_nTotalScript:0,m_nBeginUpdate:0,m_nTotalUpdate:0,m_nBeginDraw:0,m_nTotalDraw:0,m_nBeginMaterial:0,m_nTotalMaterial:0,m_nBeginDrawPass:0,m_nTotalDrawPass:[],BeginCycle:function(){if(0===Gi.m_nCycleTick){Gi.m_nCycleStart=ai["Time"]();Gi.m_nCycleTick=0;Gi.m_nBeginCycle=0;Gi.m_nTotalCycle=0;Gi.m_nBeginScript=0;Gi.m_nTotalScript=0;Gi.m_nBeginUpdate=0;Gi.m_nTotalUpdate=0;Gi.m_nBeginDraw=0;Gi.m_nTotalDraw=0;Gi.m_nBeginMaterial=0;Gi.m_nTotalMaterial=0;Gi.m_nBeginDrawPass=0;Gi.m_nTotalDrawPass=[]}Gi.m_nBeginCycle=ai["Time"]()},EndCycle:function(){Gi.m_nTotalCycle+=ai["Time"]()-Gi.m_nBeginCycle;if(60===++Gi.m_nCycleTick){var mm={"总耗时":ai["Time"]()-Gi.m_nCycleStart,"应用循环":Gi.m_nTotalCycle,"脚本逻辑":Gi.m_nTotalScript,"场景更新":Gi.m_nTotalUpdate,"场景绘制":Gi.m_nTotalDraw,"通道绘制":Gi.m_nTotalDrawPass};Gi.m_pMsg="'开销统计':"+JSON.stringify(mm);Gi.m_nCycleTick=0}},BeginScript:function(){Gi.m_nBeginScript=ai["Time"]()},EndScript:function(){Gi.m_nTotalScript+=ai["Time"]()-Gi.m_nBeginScript},BeginUpdate:function(){Gi.m_nBeginUpdate=ai["Time"]()},EndUpdate:function(){Gi.m_nTotalUpdate+=ai["Time"]()-Gi.m_nBeginUpdate},BeginDraw:function(){Gi.m_nBeginDraw=ai["Time"]()},EndDraw:function(){Gi.m_nTotalDraw+=ai["Time"]()-Gi.m_nBeginDraw},BeginMaterial:function(){Gi.m_nBeginMaterial=ai["Time"]()},EndMaterial:function(){Gi.m_nTotalMaterial+=ai["Time"]()-Gi.m_nBeginMaterial},BeginDrawPass:function(){Gi.m_nBeginDrawPass=ai["Time"]()},EndDrawPass:function(nm){Gi.m_nTotalDrawPass[nm]=(Gi.m_nTotalDrawPass[nm]?Gi.m_nTotalDrawPass[nm]:0)+ai["Time"]()-Gi.m_nBeginDrawPass}};Fi.Shader["Common"]={DeclareVS:"\nprecision highp float;\n\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute vec2 a_UV;\nattribute vec4 a_Color;\nattribute vec4 a_Tangent;\nattribute vec4 a_Binormal;\nattribute vec2 a_UV2;\n\n/// ID、透明标记\nuniform vec4 u_Object;\nuniform vec4 u_EyePos;\nuniform vec4 u_Sunlight;\n\nuniform mat4 u_MatW;\nuniform mat4 u_MatVP;\nuniform mat4 u_MatWVP;\n\nvarying vec3 v_Position;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec2 v_UV;\nvarying vec4 v_Color;\n\n/// 对象空间坐标转世界空间坐标\nvec3 ObjectToWorldPos(vec3 i_Position)\n{\n    return (u_MatW * vec4(i_Position, 1.0)).xyz;\n}\n\n/// 对象空间坐标转裁剪空间坐标\nvec4 ObjectToClipPos(vec3 i_Position)\n{\n    return u_MatWVP * vec4(i_Position, 1.0);\n}\n\n/// 对象空间法线转世界空间法线\nvec3 ObjectToWorldNormal(vec3 i_Normal)\n{\n    return normalize((u_MatW * vec4(i_Normal, 0.0)).xyz);\n}\n       ",DeclareFS:"\nprecision highp float;\n\n/// ID、透明标记\nuniform vec4 u_Object;\nuniform vec4 u_EyePos;\nuniform vec4 u_Sunlight;\n\nuniform mat4 u_MatW;\nuniform mat4 u_MatVP;\nuniform mat4 u_MatWVP;\nuniform sampler2D u_MainTex;\nuniform sampler2D u_DepthTex;\n\nvarying vec3 v_Position;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec2 v_UV;\nvarying vec4 v_Color;\n\n/// 对象空间坐标转世界空间坐标\nvec3 ObjectToWorldPos(vec3 i_Position)\n{\n    return (u_MatW * vec4(i_Position, 1.0)).xyz;\n}\n\n/// 对象空间坐标转裁剪空间坐标\nvec4 ObjectToClipPos(vec3 i_Position)\n{\n    return u_MatWVP * vec4(i_Position, 1.0);\n}\n\n/// 采样2D纹理\nvec4 Tex2D(sampler2D i_Tex, vec2 i_UV)\n{\n    i_UV.x = fract(i_UV.x);\n    i_UV.y = fract(1.0 - i_UV.y);\n\n    return texture2D(i_Tex, i_UV);\n}\n\n/// 默认光照函数\nfloat DefaultLight(vec3 v_Normal)\n{\n    vec3 _Normal = normalize(v_Normal);\n    vec3 _Light = normalize(vec3(2.0, 3.0, 1.0));\n\n    return clamp(dot(_Normal, _Light), 0.0, 1.0) + 0.2;\n}\n        ",ClearVS:"\nvoid main()\n{\n    gl_Position = vs();\n}\n        ",ClearFS:"\nvoid main()\n{\n    gl_FragColor = fs();\n}\n        ",RenderVS:"\nvoid main()\n{\n    gl_Position = vs();\n}\n        ",RenderFS:"\nvoid main()\n{\n    gl_FragColor = fs();\n    \n    /// 轮廓显示区域标记\n    {\n        gl_FragColor.a = 0.99;\n    }\n}\n        ",PostprocessVS:"\nvoid main()\n{\n    gl_Position = vs();\n}\n        ",PostprocessFS:"\nvoid main()\n{\n    gl_FragColor = fs();\n}\n        ",BRDF:'\nconst float PI = 3.14159265358979323846;\n\nconst vec3 baseColor = vec3(0.5, 0.5, 0.5);\nconst float metallic = 0.0;\nconst float subsurface = 0.5; // 0.0\nconst float specular = 0.2;\nconst float roughness = 0.7;//0.5;\nconst float specularTint = 0.0;\nconst float anisotropic = 0.0;\nconst float sheen = 0.0;\nconst float sheenTint = 0.5;\nconst float clearcoat = 0.0;\nconst float clearcoatGloss = 1.0;\n\nfloat sqr(float x) { return x * x; }\n\nfloat SchlickFresnel(float u)\n{\n\tfloat m = clamp(1.0 - u, 0.0, 1.0);\n\tfloat m2 = m * m;\n\treturn m2 * m2 * m; // pow(m,5)\n}\n\nfloat GTR1(float NdotH, float a)\n{\n\tif (a >= 1.0) return 1.0 / PI;\n\tfloat a2 = a * a;\n\tfloat t = 1.0 + (a2 - 1.0) * NdotH * NdotH;\n\treturn (a2 - 1.0) / (PI * log(a2) * t);\n}\n\nfloat GTR2(float NdotH, float a)\n{\n\tfloat a2 = a * a;\n\tfloat t = 1.0 + (a2 - 1.0) * NdotH * NdotH;\n\treturn a2 / (PI * t * t);\n}\n\nfloat GTR2_aniso(float NdotH, float HdotX, float HdotY, float ax, float ay)\n{\n\treturn 1.0 / (PI * ax * ay * sqr(sqr(HdotX / ax) + sqr(HdotY / ay) + NdotH * NdotH));\n}\n\nfloat smithG_GGX(float NdotV, float alphaG)\n{\n\tfloat a = alphaG * alphaG;\n\tfloat b = NdotV * NdotV;\n\treturn 1.0 / (NdotV + sqrt(a + b - a * b));\n}\n\nfloat smithG_GGX_aniso(float NdotV, float VdotX, float VdotY, float ax, float ay)\n{\n\treturn 1.0 / (NdotV + sqrt(sqr(VdotX * ax) + sqr(VdotY * ay) + sqr(NdotV)));\n}\n\nvec3 mon2lin(vec3 x)\n{\n\treturn vec3(pow(x[0], 2.2), pow(x[1], 2.2), pow(x[2], 2.2));\n}\n\nvec3 BRDF(vec3 L, vec3 V, vec3 N, vec3 X, vec3 Y)\n{\n    //x和y方向分别表示了表面的切向量和副法线向量方向\n    //https://www.cnblogs.com/starfallen/p/3572352.html\n\n\tfloat NdotL = dot(N, L);\n\tfloat NdotV = dot(N, V);\n\tif (NdotL < 0.0 || NdotV < 0.0) return vec3(0.0);\n\n\tvec3 H = normalize(L + V);\n\tfloat NdotH = dot(N, H);\n\tfloat LdotH = dot(L, H);\n\n\tvec3 Cdlin = mon2lin(baseColor);\n\tfloat Cdlum = 0.3 * Cdlin[0] + 0.6 * Cdlin[1] + 0.1 * Cdlin[2]; // luminance approx.\n\n\tvec3 Ctint = Cdlum > 0.0 ? Cdlin / Cdlum : vec3(1.0); // normalize lum. to isolate hue+sat\n\tvec3 Cspec0 = mix(specular * 0.08 * mix(vec3(1.0), Ctint, specularTint), Cdlin, metallic);\n\tvec3 Csheen = mix(vec3(1.0), Ctint, sheenTint);\n\n\t// Diffuse fresnel - go from 1 at normal incidence to .5 at grazing\n\t// and mix in diffuse retro-reflection based on roughness\n\tfloat FL = SchlickFresnel(NdotL), FV = SchlickFresnel(NdotV);\n\tfloat Fd90 = 0.5 + 2.0 * LdotH * LdotH * roughness;\n\tfloat Fd = mix(1.0, Fd90, FL) * mix(1.0, Fd90, FV);\n\n\t// Based on Hanrahan-Krueger brdf approximation of isotropic bssrdf\n\t// 1.25 scale is used to (roughly) preserve albedo\n\t// Fss90 used to "flatten" retroreflection based on roughness\n\tfloat Fss90 = LdotH * LdotH * roughness;\n\tfloat Fss = mix(1.0, Fss90, FL) * mix(1.0, Fss90, FV);\n\tfloat ss = 1.25 * (Fss * (1.0 / (NdotL + NdotV) - 0.5) + 0.5);\n\n\t// specular\n\tfloat aspect = sqrt(1.0 - anisotropic * 0.9);\n\tfloat ax = max(0.001, sqr(roughness) / aspect);\n\tfloat ay = max(0.001, sqr(roughness) * aspect);\n\tfloat Ds = GTR2_aniso(NdotH, dot(H, X), dot(H, Y), ax, ay);\n\tfloat FH = SchlickFresnel(LdotH);\n\tvec3 Fs = mix(Cspec0, vec3(1.0), FH);\n\tfloat Gs;\n\tGs = smithG_GGX_aniso(NdotL, dot(L, X), dot(L, Y), ax, ay);\n\tGs *= smithG_GGX_aniso(NdotV, dot(V, X), dot(V, Y), ax, ay);\n\n\t// sheen\n\tvec3 Fsheen = FH * sheen * Csheen;\n\n\t// clearcoat (ior = 1.5 -> F0 = 0.04)\n\tfloat Dr = GTR1(NdotH, mix(0.1, 0.001, clearcoatGloss));\n\tfloat Fr = mix(0.04, 1.0, FH);\n\tfloat Gr = smithG_GGX(NdotL, 0.25) * smithG_GGX(NdotV, 0.25);\n\n\treturn ((1.0 / PI) * mix(Fd, ss, subsurface) * Cdlin + Fsheen) * (1.0 - metallic) + Gs * Fs * Ds + 0.25 * clearcoat * Gr * Fr * Dr;\n}\n        ',AtmosphereVS:"\nvarying vec3 v_ViewDir;\nvarying vec3 v_Scattering;\nvarying vec3 v_Attenuate;\nvarying vec3 v_AttenuateGround;\n\n//P and ray define the line; O is the sphere's center point\nvec3 CalculateIntersection(vec3 P, vec3 ray, vec3 O, float r)\n{\n\tvec3 PO = O - P;\n\tfloat lPO = length(PO);\n\tfloat B = 2.0 * dot(PO, ray);\n\n\tfloat C = B * B - 4.0 * (lPO * lPO - r * r);\n\tfloat det = sqrt(max(0.0, C));\n\n\tfloat d = 0.5*(B-det);\n\tvec3 intersect = P + d * ray;\n\n\treturn intersect;\n}\n\nvoid Atmosphere(vec3 mLightDir, vec3 mWorldPos)\n{\n    // 大气散射，天空应分两层，摄像机应该在内层之外，大气层厚度为外层半径减内层半径，外层半径应远大于内层半径\n    //650 nm for red; 570 nm for green; 475 nm for blue\n    vec3 _Wave = vec3(5.602046, 9.473285, 20.49314);\n    vec3 _ESun = vec3(20.0, 20.0, 20.0);\n    vec3 _PlanetPos = vec3(0.0, -6378137.0, 0.0);\n    float _Sealevel = 6378137.0;\n    float _OuterRadius = 6478137.0;\n    float _SampleNum = 5.0;\n    //Rayleigh scattering constant\n    float _Kr = 0.0025;\n    //Mie scattering constant\n    float _Km = 0.001;\n    //the altitude at which the atmosphere's average density is found\n    float _H0 = 0.25;\n\n    vec3 mRay = mWorldPos - u_EyePos.xyz;\n    float nDepth = length(mRay); mRay = mRay / nDepth;\n\n    float nSampleLength = nDepth / _SampleNum;\n    vec3 mSampleRay = mRay * nSampleLength;\n    vec3 mSamplePoint = u_EyePos.xyz + mSampleRay * 0.5;\n    vec3 mInScattering = vec3(0.0, 0.0, 0.0);\n    vec3 mOutScatteringAB = vec3(0.0, 0.0, 0.0);\n    vec3 mOutGroundScatteringAB = vec3(0.0, 0.0, 0.0);\n    float nInvOuterH = 1.0 / (_OuterRadius-_Sealevel);\n\n    for(int i=0; i</*_SampleNum*/5; i++)\n    {\n\t    vec3 mCrossPoint = CalculateIntersection(mSamplePoint, -mLightDir, _PlanetPos, _OuterRadius);\n\t    //AP out scattering\n\t    vec3 mAPRay = (mSamplePoint - u_EyePos.xyz) / _SampleNum;\n\t    float nAPRayLength = length(mAPRay);\n\t    vec3 mSampleAP = u_EyePos.xyz + mAPRay * 0.5;\n\t    vec3 mOutScatteringAP = vec3(0.0, 0.0, 0.0);\n\n\t    for(int m=0; m</*_SampleNum*/5; m++)\n\t    {\n\t\t    mOutScatteringAP += exp(-(length(mSampleAP - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nAPRayLength * nInvOuterH;\n\t\t    mSampleAP += mAPRay;\n\t    }\n\t    mOutScatteringAP = 4.0 * 3.14 * (_Km + _Kr * _Wave) * mOutScatteringAP;\n\n\t    //PC out scattering\n\t    vec3 mPCRay = (mCrossPoint - mSamplePoint) / _SampleNum;\n\t    float nPCRayLength = length(mPCRay);\n\t    vec3 mSamplePC = mSamplePoint + mPCRay*0.5;\n\t    vec3 mOutScatteringPC = vec3(0.0, 0.0, 0.0);\n\n\t    for(int n=0; n</*_SampleNum*/5; n++)\n\t    {\n\t\t    mOutScatteringPC += exp(-(length(mSamplePC - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nPCRayLength * nInvOuterH;\n\t\t    mSamplePC += mPCRay;\n\t    }\n\t    mOutScatteringPC = 4.0 * 3.14 * (_Km + _Kr * _Wave) * mOutScatteringPC;\n\n\t    mInScattering += exp(-(length(mSamplePoint - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nSampleLength * nInvOuterH * exp(-mOutScatteringAP - mOutScatteringPC);\n\t    mSamplePoint+=mSampleRay;\n\t    mOutScatteringAB = mCrossPoint;\n        mOutGroundScatteringAB = mOutScatteringAP + mOutScatteringPC;\n    }\n\n    v_ViewDir = u_EyePos.xyz - mWorldPos;\t\n    v_Scattering = mInScattering * _ESun * _Kr * _Wave;\n    v_Attenuate = mInScattering * _ESun * _Km;\n    v_AttenuateGround = exp(-mOutGroundScatteringAB);\n    \n    // Ground : v_ScatteringR = v_Scattering; v_ScatteringM = v_Attenuate; v_Attenuate = v_AttenuateGround;\n    //v_ViewDir = u_EyePos.xyz - mWorldPos;\n    //v_ScatteringR = mInScattering * _ESun * _Kr * _Wave;\n    //v_ScatteringM = mInScattering * _ESun * _Km;\n    //v_Attenuate = exp(-mOutGroundScatteringAB);\n}\n        ",AtmosphereFS:"\nvarying vec3 v_ViewDir;\nvarying vec3 v_Scattering;\nvarying vec3 v_Attenuate;\nvarying vec3 v_AttenuateGround;\n\nfloat PhaseRayleigh(float nCostheta)\n{\n\treturn 0.75 * (1.0 + nCostheta * nCostheta);\n}\n\nfloat PhaseMie(float nCostheta, float g, float g2)\n{\n\treturn 1.5 * ((1.0 - g2) / (2.0 + g2)) * (1.0 + nCostheta * nCostheta) / pow(1.0 + g2 - 2.0 * g * nCostheta, 1.5);\n}\n\nvec4 AtmosphereColor(vec3 mLightDir)\n{\n    vec4 mColor = vec4(1.0, 0.7, 0.7, 1.0);\n    \n    float _G = -0.990;\n    float _G2 = _G * _G;\n    \n    float nCostheta = dot(normalize(v_ViewDir), mLightDir);\n    float nPhaseMie = PhaseMie(nCostheta, _G, _G2);\n    float nPhaseRayleigh = PhaseRayleigh(nCostheta);\n\t\t\t\t\n    mColor.rgb = v_Scattering * nPhaseRayleigh + v_Attenuate * nPhaseMie;\n    mColor.a = mColor.b + 0.2;\n    mColor = clamp(mColor, 0.0, 0.9);\n\n    return mColor;\n}\n\nvec4 AtmosphereLight(vec4 mColor, vec3 mLightDir)\n{\n    // Ground : v_ScatteringR = v_Scattering; v_ScatteringM = v_Attenuate; v_Attenuate = v_AttenuateGround;\n    \n    float _G = -0.980;\n    float _G2 = _G * _G;\n    \n    float nCostheta = dot(normalize(v_ViewDir), mLightDir);\n    float nPhaseMie = PhaseMie(nCostheta, _G, _G2);\n    float nPhaseRayleigh = PhaseRayleigh(nCostheta);\n    \n    mColor.rgb = v_Scattering * nPhaseRayleigh + v_Attenuate * nPhaseMie + mColor.rgb * v_AttenuateGround;\n    \n    return mColor;\n}\n        "};return[Fi,Gi]});MiaokitMerge(function(om){if("Sisyphus"!==om["m_pEngine"]){return[]}var pm=undefined;var qm=true;function rm(wm){sm();pm=wm.OnRenderingEvent;tm();var xm={memory:new WebAssembly.Memory({initial:64*16,maximum:32768}),APP_PLUGIN_TYPE:function(){return 2},APP_MEM_TYPE:function(){return 2},APP_MEM_RESERVE:function(){return 1024},APP_MEM_MALLOC:function(ym){alert("SISYPHUS��չ��֧��ʹ�÷������ڴ�!");return 0},APP_MEM_FREE:function(zm){alert("SISYPHUS��չ��֧��ʹ�÷������ڴ�!")},APP_MEM_BASE:function(){return 64*1024*1024},APP_MEM_GROW:function(Am){if(om["ShaderLab"]){var Bm=om["ShaderLab"]["PreflushBuffer"]();xm["memory"].grow(Am/64/1024);var Cm=xm["memory"].buffer;om["ShaderLab"]["FlushBuffer"](Cm,Bm)}else{xm["memory"].grow(Am/64/1024)}},APP_MEM_RECYCLE:function(Dm){alert("WAMSģ�鲻֧�ֻ����ڴ�!")},UNITY_CREATE_OBJ:function(){alert("δװ��UNITY��չ!");return 0},UNITY_FREE_OBJ:function(){alert("δװ��UNITY��չ!");return 0},UNITY_GET:function(){alert("δװ��UNITY��չ!");return 0},UNITY_DO:function(){alert("δװ��UNITY��չ!");return 0}};wm.OnEngineLoad(xm)}function sm(){var Em=document.getElementById("unityContainer");var Fm=document.createElement("canvas");Fm.id="3d";Fm.width=Em.offsetWidth;Fm.height=Em.offsetHeight;Fm.style.width="100%";Fm.style.height="100%";Fm.style.top="0rem";Fm.style.bottom="0rem";Fm.style.left="0rem";Fm.style.right="0rem";Fm.style.position="absolute";Fm.style.zIndex="1";Em.appendChild(Fm);om["GL"]["CreateContext"](Fm);om["ShaderLab"]["Init"](om["GL"])}function tm(){if(qm){qm=false;vm()}}function um(){qm=true}function vm(){if(qm){return}om.Profiler.BeginCycle();om.Profiler.BeginScript();pm(0);om.Profiler.EndScript();if(om["WASM"]["Update"]){om.Profiler.BeginUpdate();om["WASM"]["Update"](0);om.Profiler.EndUpdate();om.Profiler.BeginDraw();om["WASM"]["Update"](1);om.Profiler.EndDraw()}om.Profiler.EndCycle();requestAnimationFrame(vm)}om["WASM"]=om["WASM"]||{};om["WASM"]["LoadEngine"]=rm;tm["_name"]="Start";um["_name"]="Stop";return[tm,um]});MiaokitMerge(function(Gm){var Hm=Date.now();function Im(){return Date.now()-Hm}function Jm(Mm,Nm){if(Nm===void 0){Nm=0}if(2===Nm){console.warn("Track:",Im(),Mm)}else if(2<Nm){console.error("Track:",Im(),Mm)}else{console.info("Track:",Im(),Mm)}}function Km(Om,Pm,Qm){if(Qm===void 0){Qm=undefined}var Rm=new XMLHttpRequest;Rm.open("GET",Om,true);Rm.responseType="arraybuffer";Rm.onprogress=function(Sm){if(0<Sm.total&&Qm){Qm(Sm.loaded/Sm.total)}};Rm.onload=function(Tm){if(Rm.status==200){Pm(Rm.response)}else{Pm(null)}};Rm.onerror=function(Um){Jm(Um,2);Pm(null)};Rm.send(null)}function Lm(Vm,Wm,Xm,Ym,Zm,$m){var _m=new XMLHttpRequest;_m.onprogress=function(an){if(0<an.total&&Zm){Zm(an.loaded/an.total)}};_m.onload=function(bn){if(_m.status==200){$m(_m.response)}else{$m(null)}_m=null};_m.onerror=function(cn){Jm(cn,2);$m(null)};_m.responseType=Wm;_m.open(Vm,Xm,true);_m.send(Ym)}Im["_name"]="Time";Jm["_name"]="Track";Km["_name"]="Fetch";Lm["_name"]="Request";return[Im,Jm,Km,Lm]});MiaokitMerge(function(dn){if("Unity"!==dn["m_pEngine"]){return[]}if(!UnityLoader){return[]}var en=dn["m_pLogo"]||"data:image/png;base64,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";UnityLoader.Progress.Styles.Dark.progressLogoUrl=en;UnityLoader.Progress.Styles.Light.progressLogoUrl=en;if(UnityLoader.SystemInfo.mobile){UnityLoader.SystemInfo.mobile=false;UnityLoader.downloadJob=function(nn,on){var pn=new XMLHttpRequest;pn.open("GET",on.parameters.url);pn.responseType="arraybuffer";pn.onload=function(){UnityLoader.Compression.decompress(new Uint8Array(pn.response),function(qn){on.complete(qn)})};if(on.parameters.onprogress)pn.addEventListener("progress",on.parameters.onprogress);if(on.parameters.onload)pn.addEventListener("load",on.parameters.onload);pn.send()}}UnityLoader.processWasmFrameworkJob=function(rn,sn){var tn=UnityLoader.Job.result(rn,"downloadWasmFramework");UnityLoader.loadCode(rn,tn,function(un,vn){rn["mainScriptUrlOrBlob"]=vn;if(rn.isModularized){UnityLoader[un]=UnityModule}rn["instantiateWasm"]=function(wn,xn){jn(rn,wn["env"]);if(rn["wasmBinary"]){WebAssembly.instantiate(rn["wasmBinary"],wn).then(function(yn){xn(yn.instance,yn.module)})}else{console.info("MiaokitLoader.InitUnity.instantiateWasm error!")}return{}};UnityLoader[un](rn);sn.complete()},{Module:rn,url:rn["wasmFrameworkUrl"],isModularized:rn.isModularized})};var fn=null;var gn=null;var hn={};function jn(zn,An){Object["assign"](An,{_Init:function(Bn,Cn){dn["WASM"]["m_pMemory"]=dn["WASM"]["m_pMemory"]||gn.Module.wasmMemory;kn(zn,hn,Bn,Cn);ln(gn,hn);fn.OnEngineLoad(hn)},_RenderingEvent:function(Dn){fn.OnRenderingEvent(Dn)}});dn["GL"]=An}function kn(En,Fn,Gn,Hn){var In=dn.WASM.GetString(Gn,Hn);var Jn=JSON.parse(In);var Kn=function(On){var Pn=function(){var Qn=Array.prototype.slice.call(arguments);Qn.unshift(Pn["m_nAddr"]);return Pn["m_pFunc"].apply(this,Qn)};Pn["m_pFunc"]=En[On.Call];Pn["m_nAddr"]=On.Addr;Fn[On.Name]=Pn};for(var Ln=0,Mn=Jn.List;Ln<Mn.length;Ln++){var Nn=Mn[Ln];Kn(Nn)}}function ln(Rn,Sn){Sn["APP_PLUGIN_TYPE"]=function(){return 1};Sn["APP_MEM_TYPE"]=function(){return 1};Sn["memory"]=function(Tn){var Un=32*1024*1024;var Vn=Tn._memalign(16,Un);var Wn=Un-Vn;Tn._free(Vn);var Xn=Tn._memalign(16,Wn+Un);if(Xn!==Vn){console.error("miaokit.prememory: addr error",Vn,Xn);return}if(Xn+Wn+Un!==67108864){console.error("miaokit.prememory: addr end error",Xn+Wn+Un);return}Sn["APP_MEM_RESERVE"]=function(){return Xn};return Tn.wasmMemory}(gn.Module);Sn["APP_MEM_MALLOC"]=function(Yn){return gn.Module._memalign(16,Yn)};Sn["APP_MEM_FREE"]=function(Zn){gn.Module._free(Zn)};Sn["APP_MEM_BASE"]=function(){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0};Sn["APP_MEM_GROW"]=function($n){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0};Sn["APP_MEM_RECYCLE"]=function(_n){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0}}function mn(ao){fn=ao;gn=UnityLoader.instantiate("unityContainer",dn["m_pEnginePath"])}dn["WASM"]=dn["WASM"]||{};dn["WASM"]["LoadEngine"]=mn;return[]});MiaokitMerge(function(bo){var co=undefined;var eo=new TextDecoder("utf-8");var fo=new TextEncoder;function go(ho){if(!co||bo["WASM"].m_pMemory.buffer.byteLength!==co[0].byteLength){if(!co){co=[]}co[0]=new Int8Array(bo["WASM"].m_pMemory.buffer);co[1]=new Uint8Array(bo["WASM"].m_pMemory.buffer);co[2]=new Int16Array(bo["WASM"].m_pMemory.buffer);co[3]=new Uint16Array(bo["WASM"].m_pMemory.buffer);co[4]=new Int32Array(bo["WASM"].m_pMemory.buffer);co[5]=new Uint32Array(bo["WASM"].m_pMemory.buffer);co[6]=new Float32Array(bo["WASM"].m_pMemory.buffer);co[7]=new Float64Array(bo["WASM"].m_pMemory.buffer)}return co[ho]}bo["WASM"]=bo["WASM"]||{};bo["WASM"]["HEAP8"]=function(io,jo){if(io===void 0){io=0}if(jo===void 0){jo=0}var ko=go(0);if(io&&jo){return ko.subarray(io,io+jo)}else{return ko}};bo["WASM"]["HEAPU8"]=function(lo,mo){if(lo===void 0){lo=0}if(mo===void 0){mo=0}var no=go(1);if(lo&&mo){return no.subarray(lo,lo+mo)}else{return no}};bo["WASM"]["HEAP16"]=function(oo,po){if(oo===void 0){oo=0}if(po===void 0){po=0}var qo=go(2);if(oo&&po){return qo.subarray(oo/2,(oo+po)/2)}else{return qo}};bo["WASM"]["HEAPU16"]=function(ro,so){if(ro===void 0){ro=0}if(so===void 0){so=0}var to=go(3);if(ro&&so){return to.subarray(ro/2,(ro+so)/2)}else{return to}};bo["WASM"]["HEAP32"]=function(uo,vo,wo){if(uo===void 0){uo=0}if(vo===void 0){vo=0}var xo=go(4);if(uo&&vo){if(wo){return xo.slice(uo/4,(uo+vo)/4)}else{return xo.subarray(uo/4,(uo+vo)/4)}}else{return xo}};bo["WASM"]["HEAPU32"]=function(yo,zo){if(yo===void 0){yo=0}if(zo===void 0){zo=0}var Ao=go(5);if(yo&&zo){return Ao.subarray(yo/4,(yo+zo)/4)}else{return Ao}};bo["WASM"]["HEAPF32"]=function(Bo,Co,Do){if(Bo===void 0){Bo=0}if(Co===void 0){Co=0}var Eo=go(6);if(Bo&&Co){if(Do){return Eo.slice(Bo/4,(Bo+Co)/4)}else{return Eo.subarray(Bo/4,(Bo+Co)/4)}}else{return Eo}};bo["WASM"]["HEAPF64"]=function(Fo,Go){if(Fo===void 0){Fo=0}if(Go===void 0){Go=0}var Ho=go(7);if(Fo&&Go){return Ho.subarray(Fo/8,(Fo+Go)/8)}else{return Ho}};bo["WASM"]["GetString"]=function(Io,Jo){if(!Jo){var Ko=bo["WASM"].HEAPU8();var Lo=Io;while(0!==Ko[Lo++]);Jo=Lo-Io-1}var Mo=bo["WASM"].HEAPU8(Io,Jo);var No=eo.decode(Mo);return No};bo["WASM"]["SetString"]=function(Oo,Po){var Qo=fo.encode(Po);var Ro=bo["WASM"].HEAPU8(Oo,Qo.byteLength);Ro.set(Qo)};bo["WASM"]["EncodeString"]=function(So){return fo.encode(So)};bo["WASM"]["m_pMemory"]=null;return[]});MiaokitMerge(function(To){if("Sisyphus"!==To["m_pEngine"]){return[]}var Uo={instance:undefined,counter:1,lastError:0,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],currentContext:null,currArrayBuffer:0,currElementArrayBuffer:0,offscreenCanvases:{},timerQueriesEXT:[],queries:[],samplers:[],transformFeedbacks:[],syncs:[],byteSizeByTypeRoot:5120,byteSizeByType:[1,1,2,2,4,4,4,2,3,4,8],programInfos:{},stringCache:{},stringiCache:{},tempFixedLengthArray:[],packAlignment:4,unpackAlignment:4,init:function(){Uo.miniTempBuffer=new Float32Array(Uo.MINI_TEMP_BUFFER_SIZE);for(var sp=0;sp<Uo.MINI_TEMP_BUFFER_SIZE;sp++){Uo.miniTempBufferViews[sp]=Uo.miniTempBuffer.subarray(0,sp+1)}for(var sp=0;sp<32;sp++){Uo.tempFixedLengthArray.push(new Array(sp))}},recordError:function tp(up){if(!Uo.lastError){Uo.lastError=up}},getNewId:function(vp){var wp=Uo.counter++;for(var xp=vp.length;xp<wp;xp++){vp[xp]=null}return wp},MINI_TEMP_BUFFER_SIZE:256,miniTempBuffer:null,miniTempBufferViews:[0],getSource:function(yp,zp,Ap,Bp){var Cp="";for(var Dp=0;Dp<zp;++Dp){var Ep;if(Bp){var Fp=bp[Bp+Dp*4>>2];if(Fp<0){Ep=Xo(bp[Ap+Dp*4>>2])}else{Ep=Xo(bp[Ap+Dp*4>>2],Fp)}}else{Ep=Xo(bp[Ap+Dp*4>>2])}Cp+=Ep}return Cp},createContext:function(Gp,Hp){if(typeof Hp["majorVersion"]==="undefined"&&typeof Hp["minorVersion"]==="undefined"){if(typeof WebGL2RenderingContext!=="undefined")Hp["majorVersion"]=2;else Hp["majorVersion"]=1;Hp["minorVersion"]=0}var Ip;var Jp="?";function Kp(Mp){Jp=Mp.statusMessage||Jp}try{Gp.addEventListener("webglcontextcreationerror",Kp,false);try{if(Hp["majorVersion"]==1&&Hp["minorVersion"]==0){Ip=Gp.getContext("webgl",Hp)||Gp.getContext("experimental-webgl",Hp)}else if(Hp["majorVersion"]==2&&Hp["minorVersion"]==0){Ip=Gp.getContext("webgl2",Hp)}else{throw"Unsupported WebGL context version "+Hp["majorVersion"]+"."+Hp["minorVersion"]+"!"}}finally{Gp.removeEventListener("webglcontextcreationerror",Kp,false)}if(!Ip)throw":("}catch(Np){Wo("Could not create canvas: "+[Jp,Np,JSON.stringify(Hp)]);return 0}if(!Ip)return 0;var Lp=Uo.registerContext(Ip,Hp);return Lp},registerContext:function(Op,Pp){var Qp=1;var Rp={handle:Qp,attributes:Pp,version:Pp["majorVersion"],GLctx:Op};function Sp(){var Tp=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return Tp?parseInt(Tp[2],10):false}Rp["supportsWebGL2EntryPoints"]=Rp.version>=2&&(Sp()===false||Sp()>=58);if(Op.canvas)Op.canvas.GLctxObject=Rp;Uo.contexts[Qp]=Rp;if(typeof Pp["enableExtensionsByDefault"]==="undefined"||Pp["enableExtensionsByDefault"]){Uo.initExtensions(Rp)}if(Pp["renderViaOffscreenBackBuffer"]){return 0}return Qp},makeContextCurrent:function(Up){if(!Up){Vo=Uo.currentContext=null;return true}var Vp=Uo.contexts[Up];if(!Vp){return false}Vo=Vp.GLctx;Uo.currentContext=Vp;return true},getContext:function(Wp){return Uo.contexts[Wp]},deleteContext:function(Xp){if(!Xp)return;if(Uo.currentContext===Uo.contexts[Xp])Uo.currentContext=null;if(typeof JSEvents==="object")JSEvents.removeAllHandlersOnTarget(Uo.contexts[Xp].GLctx.canvas);if(Uo.contexts[Xp]&&Uo.contexts[Xp].GLctx.canvas)Uo.contexts[Xp].GLctx.canvas.GLctxObject=undefined;fp(Uo.contexts[Xp]);Uo.contexts[Xp]=null},initExtensions:function(Yp){if(!Yp)Yp=Uo.currentContext;if(Yp.initExtensionsDone)return;Yp.initExtensionsDone=true;Vo=Yp.GLctx;Yp.maxVertexAttribs=Vo.getParameter(Vo.MAX_VERTEX_ATTRIBS);if(Yp.version<2){var Zp=Vo.getExtension("ANGLE_instanced_arrays");if(Zp){Vo["vertexAttribDivisor"]=function(cq,dq){Zp["vertexAttribDivisorANGLE"](cq,dq)};Vo["drawArraysInstanced"]=function(eq,fq,gq,hq){Zp["drawArraysInstancedANGLE"](eq,fq,gq,hq)};Vo["drawElementsInstanced"]=function(iq,jq,kq,lq,mq){Zp["drawElementsInstancedANGLE"](iq,jq,kq,lq,mq)}}var $p=Vo.getExtension("OES_vertex_array_object");if($p){Vo["createVertexArray"]=function(){return $p["createVertexArrayOES"]()};Vo["deleteVertexArray"]=function(nq){$p["deleteVertexArrayOES"](nq)};Vo["bindVertexArray"]=function(oq){$p["bindVertexArrayOES"](oq)};Vo["isVertexArray"]=function(pq){return $p["isVertexArrayOES"](pq)}}var _p=Vo.getExtension("WEBGL_draw_buffers");if(_p){Vo["drawBuffers"]=function(qq,rq){_p["drawBuffersWEBGL"](qq,rq)}}}Vo.disjointTimerQueryExt=Vo.getExtension("EXT_disjoint_timer_query");var aq=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2"];var bq=Vo.getSupportedExtensions();if(bq&&bq.length>0){Vo.getSupportedExtensions().forEach(function(sq){if(aq.indexOf(sq)!=-1){Vo.getExtension(sq)}})}},populateUniformTable:function(tq){var uq=Uo.programs[tq];Uo.programInfos[tq]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1};var vq=Uo.programInfos[tq];var wq=vq.uniforms;var xq=Vo.getProgramParameter(uq,Vo.ACTIVE_UNIFORMS);for(var yq=0;yq<xq;++yq){var zq=Vo.getActiveUniform(uq,yq);var Aq=zq.name;vq.maxUniformLength=Math.max(vq.maxUniformLength,Aq.length+1);if(Aq.indexOf("]",Aq.length-1)!==-1){var Bq=Aq.lastIndexOf("[");Aq=Aq.slice(0,Bq)}var Cq=Vo.getUniformLocation(uq,Aq);if(Cq!=null){var Dq=Uo.getNewId(Uo.uniforms);wq[Aq]=[zq.size,Dq];Uo.uniforms[Dq]=Cq;for(var Eq=1;Eq<zq.size;++Eq){var Fq=Aq+"["+Eq+"]";Cq=Vo.getUniformLocation(uq,Fq);Dq=Uo.getNewId(Uo.uniforms);Uo.uniforms[Dq]=Cq}}}}};var Vo=undefined;var Wo=console.error;var Xo=To["WASM"]["GetString"];var Yo=function(Gq,Hq,Iq){To["WASM"]["SetString"](Hq,Gq)};var Zo=undefined;var $o=undefined;var _o=undefined;var ap=undefined;var bp=undefined;var cp=undefined;var dp=undefined;function ep(Jq){return To["WASM"]["Malloc"](Jq)}function fp(Kq){To["WASM"]["Free"](Kq)}function gp(Lq,Mq,Nq){return Nq?+(Lq>>>0)+ +(Mq>>>0)*4294967296:+(Lq>>>0)+ +(Mq|0)*4294967296}function hp(Oq){switch(Oq){case 34962:Oq=34964;break;case 34963:Oq=34965;break;case 35051:Oq=35053;break;case 35052:Oq=35055;break;case 35982:Oq=35983;break;case 36662:Oq=36662;break;case 36663:Oq=36663;break;case 35345:Oq=35368;break}var Pq=Vo.getParameter(Oq);if(Pq)return Pq.name|0;else return 0}function ip(Qq){switch(Qq){case 34962:case 34963:case 36662:case 36663:case 35051:case 35052:case 35882:case 35982:case 35345:return true;default:return false}}function jp(Rq,Sq,Tq,Uq){if(!Tq){Uo.recordError(1281);return}var Vq=Vo["getIndexedParameter"](Rq,Sq);var Wq;switch(typeof Vq){case"boolean":Wq=Vq?1:0;break;case"number":Wq=Vq;break;case"object":if(Vq===null){switch(Rq){case 35983:case 35368:Wq=0;break;default:{Uo.recordError(1280);return}}}else if(Vq instanceof WebGLBuffer){Wq=Vq["name"]|0}else{Uo.recordError(1280);return}break;default:Uo.recordError(1280);return}switch(Uq){case"Integer64":var Xq=0;var Yq=[Wq>>>0,(Xq=Wq,+Math.abs(Xq)>=1?Xq>0?(Math.min(+Math.floor(Xq/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Xq-+(~~Xq>>>0))/4294967296)>>>0:0)];bp[Tq>>2]=Yq[0];bp[Tq+4>>2]=Yq[1];break;case"Integer":bp[Tq>>2]=Wq;break;case"Float":dp[Tq>>2]=Wq;break;case"Boolean":Zo[Tq>>0]=Wq?1:0;break;default:throw"internal emscriptenWebGLGetIndexed() error, bad type: "+Uq}}function kp(Zq,$q,_q){if(!$q){Uo.recordError(1281);return}var ar=undefined;switch(Zq){case 36346:ar=1;break;case 36344:if(_q!=="Integer"&&_q!=="Integer64"){Uo.recordError(1280)}return;case 34814:case 36345:ar=0;break;case 34466:var br=Vo.getParameter(34467);ar=br.length;break;case 33309:if(Vo.canvas.GLctxObject.version<2){Uo.recordError(1282);return}var cr=Vo.getSupportedExtensions();ar=2*cr.length;break;case 33307:case 33308:if(Vo.canvas.GLctxObject.version<2){Uo.recordError(1280);return}ar=Zq==33307?3:0;break}if(ar===undefined){var dr=Vo.getParameter(Zq);switch(typeof dr){case"number":ar=dr;break;case"boolean":ar=dr?1:0;break;case"string":Uo.recordError(1280);return;case"object":if(dr===null){switch(Zq){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 35097:case 36389:case 34068:{ar=0;break};default:{Uo.recordError(1280);return}}}else if(dr instanceof Float32Array||dr instanceof Uint32Array||dr instanceof Int32Array||dr instanceof Array){for(var er=0;er<dr.length;++er){switch(_q){case"Integer":bp[$q+er*4>>2]=dr[er];break;case"Float":dp[$q+er*4>>2]=dr[er];break;case"Boolean":Zo[$q+er>>0]=dr[er]?1:0;break;default:throw"internal glGet error, bad type: "+_q}}return}else if(dr instanceof WebGLBuffer||dr instanceof WebGLProgram||dr instanceof WebGLFramebuffer||dr instanceof WebGLRenderbuffer||dr instanceof WebGLQuery||dr instanceof WebGLSampler||dr instanceof WebGLSync||dr instanceof WebGLTransformFeedback||dr instanceof WebGLVertexArrayObject||dr instanceof WebGLTexture){ar=dr["name"]|0}else{Uo.recordError(1280);return}break;default:Uo.recordError(1280);return}}switch(_q){case"Integer64":var fr=0;var gr=[ar>>>0,(fr=ar,+Math.abs(fr)>=1?fr>0?(Math.min(+Math.floor(fr/4294967296),4294967295)|0)>>>0:~~+Math.ceil((fr-+(~~fr>>>0))/4294967296)>>>0:0)];bp[$q>>2]=gr[0];bp[$q+4>>2]=gr[1];break;case"Integer":bp[$q>>2]=ar;break;case"Float":dp[$q>>2]=ar;break;case"Boolean":Zo[$q>>0]=ar?1:0;break;default:throw"internal glGet error, bad type: "+_q}}function lp(hr,ir,jr,kr){if(!jr){Uo.recordError(1281);return}var lr=Vo.getUniform(Uo.programs[hr],Uo.uniforms[ir]);if(typeof lr=="number"||typeof lr=="boolean"){switch(kr){case"Integer":bp[jr>>2]=lr;break;case"Float":dp[jr>>2]=lr;break;default:throw"internal emscriptenWebGLGetUniform() error, bad type: "+kr}}else{for(var mr=0;mr<lr.length;mr++){switch(kr){case"Integer":bp[jr+mr*4>>2]=lr[mr];break;case"Float":dp[jr+mr*4>>2]=lr[mr];break;default:throw"internal emscriptenWebGLGetUniform() error, bad type: "+kr}}}}function mp(nr,or,pr,qr){if(!pr){Uo.recordError(1281);return}var rr=Vo.getVertexAttrib(nr,or);if(or==34975){bp[pr>>2]=rr["name"]}else if(typeof rr=="number"||typeof rr=="boolean"){switch(qr){case"Integer":bp[pr>>2]=rr;break;case"Float":dp[pr>>2]=rr;break;case"FloatToInteger":bp[pr>>2]=Math["fround"](rr);break;default:throw"internal emscriptenWebGLGetVertexAttrib() error, bad type: "+qr}}else{for(var sr=0;sr<rr.length;sr++){switch(qr){case"Integer":bp[pr+sr*4>>2]=rr[sr];break;case"Float":dp[pr+sr*4>>2]=rr[sr];break;case"FloatToInteger":bp[pr+sr*4>>2]=Math["fround"](rr[sr]);break;default:throw"internal emscriptenWebGLGetVertexAttrib() error, bad type: "+qr}}}}function np(tr,ur,vr,wr){function xr(Ar,Br){return Math.floor((Ar+Br-1)/Br)*Br}var yr=tr*vr;var zr=xr(yr,wr);return ur<=0?0:(ur-1)*zr+yr}function op(Cr,Dr,Er,Fr,Gr,Hr){var Ir;var Jr;switch(Dr){case 6406:case 6409:case 6402:case 6403:case 36244:Jr=1;break;case 6410:case 33319:case 33320:Jr=2;break;case 6407:case 35904:case 36248:Jr=3;break;case 6408:case 35906:case 36249:Jr=4;break;default:Uo.recordError(1280);return null}switch(Cr){case 5121:case 5120:Ir=Jr*1;break;case 5123:case 36193:case 5131:case 5122:Ir=Jr*2;break;case 5125:case 5126:case 5124:Ir=Jr*4;break;case 34042:case 35902:case 33640:case 35899:case 34042:Ir=4;break;case 33635:case 32819:case 32820:Ir=2;break;default:Uo.recordError(1280);return null}var Kr=np(Er,Fr,Ir,Uo.unpackAlignment);switch(Cr){case 5120:return Zo.subarray(Gr,Gr+Kr);case 5121:return $o.subarray(Gr,Gr+Kr);case 5122:return _o.subarray(Gr>>1,Gr+Kr>>1);case 5124:return bp.subarray(Gr>>2,Gr+Kr>>2);case 5126:return dp.subarray(Gr>>2,Gr+Kr>>2);case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return cp.subarray(Gr>>2,Gr+Kr>>2);case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return ap.subarray(Gr>>1,Gr+Kr>>1);default:Uo.recordError(1280);return null}}function pp(Lr){switch(Lr){case 5120:return Zo;case 5121:return $o;case 5122:return _o;case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return ap;case 5124:return bp;case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return cp;case 5126:return dp;default:return null}}function qp(Mr){switch(Mr){case 5120:case 5121:return 0;case 5122:case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return 1;case 5124:case 5126:case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return 2;default:return 0}}var rp=function(){function Nr(){this.Ctx=undefined}Nr.prototype.FlushHeap=function(){Zo=To["WASM"]["HEAP8"]();$o=To["WASM"]["HEAPU8"]();_o=To["WASM"]["HEAP16"]();ap=To["WASM"]["HEAPU16"]();bp=To["WASM"]["HEAP32"]();cp=To["WASM"]["HEAPU32"]();dp=To["WASM"]["HEAPF32"]()};Nr.prototype.CreateContext=function(Or,Pr){Pr=Pr||{majorVersion:1,minorVersion:0,alpha:0,depth:1,stencil:0,antialias:1,premultipliedAlpha:0,preserveDrawingBuffer:0,preferLowPowerToHighPerformance:0,failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:0,proxyContextToMainThread:0,renderViaOffscreenBackBuffer:0};if(Pr["explicitSwapControl"]){return 0}Uo.init();var Qr=Uo.createContext(Or,Pr);var Rr=Uo.makeContextCurrent(Qr);this.Ctx=Vo;return Rr?0:-5};Nr.prototype.DestroyContext=function(){Uo.deleteContext(Uo.currentContext?Uo.currentContext.handle:0)};Nr.prototype.GetTextureByHandle=function(Sr){return Sr?Uo.textures[Sr]:null};Nr.prototype.RegisterTexture=function(Tr){var Ur=Uo.getNewId(Uo.textures);Tr.name=Ur;Uo.textures[Ur]=Tr;return Ur};Nr.prototype._glActiveTexture=function(Vr){Vo["activeTexture"](Vr)};Nr.prototype._glAttachShader=function(Wr,Xr){Vo.attachShader(Uo.programs[Wr],Uo.shaders[Xr])};Nr.prototype._glBeginQuery=function(Yr,Zr){Vo["beginQuery"](Yr,Zr?Uo.queries[Zr]:null)};Nr.prototype._glBeginTransformFeedback=function($r){Vo["beginTransformFeedback"]($r)};Nr.prototype._glBindAttribLocation=function(_r,as,bs){bs=Xo(bs);Vo.bindAttribLocation(Uo.programs[_r],as,bs)};Nr.prototype._glBindBuffer=function(cs,ds){var es=ds?Uo.buffers[ds]:null;if(cs==35051){Vo.currentPixelPackBufferBinding=ds}else if(cs==35052){Vo.currentPixelUnpackBufferBinding=ds}Vo.bindBuffer(cs,es)};Nr.prototype._glBindBufferBase=function(fs,gs,hs){var is=hs?Uo.buffers[hs]:null;Vo["bindBufferBase"](fs,gs,is)};Nr.prototype._glBindBufferRange=function(js,ks,ls,ms,ns){var os=ls?Uo.buffers[ls]:null;Vo["bindBufferRange"](js,ks,os,ms,ns)};Nr.prototype._glBindFramebuffer=function(ps,qs){Vo.bindFramebuffer(ps,qs?Uo.framebuffers[qs]:null)};Nr.prototype._glBindRenderbuffer=function(rs,ss){Vo.bindRenderbuffer(rs,ss?Uo.renderbuffers[ss]:null)};Nr.prototype._glBindSampler=function(ts,us){Vo["bindSampler"](ts,us?Uo.samplers[us]:null)};Nr.prototype._glBindTexture=function(vs,ws){Vo.bindTexture(vs,ws?Uo.textures[ws]:null)};Nr.prototype._glBindTransformFeedback=function(xs,ys){var zs=ys?Uo.transformFeedbacks[ys]:null;if(ys&&!zs){Uo.recordError(1282);return}Vo["bindTransformFeedback"](xs,zs)};Nr.prototype._glBindVertexArray=function(As){Vo["bindVertexArray"](Uo.vaos[As])};Nr.prototype._glBlendEquation=function(Bs){Vo["blendEquation"](Bs)};Nr.prototype._glBlendEquationSeparate=function(Cs,Ds){Vo["blendEquationSeparate"](Cs,Ds)};Nr.prototype._glBlendFuncSeparate=function(Es,Fs,Gs,Hs){Vo["blendFuncSeparate"](Es,Fs,Gs,Hs)};Nr.prototype._glBlitFramebuffer=function(Is,Js,Ks,Ls,Ms,Ns,Os,Ps,Qs,Rs){Vo["blitFramebuffer"](Is,Js,Ks,Ls,Ms,Ns,Os,Ps,Qs,Rs)};Nr.prototype._glBufferData=function(Ss,Ts,Us,Vs){if(!Us){Vo.bufferData(Ss,Ts,Vs)}else{if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.bufferData(Ss,$o,Vs,Us,Ts);return}Vo.bufferData(Ss,$o.subarray(Us,Us+Ts),Vs)}};Nr.prototype._glBufferSubData=function(Ws,Xs,Ys,Zs){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.bufferSubData(Ws,Xs,$o,Zs,Ys);return}Vo.bufferSubData(Ws,Xs,$o.subarray(Zs,Zs+Ys))};Nr.prototype._glCheckFramebufferStatus=function($s){return Vo["checkFramebufferStatus"]($s)};Nr.prototype._glClear=function(_s){Vo["clear"](_s)};Nr.prototype._glClearColor=function(at,bt,ct,dt){Vo["clearColor"](at,bt,ct,dt)};Nr.prototype._glClearDepthf=function(et){Vo["clearDepth"](et)};Nr.prototype._glClearStencil=function(ft){Vo["clearStencil"](ft)};Nr.prototype._glClientWaitSync=function(gt,ht,it,jt){it=it>>>0;jt=jt>>>0;var kt=it==4294967295&&jt==4294967295?-1:gp(it,jt,true);return Vo.clientWaitSync(Uo.syncs[gt],ht,kt)};Nr.prototype._glColorMask=function(lt,mt,nt,ot){Vo.colorMask(!!lt,!!mt,!!nt,!!ot)};Nr.prototype._glCompileShader=function(pt){Vo.compileShader(Uo.shaders[pt])};Nr.prototype._glCompressedTexImage2D=function(qt,rt,st,tt,ut,vt,wt,xt){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo["compressedTexImage2D"](qt,rt,st,tt,ut,vt,$o,xt,wt);return}Vo["compressedTexImage2D"](qt,rt,st,tt,ut,vt,xt?$o.subarray(xt,xt+wt):null)};Nr.prototype._glCompressedTexSubImage2D=function(yt,zt,At,Bt,Ct,Dt,Et,Ft,Gt){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo["compressedTexSubImage2D"](yt,zt,At,Bt,Ct,Dt,Et,$o,Gt,Ft);return}Vo["compressedTexSubImage2D"](yt,zt,At,Bt,Ct,Dt,Et,Gt?$o.subarray(Gt,Gt+Ft):null)};Nr.prototype._glCompressedTexSubImage3D=function(Ht,It,Jt,Kt,Lt,Mt,Nt,Ot,Pt,Qt,Rt){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo["compressedTexSubImage3D"](Ht,It,Jt,Kt,Lt,Mt,Nt,Ot,Pt,$o,Rt,Qt)}else{Vo["compressedTexSubImage3D"](Ht,It,Jt,Kt,Lt,Mt,Nt,Ot,Pt,Rt?$o.subarray(Rt,Rt+Qt):null)}};Nr.prototype._glCopyBufferSubData=function(St,Tt,Ut,Vt,Wt){Vo["copyBufferSubData"](St,Tt,Ut,Vt,Wt)};Nr.prototype._glCopyTexImage2D=function(Xt,Yt,Zt,$t,_t,au,bu,cu){Vo["copyTexImage2D"](Xt,Yt,Zt,$t,_t,au,bu,cu)};Nr.prototype._glCopyTexSubImage2D=function(du,eu,fu,gu,hu,iu,ju,ku){Vo["copyTexSubImage2D"](du,eu,fu,gu,hu,iu,ju,ku)};Nr.prototype._glCreateProgram=function(){var lu=Uo.getNewId(Uo.programs);var mu=Vo.createProgram();mu.name=lu;Uo.programs[lu]=mu;return lu};Nr.prototype._glCreateShader=function(nu){var ou=Uo.getNewId(Uo.shaders);Uo.shaders[ou]=Vo.createShader(nu);return ou};Nr.prototype._glCullFace=function(pu){Vo["cullFace"](pu)};Nr.prototype._glDeleteBuffers=function(qu,ru){for(var su=0;su<qu;su++){var tu=bp[ru+su*4>>2];var uu=Uo.buffers[tu];if(!uu)continue;Vo.deleteBuffer(uu);uu.name=0;Uo.buffers[tu]=null;if(tu==Uo.currArrayBuffer)Uo.currArrayBuffer=0;if(tu==Uo.currElementArrayBuffer)Uo.currElementArrayBuffer=0}};Nr.prototype._glDeleteFramebuffers=function(vu,wu){for(var xu=0;xu<vu;++xu){var yu=bp[wu+xu*4>>2];var zu=Uo.framebuffers[yu];if(!zu)continue;Vo.deleteFramebuffer(zu);zu.name=0;Uo.framebuffers[yu]=null}};Nr.prototype._glDeleteProgram=function(Au){if(!Au)return;var Bu=Uo.programs[Au];if(!Bu){Uo.recordError(1281);return}Vo.deleteProgram(Bu);Bu.name=0;Uo.programs[Au]=null;Uo.programInfos[Au]=null};Nr.prototype._glDeleteQueries=function(Cu,Du){for(var Eu=0;Eu<Cu;Eu++){var Fu=bp[Du+Eu*4>>2];var Gu=Uo.queries[Fu];if(!Gu)continue;Vo["deleteQuery"](Gu);Uo.queries[Fu]=null}};Nr.prototype._glDeleteRenderbuffers=function(Hu,Iu){for(var Ju=0;Ju<Hu;Ju++){var Ku=bp[Iu+Ju*4>>2];var Lu=Uo.renderbuffers[Ku];if(!Lu)continue;Vo.deleteRenderbuffer(Lu);Lu.name=0;Uo.renderbuffers[Ku]=null}};Nr.prototype._glDeleteSamplers=function(Mu,Nu){for(var Ou=0;Ou<Mu;Ou++){var Pu=bp[Nu+Ou*4>>2];var Qu=Uo.samplers[Pu];if(!Qu)continue;Vo["deleteSampler"](Qu);Qu.name=0;Uo.samplers[Pu]=null}};Nr.prototype._glDeleteShader=function(Ru){if(!Ru)return;var Su=Uo.shaders[Ru];if(!Su){Uo.recordError(1281);return}Vo.deleteShader(Su);Uo.shaders[Ru]=null};Nr.prototype._glDeleteSync=function(Tu){if(!Tu)return;var Uu=Uo.syncs[Tu];if(!Uu){Uo.recordError(1281);return}Vo.deleteSync(Uu);Uu.name=0;Uo.syncs[Tu]=null};Nr.prototype._glDeleteTextures=function(Vu,Wu){for(var Xu=0;Xu<Vu;Xu++){var Yu=bp[Wu+Xu*4>>2];var Zu=Uo.textures[Yu];if(!Zu)continue;Vo.deleteTexture(Zu);Zu.name=0;Uo.textures[Yu]=null}};Nr.prototype._glDeleteTransformFeedbacks=function($u,_u){for(var av=0;av<$u;av++){var bv=bp[_u+av*4>>2];var cv=Uo.transformFeedbacks[bv];if(!cv)continue;Vo["deleteTransformFeedback"](cv);cv.name=0;Uo.transformFeedbacks[bv]=null}};Nr.prototype._glDeleteVertexArrays=function(dv,ev){for(var fv=0;fv<dv;fv++){var gv=bp[ev+fv*4>>2];Vo["deleteVertexArray"](Uo.vaos[gv]);Uo.vaos[gv]=null}};Nr.prototype._glDepthFunc=function(hv){Vo["depthFunc"](hv)};Nr.prototype._glDepthMask=function(iv){Vo.depthMask(!!iv)};Nr.prototype._glDetachShader=function(jv,kv){Vo.detachShader(Uo.programs[jv],Uo.shaders[kv])};Nr.prototype._glDisable=function(lv){Vo["disable"](lv)};Nr.prototype._glDisableVertexAttribArray=function(mv){Vo.disableVertexAttribArray(mv)};Nr.prototype._glDrawArrays=function(nv,ov,pv){Vo.drawArrays(nv,ov,pv)};Nr.prototype._glDrawArraysInstanced=function(qv,rv,sv,tv){Vo["drawArraysInstanced"](qv,rv,sv,tv)};Nr.prototype._glDrawBuffers=function(uv,vv){var wv=Uo.tempFixedLengthArray[uv];for(var xv=0;xv<uv;xv++){wv[xv]=bp[vv+xv*4>>2]}Vo["drawBuffers"](wv)};Nr.prototype._glDrawElements=function(yv,zv,Av,Bv){Vo.drawElements(yv,zv,Av,Bv)};Nr.prototype._glDrawElementsInstanced=function(Cv,Dv,Ev,Fv,Gv){Vo["drawElementsInstanced"](Cv,Dv,Ev,Fv,Gv)};Nr.prototype._glEnable=function(Hv){Vo["enable"](Hv)};Nr.prototype._glEnableVertexAttribArray=function(Iv){Vo.enableVertexAttribArray(Iv)};Nr.prototype._glEndQuery=function(Jv){Vo["endQuery"](Jv)};Nr.prototype._glEndTransformFeedback=function(){Vo["endTransformFeedback"]()};Nr.prototype._glFenceSync=function(Kv,Lv){var Mv=Vo.fenceSync(Kv,Lv);if(Mv){var Nv=Uo.getNewId(Uo.syncs);Mv.name=Nv;Uo.syncs[Nv]=Mv;return Nv}else{return 0}};Nr.prototype._glFinish=function(){Vo["finish"]()};Nr.prototype._glFlush=function(){Vo["flush"]()};Nr.prototype._glFlushMappedBufferRange=function(Ov,Pv,Qv){if(!ip(Ov)){Uo.recordError(1280);Wo("GL_INVALID_ENUM in glFlushMappedBufferRange");return}var Rv=Uo.mappedBuffers[hp(Ov)];if(!Rv){Uo.recordError(1282);Wo("buffer was never mapped in glFlushMappedBufferRange");return}if(!(Rv.access&16)){Uo.recordError(1282);Wo("buffer was not mapped with GL_MAP_FLUSH_EXPLICIT_BIT in glFlushMappedBufferRange");return}if(Pv<0||Qv<0||Pv+Qv>Rv.length){Uo.recordError(1281);Wo("invalid range in glFlushMappedBufferRange");return}Vo.bufferSubData(Ov,Rv.offset,$o.subarray(Rv.mem+Pv,Rv.mem+Pv+Qv))};Nr.prototype._glFramebufferRenderbuffer=function(Sv,Tv,Uv,Vv){Vo.framebufferRenderbuffer(Sv,Tv,Uv,Uo.renderbuffers[Vv])};Nr.prototype._glFramebufferTexture2D=function(Wv,Xv,Yv,Zv,$v){Vo.framebufferTexture2D(Wv,Xv,Yv,Uo.textures[Zv],$v)};Nr.prototype._glFramebufferTextureLayer=function(_v,aw,bw,cw,dw){Vo.framebufferTextureLayer(_v,aw,Uo.textures[bw],cw,dw)};Nr.prototype._glFrontFace=function(ew){Vo["frontFace"](ew)};Nr.prototype._glGenBuffers=function(fw,gw){for(var hw=0;hw<fw;hw++){var iw=Vo.createBuffer();if(!iw){Uo.recordError(1282);while(hw<fw)bp[gw+hw++*4>>2]=0;return}var jw=Uo.getNewId(Uo.buffers);iw.name=jw;Uo.buffers[jw]=iw;bp[gw+hw*4>>2]=jw}};Nr.prototype._glGenFramebuffers=function(kw,lw){for(var mw=0;mw<kw;++mw){var nw=Vo.createFramebuffer();if(!nw){Uo.recordError(1282);while(mw<kw)bp[lw+mw++*4>>2]=0;return}var ow=Uo.getNewId(Uo.framebuffers);nw.name=ow;Uo.framebuffers[ow]=nw;bp[lw+mw*4>>2]=ow}};Nr.prototype._glGenQueries=function(pw,qw){for(var rw=0;rw<pw;rw++){var sw=Vo["createQuery"]();if(!sw){Uo.recordError(1282);while(rw<pw)bp[qw+rw++*4>>2]=0;return}var tw=Uo.getNewId(Uo.queries);sw.name=tw;Uo.queries[tw]=sw;bp[qw+rw*4>>2]=tw}};Nr.prototype._glGenRenderbuffers=function(uw,vw){for(var ww=0;ww<uw;ww++){var xw=Vo.createRenderbuffer();if(!xw){Uo.recordError(1282);while(ww<uw)bp[vw+ww++*4>>2]=0;return}var yw=Uo.getNewId(Uo.renderbuffers);xw.name=yw;Uo.renderbuffers[yw]=xw;bp[vw+ww*4>>2]=yw}};Nr.prototype._glGenSamplers=function(zw,Aw){for(var Bw=0;Bw<zw;Bw++){var Cw=Vo["createSampler"]();if(!Cw){Uo.recordError(1282);while(Bw<zw)bp[Aw+Bw++*4>>2]=0;return}var Dw=Uo.getNewId(Uo.samplers);Cw.name=Dw;Uo.samplers[Dw]=Cw;bp[Aw+Bw*4>>2]=Dw}};Nr.prototype._glGenTextures=function(Ew,Fw){for(var Gw=0;Gw<Ew;Gw++){var Hw=Vo.createTexture();if(!Hw){Uo.recordError(1282);while(Gw<Ew)bp[Fw+Gw++*4>>2]=0;return}var Iw=Uo.getNewId(Uo.textures);Hw.name=Iw;Uo.textures[Iw]=Hw;bp[Fw+Gw*4>>2]=Iw}};Nr.prototype._glGenTransformFeedbacks=function(Jw,Kw){for(var Lw=0;Lw<Jw;Lw++){var Mw=Vo["createTransformFeedback"]();if(!Mw){Uo.recordError(1282);while(Lw<Jw)bp[Kw+Lw++*4>>2]=0;return}var Nw=Uo.getNewId(Uo.transformFeedbacks);Mw.name=Nw;Uo.transformFeedbacks[Nw]=Mw;bp[Kw+Lw*4>>2]=Nw}};Nr.prototype._glGenVertexArrays=function(Ow,Pw){for(var Qw=0;Qw<Ow;Qw++){var Rw=Vo["createVertexArray"]();if(!Rw){Uo.recordError(1282);while(Qw<Ow)bp[Pw+Qw++*4>>2]=0;return}var Sw=Uo.getNewId(Uo.vaos);Rw.name=Sw;Uo.vaos[Sw]=Rw;bp[Pw+Qw*4>>2]=Sw}};Nr.prototype._glGenerateMipmap=function(Tw){Vo["generateMipmap"](Tw)};Nr.prototype._glGetActiveAttrib=function(Uw,Vw,Ww,Xw,Yw,Zw,$w){Uw=Uo.programs[Uw];var _w=Vo.getActiveAttrib(Uw,Vw);if(!_w)return;if(Ww>0&&$w){var ax=Yo(_w.name,$w,Ww);if(Xw)bp[Xw>>2]=ax}else{if(Xw)bp[Xw>>2]=0}if(Yw)bp[Yw>>2]=_w.size;if(Zw)bp[Zw>>2]=_w.type};Nr.prototype._glGetActiveUniform=function(bx,cx,dx,ex,fx,gx,hx){bx=Uo.programs[bx];var ix=Vo.getActiveUniform(bx,cx);if(!ix)return;if(dx>0&&hx){var jx=Yo(ix.name,hx,dx);if(ex)bp[ex>>2]=jx}else{if(ex)bp[ex>>2]=0}if(fx)bp[fx>>2]=ix.size;if(gx)bp[gx>>2]=ix.type};Nr.prototype._glGetActiveUniformBlockName=function(kx,lx,mx,nx,ox){kx=Uo.programs[kx];var px=Vo["getActiveUniformBlockName"](kx,lx);if(!px)return;if(ox&&mx>0){var qx=Yo(px,ox,mx);if(nx)bp[nx>>2]=qx}else{if(nx)bp[nx>>2]=0}};Nr.prototype._glGetActiveUniformBlockiv=function(rx,sx,tx,ux){if(!ux){Uo.recordError(1281);return}rx=Uo.programs[rx];switch(tx){case 35393:var vx=Vo["getActiveUniformBlockName"](rx,sx);bp[ux>>2]=vx.length+1;return;default:var wx=Vo["getActiveUniformBlockParameter"](rx,sx,tx);if(!wx)return;if(typeof wx=="number"){bp[ux>>2]=wx}else{for(var xx=0;xx<wx.length;xx++){bp[ux+xx*4>>2]=wx[xx]}}}};Nr.prototype._glGetActiveUniformsiv=function(yx,zx,Ax,Bx,Cx){if(!Cx){Uo.recordError(1281);return}if(zx>0&&Ax==0){Uo.recordError(1281);return}yx=Uo.programs[yx];var Dx=[];for(var Ex=0;Ex<zx;Ex++){Dx.push(bp[Ax+Ex*4>>2])}var Fx=Vo["getActiveUniforms"](yx,Dx,Bx);if(!Fx)return;var Gx=Fx.length;for(var Ex=0;Ex<Gx;Ex++){bp[Cx+Ex*4>>2]=Fx[Ex]}};Nr.prototype._glGetAttribLocation=function(Hx,Ix){return Vo.getAttribLocation(Uo.programs[Hx],Xo(Ix))};Nr.prototype._glGetError=function(){if(Uo.lastError){var Jx=Uo.lastError;Uo.lastError=0;return Jx}else{return Vo.getError()}};Nr.prototype._glGetFramebufferAttachmentParameteriv=function(Kx,Lx,Mx,Nx){var Ox=Vo.getFramebufferAttachmentParameter(Kx,Lx,Mx);if(Ox instanceof WebGLRenderbuffer||Ox instanceof WebGLTexture){Ox=Ox["name"]|0}bp[Nx>>2]=Ox};Nr.prototype._glGetIntegeri_v=function(Px,Qx,Rx){jp(Px,Qx,Rx,"Integer")};Nr.prototype._glGetIntegerv=function(Sx,Tx){kp(Sx,Tx,"Integer")};Nr.prototype._glGetInternalformativ=function(Ux,Vx,Wx,Xx,Yx){if(Xx<0){Uo.recordError(1281);return}var Zx=Vo["getInternalformatParameter"](Ux,Vx,32937);if(!Zx){Uo.recordError(1280);return}switch(Wx){case 32937:var $x=Math.min(Xx,Zx.length);for(var _x=0;_x<$x;_x++){var ay=Zx[_x];bp[Yx+_x*4>>2]=ay}break;case 37760:if(Xx>1){var ay=Zx.length;bp[Yx>>2]=ay}break;default:Uo.recordError(1280)}};Nr.prototype._glGetProgramBinary=function(by,cy,dy,ey,fy){Uo.recordError(1282)};Nr.prototype._glGetProgramInfoLog=function(gy,hy,iy,jy){var ky=Vo.getProgramInfoLog(Uo.programs[gy]);if(ky===null)ky="(unknown error)";if(hy>0&&jy){var ly=Yo(ky,jy,hy);if(iy)bp[iy>>2]=ly}else{if(iy)bp[iy>>2]=0}};Nr.prototype._glGetProgramiv=function(my,ny,oy){if(!oy){Uo.recordError(1281);return}if(my>=Uo.counter){Uo.recordError(1281);return}var py=Uo.programInfos[my];if(!py){Uo.recordError(1282);return}if(ny==35716){var qy=Vo.getProgramInfoLog(Uo.programs[my]);if(qy===null)qy="(unknown error)";bp[oy>>2]=qy.length+1}else if(ny==35719){bp[oy>>2]=py.maxUniformLength}else if(ny==35722){if(py.maxAttributeLength==-1){my=Uo.programs[my];var ry=Vo.getProgramParameter(my,Vo.ACTIVE_ATTRIBUTES);py.maxAttributeLength=0;for(var sy=0;sy<ry;++sy){var ty=Vo.getActiveAttrib(my,sy);py.maxAttributeLength=Math.max(py.maxAttributeLength,ty.name.length+1)}}bp[oy>>2]=py.maxAttributeLength}else if(ny==35381){if(py.maxUniformBlockNameLength==-1){my=Uo.programs[my];var uy=Vo.getProgramParameter(my,Vo.ACTIVE_UNIFORM_BLOCKS);py.maxUniformBlockNameLength=0;for(var sy=0;sy<uy;++sy){var vy=Vo.getActiveUniformBlockName(my,sy);py.maxUniformBlockNameLength=Math.max(py.maxUniformBlockNameLength,vy.length+1)}}bp[oy>>2]=py.maxUniformBlockNameLength}else{bp[oy>>2]=Vo.getProgramParameter(Uo.programs[my],ny)}};Nr.prototype._glGetRenderbufferParameteriv=function(wy,xy,yy){if(!yy){Uo.recordError(1281);return}bp[yy>>2]=Vo.getRenderbufferParameter(wy,xy)};Nr.prototype._glGetShaderInfoLog=function(zy,Ay,By,Cy){var Dy=Vo.getShaderInfoLog(Uo.shaders[zy]);if(Dy===null)Dy="(unknown error)";if(Ay>0&&Cy){var Ey=Yo(Dy,Cy,Ay);if(By)bp[By>>2]=Ey}else{if(By)bp[By>>2]=0}};Nr.prototype._glGetShaderPrecisionFormat=function(Fy,Gy,Hy,Iy){var Jy=Vo.getShaderPrecisionFormat(Fy,Gy);bp[Hy>>2]=Jy.rangeMin;bp[Hy+4>>2]=Jy.rangeMax;bp[Iy>>2]=Jy.precision};Nr.prototype._glGetShaderSource=function(Ky,Ly,My,Ny){var Oy=Vo.getShaderSource(Uo.shaders[Ky]);if(!Oy)return;if(Ly>0&&Ny){var Py=Yo(Oy,Ny,Ly);if(My)bp[My>>2]=Py}else{if(My)bp[My>>2]=0}};Nr.prototype._glGetShaderiv=function(Qy,Ry,Sy){if(!Sy){Uo.recordError(1281);return}if(Ry==35716){var Ty=Vo.getShaderInfoLog(Uo.shaders[Qy]);if(Ty===null)Ty="(unknown error)";bp[Sy>>2]=Ty.length+1}else if(Ry==35720){var Uy=Vo.getShaderSource(Uo.shaders[Qy]);var Vy=Uy===null||Uy.length==0?0:Uy.length+1;bp[Sy>>2]=Vy}else{bp[Sy>>2]=Vo.getShaderParameter(Uo.shaders[Qy],Ry)}};Nr.prototype._glGetString=function(Wy){Wo("unsupported glGetString");return 0};Nr.prototype._glGetStringi=function(Xy,Yy){Wo("unsupported glGetStringi");return 0};Nr.prototype._glGetTexParameteriv=function(Zy,$y,_y){if(!_y){Uo.recordError(1281);return}bp[_y>>2]=Vo.getTexParameter(Zy,$y)};Nr.prototype._glGetUniformBlockIndex=function(az,bz){az=Uo.programs[az];bz=Xo(bz);return Vo["getUniformBlockIndex"](az,bz)};Nr.prototype._glGetUniformIndices=function(cz,dz,ez,fz){if(!fz){Uo.recordError(1281);return}if(dz>0&&(ez==0||fz==0)){Uo.recordError(1281);return}cz=Uo.programs[cz];var gz=[];for(var hz=0;hz<dz;hz++)gz.push(Xo(bp[ez+hz*4>>2]));var iz=Vo["getUniformIndices"](cz,gz);if(!iz)return;var jz=iz.length;for(var hz=0;hz<jz;hz++){bp[fz+hz*4>>2]=iz[hz]}};Nr.prototype._glGetUniformLocation=function(kz,lz){lz=Xo(lz);var mz=0;if(lz.indexOf("]",lz.length-1)!==-1){var nz=lz.lastIndexOf("[");var oz=lz.slice(nz+1,-1);if(oz.length>0){mz=parseInt(oz);if(mz<0){return-1}}lz=lz.slice(0,nz)}var pz=Uo.programInfos[kz];if(!pz){return-1}var qz=pz.uniforms;var rz=qz[lz];if(rz&&mz<rz[0]){return rz[1]+mz}else{return-1}};Nr.prototype._glGetUniformiv=function(sz,tz,uz){lp(sz,tz,uz,"Integer")};Nr.prototype._glGetVertexAttribiv=function(vz,wz,xz){mp(vz,wz,xz,"FloatToInteger")};Nr.prototype._glInvalidateFramebuffer=function(yz,zz,Az){var Bz=Uo.tempFixedLengthArray[zz];for(var Cz=0;Cz<zz;Cz++){Bz[Cz]=bp[Az+Cz*4>>2]}Vo["invalidateFramebuffer"](yz,Bz)};Nr.prototype._glIsEnabled=function(Dz){return Vo["isEnabled"](Dz)};Nr.prototype._glIsVertexArray=function(Ez){var Fz=Uo.vaos[Ez];if(!Fz)return 0;return Vo["isVertexArray"](Fz)};Nr.prototype._glLinkProgram=function(Gz){Vo.linkProgram(Uo.programs[Gz]);Uo.programInfos[Gz]=null;Uo.populateUniformTable(Gz)};Nr.prototype._glMapBufferRange=function(Hz,Iz,Jz,Kz){if(Kz!=26&&Kz!=10){Wo("glMapBufferRange is only supported when access is MAP_WRITE|INVALIDATE_BUFFER");return 0}if(!ip(Hz)){Uo.recordError(1280);Wo("GL_INVALID_ENUM in glMapBufferRange");return 0}var Lz=ep(Jz);if(!Lz)return 0;Uo.mappedBuffers[hp(Hz)]={offset:Iz,length:Jz,mem:Lz,access:Kz};return Lz};Nr.prototype._glPixelStorei=function(Mz,Nz){if(Mz==3333){Uo.packAlignment=Nz}else if(Mz==3317){Uo.unpackAlignment=Nz}Vo.pixelStorei(Mz,Nz)};Nr.prototype._glPolygonOffset=function(Oz,Pz){Vo["polygonOffset"](Oz,Pz)};Nr.prototype._glProgramBinary=function(Qz,Rz,Sz,Tz){Uo.recordError(1280)};Nr.prototype._glProgramParameteri=function(Uz,Vz,Wz){Uo.recordError(1280)};Nr.prototype._glReadBuffer=function(Xz){Vo["readBuffer"](Xz)};Nr.prototype._glReadPixels=function(Yz,Zz,$z,_z,aA,bA,cA){if(Uo.currentContext.supportsWebGL2EntryPoints){if(Vo.currentPixelPackBufferBinding){Vo.readPixels(Yz,Zz,$z,_z,aA,bA,cA)}else{Vo.readPixels(Yz,Zz,$z,_z,aA,bA,pp(bA),cA>>qp(bA))}return}var dA=op(bA,aA,$z,_z,cA,aA);if(!dA){Uo.recordError(1280);return}Vo.readPixels(Yz,Zz,$z,_z,aA,bA,dA)};Nr.prototype._glRenderbufferStorage=function(eA,fA,gA,hA){Vo["renderbufferStorage"](eA,fA,gA,hA)};Nr.prototype._glRenderbufferStorageMultisample=function(iA,jA,kA,lA,mA){Vo["renderbufferStorageMultisample"](iA,jA,kA,lA,mA)};Nr.prototype._glSamplerParameteri=function(nA,oA,pA){Vo["samplerParameteri"](nA?Uo.samplers[nA]:null,oA,pA)};Nr.prototype._glScissor=function(qA,rA,sA,tA){Vo["scissor"](qA,rA,sA,tA)};Nr.prototype._glShaderSource=function(uA,vA,wA,xA){var yA=Uo.getSource(uA,vA,wA,xA);Vo.shaderSource(Uo.shaders[uA],yA)};Nr.prototype._glStencilFuncSeparate=function(zA,AA,BA,CA){Vo["stencilFuncSeparate"](zA,AA,BA,CA)};Nr.prototype._glStencilMask=function(DA){Vo["stencilMask"](DA)};Nr.prototype._glStencilOpSeparate=function(EA,FA,GA,HA){Vo["stencilOpSeparate"](EA,FA,GA,HA)};Nr.prototype._glTexImage2D=function(IA,JA,KA,LA,MA,NA,OA,PA,QA){if(Uo.currentContext.supportsWebGL2EntryPoints){if(Vo.currentPixelUnpackBufferBinding){Vo.texImage2D(IA,JA,KA,LA,MA,NA,OA,PA,QA)}else if(QA!=0){Vo.texImage2D(IA,JA,KA,LA,MA,NA,OA,PA,pp(PA),QA>>qp(PA))}else{Vo.texImage2D(IA,JA,KA,LA,MA,NA,OA,PA,null)}return}var RA=null;if(QA)RA=op(PA,OA,LA,MA,QA,KA);Vo.texImage2D(IA,JA,KA,LA,MA,NA,OA,PA,RA)};Nr.prototype._glTexImage3D=function(SA,TA,UA,VA,WA,XA,YA,ZA,$A,_A){if(Vo.currentPixelUnpackBufferBinding){Vo["texImage3D"](SA,TA,UA,VA,WA,XA,YA,ZA,$A,_A)}else if(_A!=0){Vo["texImage3D"](SA,TA,UA,VA,WA,XA,YA,ZA,$A,pp($A),_A>>qp($A))}else{Vo["texImage3D"](SA,TA,UA,VA,WA,XA,YA,ZA,$A,null)}};Nr.prototype._glTexParameterf=function(aB,bB,cB){Vo["texParameterf"](aB,bB,cB)};Nr.prototype._glTexParameteri=function(dB,eB,fB){Vo["texParameteri"](dB,eB,fB)};Nr.prototype._glTexParameteriv=function(gB,hB,iB){var jB=bp[iB>>2];Vo.texParameteri(gB,hB,jB)};Nr.prototype._glTexStorage2D=function(kB,lB,mB,nB,oB){Vo["texStorage2D"](kB,lB,mB,nB,oB)};Nr.prototype._glTexStorage3D=function(pB,qB,rB,sB,tB,uB){Vo["texStorage3D"](pB,qB,rB,sB,tB,uB)};Nr.prototype._glTexSubImage2D=function(vB,wB,xB,yB,zB,AB,BB,CB,DB){if(Uo.currentContext.supportsWebGL2EntryPoints){if(Vo.currentPixelUnpackBufferBinding){Vo.texSubImage2D(vB,wB,xB,yB,zB,AB,BB,CB,DB)}else if(DB!=0){Vo.texSubImage2D(vB,wB,xB,yB,zB,AB,BB,CB,pp(CB),DB>>qp(CB))}else{Vo.texSubImage2D(vB,wB,xB,yB,zB,AB,BB,CB,null)}return}var EB=null;if(DB)EB=op(CB,BB,zB,AB,DB,0);Vo.texSubImage2D(vB,wB,xB,yB,zB,AB,BB,CB,EB)};Nr.prototype._glTexSubImage3D=function(FB,GB,HB,IB,JB,KB,LB,MB,NB,OB,PB){if(Vo.currentPixelUnpackBufferBinding){Vo["texSubImage3D"](FB,GB,HB,IB,JB,KB,LB,MB,NB,OB,PB)}else if(PB!=0){Vo["texSubImage3D"](FB,GB,HB,IB,JB,KB,LB,MB,NB,OB,pp(OB),PB>>qp(OB))}else{Vo["texSubImage3D"](FB,GB,HB,IB,JB,KB,LB,MB,NB,OB,null)}};Nr.prototype._glTransformFeedbackVaryings=function(QB,RB,SB,TB){QB=Uo.programs[QB];var UB=[];for(var VB=0;VB<RB;VB++)UB.push(Xo(bp[SB+VB*4>>2]));Vo["transformFeedbackVaryings"](QB,UB,TB)};Nr.prototype._glUniform1fv=function(WB,XB,YB){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.uniform1fv(Uo.uniforms[WB],dp,YB>>2,XB);return}var ZB;if(XB<=Uo.MINI_TEMP_BUFFER_SIZE){ZB=Uo.miniTempBufferViews[XB-1];for(var $B=0;$B<XB;++$B){ZB[$B]=dp[YB+4*$B>>2]}}else{ZB=dp.subarray(YB>>2,YB+XB*4>>2)}Vo.uniform1fv(Uo.uniforms[WB],ZB)};Nr.prototype._glUniform1i=function(_B,aC){Vo.uniform1i(Uo.uniforms[_B],aC)};Nr.prototype._glUniform1iv=function(bC,cC,dC){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.uniform1iv(Uo.uniforms[bC],bp,dC>>2,cC);return}Vo.uniform1iv(Uo.uniforms[bC],bp.subarray(dC>>2,dC+cC*4>>2))};Nr.prototype._glUniform1uiv=function(eC,fC,gC){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.uniform1uiv(Uo.uniforms[eC],cp,gC>>2,fC)}else{Vo.uniform1uiv(Uo.uniforms[eC],cp.subarray(gC>>2,gC+fC*4>>2))}};Nr.prototype._glUniform2fv=function(hC,iC,jC){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.uniform2fv(Uo.uniforms[hC],dp,jC>>2,iC*2);return}var kC;if(2*iC<=Uo.MINI_TEMP_BUFFER_SIZE){kC=Uo.miniTempBufferViews[2*iC-1];for(var lC=0;lC<2*iC;lC+=2){kC[lC]=dp[jC+4*lC>>2];kC[lC+1]=dp[jC+(4*lC+4)>>2]}}else{kC=dp.subarray(jC>>2,jC+iC*8>>2)}Vo.uniform2fv(Uo.uniforms[hC],kC)};Nr.prototype._glUniform2iv=function(mC,nC,oC){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.uniform2iv(Uo.uniforms[mC],bp,oC>>2,nC*2);return}Vo.uniform2iv(Uo.uniforms[mC],bp.subarray(oC>>2,oC+nC*8>>2))};Nr.prototype._glUniform2uiv=function(pC,qC,rC){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.uniform2uiv(Uo.uniforms[pC],cp,rC>>2,qC*2)}else{Vo.uniform2uiv(Uo.uniforms[pC],cp.subarray(rC>>2,rC+qC*8>>2))}};Nr.prototype._glUniform3fv=function(sC,tC,uC){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.uniform3fv(Uo.uniforms[sC],dp,uC>>2,tC*3);return}var vC;if(3*tC<=Uo.MINI_TEMP_BUFFER_SIZE){vC=Uo.miniTempBufferViews[3*tC-1];for(var wC=0;wC<3*tC;wC+=3){vC[wC]=dp[uC+4*wC>>2];vC[wC+1]=dp[uC+(4*wC+4)>>2];vC[wC+2]=dp[uC+(4*wC+8)>>2]}}else{vC=dp.subarray(uC>>2,uC+tC*12>>2)}Vo.uniform3fv(Uo.uniforms[sC],vC)};Nr.prototype._glUniform3iv=function(xC,yC,zC){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.uniform3iv(Uo.uniforms[xC],bp,zC>>2,yC*3);return}Vo.uniform3iv(Uo.uniforms[xC],bp.subarray(zC>>2,zC+yC*12>>2))};Nr.prototype._glUniform3uiv=function(AC,BC,CC){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.uniform3uiv(Uo.uniforms[AC],cp,CC>>2,BC*3)}else{Vo.uniform3uiv(Uo.uniforms[AC],cp.subarray(CC>>2,CC+BC*12>>2))}};Nr.prototype._glUniform4fv=function(DC,EC,FC){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.uniform4fv(Uo.uniforms[DC],dp,FC>>2,EC*4);return}var GC;if(4*EC<=Uo.MINI_TEMP_BUFFER_SIZE){GC=Uo.miniTempBufferViews[4*EC-1];for(var HC=0;HC<4*EC;HC+=4){GC[HC]=dp[FC+4*HC>>2];GC[HC+1]=dp[FC+(4*HC+4)>>2];GC[HC+2]=dp[FC+(4*HC+8)>>2];GC[HC+3]=dp[FC+(4*HC+12)>>2]}}else{GC=dp.subarray(FC>>2,FC+EC*16>>2)}Vo.uniform4fv(Uo.uniforms[DC],GC)};Nr.prototype._glUniform4iv=function(IC,JC,KC){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.uniform4iv(Uo.uniforms[IC],bp,KC>>2,JC*4);return}Vo.uniform4iv(Uo.uniforms[IC],bp.subarray(KC>>2,KC+JC*16>>2))};Nr.prototype._glUniform4uiv=function(LC,MC,NC){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.uniform4uiv(Uo.uniforms[LC],cp,NC>>2,MC*4)}else{Vo.uniform4uiv(Uo.uniforms[LC],cp.subarray(NC>>2,NC+MC*16>>2))}};Nr.prototype._glUniformBlockBinding=function(OC,PC,QC){OC=Uo.programs[OC];Vo["uniformBlockBinding"](OC,PC,QC)};Nr.prototype._glUniformMatrix3fv=function(RC,SC,TC,UC){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.uniformMatrix3fv(Uo.uniforms[RC],!!TC,dp,UC>>2,SC*9);return}var VC;if(9*SC<=Uo.MINI_TEMP_BUFFER_SIZE){VC=Uo.miniTempBufferViews[9*SC-1];for(var WC=0;WC<9*SC;WC+=9){VC[WC]=dp[UC+4*WC>>2];VC[WC+1]=dp[UC+(4*WC+4)>>2];VC[WC+2]=dp[UC+(4*WC+8)>>2];VC[WC+3]=dp[UC+(4*WC+12)>>2];VC[WC+4]=dp[UC+(4*WC+16)>>2];VC[WC+5]=dp[UC+(4*WC+20)>>2];VC[WC+6]=dp[UC+(4*WC+24)>>2];VC[WC+7]=dp[UC+(4*WC+28)>>2];VC[WC+8]=dp[UC+(4*WC+32)>>2]}}else{VC=dp.subarray(UC>>2,UC+SC*36>>2)}Vo.uniformMatrix3fv(Uo.uniforms[RC],!!TC,VC)};Nr.prototype._glUniformMatrix4fv=function(XC,YC,ZC,$C){if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.uniformMatrix4fv(Uo.uniforms[XC],!!ZC,dp,$C>>2,YC*16);return}var _C;if(16*YC<=Uo.MINI_TEMP_BUFFER_SIZE){_C=Uo.miniTempBufferViews[16*YC-1];for(var aD=0;aD<16*YC;aD+=16){_C[aD]=dp[$C+4*aD>>2];_C[aD+1]=dp[$C+(4*aD+4)>>2];_C[aD+2]=dp[$C+(4*aD+8)>>2];_C[aD+3]=dp[$C+(4*aD+12)>>2];_C[aD+4]=dp[$C+(4*aD+16)>>2];_C[aD+5]=dp[$C+(4*aD+20)>>2];_C[aD+6]=dp[$C+(4*aD+24)>>2];_C[aD+7]=dp[$C+(4*aD+28)>>2];_C[aD+8]=dp[$C+(4*aD+32)>>2];_C[aD+9]=dp[$C+(4*aD+36)>>2];_C[aD+10]=dp[$C+(4*aD+40)>>2];_C[aD+11]=dp[$C+(4*aD+44)>>2];_C[aD+12]=dp[$C+(4*aD+48)>>2];_C[aD+13]=dp[$C+(4*aD+52)>>2];_C[aD+14]=dp[$C+(4*aD+56)>>2];_C[aD+15]=dp[$C+(4*aD+60)>>2]}}else{_C=dp.subarray($C>>2,$C+YC*64>>2)}Vo.uniformMatrix4fv(Uo.uniforms[XC],!!ZC,_C)};Nr.prototype._glUnmapBuffer=function(bD){if(!ip(bD)){Uo.recordError(1280);Wo("GL_INVALID_ENUM in glUnmapBuffer");return 0}var cD=hp(bD);var dD=Uo.mappedBuffers[cD];if(!dD){Uo.recordError(1282);Wo("buffer was never mapped in glUnmapBuffer");return 0}Uo.mappedBuffers[cD]=null;if(!(dD.access&16))if(Uo.currentContext.supportsWebGL2EntryPoints){Vo.bufferSubData(bD,dD.offset,$o,dD.mem,dD.length)}else{Vo.bufferSubData(bD,dD.offset,$o.subarray(dD.mem,dD.mem+dD.length))}fp(dD.mem);return 1};Nr.prototype._glUseProgram=function(eD){Vo.useProgram(eD?Uo.programs[eD]:null)};Nr.prototype._glValidateProgram=function(fD){Vo.validateProgram(Uo.programs[fD])};Nr.prototype._glVertexAttrib4f=function(gD,hD,iD,jD,kD){Vo["vertexAttrib4f"](gD,hD,iD,jD,kD)};Nr.prototype._glVertexAttrib4fv=function(lD,mD){Vo.vertexAttrib4f(lD,dp[mD>>2],dp[mD+4>>2],dp[mD+8>>2],dp[mD+12>>2])};Nr.prototype._glVertexAttribIPointer=function(nD,oD,pD,qD,rD){var sD=Uo.currentContext.clientBuffers[nD];if(!Uo.currArrayBuffer){sD.size=oD;sD.type=pD;sD.normalized=false;sD.stride=qD;sD.ptr=rD;sD.clientside=true;return}sD.clientside=false;Vo.vertexAttribIPointer(nD,oD,pD,qD,rD)};Nr.prototype._glVertexAttribPointer=function(tD,uD,vD,wD,xD,yD){Vo.vertexAttribPointer(tD,uD,vD,!!wD,xD,yD)};Nr.prototype._glViewport=function(zD,AD,BD,CD){Vo["viewport"](zD,AD,BD,CD)};return Nr}();Uo.instance=new rp;Uo.instance["_name"]="GL";Uo.instance["_textures"]=Uo.textures;return[Uo.instance]});