var MiaokitModule=function(a,b){if(a===void 0){a={m_bUnity:true,m_pUnityPath:undefined,m_pModulePath:undefined,m_pServer:undefined}}if(b===void 0){b="WWW.YONGTOC.COM"}var c=this;c["m_pEngine"]=a.m_bUnity?"Unity":"Sisyphus";c["m_pEnginePath"]=a.m_pUnityPath;c["m_pModulePath"]=a.m_pModulePath;c["m_pServer"]=a.m_pServer;c["m_pID"]=b;c["Merge"](c)};var MiaokitMerge=function(d){var e=[];d["Merge"]=d["Merge"]||function(f){for(var g=0,h=e;g<h.length;g++){var i=h[g];var j=i(f);if(j){for(var k=0,l=j;k<l.length;k++){var m=l[k];f[m._name]=m}}}};return function(n){e.push(n)}}(MiaokitModule.prototype);MiaokitMerge(function(o){var p=undefined;var q=undefined;var r={};var s=function(u,v){if(v===void 0){v=undefined}var w=0;this.length=u(-1);this[Symbol.iterator]=function(){return{next:function(){var x=u(w);if(x){var y=p(x);w=v?w+1:y.m_nObject;return{value:y,done:false}}return{value:undefined,done:true}}}}};r["Transform"]=function(z){Object.defineProperty(z,"position",{get:function(){var A=this["_GetPosition"]()/4;var B=o["WASM"].HEAPF32();return{x:B[A],y:B[A+1],z:B[A+2]}},set:function(C){this["_SetPosition"](C.x,C.y,C.z)}});Object.defineProperty(z,"euler",{get:function(){var D=this["_GetEuler"]()/4;var E=o["WASM"].HEAPF32();return{x:E[D],y:E[D+1],z:E[D+2]}},set:function(F){this["_SetEuler"](F.x,F.y,F.z)}});Object.defineProperty(z,"rotation",{get:function(){var G=this["_GetRotation"]()/4;var H=o["WASM"].HEAPF32();return{x:H[G],y:H[G+1],z:H[G+2],w:H[G+3]}},set:function(I){this["_SetRotation"](I.x,I.y,I.z,I.w)}});Object.defineProperty(z,"scale",{get:function(){var J=this["_GetScale"]()/4;var K=o["WASM"].HEAPF32();return{x:K[J],y:K[J+1],z:K[J+2]}},set:function(L){this["_SetScale"](L.x,L.y,L.z)}});Object.defineProperty(z,"localPosition",{get:function(){var M=this["_GetLocalPosition"]()/4;var N=o["WASM"].HEAPF32();return{x:N[M],y:N[M+1],z:N[M+2]}},set:function(O){this["_SetLocalPosition"](O.x,O.y,O.z)}});Object.defineProperty(z,"localEuler",{get:function(){var P=this["_GetLocalEuler"]()/4;var Q=o["WASM"].HEAPF32();return{x:Q[P],y:Q[P+1],z:Q[P+2]}},set:function(R){this["_SetLocalEuler"](R.x,R.y,R.z)}});Object.defineProperty(z,"localRotation",{get:function(){var S=this["_GetLocalRotation"]()/4;var T=o["WASM"].HEAPF32();return{x:T[S],y:T[S+1],z:T[S+2],w:T[S+3]}},set:function(U){this["_SetLocalRotation"](U.x,U.y,U.z,U.w)}});Object.defineProperty(z,"localScale",{get:function(){var V=this["_GetLocalScale"]()/4;var W=o["WASM"].HEAPF32();return{x:W[V],y:W[V+1],z:W[V+2]}},set:function(X){this["_SetLocalScale"](X.x,X.y,X.z)}});Object.defineProperty(z,"right",{get:function(){var Y=this["_GetRight"]()/4;var Z=o["WASM"].HEAPF32();return{x:Z[Y],y:Z[Y+1],z:Z[Y+2]}},set:function($){this["_SetRight"]($.x,$.y,$.z)}});Object.defineProperty(z,"up",{get:function(){var _=this["_GetUp"]()/4;var aa=o["WASM"].HEAPF32();return{x:aa[_],y:aa[_+1],z:aa[_+2]}},set:function(){var ba=this["_SetUp"]()/4;var ca=o["WASM"].HEAPF32();return{x:ca[ba],y:ca[ba+1],z:ca[ba+2]}}});Object.defineProperty(z,"forward",{get:function(){var da=this["_GetForward"]()/4;var ea=o["WASM"].HEAPF32();return{x:ea[da],y:ea[da+1],z:ea[da+2]}},set:function(){var fa=this["_SetForward"]()/4;var ga=o["WASM"].HEAPF32();return{x:ga[fa],y:ga[fa+1],z:ga[fa+2]}}});z["Rotate"]=function(ha,ia){this["_Rotate"](ha.x,ha.y,ha.z,ia)};z["Rotate2"]=function(ja,ka,la){this["_Rotate2"](ja.x,ja.y,ja.z,ka,la)};z["Translate"]=function(ma,na){this["_Translate"](ma.x,ma.y,ma.z,na)};z["TransformPoint"]=function(oa){var pa=this["_TransformPoint"](oa.x,oa.y,oa.z)/4;var qa=o["WASM"].HEAPF32();return{x:qa[pa],y:qa[pa+1],z:qa[pa+2]}}};r["GameObject"]=function(ra){Object.defineProperty(ra,"name",{get:function(){if(!this._name){var sa=this._GetName(0);var ta=this._GetName(1);this._name=o["WASM"].GetString(ta,sa)}return this._name}});Object.defineProperty(ra,"transform",{get:function(){return p(this["_GetTransform"]())}});Object.defineProperty(ra,"mesh",{get:function(){return p(this["_GetMesh"]())},set:function(ua){this["_SetMesh"](ua.m_nObject)}});Object.defineProperty(ra,"children",{get:function(){var va=this;return new s(function(wa){return va._IterChild(wa)},true)}});Object.defineProperty(ra,"parent",{get:function(){return p(this["_GetParent"]())}});Object.defineProperty(ra,"data",{get:function(){return p(this["_GetUserData"]())},set:function(xa){}});Object.defineProperty(ra,"enableCollider",{set:function(ya){this["_EnableCollider"](ya)}});Object.defineProperty(ra,"active",{set:function(za){this["_Active"](za)}});Object.defineProperty(ra,"highlight",{set:function(Aa){this["_Highlight"](Aa)}});Object.defineProperty(ra,"transparent",{set:function(Ba){this["_Transparent"](Ba)}});ra["Destory"]=function(){this["_Destory"]()};o["GameObject"]=function(){return p(ra._GameObject())}};r["Miaokit"]=function(Ca){Ca["LoadTile"]=function(Da){var Ea=this["_Malloc"](Da.byteLength);if(Ea){o["WASM"]["HEAPU8"](Ea,Da.byteLength).set(new Uint8Array(Da));var Fa=this["_LoadTile"](Ea,Da.byteLength);var Ga=p(Fa);return Ga}return null};Ca["Analyze"]=function(Ha){var Ia=this["_Analyze"]();var Ja=o["WASM"].HEAP32()[Ia/4];var Ka=o["WASM"].GetString(Ia+4,Ja);try{var La=JSON.parse(Ka);var Ma=q(Ha).concat(La);return Ma}catch(Na){console.log(Ka)}return null};Ca["PickEntity"]=function(Oa){return p(this["_PickEntity"](Oa))};Ca["GetScene"]=function(Pa){return p(this["_GetScene"](Pa))};Ca["WorldToScreenPoint"]=function(Qa){var Ra=this["_WorldToScreenPoint"](Qa.x,Qa.y,Qa.z)/4;var Sa=o["WASM"].HEAPF32();return{x:Sa[Ra],y:Sa[Ra+1],z:Sa[Ra+2]}};Ca["ScreenPointToRay"]=function(Ta){var Ua=this["_ScreenPointToRay"](Ta.x,Ta.y,Ta.z)/4;var Va=o["WASM"].HEAPF32();return{m_mOrigin:{x:Va[Ua],y:Va[Ua+1],z:Va[Ua+2]},m_mDirection:{x:Va[Ua+4],y:Va[Ua+5],z:Va[Ua+6]}}};Object.defineProperty(Ca,"camera",{get:function(){return p(this["_GetCamera"]())}});Object.defineProperty(Ca,"gis",{get:function(){if(!this._gis){this._gis=r["Gis"]["g_pIns"]}return this._gis}});Object.defineProperty(Ca,"progress",{get:function(){return this["_GetProgress"]()}})};r["Mesh"]=function(Wa){Wa["SetVertices"]=function(Xa,Ya){this["m_aVertex"]=this["m_aVertex"]||[];this["m_aVertex"].push({m_pArray:Ya,m_nSlot:this["_SlotLut"][Xa],m_nItemSize:this["_SizeLut"][Xa]})};Wa["SetIndices"]=function(Za,$a,_a){this["m_aIndex"]=this["m_aIndex"]||[];this["m_aIndex"][Za]={m_pArray:$a,m_nItemSize:_a}};Wa["Apply"]=function(){var ab=this["m_aVertex"];var bb=this["m_aIndex"];if(!ab||!bb){return}var cb=2+2*ab.length+3*bb.length;var db=this._CreateBuffer(cb);var eb=o["WASM"]["HEAP32"](db,cb*4);var fb=0;eb[fb++]=ab.length;eb[fb++]=bb.length;for(var gb=0;gb<ab.length;gb++){eb[fb++]=ab[gb].m_nSlot;eb[fb++]=ab[gb].m_pArray.length/ab[gb].m_nItemSize}for(var gb=0;gb<bb.length;gb++){eb[fb++]=0;eb[fb++]=0;eb[fb++]=bb[gb].m_pArray.length}this._CreateBuffer(0);for(var gb=0;gb<ab.length;gb++){var hb=ab[gb].m_pArray;var ib=this._GetVertexBuffer(gb);var jb=o["WASM"]["HEAPF32"](ib,hb.length*4);jb.set(hb)}for(var gb=0;gb<bb.length;gb++){var hb=bb[gb].m_pArray;var ib=this._GetIndexBuffer(gb);var jb=o["WASM"]["HEAP32"](ib,hb.length*4);jb.set(hb)}this._Apply();this["m_aVertex"]=undefined;this["m_aIndex"]=undefined};Wa["_SlotLut"]={position:0,normal:1,uv:2,color:3,tangent:4,uv2:9,uv3:10,uv4:11,uv5:12,uv6:13,uv7:14,uv8:15};Wa["_SizeLut"]={position:3,normal:3,uv:2,color:4,tangent:4,uv2:2,uv3:2,uv4:2,uv5:2,uv6:2,uv7:2,uv8:2};Object.defineProperty(Wa,"position",{set:function(kb){this.SetVertices("position",kb)}});Object.defineProperty(Wa,"normal",{set:function(lb){this.SetVertices("normal",lb)}});Object.defineProperty(Wa,"uv",{set:function(mb){this.SetVertices("uv",mb)}});Object.defineProperty(Wa,"triangles",{set:function(nb){this.SetIndices(0,nb)}});Object.defineProperty(Wa,"material",{set:function(ob){this.SetMaterial(0,ob)}});o["Mesh"]=function(){return p(Wa._Mesh())}};r["Texture2D"]=function(pb){pb["SetImageData"]=function(qb){var rb=this._CreateBuffer(qb.byteLength);if(rb){o["WASM"]["HEAPU8"](rb,qb.byteLength).set(new Uint8Array(qb));this._Apply()}};pb["Load"]=function(sb){var tb=this;o["Fetch"](sb,function(ub){if(ub){tb.SetImageData(ub)}})};o["Texture2D"]=function(vb){var wb=p(pb._Texture2D());if(vb){if("string"===typeof vb){this.Load(vb)}else{this.SetImageData(vb)}}return wb}};r["Material"]=function(xb){if("Sisyphus"===o["m_pEngine"]){o["ShaderLab"].ExpandMaterial(xb)}xb["GetTexture"]=function(){return p(this["_GetTexture"]())};xb["SetTexture"]=function(yb){this["_SetTexture"](yb.m_nObject)};o["Material"]=function(zb){if(zb===void 0){zb=undefined}var Ab=null;if(zb){var Bb=o["ShaderLab"]["Pipeline"]["InternalShader"];var Cb=Bb[0];Bb[0]=zb;Ab=p(xb._Material());Bb[0]=Cb}else{Ab=p(xb._Material())}return Ab}};r["Tile"]=function(Db){Object.defineProperty(Db,"scenes",{get:function(){var Eb=this;return new s(function(Fb){return Eb._IterWork(Fb)})}})};r["Scene"]=function(Gb){Gb["GetLayer"]=function(Hb){return p(this["_GetLayer"](Hb))};Object.defineProperty(Gb,"id",{get:function(){if(!this._id){var Ib=this._GetID(0);var Jb=this._GetID(1);this._id=o["WASM"].GetString(Jb,Ib)}return this._id}});Object.defineProperty(Gb,"layers",{get:function(){var Kb=this;return new s(function(Lb){return Kb._IterLayer(Lb)})}});Object.defineProperty(Gb,"object3D",{get:function(){if(undefined===this._object3D){var Mb=this._GetObject(this.m_nObject);if(0===Mb){this._object3D=null;return null}this._object3D=p(Mb)}return this._object3D}});Object.defineProperty(Gb,"viewState",{get:function(){return{m_mTarget:{x:0,y:0,z:0},m_nPitch:45,m_nYaw:0,m_nDistance:60,m_mOrthoTarget:{x:0,y:0,z:0},m_nOrthoScaled:0,m_nOrthoRotate:0}}});Object.defineProperty(Gb,"binding",{get:function(){return p(this._GetBinding())}})};r["Layer"]=function(Nb){Object.defineProperty(Nb,"id",{get:function(){if(!this._id){var Ob=this._GetID(0);var Pb=this._GetID(1);this._id=o["WASM"].GetString(Pb,Ob)}return this._id}});Object.defineProperty(Nb,"sites",{get:function(){var Qb=this;return new s(function(Rb){return Qb._IterSite(Rb)})}});Object.defineProperty(Nb,"object3D",{get:function(){if(undefined===this._object3D){var Sb=this._GetObject(this.m_nObject);if(0===Sb){this._object3D=null;return null}this._object3D=p(Sb)}return this._object3D}});Object.defineProperty(Nb,"viewState",{get:function(){var Tb=this["_GetViewState"]();if(0<Tb){var Ub=o["WASM"]["HEAPF32"](Tb,4*11);var Vb=0;return{m_mTarget:{x:Ub[Vb++],y:Ub[Vb++],z:Ub[Vb++]},m_nPitch:Ub[Vb++],m_nYaw:Ub[Vb++],m_nDistance:Ub[Vb++],m_mOrthoTarget:{x:Ub[Vb++],y:Ub[Vb++],z:Ub[Vb++]},m_nOrthoScaled:Ub[Vb++],m_nOrthoRotate:Ub[Vb++]}}return null}})};r["Attachment"]=function(Wb){Object.defineProperty(Wb,"entityType",{get:function(){return this._GetEntityType()}});Object.defineProperty(Wb,"secondType",{get:function(){return this._GetSecondType()}});Object.defineProperty(Wb,"flag",{get:function(){return this._GetFlag()}});Object.defineProperty(Wb,"object3D",{get:function(){return p(this._GetObject())}});Object.defineProperty(Wb,"viewState",{get:function(){var Xb=this["_GetViewState"]();if(0<Xb){var Yb=o["WASM"]["HEAPF32"](Xb,4*11);var Zb=0;var $b={m_mTarget:{x:Yb[Zb++],y:Yb[Zb++],z:Yb[Zb++]},m_nPitch:Yb[Zb++],m_nYaw:Yb[Zb++],m_nDistance:Yb[Zb++],m_mOrthoTarget:{x:Yb[Zb++],y:Yb[Zb++],z:Yb[Zb++]},m_nOrthoScaled:Yb[Zb++],m_nOrthoRotate:Yb[Zb++]};console.log("attachment view:",$b);return $b}else{console.log("attachment view: null")}return null}})};r["Site"]=function(_b){Object.defineProperty(_b,"id",{get:function(){if(!this._id){var ac=this._GetID(0);var bc=this._GetID(1);this._id=o["WASM"].GetString(bc,ac)}return this._id}});Object.defineProperty(_b,"layer",{get:function(){return p(this["_Layer"]())}});Object.defineProperty(_b,"scene",{get:function(){return p(this["_Scene"]())}});Object.defineProperty(_b,"type",{get:function(){return this["_Type"]()}});Object.defineProperty(_b,"number",{get:function(){return this["_Number"]()}});Object.defineProperty(_b,"position",{get:function(){var cc=this["_Position"]()/4;var dc=o["WASM"].HEAPF32();return{x:dc[cc],y:dc[cc+1],z:dc[cc+2]}}})};r["Prefab"]=function(ec){ec["Instantiate"]=function(){return p(this["_Instantiate"]())};o["LoadPrefab"]=function(fc,gc){o["Fetch"](fc,function(hc){var ic=null;if(hc){var jc=ec._Prefab();var kc=p(jc);var lc=kc.CreateBuffer(hc.byteLength);if(lc){o["WASM"]["HEAPU8"](lc,hc.byteLength).set(new Uint8Array(hc));kc.Apply();ic=kc}}gc(ic)})}};r["Gis"]=function(mc){mc["Update"]=function(nc,oc,pc){return this["_Update"](nc,oc,pc)};mc["AddSvetile"]=function(qc){var rc=o["WASM"]["EncodeString"](qc.m_pUrl);var sc=this["_CreateSvetileDesc"](rc.byteLength);var tc=o["WASM"]["HEAPU32"](sc,4*8);tc[0]=qc.m_nID;tc[1]=qc.m_nFlags;o["WASM"]["HEAPU8"](tc[2],rc.byteLength).set(rc,0);tc[3]=0;tc[4]=o["WASM"]["RegisterDelegate"](function(vc,wc){qc.OnActive(p(vc),0<wc)});var uc=o["WASM"]["HEAPF32"](sc+20,16);uc[0]=qc.m_mLngLat.x;uc[1]=qc.m_mLngLat.y;uc[2]=qc.m_mSize.x;uc[3]=qc.m_mSize.y;this["_AddSvetile"](sc)};mc["AddMapbox"]=function(xc){var yc=this["_GetMapboxDesc"]();var zc=o["WASM"]["HEAPF32"](yc,40);zc[0]=xc.m_mOffset.x;zc[1]=xc.m_mOffset.y;zc[2]=xc.m_mOffset.z;zc[3]=xc.m_mScale.x;zc[4]=xc.m_mScale.y;zc[5]=xc.m_mScale.z;zc[6]=xc.m_mLngLat.x;zc[7]=xc.m_mLngLat.y;zc[8]=xc.m_mSize.x;zc[9]=xc.m_mSize.y;this["_AddMapbox"](yc)};mc["AddGameObject"]=function(Ac,Bc,Cc){this["_AddGameObject"](Ac.m_nObject,Bc,Cc)};Object.defineProperty(mc,"imageServer",{set:function(Dc){if(!Dc){Dc="http://t%d.tianditu.gov.cn/DataServer?T=vec_c&tk=fb14b0853d59b619e18c259898bd0d4d&x=%d&y=%d&l=%d"}var Ec=this["_GetServer"](0);o["WASM"].SetString(Ec,Dc)}});Object.defineProperty(mc,"terrainServer",{set:function(Fc){if(!Fc){Fc="https://t%d.tianditu.gov.cn/dem_sjk/DataServer?T=ele_c&tk=fb14b0853d59b619e18c259898bd0d4d&x=%d&y=%d&l=%d"}var Gc=this["_GetServer"](1);o["WASM"].SetString(Gc,Fc)}})};r["Dioramas3MX"]=function(Hc){Hc["_Load3MX"]=function(Ic,Jc,Kc){var Lc=this;var Mc=Lc.m_pFileLut[Ic];var Nc=Mc.m_pPath+Mc.m_aFile[Jc];o["Request"]("GET","arraybuffer",Nc,null,null,function(Oc){if(!Oc){return}var Pc=new Uint32Array(Oc,0,2);if(1113083187===Pc[0]){var Qc=Pc[1]>>8;var Rc=9+Qc;var Sc=Oc.byteLength-Rc;var Tc=new Uint8Array(Oc,9,Qc);var Uc=Lc.m_pTextDecoder.decode(Tc);var Vc=JSON.parse(Uc);var Wc={m_pPath:Nc.substring(0,Nc.lastIndexOf("/")+1),m_aFile:[]};var Xc=[];var Yc=[];var Zc=Vc.resources;var $c=0;for(var _c=0;_c<Zc.length;_c++){Xc.push(_c);if("textureBuffer"===Zc[_c].type){Xc.push(0);Yc.push(_c);if("jpg"===Zc[_c].format){Xc.push(0)}else if("png"===Zc[_c].format){Xc.push(1)}else{Xc.push(1e4)}}else if("geometryBuffer"===Zc[_c].type){Xc.push(1);if("ctm"===Zc[_c].format){Xc.push(0)}else{Xc.push(1e4)}}else{Xc.push(1e4);Xc.push(1e4)}Xc.push(Zc[_c].size);Xc.push($c);$c+=Zc[_c].size;Xc.push(1e4);if(Zc[_c].texture){for(var ad=0;ad<Zc.length;ad++){if(Zc[_c].texture===Zc[ad].id){Xc[Xc.length-1]=ad;break}}}}var bd=[];var cd=Vc.nodes;for(var _c=0;_c<cd.length;_c++){var dd=cd[_c];var ed=dd.bbMax[0]-dd.bbMin[0];var fd=dd.bbMax[1]-dd.bbMin[1];var gd=dd.bbMax[2]-dd.bbMin[2];var hd=Math.sqrt(ed*ed+fd*fd+gd*gd);bd.push(Math.floor(parseInt(dd.bbMin[0]+dd.bbMax[0])*.5*100));bd.push(Math.floor(parseInt(dd.bbMin[1]+dd.bbMax[1])*.5*100));bd.push(Math.floor(parseInt(dd.bbMin[2]+dd.bbMax[2])*.5*100));bd.push(Math.floor(hd*100));bd.push(Math.floor(dd.maxScreenDiameter));var id=dd.children?dd.children.length:0;if(0<id){bd.push(Wc.m_aFile.length);for(var ad=0;ad<id;ad++){Wc.m_aFile.push(dd.children[ad])}bd.push(Wc.m_aFile.length)}else{bd.push(-1);bd.push(-1)}var jd=dd.resources?dd.resources.length:0;if(0<jd){bd.push(Yc.length);for(var ad=0;ad<jd;ad++){for(var kd=0;kd<Zc.length;kd++){if(dd.resources[ad]===Zc[kd].id){Yc.push(kd);break}}}bd.push(Yc.length)}else{bd.push(-1);bd.push(-1)}}var ld=4+9*cd.length+6*Yc.length;var md=4*ld;var nd=md+Sc;var od=Lc["_CreateBuffer"](nd);if(od){var pd=o["WASM"]["HEAP32"](od,md);pd[0]=md;pd[1]=cd.length;pd[2]=Yc.length;pd[3]=Lc.m_pFileLut.length;pd.set(bd,4);var qd=4+bd.length;for(var _c=0;_c<Yc.length;_c++){var rd=6*Yc[_c];for(var ad=0;ad<6;ad++){pd[qd++]=Xc[rd++]}}var sd=o["WASM"]["HEAPU8"](od+md,Sc);sd.set(new Uint8Array(Oc,Rc,Sc));Lc["_Dispose"](Kc)}Lc.m_pFileLut.push(Wc)}})};Hc["Update"]=function(){return this["_Update"]()};Object.defineProperty(Hc,"object3D",{get:function(){return p(this["_GetObject"]())}});o["Dioramas3MX"]=function(td,ud){var vd=p(Hc._Dioramas3MX());vd.m_pFileLut=[];vd.m_pTextDecoder=new TextDecoder("utf-8");if(ud){if(ud.m_pGis){ud.m_pGis.AddGameObject(vd.object3D,ud.m_mLngLat.x,ud.m_mLngLat.y);vd.object3D.transform.Translate(ud.m_mOffset,1);vd.object3D.transform.Rotate({x:0,y:0,z:0},1)}}o["Request"]("GET","json",td,null,null,function(wd){vd["m_pMeta"]=wd;var xd={m_pPath:td.substring(0,td.lastIndexOf("/")+1),m_aFile:[]};var yd=[0];for(var zd=0;zd<wd.layers.length;zd++){if("meshPyramid"===wd.layers[zd].type){yd.push(zd);yd.push(xd.m_aFile.length);xd.m_aFile.push(wd.layers[zd].root)}}yd[0]=xd.m_aFile.length;var Ad=vd["_CreateBuffer"](4*yd.length);var Bd=o["WASM"]["HEAP32"](Ad,4*yd.length);Bd.set(yd);vd["_Initialize"](Ad);vd.m_pFileLut.push(xd)});return vd}};function t(Cd,Dd,Ed){p=Dd;q=Ed;for(var Fd=0,Gd=Cd;Fd<Gd.length;Fd++){var Hd=Gd[Fd];if(Hd){var Id=Hd.prototype;if(r[Id._type_name]){r[Id._type_name](Id)}if("Miaokit"===Id._type_name){o["Miaokit"]=new Hd(0,0)}else if("Gis"===Id._type_name){r["Gis"]["g_pIns"]=new Hd(0,0)}}}}o["WASM"]=o["WASM"]||{};o["WASM"]["LoadClass"]=t;return[]});MiaokitMerge(function(Jd){Jd["m_pLogo"]=null;Jd["m_pEngine"]=Jd["m_pEngine"]||"Unity";Jd["m_pEnginePath"]=Jd["m_pEnginePath"]||"js/Miaokit/MiaokitU3D/Build/MiaokitU3D.json";Jd["m_pModulePath"]=Jd["m_pModulePath"]||"./js/Miaokit/Miaokit.wasm";Jd["m_pServer"]=Jd["m_pServer"]||"http://sve.yongtoc.com/";Jd["m_aTiles"]=[];var Kd=Jd["m_pEngine"];var Ld=Jd["m_pEnginePath"];var Md=Jd["m_pModulePath"];var Nd=Jd["m_pServer"];var Od=Jd["m_aTiles"];var Pd=undefined;var Qd=false;function Rd(){Jd["Track"]("Preload");Jd["Fetch"](Md,function(Wd){if(Pd){Pd(Wd)}else{Pd=Wd}});var Ud=function(Xd){var Yd=Od[Xd];Jd["Fetch"](Yd.m_pPath,function(Zd){Yd["m_pData"]=Zd;Yd["m_pTile"]=null;if(Od["m_pLoader"]){Od["m_pLoader"](Yd)}})};for(var Vd=0;Vd<Od.length;Vd++){Ud(Vd)}}function Sd($d,_d){Jd["Track"]("LoadEngine");Jd["WASM"]["LoadEngine"]({OnEngineLoad:function(ae){Jd["Track"]("LoadEngine End");if(Pd){Jd["Track"]("LoadMiaokit");Jd["WASM"]["LoadMiaokit"](Pd,ae,function(){Td(function(){$d();Qd=true})})}else{Jd["Track"]("LoadMiaokit Delay");Pd=function(be){Jd["Track"]("LoadMiaokit");Jd["WASM"]["LoadMiaokit"](be,ae,function(){Td(function(){$d();Qd=true})})}}},OnRenderingEvent:function(ce){if(Qd){_d(ce)}}})}function Td(de){Jd["Track"]("LoadMiaokit End");var ee=Od.length;if(0==ee){de()}Od["m_pLoader"]=function(he){he["m_pTile"]=Jd["Miaokit"]["LoadTile"](he["m_pData"]);he["m_pData"]=null;if(he["Active"]){he["Active"]()}if(0===--ee){de()}};for(var fe=0;fe<Od.length;fe++){var ge=Od[fe];if(ge["m_pData"]){Od["m_pLoader"](ge)}}}Rd["_name"]="Preload";Sd["_name"]="Load";return[Rd,Sd]});MiaokitMerge(function(ie){var je=function(){function le(){}le.Clamp=function(me,ne,oe){if(me>oe){return oe}if(me<ne){return ne}return me};return le}();var ke=function(){function pe(qe,re,se){this.x=0;this.y=0;this.z=0;this.x=qe;this.y=re;this.z=se}pe.Scale=function(te,ue){return{x:ue.x*te,y:ue.y*te,z:ue.z*te}};return pe}();je["_name"]="Mathf";ke["_name"]="Vector3";return[je,ke]});MiaokitMerge(function(ve){var we=null;var xe=null;var ye=null;var ze=[null];var Ae=[null];var Be=[null];var Ce=1;var De=0;var Ee=[undefined];var Fe=null;function Ge(Re){Re["isnanf"]=isNaN;Re["isinff"]=isFinite;Re["powf"]=Math.pow;Re["sqrtf"]=Math.sqrt;Re["expf"]=Math.exp;Re["logf"]=Math.log;Re["floorf"]=Math.floor;Re["ceilf"]=Math.ceil;Re["sinf"]=Math.sin;Re["cosf"]=Math.cos;Re["tanf"]=Math.tan;Re["asinf"]=Math.asin;Re["acosf"]=Math.acos;Re["atanf"]=Math.atan;Re["atan2f"]=Math.atan2;Re["ldexpf"]=function(Se,Te){return Se*Math.pow(2,Te)}}function He(Ue){var Ve=ve["GL"];var We=Ve.Ctx.getParameter(34047);Ue["glTexImage2DExt"]=function(Xe,Ye){var Ze=Ae[Ye];if(Ze){Ve.Ctx.texParameterf(Xe,34046,We);Ve.Ctx.texImage2D(Xe,0,Ve.Ctx.RGB,Ve.Ctx.RGB,Ve.Ctx.UNSIGNED_BYTE,Ze);Ae[Ye]=null}};Ue["glCreateShader"]=Ve._glCreateShader;Ue["glDeleteShader"]=Ve._glDeleteShader;Ue["glShaderSource"]=Ve._glShaderSource;Ue["glCompileShader"]=Ve._glCompileShader;Ue["glGetShaderiv"]=Ve._glGetShaderiv;Ue["glGetShaderInfoLog"]=Ve._glGetShaderInfoLog;Ue["glCreateProgram"]=Ve._glCreateProgram;Ue["glDeleteProgram"]=Ve._glDeleteProgram;Ue["glAttachShader"]=Ve._glAttachShader;Ue["glLinkProgram"]=Ve._glLinkProgram;Ue["glUseProgram"]=Ve._glUseProgram;Ue["glGetProgramiv"]=Ve._glGetProgramiv;Ue["glGetProgramInfoLog"]=Ve._glGetProgramInfoLog;Ue["glBindAttribLocation"]=Ve._glBindAttribLocation;Ue["glGenVertexArrays"]=Ve._glGenVertexArrays;Ue["glDeleteVertexArrays"]=Ve._glDeleteVertexArrays;Ue["glBindVertexArray"]=Ve._glBindVertexArray;Ue["glVertexAttribPointer"]=Ve._glVertexAttribPointer;Ue["glEnableVertexAttribArray"]=Ve._glEnableVertexAttribArray;Ue["glGetActiveUniform"]=Ve._glGetActiveUniform;Ue["glGetUniformLocation"]=Ve._glGetUniformLocation;Ue["glUniform1i"]=Ve._glUniform1i;Ue["glUniform1fv"]=Ve._glUniform1fv;Ue["glUniform2fv"]=Ve._glUniform2fv;Ue["glUniform3fv"]=Ve._glUniform3fv;Ue["glUniform4fv"]=Ve._glUniform4fv;Ue["glUniform1iv"]=Ve._glUniform1iv;Ue["glUniform2iv"]=Ve._glUniform2iv;Ue["glUniform3iv"]=Ve._glUniform3iv;Ue["glUniform4iv"]=Ve._glUniform4iv;Ue["glUniformMatrix3fv"]=Ve._glUniformMatrix3fv;Ue["glUniformMatrix4fv"]=Ve._glUniformMatrix4fv;Ue["glGenTextures"]=Ve._glGenTextures;Ue["glDeleteTextures"]=Ve._glDeleteTextures;Ue["glActiveTexture"]=Ve._glActiveTexture;Ue["glBindTexture"]=Ve._glBindTexture;Ue["glTexStorage2D"]=Ve._glTexStorage2D;Ue["glTexParameteri"]=Ve._glTexParameteri;Ue["glTexImage2D"]=Ve._glTexImage2D;Ue["glGenerateMipmap"]=Ve._glGenerateMipmap;Ue["glGenBuffers"]=Ve._glGenBuffers;Ue["glDeleteBuffers"]=Ve._glDeleteBuffers;Ue["glBindBuffer"]=Ve._glBindBuffer;Ue["glBufferData"]=Ve._glBufferData;Ue["glMapBufferRange"]=Ve._glMapBufferRange;Ue["glUnmapBuffer"]=Ve._glUnmapBuffer;Ue["glGenFramebuffers"]=Ve._glGenFramebuffers;Ue["glDeleteFramebuffers"]=Ve._glDeleteFramebuffers;Ue["glBindFramebuffer"]=Ve._glBindFramebuffer;Ue["glFramebufferTexture2D"]=Ve._glFramebufferTexture2D;Ue["glCheckFramebufferStatus"]=Ve._glCheckFramebufferStatus;Ue["glClearColor"]=Ve._glClearColor;Ue["glClear"]=Ve._glClear;Ue["glBlendFuncSeparate"]=Ve._glBlendFuncSeparate;Ue["glBlendEquationSeparate"]=Ve._glBlendEquationSeparate;Ue["glEnable"]=Ve._glEnable;Ue["glDisable"]=Ve._glDisable;Ue["glDepthFunc"]=Ve._glDepthFunc;Ue["glDepthMask"]=Ve._glDepthMask;Ue["glClearDepthf"]=Ve._glClearDepthf;Ue["glClearStencil"]=Ve._glClearStencil;Ue["glCullFace"]=Ve._glCullFace;Ue["glPolygonOffset"]=Ve._glPolygonOffset;Ue["glViewport"]=Ve._glViewport;Ue["glDrawArrays"]=Ve._glDrawArrays;Ue["glDrawArraysInstanced"]=Ve._glDrawArraysInstanced;Ue["glDrawElements"]=Ve._glDrawElements;Ue["glDrawElementsInstanced"]=Ve._glDrawElementsInstanced;Ue["glFlush"]=Ve._glFlush;Ue["glFinish"]=Ve._glFinish}function Ie($e){function _e(jf){var kf=ve["WASM"].GetString(jf);if(!kf.startsWith("http")){kf=ve["m_pServer"]+kf}if(kf.endsWith("assetbundle")){kf+=".bin"}return kf}function af(lf,mf,nf,of){var pf=_e(lf);var qf=we.get(nf);var rf=we.get(of);ve["Fetch"](pf,function(sf){if(sf){var tf=qf(mf,sf.byteLength);if(tf){ve["WASM"]["HEAPU8"](tf,sf.byteLength).set(new Uint8Array(sf))}}else{console.error("资源丢失:",pf)}rf(mf)})}function bf(uf,vf,wf){var xf=_e(uf);var yf=we.get(wf);var zf=new Image;zf.crossOrigin="anonymous";zf.src=xf;zf.onload=function(Af){yf(vf,Ae.push(zf)-1)}}function cf(Bf,Cf,Df,Ef){af(Bf,Cf,Df,Ef)}function df(Ff,Gf,Hf,If){Fe["LoadTerrain"](Ff,Gf,Hf,If)}function ef(Jf,Kf,Lf,Mf){var Nf=ve["WASM"]["HEAP32"](Jf,16);Fe["LoadBlockbox"](Kf,Nf[0],Nf[1],Nf[2],Nf[3],Lf,Mf)}function ff(Of,Pf){var Qf=ve["WASM"]["HEAP32"](Of,12);var Rf=Le(Qf[0]);if(Rf){Rf["_Load3MX"](Qf[1],Qf[2],Pf)}}function gf(Sf,Tf,Uf,Vf){af(Sf,Tf,Uf,Vf)}var hf=[undefined,af,bf,cf,df,ef,ff,gf];$e["APP_LOAD"]=function(Wf,Xf,Yf,Zf,$f){hf[Wf](Xf,Yf,Zf,$f)}}function Je(_f){var ag={NaN:NaN,Infinity:Infinity};Ge(_f);He(_f);Ie(_f);_f["APP_DYNAMIC_LINK"]=function(bg,cg){var dg=ve["WASM"]["HEAPU32"](bg,cg);var eg=dg[0];var fg=dg[1];for(var gg=0;gg<eg;gg++){var hg=dg[2+gg]-1;var ig=dg[fg++];var jg=dg[fg++];var kg=ve["WASM"].GetString(ig,jg);var lg=JSON.parse(kg);var mg=function(qg,rg){this["m_nID"]=qg;this["m_nObject"]=rg};var ng=mg.prototype;ng["_type_name"]=lg[0];ng["_type_id"]=gg+1;ng["_ins_count"]=0;Ee[gg+1]=mg;var og=function(sg){var tg=we.get(dg[fg++]);fg++;var ug=function(){var vg=Array.prototype.slice.call(arguments);vg.unshift(this.m_nObject);return tg.apply(this,vg)};if(0===sg){ng["_"+lg[sg]]=ug}else{ng[lg[sg]]=ug}};for(var pg=0;pg<hg;pg++){og(pg)}}ve["WASM"]["LoadClass"](Ee,Le,Oe);ve["Miaokit"]["ResizeCavans"]=function(wg,xg){if(ye.SE_RESIZE){ye.SE_RESIZE(wg,xg)}}};_f["APP_PRINT"]=function(yg,zg,Ag){var Bg=ve["WASM"].GetString(yg,zg);ve["Track"](Bg,Ag)};_f["APP_DO_ACTION"]=function(Cg,Dg,Eg,Fg){ze[Cg](Dg,Eg,Fg)};_f["APP_CREATE_OBJ"]=function(Gg,Hg){if(0<Gg){var Ig=Me();var Jg=new Ee[Gg](Ig,Hg);Be[Ig]=Jg;Ee[Gg].prototype._ins_count++;return Ig}else{if(-21==Gg){var Kg=ve["WASM"]["HEAP32"](Hg,16);var Lg=Kg[0];var Mg=Kg[1];var Ng=Kg[2];var Og=Kg[3];var Pg=ve["WASM"]["HEAP8"](Ng,Mg);var Qg=new Blob([Pg]);var Rg=window.URL.createObjectURL(Qg);var Sg=we.get(Og);var Tg=new Image;Tg.src=Rg;Tg.onload=function(Ug){Sg(Lg,Ae.push(Tg)-1);window.URL.revokeObjectURL(Rg)}}}return 0};_f["APP_FREE_OBJ"]=function(Vg){var Wg=Be[Vg];Ee[Wg._type_id].prototype._ins_count--;Ne(Vg)};_f["APP_DO"]=ve["ShaderLab"].OperateMaterial;xe=_f["memory"];ve["WASM"]["m_pMemory"]=ve["WASM"]["m_pMemory"]||xe;return{env:_f,global:ag}}function Ke(Xg,Yg,Zg){Yg=Je(Yg);WebAssembly.instantiate(Xg,Yg).then(function($g){return $g.instance}).then(function(_g){ye=_g.exports;we=ye.__indirect_function_table;ve["WASM"]["Update"]=_g.exports.SE_UPDATE;ve["WASM"]["Malloc"]=_g.exports.Malloc;ve["WASM"]["Free"]=_g.exports.Free;ve["ShaderLab"]["DrawPass_"]=_g.exports.SE_DRAW_PASS;ve["ShaderLab"]["SetSunlight"]=_g.exports.SE_SUNLIGHT;ve["ShaderLab"]["CreateUniformsDesc"]=_g.exports.SE_CREATE_UNIFORMS_DESC;ve["ShaderLab"]["GetTexture"]=function(ah){return ye.SE_GL_RESOURCE(9,ah)};ve["Track"]("Start thread");ve["WASM"]["Worker"]=Qe(function(){ve["Track"]("Start thread succeed")});ye.Start();Zg()})}function Le(bh){return Be[bh]}function Me(){var ch=Ce;if(Be.length>Ce){Ce=Be[Ce]}else{Ce++}De++;return ch}function Ne(dh){Be[dh]=Ce;Ce=dh;De--}function Oe(eh){var fh="'系统运行':{";fh+="'时间':"+(ve.Time()/1e3).toFixed(0);fh+=", '帧率':"+eh;fh+=", 'WASM内存':"+ve.WASM.m_pMemory.buffer.byteLength/1024/1024;fh+="}";var gh="'JS对象':{";gh+="'工厂':["+Be.length+", "+De+", "+(Be.length-De)+"]";for(var hh=1;hh<Ee.length;hh++){gh+=", '"+Ee[hh].prototype._type_name+"':"+Ee[hh].prototype._ins_count}gh+="}";return[fh,gh]}function Pe(ih){var jh=ze.length;ze.push(ih);return jh}function Qe(kh){var lh=ye.UTIL_WORKER_CODE();var mh=ve["WASM"]["HEAPU32"](lh,16);if(false){Fe=new Worker(window.URL.createObjectURL(new Blob([ve["WASM"]["HEAPU8"](mh[2],mh[3])])));var nh=ve["WASM"]["HEAPU8"]().slice(mh[0],mh[0]+mh[1]);var oh=nh.buffer;Fe.postMessage({m_nID:1,m_aCode:oh},[oh])}else{var ph=ve["m_pModulePath"].replace(".wasm","");Fe=new Worker(ph+"Worker.min.js");fetch(ph+"Worker.wasm").then(function(qh){return qh.arrayBuffer()}).then(function(rh){if(rh){Fe.postMessage({m_nID:1,m_aCode:rh},[rh])}else{console.error("fetch error: ./js/Miaokit/MiaokitWorker.wasm",rh)}}).catch(function(sh){console.error("fetch error: ./js/Miaokit/MiaokitWorker.wasm",sh)})}Fe.onmessage=function(th){var uh=th.data;switch(uh.m_nID){case 1:kh();kh=null;break;case 2:Fe["OnLoadTerrain"](uh);break;case 3:Fe["OnLoadBlockbox"](uh);break;default:console.error("子线程消息异常:",uh);break}};Fe["LoadTerrain"]=function(vh,wh,xh,yh){Fe.postMessage({m_nID:2,m_pPath:ve["WASM"].GetString(vh),m_nRequest:wh,m_nAlloc:xh,m_nCallback:yh})};Fe["OnLoadTerrain"]=function(zh){var Ah=we.get(zh.m_nAlloc);var Bh=we.get(zh.m_nCallback);var Ch=zh.m_pData;if(Ch){var Dh=Ah(zh.m_nRequest,Ch.byteLength);if(Dh){ve["WASM"]["HEAPU8"](Dh,Ch.byteLength).set(new Uint8Array(Ch))}}else{console.warn("Terrain miss:",zh.m_pPath)}Bh(zh.m_nRequest)};Fe["LoadBlockbox"]=function Eh(Fh,Gh,Hh,Ih,Jh,Kh,Lh){Fe.postMessage({m_nID:3,m_nRequest:Fh,m_nCol:Gh,m_nRow:Hh,m_nColOffset:Ih,m_nRowOffset:Jh,m_nAlloc:Kh,m_nCallback:Lh})};Fe["OnLoadBlockbox"]=function(Mh){var Nh=we.get(Mh.m_nAlloc);var Oh=we.get(Mh.m_nCallback);var Ph=Mh.m_pData;var Qh=[0,0,0,0];for(var Rh=0;Rh<4;Rh++){var Sh=Ph[Rh];if(0<Sh.m_nVertexCount&&0<Sh.m_nSubmeshCount){var Th=new ve.Mesh;var Uh=new Int32Array(Sh.m_aIndex);Th.position=new Float32Array(Sh.m_aPosition);Th.normal=new Float32Array(Sh.m_aNormal);Th.uv=new Float32Array(Sh.m_aUV);for(var Vh=0;Vh<Sh.m_nSubmeshCount;Vh++){var Wh=Uh[2*Vh];var Xh=Uh[2*Vh+1];var Yh=[];for(var Zh=Wh;Zh<Xh;Zh++){Yh.push(Zh)}Th.SetIndices(Vh,new Int32Array(Yh),4)}Th.Apply();Qh[Rh]=Th.m_nObject}else{Qh[Rh]=0}}var $h=Nh(Mh.m_nRequest,16);if($h){ve["WASM"]["HEAPU32"]($h,16).set(new Uint32Array(Qh));Oh(Mh.m_nRequest)}};return Fe}ve["WASM"]=ve["WASM"]||{};ve["WASM"]["LoadMiaokit"]=Ke;ve["WASM"]["GetObject"]=Le;ve["WASM"]["RegisterDelegate"]=Pe;return[]});MiaokitMerge(function(_h){var ai=undefined;var bi={};var ci=[];var di={RGBA32_FLOAT:function(){return[ai.RGBA,ai.RGBA,ai.FLOAT]},RGBA16_FLOAT:function(){return[ai.RGBA,ai.RGBA,36193]},RGBA8:function(){return[ai.RGBA,ai.RGBA,ai.UNSIGNED_BYTE]},D16_UNORM:function(){return[ai.DEPTH_COMPONENT,ai.DEPTH_COMPONENT,ai.UNSIGNED_SHORT]},D24_UNORM:function(){return[ai.DEPTH_COMPONENT,ai.DEPTH_COMPONENT,ai.UNSIGNED_INT]},D24S8_UNORM:function(){return[ai.DEPTH_STENCIL,ai.DEPTH_STENCIL,34042]}};var ei={Opaque:1,Transparent:2,Outline:4,CastShadow:8,ReceiveShadow:16};var fi=null;var gi=["u_Object","u_Color","u_EyePos","u_MatW","u_MatVP","u_MatWVP","u_MainTex","u_Sunlight"];var hi=[null];var ii=[null];var ji=[null];var ki=[null];var li=[new Int32Array([0,0,0,0]),new Float32Array([0,0,0,0]),new Float32Array([1,0,0,0,1,0,0,0,1]),new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),new Int32Array([0,0,0,0]),new Int32Array([0,0,0,0])];var mi=[function(Gi,Hi,Ii){ai.uniform4iv(hi[Gi],ki[Hi])},function(Ji,Ki,Li){ai.uniform4fv(hi[Ji],ki[Ki])},function(Mi,Ni,Oi){ai.uniformMatrix3fv(hi[Mi],false,ki[Ni])},function(Pi,Qi,Ri){ai.uniformMatrix4fv(hi[Pi],false,ki[Qi])},function(Si,Ti,Ui){var Vi=ki[Ti];var Wi=Vi[1];if(Vi[0]){Wi=Ei.GetTexture(Wi);if(Wi){Vi[0]=0;Vi[1]=Wi}}ai.uniform1i(hi[Si],Ui);ai.activeTexture(33984+Ui);ai.bindTexture(3553,ci[Wi])},function(Xi,Yi){console.error("Unsupported UniformCubemap!")}];var ni=[null];var oi=[null];var pi=[function(Zi){var $i=_h["ShaderLab"]["Pipeline"]["InternalShader"][Zi];var _i=xi($i);return _i.id},ui,function(aj,bj,cj,dj){mi[aj](bj,cj,dj);return 0},function(ej,fj,gj,hj){var ij=_h["WASM"].GetString(hj);var jj=ki[ej];var kj=ji[jj[19]];var lj=kj[ij];return undefined===lj?0:lj},function(mj,nj){oi[nj][1]();return 0},function(){Ei.Draw()},yi];var qi=1280;var ri=720;var si=0;var ti=null;function ui(oj,pj,qj,rj){var sj=null;switch(pj){case 0:sj=new Int32Array(fi,rj,4);sj.set(li[0]);break;case 1:sj=new Float32Array(fi,rj,4);sj.set(li[1]);break;case 2:sj=new Float32Array(fi,rj,9);sj.set(li[2]);break;case 3:sj=new Float32Array(fi,rj,16);sj.set(li[3]);break;case 4:sj=new Int32Array(fi,rj,4);sj.set(li[4]);break;case 5:sj=new Int32Array(fi,rj,4);sj.set(li[5]);break;case 6:sj=new Int32Array(fi,rj,qj);break;default:console.error("Unsupported uniform type:",pj);break}ki[oj]=sj;return oj}function vi(tj,uj){var vj=ai.createShader(tj);if(!vj){console.error("Could not create shader object!");return null}ai.shaderSource(vj,uj);ai.compileShader(vj);if(!ai.getShaderParameter(vj,ai.COMPILE_STATUS)){var wj=ai.getShaderInfoLog(vj);ai.deleteShader(vj);console.error("Could not compile shader! \n\n"+wj);return null}return vj}function wi(xj){var yj=xj.program;var zj=0;{ai.bindAttribLocation(yj,0,"a_Position");ai.bindAttribLocation(yj,1,"a_Normal");ai.bindAttribLocation(yj,2,"a_UV");ai.bindAttribLocation(yj,3,"a_Color");ai.bindAttribLocation(yj,4,"a_Tangent");ai.bindAttribLocation(yj,5,"a_Binormal");ai.bindAttribLocation(yj,9,"a_UV2");if(7<ai.getProgramParameter(yj,ai.ACTIVE_ATTRIBUTES)){ai.bindAttribLocation(yj,10,"a_UV3");ai.bindAttribLocation(yj,11,"a_UV4");ai.bindAttribLocation(yj,12,"a_UV5");ai.bindAttribLocation(yj,13,"a_UV6");ai.bindAttribLocation(yj,14,"a_UV7");ai.bindAttribLocation(yj,15,"a_UV8")}}{ai.linkProgram(yj);if(!ai.getProgramParameter(yj,ai.LINK_STATUS)){var Aj=ai.getProgramInfoLog(yj);console.error("Could not compile program! \n\n"+Aj);return 0}}{var Bj=ai.getProgramParameter(yj,35718);var Cj=Ei.CreateUniformsDesc(Bj);var Dj=ki[Cj];var Ej={};var Fj=0;Dj[19]=ji.push(Ej)-1;ni[Dj[19]]=xj;for(var Gj=0;Gj<2;Gj++){for(var Hj=0;Hj<Bj;Hj++){var Aj=ai.getActiveUniform(yj,Hj);var Ij=Aj.type;if(35678===Ij||35680===Ij){if(0!==Gj){continue}}else{if(1!==Gj){continue}}var Jj=Aj.name;var Kj=ai.getUniformLocation(yj,Jj);var Lj=hi.push(Kj)-1;for(var Mj=0;Mj<gi.length;Mj++){if(Jj===gi[Mj]){Dj[Mj]=Fj;break}}switch(Ij){case 35669:Ij=0;break;case 35666:Ij=1;break;case 35675:Ij=2;break;case 35676:Ij=3;break;case 35678:Ij=4;break;case 35680:Ij=5;break;default:console.error("Unsupported uniform type:",Aj);break}Dj[20+Fj]=Lj;Dj[20+Bj+Fj]=Ij;Ej[Jj]=Fj;ii[Lj]=Jj;Fj++}}zj=Dj[16]}{var Nj=0;if(xj.mark){for(var Oj=0,Pj=xj.mark;Oj<Pj.length;Oj++){var Qj=Pj[Oj];Nj|=ei[Qj]}}xj.mode=Nj}return zj}function xi(Rj){if(!Rj){return null}var Sj=bi[Rj];if(!Sj){console.error("Could not find shader:",Rj);return null}if(Sj.program){return Sj}Sj.vs=vi(ai.VERTEX_SHADER,bi["Common"]["DeclareVS"]+Sj.vs_src+bi["Common"][Sj.type+"VS"]);if(!Sj.vs){console.error("Could not create vertex shader:",Rj);return null}Sj.fs=vi(ai.FRAGMENT_SHADER,bi["Common"]["DeclareFS"]+Sj.fs_src+bi["Common"][Sj.type+"FS"]);if(!Sj.fs){ai.deleteShader(Sj.vs);Sj.vs=null;console.error("Could not create fragment shader:",Rj);return null}Sj.program=ai.createProgram();if(!Sj.program){ai.deleteShader(Sj.vs);ai.deleteShader(Sj.fs);Sj.vs=null;Sj.fs=null;console.error("Could not create program object!");return null}ai.attachShader(Sj.program,Sj.vs);ai.attachShader(Sj.program,Sj.fs);Sj.id=wi(Sj);if(!Sj.id){ai.deleteProgram(Sj.program);ai.deleteShader(Sj.vs);ai.deleteShader(Sj.fs);Sj.program=null;Sj.vs=null;Sj.fs=null}return Sj}function yi(Tj,Uj){var Vj=undefined;var Wj=undefined;var Xj=undefined;var Yj=undefined;var Zj=0;function $j(){var ik=ki[Tj];var jk=ki[Uj];var kk=ni[ik[19]];var lk=ik[20];var mk=20+ik[17];Vj=kk.program;Wj=ji[ik[19]];Xj=ik;Yj=[];Zj=ik[17];var nk=function(wk){var xk=wk;var yk=ki[jk[xk]];var zk=hi[lk+xk];var Ak=ik[mk+xk];var Bk=[function(){return yk},function(Ck){yk.set(Ck)},undefined];switch(Ak){case 0:Bk[2]=function(){ai.uniform4iv(zk,yk)};break;case 1:Bk[2]=function(){ai.uniform4fv(zk,yk)};break;case 2:Bk[2]=function(){ai.uniformMatrix3fv(zk,false,yk)};break;case 3:Bk[2]=function(){ai.uniformMatrix4fv(zk,false,yk)};break;case 4:Bk[2]=function(){var Dk=yk[1];if(yk[0]){Dk=Ei.GetTexture(Dk);if(Dk){yk[0]=0;yk[1]=Dk}}ai.uniform1i(zk,xk);ai.activeTexture(33984+xk);ai.bindTexture(3553,ci[Dk])};break;default:console.error("Unsupported uniform type!",Ak);break}Yj[xk]=Bk};for(var ok=0;ok<Zj;ok++){nk(ok)}if(kk.uniform_values){for(var pk=0,qk=kk.uniform_values;pk<qk.length;pk++){var rk=qk[pk];var sk=Wj[rk[0]];if(undefined!==sk){var tk=ik[mk+sk];if(4===tk||5===tk){var uk=Ei.Pipeline["Resource"][rk[1]];var vk=[0,uk.Handle,0,0];Yj[sk][1](vk)}}}}return kk.mode}function _j(){if(ti){ti(oi[Uj],ai)}ai.useProgram(Vj);si=Tj;for(var Ek=0,Fk=Yj;Ek<Fk.length;Ek++){var Gk=Fk[Ek];Gk[2]()}}function ak(Hk){return Wj[Hk]}function bk(Ik){return Yj[Ik][0]()}function ck(Jk){Jk=Xj[Jk];if(-1<Jk){return Yj[Jk][0]()}return null}function dk(Kk){var Lk=Wj[Kk];if(undefined!==Lk){return Yj[Lk][0]()}return null}function ek(Mk,Nk){Yj[Mk][1](Nk);if(si===Tj){Yj[Mk][2]()}}function fk(Ok,Pk){Ok=Xj[Ok];if(-1<Ok){Yj[Ok][1](Pk);if(si===Tj){Yj[Ok][2]()}}}function gk(Qk,Rk){var Sk=Wj[Qk];if(undefined!==Sk){Yj[Sk][1](Rk);if(si===Tj){Yj[Sk][2]()}}}function hk(Tk){Yj[Tk][2]()}oi[Uj]=[$j,_j,ak,bk,ck,dk,ek,fk,gk,hk];return $j()}function zi(Uk){{Object.defineProperty(Uk,"Attr",{get:function(){if(!this.Attr_){this.Attr_=oi[this._VarList()]}return this.Attr_}})}{var Vk=function(Xk){var Yk=Xk;Object.defineProperty(Uk,gi[Xk],{get:function(){return this.Attr[4](Yk)},set:function(Zk){if(Zk){this.Attr[7](Yk,Zk)}}})};for(var Wk=0;Wk<gi.length;Wk++){Vk(Wk)}}{}}function Ai($k,_k,al,bl,cl){return pi[$k](_k,al,bl,cl)}function Bi(dl){var el=ai.createTexture();if(!el){console.error("Could not create texture object!");return null}ai.bindTexture(ai.TEXTURE_2D,el);ai.texParameteri(ai.TEXTURE_2D,ai.TEXTURE_MIN_FILTER,ai.LINEAR);ai.texParameteri(ai.TEXTURE_2D,ai.TEXTURE_MAG_FILTER,ai.LINEAR);ai.texParameteri(ai.TEXTURE_2D,ai.TEXTURE_WRAP_S,ai.CLAMP_TO_EDGE);ai.texParameteri(ai.TEXTURE_2D,ai.TEXTURE_WRAP_T,ai.CLAMP_TO_EDGE);var fl=new Image;fl.crossOrigin="anonymous";fl.src=dl.URL;fl.onload=function(gl){ai.bindTexture(ai.TEXTURE_2D,el);ai.texImage2D(ai.TEXTURE_2D,0,ai.RGB,ai.RGB,ai.UNSIGNED_BYTE,fl);ai.bindTexture(ai.TEXTURE_2D,null)};ai.bindTexture(ai.TEXTURE_2D,null);return el}function Ci(hl,il,jl,kl){if(kl===void 0){kl=null}var ll=ai.createTexture();if(!ll){console.error("Could not create texture object!");return null}ai.bindTexture(ai.TEXTURE_2D,ll);ai.texParameteri(ai.TEXTURE_2D,ai.TEXTURE_MIN_FILTER,ai.NEAREST);ai.texParameteri(ai.TEXTURE_2D,ai.TEXTURE_MAG_FILTER,ai.NEAREST);ai.texParameteri(ai.TEXTURE_2D,ai.TEXTURE_WRAP_S,ai.CLAMP_TO_EDGE);ai.texParameteri(ai.TEXTURE_2D,ai.TEXTURE_WRAP_T,ai.CLAMP_TO_EDGE);var ml=di[hl]();ai.texImage2D(ai.TEXTURE_2D,0,ml[0],il,jl,0,ml[1],ml[2],kl);ai.bindTexture(ai.TEXTURE_2D,null);ll["_Format"]=ml;return ll}function Di(nl,ol){var pl=ai.createFramebuffer();if(!pl){console.error("Could not create framebuffer object!");return null}ai.bindFramebuffer(ai.FRAMEBUFFER,pl);ai.framebufferTexture2D(ai.FRAMEBUFFER,ai.COLOR_ATTACHMENT0,ai.TEXTURE_2D,nl,0);if(ol&&ol["_Format"][0]===ai.DEPTH_STENCIL){ai.framebufferTexture2D(ai.FRAMEBUFFER,ai.DEPTH_STENCIL_ATTACHMENT,ai.TEXTURE_2D,ol,0)}else{ai.framebufferTexture2D(ai.FRAMEBUFFER,ai.DEPTH_ATTACHMENT,ai.TEXTURE_2D,ol,0)}if(ai.FRAMEBUFFER_COMPLETE!=ai.checkFramebufferStatus(ai.FRAMEBUFFER)){ai.deleteFramebuffer(pl);console.error("Framebuffer check failed!");return null}return pl}var Ei={_name:"ShaderLab",Shader:bi,Pipeline:{},Init:function(ql){ai=_h["GL"]["Ctx"];ci=_h["GL"]["_textures"];qi=ai.canvas.width;ri=ai.canvas.height;for(var rl=0,sl=this.Pipeline.RenderTarget;rl<sl.length;rl++){var tl=sl[rl];if(tl){var ul=tl.Width||qi;var vl=tl.Height||ri;tl.Texture=Ci(tl.Format,ul,vl);tl.Handle=_h["GL"]["RegisterTexture"](tl.Texture);tl.Size=[1/ul,1/vl,ul,vl]}}for(var wl=0,xl=this.Pipeline.Resource;wl<xl.length;wl++){var yl=xl[wl];if(yl){if("2D"===yl.TYPE){yl.Texture=Bi(yl);yl.Handle=_h["GL"]["RegisterTexture"](yl.Texture)}}}function zl(Jl){var Kl=Jl.RenderTarget;if(Kl){var Ll=Ei.Pipeline["RenderTarget"][Kl[0]];var Ml=Ei.Pipeline["RenderTarget"][Kl[1]];Jl.Framebuffer=Di(Ll.Texture,Ml?Ml.Texture:null);Jl.Framebuffer.width=Ll.Size[2];Jl.Framebuffer.height=Ll.Size[3]}else{Jl.Framebuffer=null}}for(var Al=0,Bl=this.Pipeline.Pass;Al<Bl.length;Al++){var Cl=Bl[Al];if(Cl){if("Clear"===Cl.Type){Cl._Type=2}else{Cl._Type="Render"===Cl.Type?0:1}Cl._Mask=0;for(var Dl=0,El=Cl.Mask;Dl<El.length;Dl++){var Fl=El[Dl];Cl._Mask+=ei[Fl]}zl(Cl);if(Cl.Pingpong){for(var Gl=0,Hl=Cl.Pingpong;Gl<Hl.length;Gl++){var Il=Hl[Gl];zl(Il)}}}}},Draw:function(){var Nl=0;for(var Ol=0,Pl=this.Pipeline.Pass;Ol<Pl.length;Ol++){var Ql=Pl[Ol];Fi.BeginDrawPass();if(Ql.Pingpong){for(var Rl=0;Rl<Ql.PingpongCount;Rl++){for(var Sl=0;Sl<Ql.Pingpong.length;Sl++){Ql.Framebuffer=Ql.Pingpong[Sl].Framebuffer;Ql.SetUniforms=Ql.Pingpong[Sl].SetUniforms;this.DrawPass(Ql,Ei.DrawPass_)}}}else{this.DrawPass(Ql,Ei.DrawPass_)}Fi.EndDrawPass(Nl++)}},DrawPass:function(Tl,Ul){ai.bindFramebuffer(ai.FRAMEBUFFER,Tl.Framebuffer);if(Tl.Framebuffer){ai.viewport(0,0,Tl.Framebuffer.width,Tl.Framebuffer.height)}else{ai.viewport(0,0,qi,ri)}var Vl=Tl.Depth;if(Vl){ai.enable(ai.DEPTH_TEST);ai.depthMask(Vl.Write);ai.depthFunc(ai[Vl.Func])}else{ai.disable(ai.DEPTH_TEST)}var Wl=Tl.Blend;if(Wl){ai.enable(ai.BLEND);ai.blendEquationSeparate(ai[Wl.ColorFunc],ai[Wl.AlphaFunc]);ai.blendFuncSeparate(ai[Wl.ColorSrc],ai[Wl.ColorDest],ai[Wl.AlphaSrc],ai[Wl.AlphaDest])}else{ai.disable(ai.BLEND)}var Xl=Tl.Stencil;if(Xl){ai.enable(ai.STENCIL_TEST);ai.stencilFunc(ai[Xl.Func],Xl.Value,Xl.Mask);ai.stencilOp(ai[Xl.Faild],ai[Xl.ZFaild],ai[Xl.Pass])}else{ai.disable(ai.STENCIL_TEST)}var Yl=Tl.ClearTarget;if(Yl){var Zl=0;if(Yl.Color){ai.clearColor(Yl.Color.r,Yl.Color.g,Yl.Color.b,Yl.Color.a);Zl+=ai.COLOR_BUFFER_BIT}if(undefined!==Yl.Depth){ai.clearDepth(Yl.Depth);Zl+=ai.DEPTH_BUFFER_BIT}if(undefined!==Yl.Stencil){ai.clearStencil(Yl.Stencil);Zl+=ai.STENCIL_BUFFER_BIT}ai.clear(Zl)}ti=Tl.SetUniforms;if(Tl.Shader){if(!Tl._Material){Tl._Material=new _h["Material"](Tl.Shader)}Tl._Material._Bind()}Ul(Tl._Type,Tl._Mask)},PreflushBuffer:function(){var $l=ki.length;var _l=new Array($l);for(var am=0;am<$l;am++){var bm=ki[am];if(bm){if("Float32Array"===bm.constructor.name){_l[am]=bm.length}else{_l[am]=-bm.length}ki[am]=bm.byteOffset}}return _l},FlushBuffer:function(cm,dm){fi=cm;var em=ki.length;for(var fm=0;fm<em;fm++){var gm=ki[fm];if(gm){var hm=dm[fm];if(0<hm){ki[fm]=new Float32Array(fi,gm,hm)}else{ki[fm]=new Int32Array(fi,gm,-hm)}}}for(var fm=0;fm<em;fm++){var im=oi[fm];if(im){im[0]()}}_h["GL"]["FlushHeap"]()},ResizeCanvas:function(jm,km){},ExpandMaterial:zi,OperateMaterial:Ai,CreateUniformsDesc:undefined,GetTexture:undefined,DrawPass_:undefined,SetSunlight:undefined};var Fi={_name:"Profiler",m_pMsg:"",m_nCycleStart:0,m_nCycleTick:0,m_nBeginCycle:0,m_nTotalCycle:0,m_nBeginScript:0,m_nTotalScript:0,m_nBeginUpdate:0,m_nTotalUpdate:0,m_nBeginDraw:0,m_nTotalDraw:0,m_nBeginMaterial:0,m_nTotalMaterial:0,m_nBeginDrawPass:0,m_nTotalDrawPass:[],BeginCycle:function(){if(0===Fi.m_nCycleTick){Fi.m_nCycleStart=_h["Time"]();Fi.m_nCycleTick=0;Fi.m_nBeginCycle=0;Fi.m_nTotalCycle=0;Fi.m_nBeginScript=0;Fi.m_nTotalScript=0;Fi.m_nBeginUpdate=0;Fi.m_nTotalUpdate=0;Fi.m_nBeginDraw=0;Fi.m_nTotalDraw=0;Fi.m_nBeginMaterial=0;Fi.m_nTotalMaterial=0;Fi.m_nBeginDrawPass=0;Fi.m_nTotalDrawPass=[]}Fi.m_nBeginCycle=_h["Time"]()},EndCycle:function(){Fi.m_nTotalCycle+=_h["Time"]()-Fi.m_nBeginCycle;if(60===++Fi.m_nCycleTick){var lm={"总耗时":_h["Time"]()-Fi.m_nCycleStart,"应用循环":Fi.m_nTotalCycle,"脚本逻辑":Fi.m_nTotalScript,"场景更新":Fi.m_nTotalUpdate,"场景绘制":Fi.m_nTotalDraw,"通道绘制":Fi.m_nTotalDrawPass};Fi.m_pMsg="'开销统计':"+JSON.stringify(lm);Fi.m_nCycleTick=0}},BeginScript:function(){Fi.m_nBeginScript=_h["Time"]()},EndScript:function(){Fi.m_nTotalScript+=_h["Time"]()-Fi.m_nBeginScript},BeginUpdate:function(){Fi.m_nBeginUpdate=_h["Time"]()},EndUpdate:function(){Fi.m_nTotalUpdate+=_h["Time"]()-Fi.m_nBeginUpdate},BeginDraw:function(){Fi.m_nBeginDraw=_h["Time"]()},EndDraw:function(){Fi.m_nTotalDraw+=_h["Time"]()-Fi.m_nBeginDraw},BeginMaterial:function(){Fi.m_nBeginMaterial=_h["Time"]()},EndMaterial:function(){Fi.m_nTotalMaterial+=_h["Time"]()-Fi.m_nBeginMaterial},BeginDrawPass:function(){Fi.m_nBeginDrawPass=_h["Time"]()},EndDrawPass:function(mm){Fi.m_nTotalDrawPass[mm]=(Fi.m_nTotalDrawPass[mm]?Fi.m_nTotalDrawPass[mm]:0)+_h["Time"]()-Fi.m_nBeginDrawPass}};Ei.Shader["Common"]={DeclareVS:"\nprecision highp float;\n\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute vec2 a_UV;\nattribute vec4 a_Color;\nattribute vec4 a_Tangent;\nattribute vec4 a_Binormal;\nattribute vec2 a_UV2;\n\n/// ID、透明标记\nuniform vec4 u_Object;\nuniform vec4 u_EyePos;\nuniform vec4 u_Sunlight;\n\nuniform mat4 u_MatW;\nuniform mat4 u_MatVP;\nuniform mat4 u_MatWVP;\n\nvarying vec3 v_Position;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec2 v_UV;\nvarying vec4 v_Color;\n\n/// 对象空间坐标转世界空间坐标\nvec3 ObjectToWorldPos(vec3 i_Position)\n{\n    return (u_MatW * vec4(i_Position, 1.0)).xyz;\n}\n\n/// 对象空间坐标转裁剪空间坐标\nvec4 ObjectToClipPos(vec3 i_Position)\n{\n    return u_MatWVP * vec4(i_Position, 1.0);\n}\n\n/// 对象空间法线转世界空间法线\nvec3 ObjectToWorldNormal(vec3 i_Normal)\n{\n    return normalize((u_MatW * vec4(i_Normal, 0.0)).xyz);\n}\n       ",DeclareFS:"\nprecision highp float;\n\n/// ID、透明标记\nuniform vec4 u_Object;\nuniform vec4 u_EyePos;\nuniform vec4 u_Sunlight;\n\nuniform mat4 u_MatW;\nuniform mat4 u_MatVP;\nuniform mat4 u_MatWVP;\nuniform sampler2D u_MainTex;\nuniform sampler2D u_DepthTex;\n\nvarying vec3 v_Position;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec2 v_UV;\nvarying vec4 v_Color;\n\n/// 对象空间坐标转世界空间坐标\nvec3 ObjectToWorldPos(vec3 i_Position)\n{\n    return (u_MatW * vec4(i_Position, 1.0)).xyz;\n}\n\n/// 对象空间坐标转裁剪空间坐标\nvec4 ObjectToClipPos(vec3 i_Position)\n{\n    return u_MatWVP * vec4(i_Position, 1.0);\n}\n\n/// 采样2D纹理\nvec4 Tex2D(sampler2D i_Tex, vec2 i_UV)\n{\n    i_UV.x = fract(i_UV.x);\n    i_UV.y = fract(1.0 - i_UV.y);\n\n    return texture2D(i_Tex, i_UV);\n}\n\n/// 默认光照函数\nfloat DefaultLight(vec3 v_Normal)\n{\n    vec3 _Normal = normalize(v_Normal);\n    vec3 _Light = normalize(vec3(2.0, 3.0, 1.0));\n\n    return clamp(dot(_Normal, _Light), 0.0, 1.0) + 0.2;\n}\n        ",ClearVS:"\nvoid main()\n{\n    gl_Position = vs();\n}\n        ",ClearFS:"\nvoid main()\n{\n    gl_FragColor = fs();\n}\n        ",RenderVS:"\nvoid main()\n{\n    gl_Position = vs();\n}\n        ",RenderFS:"\nvoid main()\n{\n    gl_FragColor = fs();\n    \n    /// 轮廓显示区域标记\n    {\n        gl_FragColor.a = 0.99;\n    }\n}\n        ",PostprocessVS:"\nvoid main()\n{\n    gl_Position = vs();\n}\n        ",PostprocessFS:"\nvoid main()\n{\n    gl_FragColor = fs();\n}\n        ",BRDF:'\nconst float PI = 3.14159265358979323846;\n\nconst vec3 baseColor = vec3(0.5, 0.5, 0.5);\nconst float metallic = 0.0;\nconst float subsurface = 0.5; // 0.0\nconst float specular = 0.2;\nconst float roughness = 0.7;//0.5;\nconst float specularTint = 0.0;\nconst float anisotropic = 0.0;\nconst float sheen = 0.0;\nconst float sheenTint = 0.5;\nconst float clearcoat = 0.0;\nconst float clearcoatGloss = 1.0;\n\nfloat sqr(float x) { return x * x; }\n\nfloat SchlickFresnel(float u)\n{\n\tfloat m = clamp(1.0 - u, 0.0, 1.0);\n\tfloat m2 = m * m;\n\treturn m2 * m2 * m; // pow(m,5)\n}\n\nfloat GTR1(float NdotH, float a)\n{\n\tif (a >= 1.0) return 1.0 / PI;\n\tfloat a2 = a * a;\n\tfloat t = 1.0 + (a2 - 1.0) * NdotH * NdotH;\n\treturn (a2 - 1.0) / (PI * log(a2) * t);\n}\n\nfloat GTR2(float NdotH, float a)\n{\n\tfloat a2 = a * a;\n\tfloat t = 1.0 + (a2 - 1.0) * NdotH * NdotH;\n\treturn a2 / (PI * t * t);\n}\n\nfloat GTR2_aniso(float NdotH, float HdotX, float HdotY, float ax, float ay)\n{\n\treturn 1.0 / (PI * ax * ay * sqr(sqr(HdotX / ax) + sqr(HdotY / ay) + NdotH * NdotH));\n}\n\nfloat smithG_GGX(float NdotV, float alphaG)\n{\n\tfloat a = alphaG * alphaG;\n\tfloat b = NdotV * NdotV;\n\treturn 1.0 / (NdotV + sqrt(a + b - a * b));\n}\n\nfloat smithG_GGX_aniso(float NdotV, float VdotX, float VdotY, float ax, float ay)\n{\n\treturn 1.0 / (NdotV + sqrt(sqr(VdotX * ax) + sqr(VdotY * ay) + sqr(NdotV)));\n}\n\nvec3 mon2lin(vec3 x)\n{\n\treturn vec3(pow(x[0], 2.2), pow(x[1], 2.2), pow(x[2], 2.2));\n}\n\nvec3 BRDF(vec3 L, vec3 V, vec3 N, vec3 X, vec3 Y)\n{\n    //x和y方向分别表示了表面的切向量和副法线向量方向\n    //https://www.cnblogs.com/starfallen/p/3572352.html\n\n\tfloat NdotL = dot(N, L);\n\tfloat NdotV = dot(N, V);\n\tif (NdotL < 0.0 || NdotV < 0.0) return vec3(0.0);\n\n\tvec3 H = normalize(L + V);\n\tfloat NdotH = dot(N, H);\n\tfloat LdotH = dot(L, H);\n\n\tvec3 Cdlin = mon2lin(baseColor);\n\tfloat Cdlum = 0.3 * Cdlin[0] + 0.6 * Cdlin[1] + 0.1 * Cdlin[2]; // luminance approx.\n\n\tvec3 Ctint = Cdlum > 0.0 ? Cdlin / Cdlum : vec3(1.0); // normalize lum. to isolate hue+sat\n\tvec3 Cspec0 = mix(specular * 0.08 * mix(vec3(1.0), Ctint, specularTint), Cdlin, metallic);\n\tvec3 Csheen = mix(vec3(1.0), Ctint, sheenTint);\n\n\t// Diffuse fresnel - go from 1 at normal incidence to .5 at grazing\n\t// and mix in diffuse retro-reflection based on roughness\n\tfloat FL = SchlickFresnel(NdotL), FV = SchlickFresnel(NdotV);\n\tfloat Fd90 = 0.5 + 2.0 * LdotH * LdotH * roughness;\n\tfloat Fd = mix(1.0, Fd90, FL) * mix(1.0, Fd90, FV);\n\n\t// Based on Hanrahan-Krueger brdf approximation of isotropic bssrdf\n\t// 1.25 scale is used to (roughly) preserve albedo\n\t// Fss90 used to "flatten" retroreflection based on roughness\n\tfloat Fss90 = LdotH * LdotH * roughness;\n\tfloat Fss = mix(1.0, Fss90, FL) * mix(1.0, Fss90, FV);\n\tfloat ss = 1.25 * (Fss * (1.0 / (NdotL + NdotV) - 0.5) + 0.5);\n\n\t// specular\n\tfloat aspect = sqrt(1.0 - anisotropic * 0.9);\n\tfloat ax = max(0.001, sqr(roughness) / aspect);\n\tfloat ay = max(0.001, sqr(roughness) * aspect);\n\tfloat Ds = GTR2_aniso(NdotH, dot(H, X), dot(H, Y), ax, ay);\n\tfloat FH = SchlickFresnel(LdotH);\n\tvec3 Fs = mix(Cspec0, vec3(1.0), FH);\n\tfloat Gs;\n\tGs = smithG_GGX_aniso(NdotL, dot(L, X), dot(L, Y), ax, ay);\n\tGs *= smithG_GGX_aniso(NdotV, dot(V, X), dot(V, Y), ax, ay);\n\n\t// sheen\n\tvec3 Fsheen = FH * sheen * Csheen;\n\n\t// clearcoat (ior = 1.5 -> F0 = 0.04)\n\tfloat Dr = GTR1(NdotH, mix(0.1, 0.001, clearcoatGloss));\n\tfloat Fr = mix(0.04, 1.0, FH);\n\tfloat Gr = smithG_GGX(NdotL, 0.25) * smithG_GGX(NdotV, 0.25);\n\n\treturn ((1.0 / PI) * mix(Fd, ss, subsurface) * Cdlin + Fsheen) * (1.0 - metallic) + Gs * Fs * Ds + 0.25 * clearcoat * Gr * Fr * Dr;\n}\n        ',AtmosphereVS:"\nvarying vec3 v_ViewDir;\nvarying vec3 v_Scattering;\nvarying vec3 v_Attenuate;\nvarying vec3 v_AttenuateGround;\n\n//P and ray define the line; O is the sphere's center point\nvec3 CalculateIntersection(vec3 P, vec3 ray, vec3 O, float r)\n{\n\tvec3 PO = O - P;\n\tfloat lPO = length(PO);\n\tfloat B = 2.0 * dot(PO, ray);\n\n\tfloat C = B * B - 4.0 * (lPO * lPO - r * r);\n\tfloat det = sqrt(max(0.0, C));\n\n\tfloat d = 0.5*(B-det);\n\tvec3 intersect = P + d * ray;\n\n\treturn intersect;\n}\n\nvoid Atmosphere(vec3 mLightDir, vec3 mWorldPos)\n{\n    // 大气散射，天空应分两层，摄像机应该在内层之外，大气层厚度为外层半径减内层半径，外层半径应远大于内层半径\n    //650 nm for red; 570 nm for green; 475 nm for blue\n    vec3 _Wave = vec3(5.602046, 9.473285, 20.49314);\n    vec3 _ESun = vec3(20.0, 20.0, 20.0);\n    vec3 _PlanetPos = vec3(0.0, -6378137.0, 0.0);\n    float _Sealevel = 6378137.0;\n    float _OuterRadius = 6478137.0;\n    float _SampleNum = 5.0;\n    //Rayleigh scattering constant\n    float _Kr = 0.0025;\n    //Mie scattering constant\n    float _Km = 0.001;\n    //the altitude at which the atmosphere's average density is found\n    float _H0 = 0.25;\n\n    vec3 mRay = mWorldPos - u_EyePos.xyz;\n    float nDepth = length(mRay); mRay = mRay / nDepth;\n\n    float nSampleLength = nDepth / _SampleNum;\n    vec3 mSampleRay = mRay * nSampleLength;\n    vec3 mSamplePoint = u_EyePos.xyz + mSampleRay * 0.5;\n    vec3 mInScattering = vec3(0.0, 0.0, 0.0);\n    vec3 mOutScatteringAB = vec3(0.0, 0.0, 0.0);\n    vec3 mOutGroundScatteringAB = vec3(0.0, 0.0, 0.0);\n    float nInvOuterH = 1.0 / (_OuterRadius-_Sealevel);\n\n    for(int i=0; i</*_SampleNum*/5; i++)\n    {\n\t    vec3 mCrossPoint = CalculateIntersection(mSamplePoint, -mLightDir, _PlanetPos, _OuterRadius);\n\t    //AP out scattering\n\t    vec3 mAPRay = (mSamplePoint - u_EyePos.xyz) / _SampleNum;\n\t    float nAPRayLength = length(mAPRay);\n\t    vec3 mSampleAP = u_EyePos.xyz + mAPRay * 0.5;\n\t    vec3 mOutScatteringAP = vec3(0.0, 0.0, 0.0);\n\n\t    for(int m=0; m</*_SampleNum*/5; m++)\n\t    {\n\t\t    mOutScatteringAP += exp(-(length(mSampleAP - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nAPRayLength * nInvOuterH;\n\t\t    mSampleAP += mAPRay;\n\t    }\n\t    mOutScatteringAP = 4.0 * 3.14 * (_Km + _Kr * _Wave) * mOutScatteringAP;\n\n\t    //PC out scattering\n\t    vec3 mPCRay = (mCrossPoint - mSamplePoint) / _SampleNum;\n\t    float nPCRayLength = length(mPCRay);\n\t    vec3 mSamplePC = mSamplePoint + mPCRay*0.5;\n\t    vec3 mOutScatteringPC = vec3(0.0, 0.0, 0.0);\n\n\t    for(int n=0; n</*_SampleNum*/5; n++)\n\t    {\n\t\t    mOutScatteringPC += exp(-(length(mSamplePC - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nPCRayLength * nInvOuterH;\n\t\t    mSamplePC += mPCRay;\n\t    }\n\t    mOutScatteringPC = 4.0 * 3.14 * (_Km + _Kr * _Wave) * mOutScatteringPC;\n\n\t    mInScattering += exp(-(length(mSamplePoint - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nSampleLength * nInvOuterH * exp(-mOutScatteringAP - mOutScatteringPC);\n\t    mSamplePoint+=mSampleRay;\n\t    mOutScatteringAB = mCrossPoint;\n        mOutGroundScatteringAB = mOutScatteringAP + mOutScatteringPC;\n    }\n\n    v_ViewDir = u_EyePos.xyz - mWorldPos;\t\n    v_Scattering = mInScattering * _ESun * _Kr * _Wave;\n    v_Attenuate = mInScattering * _ESun * _Km;\n    v_AttenuateGround = exp(-mOutGroundScatteringAB);\n    \n    // Ground : v_ScatteringR = v_Scattering; v_ScatteringM = v_Attenuate; v_Attenuate = v_AttenuateGround;\n    //v_ViewDir = u_EyePos.xyz - mWorldPos;\n    //v_ScatteringR = mInScattering * _ESun * _Kr * _Wave;\n    //v_ScatteringM = mInScattering * _ESun * _Km;\n    //v_Attenuate = exp(-mOutGroundScatteringAB);\n}\n        ",AtmosphereFS:"\nvarying vec3 v_ViewDir;\nvarying vec3 v_Scattering;\nvarying vec3 v_Attenuate;\nvarying vec3 v_AttenuateGround;\n\nfloat PhaseRayleigh(float nCostheta)\n{\n\treturn 0.75 * (1.0 + nCostheta * nCostheta);\n}\n\nfloat PhaseMie(float nCostheta, float g, float g2)\n{\n\treturn 1.5 * ((1.0 - g2) / (2.0 + g2)) * (1.0 + nCostheta * nCostheta) / pow(1.0 + g2 - 2.0 * g * nCostheta, 1.5);\n}\n\nvec4 AtmosphereColor(vec3 mLightDir)\n{\n    vec4 mColor = vec4(1.0, 0.7, 0.7, 1.0);\n    \n    float _G = -0.990;\n    float _G2 = _G * _G;\n    \n    float nCostheta = dot(normalize(v_ViewDir), mLightDir);\n    float nPhaseMie = PhaseMie(nCostheta, _G, _G2);\n    float nPhaseRayleigh = PhaseRayleigh(nCostheta);\n\t\t\t\t\n    mColor.rgb = v_Scattering * nPhaseRayleigh + v_Attenuate * nPhaseMie;\n    mColor.a = mColor.b + 0.2;\n    mColor = clamp(mColor, 0.0, 0.9);\n\n    return mColor;\n}\n\nvec4 AtmosphereLight(vec4 mColor, vec3 mLightDir)\n{\n    // Ground : v_ScatteringR = v_Scattering; v_ScatteringM = v_Attenuate; v_Attenuate = v_AttenuateGround;\n    \n    float _G = -0.980;\n    float _G2 = _G * _G;\n    \n    float nCostheta = dot(normalize(v_ViewDir), mLightDir);\n    float nPhaseMie = PhaseMie(nCostheta, _G, _G2);\n    float nPhaseRayleigh = PhaseRayleigh(nCostheta);\n    \n    mColor.rgb = v_Scattering * nPhaseRayleigh + v_Attenuate * nPhaseMie + mColor.rgb * v_AttenuateGround;\n    \n    return mColor;\n}\n        "};return[Ei,Fi]});MiaokitMerge(function(nm){if("Sisyphus"!==nm["m_pEngine"]){return[]}var om=undefined;var pm=true;function qm(vm){rm();om=vm.OnRenderingEvent;sm();var wm={memory:new WebAssembly.Memory({initial:64*16,maximum:32768}),APP_PLUGIN_TYPE:function(){return 2},APP_MEM_TYPE:function(){return 2},APP_MEM_RESERVE:function(){return 1024},APP_MEM_MALLOC:function(xm){alert("SISYPHUS��չ��֧��ʹ�÷������ڴ�!");return 0},APP_MEM_FREE:function(ym){alert("SISYPHUS��չ��֧��ʹ�÷������ڴ�!")},APP_MEM_BASE:function(){return 64*1024*1024},APP_MEM_GROW:function(zm){if(nm["ShaderLab"]){var Am=nm["ShaderLab"]["PreflushBuffer"]();wm["memory"].grow(zm/64/1024);var Bm=wm["memory"].buffer;nm["ShaderLab"]["FlushBuffer"](Bm,Am)}else{wm["memory"].grow(zm/64/1024)}},APP_MEM_RECYCLE:function(Cm){alert("WAMSģ�鲻֧�ֻ����ڴ�!")},UNITY_CREATE_OBJ:function(){alert("δװ��UNITY��չ!");return 0},UNITY_FREE_OBJ:function(){alert("δװ��UNITY��չ!");return 0},UNITY_GET:function(){alert("δװ��UNITY��չ!");return 0},UNITY_DO:function(){alert("δװ��UNITY��չ!");return 0}};vm.OnEngineLoad(wm)}function rm(){var Dm=document.getElementById("unityContainer");var Em=document.createElement("canvas");Em.id="3d";Em.width=Dm.offsetWidth;Em.height=Dm.offsetHeight;Em.style.width="100%";Em.style.height="100%";Em.style.top="0rem";Em.style.bottom="0rem";Em.style.left="0rem";Em.style.right="0rem";Em.style.position="absolute";Em.style.zIndex="1";Dm.appendChild(Em);nm["GL"]["CreateContext"](Em);nm["ShaderLab"]["Init"](nm["GL"])}function sm(){if(pm){pm=false;um()}}function tm(){pm=true}function um(){if(pm){return}nm.Profiler.BeginCycle();nm.Profiler.BeginScript();om(0);nm.Profiler.EndScript();if(nm["WASM"]["Update"]){nm.Profiler.BeginUpdate();nm["WASM"]["Update"](0);nm.Profiler.EndUpdate();nm.Profiler.BeginDraw();nm["WASM"]["Update"](1);nm.Profiler.EndDraw()}nm.Profiler.EndCycle();requestAnimationFrame(um)}nm["WASM"]=nm["WASM"]||{};nm["WASM"]["LoadEngine"]=qm;return[]});MiaokitMerge(function(Fm){var Gm=Date.now();function Hm(){return Date.now()-Gm}function Im(Lm,Mm){if(Mm===void 0){Mm=0}if(2===Mm){console.warn("Track:",Hm(),Lm)}else if(2<Mm){console.error("Track:",Hm(),Lm)}else{console.info("Track:",Hm(),Lm)}}function Jm(Nm,Om,Pm){if(Pm===void 0){Pm=undefined}var Qm=new XMLHttpRequest;Qm.open("GET",Nm,true);Qm.responseType="arraybuffer";Qm.onprogress=function(Rm){if(0<Rm.total&&Pm){Pm(Rm.loaded/Rm.total)}};Qm.onload=function(Sm){if(Qm.status==200){Om(Qm.response)}else{Om(null)}};Qm.onerror=function(Tm){Im(Tm,2);Om(null)};Qm.send(null)}function Km(Um,Vm,Wm,Xm,Ym,Zm){var $m=new XMLHttpRequest;$m.onprogress=function(_m){if(0<_m.total&&Ym){Ym(_m.loaded/_m.total)}};$m.onload=function(an){if($m.status==200){Zm($m.response)}else{Zm(null)}$m=null};$m.onerror=function(bn){Im(bn,2);Zm(null)};$m.responseType=Vm;$m.open(Um,Wm,true);$m.send(Xm)}Hm["_name"]="Time";Im["_name"]="Track";Jm["_name"]="Fetch";Km["_name"]="Request";return[Hm,Im,Jm,Km]});MiaokitMerge(function(cn){if("Unity"!==cn["m_pEngine"]){return[]}if(!UnityLoader){return[]}var dn=cn["m_pLogo"]||"data:image/png;base64,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";UnityLoader.Progress.Styles.Dark.progressLogoUrl=dn;UnityLoader.Progress.Styles.Light.progressLogoUrl=dn;if(UnityLoader.SystemInfo.mobile){UnityLoader.SystemInfo.mobile=false;UnityLoader.downloadJob=function(mn,nn){var on=new XMLHttpRequest;on.open("GET",nn.parameters.url);on.responseType="arraybuffer";on.onload=function(){UnityLoader.Compression.decompress(new Uint8Array(on.response),function(pn){nn.complete(pn)})};if(nn.parameters.onprogress)on.addEventListener("progress",nn.parameters.onprogress);if(nn.parameters.onload)on.addEventListener("load",nn.parameters.onload);on.send()}}UnityLoader.processWasmFrameworkJob=function(qn,rn){var sn=UnityLoader.Job.result(qn,"downloadWasmFramework");UnityLoader.loadCode(qn,sn,function(tn,un){qn["mainScriptUrlOrBlob"]=un;if(qn.isModularized){UnityLoader[tn]=UnityModule}qn["instantiateWasm"]=function(vn,wn){hn(qn,vn["env"]);if(qn["wasmBinary"]){WebAssembly.instantiate(qn["wasmBinary"],vn).then(function(xn){wn(xn.instance,xn.module)})}else{console.info("MiaokitLoader.InitUnity.instantiateWasm error!")}return{}};UnityLoader[tn](qn);rn.complete()},{Module:qn,url:qn["wasmFrameworkUrl"],isModularized:qn.isModularized})};var en=null;var fn=null;var gn={};function hn(yn,zn){Object["assign"](zn,{_Init:function(An,Bn){cn["WASM"]["m_pMemory"]=cn["WASM"]["m_pMemory"]||fn.Module.wasmMemory;jn(yn,gn,An,Bn);kn(fn,gn);en.OnEngineLoad(gn)},_RenderingEvent:function(Cn){en.OnRenderingEvent(Cn)}});cn["GL"]=zn}function jn(Dn,En,Fn,Gn){var Hn=cn.WASM.GetString(Fn,Gn);var In=JSON.parse(Hn);var Jn=function(Nn){var On=function(){var Pn=Array.prototype.slice.call(arguments);Pn.unshift(On["m_nAddr"]);return On["m_pFunc"].apply(this,Pn)};On["m_pFunc"]=Dn[Nn.Call];On["m_nAddr"]=Nn.Addr;En[Nn.Name]=On};for(var Kn=0,Ln=In.List;Kn<Ln.length;Kn++){var Mn=Ln[Kn];Jn(Mn)}}function kn(Qn,Rn){Rn["APP_PLUGIN_TYPE"]=function(){return 1};Rn["APP_MEM_TYPE"]=function(){return 1};Rn["memory"]=function(Sn){var Tn=32*1024*1024;var Un=Sn._memalign(16,Tn);var Vn=Tn-Un;Sn._free(Un);var Wn=Sn._memalign(16,Vn+Tn);if(Wn!==Un){console.error("miaokit.prememory: addr error",Un,Wn);return}if(Wn+Vn+Tn!==67108864){console.error("miaokit.prememory: addr end error",Wn+Vn+Tn);return}Rn["APP_MEM_RESERVE"]=function(){return Wn};return Sn.wasmMemory}(fn.Module);Rn["APP_MEM_MALLOC"]=function(Xn){return fn.Module._memalign(16,Xn)};Rn["APP_MEM_FREE"]=function(Yn){fn.Module._free(Yn)};Rn["APP_MEM_BASE"]=function(){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0};Rn["APP_MEM_GROW"]=function(Zn){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0};Rn["APP_MEM_RECYCLE"]=function($n){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0}}function ln(_n){en=_n;fn=UnityLoader.instantiate("unityContainer",cn["m_pEnginePath"])}cn["WASM"]=cn["WASM"]||{};cn["WASM"]["LoadEngine"]=ln;return[]});MiaokitMerge(function(ao){var bo=undefined;var co=new TextDecoder("utf-8");var eo=new TextEncoder;function fo(go){if(!bo||ao["WASM"].m_pMemory.buffer.byteLength!==bo[0].byteLength){if(!bo){bo=[]}bo[0]=new Int8Array(ao["WASM"].m_pMemory.buffer);bo[1]=new Uint8Array(ao["WASM"].m_pMemory.buffer);bo[2]=new Int16Array(ao["WASM"].m_pMemory.buffer);bo[3]=new Uint16Array(ao["WASM"].m_pMemory.buffer);bo[4]=new Int32Array(ao["WASM"].m_pMemory.buffer);bo[5]=new Uint32Array(ao["WASM"].m_pMemory.buffer);bo[6]=new Float32Array(ao["WASM"].m_pMemory.buffer);bo[7]=new Float64Array(ao["WASM"].m_pMemory.buffer)}return bo[go]}ao["WASM"]=ao["WASM"]||{};ao["WASM"]["HEAP8"]=function(ho,io){if(ho===void 0){ho=0}if(io===void 0){io=0}var jo=fo(0);if(ho&&io){return jo.subarray(ho,ho+io)}else{return jo}};ao["WASM"]["HEAPU8"]=function(ko,lo){if(ko===void 0){ko=0}if(lo===void 0){lo=0}var mo=fo(1);if(ko&&lo){return mo.subarray(ko,ko+lo)}else{return mo}};ao["WASM"]["HEAP16"]=function(no,oo){if(no===void 0){no=0}if(oo===void 0){oo=0}var po=fo(2);if(no&&oo){return po.subarray(no/2,(no+oo)/2)}else{return po}};ao["WASM"]["HEAPU16"]=function(qo,ro){if(qo===void 0){qo=0}if(ro===void 0){ro=0}var so=fo(3);if(qo&&ro){return so.subarray(qo/2,(qo+ro)/2)}else{return so}};ao["WASM"]["HEAP32"]=function(to,uo,vo){if(to===void 0){to=0}if(uo===void 0){uo=0}var wo=fo(4);if(to&&uo){if(vo){return wo.slice(to/4,(to+uo)/4)}else{return wo.subarray(to/4,(to+uo)/4)}}else{return wo}};ao["WASM"]["HEAPU32"]=function(xo,yo){if(xo===void 0){xo=0}if(yo===void 0){yo=0}var zo=fo(5);if(xo&&yo){return zo.subarray(xo/4,(xo+yo)/4)}else{return zo}};ao["WASM"]["HEAPF32"]=function(Ao,Bo,Co){if(Ao===void 0){Ao=0}if(Bo===void 0){Bo=0}var Do=fo(6);if(Ao&&Bo){if(Co){return Do.slice(Ao/4,(Ao+Bo)/4)}else{return Do.subarray(Ao/4,(Ao+Bo)/4)}}else{return Do}};ao["WASM"]["HEAPF64"]=function(Eo,Fo){if(Eo===void 0){Eo=0}if(Fo===void 0){Fo=0}var Go=fo(7);if(Eo&&Fo){return Go.subarray(Eo/8,(Eo+Fo)/8)}else{return Go}};ao["WASM"]["GetString"]=function(Ho,Io){if(!Io){var Jo=ao["WASM"].HEAPU8();var Ko=Ho;while(0!==Jo[Ko++]);Io=Ko-Ho-1}var Lo=ao["WASM"].HEAPU8(Ho,Io);var Mo=co.decode(Lo);return Mo};ao["WASM"]["SetString"]=function(No,Oo){var Po=eo.encode(Oo);var Qo=ao["WASM"].HEAPU8(No,Po.byteLength);Qo.set(Po)};ao["WASM"]["EncodeString"]=function(Ro){return eo.encode(Ro)};ao["WASM"]["m_pMemory"]=null;return[]});MiaokitMerge(function(So){if("Sisyphus"!==So["m_pEngine"]){return[]}var To={instance:undefined,counter:1,lastError:0,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],currentContext:null,currArrayBuffer:0,currElementArrayBuffer:0,offscreenCanvases:{},timerQueriesEXT:[],queries:[],samplers:[],transformFeedbacks:[],syncs:[],byteSizeByTypeRoot:5120,byteSizeByType:[1,1,2,2,4,4,4,2,3,4,8],programInfos:{},stringCache:{},stringiCache:{},tempFixedLengthArray:[],packAlignment:4,unpackAlignment:4,init:function(){To.miniTempBuffer=new Float32Array(To.MINI_TEMP_BUFFER_SIZE);for(var rp=0;rp<To.MINI_TEMP_BUFFER_SIZE;rp++){To.miniTempBufferViews[rp]=To.miniTempBuffer.subarray(0,rp+1)}for(var rp=0;rp<32;rp++){To.tempFixedLengthArray.push(new Array(rp))}},recordError:function sp(tp){if(!To.lastError){To.lastError=tp}},getNewId:function(up){var vp=To.counter++;for(var wp=up.length;wp<vp;wp++){up[wp]=null}return vp},MINI_TEMP_BUFFER_SIZE:256,miniTempBuffer:null,miniTempBufferViews:[0],getSource:function(xp,yp,zp,Ap){var Bp="";for(var Cp=0;Cp<yp;++Cp){var Dp;if(Ap){var Ep=ap[Ap+Cp*4>>2];if(Ep<0){Dp=Wo(ap[zp+Cp*4>>2])}else{Dp=Wo(ap[zp+Cp*4>>2],Ep)}}else{Dp=Wo(ap[zp+Cp*4>>2])}Bp+=Dp}return Bp},createContext:function(Fp,Gp){if(typeof Gp["majorVersion"]==="undefined"&&typeof Gp["minorVersion"]==="undefined"){if(typeof WebGL2RenderingContext!=="undefined")Gp["majorVersion"]=2;else Gp["majorVersion"]=1;Gp["minorVersion"]=0}var Hp;var Ip="?";function Jp(Lp){Ip=Lp.statusMessage||Ip}try{Fp.addEventListener("webglcontextcreationerror",Jp,false);try{if(Gp["majorVersion"]==1&&Gp["minorVersion"]==0){Hp=Fp.getContext("webgl",Gp)||Fp.getContext("experimental-webgl",Gp)}else if(Gp["majorVersion"]==2&&Gp["minorVersion"]==0){Hp=Fp.getContext("webgl2",Gp)}else{throw"Unsupported WebGL context version "+Gp["majorVersion"]+"."+Gp["minorVersion"]+"!"}}finally{Fp.removeEventListener("webglcontextcreationerror",Jp,false)}if(!Hp)throw":("}catch(Mp){Vo("Could not create canvas: "+[Ip,Mp,JSON.stringify(Gp)]);return 0}if(!Hp)return 0;var Kp=To.registerContext(Hp,Gp);return Kp},registerContext:function(Np,Op){var Pp=1;var Qp={handle:Pp,attributes:Op,version:Op["majorVersion"],GLctx:Np};function Rp(){var Sp=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return Sp?parseInt(Sp[2],10):false}Qp["supportsWebGL2EntryPoints"]=Qp.version>=2&&(Rp()===false||Rp()>=58);if(Np.canvas)Np.canvas.GLctxObject=Qp;To.contexts[Pp]=Qp;if(typeof Op["enableExtensionsByDefault"]==="undefined"||Op["enableExtensionsByDefault"]){To.initExtensions(Qp)}if(Op["renderViaOffscreenBackBuffer"]){return 0}return Pp},makeContextCurrent:function(Tp){if(!Tp){Uo=To.currentContext=null;return true}var Up=To.contexts[Tp];if(!Up){return false}Uo=Up.GLctx;To.currentContext=Up;return true},getContext:function(Vp){return To.contexts[Vp]},deleteContext:function(Wp){if(!Wp)return;if(To.currentContext===To.contexts[Wp])To.currentContext=null;if(typeof JSEvents==="object")JSEvents.removeAllHandlersOnTarget(To.contexts[Wp].GLctx.canvas);if(To.contexts[Wp]&&To.contexts[Wp].GLctx.canvas)To.contexts[Wp].GLctx.canvas.GLctxObject=undefined;ep(To.contexts[Wp]);To.contexts[Wp]=null},initExtensions:function(Xp){if(!Xp)Xp=To.currentContext;if(Xp.initExtensionsDone)return;Xp.initExtensionsDone=true;Uo=Xp.GLctx;Xp.maxVertexAttribs=Uo.getParameter(Uo.MAX_VERTEX_ATTRIBS);if(Xp.version<2){var Yp=Uo.getExtension("ANGLE_instanced_arrays");if(Yp){Uo["vertexAttribDivisor"]=function(bq,cq){Yp["vertexAttribDivisorANGLE"](bq,cq)};Uo["drawArraysInstanced"]=function(dq,eq,fq,gq){Yp["drawArraysInstancedANGLE"](dq,eq,fq,gq)};Uo["drawElementsInstanced"]=function(hq,iq,jq,kq,lq){Yp["drawElementsInstancedANGLE"](hq,iq,jq,kq,lq)}}var Zp=Uo.getExtension("OES_vertex_array_object");if(Zp){Uo["createVertexArray"]=function(){return Zp["createVertexArrayOES"]()};Uo["deleteVertexArray"]=function(mq){Zp["deleteVertexArrayOES"](mq)};Uo["bindVertexArray"]=function(nq){Zp["bindVertexArrayOES"](nq)};Uo["isVertexArray"]=function(oq){return Zp["isVertexArrayOES"](oq)}}var $p=Uo.getExtension("WEBGL_draw_buffers");if($p){Uo["drawBuffers"]=function(pq,qq){$p["drawBuffersWEBGL"](pq,qq)}}}Uo.disjointTimerQueryExt=Uo.getExtension("EXT_disjoint_timer_query");var _p=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2"];var aq=Uo.getSupportedExtensions();if(aq&&aq.length>0){Uo.getSupportedExtensions().forEach(function(rq){if(_p.indexOf(rq)!=-1){Uo.getExtension(rq)}})}},populateUniformTable:function(sq){var tq=To.programs[sq];To.programInfos[sq]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1};var uq=To.programInfos[sq];var vq=uq.uniforms;var wq=Uo.getProgramParameter(tq,Uo.ACTIVE_UNIFORMS);for(var xq=0;xq<wq;++xq){var yq=Uo.getActiveUniform(tq,xq);var zq=yq.name;uq.maxUniformLength=Math.max(uq.maxUniformLength,zq.length+1);if(zq.indexOf("]",zq.length-1)!==-1){var Aq=zq.lastIndexOf("[");zq=zq.slice(0,Aq)}var Bq=Uo.getUniformLocation(tq,zq);if(Bq!=null){var Cq=To.getNewId(To.uniforms);vq[zq]=[yq.size,Cq];To.uniforms[Cq]=Bq;for(var Dq=1;Dq<yq.size;++Dq){var Eq=zq+"["+Dq+"]";Bq=Uo.getUniformLocation(tq,Eq);Cq=To.getNewId(To.uniforms);To.uniforms[Cq]=Bq}}}}};var Uo=undefined;var Vo=console.error;var Wo=So["WASM"]["GetString"];var Xo=function(Fq,Gq,Hq){So["WASM"]["SetString"](Gq,Fq)};var Yo=undefined;var Zo=undefined;var $o=undefined;var _o=undefined;var ap=undefined;var bp=undefined;var cp=undefined;function dp(Iq){return So["WASM"]["Malloc"](Iq)}function ep(Jq){So["WASM"]["Free"](Jq)}function fp(Kq,Lq,Mq){return Mq?+(Kq>>>0)+ +(Lq>>>0)*4294967296:+(Kq>>>0)+ +(Lq|0)*4294967296}function gp(Nq){switch(Nq){case 34962:Nq=34964;break;case 34963:Nq=34965;break;case 35051:Nq=35053;break;case 35052:Nq=35055;break;case 35982:Nq=35983;break;case 36662:Nq=36662;break;case 36663:Nq=36663;break;case 35345:Nq=35368;break}var Oq=Uo.getParameter(Nq);if(Oq)return Oq.name|0;else return 0}function hp(Pq){switch(Pq){case 34962:case 34963:case 36662:case 36663:case 35051:case 35052:case 35882:case 35982:case 35345:return true;default:return false}}function ip(Qq,Rq,Sq,Tq){if(!Sq){To.recordError(1281);return}var Uq=Uo["getIndexedParameter"](Qq,Rq);var Vq;switch(typeof Uq){case"boolean":Vq=Uq?1:0;break;case"number":Vq=Uq;break;case"object":if(Uq===null){switch(Qq){case 35983:case 35368:Vq=0;break;default:{To.recordError(1280);return}}}else if(Uq instanceof WebGLBuffer){Vq=Uq["name"]|0}else{To.recordError(1280);return}break;default:To.recordError(1280);return}switch(Tq){case"Integer64":var Wq=0;var Xq=[Vq>>>0,(Wq=Vq,+Math.abs(Wq)>=1?Wq>0?(Math.min(+Math.floor(Wq/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Wq-+(~~Wq>>>0))/4294967296)>>>0:0)];ap[Sq>>2]=Xq[0];ap[Sq+4>>2]=Xq[1];break;case"Integer":ap[Sq>>2]=Vq;break;case"Float":cp[Sq>>2]=Vq;break;case"Boolean":Yo[Sq>>0]=Vq?1:0;break;default:throw"internal emscriptenWebGLGetIndexed() error, bad type: "+Tq}}function jp(Yq,Zq,$q){if(!Zq){To.recordError(1281);return}var _q=undefined;switch(Yq){case 36346:_q=1;break;case 36344:if($q!=="Integer"&&$q!=="Integer64"){To.recordError(1280)}return;case 34814:case 36345:_q=0;break;case 34466:var ar=Uo.getParameter(34467);_q=ar.length;break;case 33309:if(Uo.canvas.GLctxObject.version<2){To.recordError(1282);return}var br=Uo.getSupportedExtensions();_q=2*br.length;break;case 33307:case 33308:if(Uo.canvas.GLctxObject.version<2){To.recordError(1280);return}_q=Yq==33307?3:0;break}if(_q===undefined){var cr=Uo.getParameter(Yq);switch(typeof cr){case"number":_q=cr;break;case"boolean":_q=cr?1:0;break;case"string":To.recordError(1280);return;case"object":if(cr===null){switch(Yq){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 35097:case 36389:case 34068:{_q=0;break};default:{To.recordError(1280);return}}}else if(cr instanceof Float32Array||cr instanceof Uint32Array||cr instanceof Int32Array||cr instanceof Array){for(var dr=0;dr<cr.length;++dr){switch($q){case"Integer":ap[Zq+dr*4>>2]=cr[dr];break;case"Float":cp[Zq+dr*4>>2]=cr[dr];break;case"Boolean":Yo[Zq+dr>>0]=cr[dr]?1:0;break;default:throw"internal glGet error, bad type: "+$q}}return}else if(cr instanceof WebGLBuffer||cr instanceof WebGLProgram||cr instanceof WebGLFramebuffer||cr instanceof WebGLRenderbuffer||cr instanceof WebGLQuery||cr instanceof WebGLSampler||cr instanceof WebGLSync||cr instanceof WebGLTransformFeedback||cr instanceof WebGLVertexArrayObject||cr instanceof WebGLTexture){_q=cr["name"]|0}else{To.recordError(1280);return}break;default:To.recordError(1280);return}}switch($q){case"Integer64":var er=0;var fr=[_q>>>0,(er=_q,+Math.abs(er)>=1?er>0?(Math.min(+Math.floor(er/4294967296),4294967295)|0)>>>0:~~+Math.ceil((er-+(~~er>>>0))/4294967296)>>>0:0)];ap[Zq>>2]=fr[0];ap[Zq+4>>2]=fr[1];break;case"Integer":ap[Zq>>2]=_q;break;case"Float":cp[Zq>>2]=_q;break;case"Boolean":Yo[Zq>>0]=_q?1:0;break;default:throw"internal glGet error, bad type: "+$q}}function kp(gr,hr,ir,jr){if(!ir){To.recordError(1281);return}var kr=Uo.getUniform(To.programs[gr],To.uniforms[hr]);if(typeof kr=="number"||typeof kr=="boolean"){switch(jr){case"Integer":ap[ir>>2]=kr;break;case"Float":cp[ir>>2]=kr;break;default:throw"internal emscriptenWebGLGetUniform() error, bad type: "+jr}}else{for(var lr=0;lr<kr.length;lr++){switch(jr){case"Integer":ap[ir+lr*4>>2]=kr[lr];break;case"Float":cp[ir+lr*4>>2]=kr[lr];break;default:throw"internal emscriptenWebGLGetUniform() error, bad type: "+jr}}}}function lp(mr,nr,or,pr){if(!or){To.recordError(1281);return}var qr=Uo.getVertexAttrib(mr,nr);if(nr==34975){ap[or>>2]=qr["name"]}else if(typeof qr=="number"||typeof qr=="boolean"){switch(pr){case"Integer":ap[or>>2]=qr;break;case"Float":cp[or>>2]=qr;break;case"FloatToInteger":ap[or>>2]=Math["fround"](qr);break;default:throw"internal emscriptenWebGLGetVertexAttrib() error, bad type: "+pr}}else{for(var rr=0;rr<qr.length;rr++){switch(pr){case"Integer":ap[or+rr*4>>2]=qr[rr];break;case"Float":cp[or+rr*4>>2]=qr[rr];break;case"FloatToInteger":ap[or+rr*4>>2]=Math["fround"](qr[rr]);break;default:throw"internal emscriptenWebGLGetVertexAttrib() error, bad type: "+pr}}}}function mp(sr,tr,ur,vr){function wr(zr,Ar){return Math.floor((zr+Ar-1)/Ar)*Ar}var xr=sr*ur;var yr=wr(xr,vr);return tr<=0?0:(tr-1)*yr+xr}function np(Br,Cr,Dr,Er,Fr,Gr){var Hr;var Ir;switch(Cr){case 6406:case 6409:case 6402:case 6403:case 36244:Ir=1;break;case 6410:case 33319:case 33320:Ir=2;break;case 6407:case 35904:case 36248:Ir=3;break;case 6408:case 35906:case 36249:Ir=4;break;default:To.recordError(1280);return null}switch(Br){case 5121:case 5120:Hr=Ir*1;break;case 5123:case 36193:case 5131:case 5122:Hr=Ir*2;break;case 5125:case 5126:case 5124:Hr=Ir*4;break;case 34042:case 35902:case 33640:case 35899:case 34042:Hr=4;break;case 33635:case 32819:case 32820:Hr=2;break;default:To.recordError(1280);return null}var Jr=mp(Dr,Er,Hr,To.unpackAlignment);switch(Br){case 5120:return Yo.subarray(Fr,Fr+Jr);case 5121:return Zo.subarray(Fr,Fr+Jr);case 5122:return $o.subarray(Fr>>1,Fr+Jr>>1);case 5124:return ap.subarray(Fr>>2,Fr+Jr>>2);case 5126:return cp.subarray(Fr>>2,Fr+Jr>>2);case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return bp.subarray(Fr>>2,Fr+Jr>>2);case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return _o.subarray(Fr>>1,Fr+Jr>>1);default:To.recordError(1280);return null}}function op(Kr){switch(Kr){case 5120:return Yo;case 5121:return Zo;case 5122:return $o;case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return _o;case 5124:return ap;case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return bp;case 5126:return cp;default:return null}}function pp(Lr){switch(Lr){case 5120:case 5121:return 0;case 5122:case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return 1;case 5124:case 5126:case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return 2;default:return 0}}var qp=function(){function Mr(){this.Ctx=undefined}Mr.prototype.FlushHeap=function(){Yo=So["WASM"]["HEAP8"]();Zo=So["WASM"]["HEAPU8"]();$o=So["WASM"]["HEAP16"]();_o=So["WASM"]["HEAPU16"]();ap=So["WASM"]["HEAP32"]();bp=So["WASM"]["HEAPU32"]();cp=So["WASM"]["HEAPF32"]()};Mr.prototype.CreateContext=function(Nr,Or){Or=Or||{majorVersion:1,minorVersion:0,alpha:0,depth:1,stencil:0,antialias:1,premultipliedAlpha:0,preserveDrawingBuffer:0,preferLowPowerToHighPerformance:0,failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:0,proxyContextToMainThread:0,renderViaOffscreenBackBuffer:0};if(Or["explicitSwapControl"]){return 0}To.init();var Pr=To.createContext(Nr,Or);var Qr=To.makeContextCurrent(Pr);this.Ctx=Uo;return Qr?0:-5};Mr.prototype.DestroyContext=function(){To.deleteContext(To.currentContext?To.currentContext.handle:0)};Mr.prototype.GetTextureByHandle=function(Rr){return Rr?To.textures[Rr]:null};Mr.prototype.RegisterTexture=function(Sr){var Tr=To.getNewId(To.textures);Sr.name=Tr;To.textures[Tr]=Sr;return Tr};Mr.prototype._glActiveTexture=function(Ur){Uo["activeTexture"](Ur)};Mr.prototype._glAttachShader=function(Vr,Wr){Uo.attachShader(To.programs[Vr],To.shaders[Wr])};Mr.prototype._glBeginQuery=function(Xr,Yr){Uo["beginQuery"](Xr,Yr?To.queries[Yr]:null)};Mr.prototype._glBeginTransformFeedback=function(Zr){Uo["beginTransformFeedback"](Zr)};Mr.prototype._glBindAttribLocation=function($r,_r,as){as=Wo(as);Uo.bindAttribLocation(To.programs[$r],_r,as)};Mr.prototype._glBindBuffer=function(bs,cs){var ds=cs?To.buffers[cs]:null;if(bs==35051){Uo.currentPixelPackBufferBinding=cs}else if(bs==35052){Uo.currentPixelUnpackBufferBinding=cs}Uo.bindBuffer(bs,ds)};Mr.prototype._glBindBufferBase=function(es,fs,gs){var hs=gs?To.buffers[gs]:null;Uo["bindBufferBase"](es,fs,hs)};Mr.prototype._glBindBufferRange=function(is,js,ks,ls,ms){var ns=ks?To.buffers[ks]:null;Uo["bindBufferRange"](is,js,ns,ls,ms)};Mr.prototype._glBindFramebuffer=function(os,ps){Uo.bindFramebuffer(os,ps?To.framebuffers[ps]:null)};Mr.prototype._glBindRenderbuffer=function(qs,rs){Uo.bindRenderbuffer(qs,rs?To.renderbuffers[rs]:null)};Mr.prototype._glBindSampler=function(ss,ts){Uo["bindSampler"](ss,ts?To.samplers[ts]:null)};Mr.prototype._glBindTexture=function(us,vs){Uo.bindTexture(us,vs?To.textures[vs]:null)};Mr.prototype._glBindTransformFeedback=function(ws,xs){var ys=xs?To.transformFeedbacks[xs]:null;if(xs&&!ys){To.recordError(1282);return}Uo["bindTransformFeedback"](ws,ys)};Mr.prototype._glBindVertexArray=function(zs){Uo["bindVertexArray"](To.vaos[zs])};Mr.prototype._glBlendEquation=function(As){Uo["blendEquation"](As)};Mr.prototype._glBlendEquationSeparate=function(Bs,Cs){Uo["blendEquationSeparate"](Bs,Cs)};Mr.prototype._glBlendFuncSeparate=function(Ds,Es,Fs,Gs){Uo["blendFuncSeparate"](Ds,Es,Fs,Gs)};Mr.prototype._glBlitFramebuffer=function(Hs,Is,Js,Ks,Ls,Ms,Ns,Os,Ps,Qs){Uo["blitFramebuffer"](Hs,Is,Js,Ks,Ls,Ms,Ns,Os,Ps,Qs)};Mr.prototype._glBufferData=function(Rs,Ss,Ts,Us){if(!Ts){Uo.bufferData(Rs,Ss,Us)}else{if(To.currentContext.supportsWebGL2EntryPoints){Uo.bufferData(Rs,Zo,Us,Ts,Ss);return}Uo.bufferData(Rs,Zo.subarray(Ts,Ts+Ss),Us)}};Mr.prototype._glBufferSubData=function(Vs,Ws,Xs,Ys){if(To.currentContext.supportsWebGL2EntryPoints){Uo.bufferSubData(Vs,Ws,Zo,Ys,Xs);return}Uo.bufferSubData(Vs,Ws,Zo.subarray(Ys,Ys+Xs))};Mr.prototype._glCheckFramebufferStatus=function(Zs){return Uo["checkFramebufferStatus"](Zs)};Mr.prototype._glClear=function($s){Uo["clear"]($s)};Mr.prototype._glClearColor=function(_s,at,bt,ct){Uo["clearColor"](_s,at,bt,ct)};Mr.prototype._glClearDepthf=function(dt){Uo["clearDepth"](dt)};Mr.prototype._glClearStencil=function(et){Uo["clearStencil"](et)};Mr.prototype._glClientWaitSync=function(ft,gt,ht,it){ht=ht>>>0;it=it>>>0;var jt=ht==4294967295&&it==4294967295?-1:fp(ht,it,true);return Uo.clientWaitSync(To.syncs[ft],gt,jt)};Mr.prototype._glColorMask=function(kt,lt,mt,nt){Uo.colorMask(!!kt,!!lt,!!mt,!!nt)};Mr.prototype._glCompileShader=function(ot){Uo.compileShader(To.shaders[ot])};Mr.prototype._glCompressedTexImage2D=function(pt,qt,rt,st,tt,ut,vt,wt){if(To.currentContext.supportsWebGL2EntryPoints){Uo["compressedTexImage2D"](pt,qt,rt,st,tt,ut,Zo,wt,vt);return}Uo["compressedTexImage2D"](pt,qt,rt,st,tt,ut,wt?Zo.subarray(wt,wt+vt):null)};Mr.prototype._glCompressedTexSubImage2D=function(xt,yt,zt,At,Bt,Ct,Dt,Et,Ft){if(To.currentContext.supportsWebGL2EntryPoints){Uo["compressedTexSubImage2D"](xt,yt,zt,At,Bt,Ct,Dt,Zo,Ft,Et);return}Uo["compressedTexSubImage2D"](xt,yt,zt,At,Bt,Ct,Dt,Ft?Zo.subarray(Ft,Ft+Et):null)};Mr.prototype._glCompressedTexSubImage3D=function(Gt,Ht,It,Jt,Kt,Lt,Mt,Nt,Ot,Pt,Qt){if(To.currentContext.supportsWebGL2EntryPoints){Uo["compressedTexSubImage3D"](Gt,Ht,It,Jt,Kt,Lt,Mt,Nt,Ot,Zo,Qt,Pt)}else{Uo["compressedTexSubImage3D"](Gt,Ht,It,Jt,Kt,Lt,Mt,Nt,Ot,Qt?Zo.subarray(Qt,Qt+Pt):null)}};Mr.prototype._glCopyBufferSubData=function(Rt,St,Tt,Ut,Vt){Uo["copyBufferSubData"](Rt,St,Tt,Ut,Vt)};Mr.prototype._glCopyTexImage2D=function(Wt,Xt,Yt,Zt,$t,_t,au,bu){Uo["copyTexImage2D"](Wt,Xt,Yt,Zt,$t,_t,au,bu)};Mr.prototype._glCopyTexSubImage2D=function(cu,du,eu,fu,gu,hu,iu,ju){Uo["copyTexSubImage2D"](cu,du,eu,fu,gu,hu,iu,ju)};Mr.prototype._glCreateProgram=function(){var ku=To.getNewId(To.programs);var lu=Uo.createProgram();lu.name=ku;To.programs[ku]=lu;return ku};Mr.prototype._glCreateShader=function(mu){var nu=To.getNewId(To.shaders);To.shaders[nu]=Uo.createShader(mu);return nu};Mr.prototype._glCullFace=function(ou){Uo["cullFace"](ou)};Mr.prototype._glDeleteBuffers=function(pu,qu){for(var ru=0;ru<pu;ru++){var su=ap[qu+ru*4>>2];var tu=To.buffers[su];if(!tu)continue;Uo.deleteBuffer(tu);tu.name=0;To.buffers[su]=null;if(su==To.currArrayBuffer)To.currArrayBuffer=0;if(su==To.currElementArrayBuffer)To.currElementArrayBuffer=0}};Mr.prototype._glDeleteFramebuffers=function(uu,vu){for(var wu=0;wu<uu;++wu){var xu=ap[vu+wu*4>>2];var yu=To.framebuffers[xu];if(!yu)continue;Uo.deleteFramebuffer(yu);yu.name=0;To.framebuffers[xu]=null}};Mr.prototype._glDeleteProgram=function(zu){if(!zu)return;var Au=To.programs[zu];if(!Au){To.recordError(1281);return}Uo.deleteProgram(Au);Au.name=0;To.programs[zu]=null;To.programInfos[zu]=null};Mr.prototype._glDeleteQueries=function(Bu,Cu){for(var Du=0;Du<Bu;Du++){var Eu=ap[Cu+Du*4>>2];var Fu=To.queries[Eu];if(!Fu)continue;Uo["deleteQuery"](Fu);To.queries[Eu]=null}};Mr.prototype._glDeleteRenderbuffers=function(Gu,Hu){for(var Iu=0;Iu<Gu;Iu++){var Ju=ap[Hu+Iu*4>>2];var Ku=To.renderbuffers[Ju];if(!Ku)continue;Uo.deleteRenderbuffer(Ku);Ku.name=0;To.renderbuffers[Ju]=null}};Mr.prototype._glDeleteSamplers=function(Lu,Mu){for(var Nu=0;Nu<Lu;Nu++){var Ou=ap[Mu+Nu*4>>2];var Pu=To.samplers[Ou];if(!Pu)continue;Uo["deleteSampler"](Pu);Pu.name=0;To.samplers[Ou]=null}};Mr.prototype._glDeleteShader=function(Qu){if(!Qu)return;var Ru=To.shaders[Qu];if(!Ru){To.recordError(1281);return}Uo.deleteShader(Ru);To.shaders[Qu]=null};Mr.prototype._glDeleteSync=function(Su){if(!Su)return;var Tu=To.syncs[Su];if(!Tu){To.recordError(1281);return}Uo.deleteSync(Tu);Tu.name=0;To.syncs[Su]=null};Mr.prototype._glDeleteTextures=function(Uu,Vu){for(var Wu=0;Wu<Uu;Wu++){var Xu=ap[Vu+Wu*4>>2];var Yu=To.textures[Xu];if(!Yu)continue;Uo.deleteTexture(Yu);Yu.name=0;To.textures[Xu]=null}};Mr.prototype._glDeleteTransformFeedbacks=function(Zu,$u){for(var _u=0;_u<Zu;_u++){var av=ap[$u+_u*4>>2];var bv=To.transformFeedbacks[av];if(!bv)continue;Uo["deleteTransformFeedback"](bv);bv.name=0;To.transformFeedbacks[av]=null}};Mr.prototype._glDeleteVertexArrays=function(cv,dv){for(var ev=0;ev<cv;ev++){var fv=ap[dv+ev*4>>2];Uo["deleteVertexArray"](To.vaos[fv]);To.vaos[fv]=null}};Mr.prototype._glDepthFunc=function(gv){Uo["depthFunc"](gv)};Mr.prototype._glDepthMask=function(hv){Uo.depthMask(!!hv)};Mr.prototype._glDetachShader=function(iv,jv){Uo.detachShader(To.programs[iv],To.shaders[jv])};Mr.prototype._glDisable=function(kv){Uo["disable"](kv)};Mr.prototype._glDisableVertexAttribArray=function(lv){Uo.disableVertexAttribArray(lv)};Mr.prototype._glDrawArrays=function(mv,nv,ov){Uo.drawArrays(mv,nv,ov)};Mr.prototype._glDrawArraysInstanced=function(pv,qv,rv,sv){Uo["drawArraysInstanced"](pv,qv,rv,sv)};Mr.prototype._glDrawBuffers=function(tv,uv){var vv=To.tempFixedLengthArray[tv];for(var wv=0;wv<tv;wv++){vv[wv]=ap[uv+wv*4>>2]}Uo["drawBuffers"](vv)};Mr.prototype._glDrawElements=function(xv,yv,zv,Av){Uo.drawElements(xv,yv,zv,Av)};Mr.prototype._glDrawElementsInstanced=function(Bv,Cv,Dv,Ev,Fv){Uo["drawElementsInstanced"](Bv,Cv,Dv,Ev,Fv)};Mr.prototype._glEnable=function(Gv){Uo["enable"](Gv)};Mr.prototype._glEnableVertexAttribArray=function(Hv){Uo.enableVertexAttribArray(Hv)};Mr.prototype._glEndQuery=function(Iv){Uo["endQuery"](Iv)};Mr.prototype._glEndTransformFeedback=function(){Uo["endTransformFeedback"]()};Mr.prototype._glFenceSync=function(Jv,Kv){var Lv=Uo.fenceSync(Jv,Kv);if(Lv){var Mv=To.getNewId(To.syncs);Lv.name=Mv;To.syncs[Mv]=Lv;return Mv}else{return 0}};Mr.prototype._glFinish=function(){Uo["finish"]()};Mr.prototype._glFlush=function(){Uo["flush"]()};Mr.prototype._glFlushMappedBufferRange=function(Nv,Ov,Pv){if(!hp(Nv)){To.recordError(1280);Vo("GL_INVALID_ENUM in glFlushMappedBufferRange");return}var Qv=To.mappedBuffers[gp(Nv)];if(!Qv){To.recordError(1282);Vo("buffer was never mapped in glFlushMappedBufferRange");return}if(!(Qv.access&16)){To.recordError(1282);Vo("buffer was not mapped with GL_MAP_FLUSH_EXPLICIT_BIT in glFlushMappedBufferRange");return}if(Ov<0||Pv<0||Ov+Pv>Qv.length){To.recordError(1281);Vo("invalid range in glFlushMappedBufferRange");return}Uo.bufferSubData(Nv,Qv.offset,Zo.subarray(Qv.mem+Ov,Qv.mem+Ov+Pv))};Mr.prototype._glFramebufferRenderbuffer=function(Rv,Sv,Tv,Uv){Uo.framebufferRenderbuffer(Rv,Sv,Tv,To.renderbuffers[Uv])};Mr.prototype._glFramebufferTexture2D=function(Vv,Wv,Xv,Yv,Zv){Uo.framebufferTexture2D(Vv,Wv,Xv,To.textures[Yv],Zv)};Mr.prototype._glFramebufferTextureLayer=function($v,_v,aw,bw,cw){Uo.framebufferTextureLayer($v,_v,To.textures[aw],bw,cw)};Mr.prototype._glFrontFace=function(dw){Uo["frontFace"](dw)};Mr.prototype._glGenBuffers=function(ew,fw){for(var gw=0;gw<ew;gw++){var hw=Uo.createBuffer();if(!hw){To.recordError(1282);while(gw<ew)ap[fw+gw++*4>>2]=0;return}var iw=To.getNewId(To.buffers);hw.name=iw;To.buffers[iw]=hw;ap[fw+gw*4>>2]=iw}};Mr.prototype._glGenFramebuffers=function(jw,kw){for(var lw=0;lw<jw;++lw){var mw=Uo.createFramebuffer();if(!mw){To.recordError(1282);while(lw<jw)ap[kw+lw++*4>>2]=0;return}var nw=To.getNewId(To.framebuffers);mw.name=nw;To.framebuffers[nw]=mw;ap[kw+lw*4>>2]=nw}};Mr.prototype._glGenQueries=function(ow,pw){for(var qw=0;qw<ow;qw++){var rw=Uo["createQuery"]();if(!rw){To.recordError(1282);while(qw<ow)ap[pw+qw++*4>>2]=0;return}var sw=To.getNewId(To.queries);rw.name=sw;To.queries[sw]=rw;ap[pw+qw*4>>2]=sw}};Mr.prototype._glGenRenderbuffers=function(tw,uw){for(var vw=0;vw<tw;vw++){var ww=Uo.createRenderbuffer();if(!ww){To.recordError(1282);while(vw<tw)ap[uw+vw++*4>>2]=0;return}var xw=To.getNewId(To.renderbuffers);ww.name=xw;To.renderbuffers[xw]=ww;ap[uw+vw*4>>2]=xw}};Mr.prototype._glGenSamplers=function(yw,zw){for(var Aw=0;Aw<yw;Aw++){var Bw=Uo["createSampler"]();if(!Bw){To.recordError(1282);while(Aw<yw)ap[zw+Aw++*4>>2]=0;return}var Cw=To.getNewId(To.samplers);Bw.name=Cw;To.samplers[Cw]=Bw;ap[zw+Aw*4>>2]=Cw}};Mr.prototype._glGenTextures=function(Dw,Ew){for(var Fw=0;Fw<Dw;Fw++){var Gw=Uo.createTexture();if(!Gw){To.recordError(1282);while(Fw<Dw)ap[Ew+Fw++*4>>2]=0;return}var Hw=To.getNewId(To.textures);Gw.name=Hw;To.textures[Hw]=Gw;ap[Ew+Fw*4>>2]=Hw}};Mr.prototype._glGenTransformFeedbacks=function(Iw,Jw){for(var Kw=0;Kw<Iw;Kw++){var Lw=Uo["createTransformFeedback"]();if(!Lw){To.recordError(1282);while(Kw<Iw)ap[Jw+Kw++*4>>2]=0;return}var Mw=To.getNewId(To.transformFeedbacks);Lw.name=Mw;To.transformFeedbacks[Mw]=Lw;ap[Jw+Kw*4>>2]=Mw}};Mr.prototype._glGenVertexArrays=function(Nw,Ow){for(var Pw=0;Pw<Nw;Pw++){var Qw=Uo["createVertexArray"]();if(!Qw){To.recordError(1282);while(Pw<Nw)ap[Ow+Pw++*4>>2]=0;return}var Rw=To.getNewId(To.vaos);Qw.name=Rw;To.vaos[Rw]=Qw;ap[Ow+Pw*4>>2]=Rw}};Mr.prototype._glGenerateMipmap=function(Sw){Uo["generateMipmap"](Sw)};Mr.prototype._glGetActiveAttrib=function(Tw,Uw,Vw,Ww,Xw,Yw,Zw){Tw=To.programs[Tw];var $w=Uo.getActiveAttrib(Tw,Uw);if(!$w)return;if(Vw>0&&Zw){var _w=Xo($w.name,Zw,Vw);if(Ww)ap[Ww>>2]=_w}else{if(Ww)ap[Ww>>2]=0}if(Xw)ap[Xw>>2]=$w.size;if(Yw)ap[Yw>>2]=$w.type};Mr.prototype._glGetActiveUniform=function(ax,bx,cx,dx,ex,fx,gx){ax=To.programs[ax];var hx=Uo.getActiveUniform(ax,bx);if(!hx)return;if(cx>0&&gx){var ix=Xo(hx.name,gx,cx);if(dx)ap[dx>>2]=ix}else{if(dx)ap[dx>>2]=0}if(ex)ap[ex>>2]=hx.size;if(fx)ap[fx>>2]=hx.type};Mr.prototype._glGetActiveUniformBlockName=function(jx,kx,lx,mx,nx){jx=To.programs[jx];var ox=Uo["getActiveUniformBlockName"](jx,kx);if(!ox)return;if(nx&&lx>0){var px=Xo(ox,nx,lx);if(mx)ap[mx>>2]=px}else{if(mx)ap[mx>>2]=0}};Mr.prototype._glGetActiveUniformBlockiv=function(qx,rx,sx,tx){if(!tx){To.recordError(1281);return}qx=To.programs[qx];switch(sx){case 35393:var ux=Uo["getActiveUniformBlockName"](qx,rx);ap[tx>>2]=ux.length+1;return;default:var vx=Uo["getActiveUniformBlockParameter"](qx,rx,sx);if(!vx)return;if(typeof vx=="number"){ap[tx>>2]=vx}else{for(var wx=0;wx<vx.length;wx++){ap[tx+wx*4>>2]=vx[wx]}}}};Mr.prototype._glGetActiveUniformsiv=function(xx,yx,zx,Ax,Bx){if(!Bx){To.recordError(1281);return}if(yx>0&&zx==0){To.recordError(1281);return}xx=To.programs[xx];var Cx=[];for(var Dx=0;Dx<yx;Dx++){Cx.push(ap[zx+Dx*4>>2])}var Ex=Uo["getActiveUniforms"](xx,Cx,Ax);if(!Ex)return;var Fx=Ex.length;for(var Dx=0;Dx<Fx;Dx++){ap[Bx+Dx*4>>2]=Ex[Dx]}};Mr.prototype._glGetAttribLocation=function(Gx,Hx){return Uo.getAttribLocation(To.programs[Gx],Wo(Hx))};Mr.prototype._glGetError=function(){if(To.lastError){var Ix=To.lastError;To.lastError=0;return Ix}else{return Uo.getError()}};Mr.prototype._glGetFramebufferAttachmentParameteriv=function(Jx,Kx,Lx,Mx){var Nx=Uo.getFramebufferAttachmentParameter(Jx,Kx,Lx);if(Nx instanceof WebGLRenderbuffer||Nx instanceof WebGLTexture){Nx=Nx["name"]|0}ap[Mx>>2]=Nx};Mr.prototype._glGetIntegeri_v=function(Ox,Px,Qx){ip(Ox,Px,Qx,"Integer")};Mr.prototype._glGetIntegerv=function(Rx,Sx){jp(Rx,Sx,"Integer")};Mr.prototype._glGetInternalformativ=function(Tx,Ux,Vx,Wx,Xx){if(Wx<0){To.recordError(1281);return}var Yx=Uo["getInternalformatParameter"](Tx,Ux,32937);if(!Yx){To.recordError(1280);return}switch(Vx){case 32937:var Zx=Math.min(Wx,Yx.length);for(var $x=0;$x<Zx;$x++){var _x=Yx[$x];ap[Xx+$x*4>>2]=_x}break;case 37760:if(Wx>1){var _x=Yx.length;ap[Xx>>2]=_x}break;default:To.recordError(1280)}};Mr.prototype._glGetProgramBinary=function(ay,by,cy,dy,ey){To.recordError(1282)};Mr.prototype._glGetProgramInfoLog=function(fy,gy,hy,iy){var jy=Uo.getProgramInfoLog(To.programs[fy]);if(jy===null)jy="(unknown error)";if(gy>0&&iy){var ky=Xo(jy,iy,gy);if(hy)ap[hy>>2]=ky}else{if(hy)ap[hy>>2]=0}};Mr.prototype._glGetProgramiv=function(ly,my,ny){if(!ny){To.recordError(1281);return}if(ly>=To.counter){To.recordError(1281);return}var oy=To.programInfos[ly];if(!oy){To.recordError(1282);return}if(my==35716){var py=Uo.getProgramInfoLog(To.programs[ly]);if(py===null)py="(unknown error)";ap[ny>>2]=py.length+1}else if(my==35719){ap[ny>>2]=oy.maxUniformLength}else if(my==35722){if(oy.maxAttributeLength==-1){ly=To.programs[ly];var qy=Uo.getProgramParameter(ly,Uo.ACTIVE_ATTRIBUTES);oy.maxAttributeLength=0;for(var ry=0;ry<qy;++ry){var sy=Uo.getActiveAttrib(ly,ry);oy.maxAttributeLength=Math.max(oy.maxAttributeLength,sy.name.length+1)}}ap[ny>>2]=oy.maxAttributeLength}else if(my==35381){if(oy.maxUniformBlockNameLength==-1){ly=To.programs[ly];var ty=Uo.getProgramParameter(ly,Uo.ACTIVE_UNIFORM_BLOCKS);oy.maxUniformBlockNameLength=0;for(var ry=0;ry<ty;++ry){var uy=Uo.getActiveUniformBlockName(ly,ry);oy.maxUniformBlockNameLength=Math.max(oy.maxUniformBlockNameLength,uy.length+1)}}ap[ny>>2]=oy.maxUniformBlockNameLength}else{ap[ny>>2]=Uo.getProgramParameter(To.programs[ly],my)}};Mr.prototype._glGetRenderbufferParameteriv=function(vy,wy,xy){if(!xy){To.recordError(1281);return}ap[xy>>2]=Uo.getRenderbufferParameter(vy,wy)};Mr.prototype._glGetShaderInfoLog=function(yy,zy,Ay,By){var Cy=Uo.getShaderInfoLog(To.shaders[yy]);if(Cy===null)Cy="(unknown error)";if(zy>0&&By){var Dy=Xo(Cy,By,zy);if(Ay)ap[Ay>>2]=Dy}else{if(Ay)ap[Ay>>2]=0}};Mr.prototype._glGetShaderPrecisionFormat=function(Ey,Fy,Gy,Hy){var Iy=Uo.getShaderPrecisionFormat(Ey,Fy);ap[Gy>>2]=Iy.rangeMin;ap[Gy+4>>2]=Iy.rangeMax;ap[Hy>>2]=Iy.precision};Mr.prototype._glGetShaderSource=function(Jy,Ky,Ly,My){var Ny=Uo.getShaderSource(To.shaders[Jy]);if(!Ny)return;if(Ky>0&&My){var Oy=Xo(Ny,My,Ky);if(Ly)ap[Ly>>2]=Oy}else{if(Ly)ap[Ly>>2]=0}};Mr.prototype._glGetShaderiv=function(Py,Qy,Ry){if(!Ry){To.recordError(1281);return}if(Qy==35716){var Sy=Uo.getShaderInfoLog(To.shaders[Py]);if(Sy===null)Sy="(unknown error)";ap[Ry>>2]=Sy.length+1}else if(Qy==35720){var Ty=Uo.getShaderSource(To.shaders[Py]);var Uy=Ty===null||Ty.length==0?0:Ty.length+1;ap[Ry>>2]=Uy}else{ap[Ry>>2]=Uo.getShaderParameter(To.shaders[Py],Qy)}};Mr.prototype._glGetString=function(Vy){Vo("unsupported glGetString");return 0};Mr.prototype._glGetStringi=function(Wy,Xy){Vo("unsupported glGetStringi");return 0};Mr.prototype._glGetTexParameteriv=function(Yy,Zy,$y){if(!$y){To.recordError(1281);return}ap[$y>>2]=Uo.getTexParameter(Yy,Zy)};Mr.prototype._glGetUniformBlockIndex=function(_y,az){_y=To.programs[_y];az=Wo(az);return Uo["getUniformBlockIndex"](_y,az)};Mr.prototype._glGetUniformIndices=function(bz,cz,dz,ez){if(!ez){To.recordError(1281);return}if(cz>0&&(dz==0||ez==0)){To.recordError(1281);return}bz=To.programs[bz];var fz=[];for(var gz=0;gz<cz;gz++)fz.push(Wo(ap[dz+gz*4>>2]));var hz=Uo["getUniformIndices"](bz,fz);if(!hz)return;var iz=hz.length;for(var gz=0;gz<iz;gz++){ap[ez+gz*4>>2]=hz[gz]}};Mr.prototype._glGetUniformLocation=function(jz,kz){kz=Wo(kz);var lz=0;if(kz.indexOf("]",kz.length-1)!==-1){var mz=kz.lastIndexOf("[");var nz=kz.slice(mz+1,-1);if(nz.length>0){lz=parseInt(nz);if(lz<0){return-1}}kz=kz.slice(0,mz)}var oz=To.programInfos[jz];if(!oz){return-1}var pz=oz.uniforms;var qz=pz[kz];if(qz&&lz<qz[0]){return qz[1]+lz}else{return-1}};Mr.prototype._glGetUniformiv=function(rz,sz,tz){kp(rz,sz,tz,"Integer")};Mr.prototype._glGetVertexAttribiv=function(uz,vz,wz){lp(uz,vz,wz,"FloatToInteger")};Mr.prototype._glInvalidateFramebuffer=function(xz,yz,zz){var Az=To.tempFixedLengthArray[yz];for(var Bz=0;Bz<yz;Bz++){Az[Bz]=ap[zz+Bz*4>>2]}Uo["invalidateFramebuffer"](xz,Az)};Mr.prototype._glIsEnabled=function(Cz){return Uo["isEnabled"](Cz)};Mr.prototype._glIsVertexArray=function(Dz){var Ez=To.vaos[Dz];if(!Ez)return 0;return Uo["isVertexArray"](Ez)};Mr.prototype._glLinkProgram=function(Fz){Uo.linkProgram(To.programs[Fz]);To.programInfos[Fz]=null;To.populateUniformTable(Fz)};Mr.prototype._glMapBufferRange=function(Gz,Hz,Iz,Jz){if(Jz!=26&&Jz!=10){Vo("glMapBufferRange is only supported when access is MAP_WRITE|INVALIDATE_BUFFER");return 0}if(!hp(Gz)){To.recordError(1280);Vo("GL_INVALID_ENUM in glMapBufferRange");return 0}var Kz=dp(Iz);if(!Kz)return 0;To.mappedBuffers[gp(Gz)]={offset:Hz,length:Iz,mem:Kz,access:Jz};return Kz};Mr.prototype._glPixelStorei=function(Lz,Mz){if(Lz==3333){To.packAlignment=Mz}else if(Lz==3317){To.unpackAlignment=Mz}Uo.pixelStorei(Lz,Mz)};Mr.prototype._glPolygonOffset=function(Nz,Oz){Uo["polygonOffset"](Nz,Oz)};Mr.prototype._glProgramBinary=function(Pz,Qz,Rz,Sz){To.recordError(1280)};Mr.prototype._glProgramParameteri=function(Tz,Uz,Vz){To.recordError(1280)};Mr.prototype._glReadBuffer=function(Wz){Uo["readBuffer"](Wz)};Mr.prototype._glReadPixels=function(Xz,Yz,Zz,$z,_z,aA,bA){if(To.currentContext.supportsWebGL2EntryPoints){if(Uo.currentPixelPackBufferBinding){Uo.readPixels(Xz,Yz,Zz,$z,_z,aA,bA)}else{Uo.readPixels(Xz,Yz,Zz,$z,_z,aA,op(aA),bA>>pp(aA))}return}var cA=np(aA,_z,Zz,$z,bA,_z);if(!cA){To.recordError(1280);return}Uo.readPixels(Xz,Yz,Zz,$z,_z,aA,cA)};Mr.prototype._glRenderbufferStorage=function(dA,eA,fA,gA){Uo["renderbufferStorage"](dA,eA,fA,gA)};Mr.prototype._glRenderbufferStorageMultisample=function(hA,iA,jA,kA,lA){Uo["renderbufferStorageMultisample"](hA,iA,jA,kA,lA)};Mr.prototype._glSamplerParameteri=function(mA,nA,oA){Uo["samplerParameteri"](mA?To.samplers[mA]:null,nA,oA)};Mr.prototype._glScissor=function(pA,qA,rA,sA){Uo["scissor"](pA,qA,rA,sA)};Mr.prototype._glShaderSource=function(tA,uA,vA,wA){var xA=To.getSource(tA,uA,vA,wA);Uo.shaderSource(To.shaders[tA],xA)};Mr.prototype._glStencilFuncSeparate=function(yA,zA,AA,BA){Uo["stencilFuncSeparate"](yA,zA,AA,BA)};Mr.prototype._glStencilMask=function(CA){Uo["stencilMask"](CA)};Mr.prototype._glStencilOpSeparate=function(DA,EA,FA,GA){Uo["stencilOpSeparate"](DA,EA,FA,GA)};Mr.prototype._glTexImage2D=function(HA,IA,JA,KA,LA,MA,NA,OA,PA){if(To.currentContext.supportsWebGL2EntryPoints){if(Uo.currentPixelUnpackBufferBinding){Uo.texImage2D(HA,IA,JA,KA,LA,MA,NA,OA,PA)}else if(PA!=0){Uo.texImage2D(HA,IA,JA,KA,LA,MA,NA,OA,op(OA),PA>>pp(OA))}else{Uo.texImage2D(HA,IA,JA,KA,LA,MA,NA,OA,null)}return}var QA=null;if(PA)QA=np(OA,NA,KA,LA,PA,JA);Uo.texImage2D(HA,IA,JA,KA,LA,MA,NA,OA,QA)};Mr.prototype._glTexImage3D=function(RA,SA,TA,UA,VA,WA,XA,YA,ZA,$A){if(Uo.currentPixelUnpackBufferBinding){Uo["texImage3D"](RA,SA,TA,UA,VA,WA,XA,YA,ZA,$A)}else if($A!=0){Uo["texImage3D"](RA,SA,TA,UA,VA,WA,XA,YA,ZA,op(ZA),$A>>pp(ZA))}else{Uo["texImage3D"](RA,SA,TA,UA,VA,WA,XA,YA,ZA,null)}};Mr.prototype._glTexParameterf=function(_A,aB,bB){Uo["texParameterf"](_A,aB,bB)};Mr.prototype._glTexParameteri=function(cB,dB,eB){Uo["texParameteri"](cB,dB,eB)};Mr.prototype._glTexParameteriv=function(fB,gB,hB){var iB=ap[hB>>2];Uo.texParameteri(fB,gB,iB)};Mr.prototype._glTexStorage2D=function(jB,kB,lB,mB,nB){Uo["texStorage2D"](jB,kB,lB,mB,nB)};Mr.prototype._glTexStorage3D=function(oB,pB,qB,rB,sB,tB){Uo["texStorage3D"](oB,pB,qB,rB,sB,tB)};Mr.prototype._glTexSubImage2D=function(uB,vB,wB,xB,yB,zB,AB,BB,CB){if(To.currentContext.supportsWebGL2EntryPoints){if(Uo.currentPixelUnpackBufferBinding){Uo.texSubImage2D(uB,vB,wB,xB,yB,zB,AB,BB,CB)}else if(CB!=0){Uo.texSubImage2D(uB,vB,wB,xB,yB,zB,AB,BB,op(BB),CB>>pp(BB))}else{Uo.texSubImage2D(uB,vB,wB,xB,yB,zB,AB,BB,null)}return}var DB=null;if(CB)DB=np(BB,AB,yB,zB,CB,0);Uo.texSubImage2D(uB,vB,wB,xB,yB,zB,AB,BB,DB)};Mr.prototype._glTexSubImage3D=function(EB,FB,GB,HB,IB,JB,KB,LB,MB,NB,OB){if(Uo.currentPixelUnpackBufferBinding){Uo["texSubImage3D"](EB,FB,GB,HB,IB,JB,KB,LB,MB,NB,OB)}else if(OB!=0){Uo["texSubImage3D"](EB,FB,GB,HB,IB,JB,KB,LB,MB,NB,op(NB),OB>>pp(NB))}else{Uo["texSubImage3D"](EB,FB,GB,HB,IB,JB,KB,LB,MB,NB,null)}};Mr.prototype._glTransformFeedbackVaryings=function(PB,QB,RB,SB){PB=To.programs[PB];var TB=[];for(var UB=0;UB<QB;UB++)TB.push(Wo(ap[RB+UB*4>>2]));Uo["transformFeedbackVaryings"](PB,TB,SB)};Mr.prototype._glUniform1fv=function(VB,WB,XB){if(To.currentContext.supportsWebGL2EntryPoints){Uo.uniform1fv(To.uniforms[VB],cp,XB>>2,WB);return}var YB;if(WB<=To.MINI_TEMP_BUFFER_SIZE){YB=To.miniTempBufferViews[WB-1];for(var ZB=0;ZB<WB;++ZB){YB[ZB]=cp[XB+4*ZB>>2]}}else{YB=cp.subarray(XB>>2,XB+WB*4>>2)}Uo.uniform1fv(To.uniforms[VB],YB)};Mr.prototype._glUniform1i=function($B,_B){Uo.uniform1i(To.uniforms[$B],_B)};Mr.prototype._glUniform1iv=function(aC,bC,cC){if(To.currentContext.supportsWebGL2EntryPoints){Uo.uniform1iv(To.uniforms[aC],ap,cC>>2,bC);return}Uo.uniform1iv(To.uniforms[aC],ap.subarray(cC>>2,cC+bC*4>>2))};Mr.prototype._glUniform1uiv=function(dC,eC,fC){if(To.currentContext.supportsWebGL2EntryPoints){Uo.uniform1uiv(To.uniforms[dC],bp,fC>>2,eC)}else{Uo.uniform1uiv(To.uniforms[dC],bp.subarray(fC>>2,fC+eC*4>>2))}};Mr.prototype._glUniform2fv=function(gC,hC,iC){if(To.currentContext.supportsWebGL2EntryPoints){Uo.uniform2fv(To.uniforms[gC],cp,iC>>2,hC*2);return}var jC;if(2*hC<=To.MINI_TEMP_BUFFER_SIZE){jC=To.miniTempBufferViews[2*hC-1];for(var kC=0;kC<2*hC;kC+=2){jC[kC]=cp[iC+4*kC>>2];jC[kC+1]=cp[iC+(4*kC+4)>>2]}}else{jC=cp.subarray(iC>>2,iC+hC*8>>2)}Uo.uniform2fv(To.uniforms[gC],jC)};Mr.prototype._glUniform2iv=function(lC,mC,nC){if(To.currentContext.supportsWebGL2EntryPoints){Uo.uniform2iv(To.uniforms[lC],ap,nC>>2,mC*2);return}Uo.uniform2iv(To.uniforms[lC],ap.subarray(nC>>2,nC+mC*8>>2))};Mr.prototype._glUniform2uiv=function(oC,pC,qC){if(To.currentContext.supportsWebGL2EntryPoints){Uo.uniform2uiv(To.uniforms[oC],bp,qC>>2,pC*2)}else{Uo.uniform2uiv(To.uniforms[oC],bp.subarray(qC>>2,qC+pC*8>>2))}};Mr.prototype._glUniform3fv=function(rC,sC,tC){if(To.currentContext.supportsWebGL2EntryPoints){Uo.uniform3fv(To.uniforms[rC],cp,tC>>2,sC*3);return}var uC;if(3*sC<=To.MINI_TEMP_BUFFER_SIZE){uC=To.miniTempBufferViews[3*sC-1];for(var vC=0;vC<3*sC;vC+=3){uC[vC]=cp[tC+4*vC>>2];uC[vC+1]=cp[tC+(4*vC+4)>>2];uC[vC+2]=cp[tC+(4*vC+8)>>2]}}else{uC=cp.subarray(tC>>2,tC+sC*12>>2)}Uo.uniform3fv(To.uniforms[rC],uC)};Mr.prototype._glUniform3iv=function(wC,xC,yC){if(To.currentContext.supportsWebGL2EntryPoints){Uo.uniform3iv(To.uniforms[wC],ap,yC>>2,xC*3);return}Uo.uniform3iv(To.uniforms[wC],ap.subarray(yC>>2,yC+xC*12>>2))};Mr.prototype._glUniform3uiv=function(zC,AC,BC){if(To.currentContext.supportsWebGL2EntryPoints){Uo.uniform3uiv(To.uniforms[zC],bp,BC>>2,AC*3)}else{Uo.uniform3uiv(To.uniforms[zC],bp.subarray(BC>>2,BC+AC*12>>2))}};Mr.prototype._glUniform4fv=function(CC,DC,EC){if(To.currentContext.supportsWebGL2EntryPoints){Uo.uniform4fv(To.uniforms[CC],cp,EC>>2,DC*4);return}var FC;if(4*DC<=To.MINI_TEMP_BUFFER_SIZE){FC=To.miniTempBufferViews[4*DC-1];for(var GC=0;GC<4*DC;GC+=4){FC[GC]=cp[EC+4*GC>>2];FC[GC+1]=cp[EC+(4*GC+4)>>2];FC[GC+2]=cp[EC+(4*GC+8)>>2];FC[GC+3]=cp[EC+(4*GC+12)>>2]}}else{FC=cp.subarray(EC>>2,EC+DC*16>>2)}Uo.uniform4fv(To.uniforms[CC],FC)};Mr.prototype._glUniform4iv=function(HC,IC,JC){if(To.currentContext.supportsWebGL2EntryPoints){Uo.uniform4iv(To.uniforms[HC],ap,JC>>2,IC*4);return}Uo.uniform4iv(To.uniforms[HC],ap.subarray(JC>>2,JC+IC*16>>2))};Mr.prototype._glUniform4uiv=function(KC,LC,MC){if(To.currentContext.supportsWebGL2EntryPoints){Uo.uniform4uiv(To.uniforms[KC],bp,MC>>2,LC*4)}else{Uo.uniform4uiv(To.uniforms[KC],bp.subarray(MC>>2,MC+LC*16>>2))}};Mr.prototype._glUniformBlockBinding=function(NC,OC,PC){NC=To.programs[NC];Uo["uniformBlockBinding"](NC,OC,PC)};Mr.prototype._glUniformMatrix3fv=function(QC,RC,SC,TC){if(To.currentContext.supportsWebGL2EntryPoints){Uo.uniformMatrix3fv(To.uniforms[QC],!!SC,cp,TC>>2,RC*9);return}var UC;if(9*RC<=To.MINI_TEMP_BUFFER_SIZE){UC=To.miniTempBufferViews[9*RC-1];for(var VC=0;VC<9*RC;VC+=9){UC[VC]=cp[TC+4*VC>>2];UC[VC+1]=cp[TC+(4*VC+4)>>2];UC[VC+2]=cp[TC+(4*VC+8)>>2];UC[VC+3]=cp[TC+(4*VC+12)>>2];UC[VC+4]=cp[TC+(4*VC+16)>>2];UC[VC+5]=cp[TC+(4*VC+20)>>2];UC[VC+6]=cp[TC+(4*VC+24)>>2];UC[VC+7]=cp[TC+(4*VC+28)>>2];UC[VC+8]=cp[TC+(4*VC+32)>>2]}}else{UC=cp.subarray(TC>>2,TC+RC*36>>2)}Uo.uniformMatrix3fv(To.uniforms[QC],!!SC,UC)};Mr.prototype._glUniformMatrix4fv=function(WC,XC,YC,ZC){if(To.currentContext.supportsWebGL2EntryPoints){Uo.uniformMatrix4fv(To.uniforms[WC],!!YC,cp,ZC>>2,XC*16);return}var $C;if(16*XC<=To.MINI_TEMP_BUFFER_SIZE){$C=To.miniTempBufferViews[16*XC-1];for(var _C=0;_C<16*XC;_C+=16){$C[_C]=cp[ZC+4*_C>>2];$C[_C+1]=cp[ZC+(4*_C+4)>>2];$C[_C+2]=cp[ZC+(4*_C+8)>>2];$C[_C+3]=cp[ZC+(4*_C+12)>>2];$C[_C+4]=cp[ZC+(4*_C+16)>>2];$C[_C+5]=cp[ZC+(4*_C+20)>>2];$C[_C+6]=cp[ZC+(4*_C+24)>>2];$C[_C+7]=cp[ZC+(4*_C+28)>>2];$C[_C+8]=cp[ZC+(4*_C+32)>>2];$C[_C+9]=cp[ZC+(4*_C+36)>>2];$C[_C+10]=cp[ZC+(4*_C+40)>>2];$C[_C+11]=cp[ZC+(4*_C+44)>>2];$C[_C+12]=cp[ZC+(4*_C+48)>>2];$C[_C+13]=cp[ZC+(4*_C+52)>>2];$C[_C+14]=cp[ZC+(4*_C+56)>>2];$C[_C+15]=cp[ZC+(4*_C+60)>>2]}}else{$C=cp.subarray(ZC>>2,ZC+XC*64>>2)}Uo.uniformMatrix4fv(To.uniforms[WC],!!YC,$C)};Mr.prototype._glUnmapBuffer=function(aD){if(!hp(aD)){To.recordError(1280);Vo("GL_INVALID_ENUM in glUnmapBuffer");return 0}var bD=gp(aD);var cD=To.mappedBuffers[bD];if(!cD){To.recordError(1282);Vo("buffer was never mapped in glUnmapBuffer");return 0}To.mappedBuffers[bD]=null;if(!(cD.access&16))if(To.currentContext.supportsWebGL2EntryPoints){Uo.bufferSubData(aD,cD.offset,Zo,cD.mem,cD.length)}else{Uo.bufferSubData(aD,cD.offset,Zo.subarray(cD.mem,cD.mem+cD.length))}ep(cD.mem);return 1};Mr.prototype._glUseProgram=function(dD){Uo.useProgram(dD?To.programs[dD]:null)};Mr.prototype._glValidateProgram=function(eD){Uo.validateProgram(To.programs[eD])};Mr.prototype._glVertexAttrib4f=function(fD,gD,hD,iD,jD){Uo["vertexAttrib4f"](fD,gD,hD,iD,jD)};Mr.prototype._glVertexAttrib4fv=function(kD,lD){Uo.vertexAttrib4f(kD,cp[lD>>2],cp[lD+4>>2],cp[lD+8>>2],cp[lD+12>>2])};Mr.prototype._glVertexAttribIPointer=function(mD,nD,oD,pD,qD){var rD=To.currentContext.clientBuffers[mD];if(!To.currArrayBuffer){rD.size=nD;rD.type=oD;rD.normalized=false;rD.stride=pD;rD.ptr=qD;rD.clientside=true;return}rD.clientside=false;Uo.vertexAttribIPointer(mD,nD,oD,pD,qD)};Mr.prototype._glVertexAttribPointer=function(sD,tD,uD,vD,wD,xD){Uo.vertexAttribPointer(sD,tD,uD,!!vD,wD,xD)};Mr.prototype._glViewport=function(yD,zD,AD,BD){Uo["viewport"](yD,zD,AD,BD)};return Mr}();To.instance=new qp;To.instance["_name"]="GL";To.instance["_textures"]=To.textures;return[To.instance]});