var MiaokitModule=function(a,b){var c=this;c["m_pConfigPath"]=b;c["m_pConfig"]={ENGINE:a};c["Merge"](c);c["Preload"]()};var MiaokitMerge=function(d){var e=[];d["Merge"]=d["Merge"]||function(f){for(var g=0,h=e;g<h.length;g++){var i=h[g];var j=i(f);if(j){for(var k=0,l=j;k<l.length;k++){var m=l[k];f[m._name]=m}}}};return function(n){e.push(n)}}(MiaokitModule.prototype);MiaokitMerge(function(o){var p=undefined;var q=undefined;var r={};var s=function(u,v){if(v===void 0){v=undefined}var w=0;this.length=u(-1);this[Symbol.iterator]=function(){return{next:function(){var x=u(w);if(x){var y=p(x);w=v?w+1:y.m_nObject;return{value:y,done:false}}return{value:undefined,done:true}}}}};r["Transform"]=function(z){Object.defineProperty(z,"position",{get:function(){var A=this["_GetPosition"]()/4;var B=o["WASM"].HEAPF32();return{x:B[A],y:B[A+1],z:B[A+2]}},set:function(C){this["_SetPosition"](C.x,C.y,C.z)}});Object.defineProperty(z,"euler",{get:function(){var D=this["_GetEuler"]()/4;var E=o["WASM"].HEAPF32();return{x:E[D],y:E[D+1],z:E[D+2]}},set:function(F){this["_SetEuler"](F.x,F.y,F.z)}});Object.defineProperty(z,"rotation",{get:function(){var G=this["_GetRotation"]()/4;var H=o["WASM"].HEAPF32();return{x:H[G],y:H[G+1],z:H[G+2],w:H[G+3]}},set:function(I){this["_SetRotation"](I.x,I.y,I.z,I.w)}});Object.defineProperty(z,"scale",{get:function(){var J=this["_GetScale"]()/4;var K=o["WASM"].HEAPF32();return{x:K[J],y:K[J+1],z:K[J+2]}},set:function(L){this["_SetScale"](L.x,L.y,L.z)}});Object.defineProperty(z,"localPosition",{get:function(){var M=this["_GetLocalPosition"]()/4;var N=o["WASM"].HEAPF32();return{x:N[M],y:N[M+1],z:N[M+2]}},set:function(O){this["_SetLocalPosition"](O.x,O.y,O.z)}});Object.defineProperty(z,"localEuler",{get:function(){var P=this["_GetLocalEuler"]()/4;var Q=o["WASM"].HEAPF32();return{x:Q[P],y:Q[P+1],z:Q[P+2]}},set:function(R){this["_SetLocalEuler"](R.x,R.y,R.z)}});Object.defineProperty(z,"localRotation",{get:function(){var S=this["_GetLocalRotation"]()/4;var T=o["WASM"].HEAPF32();return{x:T[S],y:T[S+1],z:T[S+2],w:T[S+3]}},set:function(U){this["_SetLocalRotation"](U.x,U.y,U.z,U.w)}});Object.defineProperty(z,"localScale",{get:function(){var V=this["_GetLocalScale"]()/4;var W=o["WASM"].HEAPF32();return{x:W[V],y:W[V+1],z:W[V+2]}},set:function(X){this["_SetLocalScale"](X.x,X.y,X.z)}});Object.defineProperty(z,"right",{get:function(){var Y=this["_GetRight"]()/4;var Z=o["WASM"].HEAPF32();return{x:Z[Y],y:Z[Y+1],z:Z[Y+2]}},set:function($){this["_SetRight"]($.x,$.y,$.z)}});Object.defineProperty(z,"up",{get:function(){var _=this["_GetUp"]()/4;var aa=o["WASM"].HEAPF32();return{x:aa[_],y:aa[_+1],z:aa[_+2]}},set:function(){var ba=this["_SetUp"]()/4;var ca=o["WASM"].HEAPF32();return{x:ca[ba],y:ca[ba+1],z:ca[ba+2]}}});Object.defineProperty(z,"forward",{get:function(){var da=this["_GetForward"]()/4;var ea=o["WASM"].HEAPF32();return{x:ea[da],y:ea[da+1],z:ea[da+2]}},set:function(){var fa=this["_SetForward"]()/4;var ga=o["WASM"].HEAPF32();return{x:ga[fa],y:ga[fa+1],z:ga[fa+2]}}});Object.defineProperty(z,"regionPosition",{get:function(){var ha=this["_GisToWorld"]()/4;var ia=o["WASM"].HEAPF32();return{x:ia[ha],y:ia[ha+1],z:ia[ha+2]}}});z["Rotate"]=function(ja,ka){this["_Rotate"](ja.x,ja.y,ja.z,ka)};z["Rotate2"]=function(la,ma,na){this["_Rotate2"](la.x,la.y,la.z,ma,na)};z["Translate"]=function(oa,pa){this["_Translate"](oa.x,oa.y,oa.z,pa)};z["TransformPoint"]=function(qa){var ra=this["_TransformPoint"](qa.x,qa.y,qa.z)/4;var sa=o["WASM"].HEAPF32();return{x:sa[ra],y:sa[ra+1],z:sa[ra+2]}}};r["GameObject"]=function(ta){Object.defineProperty(ta,"name",{get:function(){if(!this._name){var ua=this._GetName(0);var va=this._GetName(1);this._name=o["WASM"].GetString(va,ua)}return this._name}});Object.defineProperty(ta,"transform",{get:function(){return p(this["_GetTransform"]())}});Object.defineProperty(ta,"mesh",{get:function(){return p(this["_GetMesh"]())},set:function(wa){this["_SetMesh"](wa.m_nObject)}});Object.defineProperty(ta,"children",{get:function(){var xa=this;return new s(function(ya){return xa._IterChild(ya)},true)}});Object.defineProperty(ta,"parent",{get:function(){return p(this["_GetParent"]())}});Object.defineProperty(ta,"data",{get:function(){return p(this["_GetUserData"]())},set:function(za){}});Object.defineProperty(ta,"enableCollider",{set:function(Aa){this["_EnableCollider"](Aa)}});Object.defineProperty(ta,"active",{set:function(Ba){this["_Active"](Ba)}});Object.defineProperty(ta,"highlight",{set:function(Ca){this["_Highlight"](Ca)}});Object.defineProperty(ta,"transparent",{set:function(Da){console.warn("transparent discard!")}});Object.defineProperty(ta,"opacity",{set:function(Ea){this["_Transparent"](Ea)}});ta["Destory"]=function(){this["_Destory"]()};o["GameObject"]=function(){return p(ta._GameObject())}};r["Miaokit"]=function(Fa){Fa["LoadTile"]=function(Ga){var Ha=this["_Malloc"](Ga.byteLength);if(Ha){o["WASM"]["HEAPU8"](Ha,Ga.byteLength).set(new Uint8Array(Ga));var Ia=this["_LoadTile"](Ha,Ga.byteLength);var Ja=p(Ia);return Ja}return null};Fa["Analyze"]=function(Ka){var La=this["_Analyze"]();var Ma=o["WASM"].HEAP32()[La/4];var Na=o["WASM"].GetString(La+4,Ma);try{var Oa=JSON.parse(Na);var Pa=q(Ka).concat(Oa);return Pa}catch(Qa){console.log(Na)}return null};Fa["PickEntity"]=function(Ra){return p(this["_PickEntity"](Ra))};Fa["GetScene"]=function(Sa){return p(this["_GetScene"](Sa))};Fa["LngLatToGis"]=function(Ta,Ua,Va){var Wa=this["_LngLatToGis"](Ta.x,Ta.y,Ua.x,Ua.y,Ua.z,Va)/4;var Xa=o["WASM"].HEAPF32();return{x:Xa[Wa],y:Xa[Wa+1],z:Xa[Wa+2]}};Fa["GisToWorld"]=function(Ya){var Za=this["_GisToWorld"](Ya.x,Ya.y,Ya.z)/4;var $a=o["WASM"].HEAPF32();return{x:$a[Za],y:$a[Za+1],z:$a[Za+2]}};Fa["WorldToScreenPoint"]=function(_a){var ab=this["_WorldToScreenPoint"](_a.x,_a.y,_a.z)/4;var bb=o["WASM"].HEAPF32();return{x:bb[ab],y:bb[ab+1],z:bb[ab+2]}};Fa["ScreenPointToRay"]=function(cb){var db=this["_ScreenPointToRay"](cb.x,cb.y,cb.z)/4;var eb=o["WASM"].HEAPF32();return{m_mOrigin:{x:eb[db],y:eb[db+1],z:eb[db+2]},m_mDirection:{x:eb[db+4],y:eb[db+5],z:eb[db+6]}}};Object.defineProperty(Fa,"camera",{get:function(){return p(this["_GetCamera"]())}});Object.defineProperty(Fa,"cameraMode",{set:function(fb){this["_SetCameraMode"](fb)}});Object.defineProperty(Fa,"cameraTarget",{set:function(gb){this["_SetTarget"](gb.x,gb.y,gb.z)}});Object.defineProperty(Fa,"fieldOfView",{set:function(hb){this["_FieldOfView"](hb)}});Object.defineProperty(Fa,"gis",{get:function(){if(!this._gis){this._gis=r["Gis"]["g_pIns"]}return this._gis}});Object.defineProperty(Fa,"panoramas",{get:function(){if(!this._panoramas){this._panoramas=r["Panoramas"]["g_pIns"]}return this._panoramas}});Object.defineProperty(Fa,"progress",{get:function(){return this["_GetProgress"]()}})};r["Mesh"]=function(ib){ib["SetVertices"]=function(jb,kb){this["m_aVertex"]=this["m_aVertex"]||[];this["m_aVertex"].push({m_pArray:kb,m_nSlot:this["_SlotLut"][jb],m_nItemSize:this["_SizeLut"][jb]})};ib["SetIndices"]=function(lb,mb,nb){this["m_aIndex"]=this["m_aIndex"]||[];this["m_aIndex"][lb]={m_pArray:mb,m_nItemSize:nb}};ib["Apply"]=function(){var ob=this["m_aVertex"];var pb=this["m_aIndex"];if(!ob||!pb){return}var qb=2+2*ob.length+3*pb.length;var rb=this._CreateBuffer(qb);var sb=o["WASM"]["HEAP32"](rb,qb*4);var tb=0;sb[tb++]=ob.length;sb[tb++]=pb.length;for(var ub=0;ub<ob.length;ub++){sb[tb++]=ob[ub].m_nSlot;sb[tb++]=ob[ub].m_pArray.length/ob[ub].m_nItemSize}for(var ub=0;ub<pb.length;ub++){sb[tb++]=0;sb[tb++]=0;sb[tb++]=pb[ub].m_pArray.length}this._CreateBuffer(0);for(var ub=0;ub<ob.length;ub++){var vb=ob[ub].m_pArray;var wb=this._GetVertexBuffer(ub);var xb=o["WASM"]["HEAPF32"](wb,vb.length*4);xb.set(vb)}for(var ub=0;ub<pb.length;ub++){var vb=pb[ub].m_pArray;var wb=this._GetIndexBuffer(ub);var xb=o["WASM"]["HEAP32"](wb,vb.length*4);xb.set(vb)}this._Apply();this["m_aVertex"]=undefined;this["m_aIndex"]=undefined};ib["_SlotLut"]={position:0,normal:1,uv:2,color:3,tangent:4,uv2:9,uv3:10,uv4:11,uv5:12,uv6:13,uv7:14,uv8:15};ib["_SizeLut"]={position:3,normal:3,uv:2,color:4,tangent:4,uv2:2,uv3:2,uv4:2,uv5:2,uv6:2,uv7:2,uv8:2};Object.defineProperty(ib,"position",{set:function(yb){this.SetVertices("position",yb)}});Object.defineProperty(ib,"normal",{set:function(zb){this.SetVertices("normal",zb)}});Object.defineProperty(ib,"uv",{set:function(Ab){this.SetVertices("uv",Ab)}});Object.defineProperty(ib,"triangles",{set:function(Bb){this.SetIndices(0,Bb)}});Object.defineProperty(ib,"material",{set:function(Cb){this.SetMaterial(0,Cb)}});o["Mesh"]=function(){return p(ib._Mesh())}};r["Texture2D"]=function(Db){Db["SetImageData"]=function(Eb){var Fb=this._CreateBuffer(Eb.byteLength);if(Fb){o["WASM"]["HEAPU8"](Fb,Eb.byteLength).set(new Uint8Array(Eb));this._Apply()}};Db["Load"]=function(Gb){var Hb=this;o["Fetch"](Gb,function(Ib){if(Ib){Hb.SetImageData(Ib)}})};o["Texture2D"]=function(Jb){var Kb=p(Db._Texture2D());if(Jb){if("string"===typeof Jb){this.Load(Jb)}else{this.SetImageData(Jb)}}return Kb}};r["Material"]=function(Lb){if("Sisyphus"===o["m_pConfig"]["ENGINE"]){o["ShaderLab"].ExpandMaterial(Lb)}Lb["GetTexture"]=function(){return p(this["_GetTexture"]())};Lb["SetTexture"]=function(Mb){this["_SetTexture"](Mb.m_nObject)};o["Material"]=function(Nb){if(Nb===void 0){Nb=undefined}var Ob=null;if(Nb){var Pb=o["ShaderLab"]["Pipeline"]["InternalShader"];var Qb=Pb[0];Pb[0]=Nb;Ob=p(Lb._Material());Pb[0]=Qb}else{Ob=p(Lb._Material())}return Ob}};r["Tile"]=function(Rb){Object.defineProperty(Rb,"scenes",{get:function(){var Sb=this;return new s(function(Tb){return Sb._IterWork(Tb)})}});Object.defineProperty(Rb,"object3D",{get:function(){if(undefined===this._object3D){var Ub=this._GetObject(this.m_nObject);if(0===Ub){this._object3D=null;return null}this._object3D=p(Ub)}return this._object3D}})};r["Scene"]=function(Vb){Vb["GetLayer"]=function(Wb){return p(this["_GetLayer"](Wb))};Object.defineProperty(Vb,"id",{get:function(){if(!this._id){var Xb=this._GetID(0);var Yb=this._GetID(1);this._id=o["WASM"].GetString(Yb,Xb)}return this._id}});Object.defineProperty(Vb,"layers",{get:function(){var Zb=this;return new s(function($b){return Zb._IterLayer($b)})}});Object.defineProperty(Vb,"object3D",{get:function(){if(undefined===this._object3D){var _b=this._GetObject(this.m_nObject);if(0===_b){this._object3D=null;return null}this._object3D=p(_b)}return this._object3D}});Object.defineProperty(Vb,"viewState",{get:function(){return{m_mTarget:{x:0,y:0,z:0},m_nPitch:45,m_nYaw:0,m_nDistance:60,m_mOrthoTarget:{x:0,y:0,z:0},m_nOrthoScaled:0,m_nOrthoRotate:0}}});Object.defineProperty(Vb,"binding",{get:function(){return p(this._GetBinding())}})};r["Layer"]=function(ac){ac["HighlightRoom"]=function(bc,cc){this["_HighlightRoom"](bc.x,bc.y,bc.z,cc)};Object.defineProperty(ac,"id",{get:function(){if(!this._id){var dc=this._GetID(0);var ec=this._GetID(1);this._id=o["WASM"].GetString(ec,dc)}return this._id}});Object.defineProperty(ac,"sites",{get:function(){var fc=this;return new s(function(gc){return fc._IterSite(gc)})}});Object.defineProperty(ac,"object3D",{get:function(){if(undefined===this._object3D){var hc=this._GetObject(this.m_nObject);if(0===hc){this._object3D=null;return null}this._object3D=p(hc)}return this._object3D}});Object.defineProperty(ac,"decorationObject3D",{get:function(){if(undefined===this._decorationObject3D){var ic=this._GetDecorationObject(this.m_nObject);if(0===ic){this._decorationObject3D=null;return null}this._decorationObject3D=p(ic)}return this._decorationObject3D}});Object.defineProperty(ac,"viewState",{get:function(){var jc=this["_GetViewState"]();if(0<jc){var kc=o["WASM"]["HEAPF32"](jc,4*11);var lc=0;return{m_mTarget:{x:kc[lc++],y:kc[lc++],z:kc[lc++]},m_nPitch:kc[lc++],m_nYaw:kc[lc++],m_nDistance:kc[lc++],m_mOrthoTarget:{x:kc[lc++],y:kc[lc++],z:kc[lc++]},m_nOrthoScaled:kc[lc++],m_nOrthoRotate:kc[lc++]}}return null}})};r["Attachment"]=function(mc){Object.defineProperty(mc,"entityType",{get:function(){return this._GetEntityType()}});Object.defineProperty(mc,"secondType",{get:function(){return this._GetSecondType()}});Object.defineProperty(mc,"flag",{get:function(){return this._GetFlag()}});Object.defineProperty(mc,"object3D",{get:function(){return p(this._GetObject())}});Object.defineProperty(mc,"viewState",{get:function(){var nc=this["_GetViewState"]();if(0<nc){var oc=o["WASM"]["HEAPF32"](nc,4*11);var pc=0;var qc={m_mTarget:{x:oc[pc++],y:oc[pc++],z:oc[pc++]},m_nPitch:oc[pc++],m_nYaw:oc[pc++],m_nDistance:oc[pc++],m_mOrthoTarget:{x:oc[pc++],y:oc[pc++],z:oc[pc++]},m_nOrthoScaled:oc[pc++],m_nOrthoRotate:oc[pc++]};console.log("attachment view:",qc);return qc}else{console.log("attachment view: null")}return null}})};r["Site"]=function(rc){Object.defineProperty(rc,"id",{get:function(){if(!this._id){var sc=this._GetID(0);var tc=this._GetID(1);this._id=o["WASM"].GetString(tc,sc)}return this._id}});Object.defineProperty(rc,"layer",{get:function(){return p(this["_Layer"]())}});Object.defineProperty(rc,"scene",{get:function(){return p(this["_Scene"]())}});Object.defineProperty(rc,"type",{get:function(){return this["_Type"]()}});Object.defineProperty(rc,"number",{get:function(){return this["_Number"]()}});Object.defineProperty(rc,"position",{get:function(){var uc=this["_Position"]()/4;var vc=o["WASM"].HEAPF32();return{x:vc[uc],y:vc[uc+1],z:vc[uc+2]}}})};r["Prefab"]=function(wc){wc["Instantiate"]=function(){return p(this["_Instantiate"]())};o["LoadPrefab"]=function(xc,yc){o["Fetch"](xc,function(zc){var Ac=null;if(zc){var Bc=wc._Prefab();var Cc=p(Bc);var Dc=Cc.CreateBuffer(zc.byteLength);if(Dc){o["WASM"]["HEAPU8"](Dc,zc.byteLength).set(new Uint8Array(zc));Cc.Apply();Ac=Cc}}yc(Ac)})}};r["Gis"]=function(Ec){Ec["Update"]=function(Fc,Gc,Hc){return this["_Update"](Fc,Gc,Hc)};Ec["AddSvetile"]=function(Ic){var Jc=o["WASM"]["EncodeString"](Ic.m_pUrl);var Kc=this["_CreateSvetileDesc"](Jc.byteLength);var Lc=o["WASM"]["HEAPU32"](Kc,4*8);Lc[0]=Ic.m_nID;Lc[1]=Ic.m_nFlags;o["WASM"]["HEAPU8"](Lc[2],Jc.byteLength).set(Jc,0);Lc[3]=0;Lc[4]=o["WASM"]["RegisterDelegate"](function(Nc,Oc){Ic.OnActive(p(Nc),0<Oc)});var Mc=o["WASM"]["HEAPF32"](Kc+20,16);Mc[0]=Ic.m_mLngLat.x;Mc[1]=Ic.m_mLngLat.y;Mc[2]=Ic.m_mSize.x;Mc[3]=Ic.m_mSize.y;this["_AddSvetile"](Kc)};Ec["AddMapbox"]=function(Pc){var Qc=this["_GetMapboxDesc"]();var Rc=o["WASM"]["HEAPF32"](Qc,40);Rc[0]=Pc.m_mOffset.x;Rc[1]=Pc.m_mOffset.y;Rc[2]=Pc.m_mOffset.z;Rc[3]=Pc.m_mScale.x;Rc[4]=Pc.m_mScale.y;Rc[5]=Pc.m_mScale.z;Rc[6]=Pc.m_mLngLat.x;Rc[7]=Pc.m_mLngLat.y;Rc[8]=Pc.m_mSize.x;Rc[9]=Pc.m_mSize.y;this["_AddMapbox"](Qc)};Ec["AddGameObject"]=function(Sc,Tc,Uc,Vc){this["_AddGameObject"](Sc.m_nObject,Tc,Uc,Vc)};Object.defineProperty(Ec,"terrainServer",{set:function(Wc){if(!Wc){Wc="https://t%d.tianditu.gov.cn/DEM/DataServer?T=ele_c&tk=3d26628c3a0e2694fecfbbb983ff7d87&x=%d&y=%d&l=%d"}var Xc=this["_GetServer"](0);o["WASM"].SetString(Xc,Wc)}});Object.defineProperty(Ec,"imageServer",{set:function(Yc){if(!Yc){Yc="http://t%d.tianditu.gov.cn/DataServer?T=img_c&tk=3d26628c3a0e2694fecfbbb983ff7d87&x=%d&y=%d&l=%d"}var Zc=this["_GetServer"](1);o["WASM"].SetString(Zc,Yc)}});Object.defineProperty(Ec,"labelServer",{set:function($c){if(!$c){$c="http://t%d.tianditu.gov.cn/DataServer?T=cia_c&tk=3d26628c3a0e2694fecfbbb983ff7d87&x=%d&y=%d&l=%d"}var _c=this["_GetServer"](2);o["WASM"].SetString(_c,$c)}})};r["Panoramas"]=function(ad){var bd=null;var cd=function(dd){var ed=o["GL"]["ImageCache"];var fd=null;var gd=null;var hd=null;var id=0;var jd=90;var kd=function(qd,rd){var sd=0;var td=qd.m_pPath;var ud=["r","f","l","b","d","u"];var vd=function(xd){if(0===qd.m_nStartLevel){var yd=xd;var zd=ed.CreateImage();var Ad=ed.Get(zd);var Bd=td+"l1_"+ud[yd]+"_01_01.jpg";Ad.crossOrigin="anonymous";Ad.src=Bd;Ad.onload=function(Fd){if(1===qd.m_nState){dd["_SetImage"](yd,0,0,0,zd);if(6===++sd){rd()}}}}else{for(var Cd=0;Cd<2;Cd++){var Dd=function(Gd){var Hd=xd;var Id=1;var Jd=Cd;var Kd=Gd;var Ld=ed.CreateImage();var Md=ed.Get(Ld);var Nd=td+"l"+Id+"_"+ud[Hd]+"_0"+(1+Jd)+"_0"+(2-Kd)+".jpg";Md.crossOrigin="anonymous";Md.src=Nd;Md.onload=function(Od){if(1===qd.m_nState){dd["_SetImage"](Hd,Id,Jd,Kd,Ld);if(24===++sd){rd()}}}};for(var Ed=0;Ed<2;Ed++){Dd(Ed)}}}};for(var wd=0;wd<6;wd++){vd(wd)}};var ld=function(Pd,Qd){bd=Pd;gd=Qd;fd={m_mTarget:{x:Qd.m_mTarget.x,y:Qd.m_mTarget.y,z:Qd.m_mTarget.z},m_nDistance:Qd.m_nDistance,m_nPitch:Qd.m_nPitch,m_nYaw:Qd.m_nYaw,m_nField:Qd.m_nField};Pd.m_nState=1;dd["_Open"](Pd.m_mPosition.x,Pd.m_mPosition.y,Pd.m_mPosition.z,Pd.m_nRadius,Pd.m_nAngle);kd(Pd,function(){od(Pd)})};var md=function(){if(hd){if(jd>id){var Rd=++id/jd;var Sd=gd.m_mTarget;var Td=hd.m_mTarget;var Ud={x:0,y:0,z:0};var Vd=0;var Wd=0;var Xd=0;Ud.x=Sd.x+(Td.x-Sd.x)*Rd;Ud.y=Sd.y+(Td.y-Sd.y)*Rd;Ud.z=Sd.z+(Td.z-Sd.z)*Rd;Vd=gd.m_nDistance+(hd.m_nDistance-gd.m_nDistance)*Rd;Wd=gd.m_nPitch+(hd.m_nPitch-gd.m_nPitch)*Rd;Xd=gd.m_nYaw+(hd.m_nYaw-gd.m_nYaw)*Rd;if(-90>Wd){Wd=180-Wd}if(2===bd.m_nState||5===bd.m_nState){o.Miaokit.fieldOfView=gd.m_nField+(hd.m_nField-gd.m_nField)*Rd}gd.m_pTransform.position={x:0,y:0,z:0};gd.m_pTransform.euler={x:0,y:0,z:0};gd.m_pTransform.Rotate2({x:1,y:0,z:0},Wd,1);gd.m_pTransform.Rotate2({x:0,y:1,z:0},Xd,0);gd.m_pTransform.position=Ud;gd.m_pTransform.Translate(o.Vector3.Scale(-Vd,{x:0,y:0,z:1}),1);if(jd===id){gd.m_mTarget=Ud;gd.m_nDistance=Vd;gd.m_nPitch=Wd;gd.m_nYaw=Xd;gd.m_nField=hd.m_nField;if(2===bd.m_nState){bd.m_nState=3;hd.m_nDistance=0;hd.m_nPitch=0;hd.m_nYaw=0;hd.m_nField=105;id=0;jd=Math.ceil(90/o.App.m_nSensitivity)}else if(3===bd.m_nState){bd.m_nState=4}else if(5===bd.m_nState){bd.m_nState=0;bd=null;fd=null;gd=null;hd=null}}}}};var nd=function(Yd,Zd,$d,_d){if(!bd||4!==bd.m_nState){return}var ae=hd.m_nPitch;var be=hd.m_nYaw;be+=Yd/$d*90;ae-=Zd/_d*90;if(-90>ae){ae=-90}if(90<ae){ae=90}hd.m_nPitch=ae;hd.m_nYaw=be;id=0;jd=1};var od=function(ce){ce.m_nState=2;dd["_SetState"](1);hd={m_mTarget:{x:ce.m_mPosition.x,y:ce.m_mPosition.y,z:ce.m_mPosition.z},m_nDistance:ce.m_nRadius*1.2,m_nPitch:90,m_nYaw:180,m_nField:105};id=0;jd=Math.ceil(90/o.App.m_nSensitivity)};var pd=function(){bd.m_nState=5;dd["_SetState"](0);var de=(gd.m_nYaw-fd.m_nYaw)%360;if(0>de){de+=360}if(180<de){de-=360}gd.m_nYaw=fd.m_nYaw+de;hd={m_mTarget:{x:fd.m_mTarget.x,y:fd.m_mTarget.y,z:fd.m_mTarget.z},m_nDistance:fd.m_nDistance,m_nPitch:fd.m_nPitch,m_nYaw:fd.m_nYaw,m_nField:fd.m_nField};id=0;jd=Math.ceil(60/o.App.m_nSensitivity)};return{Open:ld,Update:md,Rotate:nd,Close:pd}}(ad);ad["Open"]=function(ee,fe){cd.Open(ee,fe)};ad["Update"]=function(){cd.Update()};ad["Rotate"]=function(ge,he,ie,je){cd.Rotate(ge,he,ie,je)};ad["Close"]=function(){cd.Close()};Object.defineProperty(ad,"panor",{get:function(){return bd}})};r["Dioramas3MX"]=function(ke){ke["_Load3MX"]=function(le,me,ne){var oe=this;var pe=oe.m_pFileLut[le];var qe=pe.m_pPath+pe.m_aFile[me];o["Request"]("GET","arraybuffer",qe,null,null,function(re){if(!re){return}var se=new Uint32Array(re,0,2);if(1113083187===se[0]){var te=se[1]>>8;var ue=9+te;var ve=re.byteLength-ue;var we=new Uint8Array(re,9,te);var xe=oe.m_pTextDecoder.decode(we);var ye=JSON.parse(xe);var ze={m_pPath:qe.substring(0,qe.lastIndexOf("/")+1),m_aFile:[]};var Ae=[];var Be=[];var Ce=ye.resources;var De=0;for(var Ee=0;Ee<Ce.length;Ee++){Ae.push(Ee);if("textureBuffer"===Ce[Ee].type){Ae.push(0);Be.push(Ee);if("jpg"===Ce[Ee].format){Ae.push(0)}else if("png"===Ce[Ee].format){Ae.push(1)}else{Ae.push(1e4)}}else if("geometryBuffer"===Ce[Ee].type){Ae.push(1);if("ctm"===Ce[Ee].format){Ae.push(0)}else{Ae.push(1e4)}}else{Ae.push(1e4);Ae.push(1e4)}Ae.push(Ce[Ee].size);Ae.push(De);De+=Ce[Ee].size;Ae.push(1e4);if(Ce[Ee].texture){for(var Fe=0;Fe<Ce.length;Fe++){if(Ce[Ee].texture===Ce[Fe].id){Ae[Ae.length-1]=Fe;break}}}}var Ge=[];var He=ye.nodes;for(var Ee=0;Ee<He.length;Ee++){var Ie=He[Ee];var Je=Ie.bbMax[0]-Ie.bbMin[0];var Ke=Ie.bbMax[1]-Ie.bbMin[1];var Le=Ie.bbMax[2]-Ie.bbMin[2];var Me=Math.sqrt(Je*Je+Ke*Ke+Le*Le);Ge.push(Math.floor(parseInt(Ie.bbMin[0]+Ie.bbMax[0])*.5*100));Ge.push(Math.floor(parseInt(Ie.bbMin[1]+Ie.bbMax[1])*.5*100));Ge.push(Math.floor(parseInt(Ie.bbMin[2]+Ie.bbMax[2])*.5*100));Ge.push(Math.floor(Me*100));Ge.push(Math.floor(Ie.maxScreenDiameter));var Ne=Ie.children?Ie.children.length:0;if(0<Ne){Ge.push(ze.m_aFile.length);for(var Fe=0;Fe<Ne;Fe++){ze.m_aFile.push(Ie.children[Fe])}Ge.push(ze.m_aFile.length)}else{Ge.push(-1);Ge.push(-1)}var Oe=Ie.resources?Ie.resources.length:0;if(0<Oe){Ge.push(Be.length);for(var Fe=0;Fe<Oe;Fe++){for(var Pe=0;Pe<Ce.length;Pe++){if(Ie.resources[Fe]===Ce[Pe].id){Be.push(Pe);break}}}Ge.push(Be.length)}else{Ge.push(-1);Ge.push(-1)}}var Qe=4+9*He.length+6*Be.length;var Re=4*Qe;var Se=Re+ve;var Te=oe["_CreateBuffer"](Se);if(Te){var Ue=o["WASM"]["HEAP32"](Te,Re);Ue[0]=Re;Ue[1]=He.length;Ue[2]=Be.length;Ue[3]=oe.m_pFileLut.length;Ue.set(Ge,4);var Ve=4+Ge.length;for(var Ee=0;Ee<Be.length;Ee++){var We=6*Be[Ee];for(var Fe=0;Fe<6;Fe++){Ue[Ve++]=Ae[We++]}}var Xe=o["WASM"]["HEAPU8"](Te+Re,ve);Xe.set(new Uint8Array(re,ue,ve));oe["_Dispose"](ne)}oe.m_pFileLut.push(ze)}})};ke["Update"]=function(){return this["_Update"]()};ke["Deplanation"]=function(Ye){return this["_Deplanation"](Ye.x,Ye.y,Ye.z)};ke["Recover"]=function(){return this["_Recover"]()};ke["GetHeightMap"]=function(){var Ze=this["_GetHeightMap"]();var $e=o["WASM"]["HEAPF32"](Ze,8);var _e=4*Math.floor($e[0])*Math.floor($e[1]);var af=o["WASM"]["HEAP8"](Ze,_e);return af};Object.defineProperty(ke,"object3D",{get:function(){return p(this["_GetObject"]())}});o["Dioramas3MX"]=function(bf,cf,df){var ef=p(ke._Dioramas3MX());ef.m_pFileLut=[];ef.m_pTextDecoder=new TextDecoder("utf-8");if(df){if(df.m_pGis){df.m_pGis.AddGameObject(ef.object3D,df.m_mLngLat.x,df.m_mLngLat.y,df.m_nHeight);ef.object3D.transform.Translate(df.m_mOffset,1);ef.object3D.transform.Rotate({x:0,y:0,z:0},1)}}o["Request"]("GET","json",bf,null,null,function(ff){ef["m_pMeta"]=ff;var gf={m_pPath:bf.substring(0,bf.lastIndexOf("/")+1),m_aFile:[]};var hf=[0];for(var jf=0;jf<ff.layers.length;jf++){if("meshPyramid"===ff.layers[jf].type){hf.push(jf);hf.push(gf.m_aFile.length);gf.m_aFile.push(ff.layers[jf].root)}}hf[0]=gf.m_aFile.length;var kf=ef["_CreateBuffer"](4*hf.length);var lf=o["WASM"]["HEAP32"](kf,4*hf.length);lf.set(hf);ef["_Initialize"](kf);if(cf){o["Fetch"](cf,function(mf){if(mf){kf=ef["_CreateBuffer"](mf.byteLength);lf=o["WASM"]["HEAP8"](kf,mf.byteLength);lf.set(new Int8Array(mf));ef["_SetHeightMap"](kf)}})}ef.m_pFileLut.push(gf)});return ef}};function t(nf,of,pf){p=of;q=pf;for(var qf=0,rf=nf;qf<rf.length;qf++){var sf=rf[qf];if(sf){var tf=sf.prototype;if(r[tf._type_name]){r[tf._type_name](tf)}if("Miaokit"===tf._type_name){o["Miaokit"]=new sf(0,0)}else if("Gis"===tf._type_name){r["Gis"]["g_pIns"]=new sf(0,0)}else if("Panoramas"===tf._type_name){r["Panoramas"]["g_pIns"]=new sf(0,0)}}}}o["WASM"]=o["WASM"]||{};o["WASM"]["LoadClass"]=t;return[]});MiaokitMerge(function(uf){uf["m_pLogo"]=null;var vf=undefined;var wf=false;var xf=false;function yf(){uf["Track"]("Preload");uf["Request"]("GET","json",uf["m_pConfigPath"],null,null,function(Bf){if(!Bf){uf["Track"]("配置文件错误！",3);return}uf["m_pConfig"]=Bf;uf["Fetch"](Bf.MODULE,function(Ef){if(vf){vf(Ef)}else{vf=Ef}});if(Bf.SVE){var Cf=function(Ff){var Gf=Bf.SVE[Ff];Gf.m_pData=null;Gf.m_pTile=null;if(true===Gf.m_bPreload){uf["Fetch"](Gf.m_pProject,function(Hf){Gf.m_pData=Hf;if(xf&&Hf){Gf.m_pTile=uf["Miaokit"]["LoadTile"](Gf.m_pData);Gf.m_pData=null;uf["App"]["ActiveTile"](Gf)}})}};for(var Df=0;Df<Bf.SVE.length;Df++){Cf(Df)}}if(uf["App"]&&uf["App"].m_pProject){uf["App"]["Preload"]()}else{wf=true}})}function zf(If,Jf){uf["Track"]("LoadEngine");if(wf){uf["App"]["Preload"]();wf=false}uf["WASM"]["LoadEngine"]({OnEngineLoad:function(Kf){uf["Track"]("LoadEngine End");if(vf){uf["Track"]("LoadMiaokit");uf["WASM"]["LoadMiaokit"](vf,Kf,function(){If();xf=true;Af()})}else{uf["Track"]("LoadMiaokit Delay");vf=function(Lf){uf["Track"]("LoadMiaokit");uf["WASM"]["LoadMiaokit"](Lf,Kf,function(){If();xf=true;Af()})}}},OnRenderingEvent:function(Mf){if(xf){Jf(Mf)}}})}function Af(){uf["Track"]("LoadMiaokit End");var Nf=uf["m_pConfig"]["SVE"];if(Nf){for(var Of=0,Pf=Nf;Of<Pf.length;Of++){var Qf=Pf[Of];if(true===Qf.m_bPreload){if(null===Qf.m_pTile&&null!==Qf.m_pData){Qf.m_pTile=uf["Miaokit"]["LoadTile"](Qf.m_pData);Qf.m_pData=null;uf["App"]["ActiveTile"](Qf)}}}}}yf["_name"]="Preload";zf["_name"]="Load";return[yf,zf]});MiaokitMerge(function(Rf){var Sf=function(){function Uf(){}Uf.Clamp=function(Vf,Wf,Xf){if(Vf>Xf){return Xf}if(Vf<Wf){return Wf}return Vf};return Uf}();var Tf=function(){function Yf(Zf,$f,_f){this.x=0;this.y=0;this.z=0;this.x=Zf;this.y=$f;this.z=_f}Yf.Scale=function(ag,bg){return{x:bg.x*ag,y:bg.y*ag,z:bg.z*ag}};return Yf}();Sf["_name"]="Mathf";Tf["_name"]="Vector3";return[Sf,Tf]});MiaokitMerge(function(cg){var dg=null;var eg=null;var fg=null;var gg=[null];var hg=null;var ig=[null];var jg=1;var kg=0;var lg=[undefined];var mg=null;var ng=null;function og(yg){yg["isnanf"]=isNaN;yg["isinff"]=isFinite;yg["powf"]=Math.pow;yg["sqrtf"]=Math.sqrt;yg["expf"]=Math.exp;yg["logf"]=Math.log;yg["floorf"]=Math.floor;yg["ceilf"]=Math.ceil;yg["sinf"]=Math.sin;yg["cosf"]=Math.cos;yg["tanf"]=Math.tan;yg["asinf"]=Math.asin;yg["acosf"]=Math.acos;yg["atanf"]=Math.atan;yg["atan2f"]=Math.atan2;yg["ldexpf"]=function(zg,Ag){return zg*Math.pow(2,Ag)}}function pg(Bg){function Cg(Mg){var Ng=cg["WASM"].GetString(Mg);if(!Ng.startsWith("http")){Ng="./data/projects/sve/"+Ng}if(Ng.endsWith("assetbundle")){Ng+=".bin"}return Ng}function Dg(Og,Pg,Qg,Rg,Sg){var Tg=Cg(Og);var Ug=dg.get(Qg);var Vg=dg.get(Rg);cg["Fetch"](Tg,function(Wg){if(Wg){var Xg=Ug(Pg,Wg.byteLength,Sg);if(Xg){cg["WASM"]["HEAPU8"](Xg,Wg.byteLength).set(new Uint8Array(Wg))}}else{console.error("资源丢失:",Tg)}Vg(Pg,Sg)})}function Eg(Yg,Zg,$g,_g,ah){var bh=Cg(Yg);var ch=dg.get($g);var dh=hg.CreateImage();var eh=hg.Get(dh);eh.crossOrigin="anonymous";eh.src=bh;eh.onload=function(fh){ch(Zg,dh,ah)}}function Fg(gh,hh,ih,jh,kh){Dg(gh,hh,ih,jh,kh)}function Gg(lh,mh,nh,oh,ph){mg["LoadTerrain"](lh,mh,nh,oh,ph)}function Hg(qh,rh,sh,th,uh){var vh=cg["WASM"]["HEAP32"](qh,16);mg["LoadBlockbox"](rh,vh[0],vh[1],vh[2],vh[3],sh,th)}function Ig(wh,xh){var yh=cg["WASM"]["HEAP32"](wh,12);mg["Load3MX"](yh[0],yh[1],yh[2],xh)}function Jg(zh,Ah,Bh,Ch,Dh){Dg(zh,Ah,Bh,Ch,Dh)}function Kg(Eh,Fh,Gh,Hh){var Ih=dg.get(Hh);var Jh=cg["WASM"]["HEAP8"](Gh,Fh);var Kh=new Blob([Jh]);var Lh=window.URL.createObjectURL(Kh);var Mh=hg.CreateImage();var Nh=hg.Get(Mh);Nh.src=Lh;Nh.onload=function(Oh){Ih(Eh,Mh);window.URL.revokeObjectURL(Lh)}}var Lg=[undefined,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg];Bg["APP_LOAD"]=function(Ph,Qh,Rh,Sh,Th,Uh){Lg[Ph](Qh,Rh,Sh,Th,Uh)}}function qg(Vh){var Wh={NaN:NaN,Infinity:Infinity};og(Vh);pg(Vh);Vh["APP_DYNAMIC_LINK"]=function(Xh,Yh){var Zh=cg["WASM"]["HEAPU32"](Xh,Yh);var $h=Zh[0];var _h=Zh[1];for(var ai=0;ai<$h;ai++){var bi=Zh[2+ai]-1;var ci=Zh[_h++];var di=Zh[_h++];var ei=cg["WASM"].GetString(ci,di);var fi=JSON.parse(ei);var gi=function(ki,li){this["m_nID"]=ki;this["m_nObject"]=li};var hi=gi.prototype;hi["_type_name"]=fi[0];hi["_type_id"]=ai+1;hi["_ins_count"]=0;lg[ai+1]=gi;var ii=function(mi){var ni=dg.get(Zh[_h++]);_h++;var oi=function(){var pi=Array.prototype.slice.call(arguments);pi.unshift(this.m_nObject);return ni.apply(this,pi)};if(0===mi){hi["_"+fi[mi]]=oi}else{hi[fi[mi]]=oi}};for(var ji=0;ji<bi;ji++){ii(ji)}}cg["WASM"]["LoadClass"](lg,sg,vg);cg["Miaokit"]["ResizeCavans"]=function(qi,ri){if(fg.SE_RESIZE){fg.SE_RESIZE(qi,ri)}}};Vh["APP_PRINT"]=function(si,ti,ui){var vi=cg["WASM"].GetString(si,ti);cg["Track"](vi,ui)};Vh["APP_DO_ACTION"]=function(wi,xi,yi,zi){gg[wi](xi,yi,zi)};Vh["APP_CREATE_OBJ"]=function(Ai,Bi){var Ci=tg();var Di=new lg[Ai](Ci,Bi);ig[Ci]=Di;lg[Ai].prototype._ins_count++;return Ci};Vh["APP_FREE_OBJ"]=function(Ei){var Fi=ig[Ei];lg[Fi._type_id].prototype._ins_count--;ug(Ei)};ng=cg["ShaderLab"].APP_DO_OPERATORS;ng[7]=function(Gi,Hi){if(0===Gi){hg.FreeImage(Hi)}else if(1===Gi){hg.FreeBuffer(Hi)}return 0};Vh["APP_DO"]=function(Ii,Ji,Ki,Li,Mi){return ng[Ii](Ji,Ki,Li,Mi)};eg=Vh["memory"];cg["WASM"]["m_pMemory"]=cg["WASM"]["m_pMemory"]||eg;return{env:Vh,global:Wh}}function rg(Ni,Oi,Pi){hg=cg["GL"]["ImageCache"];Oi=qg(Oi);WebAssembly.instantiate(Ni,Oi).then(function(Qi){return Qi.instance}).then(function(Ri){fg=Ri.exports;dg=fg.__indirect_function_table;cg["WASM"]["Update"]=Ri.exports.SE_UPDATE;cg["WASM"]["Malloc"]=Ri.exports.Malloc;cg["WASM"]["Free"]=Ri.exports.Free;cg["ShaderLab"]["DrawPass_"]=Ri.exports.SE_DRAW_PASS;cg["ShaderLab"]["SetSunlight"]=Ri.exports.SE_SUNLIGHT;cg["ShaderLab"]["CreateUniformsDesc"]=Ri.exports.SE_CREATE_UNIFORMS_DESC;cg["ShaderLab"]["GetTexture"]=function(Si){return fg.SE_RESOURCE(9,Si)};cg["ShaderLab"]["GetObject"]=function(Ti){var Ui=fg.SE_RESOURCE(13,Ti);if(Ui){return sg(Ui)}return null};cg["Track"]("Start thread");cg["WASM"]["Worker"]=xg(function(){cg["Track"]("Start thread succeed")});fg.Start();Pi()})}function sg(Vi){return ig[Vi]}function tg(){var Wi=jg;if(ig.length>jg){jg=ig[jg]}else{jg++}kg++;return Wi}function ug(Xi){ig[Xi]=jg;jg=Xi;kg--}function vg(Yi){var Zi="'系统运行':{";Zi+="'时间':"+(cg.Time()/1e3).toFixed(0);Zi+=", '帧率':"+Yi;Zi+=", 'WASM内存':"+cg.WASM.m_pMemory.buffer.byteLength/1024/1024;Zi+="}";var $i="'JS对象':{";$i+="'工厂':["+ig.length+", "+kg+", "+(ig.length-kg)+"]";$i+=hg.Analyze();for(var _i=1;_i<lg.length;_i++){$i+=", '"+lg[_i].prototype._type_name+"':"+lg[_i].prototype._ins_count}$i+="}";return[Zi,$i]}function wg(aj){var bj=gg.length;gg.push(aj);return bj}function xg(cj){var dj=fg.UTIL_WORKER_CODE();var ej=cg["WASM"]["HEAPU32"](dj,16);if(false){mg=new Worker(window.URL.createObjectURL(new Blob([cg["WASM"]["HEAPU8"](ej[2],ej[3])])));var fj=cg["WASM"]["HEAPU8"]().slice(ej[0],ej[0]+ej[1]);var gj=fj.buffer;mg.postMessage({m_nID:1,m_aCode:gj},[gj])}else{var hj=cg["m_pConfig"]["MODULE"].replace(".wasm","");mg=new Worker(hj+"Worker.min.js");fetch(hj+"Worker.wasm").then(function(ij){return ij.arrayBuffer()}).then(function(jj){if(jj){mg.postMessage({m_nID:1,m_aCode:jj},[jj])}else{console.error("fetch error: ./js/Miaokit/MiaokitWorker.wasm",jj)}}).catch(function(kj){console.error("fetch error: ./js/Miaokit/MiaokitWorker.wasm",kj)})}mg.onmessage=function(lj){var mj=lj.data;switch(mj.m_nID){case 1:cj();cj=null;break;case 2:mg["OnLoadTerrain"](mj);break;case 3:mg["OnLoadBlockbox"](mj);break;case 4:mg["OnLoad3MX"](mj);break;default:console.error("子线程消息异常:",mj);break}};mg["LoadTerrain"]=function(nj,oj,pj,qj,rj){mg.postMessage({m_nID:2,m_pPath:cg["WASM"].GetString(nj),m_nRequest:oj,m_nCallback:pj,m_nTS:rj})};mg["OnLoadTerrain"]=function(sj){var tj=dg.get(sj.m_nCallback);var uj=sj.m_pData;var vj=0;if(uj){vj=hg.PushBuffer(uj)}else{console.warn("Terrain miss:",sj.m_pPath)}tj(sj.m_nRequest,vj,sj.m_nTS)};mg["LoadBlockbox"]=function wj(xj,yj,zj,Aj,Bj,Cj,Dj){mg.postMessage({m_nID:3,m_nRequest:xj,m_nCol:yj,m_nRow:zj,m_nColOffset:Aj,m_nRowOffset:Bj,m_nAlloc:Cj,m_nCallback:Dj})};mg["OnLoadBlockbox"]=function(Ej){var Fj=dg.get(Ej.m_nAlloc);var Gj=dg.get(Ej.m_nCallback);var Hj=Ej.m_pData;var Ij=[0,0,0,0];for(var Jj=0;Jj<4;Jj++){var Kj=Hj[Jj];if(0<Kj.m_nVertexCount&&0<Kj.m_nSubmeshCount){var Lj=new cg.Mesh;var Mj=new Int32Array(Kj.m_aIndex);Lj.position=new Float32Array(Kj.m_aPosition);Lj.normal=new Float32Array(Kj.m_aNormal);Lj.uv=new Float32Array(Kj.m_aUV);for(var Nj=0;Nj<Kj.m_nSubmeshCount;Nj++){var Oj=Mj[2*Nj];var Pj=Mj[2*Nj+1];var Qj=[];for(var Rj=Oj;Rj<Pj;Rj++){Qj.push(Rj)}Lj.SetIndices(Nj,new Int32Array(Qj),4)}Lj.Apply();Ij[Jj]=Lj.m_nObject}else{Ij[Jj]=0}}var Sj=Fj(Ej.m_nRequest,16);if(Sj){cg["WASM"]["HEAPU32"](Sj,16).set(new Uint32Array(Ij));Gj(Ej.m_nRequest)}};mg["Load3MX"]=function(Tj,Uj,Vj,Wj){var Xj=sg(Tj);if(Xj){var Yj=Xj.m_pFileLut[Uj];var Zj=Yj.m_pPath+Yj.m_aFile[Vj];var $j=Xj.m_pFileLut.length;Xj.m_pFileLut.push(null);mg.postMessage({m_nID:4,m_nDior:Tj,m_pPath:Zj,m_nRequest:Wj,m_nNewFolder:$j})}};mg["OnLoad3MX"]=function(_j){var ak=_j.m_pData;if(ak){var bk=sg(_j.m_nDior);if(bk){bk.m_pFileLut[_j.m_nNewFolder]=_j.m_pNewFolder;var ck=new Int32Array(ak[0]);var dk=ck[1];var ek=ck[2];var fk=4+9*dk;var gk=0;var hk=[];var ik=function(){if(ek===++gk||0==ek){var lk=ak[0].byteLength;var mk=bk["_CreateBuffer"](lk);var nk=cg["WASM"]["HEAP32"](mk,lk);nk.set(ck);bk["_Dispose"](_j.m_nRequest)}};var jk=function(ok){var pk=ck[fk+0];var qk=ck[fk+1];if(0===qk){var rk=ak[1+ok];if(null!==rk){var sk=hg.CreateImage();var tk=hg.Get(sk);var uk=new Blob([new Int8Array(rk)]);var vk=window.URL.createObjectURL(uk);tk.src=vk;tk.onload=function(zk){ik();window.URL.revokeObjectURL(vk)};hk[pk]=fg["SE_CREATE_INTERNAL_TEXTURE"]();ck[fk+3]=hk[pk];ck[fk+4]=sk}else{hk[pk]=0;ck[fk+3]=hk[pk];ck[fk+4]=0;ik()}}else if(1===qk){ck[fk+4]=hk[ck[fk+5]];var rk=ak[1+ok];if(null!==rk){var wk=rk.byteLength;var xk=bk["_CreateBuffer"](wk);var yk=cg["WASM"]["HEAP8"](xk,wk);yk.set(new Int8Array(rk));bk["_MarkBuilding"](xk);hk[pk]=fg["SE_CREATE_INTERNAL_MESH"](0,xk);ck[fk+3]=hk[pk];ik()}else{hk[pk]=0;ck[fk+3]=hk[pk];ik()}}else{hk[pk]=0;ck[fk+3]=hk[pk];ck[fk+4]=0;ik()}fk+=6};for(var kk=0;kk<ek;kk++){jk(kk)}if(0===ek){ik()}}}else{console.warn("3mx miss:",_j.m_pPath)}};return mg}cg["WASM"]=cg["WASM"]||{};cg["WASM"]["LoadMiaokit"]=rg;cg["WASM"]["GetObject"]=sg;cg["WASM"]["RegisterDelegate"]=wg;return[]});MiaokitMerge(function(Ak){var Bk=null;var Ck=null;var Dk=null;var Ek=null;var Fk=null;var Gk=null;var Hk=null;var Ik=null;var Jk=null;var Kk=null;var Lk=null;var Mk=null;var Nk=null;var Ok=null;var Pk=null;var Qk=null;var Rk=0;var Sk=function(){var Uk=Ak.m_pConfig.WEBGL;var Vk=Ak.m_pConfig.QUALITY;if(0===Vk){Dk="\n                #define LOW_QUALITY\n            ";Ek="\n                #define LOW_QUALITY\n            "}else if(1===Vk){Dk="\n                #define MEDIUM_QUALITY\n            ";Ek="\n                #define MEDIUM_QUALITY\n            "}else{Dk="\n                #define HIGH_QUALITY\n            ";Ek="\n                #define HIGH_QUALITY\n            "}if(1===Uk){Bk="\n                precision highp float;\n                precision mediump sampler2D;\n\n                uniform lowp vec4 u_Sunlight;\n                uniform lowp vec4 u_Picker;\n                uniform lowp vec4 u_EyePos;\n                uniform lowp vec4 u_Mark;\n                uniform highp mat4 u_MatG;\n                uniform highp mat4 u_MatVP;\n            ";Ck="\n                precision highp float;\n                precision mediump sampler2D;\n\n                uniform lowp vec4 u_Sunlight;\n                uniform lowp vec4 u_Picker;\n                uniform lowp vec4 u_EyePos;\n                uniform lowp vec4 u_Mark;\n                uniform highp mat4 u_MatG;\n                uniform highp mat4 u_MatVP;\n            "}else{Bk="#version 300 es\n                #define attribute in\n                #define varying out\n                #define texture2D texture\n\n                precision highp float;\n                precision mediump sampler2D;\n\n                uniform CommonBlock\n                {\n                    lowp vec4 u_Sunlight;\n                    lowp vec4 u_Picker;\n                    lowp vec4 u_EyePos;\n                    lowp vec4 u_Mark;\n                    highp mat4 u_MatG;\n                    highp mat4 u_MatVP;\n                };\n            ";Ck="#version 300 es\n                #define varying in\n                #define texture2D texture\n                #define gl_FragColor FragColor\n\n                precision highp float;\n                precision mediump sampler2D;\n\n                uniform CommonBlock\n                {\n                    lowp vec4 u_Sunlight;\n                    lowp vec4 u_Picker;\n                    lowp vec4 u_EyePos;\n                    lowp vec4 u_Mark;\n                    highp mat4 u_MatG;\n                    highp mat4 u_MatVP;\n                };\n\n                out vec4 FragColor;\n            "}Rk=Vk;return{DeclareVS:Bk+Dk+Fk,DeclareFS:Ck+Ek+Gk,ClearVS:Hk,ClearFS:Ik,RenderVS:Jk,RenderFS:Kk,PostprocessVS:Lk,PostprocessFS:Mk,ATOM_VS:Ok,ATOM_FS:Pk,BRDF_VS:"",BRDF_FS:Nk}};var Tk={_name:"Shader",GetSourceCode:function(Wk){if(!Qk){Qk=Sk()}var Xk=Tk[Wk];var Yk="";var Zk="";if(Xk.include){var $k=Xk.include[Rk];if($k){for(var _k=0,al=$k;_k<al.length;_k++){var bl=al[_k];Yk+=Qk[bl+"_VS"];Zk+=Qk[bl+"_FS"]}}}return[Qk["DeclareVS"]+Yk+Xk.vs_src+Qk[Xk.type+"VS"],Qk["DeclareFS"]+Zk+Xk.fs_src+Qk[Xk.type+"FS"]]}};Fk="\nattribute mediump vec3 a_Position;\nattribute mediump vec3 a_Normal;\nattribute mediump vec2 a_UV;\nattribute mediump vec4 a_Color;\nattribute mediump vec4 a_Tangent;\nattribute mediump vec4 a_Object;\nattribute highp mat4 a_MatW;\n\nvarying vec4 v_Object;\n\n/// ����ռ�����ת����ռ�����\nvec3 ObjectToWorldPos(vec3 i_Position)\n{\n    return (a_MatW * vec4(i_Position, 1.0)).xyz;\n}\n\n/// ����ռ�����ת�ü��ռ�����\nvec4 ObjectToClipPos(vec3 i_Position)\n{\n    // GIS�ı任����ֵ������ת��Ϣ��δ����λ����Ϣ�����⾫�Ȳ�����ɻ��涶��\n    // return u_MatVP * u_MatG * a_MatW * vec4(i_Position, 1.0);\n    \n    vec4 mPosition = vec4(i_Position, 1.0);\n    mPosition = u_MatG * a_MatW * mPosition;\n    mPosition.y = mPosition.y - 6378137.0;\n\n    return u_MatVP * mPosition;\n}\n\n/// ����ռ䷨��ת����ռ䷨��\nvec3 ObjectToWorldNormal(vec3 i_Normal)\n{\n    return normalize((u_MatG * a_MatW * vec4(i_Normal, 0.0)).xyz);\n}";Gk="\nuniform sampler2D u_MainTex;\nvarying vec4 v_Object;\n\n/// ����2D����\nvec4 Tex2D(sampler2D i_Tex, vec2 i_UV)\n{\n    i_UV.x = fract(i_UV.x);\n    i_UV.y = fract(1.0 - i_UV.y);\n\n    return texture2D(i_Tex, i_UV);\n}";Hk="\nvoid main()\n{\n    gl_Position = vs();\n}";Ik="\nvoid main()\n{\n    gl_FragColor = fs();\n}";Jk="\nvoid main()\n{\n    v_Object = a_Object;\n    \n    gl_Position = vs();\n}";Kk="\nvoid main()\n{\n    gl_FragColor = fs();\n    \n    float nAlpha = u_Mark.x;\n    \n    // ��͸�������https://zhuanlan.zhihu.com/p/49164063\n    if(0.01 < nAlpha)\n    {\n        // ���Σ�0-��͸����1-ȫ͸����Ĭ��ֵ0��׷��0.3��͸����\n        nAlpha = 0.3 + 0.7 * v_Object.b;\n        \n        // Gͨ������ɫ�Ҷ��ۼӡ�����֧�ֲ�ɫ͸����\n        gl_FragColor.g = dot(gl_FragColor.rgb, vec3(0.299, 0.587, 0.114));\n        // Rͨ������ϴ����ۼӣ���ֵ1.0����ֵ0.99��Ǹ�������\n        gl_FragColor.r = 1.0 - (0.01 * v_Object.a);        \n        // Bͨ����OPACITY�ۼ�\n        gl_FragColor.b = 1.0 - nAlpha;\n        gl_FragColor.g *= gl_FragColor.b;\n        // Aͨ����ALPHA�۳ˡ���ϣ�Դ����Ϊ0��Ŀ�����Դ\n        gl_FragColor.a = 1.0 - gl_FragColor.b;\n    }\n    // ��͸�����\n    else\n    {\n        // ����������\n        gl_FragColor.a = 1.0 - (0.01 * v_Object.a);\n    }\n}";Lk="\nvoid main()\n{\n    gl_Position = vs();\n}";Mk="\nvoid main()\n{\n    gl_FragColor = fs();\n}";Nk='\nconst float PI = 3.14159265358979323846;\n\nconst vec3 baseColor = vec3(0.5, 0.5, 0.5);\nconst float metallic = 0.0;\nconst float subsurface = 0.5; // 0.0\nconst float specular = 0.2;\nconst float roughness = 0.7; //0.5;\nconst float specularTint = 0.0;\nconst float anisotropic = 0.0;\nconst float sheen = 0.0;\nconst float sheenTint = 0.5;\nconst float clearcoat = 0.0;\nconst float clearcoatGloss = 1.0;\n\nfloat sqr(float x) { return x * x; }\n\nfloat SchlickFresnel(float u)\n{\n\tfloat m = clamp(1.0 - u, 0.0, 1.0);\n\tfloat m2 = m * m;\n\treturn m2 * m2 * m; // pow(m,5)\n}\n\nfloat GTR1(float NdotH, float a)\n{\n\tif (a >= 1.0) return 1.0 / PI;\n\tfloat a2 = a * a;\n\tfloat t = 1.0 + (a2 - 1.0) * NdotH * NdotH;\n\treturn (a2 - 1.0) / (PI * log(a2) * t);\n}\n\nfloat GTR2(float NdotH, float a)\n{\n\tfloat a2 = a * a;\n\tfloat t = 1.0 + (a2 - 1.0) * NdotH * NdotH;\n\treturn a2 / (PI * t * t);\n}\n\nfloat GTR2_aniso(float NdotH, float HdotX, float HdotY, float ax, float ay)\n{\n\treturn 1.0 / (PI * ax * ay * sqr(sqr(HdotX / ax) + sqr(HdotY / ay) + NdotH * NdotH));\n}\n\nfloat smithG_GGX(float NdotV, float alphaG)\n{\n\tfloat a = alphaG * alphaG;\n\tfloat b = NdotV * NdotV;\n\treturn 1.0 / (NdotV + sqrt(a + b - a * b));\n}\n\nfloat smithG_GGX_aniso(float NdotV, float VdotX, float VdotY, float ax, float ay)\n{\n\treturn 1.0 / (NdotV + sqrt(sqr(VdotX * ax) + sqr(VdotY * ay) + sqr(NdotV)));\n}\n\nvec3 mon2lin(vec3 x)\n{\n\treturn vec3(pow(x[0], 2.2), pow(x[1], 2.2), pow(x[2], 2.2));\n}\n\nvec3 BRDF(vec3 L, vec3 V, vec3 N, vec3 X, vec3 Y)\n{\n    //x��y����ֱ��ʾ�˱�����������͸�������������\n    //https://www.cnblogs.com/starfallen/p/3572352.html\n\n\tfloat NdotL = dot(N, L);\n\tfloat NdotV = dot(N, V);\n\tif (NdotL < 0.0 || NdotV < 0.0) return vec3(0.0);\n\n\tvec3 H = normalize(L + V);\n\tfloat NdotH = dot(N, H);\n\tfloat LdotH = dot(L, H);\n\n\tvec3 Cdlin = mon2lin(baseColor);\n\tfloat Cdlum = 0.3 * Cdlin[0] + 0.6 * Cdlin[1] + 0.1 * Cdlin[2]; // luminance approx.\n\n\tvec3 Ctint = Cdlum > 0.0 ? Cdlin / Cdlum : vec3(1.0); // normalize lum. to isolate hue+sat\n\tvec3 Cspec0 = mix(specular * 0.08 * mix(vec3(1.0), Ctint, specularTint), Cdlin, metallic);\n\tvec3 Csheen = mix(vec3(1.0), Ctint, sheenTint);\n\n\t// Diffuse fresnel - go from 1 at normal incidence to .5 at grazing\n\t// and mix in diffuse retro-reflection based on roughness\n\tfloat FL = SchlickFresnel(NdotL), FV = SchlickFresnel(NdotV);\n\tfloat Fd90 = 0.5 + 2.0 * LdotH * LdotH * roughness;\n\tfloat Fd = mix(1.0, Fd90, FL) * mix(1.0, Fd90, FV);\n\n\t// Based on Hanrahan-Krueger brdf approximation of isotropic bssrdf\n\t// 1.25 scale is used to (roughly) preserve albedo\n\t// Fss90 used to "flatten" retroreflection based on roughness\n\tfloat Fss90 = LdotH * LdotH * roughness;\n\tfloat Fss = mix(1.0, Fss90, FL) * mix(1.0, Fss90, FV);\n\tfloat ss = 1.25 * (Fss * (1.0 / (NdotL + NdotV) - 0.5) + 0.5);\n\n\t// specular\n\tfloat aspect = sqrt(1.0 - anisotropic * 0.9);\n\tfloat ax = max(0.001, sqr(roughness) / aspect);\n\tfloat ay = max(0.001, sqr(roughness) * aspect);\n\tfloat Ds = GTR2_aniso(NdotH, dot(H, X), dot(H, Y), ax, ay);\n\tfloat FH = SchlickFresnel(LdotH);\n\tvec3 Fs = mix(Cspec0, vec3(1.0), FH);\n\tfloat Gs;\n\tGs = smithG_GGX_aniso(NdotL, dot(L, X), dot(L, Y), ax, ay);\n\tGs *= smithG_GGX_aniso(NdotV, dot(V, X), dot(V, Y), ax, ay);\n\n\t// sheen\n\tvec3 Fsheen = FH * sheen * Csheen;\n\n\t// clearcoat (ior = 1.5 -> F0 = 0.04)\n\tfloat Dr = GTR1(NdotH, mix(0.1, 0.001, clearcoatGloss));\n\tfloat Fr = mix(0.04, 1.0, FH);\n\tfloat Gr = smithG_GGX(NdotL, 0.25) * smithG_GGX(NdotV, 0.25);\n\n\treturn ((1.0 / PI) * mix(Fd, ss, subsurface) * Cdlin + Fsheen) * (1.0 - metallic) + Gs * Fs * Ds + 0.25 * clearcoat * Gr * Fr * Dr;\n}';Ok="\nvarying vec4 v_ViewDir;\nvarying vec4 v_Scattering;\nvarying vec4 v_Attenuate;\n\n//P and ray define the line; O is the sphere's center point\nvec3 CalculateIntersection(vec3 P, vec3 ray, vec3 O, float r)\n{\n\tvec3 PO = O - P;\n\tfloat lPO = length(PO);\n\tfloat B = 2.0 * dot(PO, ray);\n\n\tfloat C = B * B - 4.0 * (lPO * lPO - r * r);\n\tfloat det = sqrt(max(0.0, C));\n\n\tfloat d = 0.5*(B-det);\n\tvec3 intersect = P + d * ray;\n\n\treturn intersect;\n}\n\nvoid Atmosphere(vec3 mLightDir, vec3 mWorldPos)\n{\n    // ����ɢ�䣬���Ӧ�����㣬�����Ӧ�����ڲ�֮�⣬��������Ϊ���뾶���ڲ�뾶�����뾶ӦԶ�����ڲ�뾶\n    //650 nm for red; 570 nm for green; 475 nm for blue\n    vec3 _Wave = vec3(5.602046, 9.473285, 20.49314);\n    vec3 _ESun = vec3(20.0, 20.0, 20.0);\n    vec3 _PlanetPos = vec3(0.0, -6378137.0, 0.0);\n    float _Sealevel = 6378137.0;\n    float _OuterRadius = 6478137.0;\n    float _SampleNum = 5.0;\n    //Rayleigh scattering constant\n    float _Kr = 0.0025;\n    //Mie scattering constant\n    float _Km = 0.001;\n    //the altitude at which the atmosphere's average density is found\n    float _H0 = 0.25;\n\n    vec3 mRay = mWorldPos - u_EyePos.xyz;\n    float nDepth = length(mRay); mRay = mRay / nDepth;\n\n    float nSampleLength = nDepth / _SampleNum;\n    vec3 mSampleRay = mRay * nSampleLength;\n    vec3 mSamplePoint = u_EyePos.xyz + mSampleRay * 0.5;\n    vec3 mInScattering = vec3(0.0, 0.0, 0.0);\n    vec3 mOutScatteringAB = vec3(0.0, 0.0, 0.0);\n    vec3 mOutGroundScatteringAB = vec3(0.0, 0.0, 0.0);\n    float nInvOuterH = 1.0 / (_OuterRadius-_Sealevel);\n\n    for(int i=0; i</*_SampleNum*/5; i++)\n    {\n\t    vec3 mCrossPoint = CalculateIntersection(mSamplePoint, -mLightDir, _PlanetPos, _OuterRadius);\n\t    //AP out scattering\n\t    vec3 mAPRay = (mSamplePoint - u_EyePos.xyz) / _SampleNum;\n\t    float nAPRayLength = length(mAPRay);\n\t    vec3 mSampleAP = u_EyePos.xyz + mAPRay * 0.5;\n\t    vec3 mOutScatteringAP = vec3(0.0, 0.0, 0.0);\n\n\t    for(int m=0; m</*_SampleNum*/5; m++)\n\t    {\n\t\t    mOutScatteringAP += exp(-(length(mSampleAP - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nAPRayLength * nInvOuterH;\n\t\t    mSampleAP += mAPRay;\n\t    }\n\t    mOutScatteringAP = 4.0 * 3.14 * (_Km + _Kr * _Wave) * mOutScatteringAP;\n\n\t    //PC out scattering\n\t    vec3 mPCRay = (mCrossPoint - mSamplePoint) / _SampleNum;\n\t    float nPCRayLength = length(mPCRay);\n\t    vec3 mSamplePC = mSamplePoint + mPCRay*0.5;\n\t    vec3 mOutScatteringPC = vec3(0.0, 0.0, 0.0);\n\n\t    for(int n=0; n</*_SampleNum*/5; n++)\n\t    {\n\t\t    mOutScatteringPC += exp(-(length(mSamplePC - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nPCRayLength * nInvOuterH;\n\t\t    mSamplePC += mPCRay;\n\t    }\n\t    mOutScatteringPC = 4.0 * 3.14 * (_Km + _Kr * _Wave) * mOutScatteringPC;\n\n\t    mInScattering += exp(-(length(mSamplePoint - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nSampleLength * nInvOuterH * exp(-mOutScatteringAP - mOutScatteringPC);\n\t    mSamplePoint+=mSampleRay;\n\t    mOutScatteringAB = mCrossPoint;\n        mOutGroundScatteringAB = mOutScatteringAP + mOutScatteringPC;\n    }\n\n    vec3 mAttenuateGround = exp(-mOutGroundScatteringAB);\n\n    v_ViewDir.xyz = u_EyePos.xyz - mWorldPos;\n    v_Scattering.xyz = mInScattering * _ESun * _Kr * _Wave;\n    v_Attenuate.xyz = mInScattering * _ESun * _Km;\n\n    v_ViewDir.w = mAttenuateGround.x;\n    v_Scattering.w = mAttenuateGround.y;\n    v_Attenuate.w = mAttenuateGround.z;\n\n    //Ground : v_ScatteringR = v_Scattering; v_ScatteringM = v_Attenuate; v_Attenuate = v_AttenuateGround;\n    //v_ViewDir = u_EyePos.xyz - mWorldPos;\n    //v_ScatteringR = mInScattering * _ESun * _Kr * _Wave;\n    //v_ScatteringM = mInScattering * _ESun * _Km;\n    //v_Attenuate = exp(-mOutGroundScatteringAB);\n}";Pk="\nvarying vec4 v_ViewDir;\nvarying vec4 v_Scattering;\nvarying vec4 v_Attenuate;\n\nfloat PhaseRayleigh(float nCostheta)\n{\n\treturn 0.75 * (1.0 + nCostheta * nCostheta);\n}\n\nfloat PhaseMie(float nCostheta, float g, float g2)\n{\n\treturn 1.5 * ((1.0 - g2) / (2.0 + g2)) * (1.0 + nCostheta * nCostheta) / pow(1.0 + g2 - 2.0 * g * nCostheta, 1.5);\n}\n\nvec4 AtmosphereColor(vec4 mColor, vec3 mLightDir)\n{\n    float _G = -0.990;\n    float _G2 = _G * _G;\n    \n    float nCostheta = dot(normalize(v_ViewDir.xyz), mLightDir);\n    float nPhaseMie = PhaseMie(nCostheta, _G, _G2);\n    float nPhaseRayleigh = PhaseRayleigh(nCostheta);\n\t\t\t\t\n    mColor.rgb = v_Scattering.xyz * nPhaseRayleigh + v_Attenuate.xyz * nPhaseMie;\n    mColor.a = mColor.b + 0.35;\n    mColor = clamp(mColor, 0.0, 0.9);\n\n    return mColor;\n}\n\nvec4 AtmosphereLight(vec4 mColor, vec3 mLightDir)\n{\n    // Ground : v_ScatteringR = v_Scattering.xyz; v_ScatteringM = v_Attenuate.xyz; v_Attenuate = v_AttenuateGround;\n    \n    float _G = -0.980;\n    float _G2 = _G * _G;\n    \n    float nCostheta = dot(normalize(v_ViewDir.xyz), mLightDir);\n    float nPhaseMie = PhaseMie(nCostheta, _G, _G2);\n    float nPhaseRayleigh = PhaseRayleigh(nCostheta);\n    \n    mColor.rgb = v_Scattering.xyz * nPhaseRayleigh + v_Attenuate.xyz * nPhaseMie + mColor.rgb * vec3(v_ViewDir.w, v_Scattering.w, v_Attenuate.w)/*v_AttenuateGround*/;\n    \n    return mColor;\n}";return[Tk]});MiaokitMerge(function(cl){var dl=undefined;var el=true;var fl=[];var gl={RGBA32_FLOAT:function(){return true?[dl["RGBA32F"],dl.RGBA,dl.FLOAT]:[dl.RGBA,dl.RGBA,dl.FLOAT]},RGBA16_FLOAT:function(){return true?[dl["RGBA16F"],dl.RGBA,dl["HALF_FLOAT"]]:[dl.RGBA,dl.RGBA,36193]},RGBA8:function(){return true?[dl.RGBA,dl.RGBA,dl.UNSIGNED_BYTE]:[dl.RGBA,dl.RGBA,dl.UNSIGNED_BYTE]},D16_UNORM:function(){return true?[dl["DEPTH_COMPONENT16"],dl.DEPTH_COMPONENT,dl.UNSIGNED_SHORT]:[dl.DEPTH_COMPONENT,dl.DEPTH_COMPONENT,dl.UNSIGNED_SHORT]},D24_UNORM:function(){return true?[dl["DEPTH_COMPONENT24"],dl.DEPTH_COMPONENT,dl.UNSIGNED_INT]:[dl.DEPTH_COMPONENT,dl.DEPTH_COMPONENT,dl.UNSIGNED_INT]},D24S8_UNORM:function(){return true?[dl.DEPTH_STENCIL,dl.DEPTH_STENCIL,34042]:[dl.DEPTH_STENCIL,dl.DEPTH_STENCIL,34042]}};var hl={Opaque:1,Transparent:2,Outline:4,CastShadow:8,ReceiveShadow:16};var il=null;var jl=["u_Sunlight","u_Picker","u_EyePos","u_MatG","u_MatVP","u_Color","u_MainTex","",""];var kl=[null];var ll=[null];var ml=[null];var nl=[null];var ol=[new Int32Array([0,0,0,0]),new Float32Array([0,0,0,0]),new Float32Array([1,0,0,0,1,0,0,0,1]),new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),new Int32Array([0,0,0,0]),new Int32Array([0,0,0,0]),new Int32Array([0,0,0,0]),new Int32Array([0,0,0,0])];var pl=[function(Vl,Wl,Xl){Cl(kl[Vl],nl[Wl])},function(Yl,Zl,$l){Dl(kl[Yl],nl[Zl])},function(_l,am,bm){El(kl[_l],nl[am])},function(cm,dm,em){Fl(kl[cm],nl[dm])},function(fm,gm,hm){var im=nl[gm];var jm=im[1];if(im[0]){jm=Tl.GetTexture(jm);if(jm){im[0]=0;im[1]=jm}}var km=fl[jm]||zl;if(null===km){console.log("BindTexture null!");return}dl.activeTexture(33984+hm);dl.bindTexture(3553,km)},function(lm,mm){console.error("Unsupported UniformCubemap!")},null,function(nm,om,pm){var qm=nl[om];var rm=qm[1];if(qm[0]){rm=Tl.GetTexture(rm);if(rm){qm[0]=0;qm[1]=rm}}var sm=fl[rm]||zl;if(null===sm){console.log("BindTexture null!");return}dl.activeTexture(33984+pm);dl.bindTexture(35866,sm)}];var ql=[null];var rl=[null];var sl=1280;var tl=720;var ul=1;var vl=0;var wl=null;var xl=new Float32Array(4);var yl=[0,0,0,0];var zl=null;var Al=null;var Bl=0;function Cl(tm,um){if(undefined===tm.mark){dl.uniform4iv(tm,um)}else if(ul!==tm.mark){dl.uniform4iv(tm,um);tm.mark=ul}}function Dl(vm,wm){if(undefined===vm.mark){dl.uniform4fv(vm,wm)}else if(ul!==vm.mark){dl.uniform4fv(vm,wm);vm.mark=ul}}function El(xm,ym){if(undefined===xm.mark){dl.uniformMatrix3fv(xm,false,ym)}else if(ul!==xm.mark){dl.uniformMatrix3fv(xm,false,ym);xm.mark=ul}}function Fl(zm,Am){if(undefined===zm.mark){dl.uniformMatrix4fv(zm,false,Am)}else if(ul!==zm.mark){dl.uniformMatrix4fv(zm,false,Am);zm.mark=ul}}function Gl(Bm,Cm){var Dm=dl.createShader(Bm);if(!Dm){console.error("Could not create shader object!");return null}dl.shaderSource(Dm,Cm);dl.compileShader(Dm);if(!dl.getShaderParameter(Dm,dl.COMPILE_STATUS)){var Em=dl.getShaderInfoLog(Dm);dl.deleteShader(Dm);console.error("Could not compile shader! \n\n"+Em);return null}return Dm}function Hl(Fm){var Gm=Fm.program;var Hm=0;{dl.bindAttribLocation(Gm,0,"a_Position");dl.bindAttribLocation(Gm,1,"a_Normal");dl.bindAttribLocation(Gm,2,"a_UV");dl.bindAttribLocation(Gm,3,"a_Color");dl.bindAttribLocation(Gm,4,"a_Tangent");dl.bindAttribLocation(Gm,5,"a_Object");dl.bindAttribLocation(Gm,6,"a_MatW")}{dl.linkProgram(Gm);if(!dl.getProgramParameter(Gm,dl.LINK_STATUS)){var Im=dl.getProgramInfoLog(Gm);console.error("Could not compile program! \n\n"+Im);return 0}}{var Jm=dl.getProgramParameter(Gm,35718);if(el){Jm-=6;var Km=dl["getUniformBlockIndex"](Gm,"CommonBlock")}var Lm=Tl.CreateUniformsDesc(Jm);var Mm=nl[Lm];var Nm={};var Om=0;Mm[19]=ml.push(Nm)-1;ql[Mm[19]]=Fm;dl.useProgram(Gm);for(var Pm=0;Pm<2;Pm++){var Qm=Jm+(el?6:0);for(var Rm=0;Rm<Qm;Rm++){var Im=dl.getActiveUniform(Gm,Rm);var Sm=Im.type;if(35678===Sm||35680===Sm||36289===Sm){if(0!==Pm){continue}}else{if(1!==Pm){continue}}var Tm=Im.name;var Um=dl.getUniformLocation(Gm,Tm);if(!Um){continue}var Vm=kl.push(Um)-1;for(var Wm=0;Wm<jl.length;Wm++){if(Tm===jl[Wm]){Mm[Wm]=Om;if(5>Wm){Um.mark=1}break}}switch(Sm){case 35669:Sm=0;break;case 35666:Sm=1;break;case 35675:Sm=2;break;case 35676:Sm=3;break;case 35678:Sm=4;break;case 35680:Sm=5;break;case 36289:Sm=7;break;default:console.error("Unsupported uniform type:",Im);break}Mm[20+Om]=Vm;Mm[20+Jm+Om]=Sm;Nm[Tm]=Om;ll[Vm]=Tm;if(0===Pm){dl.uniform1i(Um,Om)}Om++}}if(Om!==Jm){console.error("Process uniform cout error!",Jm,Om)}Hm=Mm[16]}{var Xm=0;if(Fm.mark){for(var Ym=0,Zm=Fm.mark;Ym<Zm.length;Ym++){var $m=Zm[Ym];Xm|=hl[$m]}}Fm.mode=Xm}return Hm}function Il(_m){if(!_m){return null}var an=cl.Shader[_m];if(!an){console.error("Could not find shader:",_m);return null}if(an.program){return an}var bn=cl.Shader.GetSourceCode(_m);an.vs=Gl(dl.VERTEX_SHADER,bn[0]);if(!an.vs){console.error("Could not create vertex shader:",_m);return null}an.fs=Gl(dl.FRAGMENT_SHADER,bn[1]);if(!an.fs){dl.deleteShader(an.vs);an.vs=null;console.error("Could not create fragment shader:",_m);return null}an.program=dl.createProgram();if(!an.program){dl.deleteShader(an.vs);dl.deleteShader(an.fs);an.vs=null;an.fs=null;console.error("Could not create program object!");return null}dl.attachShader(an.program,an.vs);dl.attachShader(an.program,an.fs);an.id=Hl(an);if(!an.id){dl.deleteProgram(an.program);dl.deleteShader(an.vs);dl.deleteShader(an.fs);an.program=null;an.vs=null;an.fs=null}return an}function Jl(cn,dn){var en=undefined;var fn=undefined;var gn=undefined;var hn=undefined;var jn=0;function kn(){var un=nl[cn];var vn=nl[dn];var wn=ql[un[19]];var xn=un[20];var yn=20+un[17];en=wn.program;fn=ml[un[19]];gn=un;hn=[];jn=un[17];var zn=function(In){var Jn=In;var Kn=nl[vn[Jn]];var Ln=kl[xn+Jn];var Mn=un[yn+Jn];var Nn=[function(){return Kn},function(On){Kn.set(On)},undefined];switch(Mn){case 0:Nn[2]=function(){Cl(Ln,Kn)};break;case 1:Nn[2]=function(){Dl(Ln,Kn)};break;case 2:Nn[2]=function(){El(Ln,Kn)};break;case 3:Nn[2]=function(){Fl(Ln,Kn)};break;case 4:Nn[2]=function(){var Pn=Kn[1];if(Kn[0]){Pn=Tl.GetTexture(Pn);if(Pn){Kn[0]=0;Kn[1]=Pn}}var Qn=fl[Pn]||zl;if(null===Qn){console.log("BindTexture null!");return}dl.activeTexture(33984+Jn);dl.bindTexture(3553,Qn)};break;case 7:Nn[2]=function(){var Rn=Kn[1];if(Kn[0]){Rn=Tl.GetTexture(Rn);if(Rn){Kn[0]=0;Kn[1]=Rn}}var Sn=fl[Rn]||zl;if(null===Sn){console.log("BindTexture null!");return}dl.activeTexture(33984+Jn);dl.bindTexture(35866,Sn)};break;default:console.error("Unsupported uniform type!",Mn);break}hn[Jn]=Nn};for(var An=0;An<jn;An++){zn(An)}if(wn.uniform_values){for(var Bn=0,Cn=wn.uniform_values;Bn<Cn.length;Bn++){var Dn=Cn[Bn];var En=fn[Dn[0]];if(undefined!==En){var Fn=un[yn+En];if(4===Fn||5===Fn){var Gn=Tl.Pipeline["Resource"][Dn[1]];var Hn=[0,Gn.Handle,0,0];hn[En][1](Hn)}}}}return wn.mode}function ln(Tn){if(wl){wl(rl[dn],dl)}if(vl!==cn){dl.useProgram(en);vl=cn;if(Al){dl["bindBufferBase"](dl["UNIFORM_BUFFER"],0,Al)}}for(var Un=0,Vn=hn;Un<Vn.length;Un++){var Wn=Vn[Un];Wn[2]()}}function mn(Xn){return fn[Xn]}function nn(Yn){return hn[Yn][0]()}function on(Zn){Zn=gn[Zn];if(-1<Zn){return hn[Zn][0]()}return null}function pn($n){var _n=fn[$n];if(undefined!==_n){return hn[_n][0]()}return null}function qn(ao,bo){hn[ao][1](bo);if(vl===cn){hn[ao][2]()}}function rn(co,eo){co=gn[co];if(-1<co){hn[co][1](eo);if(vl===cn){hn[co][2]()}}}function sn(fo,go){var ho=fn[fo];if(undefined!==ho){hn[ho][1](go);if(vl===cn){hn[ho][2]()}}}function tn(io){hn[io][2]()}rl[dn]=[kn,ln,mn,nn,on,pn,qn,rn,sn,tn];return kn()}function Kl(jo){{Object.defineProperty(jo,"Attr",{get:function(){if(!this.Attr_){this.Attr_=rl[this._VarList()]}return this.Attr_}})}{var ko=function(mo){var no=mo;Object.defineProperty(jo,jl[mo],{get:function(){return this.Attr[4](no)},set:function(oo){if(oo){this.Attr[7](no,oo)}}})};for(var lo=0;lo<jl.length;lo++){ko(lo)}}{}}function Ll(po){var qo=dl.createTexture();if(!qo){console.error("Could not create texture object!");return null}dl.bindTexture(dl.TEXTURE_2D,qo);dl.texParameteri(dl.TEXTURE_2D,dl.TEXTURE_MIN_FILTER,dl.NEAREST);dl.texParameteri(dl.TEXTURE_2D,dl.TEXTURE_MAG_FILTER,dl.NEAREST);dl.texParameteri(dl.TEXTURE_2D,dl.TEXTURE_WRAP_S,dl.CLAMP_TO_EDGE);dl.texParameteri(dl.TEXTURE_2D,dl.TEXTURE_WRAP_T,dl.CLAMP_TO_EDGE);dl.texImage2D(dl.TEXTURE_2D,0,dl.RGBA,1,1,0,dl.RGBA,dl.UNSIGNED_BYTE,new Uint8Array(4));var ro=new Image;ro.crossOrigin="anonymous";ro.src=po.URL;ro.onload=function(so){dl.bindTexture(dl.TEXTURE_2D,qo);dl.texImage2D(dl.TEXTURE_2D,0,dl.RGBA,dl.RGBA,dl.UNSIGNED_BYTE,ro);dl.bindTexture(dl.TEXTURE_2D,null)};dl.bindTexture(dl.TEXTURE_2D,null);return qo}function Ml(to){var uo=dl.createTexture();if(!uo){console.error("Could not create texture object!");return null}dl.bindTexture(dl.TEXTURE_2D,uo);var vo=to.Params;dl.texParameteri(dl.TEXTURE_2D,dl.TEXTURE_MAG_FILTER,dl[vo[1]]);dl.texParameteri(dl.TEXTURE_2D,dl.TEXTURE_MIN_FILTER,dl[vo[0]]);dl.texParameteri(dl.TEXTURE_2D,dl.TEXTURE_WRAP_S,dl[vo[2]]);dl.texParameteri(dl.TEXTURE_2D,dl.TEXTURE_WRAP_T,dl[vo[3]]);var wo=gl[to.Format]();dl.texImage2D(dl.TEXTURE_2D,to.Levels,wo[0],to.Width,to.Height,0,wo[1],wo[2],null);dl.bindTexture(dl.TEXTURE_2D,null);uo["_Format"]=wo;return uo}function Nl(xo,yo){var zo=dl.createFramebuffer();if(!zo){console.error("Could not create framebuffer object!");return null}dl.bindFramebuffer(dl.FRAMEBUFFER,zo);dl.framebufferTexture2D(dl.FRAMEBUFFER,dl.COLOR_ATTACHMENT0,dl.TEXTURE_2D,xo,0);if(yo&&yo["_Format"][0]===dl.DEPTH_STENCIL){dl.framebufferTexture2D(dl.FRAMEBUFFER,dl.DEPTH_STENCIL_ATTACHMENT,dl.TEXTURE_2D,yo,0)}else{dl.framebufferTexture2D(dl.FRAMEBUFFER,dl.DEPTH_ATTACHMENT,dl.TEXTURE_2D,yo,0)}if(dl.FRAMEBUFFER_COMPLETE!=dl.checkFramebufferStatus(dl.FRAMEBUFFER)){dl.deleteFramebuffer(zo);console.error("Framebuffer check failed!");return null}return zo}var Ol=function(Ao){if(el){nl[Bl][12]=Ao;dl.bindBuffer(dl["UNIFORM_BUFFER"],Al);dl.bufferData(dl["UNIFORM_BUFFER"],nl[Bl],dl.DYNAMIC_DRAW)}};var Pl=null;var Ql=null;var Rl=null;var Sl=null;var Tl={_name:"ShaderLab",Pipeline:null,Init:function(Bo){dl=cl["GL"]["Ctx"];fl=cl["GL"]["_textures"];sl=dl.canvas.width;tl=dl.canvas.height;Pl=cl["GL"]["BindViewport"];Ql=cl["GL"]["BindDepth"];Rl=cl["GL"]["BindBlend"];Sl=cl["GL"]["BindStencil"];if(el){var Co=dl.createBuffer();if(Co){dl.bindBuffer(dl["UNIFORM_BUFFER"],Co);dl.bufferData(dl["UNIFORM_BUFFER"],64*3,dl.DYNAMIC_DRAW);dl.bindBuffer(dl["UNIFORM_BUFFER"],null);Al=Co}}this.Pipeline.Init();for(var Do=0,Eo=this.Pipeline.RenderTarget;Do<Eo.length;Do++){var Fo=Eo[Do];if(Fo){Fo.Width=Fo.Width||sl;Fo.Height=Fo.Height||tl;Fo.Levels=Fo.Levels||0;Fo.Params=Fo.Params||["NEAREST","NEAREST","CLAMP_TO_EDGE","CLAMP_TO_EDGE"];Fo.Texture=Ml(Fo);Fo.Handle=cl["GL"]["RegisterTexture"](Fo.Texture);Fo.Size=[1/Fo.Width,1/Fo.Height,Fo.Width,Fo.Height]}}for(var Go=0,Ho=this.Pipeline.Resource;Go<Ho.length;Go++){var Io=Ho[Go];if(Io){if("2D"===Io.TYPE){Io.Texture=Ll(Io);Io.Handle=cl["GL"]["RegisterTexture"](Io.Texture);if(2===Io.ID){zl=Io.Texture}}}}function Jo(To){var Uo=To.RenderTarget;if(Uo){var Vo=Tl.Pipeline["RenderTarget"][Uo[0]];var Wo=Tl.Pipeline["RenderTarget"][Uo[1]];To.Framebuffer=Nl(Vo.Texture,Wo?Wo.Texture:null);if(!To.Framebuffer){console.log(To)}To.Framebuffer.width=Vo.Size[2];To.Framebuffer.height=Vo.Size[3]}else{To.Framebuffer=null}}for(var Ko=0,Lo=this.Pipeline.Pass;Ko<Lo.length;Ko++){var Mo=Lo[Ko];if(Mo){if("Clear"===Mo.Type){Mo._Type=2}else{Mo._Type="Render"===Mo.Type?0:1}Mo._Mask=0;for(var No=0,Oo=Mo.Mask;No<Oo.length;No++){var Po=Oo[No];Mo._Mask+=hl[Po]}Jo(Mo);if(Mo.Pingpong){for(var Qo=0,Ro=Mo.Pingpong;Qo<Ro.length;Qo++){var So=Ro[Qo];Jo(So)}}}}},Draw:function(){ul++;var Xo=0;var Yo=this.Pipeline.Picker;if(Yo){yl[0]=Yo.x;yl[1]=dl.canvas.height-Yo.y}else{yl[0]=-10;yl[1]=-10}Ol(0);for(var Zo=0,$o=this.Pipeline.Pass;Zo<$o.length;Zo++){var _o=$o[Zo];Ul.BeginDrawPass();if(_o.Pingpong){for(var ap=0;ap<_o.PingpongCount;ap++){for(var bp=0;bp<_o.Pingpong.length;bp++){_o.Framebuffer=_o.Pingpong[bp].Framebuffer;_o.SetUniforms=_o.Pingpong[bp].SetUniforms;this.DrawPass(_o,Tl.DrawPass_)}}}else{this.DrawPass(_o,Tl.DrawPass_)}Ul.EndDrawPass(Xo++)}},DrawPass:function(cp,dp){dl.bindFramebuffer(dl.FRAMEBUFFER,cp.Framebuffer);Pl(cp.Framebuffer,sl,tl);Ql(cp.Depth);Rl(cp.Blend,Ol);Sl(cp.Stencil);var ep=cp.ClearTarget;if(ep){var fp=0;if(ep.Color){dl.clearColor(ep.Color.r,ep.Color.g,ep.Color.b,ep.Color.a);fp+=dl.COLOR_BUFFER_BIT}if(undefined!==ep.Depth){dl.clearDepth(ep.Depth);fp+=dl.DEPTH_BUFFER_BIT}if(undefined!==ep.Stencil){dl.clearStencil(ep.Stencil);fp+=dl.STENCIL_BUFFER_BIT}dl.clear(fp)}wl=cp.SetUniforms;if(cp.Shader){if(!cp._Material){cp._Material=new cl["Material"](cp.Shader)}cp._Material._Bind()}dp(cp._Type,cp._Mask);if(cp.Postprocess){cp.Postprocess(dl)}},PreflushBuffer:function(){var gp=nl.length;var hp=new Array(gp);for(var ip=0;ip<gp;ip++){var jp=nl[ip];if(jp){if("Float32Array"===jp.constructor.name){hp[ip]=jp.length}else{hp[ip]=-jp.length}nl[ip]=jp.byteOffset}}return hp},FlushBuffer:function(kp,lp){il=kp;var mp=nl.length;for(var np=0;np<mp;np++){var op=nl[np];if(op){var pp=lp[np];if(0<pp){nl[np]=new Float32Array(il,op,pp)}else{nl[np]=new Int32Array(il,op,-pp)}}}for(var np=0;np<mp;np++){var qp=rl[np];if(qp){qp[0]()}}cl["GL"]["FlushHeap"]()},ResizeCanvas:function(rp,sp){},PickObject:function(){var tp=this.Pipeline.Picker;if(tp){dl.readPixels(tp.x,dl.canvas.height-tp.y,1,1,dl.RGBA,dl.FLOAT,xl);if(0>xl[3]){var up=Math.ceil(xl[0]*1e4)*8192+Math.ceil(xl[1]*1e4);var vp=Math.ceil(xl[2]*1e4);var wp=this["GetObject"](up);tp.Feedback(wp,vp)}else{tp.Feedback(null,0)}this.Pipeline.Picker=null}},APP_DO_OPERATORS:[function(xp){var yp=cl["ShaderLab"]["Pipeline"]["InternalShader"][xp];var zp=Il(yp);return zp.id},function(Ap,Bp,Cp,Dp){var Ep=null;switch(Bp){case 0:Ep=new Int32Array(il,Dp,4);Ep.set(ol[0]);break;case 1:Ep=new Float32Array(il,Dp,4);Ep.set(ol[1]);break;case 2:Ep=new Float32Array(il,Dp,9);Ep.set(ol[2]);break;case 3:Ep=new Float32Array(il,Dp,16);Ep.set(ol[3]);break;case 4:Ep=new Int32Array(il,Dp,4);Ep.set(ol[4]);break;case 5:Ep=new Int32Array(il,Dp,4);Ep.set(ol[5]);break;case 6:Ep=new Int32Array(il,Dp,Cp);break;case 7:Ep=new Int32Array(il,Dp,4);Ep.set(ol[7]);break;case 8:Ep=new Float32Array(il,Dp,48);Bl=Ap;break;default:console.error("Unsupported uniform type:",Bp);break}nl[Ap]=Ep;return Ap},function(Fp,Gp,Hp,Ip){pl[Fp](Gp,Hp,Ip);return 0},function(Jp,Kp,Lp,Mp){var Np=cl["WASM"].GetString(Mp);var Op=nl[Jp];var Pp=ml[Op[19]];var Qp=Pp[Np];return undefined===Qp?0:Qp},function(Rp,Sp){rl[Sp][1](Rp);return 0},function(){Tl.Draw()},Jl,null],ExpandMaterial:Kl,CreateUniformsDesc:undefined,GetTexture:undefined,DrawPass_:undefined,SetSunlight:undefined};var Ul={_name:"Profiler",m_pMsg:"",m_nCycleStart:0,m_nCycleTick:0,m_nBeginCycle:0,m_nTotalCycle:0,m_nBeginScript:0,m_nTotalScript:0,m_nBeginUpdate:0,m_nTotalUpdate:0,m_nBeginDraw:0,m_nTotalDraw:0,m_nBeginMaterial:0,m_nTotalMaterial:0,m_nBeginDrawPass:0,m_nTotalDrawPass:[],BeginCycle:function(){if(0===Ul.m_nCycleTick){Ul.m_nCycleStart=cl["Time"]();Ul.m_nCycleTick=0;Ul.m_nBeginCycle=0;Ul.m_nTotalCycle=0;Ul.m_nBeginScript=0;Ul.m_nTotalScript=0;Ul.m_nBeginUpdate=0;Ul.m_nTotalUpdate=0;Ul.m_nBeginDraw=0;Ul.m_nTotalDraw=0;Ul.m_nBeginMaterial=0;Ul.m_nTotalMaterial=0;Ul.m_nBeginDrawPass=0;Ul.m_nTotalDrawPass=[]}Ul.m_nBeginCycle=cl["Time"]()},EndCycle:function(){Ul.m_nTotalCycle+=cl["Time"]()-Ul.m_nBeginCycle;if(60===++Ul.m_nCycleTick){var Tp={"总耗时":cl["Time"]()-Ul.m_nCycleStart,"应用循环":Ul.m_nTotalCycle,"脚本逻辑":Ul.m_nTotalScript,"场景更新":Ul.m_nTotalUpdate,"场景绘制":Ul.m_nTotalDraw,"通道绘制":Ul.m_nTotalDrawPass};Ul.m_pMsg="'开销统计':"+JSON.stringify(Tp);Ul.m_nCycleTick=0}},BeginScript:function(){Ul.m_nBeginScript=cl["Time"]()},EndScript:function(){Ul.m_nTotalScript+=cl["Time"]()-Ul.m_nBeginScript},BeginUpdate:function(){Ul.m_nBeginUpdate=cl["Time"]()},EndUpdate:function(){Ul.m_nTotalUpdate+=cl["Time"]()-Ul.m_nBeginUpdate},BeginDraw:function(){Ul.m_nBeginDraw=cl["Time"]()},EndDraw:function(){Ul.m_nTotalDraw+=cl["Time"]()-Ul.m_nBeginDraw},BeginMaterial:function(){Ul.m_nBeginMaterial=cl["Time"]()},EndMaterial:function(){Ul.m_nTotalMaterial+=cl["Time"]()-Ul.m_nBeginMaterial},BeginDrawPass:function(){Ul.m_nBeginDrawPass=cl["Time"]()},EndDrawPass:function(Up){Ul.m_nTotalDrawPass[Up]=(Ul.m_nTotalDrawPass[Up]?Ul.m_nTotalDrawPass[Up]:0)+cl["Time"]()-Ul.m_nBeginDrawPass}};return[Tl,Ul]});MiaokitMerge(function(Vp){if("Sisyphus"!==Vp["m_pConfig"]["ENGINE"]){return[]}var Wp=undefined;var Xp=true;function Yp(cq){Zp();Wp=cq.OnRenderingEvent;$p();var dq={memory:new WebAssembly.Memory({initial:64*16,maximum:32768}),APP_PLUGIN_TYPE:function(){return 2},APP_MEM_TYPE:function(){return 2},APP_MEM_RESERVE:function(){return 1024},APP_MEM_MALLOC:function(eq){alert("SISYPHUS��չ��֧��ʹ�÷������ڴ�!");return 0},APP_MEM_FREE:function(fq){alert("SISYPHUS��չ��֧��ʹ�÷������ڴ�!")},APP_MEM_BASE:function(){return 64*1024*1024},APP_MEM_GROW:function(gq){if(Vp["ShaderLab"]){var hq=Vp["ShaderLab"]["PreflushBuffer"]();try{dq["memory"].grow(gq/64/1024)}catch(jq){alert("΢���ṩ���ڴ治�㣬�볢��ʹ���ֻ��Դ��������")}var iq=dq["memory"].buffer;Vp["ShaderLab"]["FlushBuffer"](iq,hq)}else{dq["memory"].grow(gq/64/1024)}},APP_MEM_RECYCLE:function(kq){alert("WAMSģ�鲻֧�ֻ����ڴ�!")},UNITY_CREATE_OBJ:function(){alert("δװ��UNITY��չ!");return 0},UNITY_FREE_OBJ:function(){alert("δװ��UNITY��չ!");return 0},UNITY_GET:function(){alert("δװ��UNITY��չ!");return 0},UNITY_DO:function(){alert("δװ��UNITY��չ!");return 0}};Object["assign"](dq,bq.Export);cq.OnEngineLoad(dq)}function Zp(){var lq=document.getElementById("unityContainer");var mq=document.createElement("canvas");mq.id="3d";mq.width=lq.offsetWidth;mq.height=lq.offsetHeight;mq.style.width="100%";mq.style.height="100%";mq.style.top="0rem";mq.style.bottom="0rem";mq.style.left="0rem";mq.style.right="0rem";mq.style.position="absolute";mq.style.zIndex="1";lq.appendChild(mq);bq["CreateContext"](mq,null);Vp["ShaderLab"]["Init"](bq)}function $p(){if(Xp){Xp=false;aq()}}function _p(){Xp=true}function aq(){if(Xp){return}Vp.Profiler.BeginCycle();Vp.Profiler.BeginScript();Wp(0);Vp.Profiler.EndScript();if(Vp["WASM"]["Update"]){Vp.Profiler.BeginUpdate();Vp["WASM"]["Update"](0);Vp.Profiler.EndUpdate();Vp.Profiler.BeginDraw();Vp["WASM"]["Update"](1);Vp.Profiler.EndDraw()}Vp.Profiler.EndCycle();requestAnimationFrame(aq)}var bq=function(){var nq=undefined;var oq=[-1,-1,-1,-1];var pq=[-1,-1,-1];var qq=[-1,-1,-1,-1,-1,-1,-1];var rq=[-1,-1,-1,-1,-1,-1,-1];var sq=[null];var tq=null;var uq=null;var vq=0;var wq=function(){var Eq=[null];var Fq=[];var Gq=[];var Hq=0;var Iq=0;return{Analyze:function(){return", 'Image':["+Hq+","+Fq.length+","+Iq+","+Gq.length+"]"},Get:function(Jq){return Eq[Jq]},CreateImage:function(){var Kq=null;if(0<Fq.length){Kq=Fq.pop()}else{Hq++;Kq=Eq.push(new Image)-1}return Kq},FreeImage:function(Lq){Fq.push(Lq)},PushBuffer:function(Mq){var Nq=null;if(0<Gq.length){Nq=Gq.pop()}else{Iq++;Nq=Eq.push(null)-1}Eq[Nq]=Mq;return Nq},FreeBuffer:function(Oq){Eq[Oq]=null;Gq.push(Oq)}}}();var xq=function(Pq){var Qq=sq.length;Pq.name=Qq;sq[Qq]=Pq;return Qq};var yq=function(Rq){return sq[Rq]};var zq=function(Sq,Tq){sq[Sq]=Tq};var Aq=function(Uq,Vq){uq[Uq>>2]=Vq};var Bq=function(Wq){return uq[Wq>>2]};var Cq=function(Xq,Yq){return tq.subarray(Xq,Xq+Yq)};var Dq={glGenVertexArrays:function(Zq,$q){var _q=nq["createVertexArray"]();if(!_q||1!=Zq){console.error("gl.createVertexArray error!");return}var ar=xq(_q);Aq($q,ar)},glDeleteVertexArrays:function(br,cr){var dr=Bq(cr);var er=yq(dr);if(!er||1!=br){console.error("gl.deleteVertexArray error!");return}nq["deleteVertexArray"](er);zq(dr,null)},glBindVertexArray:function(fr){nq["bindVertexArray"](yq(fr))},glVertexAttribPointer:function(gr,hr,ir,jr,kr,lr){nq.vertexAttribPointer(gr,hr,ir,!!jr,kr,lr)},glEnableVertexAttribArray:function(mr){nq.enableVertexAttribArray(mr)},glVertexAttribDivisor:function(nr,or){nq["vertexAttribDivisor"](nr,or)},glGenTextures:function(pr,qr){var rr=nq.createTexture();if(!rr||1!=pr){console.error("gl.createTexture error!");return}var sr=xq(rr);Aq(qr,sr)},glDeleteTextures:function(tr,ur){var vr=Bq(ur);var wr=yq(vr);if(!wr||1!=tr){console.error("gl.deleteTexture error!");return}nq.deleteTexture(wr);zq(vr,null)},glActiveTexture:function(xr){nq.activeTexture(xr)},glBindTexture:function(yr,zr){nq.bindTexture(yr,yq(zr))},glTexParameteri:function(Ar,Br,Cr){nq.texParameteri(Ar,Br,Cr)},glTexImage2DObj:function(Dr,Er,Fr,Gr,Hr,Ir,Jr,Kr,Lr,Mr){if(0==Mr){var Nr=wq.Get(Lr);if(Nr){if(Nr instanceof ArrayBuffer){nq.texImage2D(Dr,Er,Fr,Gr,Hr,Ir,Jr,Kr,new Uint8Array(Nr));wq.FreeBuffer(Lr)}else{nq.texParameterf(Dr,34046,vq);nq.texImage2D(Dr,Er,Fr,Jr,Kr,Nr);wq.FreeImage(Lr)}}}else{nq.texImage2D(Dr,Er,Fr,Gr,Hr,Ir,Jr,Kr,0===Lr?new Uint8Array(3):Cq(Lr,Mr))}},glGenBuffers:function(Or,Pr){var Qr=nq.createBuffer();if(!Qr||1!=Or){console.error("gl.createBuffer error!");return}var Rr=xq(Qr);Aq(Pr,Rr)},glDeleteBuffers:function(Sr,Tr){var Ur=Bq(Tr);var Vr=yq(Ur);if(!Vr||1!=Sr){console.error("gl.deleteBuffer error!");return}nq.deleteBuffer(Vr);zq(Ur,null)},glBindBuffer:function(Wr,Xr){nq.bindBuffer(Wr,yq(Xr))},glBufferData:function(Yr,Zr,$r,_r){if(!$r){nq.bufferData(Yr,Zr,_r)}else{nq.bufferData(Yr,Cq($r,Zr),_r)}},glBufferSubData:function(as,bs,cs,ds){nq.bufferSubData(as,bs,Cq(ds,cs))},glBlendEquationSeparate:function(es,fs){if(es!=qq[1]||fs!=qq[2]){nq.blendEquationSeparate(es,fs);qq[1]=es;qq[2]=fs}},glBlendFuncSeparate:function(gs,hs,is,js){if(gs!=qq[3]||hs!=qq[4]||is!=qq[5]||js!=qq[6]){nq.blendFuncSeparate(gs,hs,is,js);qq[3]=gs;qq[4]=hs;qq[5]=is;qq[6]=js}},glEnable:function(ks){nq.enable(ks)},glDisable:function(ls){nq.disable(ls)},glDepthFunc:function(ms){nq.depthFunc(ms)},glDepthMask:function(ns){nq.depthMask(!!ns)},glCullFace:function(os){nq.cullFace(os)},glPolygonOffset:function(ps,qs){nq.polygonOffset(ps,qs)},glViewport:function(rs,ss,ts,us){if(ts!=oq[2]||us!=oq[3]){nq.viewport(rs,ss,ts,us);oq[2]=ts;oq[3]=us}},glDrawArrays:function(vs,ws,xs){nq.drawArrays(vs,ws,xs)},glDrawArraysInstanced:function(ys,zs,As,Bs){nq["drawArraysInstanced"](ys,zs,As,Bs)},glDrawElements:function(Cs,Ds,Es,Fs){nq.drawElements(Cs,Ds,Es,Fs)},glDrawElementsInstanced:function(Gs,Hs,Is,Js,Ks){nq["drawElementsInstanced"](Gs,Hs,Is,Js,Ks)}};return{_name:"GL",_textures:sq,Ctx:null,ImageCache:wq,Export:Dq,FlushHeap:function(){tq=Vp["WASM"]["HEAPU8"]();uq=Vp["WASM"]["HEAP32"]()},CreateContext:function(Ls,Ms){Ms=Ms||{majorVersion:2,minorVersion:0,alpha:0,depth:0,stencil:0,antialias:0,premultipliedAlpha:0,preserveDrawingBuffer:0,preferLowPowerToHighPerformance:0,failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:0,proxyContextToMainThread:0,renderViaOffscreenBackBuffer:0};if(Ms["explicitSwapControl"]){return 0}if(Ms["majorVersion"]==1){nq=Ls.getContext("webgl",Ms)||Ls.getContext("experimental-webgl",Ms);if(!nq){console.error("create webgl_1 error!");return}var Ns=nq.getExtension("ANGLE_instanced_arrays");if(Ns){nq["vertexAttribDivisor"]=function(Ws,Xs){Ns["vertexAttribDivisorANGLE"](Ws,Xs)};nq["drawArraysInstanced"]=function(Ys,Zs,$s,_s){Ns["drawArraysInstancedANGLE"](Ys,Zs,$s,_s)};nq["drawElementsInstanced"]=function(at,bt,ct,dt,et){Ns["drawElementsInstancedANGLE"](at,bt,ct,dt,et)}}else{console.error("!ANGLE_instanced_arrays")}var Os=nq.getExtension("OES_vertex_array_object");if(Os){nq["createVertexArray"]=function(){return Os["createVertexArrayOES"]()};nq["deleteVertexArray"]=function(ft){Os["deleteVertexArrayOES"](ft)};nq["bindVertexArray"]=function(gt){Os["bindVertexArrayOES"](gt)}}else{console.error("!OES_vertex_array_object")}var Ps=["EXT_color_buffer_half_float","OES_texture_half_float","EXT_texture_filter_anisotropic","WEBGL_depth_texture","OES_element_index_uint","EXT_frag_depth","EXT_blend_minmax"];for(var Qs=0,Rs=Ps;Qs<Rs.length;Qs++){var Ss=Rs[Qs];var Ts=nq.getExtension(Ss);if(!Ts){console.error("!"+Ss)}}}else{nq=Ls.getContext("webgl2",Ms);if(!nq){console.error("create webgl_2 error!");return}var Ps=["EXT_color_buffer_float","EXT_texture_filter_anisotropic"];for(var Us=0,Vs=Ps;Us<Vs.length;Us++){var Ss=Vs[Us];var Ts=nq.getExtension(Ss);if(!Ts){console.error("!"+Ss)}}}vq=nq.getParameter(34047);bq.Ctx=nq;return 0},DestroyContext:function(){console.error("!DestroyContext")},GetTextureByHandle:function(ht){return sq[ht]},RegisterTexture:function(it){return xq(it)},BindViewport:function(jt,kt,lt){var mt=jt&&jt.width||kt;var nt=jt&&jt.height||lt;if(mt!=oq[2]||nt!=oq[3]){nq.viewport(0,0,mt,nt);oq[2]=mt;oq[3]=nt}},BindDepth:function(ot){if(ot){var pt=ot.Write;var qt=nq[ot.Func];if(1!=pq[0]){nq.enable(nq.DEPTH_TEST);pq[0]=1}if(pt!=pq[1]){nq.depthMask(pt);pq[1]=pt}if(qt!=pq[2]){nq.depthFunc(qt);pq[2]=qt}}else{if(0!=pq[0]){nq.disable(nq.DEPTH_TEST);pq[0]=0}}},BindBlend:function(rt,st){if(rt){var tt=nq[rt.ColorFunc];var ut=nq[rt.AlphaFunc];var vt=nq[rt.ColorSrc];var wt=nq[rt.ColorDest];var xt=nq[rt.AlphaSrc];var yt=nq[rt.AlphaDest];if(1!=qq[0]){nq.enable(nq.BLEND);qq[0]=1;st(1)}nq.blendEquationSeparate(tt,ut);qq[1]=tt;qq[2]=ut;nq.blendFuncSeparate(vt,wt,xt,yt);qq[3]=vt;qq[4]=wt;qq[5]=xt;qq[6]=yt}else{if(0!=qq[0]){nq.disable(nq.BLEND);qq[0]=0;st(0)}}},BindStencil:function(zt){if(zt){var At=nq[zt.Func];var Bt=zt.Value;var Ct=zt.Mask;var Dt=nq[zt.Faild];var Et=nq[zt.ZFaild];var Ft=nq[zt.Pass];if(1!=rq[0]){nq.enable(nq.STENCIL_TEST);rq[0]=1}if(At!=rq[1]||Bt!=rq[2]||Ct!=rq[3]){nq.stencilFunc(At,Bt,Ct);rq[1]=At;rq[2]=Bt;rq[3]=Ct}if(Dt!=rq[4]||Et!=rq[5]||Ft!=rq[6]){nq.stencilOp(Dt,Et,Ft);rq[4]=Dt;rq[5]=Et;rq[6]=Ft}}else{if(0!=rq[0]){nq.disable(nq.STENCIL_TEST);rq[0]=0}}}}}();Vp["WASM"]=Vp["WASM"]||{};Vp["WASM"]["LoadEngine"]=Yp;$p["_name"]="Start";_p["_name"]="Stop";return[bq,$p,_p]});MiaokitMerge(function(Gt){var Ht=Date.now();function It(){return Date.now()-Ht}function Jt(Mt,Nt){if(Nt===void 0){Nt=0}if(2===Nt){console.warn("Track:",It(),Mt)}else if(2<Nt){console.error("Track:",It(),Mt)}else{console.info("Track:",It(),Mt)}}function Kt(Ot,Pt,Qt){if(Qt===void 0){Qt=undefined}var Rt=new XMLHttpRequest;Rt.open("GET",Ot,true);Rt.responseType="arraybuffer";Rt.onprogress=function(St){if(0<St.total&&Qt){Qt(St.loaded/St.total)}};Rt.onload=function(Tt){if(Rt.status==200){Pt(Rt.response)}else{Pt(null)}};Rt.onerror=function(Ut){Jt(Ut,2);Pt(null)};Rt.send(null)}function Lt(Vt,Wt,Xt,Yt,Zt,$t){var _t=new XMLHttpRequest;_t.onprogress=function(au){if(0<au.total&&Zt){Zt(au.loaded/au.total)}};_t.onload=function(bu){if(_t.status==200){$t(_t.response)}else{$t(null)}_t=null};_t.onerror=function(cu){Jt(cu,2);$t(null)};_t.responseType=Wt;_t.open(Vt,Xt,true);_t.send(Yt)}It["_name"]="Time";Jt["_name"]="Track";Kt["_name"]="Fetch";Lt["_name"]="Request";return[It,Jt,Kt,Lt]});MiaokitMerge(function(du){if("Unity"!==du["m_pConfig"]["ENGINE"]){return[]}if(!UnityLoader){return[]}var eu=du["m_pLogo"]||"data:image/png;base64,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";UnityLoader.Progress.Styles.Dark.progressLogoUrl=eu;UnityLoader.Progress.Styles.Light.progressLogoUrl=eu;if(UnityLoader.SystemInfo.mobile){UnityLoader.SystemInfo.mobile=false;UnityLoader.downloadJob=function(mu,nu){var ou=new XMLHttpRequest;ou.open("GET",nu.parameters.url);ou.responseType="arraybuffer";ou.onload=function(){UnityLoader.Compression.decompress(new Uint8Array(ou.response),function(pu){nu.complete(pu)})};if(nu.parameters.onprogress)ou.addEventListener("progress",nu.parameters.onprogress);if(nu.parameters.onload)ou.addEventListener("load",nu.parameters.onload);ou.send()}}UnityLoader.processWasmFrameworkJob=function(qu,ru){var su=UnityLoader.Job.result(qu,"downloadWasmFramework");UnityLoader.loadCode(qu,su,function(tu,uu){qu["mainScriptUrlOrBlob"]=uu;if(qu.isModularized){UnityLoader[tu]=UnityModule}qu["instantiateWasm"]=function(vu,wu){iu(qu,vu["env"]);if(qu["wasmBinary"]){WebAssembly.instantiate(qu["wasmBinary"],vu).then(function(xu){wu(xu.instance,xu.module)})}else{console.info("MiaokitLoader.InitUnity.instantiateWasm error!")}return{}};UnityLoader[tu](qu);ru.complete()},{Module:qu,url:qu["wasmFrameworkUrl"],isModularized:qu.isModularized})};var fu=null;var gu=null;var hu={};function iu(yu,zu){Object["assign"](zu,{_Init:function(Au,Bu){du["WASM"]["m_pMemory"]=du["WASM"]["m_pMemory"]||gu.Module.wasmMemory;ju(yu,hu,Au,Bu);ku(gu,hu);fu.OnEngineLoad(hu)},_RenderingEvent:function(Cu){fu.OnRenderingEvent(Cu)}});du["GL"]=zu}function ju(Du,Eu,Fu,Gu){var Hu=du.WASM.GetString(Fu,Gu);var Iu=JSON.parse(Hu);var Ju=function(Nu){var Ou=function(){var Pu=Array.prototype.slice.call(arguments);Pu.unshift(Ou["m_nAddr"]);return Ou["m_pFunc"].apply(this,Pu)};Ou["m_pFunc"]=Du[Nu.Call];Ou["m_nAddr"]=Nu.Addr;Eu[Nu.Name]=Ou};for(var Ku=0,Lu=Iu.List;Ku<Lu.length;Ku++){var Mu=Lu[Ku];Ju(Mu)}}function ku(Qu,Ru){Ru["APP_PLUGIN_TYPE"]=function(){return 1};Ru["APP_MEM_TYPE"]=function(){return 1};Ru["memory"]=function(Su){var Tu=32*1024*1024;var Uu=Su._memalign(16,Tu);var Vu=Tu-Uu;Su._free(Uu);var Wu=Su._memalign(16,Vu+Tu);if(Wu!==Uu){console.error("miaokit.prememory: addr error",Uu,Wu);return}if(Wu+Vu+Tu!==67108864){console.error("miaokit.prememory: addr end error",Wu+Vu+Tu);return}Ru["APP_MEM_RESERVE"]=function(){return Wu};return Su.wasmMemory}(gu.Module);Ru["APP_MEM_MALLOC"]=function(Xu){return gu.Module._memalign(16,Xu)};Ru["APP_MEM_FREE"]=function(Yu){gu.Module._free(Yu)};Ru["APP_MEM_BASE"]=function(){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0};Ru["APP_MEM_GROW"]=function(Zu){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0};Ru["APP_MEM_RECYCLE"]=function($u){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0}}function lu(_u){fu=_u;gu=UnityLoader.instantiate("unityContainer",du["m_pConfig"]["UNITY"])}du["WASM"]=du["WASM"]||{};du["WASM"]["LoadEngine"]=lu;return[]});MiaokitMerge(function(av){var bv=undefined;var cv=new TextDecoder("utf-8");var dv=new TextEncoder;function ev(fv){if(!bv||av["WASM"].m_pMemory.buffer.byteLength!==bv[0].byteLength){if(!bv){bv=[]}bv[0]=new Int8Array(av["WASM"].m_pMemory.buffer);bv[1]=new Uint8Array(av["WASM"].m_pMemory.buffer);bv[2]=new Int16Array(av["WASM"].m_pMemory.buffer);bv[3]=new Uint16Array(av["WASM"].m_pMemory.buffer);bv[4]=new Int32Array(av["WASM"].m_pMemory.buffer);bv[5]=new Uint32Array(av["WASM"].m_pMemory.buffer);bv[6]=new Float32Array(av["WASM"].m_pMemory.buffer);bv[7]=new Float64Array(av["WASM"].m_pMemory.buffer)}return bv[fv]}av["WASM"]=av["WASM"]||{};av["WASM"]["HEAP8"]=function(gv,hv){if(gv===void 0){gv=0}if(hv===void 0){hv=0}var iv=ev(0);if(gv&&hv){return iv.subarray(gv,gv+hv)}else{return iv}};av["WASM"]["HEAPU8"]=function(jv,kv){if(jv===void 0){jv=0}if(kv===void 0){kv=0}var lv=ev(1);if(jv&&kv){return lv.subarray(jv,jv+kv)}else{return lv}};av["WASM"]["HEAP16"]=function(mv,nv){if(mv===void 0){mv=0}if(nv===void 0){nv=0}var ov=ev(2);if(mv&&nv){return ov.subarray(mv/2,(mv+nv)/2)}else{return ov}};av["WASM"]["HEAPU16"]=function(pv,qv){if(pv===void 0){pv=0}if(qv===void 0){qv=0}var rv=ev(3);if(pv&&qv){return rv.subarray(pv/2,(pv+qv)/2)}else{return rv}};av["WASM"]["HEAP32"]=function(sv,tv,uv){if(sv===void 0){sv=0}if(tv===void 0){tv=0}var vv=ev(4);if(sv&&tv){if(uv){return vv.slice(sv/4,(sv+tv)/4)}else{return vv.subarray(sv/4,(sv+tv)/4)}}else{return vv}};av["WASM"]["HEAPU32"]=function(wv,xv){if(wv===void 0){wv=0}if(xv===void 0){xv=0}var yv=ev(5);if(wv&&xv){return yv.subarray(wv/4,(wv+xv)/4)}else{return yv}};av["WASM"]["HEAPF32"]=function(zv,Av,Bv){if(zv===void 0){zv=0}if(Av===void 0){Av=0}var Cv=ev(6);if(zv&&Av){if(Bv){return Cv.slice(zv/4,(zv+Av)/4)}else{return Cv.subarray(zv/4,(zv+Av)/4)}}else{return Cv}};av["WASM"]["HEAPF64"]=function(Dv,Ev){if(Dv===void 0){Dv=0}if(Ev===void 0){Ev=0}var Fv=ev(7);if(Dv&&Ev){return Fv.subarray(Dv/8,(Dv+Ev)/8)}else{return Fv}};av["WASM"]["GetString"]=function(Gv,Hv){if(!Hv){var Iv=av["WASM"].HEAPU8();var Jv=Gv;while(0!==Iv[Jv++]);Hv=Jv-Gv-1}var Kv=av["WASM"].HEAPU8(Gv,Hv);var Lv=cv.decode(Kv);return Lv};av["WASM"]["SetString"]=function(Mv,Nv){var Ov=dv.encode(Nv);var Pv=av["WASM"].HEAPU8(Mv,Ov.byteLength);Pv.set(Ov)};av["WASM"]["EncodeString"]=function(Qv){return dv.encode(Qv)};av["WASM"]["m_pMemory"]=null;return[]});