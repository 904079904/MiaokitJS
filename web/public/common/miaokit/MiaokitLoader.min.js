var MiaokitModule=function(a,b){if(a===void 0){a={m_bUnity:true,m_pUnityPath:undefined,m_pModulePath:undefined,m_pServer:undefined}}if(b===void 0){b="WWW.YONGTOC.COM"}var c=this;c["m_pEngine"]=a.m_bUnity?"Unity":"Sisyphus";c["m_pEnginePath"]=a.m_pUnityPath;c["m_pModulePath"]=a.m_pModulePath;c["m_pServer"]=a.m_pServer;c["m_pID"]=b;c["Merge"](c)};var MiaokitMerge=function(d){var e=[];d["Merge"]=d["Merge"]||function(f){for(var g=0,h=e;g<h.length;g++){var i=h[g];var j=i(f);if(j){for(var k=0,l=j;k<l.length;k++){var m=l[k];f[m._name]=m}}}};return function(n){e.push(n)}}(MiaokitModule.prototype);MiaokitMerge(function(o){var p=undefined;var q=undefined;var r={};var s=function(v,w){if(w===void 0){w=undefined}var x=0;this.length=v(-1);this[Symbol.iterator]=function(){return{next:function(){var y=v(x);if(y){var z=p(y);x=w?x+1:z.m_nObject;return{value:z,done:false}}return{value:undefined,done:true}}}}};var t={AddShader:function(A,B,C,D){var E=this.m_pShader[A];if(E){return}var F=this.m_pShaderLut.length;E={m_nID:F,m_nType:"VS"===B?1:2,m_pName:A,m_pSrc:C};this.m_pShader[A]=E;this.m_pShaderLut.push(E);if(D){var G=this.m_pTextEncoder.encode(E["m_pSrc"]);var H=o["WASM"]["Malloc"](G.byteLength);o["WASM"].HEAPU8(H,G.byteLength).set(G);D(0,F,E["m_nType"],H,G.byteLength)}return F},AddProgram:function(I,J,K,L){var M=this.m_pProgram[I];if(M){return}var N=this.m_pProgramLut.length;var O=this.m_pShader[J];var P=this.m_pShader[K];if(!O||!P){return}M={m_nID:N,m_pName:I,m_nVSID:O["m_nID"],m_nPSID:P["m_nID"]};this.m_pProgram[I]=M;this.m_pProgramLut.push(M);if(L){L(0,N,M["m_nVSID"],M["m_nPSID"])}return N},m_pShader:{},m_pProgram:{},m_pShaderLut:[],m_pProgramLut:[],m_pTextEncoder:new TextEncoder};r["Transform"]=function(Q){Object.defineProperty(Q,"position",{get:function(){var R=this["_GetPosition"]()/4;var S=o["WASM"].HEAPF32();return{x:S[R],y:S[R+1],z:S[R+2]}},set:function(T){this["_SetPosition"](T.x,T.y,T.z)}});Object.defineProperty(Q,"euler",{get:function(){var U=this["_GetEuler"]()/4;var V=o["WASM"].HEAPF32();return{x:V[U],y:V[U+1],z:V[U+2]}},set:function(W){this["_SetEuler"](W.x,W.y,W.z)}});Object.defineProperty(Q,"rotation",{get:function(){var X=this["_GetRotation"]()/4;var Y=o["WASM"].HEAPF32();return{x:Y[X],y:Y[X+1],z:Y[X+2],w:Y[X+3]}},set:function(Z){this["_SetRotation"](Z.x,Z.y,Z.z,Z.w)}});Object.defineProperty(Q,"scale",{get:function(){var $=this["_GetScale"]()/4;var _=o["WASM"].HEAPF32();return{x:_[$],y:_[$+1],z:_[$+2]}},set:function(aa){this["_SetScale"](aa.x,aa.y,aa.z)}});Object.defineProperty(Q,"localPosition",{get:function(){var ba=this["_GetLocalPosition"]()/4;var ca=o["WASM"].HEAPF32();return{x:ca[ba],y:ca[ba+1],z:ca[ba+2]}},set:function(da){this["_SetLocalPosition"](da.x,da.y,da.z)}});Object.defineProperty(Q,"localEuler",{get:function(){var ea=this["_GetLocalEuler"]()/4;var fa=o["WASM"].HEAPF32();return{x:fa[ea],y:fa[ea+1],z:fa[ea+2]}},set:function(ga){this["_SetLocalEuler"](ga.x,ga.y,ga.z)}});Object.defineProperty(Q,"localRotation",{get:function(){var ha=this["_GetLocalRotation"]()/4;var ia=o["WASM"].HEAPF32();return{x:ia[ha],y:ia[ha+1],z:ia[ha+2],w:ia[ha+3]}},set:function(ja){this["_SetLocalRotation"](ja.x,ja.y,ja.z,ja.w)}});Object.defineProperty(Q,"localScale",{get:function(){var ka=this["_GetLocalScale"]()/4;var la=o["WASM"].HEAPF32();return{x:la[ka],y:la[ka+1],z:la[ka+2]}},set:function(ma){this["_SetLocalScale"](ma.x,ma.y,ma.z)}});Object.defineProperty(Q,"right",{get:function(){var na=this["_GetRight"]()/4;var oa=o["WASM"].HEAPF32();return{x:oa[na],y:oa[na+1],z:oa[na+2]}},set:function(pa){this["_SetRight"](pa.x,pa.y,pa.z)}});Object.defineProperty(Q,"up",{get:function(){var qa=this["_GetUp"]()/4;var ra=o["WASM"].HEAPF32();return{x:ra[qa],y:ra[qa+1],z:ra[qa+2]}},set:function(){var sa=this["_SetUp"]()/4;var ta=o["WASM"].HEAPF32();return{x:ta[sa],y:ta[sa+1],z:ta[sa+2]}}});Object.defineProperty(Q,"forward",{get:function(){var ua=this["_GetForward"]()/4;var va=o["WASM"].HEAPF32();return{x:va[ua],y:va[ua+1],z:va[ua+2]}},set:function(){var wa=this["_SetForward"]()/4;var xa=o["WASM"].HEAPF32();return{x:xa[wa],y:xa[wa+1],z:xa[wa+2]}}});Q["Rotate"]=function(ya,za){this["_Rotate"](ya.x,ya.y,ya.z,za)};Q["Rotate2"]=function(Aa,Ba,Ca){this["_Rotate2"](Aa.x,Aa.y,Aa.z,Ba,Ca)};Q["Translate"]=function(Da,Ea){this["_Translate"](Da.x,Da.y,Da.z,Ea)};Q["TransformPoint"]=function(Fa){var Ga=this["_TransformPoint"](Fa.x,Fa.y,Fa.z)/4;var Ha=o["WASM"].HEAPF32();return{x:Ha[Ga],y:Ha[Ga+1],z:Ha[Ga+2]}}};r["GameObject"]=function(Ia){Object.defineProperty(Ia,"name",{get:function(){if(!this._name){var Ja=this._GetName(0);var Ka=this._GetName(1);this._name=o["WASM"].GetString(Ka,Ja)}return this._name}});Object.defineProperty(Ia,"transform",{get:function(){return p(this["_GetTransform"]())}});Object.defineProperty(Ia,"mesh",{get:function(){return p(this["_GetMesh"]())},set:function(La){this["_SetMesh"](La.m_nObject)}});Object.defineProperty(Ia,"children",{get:function(){var Ma=this;return new s(function(Na){return Ma._IterChild(Na)},true)}});Object.defineProperty(Ia,"parent",{get:function(){return p(this["_GetParent"]())}});Object.defineProperty(Ia,"data",{get:function(){return p(this["_GetUserData"]())},set:function(Oa){}});Object.defineProperty(Ia,"enableCollider",{set:function(Pa){this["_EnableCollider"](Pa)}});Object.defineProperty(Ia,"active",{set:function(Qa){this["_Active"](Qa)}});Object.defineProperty(Ia,"highlight",{set:function(Ra){this["_Highlight"](Ra)}});Ia["Destory"]=function(){this["_Destory"]()};o["GameObject"]=function(){return p(Ia._GameObject())}};r["Miaokit"]=function(Sa){Sa["LoadTile"]=function(Ta){var Ua=this["_Malloc"](Ta.byteLength);if(Ua){o["WASM"]["HEAPU8"](Ua,Ta.byteLength).set(new Uint8Array(Ta));var Va=this["_LoadTile"](Ua,Ta.byteLength);var Wa=p(Va);return Wa}return null};Sa["Analyze"]=function(Xa){var Ya=this["_Analyze"]();var Za=o["WASM"].HEAP32()[Ya/4];var $a=o["WASM"].GetString(Ya+4,Za);try{var _a=JSON.parse($a);var ab=q(Xa).concat(_a);return ab}catch(bb){console.log($a)}return null};Sa["PickEntity"]=function(cb){return p(this["_PickEntity"](cb))};Sa["GetScene"]=function(db){return p(this["_GetScene"](db))};Sa["WorldToScreenPoint"]=function(eb){var fb=this["_WorldToScreenPoint"](eb.x,eb.y,eb.z)/4;var gb=o["WASM"].HEAPF32();return{x:gb[fb],y:gb[fb+1],z:gb[fb+2]}};Sa["ScreenPointToRay"]=function(hb){var ib=this["_ScreenPointToRay"](hb.x,hb.y,hb.z)/4;var jb=o["WASM"].HEAPF32();return{m_mOrigin:{x:jb[ib],y:jb[ib+1],z:jb[ib+2]},m_mDirection:{x:jb[ib+4],y:jb[ib+5],z:jb[ib+6]}}};Object.defineProperty(Sa,"camera",{get:function(){return p(this["_GetCamera"]())}});Object.defineProperty(Sa,"gis",{get:function(){if(!this._gis){this._gis=r["Gis"]["g_pIns"]}return this._gis}});Object.defineProperty(Sa,"progress",{get:function(){return this["_GetProgress"]()}})};r["Mesh"]=function(kb){kb["SetVertices"]=function(lb,mb){this["m_aVertex"]=this["m_aVertex"]||[];this["m_aVertex"].push({m_pArray:mb,m_nSlot:this["_SlotLut"][lb],m_nItemSize:this["_SizeLut"][lb]})};kb["SetIndices"]=function(nb,ob,pb){this["m_aIndex"]=this["m_aIndex"]||[];this["m_aIndex"][nb]={m_pArray:ob,m_nItemSize:pb}};kb["Apply"]=function(){var qb=this["m_aVertex"];var rb=this["m_aIndex"];if(!qb||!rb){return}var sb=2+2*qb.length+3*rb.length;var tb=this._CreateBuffer(sb);var ub=o["WASM"]["HEAP32"](tb,sb*4);var vb=0;ub[vb++]=qb.length;ub[vb++]=rb.length;for(var wb=0;wb<qb.length;wb++){ub[vb++]=qb[wb].m_nSlot;ub[vb++]=qb[wb].m_pArray.length/qb[wb].m_nItemSize}for(var wb=0;wb<rb.length;wb++){ub[vb++]=0;ub[vb++]=0;ub[vb++]=rb[wb].m_pArray.length}this._CreateBuffer(0);for(var wb=0;wb<qb.length;wb++){var xb=qb[wb].m_pArray;var yb=this._GetVertexBuffer(wb);var zb=o["WASM"]["HEAPF32"](yb,xb.length*4);zb.set(xb)}for(var wb=0;wb<rb.length;wb++){var xb=rb[wb].m_pArray;var yb=this._GetIndexBuffer(wb);var zb=o["WASM"]["HEAP32"](yb,xb.length*4);zb.set(xb)}this._Apply();this["m_aVertex"]=undefined;this["m_aIndex"]=undefined};kb["_SlotLut"]={position:0,normal:1,uv:2,color:3,tangent:4,uv2:9,uv3:10,uv4:11,uv5:12,uv6:13,uv7:14,uv8:15};kb["_SizeLut"]={position:3,normal:3,uv:2,color:4,tangent:4,uv2:2,uv3:2,uv4:2,uv5:2,uv6:2,uv7:2,uv8:2};Object.defineProperty(kb,"position",{set:function(Ab){this.SetVertices("position",Ab)}});Object.defineProperty(kb,"normal",{set:function(Bb){this.SetVertices("normal",Bb)}});Object.defineProperty(kb,"uv",{set:function(Cb){this.SetVertices("uv",Cb)}});Object.defineProperty(kb,"triangles",{set:function(Db){this.SetIndices(0,Db)}});Object.defineProperty(kb,"material",{set:function(Eb){this.SetMaterial(0,Eb)}});o["Mesh"]=function(){return p(kb._Mesh())}};r["Texture2D"]=function(Fb){Fb["SetImageData"]=function(Gb){var Hb=this._CreateBuffer(Gb.byteLength);if(Hb){o["WASM"]["HEAPU8"](Hb,Gb.byteLength).set(new Uint8Array(Gb));this._Apply()}};Fb["Load"]=function(Ib){var Jb=this;o["Fetch"](Ib,function(Kb){if(Kb){Jb.SetImageData(Kb)}})};o["Texture2D"]=function(Lb){var Mb=p(Fb._Texture2D());if(Lb){if("string"===typeof Lb){this.Load(Lb)}else{this.SetImageData(Lb)}}return Mb}};r["Material"]=function(Nb){Nb["GetTexture"]=function(){return p(this["_GetTexture"]())};Nb["SetTexture"]=function(Ob){this["_SetTexture"](Ob.m_nObject)};if(true){Nb["Bind"]=function(){if(!this._shader){console.error("material.shader is null!");return}this._shader.bind(this)};Object.defineProperty(Nb,"shader",{get:function(){return this._shader},set:function(Pb){if(Pb){var Qb=o["ShaderLab"].GetShader(Pb);if(Qb){var Rb=this._shader?this._shader.data:{};var Sb=new Qb.uniforms_class(Rb);this._shader=Qb;this.uniforms=Sb}}}})}o["Material"]=function(Tb){if(Tb===void 0){Tb=undefined}var Ub=p(Nb._Material());if(Tb){if("Unity"===o["m_pEngine"]){console.error("Unity渲染器暂不支持自定义着色器!");return Ub}var Vb=o["Material"]["AddShader"](Tb["VS"]["m_pName"],"VS",Tb["VS"]["m_pSrc"]);var Wb=o["Material"]["AddShader"](Tb["PS"]["m_pName"],"PS",Tb["PS"]["m_pSrc"]);var Xb=o["Material"]["AddProgram"](Tb["m_pName"],Tb["VS"]["m_pName"],Tb["PS"]["m_pName"])}return Ub}};r["Tile"]=function(Yb){Object.defineProperty(Yb,"scenes",{get:function(){var Zb=this;return new s(function($b){return Zb._IterWork($b)})}})};r["Scene"]=function(_b){_b["GetLayer"]=function(ac){return p(this["_GetLayer"](ac))};Object.defineProperty(_b,"id",{get:function(){if(!this._id){var bc=this._GetID(0);var cc=this._GetID(1);this._id=o["WASM"].GetString(cc,bc)}return this._id}});Object.defineProperty(_b,"layers",{get:function(){var dc=this;return new s(function(ec){return dc._IterLayer(ec)})}});Object.defineProperty(_b,"object3D",{get:function(){if(undefined===this._object3D){var fc=this._GetObject(this.m_nObject);if(0===fc){this._object3D=null;return null}this._object3D=p(fc)}return this._object3D}});Object.defineProperty(_b,"viewState",{get:function(){return{m_mTarget:{x:0,y:0,z:0},m_nPitch:45,m_nYaw:0,m_nDistance:60,m_mOrthoTarget:{x:0,y:0,z:0},m_nOrthoScaled:0,m_nOrthoRotate:0}}});Object.defineProperty(_b,"binding",{get:function(){return p(this._GetBinding())}})};r["Layer"]=function(gc){Object.defineProperty(gc,"id",{get:function(){if(!this._id){var hc=this._GetID(0);var ic=this._GetID(1);this._id=o["WASM"].GetString(ic,hc)}return this._id}});Object.defineProperty(gc,"sites",{get:function(){var jc=this;return new s(function(kc){return jc._IterSite(kc)})}});Object.defineProperty(gc,"object3D",{get:function(){if(undefined===this._object3D){var lc=this._GetObject(this.m_nObject);if(0===lc){this._object3D=null;return null}this._object3D=p(lc)}return this._object3D}});Object.defineProperty(gc,"viewState",{get:function(){var mc=this["_GetViewState"]();if(0<mc){var nc=o["WASM"]["HEAPF32"](mc,4*11);var oc=0;return{m_mTarget:{x:nc[oc++],y:nc[oc++],z:nc[oc++]},m_nPitch:nc[oc++],m_nYaw:nc[oc++],m_nDistance:nc[oc++],m_mOrthoTarget:{x:nc[oc++],y:nc[oc++],z:nc[oc++]},m_nOrthoScaled:nc[oc++],m_nOrthoRotate:nc[oc++]}}return null}})};r["Attachment"]=function(pc){Object.defineProperty(pc,"entityType",{get:function(){return this._GetEntityType()}});Object.defineProperty(pc,"secondType",{get:function(){return this._GetSecondType()}});Object.defineProperty(pc,"flag",{get:function(){return this._GetFlag()}});Object.defineProperty(pc,"object3D",{get:function(){return p(this._GetObject())}});Object.defineProperty(pc,"viewState",{get:function(){var qc=this["_GetViewState"]();if(0<qc){var rc=o["WASM"]["HEAPF32"](qc,4*11);var sc=0;var tc={m_mTarget:{x:rc[sc++],y:rc[sc++],z:rc[sc++]},m_nPitch:rc[sc++],m_nYaw:rc[sc++],m_nDistance:rc[sc++],m_mOrthoTarget:{x:rc[sc++],y:rc[sc++],z:rc[sc++]},m_nOrthoScaled:rc[sc++],m_nOrthoRotate:rc[sc++]};console.log("attachment view:",tc);return tc}else{console.log("attachment view: null")}return null}})};r["Site"]=function(uc){Object.defineProperty(uc,"id",{get:function(){if(!this._id){var vc=this._GetID(0);var wc=this._GetID(1);this._id=o["WASM"].GetString(wc,vc)}return this._id}});Object.defineProperty(uc,"layer",{get:function(){return p(this["_Layer"]())}});Object.defineProperty(uc,"scene",{get:function(){return p(this["_Scene"]())}});Object.defineProperty(uc,"type",{get:function(){return this["_Type"]()}});Object.defineProperty(uc,"number",{get:function(){return this["_Number"]()}});Object.defineProperty(uc,"position",{get:function(){var xc=this["_Position"]()/4;var yc=o["WASM"].HEAPF32();return{x:yc[xc],y:yc[xc+1],z:yc[xc+2]}}})};r["Prefab"]=function(zc){zc["Instantiate"]=function(){return p(this["_Instantiate"]())};o["LoadPrefab"]=function(Ac,Bc){o["Fetch"](Ac,function(Cc){var Dc=null;if(Cc){var Ec=zc._Prefab();var Fc=p(Ec);var Gc=Fc.CreateBuffer(Cc.byteLength);if(Gc){o["WASM"]["HEAPU8"](Gc,Cc.byteLength).set(new Uint8Array(Cc));Fc.Apply();Dc=Fc}}Bc(Dc)})}};r["Gis"]=function(Hc){Hc["Update"]=function(Ic,Jc,Kc){return this["_Update"](Ic,Jc,Kc)};Hc["AddSvetile"]=function(Lc){var Mc=o["WASM"]["EncodeString"](Lc.m_pUrl);var Nc=this["_CreateSvetileDesc"](Mc.byteLength);var Oc=o["WASM"]["HEAPU32"](Nc,4*8);Oc[0]=Lc.m_nID;Oc[1]=Lc.m_nFlags;o["WASM"]["HEAPU8"](Oc[2],Mc.byteLength).set(Mc,0);Oc[3]=0;Oc[4]=o["WASM"]["RegisterDelegate"](function(Qc,Rc){Lc.OnActive(p(Qc),0<Rc)});var Pc=o["WASM"]["HEAPF32"](Nc+20,16);Pc[0]=Lc.m_mLngLat.x;Pc[1]=Lc.m_mLngLat.y;Pc[2]=Lc.m_mSize.x;Pc[3]=Lc.m_mSize.y;this["_AddSvetile"](Nc)};Hc["AddMapbox"]=function(Sc){var Tc=this["_GetMapboxDesc"]();var Uc=o["WASM"]["HEAPF32"](Tc,40);Uc[0]=Sc.m_mOffset.x;Uc[1]=Sc.m_mOffset.y;Uc[2]=Sc.m_mOffset.z;Uc[3]=Sc.m_mScale.x;Uc[4]=Sc.m_mScale.y;Uc[5]=Sc.m_mScale.z;Uc[6]=Sc.m_mLngLat.x;Uc[7]=Sc.m_mLngLat.y;Uc[8]=Sc.m_mSize.x;Uc[9]=Sc.m_mSize.y;this["_AddMapbox"](Tc)};Hc["AddGameObject"]=function(Vc,Wc,Xc){this["_AddGameObject"](Vc.m_nObject,Wc,Xc)};Object.defineProperty(Hc,"imageServer",{set:function(Yc){if(!Yc){Yc="http://t%d.tianditu.gov.cn/DataServer?T=vec_c&tk=fb14b0853d59b619e18c259898bd0d4d&x=%d&y=%d&l=%d"}var Zc=this["_GetServer"](0);o["WASM"].SetString(Zc,Yc)}});Object.defineProperty(Hc,"terrainServer",{set:function($c){if(!$c){$c="https://t%d.tianditu.gov.cn/dem_sjk/DataServer?T=ele_c&tk=fb14b0853d59b619e18c259898bd0d4d&x=%d&y=%d&l=%d"}var _c=this["_GetServer"](1);o["WASM"].SetString(_c,$c)}})};r["Dioramas3MX"]=function(ad){ad["_Load3MX"]=function(bd,cd,dd){var ed=this;var fd=ed.m_pFileLut[bd];var gd=fd.m_pPath+fd.m_aFile[cd];o["Request"]("GET","arraybuffer",gd,null,null,function(hd){if(!hd){return}var id=new Uint32Array(hd,0,2);if(1113083187===id[0]){var jd=id[1]>>8;var kd=9+jd;var ld=hd.byteLength-kd;var md=new Uint8Array(hd,9,jd);var nd=ed.m_pTextDecoder.decode(md);var od=JSON.parse(nd);var pd={m_pPath:gd.substring(0,gd.lastIndexOf("/")+1),m_aFile:[]};var qd=[];var rd=[];var sd=od.resources;var td=0;for(var ud=0;ud<sd.length;ud++){qd.push(ud);if("textureBuffer"===sd[ud].type){qd.push(0);rd.push(ud);if("jpg"===sd[ud].format){qd.push(0)}else if("png"===sd[ud].format){qd.push(1)}else{qd.push(1e4)}}else if("geometryBuffer"===sd[ud].type){qd.push(1);if("ctm"===sd[ud].format){qd.push(0)}else{qd.push(1e4)}}else{qd.push(1e4);qd.push(1e4)}qd.push(sd[ud].size);qd.push(td);td+=sd[ud].size;qd.push(1e4);if(sd[ud].texture){for(var vd=0;vd<sd.length;vd++){if(sd[ud].texture===sd[vd].id){qd[qd.length-1]=vd;break}}}}var wd=[];var xd=od.nodes;for(var ud=0;ud<xd.length;ud++){var yd=xd[ud];var zd=yd.bbMax[0]-yd.bbMin[0];var Ad=yd.bbMax[1]-yd.bbMin[1];var Bd=yd.bbMax[2]-yd.bbMin[2];var Cd=Math.sqrt(zd*zd+Ad*Ad+Bd*Bd);wd.push(Math.floor(parseInt(yd.bbMin[0]+yd.bbMax[0])*.5*100));wd.push(Math.floor(parseInt(yd.bbMin[1]+yd.bbMax[1])*.5*100));wd.push(Math.floor(parseInt(yd.bbMin[2]+yd.bbMax[2])*.5*100));wd.push(Math.floor(Cd*100));wd.push(Math.floor(yd.maxScreenDiameter));var Dd=yd.children?yd.children.length:0;if(0<Dd){wd.push(pd.m_aFile.length);for(var vd=0;vd<Dd;vd++){pd.m_aFile.push(yd.children[vd])}wd.push(pd.m_aFile.length)}else{wd.push(-1);wd.push(-1)}var Ed=yd.resources?yd.resources.length:0;if(0<Ed){wd.push(rd.length);for(var vd=0;vd<Ed;vd++){for(var Fd=0;Fd<sd.length;Fd++){if(yd.resources[vd]===sd[Fd].id){rd.push(Fd);break}}}wd.push(rd.length)}else{wd.push(-1);wd.push(-1)}}var Gd=4+9*xd.length+6*rd.length;var Hd=4*Gd;var Id=Hd+ld;var Jd=ed["_CreateBuffer"](Id);if(Jd){var Kd=o["WASM"]["HEAP32"](Jd,Hd);Kd[0]=Hd;Kd[1]=xd.length;Kd[2]=rd.length;Kd[3]=ed.m_pFileLut.length;Kd.set(wd,4);var Ld=4+wd.length;for(var ud=0;ud<rd.length;ud++){var Md=6*rd[ud];for(var vd=0;vd<6;vd++){Kd[Ld++]=qd[Md++]}}var Nd=o["WASM"]["HEAPU8"](Jd+Hd,ld);Nd.set(new Uint8Array(hd,kd,ld));ed["_Dispose"](dd)}ed.m_pFileLut.push(pd)}})};ad["Update"]=function(){return this["_Update"]()};Object.defineProperty(ad,"object3D",{get:function(){return p(this["_GetObject"]())}});o["Dioramas3MX"]=function(Od,Pd){var Qd=p(ad._Dioramas3MX());Qd.m_pFileLut=[];Qd.m_pTextDecoder=new TextDecoder("utf-8");if(Pd){if(Pd.m_pGis){Pd.m_pGis.AddGameObject(Qd.object3D,Pd.m_mLngLat.x,Pd.m_mLngLat.y);Qd.object3D.transform.Translate(Pd.m_mOffset,1);Qd.object3D.transform.Rotate({x:0,y:0,z:0},1)}}o["Request"]("GET","json",Od,null,null,function(Rd){Qd["m_pMeta"]=Rd;var Sd={m_pPath:Od.substring(0,Od.lastIndexOf("/")+1),m_aFile:[]};var Td=[0];for(var Ud=0;Ud<Rd.layers.length;Ud++){if("meshPyramid"===Rd.layers[Ud].type){Td.push(Ud);Td.push(Sd.m_aFile.length);Sd.m_aFile.push(Rd.layers[Ud].root)}}Td[0]=Sd.m_aFile.length;var Vd=Qd["_CreateBuffer"](4*Td.length);var Wd=o["WASM"]["HEAP32"](Vd,4*Td.length);Wd.set(Td);Qd["_Initialize"](Vd);Qd.m_pFileLut.push(Sd)});return Qd}};function u(Xd,Yd,Zd){p=Yd;q=Zd;for(var $d=0,_d=Xd;$d<_d.length;$d++){var ae=_d[$d];if(ae){var be=ae.prototype;if(r[be._type_name]){r[be._type_name](be)}if("Miaokit"===be._type_name){o["Miaokit"]=new ae(0,0)}else if("Gis"===be._type_name){r["Gis"]["g_pIns"]=new ae(0,0)}}}}o["WASM"]=o["WASM"]||{};o["WASM"]["LoadClass"]=u;return[]});MiaokitMerge(function(ce){ce["m_pLogo"]=null;ce["m_pEngine"]=ce["m_pEngine"]||"Unity";ce["m_pEnginePath"]=ce["m_pEnginePath"]||"js/Miaokit/MiaokitU3D/Build/MiaokitU3D.json";ce["m_pModulePath"]=ce["m_pModulePath"]||"./js/Miaokit/Miaokit.wasm";ce["m_pServer"]=ce["m_pServer"]||"http://sve.yongtoc.com/";ce["m_aTiles"]=[];var de=ce["m_pEngine"];var ee=ce["m_pEnginePath"];var fe=ce["m_pModulePath"];var ge=ce["m_pServer"];var he=ce["m_aTiles"];var ie=undefined;var je=false;function ke(){ce["Track"]("Preload");ce["Fetch"](fe,function(pe){if(ie){ie(pe)}else{ie=pe}});var ne=function(qe){var re=he[qe];ce["Fetch"](re.m_pPath,function(se){re["m_pData"]=se;re["m_pTile"]=null;if(he["m_pLoader"]){he["m_pLoader"](re)}})};for(var oe=0;oe<he.length;oe++){ne(oe)}}function le(te,ue){ce["Track"]("LoadEngine");ce["WASM"]["LoadEngine"]({OnEngineLoad:function(ve){ce["Track"]("LoadEngine End");if(ie){ce["Track"]("LoadMiaokit");ce["WASM"]["LoadMiaokit"](ie,ve,function(){me(function(){te();je=true})})}else{ce["Track"]("LoadMiaokit Delay");ie=function(we){ce["Track"]("LoadMiaokit");ce["WASM"]["LoadMiaokit"](we,ve,function(){me(function(){te();je=true})})}}},OnRenderingEvent:function(xe){if(je){ue(xe)}}})}function me(ye){ce["Track"]("LoadMiaokit End");var ze=he.length;if(0==ze){ye()}he["m_pLoader"]=function(Ce){Ce["m_pTile"]=ce["Miaokit"]["LoadTile"](Ce["m_pData"]);Ce["m_pData"]=null;if(Ce["Active"]){Ce["Active"]()}if(0===--ze){ye()}};for(var Ae=0;Ae<he.length;Ae++){var Be=he[Ae];if(Be["m_pData"]){he["m_pLoader"](Be)}}}ke["_name"]="Preload";le["_name"]="Load";return[ke,le]});MiaokitMerge(function(De){var Ee=function(){function Ge(){}Ge.Clamp=function(He,Ie,Je){if(He>Je){return Je}if(He<Ie){return Ie}return He};return Ge}();var Fe=function(){function Ke(Le,Me,Ne){this.x=0;this.y=0;this.z=0;this.x=Le;this.y=Me;this.z=Ne}Ke.Scale=function(Oe,Pe){return{x:Pe.x*Oe,y:Pe.y*Oe,z:Pe.z*Oe}};return Ke}();Ee["_name"]="Mathf";Fe["_name"]="Vector3";return[Ee,Fe]});MiaokitMerge(function(Qe){var Re=null;var Se=null;var Te=null;var Ue=[null];var Ve=[null];var We=[null];var Xe=1;var Ye=0;var Ze=[undefined];var $e=null;function _e(lf){lf["isnanf"]=isNaN;lf["isinff"]=isFinite;lf["powf"]=Math.pow;lf["sqrtf"]=Math.sqrt;lf["expf"]=Math.exp;lf["logf"]=Math.log;lf["floorf"]=Math.floor;lf["ceilf"]=Math.ceil;lf["sinf"]=Math.sin;lf["cosf"]=Math.cos;lf["tanf"]=Math.tan;lf["asinf"]=Math.asin;lf["acosf"]=Math.acos;lf["atanf"]=Math.atan;lf["atan2f"]=Math.atan2;lf["ldexpf"]=function(mf,nf){return mf*Math.pow(2,nf)}}function af(of){var pf=Qe["GL"];of["glTexImage2DExt"]=function(qf,rf){var sf=Ve[rf];if(sf){pf.Ctx.texImage2D(qf,0,pf.Ctx.RGB,pf.Ctx.RGB,pf.Ctx.UNSIGNED_BYTE,sf);Ve[rf]=null}};of["glCreateShader"]=pf._glCreateShader;of["glDeleteShader"]=pf._glDeleteShader;of["glShaderSource"]=pf._glShaderSource;of["glCompileShader"]=pf._glCompileShader;of["glGetShaderiv"]=pf._glGetShaderiv;of["glGetShaderInfoLog"]=pf._glGetShaderInfoLog;of["glCreateProgram"]=pf._glCreateProgram;of["glDeleteProgram"]=pf._glDeleteProgram;of["glAttachShader"]=pf._glAttachShader;of["glLinkProgram"]=pf._glLinkProgram;of["glUseProgram"]=pf._glUseProgram;of["glGetProgramiv"]=pf._glGetProgramiv;of["glGetProgramInfoLog"]=pf._glGetProgramInfoLog;of["glBindAttribLocation"]=pf._glBindAttribLocation;of["glGenVertexArrays"]=pf._glGenVertexArrays;of["glDeleteVertexArrays"]=pf._glDeleteVertexArrays;of["glBindVertexArray"]=pf._glBindVertexArray;of["glVertexAttribPointer"]=pf._glVertexAttribPointer;of["glEnableVertexAttribArray"]=pf._glEnableVertexAttribArray;of["glGetActiveUniform"]=pf._glGetActiveUniform;of["glGetUniformLocation"]=pf._glGetUniformLocation;of["glUniform1i"]=pf._glUniform1i;of["glUniform1fv"]=pf._glUniform1fv;of["glUniform2fv"]=pf._glUniform2fv;of["glUniform3fv"]=pf._glUniform3fv;of["glUniform4fv"]=pf._glUniform4fv;of["glUniform1iv"]=pf._glUniform1iv;of["glUniform2iv"]=pf._glUniform2iv;of["glUniform3iv"]=pf._glUniform3iv;of["glUniform4iv"]=pf._glUniform4iv;of["glUniformMatrix3fv"]=pf._glUniformMatrix3fv;of["glUniformMatrix4fv"]=pf._glUniformMatrix4fv;of["glGenTextures"]=pf._glGenTextures;of["glDeleteTextures"]=pf._glDeleteTextures;of["glActiveTexture"]=pf._glActiveTexture;of["glBindTexture"]=pf._glBindTexture;of["glTexStorage2D"]=pf._glTexStorage2D;of["glTexParameteri"]=pf._glTexParameteri;of["glTexImage2D"]=pf._glTexImage2D;of["glGenerateMipmap"]=pf._glGenerateMipmap;of["glGenBuffers"]=pf._glGenBuffers;of["glDeleteBuffers"]=pf._glDeleteBuffers;of["glBindBuffer"]=pf._glBindBuffer;of["glBufferData"]=pf._glBufferData;of["glMapBufferRange"]=pf._glMapBufferRange;of["glUnmapBuffer"]=pf._glUnmapBuffer;of["glGenFramebuffers"]=pf._glGenFramebuffers;of["glDeleteFramebuffers"]=pf._glDeleteFramebuffers;of["glBindFramebuffer"]=pf._glBindFramebuffer;of["glFramebufferTexture2D"]=pf._glFramebufferTexture2D;of["glCheckFramebufferStatus"]=pf._glCheckFramebufferStatus;of["glClearColor"]=pf._glClearColor;of["glClear"]=pf._glClear;of["glBlendFuncSeparate"]=pf._glBlendFuncSeparate;of["glBlendEquationSeparate"]=pf._glBlendEquationSeparate;of["glEnable"]=pf._glEnable;of["glDisable"]=pf._glDisable;of["glDepthFunc"]=pf._glDepthFunc;of["glDepthMask"]=pf._glDepthMask;of["glClearDepthf"]=pf._glClearDepthf;of["glClearStencil"]=pf._glClearStencil;of["glCullFace"]=pf._glCullFace;of["glPolygonOffset"]=pf._glPolygonOffset;of["glViewport"]=pf._glViewport;of["glDrawArrays"]=pf._glDrawArrays;of["glDrawArraysInstanced"]=pf._glDrawArraysInstanced;of["glDrawElements"]=pf._glDrawElements;of["glDrawElementsInstanced"]=pf._glDrawElementsInstanced;of["glFlush"]=pf._glFlush;of["glFinish"]=pf._glFinish}function bf(tf){function uf(Df){var Ef=Qe["WASM"].GetString(Df);if(!Ef.startsWith("http")){Ef=Qe["m_pServer"]+Ef}if(Ef.endsWith("assetbundle")){Ef+=".bin"}return Ef}function vf(Ff,Gf,Hf,If){var Jf=uf(Ff);var Kf=Re.get(Hf);var Lf=Re.get(If);Qe["Fetch"](Jf,function(Mf){if(Mf){var Nf=Kf(Gf,Mf.byteLength);if(Nf){Qe["WASM"]["HEAPU8"](Nf,Mf.byteLength).set(new Uint8Array(Mf))}}else{console.error("资源丢失:",Jf)}Lf(Gf)})}function wf(Of,Pf,Qf){var Rf=uf(Of);var Sf=Re.get(Qf);var Tf=new Image;Tf.crossOrigin="anonymous";Tf.src=Rf;Tf.onload=function(Uf){Sf(Pf,Ve.push(Tf)-1)}}function xf(Vf,Wf,Xf,Yf){vf(Vf,Wf,Xf,Yf)}function yf(Zf,$f,_f,ag){$e["LoadTerrain"](Zf,$f,_f,ag)}function zf(bg,cg,dg,eg){var fg=Qe["WASM"]["HEAP32"](bg,16);$e["LoadBlockbox"](cg,fg[0],fg[1],fg[2],fg[3],dg,eg)}function Af(gg,hg){var ig=Qe["WASM"]["HEAP32"](gg,12);var jg=ef(ig[0]);if(jg){jg["_Load3MX"](ig[1],ig[2],hg)}}function Bf(kg,lg,mg,ng){vf(kg,lg,mg,ng)}var Cf=[undefined,vf,wf,xf,yf,zf,Af,Bf];tf["APP_LOAD"]=function(og,pg,qg,rg,sg){Cf[og](pg,qg,rg,sg)}}function cf(tg){var ug={NaN:NaN,Infinity:Infinity};_e(tg);af(tg);bf(tg);tg["APP_DYNAMIC_LINK"]=function(vg,wg){var xg=Qe["WASM"]["HEAPU32"](vg,wg);var yg=xg[0];var zg=xg[1];for(var Ag=0;Ag<yg;Ag++){var Bg=xg[2+Ag]-1;var Cg=xg[zg++];var Dg=xg[zg++];var Eg=Qe["WASM"].GetString(Cg,Dg);var Fg=JSON.parse(Eg);var Gg=function(Kg,Lg){this["m_nID"]=Kg;this["m_nObject"]=Lg};var Hg=Gg.prototype;Hg["_type_name"]=Fg[0];Hg["_type_id"]=Ag+1;Hg["_ins_count"]=0;Ze[Ag+1]=Gg;var Ig=function(Mg){var Ng=Re.get(xg[zg++]);zg++;var Og=function(){var Pg=Array.prototype.slice.call(arguments);Pg.unshift(this.m_nObject);return Ng.apply(this,Pg)};if(0===Mg){Hg["_"+Fg[Mg]]=Og}else{Hg[Fg[Mg]]=Og}};for(var Jg=0;Jg<Bg;Jg++){Ig(Jg)}}Qe["WASM"]["LoadClass"](Ze,ef,hf);Qe["Miaokit"]["ResizeCavans"]=function(Qg,Rg){if(Te.SE_RESIZE){Te.SE_RESIZE(Qg,Rg)}}};tg["APP_PRINT"]=function(Sg,Tg,Ug){var Vg=Qe["WASM"].GetString(Sg,Tg);Qe["Track"](Vg,Ug)};tg["APP_DO_ACTION"]=function(Wg,Xg,Yg,Zg){Ue[Wg](Xg,Yg,Zg)};tg["APP_CREATE_OBJ"]=function($g,_g){if(0<$g){var ah=ff();var bh=new Ze[$g](ah,_g);We[ah]=bh;Ze[$g].prototype._ins_count++;return ah}else{if(-21==$g){var ch=Qe["WASM"]["HEAP32"](_g,16);var dh=ch[0];var eh=ch[1];var fh=ch[2];var gh=ch[3];var hh=Qe["WASM"]["HEAP8"](fh,eh);var ih=new Blob([hh]);var jh=window.URL.createObjectURL(ih);var kh=Re.get(gh);var lh=new Image;lh.src=jh;lh.onload=function(mh){kh(dh,Ve.push(lh)-1);window.URL.revokeObjectURL(jh)}}}return 0};tg["APP_FREE_OBJ"]=function(nh){var oh=We[nh];Ze[oh._type_id].prototype._ins_count--;gf(nh)};tg["APP_DO"]=function(ph,qh,rh,sh){var th=ef(qh);if(th){return Qe["ShaderLab"].SetMaterial(th,ph,rh,sh)}return 0};Se=tg["memory"];Qe["WASM"]["m_pMemory"]=Qe["WASM"]["m_pMemory"]||Se;return{env:tg,global:ug}}function df(uh,vh,wh){vh=cf(vh);WebAssembly.instantiate(uh,vh).then(function(xh){return xh.instance}).then(function(yh){Te=yh.exports;Re=Te.__indirect_function_table;Qe["WASM"]["Update"]=yh.exports.SE_UPDATE;Qe["WASM"]["Malloc"]=yh.exports.Malloc;Qe["WASM"]["Free"]=yh.exports.Free;Qe["GL"]["GetTextureByID"]=function(zh){var Ah=Te.SE_GL_RESOURCE(9,zh);return Qe["GL"]["GetTextureByHandle"](Ah)};Qe["Track"]("Start thread");Qe["WASM"]["Worker"]=kf(function(){Qe["Track"]("Start thread succeed")});Te.Start();wh()})}function ef(Bh){return We[Bh]}function ff(){var Ch=Xe;if(We.length>Xe){Xe=We[Xe]}else{Xe++}Ye++;return Ch}function gf(Dh){We[Dh]=Xe;Xe=Dh;Ye--}function hf(Eh){var Fh="'系统运行':{";Fh+="'时间':"+(Qe.Time()/1e3).toFixed(0);Fh+=", '帧率':"+Eh;Fh+=", 'WASM内存':"+Qe.WASM.m_pMemory.buffer.byteLength/1024/1024;Fh+="}";var Gh="'JS对象':{";Gh+="'工厂':["+We.length+", "+Ye+", "+(We.length-Ye)+"]";for(var Hh=1;Hh<Ze.length;Hh++){Gh+=", '"+Ze[Hh].prototype._type_name+"':"+Ze[Hh].prototype._ins_count}Gh+="}";return[Fh,Gh]}function jf(Ih){var Jh=Ue.length;Ue.push(Ih);return Jh}function kf(Kh){var Lh=Te.UTIL_WORKER_CODE();var Mh=Qe["WASM"]["HEAPU32"](Lh,16);if(false){$e=new Worker(window.URL.createObjectURL(new Blob([Qe["WASM"]["HEAPU8"](Mh[2],Mh[3])])));var Nh=Qe["WASM"]["HEAPU8"]().slice(Mh[0],Mh[0]+Mh[1]);var Oh=Nh.buffer;$e.postMessage({m_nID:1,m_aCode:Oh},[Oh])}else{var Ph=Qe["m_pModulePath"].replace(".wasm","");$e=new Worker(Ph+"Worker.min.js");fetch(Ph+"Worker.wasm").then(function(Qh){return Qh.arrayBuffer()}).then(function(Rh){if(Rh){$e.postMessage({m_nID:1,m_aCode:Rh},[Rh])}else{console.error("fetch error: ./js/Miaokit/MiaokitWorker.wasm",Rh)}}).catch(function(Sh){console.error("fetch error: ./js/Miaokit/MiaokitWorker.wasm",Sh)})}$e.onmessage=function(Th){var Uh=Th.data;switch(Uh.m_nID){case 1:Kh();Kh=null;break;case 2:$e["OnLoadTerrain"](Uh);break;case 3:$e["OnLoadBlockbox"](Uh);break;default:console.error("子线程消息异常:",Uh);break}};$e["LoadTerrain"]=function(Vh,Wh,Xh,Yh){$e.postMessage({m_nID:2,m_pPath:Qe["WASM"].GetString(Vh),m_nRequest:Wh,m_nAlloc:Xh,m_nCallback:Yh})};$e["OnLoadTerrain"]=function(Zh){var $h=Re.get(Zh.m_nAlloc);var _h=Re.get(Zh.m_nCallback);var ai=Zh.m_pData;if(ai){var bi=$h(Zh.m_nRequest,ai.byteLength);if(bi){Qe["WASM"]["HEAPU8"](bi,ai.byteLength).set(new Uint8Array(ai))}}else{console.warn("Terrain miss:",Zh.m_pPath)}_h(Zh.m_nRequest)};$e["LoadBlockbox"]=function ci(di,ei,fi,gi,hi,ii,ji){$e.postMessage({m_nID:3,m_nRequest:di,m_nCol:ei,m_nRow:fi,m_nColOffset:gi,m_nRowOffset:hi,m_nAlloc:ii,m_nCallback:ji})};$e["OnLoadBlockbox"]=function(ki){var li=Re.get(ki.m_nAlloc);var mi=Re.get(ki.m_nCallback);var ni=ki.m_pData;var oi=[0,0,0,0];for(var pi=0;pi<4;pi++){var qi=ni[pi];if(0<qi.m_nVertexCount&&0<qi.m_nSubmeshCount){var ri=new Qe.Mesh;var si=new Int32Array(qi.m_aIndex);ri.position=new Float32Array(qi.m_aPosition);ri.normal=new Float32Array(qi.m_aNormal);ri.uv=new Float32Array(qi.m_aUV);for(var ti=0;ti<qi.m_nSubmeshCount;ti++){var ui=si[2*ti];var vi=si[2*ti+1];var wi=[];for(var xi=ui;xi<vi;xi++){wi.push(xi)}ri.SetIndices(ti,new Int32Array(wi),4)}ri.Apply();oi[pi]=ri.m_nObject}else{oi[pi]=0}}var yi=li(ki.m_nRequest,16);if(yi){Qe["WASM"]["HEAPU32"](yi,16).set(new Uint32Array(oi));mi(ki.m_nRequest)}};return $e}Qe["WASM"]=Qe["WASM"]||{};Qe["WASM"]["LoadMiaokit"]=df;Qe["WASM"]["GetObject"]=ef;Qe["WASM"]["RegisterDelegate"]=jf;return[]});MiaokitMerge(function(zi){var Ai=undefined;var Bi=null;var Ci=1280;var Di=720;var Ei={Format:{RGBA32_FLOAT:function(){return[Ai.RGBA,Ai.FLOAT]},D16_UNORM:function(){return[Ai.DEPTH_COMPONENT,Ai.UNSIGNED_SHORT]}},DepthTest:{Never:0,Less:1,Equal:2,LessEqual:3,Greater:4,NotEqual:5,GreaterEqual:6,Always:7},BlendOP:{Add:32774,Sub:32778,RevSub:32779,Min:32775,Max:32776},BlendFactor:{Zero:0,One:1,SrcColor:768,InvSrcColor:769,DestColor:774,InvDestColor:775,SrcAlpha:770,InvSrcAlpha:771,DestAlpha:772,InvDestAlpha:773,MinAlpha:776},Mark:{Opaque:1,Transparent:2,Outline:4,CastShadow:8,ReceiveShadow:16}};function Fi(Mi){var Ni=Ai.createTexture();if(!Ni){console.error("Could not create texture object!");return null}Ai.bindTexture(Ai.TEXTURE_2D,Ni);Ai.texParameteri(Ai.TEXTURE_2D,Ai.TEXTURE_MIN_FILTER,Ai.LINEAR);Ai.texParameteri(Ai.TEXTURE_2D,Ai.TEXTURE_MAG_FILTER,Ai.LINEAR);Ai.texParameteri(Ai.TEXTURE_2D,Ai.TEXTURE_WRAP_S,Ai.CLAMP_TO_EDGE);Ai.texParameteri(Ai.TEXTURE_2D,Ai.TEXTURE_WRAP_T,Ai.CLAMP_TO_EDGE);var Oi=Ei.Format[Mi]();Ai.texImage2D(Ai.TEXTURE_2D,0,Oi[0],Ci,Di,0,Oi[0],Oi[1],null);Ai.bindTexture(Ai.TEXTURE_2D,null);return Ni}function Gi(Pi,Qi){var Ri=Ai.createFramebuffer();if(!Ri){console.error("Could not create framebuffer object!");return null}Ai.bindFramebuffer(Ai.FRAMEBUFFER,Ri);Ai.framebufferTexture2D(Ai.FRAMEBUFFER,Ai.COLOR_ATTACHMENT0,Ai.TEXTURE_2D,Pi,0);Ai.framebufferTexture2D(Ai.FRAMEBUFFER,Ai.DEPTH_ATTACHMENT,Ai.TEXTURE_2D,Qi,0);if(Ai.FRAMEBUFFER_COMPLETE!=Ai.checkFramebufferStatus(Ai.FRAMEBUFFER)){Ai.deleteFramebuffer(Ri);console.error("Framebuffer check failed!");return null}return Ri}function Hi(Si){if(!Si.Enable){return function(){Ai.disable(Ai.BLEND)}}else{var Ti={ColorOP:Ei.BlendOP[Si.ColorOP],AlphaOP:Ei.BlendOP[Si.AlphaOP],ColorSrc:Ei.BlendFactor[Si.ColorSrc],ColorDest:Ei.BlendFactor[Si.ColorDest],AlphaSrc:Ei.BlendFactor[Si.AlphaSrc],AlphaDest:Ei.BlendFactor[Si.AlphaDest]};return function(){Ai.enable(Ai.BLEND);Ai.blendEquationSeparate(Ti.ColorOP,Ti.AlphaOP);Ai.blendFuncSeparate(Ti.ColorSrc,Ti.ColorDest,Ti.AlphaSrc,Ti.AlphaDest)}}}function Ii(Ui){if(!Ui.Enable){return function(){Ai.disable(Ai.DEPTH_TEST)}}else{return function(){Ai.enable(Ai.DEPTH_TEST);Ai.depthMask(Ui.Write);Ai.depthFunc(Ai.NEVER+Ei.DepthTest[Ui.TestOP])}}}function Ji(Vi,Wi){var Xi=Ai.createShader(Vi);if(!Xi){console.error("Could not create shader object!");return null}Ai.shaderSource(Xi,Wi);Ai.compileShader(Xi);if(!Ai.getShaderParameter(Xi,Ai.COMPILE_STATUS)){var Yi=Ai.getShaderInfoLog(Xi);Ai.deleteShader(Xi);console.error("Could not compile shader! \n\n"+Yi);return null}return Xi}function Ki(Zi,$i){var _i=function(fj){this["data"]=fj||{}};$i=$i||{};var aj=Ai.getProgramParameter(Zi,Ai.ACTIVE_UNIFORMS);var bj=1;var cj=[];var dj=function(gj){var hj=Ai.getActiveUniform(Zi,gj);var ij=hj.name;var jj=Ai.getUniformLocation(Zi,ij);if(Ai.FLOAT===hj.type){if(undefined===$i[ij]){$i[ij]=[0]}Object.defineProperty(_i.prototype,ij,{get:function(){return this.data[ij]},set:function(mj){if(mj){this.data[ij]=mj;if(Bi===Zi){Ai.uniform1fv(jj,mj)}}}})}else if(Ai.FLOAT_VEC2===hj.type){if(undefined===$i[ij]){$i[ij]=[0,0]}Object.defineProperty(_i.prototype,ij,{get:function(){return this.data[ij]},set:function(nj){if(nj){this.data[ij]=nj;if(Bi===Zi){Ai.uniform2fv(jj,nj)}}}})}else if(Ai.FLOAT_VEC3===hj.type){if(undefined===$i[ij]){$i[ij]=[0,0,0]}Object.defineProperty(_i.prototype,ij,{get:function(){return this.data[ij]},set:function(oj){if(oj){this.data[ij]=oj;if(Bi===Zi){Ai.uniform3fv(jj,oj)}}}})}else if(Ai.FLOAT_VEC4===hj.type){if(undefined===$i[ij]){$i[ij]=[0,0,0,0]}Object.defineProperty(_i.prototype,ij,{get:function(){return this.data[ij]},set:function(pj){if(pj){this.data[ij]=pj;if(Bi===Zi){Ai.uniform4fv(jj,pj)}}}})}else if(Ai.INT===hj.type){if(undefined===$i[ij]){$i[ij]=[0]}Object.defineProperty(_i.prototype,ij,{get:function(){return this.data[ij]},set:function(qj){if(qj){this.data[ij]=qj;if(Bi===Zi){Ai.uniform1iv(jj,qj)}}}})}else if(Ai.INT_VEC2===hj.type){if(undefined===$i[ij]){$i[ij]=[0,0]}Object.defineProperty(_i.prototype,ij,{get:function(){return this.data[ij]},set:function(rj){if(rj){this.data[ij]=rj;if(Bi===Zi){Ai.uniform2iv(jj,rj)}}}})}else if(Ai.INT_VEC3===hj.type){if(undefined===$i[ij]){$i[ij]=[0,0,0]}Object.defineProperty(_i.prototype,ij,{get:function(){return this.data[ij]},set:function(sj){if(sj){this.data[ij]=sj;if(Bi===Zi){Ai.uniform3iv(jj,sj)}}}})}else if(Ai.INT_VEC4===hj.type){if(undefined===$i[ij]){$i[ij]=[0,0,0,0]}Object.defineProperty(_i.prototype,ij,{get:function(){return this.data[ij]},set:function(tj){if(tj){this.data[ij]=tj;if(Bi===Zi){Ai.uniform4iv(jj,tj)}}}})}else if(Ai.FLOAT_MAT3===hj.type){if(undefined===$i[ij]){$i[ij]=[1,0,0,0,1,0,0,0,1]}Object.defineProperty(_i.prototype,ij,{get:function(){return this.data[ij]},set:function(uj){if(uj){this.data[ij]=uj;if(Bi===Zi){Ai.uniformMatrix3fv(jj,false,uj)}}}})}else if(Ai.FLOAT_MAT4===hj.type){if(undefined===$i[ij]){$i[ij]=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}Object.defineProperty(_i.prototype,ij,{get:function(){return this.data[ij]},set:function(vj){if(vj){this.data[ij]=vj;if(Bi===Zi){Ai.uniformMatrix4fv(jj,false,vj)}}}})}else if(Ai.SAMPLER_2D===hj.type){var kj=bj++;if(undefined===$i[ij]){$i[ij]=null}Object.defineProperty(_i.prototype,ij,{get:function(){return this.data[ij]},set:function(wj){if(wj&&!(wj instanceof WebGLTexture)){if(zi["GL"][wj.func]){var xj=zi["GL"][wj.func](wj.param);if(xj){wj=xj}}}this.data[ij]=wj;if(Bi===Zi){var xj=wj;if(!xj||!(xj instanceof WebGLTexture)){xj=null}Ai.uniform1i(jj,kj);Ai.activeTexture(Ai.TEXTURE0+kj);Ai.bindTexture(Ai.TEXTURE_2D,xj)}}})}else if(Ai.SAMPLER_CUBE===hj.type){var lj=bj++;if(undefined===$i[ij]){$i[ij]=null}Object.defineProperty(_i.prototype,ij,{get:function(){return this.data[ij]},set:function(yj){if(yj&&!(yj instanceof WebGLTexture)){if(zi["GL"][yj.func]){var zj=zi["GL"][yj.func](yj.param);if(zj){yj=zj}}}this.data[ij]=yj;if(Bi===Zi){var zj=yj;if(!zj||!(zj instanceof WebGLTexture)){zj=null}Ai.uniform1i(jj,lj);Ai.activeTexture(Ai.TEXTURE0+lj);Ai.bindTexture(Ai.TEXTURE_CUBE_MAP,zj)}}})}else{Object.defineProperty(_i.prototype,ij,{get:function(){return undefined},set:function(Aj){}});console.error("unsupported uniform type:",hj)}cj.push(ij)};for(var ej=0;ej<aj;ej++){dj(ej)}_i.prototype.uniforms=new _i($i);_i.prototype.var_list=cj;return _i}var Li={_name:"ShaderLab",Shader:{},Pipeline:{},Init:function(Bj){Ai=Bj;for(var Cj=0,Dj=this.Pipeline.ColorTarget;Cj<Dj.length;Cj++){var Ej=Dj[Cj];if(Ej){Ej.Texture=Fi(Ej.Format)}}for(var Fj=0,Gj=this.Pipeline.DepthTarget;Fj<Gj.length;Fj++){var Hj=Gj[Fj];if(Hj){Hj.Texture=Fi(Hj.Format)}}for(var Ij=0,Jj=this.Pipeline.RenderTarget;Ij<Jj.length;Ij++){var Kj=Jj[Ij];if(Kj){var Ej=this.Pipeline.ColorTarget[Kj.ColorTarget].Texture;var Hj=this.Pipeline.DepthTarget[Kj.DepthTarget].Texture;console.log(Ej,Hj);Kj.Framebuffer=Gi(Ej,Hj)}}for(var Lj=0,Mj=this.Pipeline.BlendState;Lj<Mj.length;Lj++){var Nj=Mj[Lj];if(Nj){Nj.Bind=Hi(Nj)}}for(var Oj=0,Pj=this.Pipeline.DepthState;Oj<Pj.length;Oj++){var Nj=Pj[Oj];if(Nj){Nj.Bind=Ii(Nj)}}console.log(this.Pipeline)},GetShader:function(Qj){if(!Qj){return null}var Rj=this.Shader[Qj];if(!Rj){console.error("Could not find shader:",Qj);return null}if(Rj.program){return Rj}Rj.vs=Ji(Ai.VERTEX_SHADER,this.Shader["Common"].code_vs+Rj.code_vs);if(!Rj.vs){console.error("Could not create vertex shader:",Qj);return null}Rj.fs=Ji(Ai.FRAGMENT_SHADER,this.Shader["Common"].code_fs+Rj.code_fs);if(!Rj.fs){Ai.deleteShader(Rj.vs);Rj.vs=null;console.error("Could not create fragment shader:",Qj);return null}Rj.program=Ai.createProgram();if(!Rj.program){Ai.deleteShader(Rj.vs);Ai.deleteShader(Rj.fs);Rj.vs=null;Rj.fs=null;console.error("Could not create program object!");return null}Ai.attachShader(Rj.program,Rj.vs);Ai.attachShader(Rj.program,Rj.fs);{Ai.bindAttribLocation(Rj.program,0,"a_Position");Ai.bindAttribLocation(Rj.program,1,"a_Normal");Ai.bindAttribLocation(Rj.program,2,"a_UV");Ai.bindAttribLocation(Rj.program,3,"a_Color");Ai.bindAttribLocation(Rj.program,4,"a_Tangent");Ai.bindAttribLocation(Rj.program,5,"a_Binormal");Ai.bindAttribLocation(Rj.program,9,"a_UV2");if(7<Ai.getProgramParameter(Rj.program,Ai.ACTIVE_ATTRIBUTES)){Ai.bindAttribLocation(Rj.program,10,"a_UV3");Ai.bindAttribLocation(Rj.program,11,"a_UV4");Ai.bindAttribLocation(Rj.program,12,"a_UV5");Ai.bindAttribLocation(Rj.program,13,"a_UV6");Ai.bindAttribLocation(Rj.program,14,"a_UV7");Ai.bindAttribLocation(Rj.program,15,"a_UV8")}}Ai.linkProgram(Rj.program);if(!Ai.getProgramParameter(Rj.program,Ai.LINK_STATUS)){var Sj=Ai.getProgramInfoLog(Rj.program);Ai.deleteProgram(Rj.program);Ai.deleteShader(Rj.vs);Ai.deleteShader(Rj.fs);Rj.program=null;Rj.vs=null;Rj.fs=null;console.error("Could not compile program! \n\n"+Sj);return null}Rj.uniforms_class=Ki(Rj.program,Rj.data);Rj.uniforms=Rj.uniforms_class.prototype.uniforms;Rj.bind=function(Tj){Bi=Rj.program;Ai.useProgram(Rj.program);var Uj=Tj.uniforms;var Vj=Uj.uniforms;var Wj=Uj.var_list;for(var Xj=0,Yj=Wj;Xj<Yj.length;Xj++){var Zj=Yj[Xj];var $j=Uj[Zj];if(undefined!==$j){Uj[Zj]=$j}else{Vj[Zj]=Vj[Zj]}}};Object.defineProperty(Rj,"mode",{get:function(){if(undefined!==Rj.mode_){return Rj.mode_}var _j=0;if(Rj.mark){for(var ak=0,bk=Rj.mark;ak<bk.length;ak++){var ck=bk[ak];_j|=Ei.Mark[ck]}}Rj.mode_=_j;return _j}});return Rj},SetMaterial:function(dk,ek,fk,gk){var hk=dk.uniforms;var ik=null;var jk=null;switch(ek){case 1:dk.shader=zi["ShaderLab"]["Pipeline"]["InternalShader"][fk];return dk.shader.mode;case 2:dk.Bind();break;case 3:hk.u_MainTex={func:"GetTextureByHandle",param:gk};break;case 4:hk.u_MainTex={func:"GetTextureByID",param:fk};break;case 5:hk.u_MatW=zi["WASM"]["HEAPF32"](gk,4*16,true);break;case 6:hk.u_MatVP=zi["WASM"]["HEAPF32"](gk,4*16,true);break;case 7:hk.u_MatWVP=zi["WASM"]["HEAPF32"](gk,4*16,true);break;case 8:jk=zi["WASM"].GetString(gk);ik=hk.var_list;for(var kk=0;kk<ik.length;kk++){if(jk==ik[kk]){return kk}}return-1;case 9:jk=hk.var_list[fk];if(jk){hk[jk]={func:"GetTextureByHandle",param:gk}}break;case 10:jk=hk.var_list[fk];if(jk){hk[jk]={func:"GetTextureByID",param:gk}}break;default:if(15>ek){jk=hk.var_list[fk];if(jk){hk[jk]=zi["WASM"]["HEAP32"](gk,4*(ek-10),true)}}else if(19>ek){jk=hk.var_list[fk];if(jk){hk[jk]=zi["WASM"]["HEAPF32"](gk,4*(ek-14),true)}}else if(23){jk=hk.var_list[fk];if(jk){hk[jk]=zi["WASM"]["HEAPF32"](gk,4*9,true)}}else if(30){jk=hk.var_list[fk];if(jk){hk[jk]=zi["WASM"]["HEAPF32"](gk,4*16,true)}}else{console.error("Error material ctrl!")}break}return 0}};return[Li]});MiaokitMerge(function(lk){if("Sisyphus"!==lk["m_pEngine"]){return[]}var mk=undefined;var nk=true;function ok(tk){pk();mk=tk.OnRenderingEvent;qk();var uk={memory:new WebAssembly.Memory({initial:64*16,maximum:32768}),APP_PLUGIN_TYPE:function(){return 2},APP_MEM_TYPE:function(){return 2},APP_MEM_RESERVE:function(){return 1024},APP_MEM_MALLOC:function(vk){alert("SISYPHUS��չ��֧��ʹ�÷������ڴ�!");return 0},APP_MEM_FREE:function(wk){alert("SISYPHUS��չ��֧��ʹ�÷������ڴ�!")},APP_MEM_BASE:function(){return 64*1024*1024},APP_MEM_GROW:function(xk){uk["memory"].grow(xk/64/1024);if(lk["GL"]){lk["GL"]["FlushHeap"]()}},APP_MEM_RECYCLE:function(yk){alert("WAMSģ�鲻֧�ֻ����ڴ�!")},UNITY_CREATE_OBJ:function(){alert("δװ��UNITY��չ!");return 0},UNITY_FREE_OBJ:function(){alert("δװ��UNITY��չ!");return 0},UNITY_GET:function(){alert("δװ��UNITY��չ!");return 0},UNITY_DO:function(){alert("δװ��UNITY��չ!");return 0}};tk.OnEngineLoad(uk)}function pk(){var zk=document.getElementById("unityContainer");var Ak=document.createElement("canvas");Ak.id="3d";Ak.width=zk.offsetWidth;Ak.height=zk.offsetHeight;Ak.style.width="100%";Ak.style.height="100%";Ak.style.top="0rem";Ak.style.bottom="0rem";Ak.style.left="0rem";Ak.style.right="0rem";Ak.style.position="absolute";Ak.style.zIndex="1";zk.appendChild(Ak);lk["GL"]["CreateContext"](Ak);lk["ShaderLab"]["Init"](lk["GL"]["Ctx"])}function qk(){if(nk){nk=false;sk()}}function rk(){nk=true}function sk(){if(nk){return}mk(0);if(lk["WASM"]["Update"]){lk["WASM"]["Update"]()}requestAnimationFrame(sk)}lk["WASM"]=lk["WASM"]||{};lk["WASM"]["LoadEngine"]=ok;return[]});MiaokitMerge(function(Bk){var Ck=Date.now();function Dk(){return Date.now()-Ck}function Ek(Hk,Ik){if(Ik===void 0){Ik=0}if(2===Ik){console.warn("Track:",Dk(),Hk)}else if(2<Ik){console.error("Track:",Dk(),Hk)}else{console.info("Track:",Dk(),Hk)}}function Fk(Jk,Kk,Lk){if(Lk===void 0){Lk=undefined}var Mk=new XMLHttpRequest;Mk.open("GET",Jk,true);Mk.responseType="arraybuffer";Mk.onprogress=function(Nk){if(0<Nk.total&&Lk){Lk(Nk.loaded/Nk.total)}};Mk.onload=function(Ok){if(Mk.status==200){Kk(Mk.response)}else{Kk(null)}};Mk.onerror=function(Pk){Ek(Pk,2);Kk(null)};Mk.send(null)}function Gk(Qk,Rk,Sk,Tk,Uk,Vk){var Wk=new XMLHttpRequest;Wk.onprogress=function(Xk){if(0<Xk.total&&Uk){Uk(Xk.loaded/Xk.total)}};Wk.onload=function(Yk){if(Wk.status==200){Vk(Wk.response)}else{Vk(null)}Wk=null};Wk.onerror=function(Zk){Ek(Zk,2);Vk(null)};Wk.responseType=Rk;Wk.open(Qk,Sk,true);Wk.send(Tk)}Dk["_name"]="Time";Ek["_name"]="Track";Fk["_name"]="Fetch";Gk["_name"]="Request";return[Dk,Ek,Fk,Gk]});MiaokitMerge(function($k){if("Unity"!==$k["m_pEngine"]){return[]}if(!UnityLoader){return[]}var _k=$k["m_pLogo"]||"data:image/png;base64,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";UnityLoader.Progress.Styles.Dark.progressLogoUrl=_k;UnityLoader.Progress.Styles.Light.progressLogoUrl=_k;if(UnityLoader.SystemInfo.mobile){UnityLoader.SystemInfo.mobile=false;UnityLoader.downloadJob=function(hl,il){var jl=new XMLHttpRequest;jl.open("GET",il.parameters.url);jl.responseType="arraybuffer";jl.onload=function(){UnityLoader.Compression.decompress(new Uint8Array(jl.response),function(kl){il.complete(kl)})};if(il.parameters.onprogress)jl.addEventListener("progress",il.parameters.onprogress);if(il.parameters.onload)jl.addEventListener("load",il.parameters.onload);jl.send()}}UnityLoader.processWasmFrameworkJob=function(ll,ml){var nl=UnityLoader.Job.result(ll,"downloadWasmFramework");UnityLoader.loadCode(ll,nl,function(ol,pl){ll["mainScriptUrlOrBlob"]=pl;if(ll.isModularized){UnityLoader[ol]=UnityModule}ll["instantiateWasm"]=function(ql,rl){dl(ll,ql["env"]);if(ll["wasmBinary"]){WebAssembly.instantiate(ll["wasmBinary"],ql).then(function(sl){rl(sl.instance,sl.module)})}else{console.info("MiaokitLoader.InitUnity.instantiateWasm error!")}return{}};UnityLoader[ol](ll);ml.complete()},{Module:ll,url:ll["wasmFrameworkUrl"],isModularized:ll.isModularized})};var al=null;var bl=null;var cl={};function dl(tl,ul){Object["assign"](ul,{_Init:function(vl,wl){$k["WASM"]["m_pMemory"]=$k["WASM"]["m_pMemory"]||bl.Module.wasmMemory;el(tl,cl,vl,wl);fl(bl,cl);al.OnEngineLoad(cl)},_RenderingEvent:function(xl){al.OnRenderingEvent(xl)}});$k["GL"]=ul}function el(yl,zl,Al,Bl){var Cl=$k.WASM.GetString(Al,Bl);var Dl=JSON.parse(Cl);var El=function(Il){var Jl=function(){var Kl=Array.prototype.slice.call(arguments);Kl.unshift(Jl["m_nAddr"]);return Jl["m_pFunc"].apply(this,Kl)};Jl["m_pFunc"]=yl[Il.Call];Jl["m_nAddr"]=Il.Addr;zl[Il.Name]=Jl};for(var Fl=0,Gl=Dl.List;Fl<Gl.length;Fl++){var Hl=Gl[Fl];El(Hl)}}function fl(Ll,Ml){Ml["APP_PLUGIN_TYPE"]=function(){return 1};Ml["APP_MEM_TYPE"]=function(){return 1};Ml["memory"]=function(Nl){var Ol=32*1024*1024;var Pl=Nl._memalign(16,Ol);var Ql=Ol-Pl;Nl._free(Pl);var Rl=Nl._memalign(16,Ql+Ol);if(Rl!==Pl){console.error("miaokit.prememory: addr error",Pl,Rl);return}if(Rl+Ql+Ol!==67108864){console.error("miaokit.prememory: addr end error",Rl+Ql+Ol);return}Ml["APP_MEM_RESERVE"]=function(){return Rl};return Nl.wasmMemory}(bl.Module);Ml["APP_MEM_MALLOC"]=function(Sl){return bl.Module._memalign(16,Sl)};Ml["APP_MEM_FREE"]=function(Tl){bl.Module._free(Tl)};Ml["APP_MEM_BASE"]=function(){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0};Ml["APP_MEM_GROW"]=function(Ul){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0};Ml["APP_MEM_RECYCLE"]=function(Vl){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0}}function gl(Wl){al=Wl;bl=UnityLoader.instantiate("unityContainer",$k["m_pEnginePath"])}$k["WASM"]=$k["WASM"]||{};$k["WASM"]["LoadEngine"]=gl;return[]});MiaokitMerge(function(Xl){var Yl=undefined;var Zl=new TextDecoder("utf-8");var $l=new TextEncoder;function _l(am){if(!Yl||Xl["WASM"].m_pMemory.buffer.byteLength!==Yl[0].byteLength){if(!Yl){Yl=[]}Yl[0]=new Int8Array(Xl["WASM"].m_pMemory.buffer);Yl[1]=new Uint8Array(Xl["WASM"].m_pMemory.buffer);Yl[2]=new Int16Array(Xl["WASM"].m_pMemory.buffer);Yl[3]=new Uint16Array(Xl["WASM"].m_pMemory.buffer);Yl[4]=new Int32Array(Xl["WASM"].m_pMemory.buffer);Yl[5]=new Uint32Array(Xl["WASM"].m_pMemory.buffer);Yl[6]=new Float32Array(Xl["WASM"].m_pMemory.buffer);Yl[7]=new Float64Array(Xl["WASM"].m_pMemory.buffer)}return Yl[am]}Xl["WASM"]=Xl["WASM"]||{};Xl["WASM"]["HEAP8"]=function(bm,cm){if(bm===void 0){bm=0}if(cm===void 0){cm=0}var dm=_l(0);if(bm&&cm){return dm.subarray(bm,bm+cm)}else{return dm}};Xl["WASM"]["HEAPU8"]=function(em,fm){if(em===void 0){em=0}if(fm===void 0){fm=0}var gm=_l(1);if(em&&fm){return gm.subarray(em,em+fm)}else{return gm}};Xl["WASM"]["HEAP16"]=function(hm,im){if(hm===void 0){hm=0}if(im===void 0){im=0}var jm=_l(2);if(hm&&im){return jm.subarray(hm/2,(hm+im)/2)}else{return jm}};Xl["WASM"]["HEAPU16"]=function(km,lm){if(km===void 0){km=0}if(lm===void 0){lm=0}var mm=_l(3);if(km&&lm){return mm.subarray(km/2,(km+lm)/2)}else{return mm}};Xl["WASM"]["HEAP32"]=function(nm,om,pm){if(nm===void 0){nm=0}if(om===void 0){om=0}var qm=_l(4);if(nm&&om){if(pm){return qm.slice(nm/4,(nm+om)/4)}else{return qm.subarray(nm/4,(nm+om)/4)}}else{return qm}};Xl["WASM"]["HEAPU32"]=function(rm,sm){if(rm===void 0){rm=0}if(sm===void 0){sm=0}var tm=_l(5);if(rm&&sm){return tm.subarray(rm/4,(rm+sm)/4)}else{return tm}};Xl["WASM"]["HEAPF32"]=function(um,vm,wm){if(um===void 0){um=0}if(vm===void 0){vm=0}var xm=_l(6);if(um&&vm){if(wm){return xm.slice(um/4,(um+vm)/4)}else{return xm.subarray(um/4,(um+vm)/4)}}else{return xm}};Xl["WASM"]["HEAPF64"]=function(ym,zm){if(ym===void 0){ym=0}if(zm===void 0){zm=0}var Am=_l(7);if(ym&&zm){return Am.subarray(ym/8,(ym+zm)/8)}else{return Am}};Xl["WASM"]["GetString"]=function(Bm,Cm){if(!Cm){var Dm=Xl["WASM"].HEAPU8();var Em=Bm;while(0!==Dm[Em++]);Cm=Em-Bm-1}var Fm=Xl["WASM"].HEAPU8(Bm,Cm);var Gm=Zl.decode(Fm);return Gm};Xl["WASM"]["SetString"]=function(Hm,Im){var Jm=$l.encode(Im);var Km=Xl["WASM"].HEAPU8(Hm,Jm.byteLength);Km.set(Jm)};Xl["WASM"]["EncodeString"]=function(Lm){return $l.encode(Lm)};Xl["WASM"]["m_pMemory"]=null;return[]});MiaokitMerge(function(Mm){if("Sisyphus"!==Mm["m_pEngine"]){return[]}var Nm={instance:undefined,counter:1,lastError:0,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],currentContext:null,currArrayBuffer:0,currElementArrayBuffer:0,offscreenCanvases:{},timerQueriesEXT:[],queries:[],samplers:[],transformFeedbacks:[],syncs:[],byteSizeByTypeRoot:5120,byteSizeByType:[1,1,2,2,4,4,4,2,3,4,8],programInfos:{},stringCache:{},stringiCache:{},tempFixedLengthArray:[],packAlignment:4,unpackAlignment:4,init:function(){Nm.miniTempBuffer=new Float32Array(Nm.MINI_TEMP_BUFFER_SIZE);for(var mn=0;mn<Nm.MINI_TEMP_BUFFER_SIZE;mn++){Nm.miniTempBufferViews[mn]=Nm.miniTempBuffer.subarray(0,mn+1)}for(var mn=0;mn<32;mn++){Nm.tempFixedLengthArray.push(new Array(mn))}},recordError:function nn(on){if(!Nm.lastError){Nm.lastError=on}},getNewId:function(pn){var qn=Nm.counter++;for(var rn=pn.length;rn<qn;rn++){pn[rn]=null}return qn},MINI_TEMP_BUFFER_SIZE:256,miniTempBuffer:null,miniTempBufferViews:[0],getSource:function(sn,tn,un,vn){var wn="";for(var xn=0;xn<tn;++xn){var yn;if(vn){var zn=Wm[vn+xn*4>>2];if(zn<0){yn=Qm(Wm[un+xn*4>>2])}else{yn=Qm(Wm[un+xn*4>>2],zn)}}else{yn=Qm(Wm[un+xn*4>>2])}wn+=yn}return wn},createContext:function(An,Bn){if(typeof Bn["majorVersion"]==="undefined"&&typeof Bn["minorVersion"]==="undefined"){if(typeof WebGL2RenderingContext!=="undefined")Bn["majorVersion"]=2;else Bn["majorVersion"]=1;Bn["minorVersion"]=0}var Cn;var Dn="?";function En(Gn){Dn=Gn.statusMessage||Dn}try{An.addEventListener("webglcontextcreationerror",En,false);try{if(Bn["majorVersion"]==1&&Bn["minorVersion"]==0){Cn=An.getContext("webgl",Bn)||An.getContext("experimental-webgl",Bn)}else if(Bn["majorVersion"]==2&&Bn["minorVersion"]==0){Cn=An.getContext("webgl2",Bn)}else{throw"Unsupported WebGL context version "+Bn["majorVersion"]+"."+Bn["minorVersion"]+"!"}}finally{An.removeEventListener("webglcontextcreationerror",En,false)}if(!Cn)throw":("}catch(Hn){Pm("Could not create canvas: "+[Dn,Hn,JSON.stringify(Bn)]);return 0}if(!Cn)return 0;var Fn=Nm.registerContext(Cn,Bn);return Fn},registerContext:function(In,Jn){var Kn=1;var Ln={handle:Kn,attributes:Jn,version:Jn["majorVersion"],GLctx:In};function Mn(){var Nn=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return Nn?parseInt(Nn[2],10):false}Ln["supportsWebGL2EntryPoints"]=Ln.version>=2&&(Mn()===false||Mn()>=58);if(In.canvas)In.canvas.GLctxObject=Ln;Nm.contexts[Kn]=Ln;if(typeof Jn["enableExtensionsByDefault"]==="undefined"||Jn["enableExtensionsByDefault"]){Nm.initExtensions(Ln)}if(Jn["renderViaOffscreenBackBuffer"]){return 0}return Kn},makeContextCurrent:function(On){if(!On){Om=Nm.currentContext=null;return true}var Pn=Nm.contexts[On];if(!Pn){return false}Om=Pn.GLctx;Nm.currentContext=Pn;return true},getContext:function(Qn){return Nm.contexts[Qn]},deleteContext:function(Rn){if(!Rn)return;if(Nm.currentContext===Nm.contexts[Rn])Nm.currentContext=null;if(typeof JSEvents==="object")JSEvents.removeAllHandlersOnTarget(Nm.contexts[Rn].GLctx.canvas);if(Nm.contexts[Rn]&&Nm.contexts[Rn].GLctx.canvas)Nm.contexts[Rn].GLctx.canvas.GLctxObject=undefined;$m(Nm.contexts[Rn]);Nm.contexts[Rn]=null},initExtensions:function(Sn){if(!Sn)Sn=Nm.currentContext;if(Sn.initExtensionsDone)return;Sn.initExtensionsDone=true;var Tn=Sn.GLctx;Sn.maxVertexAttribs=Tn.getParameter(Tn.MAX_VERTEX_ATTRIBS);if(Sn.version<2){var Un=Tn.getExtension("ANGLE_instanced_arrays");if(Un){Tn["vertexAttribDivisor"]=function(Zn,$n){Un["vertexAttribDivisorANGLE"](Zn,$n)};Tn["drawArraysInstanced"]=function(_n,ao,bo,co){Un["drawArraysInstancedANGLE"](_n,ao,bo,co)};Tn["drawElementsInstanced"]=function(eo,fo,go,ho,io){Un["drawElementsInstancedANGLE"](eo,fo,go,ho,io)}}var Vn=Tn.getExtension("OES_vertex_array_object");if(Vn){Tn["createVertexArray"]=function(){return Vn["createVertexArrayOES"]()};Tn["deleteVertexArray"]=function(jo){Vn["deleteVertexArrayOES"](jo)};Tn["bindVertexArray"]=function(ko){Vn["bindVertexArrayOES"](ko)};Tn["isVertexArray"]=function(lo){return Vn["isVertexArrayOES"](lo)}}var Wn=Tn.getExtension("WEBGL_draw_buffers");if(Wn){Tn["drawBuffers"]=function(mo,no){Wn["drawBuffersWEBGL"](mo,no)}}}Tn.disjointTimerQueryExt=Tn.getExtension("EXT_disjoint_timer_query");var Xn=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2"];var Yn=Tn.getSupportedExtensions();if(Yn&&Yn.length>0){Tn.getSupportedExtensions().forEach(function(oo){if(Xn.indexOf(oo)!=-1){Tn.getExtension(oo)}})}},populateUniformTable:function(po){var qo=Nm.programs[po];Nm.programInfos[po]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1};var ro=Nm.programInfos[po];var so=ro.uniforms;var to=Om.getProgramParameter(qo,Om.ACTIVE_UNIFORMS);for(var uo=0;uo<to;++uo){var vo=Om.getActiveUniform(qo,uo);var wo=vo.name;ro.maxUniformLength=Math.max(ro.maxUniformLength,wo.length+1);if(wo.indexOf("]",wo.length-1)!==-1){var xo=wo.lastIndexOf("[");wo=wo.slice(0,xo)}var yo=Om.getUniformLocation(qo,wo);if(yo!=null){var zo=Nm.getNewId(Nm.uniforms);so[wo]=[vo.size,zo];Nm.uniforms[zo]=yo;for(var Ao=1;Ao<vo.size;++Ao){var Bo=wo+"["+Ao+"]";yo=Om.getUniformLocation(qo,Bo);zo=Nm.getNewId(Nm.uniforms);Nm.uniforms[zo]=yo}}}}};var Om=undefined;var Pm=console.error;var Qm=Mm["WASM"]["GetString"];var Rm=function(Co,Do,Eo){Mm["WASM"]["SetString"](Do,Co)};var Sm=undefined;var Tm=undefined;var Um=undefined;var Vm=undefined;var Wm=undefined;var Xm=undefined;var Ym=undefined;function Zm(Fo){return Mm["WASM"]["Malloc"](Fo)}function $m(Go){Mm["WASM"]["Free"](Go)}function _m(Ho,Io,Jo){return Jo?+(Ho>>>0)+ +(Io>>>0)*4294967296:+(Ho>>>0)+ +(Io|0)*4294967296}function an(Ko){switch(Ko){case 34962:Ko=34964;break;case 34963:Ko=34965;break;case 35051:Ko=35053;break;case 35052:Ko=35055;break;case 35982:Ko=35983;break;case 36662:Ko=36662;break;case 36663:Ko=36663;break;case 35345:Ko=35368;break}var Lo=Om.getParameter(Ko);if(Lo)return Lo.name|0;else return 0}function bn(Mo){switch(Mo){case 34962:case 34963:case 36662:case 36663:case 35051:case 35052:case 35882:case 35982:case 35345:return true;default:return false}}function cn(No,Oo,Po,Qo){if(!Po){Nm.recordError(1281);return}var Ro=Om["getIndexedParameter"](No,Oo);var So;switch(typeof Ro){case"boolean":So=Ro?1:0;break;case"number":So=Ro;break;case"object":if(Ro===null){switch(No){case 35983:case 35368:So=0;break;default:{Nm.recordError(1280);return}}}else if(Ro instanceof WebGLBuffer){So=Ro["name"]|0}else{Nm.recordError(1280);return}break;default:Nm.recordError(1280);return}switch(Qo){case"Integer64":var To=0;var Uo=[So>>>0,(To=So,+Math.abs(To)>=1?To>0?(Math.min(+Math.floor(To/4294967296),4294967295)|0)>>>0:~~+Math.ceil((To-+(~~To>>>0))/4294967296)>>>0:0)];Wm[Po>>2]=Uo[0];Wm[Po+4>>2]=Uo[1];break;case"Integer":Wm[Po>>2]=So;break;case"Float":Ym[Po>>2]=So;break;case"Boolean":Sm[Po>>0]=So?1:0;break;default:throw"internal emscriptenWebGLGetIndexed() error, bad type: "+Qo}}function dn(Vo,Wo,Xo){if(!Wo){Nm.recordError(1281);return}var Yo=undefined;switch(Vo){case 36346:Yo=1;break;case 36344:if(Xo!=="Integer"&&Xo!=="Integer64"){Nm.recordError(1280)}return;case 34814:case 36345:Yo=0;break;case 34466:var Zo=Om.getParameter(34467);Yo=Zo.length;break;case 33309:if(Om.canvas.GLctxObject.version<2){Nm.recordError(1282);return}var $o=Om.getSupportedExtensions();Yo=2*$o.length;break;case 33307:case 33308:if(Om.canvas.GLctxObject.version<2){Nm.recordError(1280);return}Yo=Vo==33307?3:0;break}if(Yo===undefined){var _o=Om.getParameter(Vo);switch(typeof _o){case"number":Yo=_o;break;case"boolean":Yo=_o?1:0;break;case"string":Nm.recordError(1280);return;case"object":if(_o===null){switch(Vo){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 35097:case 36389:case 34068:{Yo=0;break};default:{Nm.recordError(1280);return}}}else if(_o instanceof Float32Array||_o instanceof Uint32Array||_o instanceof Int32Array||_o instanceof Array){for(var ap=0;ap<_o.length;++ap){switch(Xo){case"Integer":Wm[Wo+ap*4>>2]=_o[ap];break;case"Float":Ym[Wo+ap*4>>2]=_o[ap];break;case"Boolean":Sm[Wo+ap>>0]=_o[ap]?1:0;break;default:throw"internal glGet error, bad type: "+Xo}}return}else if(_o instanceof WebGLBuffer||_o instanceof WebGLProgram||_o instanceof WebGLFramebuffer||_o instanceof WebGLRenderbuffer||_o instanceof WebGLQuery||_o instanceof WebGLSampler||_o instanceof WebGLSync||_o instanceof WebGLTransformFeedback||_o instanceof WebGLVertexArrayObject||_o instanceof WebGLTexture){Yo=_o["name"]|0}else{Nm.recordError(1280);return}break;default:Nm.recordError(1280);return}}switch(Xo){case"Integer64":var bp=0;var cp=[Yo>>>0,(bp=Yo,+Math.abs(bp)>=1?bp>0?(Math.min(+Math.floor(bp/4294967296),4294967295)|0)>>>0:~~+Math.ceil((bp-+(~~bp>>>0))/4294967296)>>>0:0)];Wm[Wo>>2]=cp[0];Wm[Wo+4>>2]=cp[1];break;case"Integer":Wm[Wo>>2]=Yo;break;case"Float":Ym[Wo>>2]=Yo;break;case"Boolean":Sm[Wo>>0]=Yo?1:0;break;default:throw"internal glGet error, bad type: "+Xo}}function en(dp,ep,fp,gp){if(!fp){Nm.recordError(1281);return}var hp=Om.getUniform(Nm.programs[dp],Nm.uniforms[ep]);if(typeof hp=="number"||typeof hp=="boolean"){switch(gp){case"Integer":Wm[fp>>2]=hp;break;case"Float":Ym[fp>>2]=hp;break;default:throw"internal emscriptenWebGLGetUniform() error, bad type: "+gp}}else{for(var ip=0;ip<hp.length;ip++){switch(gp){case"Integer":Wm[fp+ip*4>>2]=hp[ip];break;case"Float":Ym[fp+ip*4>>2]=hp[ip];break;default:throw"internal emscriptenWebGLGetUniform() error, bad type: "+gp}}}}function fn(jp,kp,lp,mp){if(!lp){Nm.recordError(1281);return}var np=Om.getVertexAttrib(jp,kp);if(kp==34975){Wm[lp>>2]=np["name"]}else if(typeof np=="number"||typeof np=="boolean"){switch(mp){case"Integer":Wm[lp>>2]=np;break;case"Float":Ym[lp>>2]=np;break;case"FloatToInteger":Wm[lp>>2]=Math["fround"](np);break;default:throw"internal emscriptenWebGLGetVertexAttrib() error, bad type: "+mp}}else{for(var op=0;op<np.length;op++){switch(mp){case"Integer":Wm[lp+op*4>>2]=np[op];break;case"Float":Ym[lp+op*4>>2]=np[op];break;case"FloatToInteger":Wm[lp+op*4>>2]=Math["fround"](np[op]);break;default:throw"internal emscriptenWebGLGetVertexAttrib() error, bad type: "+mp}}}}function gn(pp,qp,rp,sp){function tp(wp,xp){return Math.floor((wp+xp-1)/xp)*xp}var up=pp*rp;var vp=tp(up,sp);return qp<=0?0:(qp-1)*vp+up}function hn(yp,zp,Ap,Bp,Cp,Dp){var Ep;var Fp;switch(zp){case 6406:case 6409:case 6402:case 6403:case 36244:Fp=1;break;case 6410:case 33319:case 33320:Fp=2;break;case 6407:case 35904:case 36248:Fp=3;break;case 6408:case 35906:case 36249:Fp=4;break;default:Nm.recordError(1280);return null}switch(yp){case 5121:case 5120:Ep=Fp*1;break;case 5123:case 36193:case 5131:case 5122:Ep=Fp*2;break;case 5125:case 5126:case 5124:Ep=Fp*4;break;case 34042:case 35902:case 33640:case 35899:case 34042:Ep=4;break;case 33635:case 32819:case 32820:Ep=2;break;default:Nm.recordError(1280);return null}var Gp=gn(Ap,Bp,Ep,Nm.unpackAlignment);switch(yp){case 5120:return Sm.subarray(Cp,Cp+Gp);case 5121:return Tm.subarray(Cp,Cp+Gp);case 5122:return Um.subarray(Cp>>1,Cp+Gp>>1);case 5124:return Wm.subarray(Cp>>2,Cp+Gp>>2);case 5126:return Ym.subarray(Cp>>2,Cp+Gp>>2);case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return Xm.subarray(Cp>>2,Cp+Gp>>2);case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return Vm.subarray(Cp>>1,Cp+Gp>>1);default:Nm.recordError(1280);return null}}function jn(Hp){switch(Hp){case 5120:return Sm;case 5121:return Tm;case 5122:return Um;case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return Vm;case 5124:return Wm;case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return Xm;case 5126:return Ym;default:return null}}function kn(Ip){switch(Ip){case 5120:case 5121:return 0;case 5122:case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return 1;case 5124:case 5126:case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return 2;default:return 0}}var ln=function(){function Jp(){this.Ctx=undefined}Jp.prototype.FlushHeap=function(){Sm=Mm["WASM"]["HEAP8"]();Tm=Mm["WASM"]["HEAPU8"]();Um=Mm["WASM"]["HEAP16"]();Vm=Mm["WASM"]["HEAPU16"]();Wm=Mm["WASM"]["HEAP32"]();Xm=Mm["WASM"]["HEAPU32"]();Ym=Mm["WASM"]["HEAPF32"]()};Jp.prototype.CreateContext=function(Kp,Lp){Lp=Lp||{majorVersion:1,minorVersion:0,alpha:0,depth:1,stencil:0,antialias:1,premultipliedAlpha:0,preserveDrawingBuffer:0,preferLowPowerToHighPerformance:0,failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:0,proxyContextToMainThread:0,renderViaOffscreenBackBuffer:0};if(Lp["explicitSwapControl"]){return 0}Nm.init();var Mp=Nm.createContext(Kp,Lp);var Np=Nm.makeContextCurrent(Mp);this.Ctx=Om;return Np?0:-5};Jp.prototype.DestroyContext=function(){Nm.deleteContext(Nm.currentContext?Nm.currentContext.handle:0)};Jp.prototype.GetTextureByHandle=function(Op){return Op?Nm.textures[Op]:null};Jp.prototype._glActiveTexture=function(Pp){Om["activeTexture"](Pp)};Jp.prototype._glAttachShader=function(Qp,Rp){Om.attachShader(Nm.programs[Qp],Nm.shaders[Rp])};Jp.prototype._glBeginQuery=function(Sp,Tp){Om["beginQuery"](Sp,Tp?Nm.queries[Tp]:null)};Jp.prototype._glBeginTransformFeedback=function(Up){Om["beginTransformFeedback"](Up)};Jp.prototype._glBindAttribLocation=function(Vp,Wp,Xp){Xp=Qm(Xp);Om.bindAttribLocation(Nm.programs[Vp],Wp,Xp)};Jp.prototype._glBindBuffer=function(Yp,Zp){var $p=Zp?Nm.buffers[Zp]:null;if(Yp==35051){Om.currentPixelPackBufferBinding=Zp}else if(Yp==35052){Om.currentPixelUnpackBufferBinding=Zp}Om.bindBuffer(Yp,$p)};Jp.prototype._glBindBufferBase=function(_p,aq,bq){var cq=bq?Nm.buffers[bq]:null;Om["bindBufferBase"](_p,aq,cq)};Jp.prototype._glBindBufferRange=function(dq,eq,fq,gq,hq){var iq=fq?Nm.buffers[fq]:null;Om["bindBufferRange"](dq,eq,iq,gq,hq)};Jp.prototype._glBindFramebuffer=function(jq,kq){Om.bindFramebuffer(jq,kq?Nm.framebuffers[kq]:null)};Jp.prototype._glBindRenderbuffer=function(lq,mq){Om.bindRenderbuffer(lq,mq?Nm.renderbuffers[mq]:null)};Jp.prototype._glBindSampler=function(nq,oq){Om["bindSampler"](nq,oq?Nm.samplers[oq]:null)};Jp.prototype._glBindTexture=function(pq,qq){Om.bindTexture(pq,qq?Nm.textures[qq]:null)};Jp.prototype._glBindTransformFeedback=function(rq,sq){var tq=sq?Nm.transformFeedbacks[sq]:null;if(sq&&!tq){Nm.recordError(1282);return}Om["bindTransformFeedback"](rq,tq)};Jp.prototype._glBindVertexArray=function(uq){Om["bindVertexArray"](Nm.vaos[uq])};Jp.prototype._glBlendEquation=function(vq){Om["blendEquation"](vq)};Jp.prototype._glBlendEquationSeparate=function(wq,xq){Om["blendEquationSeparate"](wq,xq)};Jp.prototype._glBlendFuncSeparate=function(yq,zq,Aq,Bq){Om["blendFuncSeparate"](yq,zq,Aq,Bq)};Jp.prototype._glBlitFramebuffer=function(Cq,Dq,Eq,Fq,Gq,Hq,Iq,Jq,Kq,Lq){Om["blitFramebuffer"](Cq,Dq,Eq,Fq,Gq,Hq,Iq,Jq,Kq,Lq)};Jp.prototype._glBufferData=function(Mq,Nq,Oq,Pq){if(!Oq){Om.bufferData(Mq,Nq,Pq)}else{if(Nm.currentContext.supportsWebGL2EntryPoints){Om.bufferData(Mq,Tm,Pq,Oq,Nq);return}Om.bufferData(Mq,Tm.subarray(Oq,Oq+Nq),Pq)}};Jp.prototype._glBufferSubData=function(Qq,Rq,Sq,Tq){if(Nm.currentContext.supportsWebGL2EntryPoints){Om.bufferSubData(Qq,Rq,Tm,Tq,Sq);return}Om.bufferSubData(Qq,Rq,Tm.subarray(Tq,Tq+Sq))};Jp.prototype._glCheckFramebufferStatus=function(Uq){return Om["checkFramebufferStatus"](Uq)};Jp.prototype._glClear=function(Vq){Om["clear"](Vq)};Jp.prototype._glClearColor=function(Wq,Xq,Yq,Zq){Om["clearColor"](Wq,Xq,Yq,Zq)};Jp.prototype._glClearDepthf=function($q){Om["clearDepth"]($q)};Jp.prototype._glClearStencil=function(_q){Om["clearStencil"](_q)};Jp.prototype._glClientWaitSync=function(ar,br,cr,dr){cr=cr>>>0;dr=dr>>>0;var er=cr==4294967295&&dr==4294967295?-1:_m(cr,dr,true);return Om.clientWaitSync(Nm.syncs[ar],br,er)};Jp.prototype._glColorMask=function(fr,gr,hr,ir){Om.colorMask(!!fr,!!gr,!!hr,!!ir)};Jp.prototype._glCompileShader=function(jr){Om.compileShader(Nm.shaders[jr])};Jp.prototype._glCompressedTexImage2D=function(kr,lr,mr,nr,or,pr,qr,rr){if(Nm.currentContext.supportsWebGL2EntryPoints){Om["compressedTexImage2D"](kr,lr,mr,nr,or,pr,Tm,rr,qr);return}Om["compressedTexImage2D"](kr,lr,mr,nr,or,pr,rr?Tm.subarray(rr,rr+qr):null)};Jp.prototype._glCompressedTexSubImage2D=function(sr,tr,ur,vr,wr,xr,yr,zr,Ar){if(Nm.currentContext.supportsWebGL2EntryPoints){Om["compressedTexSubImage2D"](sr,tr,ur,vr,wr,xr,yr,Tm,Ar,zr);return}Om["compressedTexSubImage2D"](sr,tr,ur,vr,wr,xr,yr,Ar?Tm.subarray(Ar,Ar+zr):null)};Jp.prototype._glCompressedTexSubImage3D=function(Br,Cr,Dr,Er,Fr,Gr,Hr,Ir,Jr,Kr,Lr){if(Nm.currentContext.supportsWebGL2EntryPoints){Om["compressedTexSubImage3D"](Br,Cr,Dr,Er,Fr,Gr,Hr,Ir,Jr,Tm,Lr,Kr)}else{Om["compressedTexSubImage3D"](Br,Cr,Dr,Er,Fr,Gr,Hr,Ir,Jr,Lr?Tm.subarray(Lr,Lr+Kr):null)}};Jp.prototype._glCopyBufferSubData=function(Mr,Nr,Or,Pr,Qr){Om["copyBufferSubData"](Mr,Nr,Or,Pr,Qr)};Jp.prototype._glCopyTexImage2D=function(Rr,Sr,Tr,Ur,Vr,Wr,Xr,Yr){Om["copyTexImage2D"](Rr,Sr,Tr,Ur,Vr,Wr,Xr,Yr)};Jp.prototype._glCopyTexSubImage2D=function(Zr,$r,_r,as,bs,cs,ds,es){Om["copyTexSubImage2D"](Zr,$r,_r,as,bs,cs,ds,es)};Jp.prototype._glCreateProgram=function(){var fs=Nm.getNewId(Nm.programs);var gs=Om.createProgram();gs.name=fs;Nm.programs[fs]=gs;return fs};Jp.prototype._glCreateShader=function(hs){var is=Nm.getNewId(Nm.shaders);Nm.shaders[is]=Om.createShader(hs);return is};Jp.prototype._glCullFace=function(js){Om["cullFace"](js)};Jp.prototype._glDeleteBuffers=function(ks,ls){for(var ms=0;ms<ks;ms++){var ns=Wm[ls+ms*4>>2];var os=Nm.buffers[ns];if(!os)continue;Om.deleteBuffer(os);os.name=0;Nm.buffers[ns]=null;if(ns==Nm.currArrayBuffer)Nm.currArrayBuffer=0;if(ns==Nm.currElementArrayBuffer)Nm.currElementArrayBuffer=0}};Jp.prototype._glDeleteFramebuffers=function(ps,qs){for(var rs=0;rs<ps;++rs){var ss=Wm[qs+rs*4>>2];var ts=Nm.framebuffers[ss];if(!ts)continue;Om.deleteFramebuffer(ts);ts.name=0;Nm.framebuffers[ss]=null}};Jp.prototype._glDeleteProgram=function(us){if(!us)return;var vs=Nm.programs[us];if(!vs){Nm.recordError(1281);return}Om.deleteProgram(vs);vs.name=0;Nm.programs[us]=null;Nm.programInfos[us]=null};Jp.prototype._glDeleteQueries=function(ws,xs){for(var ys=0;ys<ws;ys++){var zs=Wm[xs+ys*4>>2];var As=Nm.queries[zs];if(!As)continue;Om["deleteQuery"](As);Nm.queries[zs]=null}};Jp.prototype._glDeleteRenderbuffers=function(Bs,Cs){for(var Ds=0;Ds<Bs;Ds++){var Es=Wm[Cs+Ds*4>>2];var Fs=Nm.renderbuffers[Es];if(!Fs)continue;Om.deleteRenderbuffer(Fs);Fs.name=0;Nm.renderbuffers[Es]=null}};Jp.prototype._glDeleteSamplers=function(Gs,Hs){for(var Is=0;Is<Gs;Is++){var Js=Wm[Hs+Is*4>>2];var Ks=Nm.samplers[Js];if(!Ks)continue;Om["deleteSampler"](Ks);Ks.name=0;Nm.samplers[Js]=null}};Jp.prototype._glDeleteShader=function(Ls){if(!Ls)return;var Ms=Nm.shaders[Ls];if(!Ms){Nm.recordError(1281);return}Om.deleteShader(Ms);Nm.shaders[Ls]=null};Jp.prototype._glDeleteSync=function(Ns){if(!Ns)return;var Os=Nm.syncs[Ns];if(!Os){Nm.recordError(1281);return}Om.deleteSync(Os);Os.name=0;Nm.syncs[Ns]=null};Jp.prototype._glDeleteTextures=function(Ps,Qs){for(var Rs=0;Rs<Ps;Rs++){var Ss=Wm[Qs+Rs*4>>2];var Ts=Nm.textures[Ss];if(!Ts)continue;Om.deleteTexture(Ts);Ts.name=0;Nm.textures[Ss]=null}};Jp.prototype._glDeleteTransformFeedbacks=function(Us,Vs){for(var Ws=0;Ws<Us;Ws++){var Xs=Wm[Vs+Ws*4>>2];var Ys=Nm.transformFeedbacks[Xs];if(!Ys)continue;Om["deleteTransformFeedback"](Ys);Ys.name=0;Nm.transformFeedbacks[Xs]=null}};Jp.prototype._glDeleteVertexArrays=function(Zs,$s){for(var _s=0;_s<Zs;_s++){var at=Wm[$s+_s*4>>2];Om["deleteVertexArray"](Nm.vaos[at]);Nm.vaos[at]=null}};Jp.prototype._glDepthFunc=function(bt){Om["depthFunc"](bt)};Jp.prototype._glDepthMask=function(ct){Om.depthMask(!!ct)};Jp.prototype._glDetachShader=function(dt,et){Om.detachShader(Nm.programs[dt],Nm.shaders[et])};Jp.prototype._glDisable=function(ft){Om["disable"](ft)};Jp.prototype._glDisableVertexAttribArray=function(gt){Om.disableVertexAttribArray(gt)};Jp.prototype._glDrawArrays=function(ht,it,jt){Om.drawArrays(ht,it,jt)};Jp.prototype._glDrawArraysInstanced=function(kt,lt,mt,nt){Om["drawArraysInstanced"](kt,lt,mt,nt)};Jp.prototype._glDrawBuffers=function(ot,pt){var qt=Nm.tempFixedLengthArray[ot];for(var rt=0;rt<ot;rt++){qt[rt]=Wm[pt+rt*4>>2]}Om["drawBuffers"](qt)};Jp.prototype._glDrawElements=function(st,tt,ut,vt){Om.drawElements(st,tt,ut,vt)};Jp.prototype._glDrawElementsInstanced=function(wt,xt,yt,zt,At){Om["drawElementsInstanced"](wt,xt,yt,zt,At)};Jp.prototype._glEnable=function(Bt){Om["enable"](Bt)};Jp.prototype._glEnableVertexAttribArray=function(Ct){Om.enableVertexAttribArray(Ct)};Jp.prototype._glEndQuery=function(Dt){Om["endQuery"](Dt)};Jp.prototype._glEndTransformFeedback=function(){Om["endTransformFeedback"]()};Jp.prototype._glFenceSync=function(Et,Ft){var Gt=Om.fenceSync(Et,Ft);if(Gt){var Ht=Nm.getNewId(Nm.syncs);Gt.name=Ht;Nm.syncs[Ht]=Gt;return Ht}else{return 0}};Jp.prototype._glFinish=function(){Om["finish"]()};Jp.prototype._glFlush=function(){Om["flush"]()};Jp.prototype._glFlushMappedBufferRange=function(It,Jt,Kt){if(!bn(It)){Nm.recordError(1280);Pm("GL_INVALID_ENUM in glFlushMappedBufferRange");return}var Lt=Nm.mappedBuffers[an(It)];if(!Lt){Nm.recordError(1282);Pm("buffer was never mapped in glFlushMappedBufferRange");return}if(!(Lt.access&16)){Nm.recordError(1282);Pm("buffer was not mapped with GL_MAP_FLUSH_EXPLICIT_BIT in glFlushMappedBufferRange");return}if(Jt<0||Kt<0||Jt+Kt>Lt.length){Nm.recordError(1281);Pm("invalid range in glFlushMappedBufferRange");return}Om.bufferSubData(It,Lt.offset,Tm.subarray(Lt.mem+Jt,Lt.mem+Jt+Kt))};Jp.prototype._glFramebufferRenderbuffer=function(Mt,Nt,Ot,Pt){Om.framebufferRenderbuffer(Mt,Nt,Ot,Nm.renderbuffers[Pt])};Jp.prototype._glFramebufferTexture2D=function(Qt,Rt,St,Tt,Ut){Om.framebufferTexture2D(Qt,Rt,St,Nm.textures[Tt],Ut)};Jp.prototype._glFramebufferTextureLayer=function(Vt,Wt,Xt,Yt,Zt){Om.framebufferTextureLayer(Vt,Wt,Nm.textures[Xt],Yt,Zt)};Jp.prototype._glFrontFace=function($t){Om["frontFace"]($t)};Jp.prototype._glGenBuffers=function(_t,au){for(var bu=0;bu<_t;bu++){var cu=Om.createBuffer();if(!cu){Nm.recordError(1282);while(bu<_t)Wm[au+bu++*4>>2]=0;return}var du=Nm.getNewId(Nm.buffers);cu.name=du;Nm.buffers[du]=cu;Wm[au+bu*4>>2]=du}};Jp.prototype._glGenFramebuffers=function(eu,fu){for(var gu=0;gu<eu;++gu){var hu=Om.createFramebuffer();if(!hu){Nm.recordError(1282);while(gu<eu)Wm[fu+gu++*4>>2]=0;return}var iu=Nm.getNewId(Nm.framebuffers);hu.name=iu;Nm.framebuffers[iu]=hu;Wm[fu+gu*4>>2]=iu}};Jp.prototype._glGenQueries=function(ju,ku){for(var lu=0;lu<ju;lu++){var mu=Om["createQuery"]();if(!mu){Nm.recordError(1282);while(lu<ju)Wm[ku+lu++*4>>2]=0;return}var nu=Nm.getNewId(Nm.queries);mu.name=nu;Nm.queries[nu]=mu;Wm[ku+lu*4>>2]=nu}};Jp.prototype._glGenRenderbuffers=function(ou,pu){for(var qu=0;qu<ou;qu++){var ru=Om.createRenderbuffer();if(!ru){Nm.recordError(1282);while(qu<ou)Wm[pu+qu++*4>>2]=0;return}var su=Nm.getNewId(Nm.renderbuffers);ru.name=su;Nm.renderbuffers[su]=ru;Wm[pu+qu*4>>2]=su}};Jp.prototype._glGenSamplers=function(tu,uu){for(var vu=0;vu<tu;vu++){var wu=Om["createSampler"]();if(!wu){Nm.recordError(1282);while(vu<tu)Wm[uu+vu++*4>>2]=0;return}var xu=Nm.getNewId(Nm.samplers);wu.name=xu;Nm.samplers[xu]=wu;Wm[uu+vu*4>>2]=xu}};Jp.prototype._glGenTextures=function(yu,zu){for(var Au=0;Au<yu;Au++){var Bu=Om.createTexture();if(!Bu){Nm.recordError(1282);while(Au<yu)Wm[zu+Au++*4>>2]=0;return}var Cu=Nm.getNewId(Nm.textures);Bu.name=Cu;Nm.textures[Cu]=Bu;Wm[zu+Au*4>>2]=Cu}};Jp.prototype._glGenTransformFeedbacks=function(Du,Eu){for(var Fu=0;Fu<Du;Fu++){var Gu=Om["createTransformFeedback"]();if(!Gu){Nm.recordError(1282);while(Fu<Du)Wm[Eu+Fu++*4>>2]=0;return}var Hu=Nm.getNewId(Nm.transformFeedbacks);Gu.name=Hu;Nm.transformFeedbacks[Hu]=Gu;Wm[Eu+Fu*4>>2]=Hu}};Jp.prototype._glGenVertexArrays=function(Iu,Ju){for(var Ku=0;Ku<Iu;Ku++){var Lu=Om["createVertexArray"]();if(!Lu){Nm.recordError(1282);while(Ku<Iu)Wm[Ju+Ku++*4>>2]=0;return}var Mu=Nm.getNewId(Nm.vaos);Lu.name=Mu;Nm.vaos[Mu]=Lu;Wm[Ju+Ku*4>>2]=Mu}};Jp.prototype._glGenerateMipmap=function(Nu){Om["generateMipmap"](Nu)};Jp.prototype._glGetActiveAttrib=function(Ou,Pu,Qu,Ru,Su,Tu,Uu){Ou=Nm.programs[Ou];var Vu=Om.getActiveAttrib(Ou,Pu);if(!Vu)return;if(Qu>0&&Uu){var Wu=Rm(Vu.name,Uu,Qu);if(Ru)Wm[Ru>>2]=Wu}else{if(Ru)Wm[Ru>>2]=0}if(Su)Wm[Su>>2]=Vu.size;if(Tu)Wm[Tu>>2]=Vu.type};Jp.prototype._glGetActiveUniform=function(Xu,Yu,Zu,$u,_u,av,bv){Xu=Nm.programs[Xu];var cv=Om.getActiveUniform(Xu,Yu);if(!cv)return;if(Zu>0&&bv){var dv=Rm(cv.name,bv,Zu);if($u)Wm[$u>>2]=dv}else{if($u)Wm[$u>>2]=0}if(_u)Wm[_u>>2]=cv.size;if(av)Wm[av>>2]=cv.type};Jp.prototype._glGetActiveUniformBlockName=function(ev,fv,gv,hv,iv){ev=Nm.programs[ev];var jv=Om["getActiveUniformBlockName"](ev,fv);if(!jv)return;if(iv&&gv>0){var kv=Rm(jv,iv,gv);if(hv)Wm[hv>>2]=kv}else{if(hv)Wm[hv>>2]=0}};Jp.prototype._glGetActiveUniformBlockiv=function(lv,mv,nv,ov){if(!ov){Nm.recordError(1281);return}lv=Nm.programs[lv];switch(nv){case 35393:var pv=Om["getActiveUniformBlockName"](lv,mv);Wm[ov>>2]=pv.length+1;return;default:var qv=Om["getActiveUniformBlockParameter"](lv,mv,nv);if(!qv)return;if(typeof qv=="number"){Wm[ov>>2]=qv}else{for(var rv=0;rv<qv.length;rv++){Wm[ov+rv*4>>2]=qv[rv]}}}};Jp.prototype._glGetActiveUniformsiv=function(sv,tv,uv,vv,wv){if(!wv){Nm.recordError(1281);return}if(tv>0&&uv==0){Nm.recordError(1281);return}sv=Nm.programs[sv];var xv=[];for(var yv=0;yv<tv;yv++){xv.push(Wm[uv+yv*4>>2])}var zv=Om["getActiveUniforms"](sv,xv,vv);if(!zv)return;var Av=zv.length;for(var yv=0;yv<Av;yv++){Wm[wv+yv*4>>2]=zv[yv]}};Jp.prototype._glGetAttribLocation=function(Bv,Cv){return Om.getAttribLocation(Nm.programs[Bv],Qm(Cv))};Jp.prototype._glGetError=function(){if(Nm.lastError){var Dv=Nm.lastError;Nm.lastError=0;return Dv}else{return Om.getError()}};Jp.prototype._glGetFramebufferAttachmentParameteriv=function(Ev,Fv,Gv,Hv){var Iv=Om.getFramebufferAttachmentParameter(Ev,Fv,Gv);if(Iv instanceof WebGLRenderbuffer||Iv instanceof WebGLTexture){Iv=Iv["name"]|0}Wm[Hv>>2]=Iv};Jp.prototype._glGetIntegeri_v=function(Jv,Kv,Lv){cn(Jv,Kv,Lv,"Integer")};Jp.prototype._glGetIntegerv=function(Mv,Nv){dn(Mv,Nv,"Integer")};Jp.prototype._glGetInternalformativ=function(Ov,Pv,Qv,Rv,Sv){if(Rv<0){Nm.recordError(1281);return}var Tv=Om["getInternalformatParameter"](Ov,Pv,32937);if(!Tv){Nm.recordError(1280);return}switch(Qv){case 32937:var Uv=Math.min(Rv,Tv.length);for(var Vv=0;Vv<Uv;Vv++){var Wv=Tv[Vv];Wm[Sv+Vv*4>>2]=Wv}break;case 37760:if(Rv>1){var Wv=Tv.length;Wm[Sv>>2]=Wv}break;default:Nm.recordError(1280)}};Jp.prototype._glGetProgramBinary=function(Xv,Yv,Zv,$v,_v){Nm.recordError(1282)};Jp.prototype._glGetProgramInfoLog=function(aw,bw,cw,dw){var ew=Om.getProgramInfoLog(Nm.programs[aw]);if(ew===null)ew="(unknown error)";if(bw>0&&dw){var fw=Rm(ew,dw,bw);if(cw)Wm[cw>>2]=fw}else{if(cw)Wm[cw>>2]=0}};Jp.prototype._glGetProgramiv=function(gw,hw,iw){if(!iw){Nm.recordError(1281);return}if(gw>=Nm.counter){Nm.recordError(1281);return}var jw=Nm.programInfos[gw];if(!jw){Nm.recordError(1282);return}if(hw==35716){var kw=Om.getProgramInfoLog(Nm.programs[gw]);if(kw===null)kw="(unknown error)";Wm[iw>>2]=kw.length+1}else if(hw==35719){Wm[iw>>2]=jw.maxUniformLength}else if(hw==35722){if(jw.maxAttributeLength==-1){gw=Nm.programs[gw];var lw=Om.getProgramParameter(gw,Om.ACTIVE_ATTRIBUTES);jw.maxAttributeLength=0;for(var mw=0;mw<lw;++mw){var nw=Om.getActiveAttrib(gw,mw);jw.maxAttributeLength=Math.max(jw.maxAttributeLength,nw.name.length+1)}}Wm[iw>>2]=jw.maxAttributeLength}else if(hw==35381){if(jw.maxUniformBlockNameLength==-1){gw=Nm.programs[gw];var ow=Om.getProgramParameter(gw,Om.ACTIVE_UNIFORM_BLOCKS);jw.maxUniformBlockNameLength=0;for(var mw=0;mw<ow;++mw){var pw=Om.getActiveUniformBlockName(gw,mw);jw.maxUniformBlockNameLength=Math.max(jw.maxUniformBlockNameLength,pw.length+1)}}Wm[iw>>2]=jw.maxUniformBlockNameLength}else{Wm[iw>>2]=Om.getProgramParameter(Nm.programs[gw],hw)}};Jp.prototype._glGetRenderbufferParameteriv=function(qw,rw,sw){if(!sw){Nm.recordError(1281);return}Wm[sw>>2]=Om.getRenderbufferParameter(qw,rw)};Jp.prototype._glGetShaderInfoLog=function(tw,uw,vw,ww){var xw=Om.getShaderInfoLog(Nm.shaders[tw]);if(xw===null)xw="(unknown error)";if(uw>0&&ww){var yw=Rm(xw,ww,uw);if(vw)Wm[vw>>2]=yw}else{if(vw)Wm[vw>>2]=0}};Jp.prototype._glGetShaderPrecisionFormat=function(zw,Aw,Bw,Cw){var Dw=Om.getShaderPrecisionFormat(zw,Aw);Wm[Bw>>2]=Dw.rangeMin;Wm[Bw+4>>2]=Dw.rangeMax;Wm[Cw>>2]=Dw.precision};Jp.prototype._glGetShaderSource=function(Ew,Fw,Gw,Hw){var Iw=Om.getShaderSource(Nm.shaders[Ew]);if(!Iw)return;if(Fw>0&&Hw){var Jw=Rm(Iw,Hw,Fw);if(Gw)Wm[Gw>>2]=Jw}else{if(Gw)Wm[Gw>>2]=0}};Jp.prototype._glGetShaderiv=function(Kw,Lw,Mw){if(!Mw){Nm.recordError(1281);return}if(Lw==35716){var Nw=Om.getShaderInfoLog(Nm.shaders[Kw]);if(Nw===null)Nw="(unknown error)";Wm[Mw>>2]=Nw.length+1}else if(Lw==35720){var Ow=Om.getShaderSource(Nm.shaders[Kw]);var Pw=Ow===null||Ow.length==0?0:Ow.length+1;Wm[Mw>>2]=Pw}else{Wm[Mw>>2]=Om.getShaderParameter(Nm.shaders[Kw],Lw)}};Jp.prototype._glGetString=function(Qw){Pm("unsupported glGetString");return 0};Jp.prototype._glGetStringi=function(Rw,Sw){Pm("unsupported glGetStringi");return 0};Jp.prototype._glGetTexParameteriv=function(Tw,Uw,Vw){if(!Vw){Nm.recordError(1281);return}Wm[Vw>>2]=Om.getTexParameter(Tw,Uw)};Jp.prototype._glGetUniformBlockIndex=function(Ww,Xw){Ww=Nm.programs[Ww];Xw=Qm(Xw);return Om["getUniformBlockIndex"](Ww,Xw)};Jp.prototype._glGetUniformIndices=function(Yw,Zw,$w,_w){if(!_w){Nm.recordError(1281);return}if(Zw>0&&($w==0||_w==0)){Nm.recordError(1281);return}Yw=Nm.programs[Yw];var ax=[];for(var bx=0;bx<Zw;bx++)ax.push(Qm(Wm[$w+bx*4>>2]));var cx=Om["getUniformIndices"](Yw,ax);if(!cx)return;var dx=cx.length;for(var bx=0;bx<dx;bx++){Wm[_w+bx*4>>2]=cx[bx]}};Jp.prototype._glGetUniformLocation=function(ex,fx){fx=Qm(fx);var gx=0;if(fx.indexOf("]",fx.length-1)!==-1){var hx=fx.lastIndexOf("[");var ix=fx.slice(hx+1,-1);if(ix.length>0){gx=parseInt(ix);if(gx<0){return-1}}fx=fx.slice(0,hx)}var jx=Nm.programInfos[ex];if(!jx){return-1}var kx=jx.uniforms;var lx=kx[fx];if(lx&&gx<lx[0]){return lx[1]+gx}else{return-1}};Jp.prototype._glGetUniformiv=function(mx,nx,ox){en(mx,nx,ox,"Integer")};Jp.prototype._glGetVertexAttribiv=function(px,qx,rx){fn(px,qx,rx,"FloatToInteger")};Jp.prototype._glInvalidateFramebuffer=function(sx,tx,ux){var vx=Nm.tempFixedLengthArray[tx];for(var wx=0;wx<tx;wx++){vx[wx]=Wm[ux+wx*4>>2]}Om["invalidateFramebuffer"](sx,vx)};Jp.prototype._glIsEnabled=function(xx){return Om["isEnabled"](xx)};Jp.prototype._glIsVertexArray=function(yx){var zx=Nm.vaos[yx];if(!zx)return 0;return Om["isVertexArray"](zx)};Jp.prototype._glLinkProgram=function(Ax){Om.linkProgram(Nm.programs[Ax]);Nm.programInfos[Ax]=null;Nm.populateUniformTable(Ax)};Jp.prototype._glMapBufferRange=function(Bx,Cx,Dx,Ex){if(Ex!=26&&Ex!=10){Pm("glMapBufferRange is only supported when access is MAP_WRITE|INVALIDATE_BUFFER");return 0}if(!bn(Bx)){Nm.recordError(1280);Pm("GL_INVALID_ENUM in glMapBufferRange");return 0}var Fx=Zm(Dx);if(!Fx)return 0;Nm.mappedBuffers[an(Bx)]={offset:Cx,length:Dx,mem:Fx,access:Ex};return Fx};Jp.prototype._glPixelStorei=function(Gx,Hx){if(Gx==3333){Nm.packAlignment=Hx}else if(Gx==3317){Nm.unpackAlignment=Hx}Om.pixelStorei(Gx,Hx)};Jp.prototype._glPolygonOffset=function(Ix,Jx){Om["polygonOffset"](Ix,Jx)};Jp.prototype._glProgramBinary=function(Kx,Lx,Mx,Nx){Nm.recordError(1280)};Jp.prototype._glProgramParameteri=function(Ox,Px,Qx){Nm.recordError(1280)};Jp.prototype._glReadBuffer=function(Rx){Om["readBuffer"](Rx)};Jp.prototype._glReadPixels=function(Sx,Tx,Ux,Vx,Wx,Xx,Yx){if(Nm.currentContext.supportsWebGL2EntryPoints){if(Om.currentPixelPackBufferBinding){Om.readPixels(Sx,Tx,Ux,Vx,Wx,Xx,Yx)}else{Om.readPixels(Sx,Tx,Ux,Vx,Wx,Xx,jn(Xx),Yx>>kn(Xx))}return}var Zx=hn(Xx,Wx,Ux,Vx,Yx,Wx);if(!Zx){Nm.recordError(1280);return}Om.readPixels(Sx,Tx,Ux,Vx,Wx,Xx,Zx)};Jp.prototype._glRenderbufferStorage=function($x,_x,ay,by){Om["renderbufferStorage"]($x,_x,ay,by)};Jp.prototype._glRenderbufferStorageMultisample=function(cy,dy,ey,fy,gy){Om["renderbufferStorageMultisample"](cy,dy,ey,fy,gy)};Jp.prototype._glSamplerParameteri=function(hy,iy,jy){Om["samplerParameteri"](hy?Nm.samplers[hy]:null,iy,jy)};Jp.prototype._glScissor=function(ky,ly,my,ny){Om["scissor"](ky,ly,my,ny)};Jp.prototype._glShaderSource=function(oy,py,qy,ry){var sy=Nm.getSource(oy,py,qy,ry);Om.shaderSource(Nm.shaders[oy],sy)};Jp.prototype._glStencilFuncSeparate=function(ty,uy,vy,wy){Om["stencilFuncSeparate"](ty,uy,vy,wy)};Jp.prototype._glStencilMask=function(xy){Om["stencilMask"](xy)};Jp.prototype._glStencilOpSeparate=function(yy,zy,Ay,By){Om["stencilOpSeparate"](yy,zy,Ay,By)};Jp.prototype._glTexImage2D=function(Cy,Dy,Ey,Fy,Gy,Hy,Iy,Jy,Ky){if(Nm.currentContext.supportsWebGL2EntryPoints){if(Om.currentPixelUnpackBufferBinding){Om.texImage2D(Cy,Dy,Ey,Fy,Gy,Hy,Iy,Jy,Ky)}else if(Ky!=0){Om.texImage2D(Cy,Dy,Ey,Fy,Gy,Hy,Iy,Jy,jn(Jy),Ky>>kn(Jy))}else{Om.texImage2D(Cy,Dy,Ey,Fy,Gy,Hy,Iy,Jy,null)}return}var Ly=null;if(Ky)Ly=hn(Jy,Iy,Fy,Gy,Ky,Ey);Om.texImage2D(Cy,Dy,Ey,Fy,Gy,Hy,Iy,Jy,Ly)};Jp.prototype._glTexImage3D=function(My,Ny,Oy,Py,Qy,Ry,Sy,Ty,Uy,Vy){if(Om.currentPixelUnpackBufferBinding){Om["texImage3D"](My,Ny,Oy,Py,Qy,Ry,Sy,Ty,Uy,Vy)}else if(Vy!=0){Om["texImage3D"](My,Ny,Oy,Py,Qy,Ry,Sy,Ty,Uy,jn(Uy),Vy>>kn(Uy))}else{Om["texImage3D"](My,Ny,Oy,Py,Qy,Ry,Sy,Ty,Uy,null)}};Jp.prototype._glTexParameterf=function(Wy,Xy,Yy){Om["texParameterf"](Wy,Xy,Yy)};Jp.prototype._glTexParameteri=function(Zy,$y,_y){Om["texParameteri"](Zy,$y,_y)};Jp.prototype._glTexParameteriv=function(az,bz,cz){var dz=Wm[cz>>2];Om.texParameteri(az,bz,dz)};Jp.prototype._glTexStorage2D=function(ez,fz,gz,hz,iz){Om["texStorage2D"](ez,fz,gz,hz,iz)};Jp.prototype._glTexStorage3D=function(jz,kz,lz,mz,nz,oz){Om["texStorage3D"](jz,kz,lz,mz,nz,oz)};Jp.prototype._glTexSubImage2D=function(pz,qz,rz,sz,tz,uz,vz,wz,xz){if(Nm.currentContext.supportsWebGL2EntryPoints){if(Om.currentPixelUnpackBufferBinding){Om.texSubImage2D(pz,qz,rz,sz,tz,uz,vz,wz,xz)}else if(xz!=0){Om.texSubImage2D(pz,qz,rz,sz,tz,uz,vz,wz,jn(wz),xz>>kn(wz))}else{Om.texSubImage2D(pz,qz,rz,sz,tz,uz,vz,wz,null)}return}var yz=null;if(xz)yz=hn(wz,vz,tz,uz,xz,0);Om.texSubImage2D(pz,qz,rz,sz,tz,uz,vz,wz,yz)};Jp.prototype._glTexSubImage3D=function(zz,Az,Bz,Cz,Dz,Ez,Fz,Gz,Hz,Iz,Jz){if(Om.currentPixelUnpackBufferBinding){Om["texSubImage3D"](zz,Az,Bz,Cz,Dz,Ez,Fz,Gz,Hz,Iz,Jz)}else if(Jz!=0){Om["texSubImage3D"](zz,Az,Bz,Cz,Dz,Ez,Fz,Gz,Hz,Iz,jn(Iz),Jz>>kn(Iz))}else{Om["texSubImage3D"](zz,Az,Bz,Cz,Dz,Ez,Fz,Gz,Hz,Iz,null)}};Jp.prototype._glTransformFeedbackVaryings=function(Kz,Lz,Mz,Nz){Kz=Nm.programs[Kz];var Oz=[];for(var Pz=0;Pz<Lz;Pz++)Oz.push(Qm(Wm[Mz+Pz*4>>2]));Om["transformFeedbackVaryings"](Kz,Oz,Nz)};Jp.prototype._glUniform1fv=function(Qz,Rz,Sz){if(Nm.currentContext.supportsWebGL2EntryPoints){Om.uniform1fv(Nm.uniforms[Qz],Ym,Sz>>2,Rz);return}var Tz;if(Rz<=Nm.MINI_TEMP_BUFFER_SIZE){Tz=Nm.miniTempBufferViews[Rz-1];for(var Uz=0;Uz<Rz;++Uz){Tz[Uz]=Ym[Sz+4*Uz>>2]}}else{Tz=Ym.subarray(Sz>>2,Sz+Rz*4>>2)}Om.uniform1fv(Nm.uniforms[Qz],Tz)};Jp.prototype._glUniform1i=function(Vz,Wz){Om.uniform1i(Nm.uniforms[Vz],Wz)};Jp.prototype._glUniform1iv=function(Xz,Yz,Zz){if(Nm.currentContext.supportsWebGL2EntryPoints){Om.uniform1iv(Nm.uniforms[Xz],Wm,Zz>>2,Yz);return}Om.uniform1iv(Nm.uniforms[Xz],Wm.subarray(Zz>>2,Zz+Yz*4>>2))};Jp.prototype._glUniform1uiv=function($z,_z,aA){if(Nm.currentContext.supportsWebGL2EntryPoints){Om.uniform1uiv(Nm.uniforms[$z],Xm,aA>>2,_z)}else{Om.uniform1uiv(Nm.uniforms[$z],Xm.subarray(aA>>2,aA+_z*4>>2))}};Jp.prototype._glUniform2fv=function(bA,cA,dA){if(Nm.currentContext.supportsWebGL2EntryPoints){Om.uniform2fv(Nm.uniforms[bA],Ym,dA>>2,cA*2);return}var eA;if(2*cA<=Nm.MINI_TEMP_BUFFER_SIZE){eA=Nm.miniTempBufferViews[2*cA-1];for(var fA=0;fA<2*cA;fA+=2){eA[fA]=Ym[dA+4*fA>>2];eA[fA+1]=Ym[dA+(4*fA+4)>>2]}}else{eA=Ym.subarray(dA>>2,dA+cA*8>>2)}Om.uniform2fv(Nm.uniforms[bA],eA)};Jp.prototype._glUniform2iv=function(gA,hA,iA){if(Nm.currentContext.supportsWebGL2EntryPoints){Om.uniform2iv(Nm.uniforms[gA],Wm,iA>>2,hA*2);return}Om.uniform2iv(Nm.uniforms[gA],Wm.subarray(iA>>2,iA+hA*8>>2))};Jp.prototype._glUniform2uiv=function(jA,kA,lA){if(Nm.currentContext.supportsWebGL2EntryPoints){Om.uniform2uiv(Nm.uniforms[jA],Xm,lA>>2,kA*2)}else{Om.uniform2uiv(Nm.uniforms[jA],Xm.subarray(lA>>2,lA+kA*8>>2))}};Jp.prototype._glUniform3fv=function(mA,nA,oA){if(Nm.currentContext.supportsWebGL2EntryPoints){Om.uniform3fv(Nm.uniforms[mA],Ym,oA>>2,nA*3);return}var pA;if(3*nA<=Nm.MINI_TEMP_BUFFER_SIZE){pA=Nm.miniTempBufferViews[3*nA-1];for(var qA=0;qA<3*nA;qA+=3){pA[qA]=Ym[oA+4*qA>>2];pA[qA+1]=Ym[oA+(4*qA+4)>>2];pA[qA+2]=Ym[oA+(4*qA+8)>>2]}}else{pA=Ym.subarray(oA>>2,oA+nA*12>>2)}Om.uniform3fv(Nm.uniforms[mA],pA)};Jp.prototype._glUniform3iv=function(rA,sA,tA){if(Nm.currentContext.supportsWebGL2EntryPoints){Om.uniform3iv(Nm.uniforms[rA],Wm,tA>>2,sA*3);return}Om.uniform3iv(Nm.uniforms[rA],Wm.subarray(tA>>2,tA+sA*12>>2))};Jp.prototype._glUniform3uiv=function(uA,vA,wA){if(Nm.currentContext.supportsWebGL2EntryPoints){Om.uniform3uiv(Nm.uniforms[uA],Xm,wA>>2,vA*3)}else{Om.uniform3uiv(Nm.uniforms[uA],Xm.subarray(wA>>2,wA+vA*12>>2))}};Jp.prototype._glUniform4fv=function(xA,yA,zA){if(Nm.currentContext.supportsWebGL2EntryPoints){Om.uniform4fv(Nm.uniforms[xA],Ym,zA>>2,yA*4);return}var AA;if(4*yA<=Nm.MINI_TEMP_BUFFER_SIZE){AA=Nm.miniTempBufferViews[4*yA-1];for(var BA=0;BA<4*yA;BA+=4){AA[BA]=Ym[zA+4*BA>>2];AA[BA+1]=Ym[zA+(4*BA+4)>>2];AA[BA+2]=Ym[zA+(4*BA+8)>>2];AA[BA+3]=Ym[zA+(4*BA+12)>>2]}}else{AA=Ym.subarray(zA>>2,zA+yA*16>>2)}Om.uniform4fv(Nm.uniforms[xA],AA)};Jp.prototype._glUniform4iv=function(CA,DA,EA){if(Nm.currentContext.supportsWebGL2EntryPoints){Om.uniform4iv(Nm.uniforms[CA],Wm,EA>>2,DA*4);return}Om.uniform4iv(Nm.uniforms[CA],Wm.subarray(EA>>2,EA+DA*16>>2))};Jp.prototype._glUniform4uiv=function(FA,GA,HA){if(Nm.currentContext.supportsWebGL2EntryPoints){Om.uniform4uiv(Nm.uniforms[FA],Xm,HA>>2,GA*4)}else{Om.uniform4uiv(Nm.uniforms[FA],Xm.subarray(HA>>2,HA+GA*16>>2))}};Jp.prototype._glUniformBlockBinding=function(IA,JA,KA){IA=Nm.programs[IA];Om["uniformBlockBinding"](IA,JA,KA)};Jp.prototype._glUniformMatrix3fv=function(LA,MA,NA,OA){if(Nm.currentContext.supportsWebGL2EntryPoints){Om.uniformMatrix3fv(Nm.uniforms[LA],!!NA,Ym,OA>>2,MA*9);return}var PA;if(9*MA<=Nm.MINI_TEMP_BUFFER_SIZE){PA=Nm.miniTempBufferViews[9*MA-1];for(var QA=0;QA<9*MA;QA+=9){PA[QA]=Ym[OA+4*QA>>2];PA[QA+1]=Ym[OA+(4*QA+4)>>2];PA[QA+2]=Ym[OA+(4*QA+8)>>2];PA[QA+3]=Ym[OA+(4*QA+12)>>2];PA[QA+4]=Ym[OA+(4*QA+16)>>2];PA[QA+5]=Ym[OA+(4*QA+20)>>2];PA[QA+6]=Ym[OA+(4*QA+24)>>2];PA[QA+7]=Ym[OA+(4*QA+28)>>2];PA[QA+8]=Ym[OA+(4*QA+32)>>2]}}else{PA=Ym.subarray(OA>>2,OA+MA*36>>2)}Om.uniformMatrix3fv(Nm.uniforms[LA],!!NA,PA)};Jp.prototype._glUniformMatrix4fv=function(RA,SA,TA,UA){if(Nm.currentContext.supportsWebGL2EntryPoints){Om.uniformMatrix4fv(Nm.uniforms[RA],!!TA,Ym,UA>>2,SA*16);return}var VA;if(16*SA<=Nm.MINI_TEMP_BUFFER_SIZE){VA=Nm.miniTempBufferViews[16*SA-1];for(var WA=0;WA<16*SA;WA+=16){VA[WA]=Ym[UA+4*WA>>2];VA[WA+1]=Ym[UA+(4*WA+4)>>2];VA[WA+2]=Ym[UA+(4*WA+8)>>2];VA[WA+3]=Ym[UA+(4*WA+12)>>2];VA[WA+4]=Ym[UA+(4*WA+16)>>2];VA[WA+5]=Ym[UA+(4*WA+20)>>2];VA[WA+6]=Ym[UA+(4*WA+24)>>2];VA[WA+7]=Ym[UA+(4*WA+28)>>2];VA[WA+8]=Ym[UA+(4*WA+32)>>2];VA[WA+9]=Ym[UA+(4*WA+36)>>2];VA[WA+10]=Ym[UA+(4*WA+40)>>2];VA[WA+11]=Ym[UA+(4*WA+44)>>2];VA[WA+12]=Ym[UA+(4*WA+48)>>2];VA[WA+13]=Ym[UA+(4*WA+52)>>2];VA[WA+14]=Ym[UA+(4*WA+56)>>2];VA[WA+15]=Ym[UA+(4*WA+60)>>2]}}else{VA=Ym.subarray(UA>>2,UA+SA*64>>2)}Om.uniformMatrix4fv(Nm.uniforms[RA],!!TA,VA)};Jp.prototype._glUnmapBuffer=function(XA){if(!bn(XA)){Nm.recordError(1280);Pm("GL_INVALID_ENUM in glUnmapBuffer");return 0}var YA=an(XA);var ZA=Nm.mappedBuffers[YA];if(!ZA){Nm.recordError(1282);Pm("buffer was never mapped in glUnmapBuffer");return 0}Nm.mappedBuffers[YA]=null;if(!(ZA.access&16))if(Nm.currentContext.supportsWebGL2EntryPoints){Om.bufferSubData(XA,ZA.offset,Tm,ZA.mem,ZA.length)}else{Om.bufferSubData(XA,ZA.offset,Tm.subarray(ZA.mem,ZA.mem+ZA.length))}$m(ZA.mem);return 1};Jp.prototype._glUseProgram=function($A){Om.useProgram($A?Nm.programs[$A]:null)};Jp.prototype._glValidateProgram=function(_A){Om.validateProgram(Nm.programs[_A])};Jp.prototype._glVertexAttrib4f=function(aB,bB,cB,dB,eB){Om["vertexAttrib4f"](aB,bB,cB,dB,eB)};Jp.prototype._glVertexAttrib4fv=function(fB,gB){Om.vertexAttrib4f(fB,Ym[gB>>2],Ym[gB+4>>2],Ym[gB+8>>2],Ym[gB+12>>2])};Jp.prototype._glVertexAttribIPointer=function(hB,iB,jB,kB,lB){var mB=Nm.currentContext.clientBuffers[hB];if(!Nm.currArrayBuffer){mB.size=iB;mB.type=jB;mB.normalized=false;mB.stride=kB;mB.ptr=lB;mB.clientside=true;return}mB.clientside=false;Om.vertexAttribIPointer(hB,iB,jB,kB,lB)};Jp.prototype._glVertexAttribPointer=function(nB,oB,pB,qB,rB,sB){Om.vertexAttribPointer(nB,oB,pB,!!qB,rB,sB)};Jp.prototype._glViewport=function(tB,uB,vB,wB){Om["viewport"](tB,uB,vB,wB)};return Jp}();Nm.instance=new ln;Nm.instance["_name"]="GL";return[Nm.instance]});