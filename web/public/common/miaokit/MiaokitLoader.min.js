var MiaokitModule=function(a,b){var c=this;c["m_pConfigPath"]=b;c["m_pConfig"]={ENGINE:a};c["Merge"](c);c["Preload"]()};var MiaokitMerge=function(d){var e=[];d["Merge"]=d["Merge"]||function(f){for(var g=0,h=e;g<h.length;g++){var i=h[g];var j=i(f);if(j){for(var k=0,l=j;k<l.length;k++){var m=l[k];f[m._name]=m}}}};return function(n){e.push(n)}}(MiaokitModule.prototype);MiaokitMerge(function(o){var p=undefined;var q=undefined;var r={};var s=function(u,v){if(v===void 0){v=undefined}var w=0;this.length=u(-1);this[Symbol.iterator]=function(){return{next:function(){var x=u(w);if(x){var y=p(x);w=v?w+1:y.m_nObject;return{value:y,done:false}}return{value:undefined,done:true}}}}};r["Transform"]=function(z){Object.defineProperty(z,"position",{get:function(){var A=this["_GetPosition"]()/4;var B=o["WASM"].HEAPF32();return{x:B[A],y:B[A+1],z:B[A+2]}},set:function(C){this["_SetPosition"](C.x,C.y,C.z)}});Object.defineProperty(z,"euler",{get:function(){var D=this["_GetEuler"]()/4;var E=o["WASM"].HEAPF32();return{x:E[D],y:E[D+1],z:E[D+2]}},set:function(F){this["_SetEuler"](F.x,F.y,F.z)}});Object.defineProperty(z,"rotation",{get:function(){var G=this["_GetRotation"]()/4;var H=o["WASM"].HEAPF32();return{x:H[G],y:H[G+1],z:H[G+2],w:H[G+3]}},set:function(I){this["_SetRotation"](I.x,I.y,I.z,I.w)}});Object.defineProperty(z,"scale",{get:function(){var J=this["_GetScale"]()/4;var K=o["WASM"].HEAPF32();return{x:K[J],y:K[J+1],z:K[J+2]}},set:function(L){this["_SetScale"](L.x,L.y,L.z)}});Object.defineProperty(z,"localPosition",{get:function(){var M=this["_GetLocalPosition"]()/4;var N=o["WASM"].HEAPF32();return{x:N[M],y:N[M+1],z:N[M+2]}},set:function(O){this["_SetLocalPosition"](O.x,O.y,O.z)}});Object.defineProperty(z,"localEuler",{get:function(){var P=this["_GetLocalEuler"]()/4;var Q=o["WASM"].HEAPF32();return{x:Q[P],y:Q[P+1],z:Q[P+2]}},set:function(R){this["_SetLocalEuler"](R.x,R.y,R.z)}});Object.defineProperty(z,"localRotation",{get:function(){var S=this["_GetLocalRotation"]()/4;var T=o["WASM"].HEAPF32();return{x:T[S],y:T[S+1],z:T[S+2],w:T[S+3]}},set:function(U){this["_SetLocalRotation"](U.x,U.y,U.z,U.w)}});Object.defineProperty(z,"localScale",{get:function(){var V=this["_GetLocalScale"]()/4;var W=o["WASM"].HEAPF32();return{x:W[V],y:W[V+1],z:W[V+2]}},set:function(X){this["_SetLocalScale"](X.x,X.y,X.z)}});Object.defineProperty(z,"right",{get:function(){var Y=this["_GetRight"]()/4;var Z=o["WASM"].HEAPF32();return{x:Z[Y],y:Z[Y+1],z:Z[Y+2]}},set:function($){this["_SetRight"]($.x,$.y,$.z)}});Object.defineProperty(z,"up",{get:function(){var _=this["_GetUp"]()/4;var aa=o["WASM"].HEAPF32();return{x:aa[_],y:aa[_+1],z:aa[_+2]}},set:function(){var ba=this["_SetUp"]()/4;var ca=o["WASM"].HEAPF32();return{x:ca[ba],y:ca[ba+1],z:ca[ba+2]}}});Object.defineProperty(z,"forward",{get:function(){var da=this["_GetForward"]()/4;var ea=o["WASM"].HEAPF32();return{x:ea[da],y:ea[da+1],z:ea[da+2]}},set:function(){var fa=this["_SetForward"]()/4;var ga=o["WASM"].HEAPF32();return{x:ga[fa],y:ga[fa+1],z:ga[fa+2]}}});Object.defineProperty(z,"regionPosition",{get:function(){var ha=this["_GisToWorld"]()/4;var ia=o["WASM"].HEAPF32();return{x:ia[ha],y:ia[ha+1],z:ia[ha+2]}}});z["Rotate"]=function(ja,ka){this["_Rotate"](ja.x,ja.y,ja.z,ka)};z["Rotate2"]=function(la,ma,na){this["_Rotate2"](la.x,la.y,la.z,ma,na)};z["Translate"]=function(oa,pa){this["_Translate"](oa.x,oa.y,oa.z,pa)};z["TransformPoint"]=function(qa){var ra=this["_TransformPoint"](qa.x,qa.y,qa.z)/4;var sa=o["WASM"].HEAPF32();return{x:sa[ra],y:sa[ra+1],z:sa[ra+2]}}};r["GameObject"]=function(ta){Object.defineProperty(ta,"name",{get:function(){if(!this._name){var ua=this._GetName(0);var va=this._GetName(1);this._name=o["WASM"].GetString(va,ua)}return this._name}});Object.defineProperty(ta,"transform",{get:function(){return p(this["_GetTransform"]())}});Object.defineProperty(ta,"mesh",{get:function(){return p(this["_GetMesh"]())},set:function(wa){this["_SetMesh"](wa.m_nObject)}});Object.defineProperty(ta,"children",{get:function(){var xa=this;return new s(function(ya){return xa._IterChild(ya)},true)}});Object.defineProperty(ta,"parent",{get:function(){return p(this["_GetParent"]())}});Object.defineProperty(ta,"data",{get:function(){return p(this["_GetUserData"]())},set:function(za){}});Object.defineProperty(ta,"enableCollider",{set:function(Aa){this["_EnableCollider"](Aa)}});Object.defineProperty(ta,"active",{set:function(Ba){this["_Active"](Ba)}});Object.defineProperty(ta,"highlight",{set:function(Ca){this["_Highlight"](Ca)}});Object.defineProperty(ta,"transparent",{set:function(Da){console.warn("transparent discard!")}});Object.defineProperty(ta,"opacity",{set:function(Ea){this["_Transparent"](Ea)}});ta["Destory"]=function(){this["_Destory"]()};o["GameObject"]=function(){return p(ta._GameObject())}};r["Miaokit"]=function(Fa){Fa["LoadTile"]=function(Ga){var Ha=this["_Malloc"](Ga.byteLength);if(Ha){o["WASM"]["HEAPU8"](Ha,Ga.byteLength).set(new Uint8Array(Ga));var Ia=this["_LoadTile"](Ha,Ga.byteLength);var Ja=p(Ia);return Ja}return null};Fa["Analyze"]=function(Ka){var La=this["_Analyze"]();var Ma=o["WASM"].HEAP32()[La/4];var Na=o["WASM"].GetString(La+4,Ma);try{var Oa=JSON.parse(Na);var Pa=q(Ka).concat(Oa);return Pa}catch(Qa){console.log(Na)}return null};Fa["PickEntity"]=function(Ra){return p(this["_PickEntity"](Ra))};Fa["GetScene"]=function(Sa){return p(this["_GetScene"](Sa))};Fa["LngLatToGis"]=function(Ta,Ua,Va){var Wa=this["_LngLatToGis"](Ta.x,Ta.y,Ua.x,Ua.y,Ua.z,Va)/4;var Xa=o["WASM"].HEAPF32();return{x:Xa[Wa],y:Xa[Wa+1],z:Xa[Wa+2]}};Fa["GisToWorld"]=function(Ya){var Za=this["_GisToWorld"](Ya.x,Ya.y,Ya.z)/4;var $a=o["WASM"].HEAPF32();return{x:$a[Za],y:$a[Za+1],z:$a[Za+2]}};Fa["WorldToScreenPoint"]=function(_a){var ab=this["_WorldToScreenPoint"](_a.x,_a.y,_a.z)/4;var bb=o["WASM"].HEAPF32();return{x:bb[ab],y:bb[ab+1],z:bb[ab+2]}};Fa["ScreenPointToRay"]=function(cb){var db=this["_ScreenPointToRay"](cb.x,cb.y,cb.z)/4;var eb=o["WASM"].HEAPF32();return{m_mOrigin:{x:eb[db],y:eb[db+1],z:eb[db+2]},m_mDirection:{x:eb[db+4],y:eb[db+5],z:eb[db+6]}}};Object.defineProperty(Fa,"camera",{get:function(){return p(this["_GetCamera"]())}});Object.defineProperty(Fa,"cameraMode",{set:function(fb){this["_SetCameraMode"](fb)}});Object.defineProperty(Fa,"fieldOfView",{set:function(gb){this["_FieldOfView"](gb)}});Object.defineProperty(Fa,"gis",{get:function(){if(!this._gis){this._gis=r["Gis"]["g_pIns"]}return this._gis}});Object.defineProperty(Fa,"panoramas",{get:function(){if(!this._panoramas){this._panoramas=r["Panoramas"]["g_pIns"]}return this._panoramas}});Object.defineProperty(Fa,"progress",{get:function(){return this["_GetProgress"]()}})};r["Mesh"]=function(hb){hb["SetVertices"]=function(ib,jb){this["m_aVertex"]=this["m_aVertex"]||[];this["m_aVertex"].push({m_pArray:jb,m_nSlot:this["_SlotLut"][ib],m_nItemSize:this["_SizeLut"][ib]})};hb["SetIndices"]=function(kb,lb,mb){this["m_aIndex"]=this["m_aIndex"]||[];this["m_aIndex"][kb]={m_pArray:lb,m_nItemSize:mb}};hb["Apply"]=function(){var nb=this["m_aVertex"];var ob=this["m_aIndex"];if(!nb||!ob){return}var pb=2+2*nb.length+3*ob.length;var qb=this._CreateBuffer(pb);var rb=o["WASM"]["HEAP32"](qb,pb*4);var sb=0;rb[sb++]=nb.length;rb[sb++]=ob.length;for(var tb=0;tb<nb.length;tb++){rb[sb++]=nb[tb].m_nSlot;rb[sb++]=nb[tb].m_pArray.length/nb[tb].m_nItemSize}for(var tb=0;tb<ob.length;tb++){rb[sb++]=0;rb[sb++]=0;rb[sb++]=ob[tb].m_pArray.length}this._CreateBuffer(0);for(var tb=0;tb<nb.length;tb++){var ub=nb[tb].m_pArray;var vb=this._GetVertexBuffer(tb);var wb=o["WASM"]["HEAPF32"](vb,ub.length*4);wb.set(ub)}for(var tb=0;tb<ob.length;tb++){var ub=ob[tb].m_pArray;var vb=this._GetIndexBuffer(tb);var wb=o["WASM"]["HEAP32"](vb,ub.length*4);wb.set(ub)}this._Apply();this["m_aVertex"]=undefined;this["m_aIndex"]=undefined};hb["_SlotLut"]={position:0,normal:1,uv:2,color:3,tangent:4,uv2:9,uv3:10,uv4:11,uv5:12,uv6:13,uv7:14,uv8:15};hb["_SizeLut"]={position:3,normal:3,uv:2,color:4,tangent:4,uv2:2,uv3:2,uv4:2,uv5:2,uv6:2,uv7:2,uv8:2};Object.defineProperty(hb,"position",{set:function(xb){this.SetVertices("position",xb)}});Object.defineProperty(hb,"normal",{set:function(yb){this.SetVertices("normal",yb)}});Object.defineProperty(hb,"uv",{set:function(zb){this.SetVertices("uv",zb)}});Object.defineProperty(hb,"triangles",{set:function(Ab){this.SetIndices(0,Ab)}});Object.defineProperty(hb,"material",{set:function(Bb){this.SetMaterial(0,Bb)}});o["Mesh"]=function(){return p(hb._Mesh())}};r["Texture2D"]=function(Cb){Cb["SetImageData"]=function(Db){var Eb=this._CreateBuffer(Db.byteLength);if(Eb){o["WASM"]["HEAPU8"](Eb,Db.byteLength).set(new Uint8Array(Db));this._Apply()}};Cb["Load"]=function(Fb){var Gb=this;o["Fetch"](Fb,function(Hb){if(Hb){Gb.SetImageData(Hb)}})};o["Texture2D"]=function(Ib){var Jb=p(Cb._Texture2D());if(Ib){if("string"===typeof Ib){this.Load(Ib)}else{this.SetImageData(Ib)}}return Jb}};r["Material"]=function(Kb){if("Sisyphus"===o["m_pConfig"]["ENGINE"]){o["ShaderLab"].ExpandMaterial(Kb)}Kb["GetTexture"]=function(){return p(this["_GetTexture"]())};Kb["SetTexture"]=function(Lb){this["_SetTexture"](Lb.m_nObject)};o["Material"]=function(Mb){if(Mb===void 0){Mb=undefined}var Nb=null;if(Mb){var Ob=o["ShaderLab"]["Pipeline"]["InternalShader"];var Pb=Ob[0];Ob[0]=Mb;Nb=p(Kb._Material());Ob[0]=Pb}else{Nb=p(Kb._Material())}return Nb}};r["Tile"]=function(Qb){Object.defineProperty(Qb,"scenes",{get:function(){var Rb=this;return new s(function(Sb){return Rb._IterWork(Sb)})}});Object.defineProperty(Qb,"object3D",{get:function(){if(undefined===this._object3D){var Tb=this._GetObject(this.m_nObject);if(0===Tb){this._object3D=null;return null}this._object3D=p(Tb)}return this._object3D}})};r["Scene"]=function(Ub){Ub["GetLayer"]=function(Vb){return p(this["_GetLayer"](Vb))};Object.defineProperty(Ub,"id",{get:function(){if(!this._id){var Wb=this._GetID(0);var Xb=this._GetID(1);this._id=o["WASM"].GetString(Xb,Wb)}return this._id}});Object.defineProperty(Ub,"layers",{get:function(){var Yb=this;return new s(function(Zb){return Yb._IterLayer(Zb)})}});Object.defineProperty(Ub,"object3D",{get:function(){if(undefined===this._object3D){var $b=this._GetObject(this.m_nObject);if(0===$b){this._object3D=null;return null}this._object3D=p($b)}return this._object3D}});Object.defineProperty(Ub,"viewState",{get:function(){return{m_mTarget:{x:0,y:0,z:0},m_nPitch:45,m_nYaw:0,m_nDistance:60,m_mOrthoTarget:{x:0,y:0,z:0},m_nOrthoScaled:0,m_nOrthoRotate:0}}});Object.defineProperty(Ub,"binding",{get:function(){return p(this._GetBinding())}})};r["Layer"]=function(_b){Object.defineProperty(_b,"id",{get:function(){if(!this._id){var ac=this._GetID(0);var bc=this._GetID(1);this._id=o["WASM"].GetString(bc,ac)}return this._id}});Object.defineProperty(_b,"sites",{get:function(){var cc=this;return new s(function(dc){return cc._IterSite(dc)})}});Object.defineProperty(_b,"object3D",{get:function(){if(undefined===this._object3D){var ec=this._GetObject(this.m_nObject);if(0===ec){this._object3D=null;return null}this._object3D=p(ec)}return this._object3D}});Object.defineProperty(_b,"viewState",{get:function(){var fc=this["_GetViewState"]();if(0<fc){var gc=o["WASM"]["HEAPF32"](fc,4*11);var hc=0;return{m_mTarget:{x:gc[hc++],y:gc[hc++],z:gc[hc++]},m_nPitch:gc[hc++],m_nYaw:gc[hc++],m_nDistance:gc[hc++],m_mOrthoTarget:{x:gc[hc++],y:gc[hc++],z:gc[hc++]},m_nOrthoScaled:gc[hc++],m_nOrthoRotate:gc[hc++]}}return null}})};r["Attachment"]=function(ic){Object.defineProperty(ic,"entityType",{get:function(){return this._GetEntityType()}});Object.defineProperty(ic,"secondType",{get:function(){return this._GetSecondType()}});Object.defineProperty(ic,"flag",{get:function(){return this._GetFlag()}});Object.defineProperty(ic,"object3D",{get:function(){return p(this._GetObject())}});Object.defineProperty(ic,"viewState",{get:function(){var jc=this["_GetViewState"]();if(0<jc){var kc=o["WASM"]["HEAPF32"](jc,4*11);var lc=0;var mc={m_mTarget:{x:kc[lc++],y:kc[lc++],z:kc[lc++]},m_nPitch:kc[lc++],m_nYaw:kc[lc++],m_nDistance:kc[lc++],m_mOrthoTarget:{x:kc[lc++],y:kc[lc++],z:kc[lc++]},m_nOrthoScaled:kc[lc++],m_nOrthoRotate:kc[lc++]};console.log("attachment view:",mc);return mc}else{console.log("attachment view: null")}return null}})};r["Site"]=function(nc){Object.defineProperty(nc,"id",{get:function(){if(!this._id){var oc=this._GetID(0);var pc=this._GetID(1);this._id=o["WASM"].GetString(pc,oc)}return this._id}});Object.defineProperty(nc,"layer",{get:function(){return p(this["_Layer"]())}});Object.defineProperty(nc,"scene",{get:function(){return p(this["_Scene"]())}});Object.defineProperty(nc,"type",{get:function(){return this["_Type"]()}});Object.defineProperty(nc,"number",{get:function(){return this["_Number"]()}});Object.defineProperty(nc,"position",{get:function(){var qc=this["_Position"]()/4;var rc=o["WASM"].HEAPF32();return{x:rc[qc],y:rc[qc+1],z:rc[qc+2]}}})};r["Prefab"]=function(sc){sc["Instantiate"]=function(){return p(this["_Instantiate"]())};o["LoadPrefab"]=function(tc,uc){o["Fetch"](tc,function(vc){var wc=null;if(vc){var xc=sc._Prefab();var yc=p(xc);var zc=yc.CreateBuffer(vc.byteLength);if(zc){o["WASM"]["HEAPU8"](zc,vc.byteLength).set(new Uint8Array(vc));yc.Apply();wc=yc}}uc(wc)})}};r["Gis"]=function(Ac){Ac["Update"]=function(Bc,Cc,Dc){return this["_Update"](Bc,Cc,Dc)};Ac["AddSvetile"]=function(Ec){var Fc=o["WASM"]["EncodeString"](Ec.m_pUrl);var Gc=this["_CreateSvetileDesc"](Fc.byteLength);var Hc=o["WASM"]["HEAPU32"](Gc,4*8);Hc[0]=Ec.m_nID;Hc[1]=Ec.m_nFlags;o["WASM"]["HEAPU8"](Hc[2],Fc.byteLength).set(Fc,0);Hc[3]=0;Hc[4]=o["WASM"]["RegisterDelegate"](function(Jc,Kc){Ec.OnActive(p(Jc),0<Kc)});var Ic=o["WASM"]["HEAPF32"](Gc+20,16);Ic[0]=Ec.m_mLngLat.x;Ic[1]=Ec.m_mLngLat.y;Ic[2]=Ec.m_mSize.x;Ic[3]=Ec.m_mSize.y;this["_AddSvetile"](Gc)};Ac["AddMapbox"]=function(Lc){var Mc=this["_GetMapboxDesc"]();var Nc=o["WASM"]["HEAPF32"](Mc,40);Nc[0]=Lc.m_mOffset.x;Nc[1]=Lc.m_mOffset.y;Nc[2]=Lc.m_mOffset.z;Nc[3]=Lc.m_mScale.x;Nc[4]=Lc.m_mScale.y;Nc[5]=Lc.m_mScale.z;Nc[6]=Lc.m_mLngLat.x;Nc[7]=Lc.m_mLngLat.y;Nc[8]=Lc.m_mSize.x;Nc[9]=Lc.m_mSize.y;this["_AddMapbox"](Mc)};Ac["AddGameObject"]=function(Oc,Pc,Qc,Rc){this["_AddGameObject"](Oc.m_nObject,Pc,Qc,Rc)};Object.defineProperty(Ac,"terrainServer",{set:function(Sc){if(!Sc){Sc="https://t%d.tianditu.gov.cn/DEM/DataServer?T=ele_c&tk=3d26628c3a0e2694fecfbbb983ff7d87&x=%d&y=%d&l=%d"}var Tc=this["_GetServer"](0);o["WASM"].SetString(Tc,Sc)}});Object.defineProperty(Ac,"imageServer",{set:function(Uc){if(!Uc){Uc="http://t%d.tianditu.gov.cn/DataServer?T=img_c&tk=3d26628c3a0e2694fecfbbb983ff7d87&x=%d&y=%d&l=%d"}var Vc=this["_GetServer"](1);o["WASM"].SetString(Vc,Uc)}});Object.defineProperty(Ac,"labelServer",{set:function(Wc){if(!Wc){Wc="http://t%d.tianditu.gov.cn/DataServer?T=cia_c&tk=3d26628c3a0e2694fecfbbb983ff7d87&x=%d&y=%d&l=%d"}var Xc=this["_GetServer"](2);o["WASM"].SetString(Xc,Wc)}})};r["Panoramas"]=function(Yc){var Zc=null;var $c=function(_c){var ad=o["GL"]["ImageCache"];var bd=null;var cd=null;var dd=null;var ed=0;var fd=90;var gd=function(md,nd){var od=0;var pd=md.m_pPath;var qd=["r","f","l","b","d","u"];for(var rd=0;rd<6;rd++){for(var sd=0;sd<2;sd++){var td=function(vd){var wd=rd;var xd=1;var yd=sd;var zd=vd;var Ad=ad.CreateImage();var Bd=ad.Get(Ad);var Cd=pd+"l"+xd+"_"+qd[wd]+"_0"+(1+yd)+"_0"+(2-zd)+".jpg";Bd.crossOrigin="anonymous";Bd.src=Cd;Bd.onload=function(Dd){if(1===md.m_nState){_c["_SetImage"](wd,xd,yd,zd,Ad);if(24===++od){nd()}}}};for(var ud=0;ud<2;ud++){td(ud)}}}};var hd=function(Ed,Fd){Zc=Ed;cd=Fd;bd={m_mTarget:{x:Fd.m_mTarget.x,y:Fd.m_mTarget.y,z:Fd.m_mTarget.z},m_nDistance:Fd.m_nDistance,m_nPitch:Fd.m_nPitch,m_nYaw:Fd.m_nYaw,m_nField:Fd.m_nField};Ed.m_nState=1;if(!Ed.m_mGisPos){Ed.m_mGisPos=o.Miaokit.LngLatToGis(Ed.m_mLngLat,Ed.m_nOffset,Ed.m_nHeight)}_c["_Open"](Ed.m_mGisPos.x,Ed.m_mGisPos.y,Ed.m_mGisPos.z);gd(Ed,function(){kd(Ed)})};var id=function(){if(dd){if(fd>ed){var Gd=++ed/fd;var Hd=cd.m_mTarget;var Id=dd.m_mTarget;var Jd={x:0,y:0,z:0};var Kd=0;var Ld=0;var Md=0;Jd.x=Hd.x+(Id.x-Hd.x)*Gd;Jd.y=Hd.y+(Id.y-Hd.y)*Gd;Jd.z=Hd.z+(Id.z-Hd.z)*Gd;Kd=cd.m_nDistance+(dd.m_nDistance-cd.m_nDistance)*Gd;Ld=cd.m_nPitch+(dd.m_nPitch-cd.m_nPitch)*Gd;Md=cd.m_nYaw+(dd.m_nYaw-cd.m_nYaw)*Gd;if(-90>Ld){Ld=180-Ld}if(2===Zc.m_nState||5===Zc.m_nState){o.Miaokit.fieldOfView=cd.m_nField+(dd.m_nField-cd.m_nField)*Gd}cd.m_pTransform.position={x:0,y:0,z:0};cd.m_pTransform.euler={x:0,y:0,z:0};cd.m_pTransform.Rotate2({x:1,y:0,z:0},Ld,1);cd.m_pTransform.Rotate2({x:0,y:1,z:0},Md,0);cd.m_pTransform.position=Jd;cd.m_pTransform.Translate(o.Vector3.Scale(-Kd,{x:0,y:0,z:1}),1);if(fd===ed){cd.m_mTarget=Jd;cd.m_nDistance=Kd;cd.m_nPitch=Ld;cd.m_nYaw=Md;cd.m_nField=dd.m_nField;if(2===Zc.m_nState){Zc.m_nState=3;dd.m_nDistance=0;dd.m_nPitch=0;dd.m_nYaw=0;dd.m_nField=105;ed=0;fd=90}else if(3===Zc.m_nState){Zc.m_nState=4}else if(5===Zc.m_nState){Zc.m_nState=0;Zc=null;bd=null;cd=null;dd=null}}}}};var jd=function(Nd,Od,Pd,Qd){if(!Zc||4!==Zc.m_nState){return}var Rd=dd.m_nPitch;var Sd=dd.m_nYaw;Sd+=Nd/Pd*90;Rd-=Od/Qd*90;if(-90>Rd){Rd=-90}if(90<Rd){Rd=90}dd.m_nPitch=Rd;dd.m_nYaw=Sd;ed=0;fd=1};var kd=function(Td){Td.m_nState=2;dd={m_mTarget:_c.Position(Td),m_nDistance:60,m_nPitch:90,m_nYaw:180,m_nField:105};ed=0;fd=90};var ld=function(){Zc.m_nState=5;dd={m_mTarget:{x:bd.m_mTarget.x,y:bd.m_mTarget.y,z:bd.m_mTarget.z},m_nDistance:bd.m_nDistance,m_nPitch:bd.m_nPitch,m_nYaw:bd.m_nYaw,m_nField:bd.m_nField};ed=0;fd=60};return{Open:hd,Update:id,Rotate:jd,Close:ld}}(Yc);Yc["Open"]=function(Ud,Vd){$c.Open(Ud,Vd)};Yc["Update"]=function(){$c.Update()};Yc["Rotate"]=function(Wd,Xd,Yd,Zd){$c.Rotate(Wd,Xd,Yd,Zd)};Yc["Close"]=function(){$c.Close()};Object.defineProperty(Yc,"panor",{get:function(){return Zc}});Yc["Position"]=function($d){if(!$d.m_mGisPos){$d.m_mGisPos=o.Miaokit.LngLatToGis($d.m_mLngLat,$d.m_nOffset,$d.m_nHeight)}$d.m_mPosition=o.Miaokit.GisToWorld($d.m_mGisPos);return $d.m_mPosition};Yc["ScreenPoint"]=function(_d){if(!_d.m_mGisPos){_d.m_mGisPos=o.Miaokit.LngLatToGis(_d.m_mLngLat,_d.m_nOffset,_d.m_nHeight)}var ae=o.Miaokit.GisToWorld(_d.m_mGisPos);var be=o.Miaokit.WorldToScreenPoint(ae);return be}};r["Dioramas3MX"]=function(ce){ce["_Load3MX"]=function(de,ee,fe){var ge=this;var he=ge.m_pFileLut[de];var ie=he.m_pPath+he.m_aFile[ee];o["Request"]("GET","arraybuffer",ie,null,null,function(je){if(!je){return}var ke=new Uint32Array(je,0,2);if(1113083187===ke[0]){var le=ke[1]>>8;var me=9+le;var ne=je.byteLength-me;var oe=new Uint8Array(je,9,le);var pe=ge.m_pTextDecoder.decode(oe);var qe=JSON.parse(pe);var re={m_pPath:ie.substring(0,ie.lastIndexOf("/")+1),m_aFile:[]};var se=[];var te=[];var ue=qe.resources;var ve=0;for(var we=0;we<ue.length;we++){se.push(we);if("textureBuffer"===ue[we].type){se.push(0);te.push(we);if("jpg"===ue[we].format){se.push(0)}else if("png"===ue[we].format){se.push(1)}else{se.push(1e4)}}else if("geometryBuffer"===ue[we].type){se.push(1);if("ctm"===ue[we].format){se.push(0)}else{se.push(1e4)}}else{se.push(1e4);se.push(1e4)}se.push(ue[we].size);se.push(ve);ve+=ue[we].size;se.push(1e4);if(ue[we].texture){for(var xe=0;xe<ue.length;xe++){if(ue[we].texture===ue[xe].id){se[se.length-1]=xe;break}}}}var ye=[];var ze=qe.nodes;for(var we=0;we<ze.length;we++){var Ae=ze[we];var Be=Ae.bbMax[0]-Ae.bbMin[0];var Ce=Ae.bbMax[1]-Ae.bbMin[1];var De=Ae.bbMax[2]-Ae.bbMin[2];var Ee=Math.sqrt(Be*Be+Ce*Ce+De*De);ye.push(Math.floor(parseInt(Ae.bbMin[0]+Ae.bbMax[0])*.5*100));ye.push(Math.floor(parseInt(Ae.bbMin[1]+Ae.bbMax[1])*.5*100));ye.push(Math.floor(parseInt(Ae.bbMin[2]+Ae.bbMax[2])*.5*100));ye.push(Math.floor(Ee*100));ye.push(Math.floor(Ae.maxScreenDiameter));var Fe=Ae.children?Ae.children.length:0;if(0<Fe){ye.push(re.m_aFile.length);for(var xe=0;xe<Fe;xe++){re.m_aFile.push(Ae.children[xe])}ye.push(re.m_aFile.length)}else{ye.push(-1);ye.push(-1)}var Ge=Ae.resources?Ae.resources.length:0;if(0<Ge){ye.push(te.length);for(var xe=0;xe<Ge;xe++){for(var He=0;He<ue.length;He++){if(Ae.resources[xe]===ue[He].id){te.push(He);break}}}ye.push(te.length)}else{ye.push(-1);ye.push(-1)}}var Ie=4+9*ze.length+6*te.length;var Je=4*Ie;var Ke=Je+ne;var Le=ge["_CreateBuffer"](Ke);if(Le){var Me=o["WASM"]["HEAP32"](Le,Je);Me[0]=Je;Me[1]=ze.length;Me[2]=te.length;Me[3]=ge.m_pFileLut.length;Me.set(ye,4);var Ne=4+ye.length;for(var we=0;we<te.length;we++){var Oe=6*te[we];for(var xe=0;xe<6;xe++){Me[Ne++]=se[Oe++]}}var Pe=o["WASM"]["HEAPU8"](Le+Je,ne);Pe.set(new Uint8Array(je,me,ne));ge["_Dispose"](fe)}ge.m_pFileLut.push(re)}})};ce["Update"]=function(){return this["_Update"]()};Object.defineProperty(ce,"object3D",{get:function(){return p(this["_GetObject"]())}});o["Dioramas3MX"]=function(Qe,Re){var Se=p(ce._Dioramas3MX());Se.m_pFileLut=[];Se.m_pTextDecoder=new TextDecoder("utf-8");if(Re){if(Re.m_pGis){Re.m_pGis.AddGameObject(Se.object3D,Re.m_mLngLat.x,Re.m_mLngLat.y,Re.m_nHeight);Se.object3D.transform.Translate(Re.m_mOffset,1);Se.object3D.transform.Rotate({x:0,y:0,z:0},1)}}o["Request"]("GET","json",Qe,null,null,function(Te){Se["m_pMeta"]=Te;var Ue={m_pPath:Qe.substring(0,Qe.lastIndexOf("/")+1),m_aFile:[]};var Ve=[0];for(var We=0;We<Te.layers.length;We++){if("meshPyramid"===Te.layers[We].type){Ve.push(We);Ve.push(Ue.m_aFile.length);Ue.m_aFile.push(Te.layers[We].root)}}Ve[0]=Ue.m_aFile.length;var Xe=Se["_CreateBuffer"](4*Ve.length);var Ye=o["WASM"]["HEAP32"](Xe,4*Ve.length);Ye.set(Ve);Se["_Initialize"](Xe);Se.m_pFileLut.push(Ue)});return Se}};function t(Ze,$e,_e){p=$e;q=_e;for(var af=0,bf=Ze;af<bf.length;af++){var cf=bf[af];if(cf){var df=cf.prototype;if(r[df._type_name]){r[df._type_name](df)}if("Miaokit"===df._type_name){o["Miaokit"]=new cf(0,0)}else if("Gis"===df._type_name){r["Gis"]["g_pIns"]=new cf(0,0)}else if("Panoramas"===df._type_name){r["Panoramas"]["g_pIns"]=new cf(0,0)}}}}o["WASM"]=o["WASM"]||{};o["WASM"]["LoadClass"]=t;return[]});MiaokitMerge(function(ef){ef["m_pLogo"]=null;var ff=undefined;var gf=false;var hf=false;function jf(){ef["Track"]("Preload");ef["Request"]("GET","json",ef["m_pConfigPath"],null,null,function(mf){if(!mf){ef["Track"]("配置文件错误！",3);return}ef["m_pConfig"]=mf;ef["Fetch"](mf.MODULE,function(pf){if(ff){ff(pf)}else{ff=pf}});if(mf.SVE){var nf=function(qf){var rf=mf.SVE[qf];rf.m_pData=null;rf.m_pTile=null;if(true===rf.m_bPreload){ef["Fetch"](rf.m_pProject,function(sf){rf.m_pData=sf;if(hf&&sf){rf.m_pTile=ef["Miaokit"]["LoadTile"](rf.m_pData);rf.m_pData=null;ef["App"]["ActiveTile"](rf)}})}};for(var of=0;of<mf.SVE.length;of++){nf(of)}}if(ef["App"]&&ef["App"].m_pProject){ef["App"]["Preload"]()}else{gf=true}})}function kf(tf,uf){ef["Track"]("LoadEngine");if(gf){ef["App"]["Preload"]();gf=false}ef["WASM"]["LoadEngine"]({OnEngineLoad:function(vf){ef["Track"]("LoadEngine End");if(ff){ef["Track"]("LoadMiaokit");ef["WASM"]["LoadMiaokit"](ff,vf,function(){tf();hf=true;lf()})}else{ef["Track"]("LoadMiaokit Delay");ff=function(wf){ef["Track"]("LoadMiaokit");ef["WASM"]["LoadMiaokit"](wf,vf,function(){tf();hf=true;lf()})}}},OnRenderingEvent:function(xf){if(hf){uf(xf)}}})}function lf(){ef["Track"]("LoadMiaokit End");var yf=ef["m_pConfig"]["SVE"];if(yf){for(var zf=0,Af=yf;zf<Af.length;zf++){var Bf=Af[zf];if(true===Bf.m_bPreload){if(null===Bf.m_pTile&&null!==Bf.m_pData){Bf.m_pTile=ef["Miaokit"]["LoadTile"](Bf.m_pData);Bf.m_pData=null;ef["App"]["ActiveTile"](Bf)}}}}}jf["_name"]="Preload";kf["_name"]="Load";return[jf,kf]});MiaokitMerge(function(Cf){var Df=function(){function Ff(){}Ff.Clamp=function(Gf,Hf,If){if(Gf>If){return If}if(Gf<Hf){return Hf}return Gf};return Ff}();var Ef=function(){function Jf(Kf,Lf,Mf){this.x=0;this.y=0;this.z=0;this.x=Kf;this.y=Lf;this.z=Mf}Jf.Scale=function(Nf,Of){return{x:Of.x*Nf,y:Of.y*Nf,z:Of.z*Nf}};return Jf}();Df["_name"]="Mathf";Ef["_name"]="Vector3";return[Df,Ef]});MiaokitMerge(function(Pf){var Qf=null;var Rf=null;var Sf=null;var Tf=[null];var Uf=null;var Vf=[null];var Wf=1;var Xf=0;var Yf=[undefined];var Zf=null;var $f=null;function _f(jg){jg["isnanf"]=isNaN;jg["isinff"]=isFinite;jg["powf"]=Math.pow;jg["sqrtf"]=Math.sqrt;jg["expf"]=Math.exp;jg["logf"]=Math.log;jg["floorf"]=Math.floor;jg["ceilf"]=Math.ceil;jg["sinf"]=Math.sin;jg["cosf"]=Math.cos;jg["tanf"]=Math.tan;jg["asinf"]=Math.asin;jg["acosf"]=Math.acos;jg["atanf"]=Math.atan;jg["atan2f"]=Math.atan2;jg["ldexpf"]=function(kg,lg){return kg*Math.pow(2,lg)}}function ag(mg){function ng(xg){var yg=Pf["WASM"].GetString(xg);if(!yg.startsWith("http")){yg="./data/projects/sve/"+yg}if(yg.endsWith("assetbundle")){yg+=".bin"}return yg}function og(zg,Ag,Bg,Cg,Dg){var Eg=ng(zg);var Fg=Qf.get(Bg);var Gg=Qf.get(Cg);Pf["Fetch"](Eg,function(Hg){if(Hg){var Ig=Fg(Ag,Hg.byteLength,Dg);if(Ig){Pf["WASM"]["HEAPU8"](Ig,Hg.byteLength).set(new Uint8Array(Hg))}}else{console.error("资源丢失:",Eg)}Gg(Ag,Dg)})}function pg(Jg,Kg,Lg,Mg,Ng){var Og=ng(Jg);var Pg=Qf.get(Lg);var Qg=Uf.CreateImage();var Rg=Uf.Get(Qg);Rg.crossOrigin="anonymous";Rg.src=Og;Rg.onload=function(Sg){Pg(Kg,Qg,Ng)}}function qg(Tg,Ug,Vg,Wg,Xg){og(Tg,Ug,Vg,Wg,Xg)}function rg(Yg,Zg,$g,_g,ah){Zf["LoadTerrain"](Yg,Zg,$g,_g,ah)}function sg(bh,ch,dh,eh,fh){var gh=Pf["WASM"]["HEAP32"](bh,16);Zf["LoadBlockbox"](ch,gh[0],gh[1],gh[2],gh[3],dh,eh)}function tg(hh,ih){var jh=Pf["WASM"]["HEAP32"](hh,12);Zf["Load3MX"](jh[0],jh[1],jh[2],ih)}function ug(kh,lh,mh,nh,oh){og(kh,lh,mh,nh,oh)}function vg(ph,qh,rh,sh){var th=Qf.get(sh);var uh=Pf["WASM"]["HEAP8"](rh,qh);var vh=new Blob([uh]);var wh=window.URL.createObjectURL(vh);var xh=Uf.CreateImage();var yh=Uf.Get(xh);yh.src=wh;yh.onload=function(zh){th(ph,xh);window.URL.revokeObjectURL(wh)}}var wg=[undefined,og,pg,qg,rg,sg,tg,ug,vg];mg["APP_LOAD"]=function(Ah,Bh,Ch,Dh,Eh,Fh){wg[Ah](Bh,Ch,Dh,Eh,Fh)}}function bg(Gh){var Hh={NaN:NaN,Infinity:Infinity};_f(Gh);ag(Gh);Gh["APP_DYNAMIC_LINK"]=function(Ih,Jh){var Kh=Pf["WASM"]["HEAPU32"](Ih,Jh);var Lh=Kh[0];var Mh=Kh[1];for(var Nh=0;Nh<Lh;Nh++){var Oh=Kh[2+Nh]-1;var Ph=Kh[Mh++];var Qh=Kh[Mh++];var Rh=Pf["WASM"].GetString(Ph,Qh);var Sh=JSON.parse(Rh);var Th=function(Xh,Yh){this["m_nID"]=Xh;this["m_nObject"]=Yh};var Uh=Th.prototype;Uh["_type_name"]=Sh[0];Uh["_type_id"]=Nh+1;Uh["_ins_count"]=0;Yf[Nh+1]=Th;var Vh=function(Zh){var $h=Qf.get(Kh[Mh++]);Mh++;var _h=function(){var ai=Array.prototype.slice.call(arguments);ai.unshift(this.m_nObject);return $h.apply(this,ai)};if(0===Zh){Uh["_"+Sh[Zh]]=_h}else{Uh[Sh[Zh]]=_h}};for(var Wh=0;Wh<Oh;Wh++){Vh(Wh)}}Pf["WASM"]["LoadClass"](Yf,dg,gg);Pf["Miaokit"]["ResizeCavans"]=function(bi,ci){if(Sf.SE_RESIZE){Sf.SE_RESIZE(bi,ci)}}};Gh["APP_PRINT"]=function(di,ei,fi){var gi=Pf["WASM"].GetString(di,ei);Pf["Track"](gi,fi)};Gh["APP_DO_ACTION"]=function(hi,ii,ji,ki){Tf[hi](ii,ji,ki)};Gh["APP_CREATE_OBJ"]=function(li,mi){var ni=eg();var oi=new Yf[li](ni,mi);Vf[ni]=oi;Yf[li].prototype._ins_count++;return ni};Gh["APP_FREE_OBJ"]=function(pi){var qi=Vf[pi];Yf[qi._type_id].prototype._ins_count--;fg(pi)};$f=Pf["ShaderLab"].APP_DO_OPERATORS;$f[7]=function(ri,si){if(0===ri){Uf.FreeImage(si)}else if(1===ri){Uf.FreeBuffer(si)}return 0};Gh["APP_DO"]=function(ti,ui,vi,wi,xi){return $f[ti](ui,vi,wi,xi)};Rf=Gh["memory"];Pf["WASM"]["m_pMemory"]=Pf["WASM"]["m_pMemory"]||Rf;return{env:Gh,global:Hh}}function cg(yi,zi,Ai){Uf=Pf["GL"]["ImageCache"];zi=bg(zi);WebAssembly.instantiate(yi,zi).then(function(Bi){return Bi.instance}).then(function(Ci){Sf=Ci.exports;Qf=Sf.__indirect_function_table;Pf["WASM"]["Update"]=Ci.exports.SE_UPDATE;Pf["WASM"]["Malloc"]=Ci.exports.Malloc;Pf["WASM"]["Free"]=Ci.exports.Free;Pf["ShaderLab"]["DrawPass_"]=Ci.exports.SE_DRAW_PASS;Pf["ShaderLab"]["SetSunlight"]=Ci.exports.SE_SUNLIGHT;Pf["ShaderLab"]["CreateUniformsDesc"]=Ci.exports.SE_CREATE_UNIFORMS_DESC;Pf["ShaderLab"]["GetTexture"]=function(Di){return Sf.SE_RESOURCE(9,Di)};Pf["ShaderLab"]["GetObject"]=function(Ei){var Fi=Sf.SE_RESOURCE(13,Ei);if(Fi){return dg(Fi)}return null};Pf["Track"]("Start thread");Pf["WASM"]["Worker"]=ig(function(){Pf["Track"]("Start thread succeed")});Sf.Start();Ai()})}function dg(Gi){return Vf[Gi]}function eg(){var Hi=Wf;if(Vf.length>Wf){Wf=Vf[Wf]}else{Wf++}Xf++;return Hi}function fg(Ii){Vf[Ii]=Wf;Wf=Ii;Xf--}function gg(Ji){var Ki="'系统运行':{";Ki+="'时间':"+(Pf.Time()/1e3).toFixed(0);Ki+=", '帧率':"+Ji;Ki+=", 'WASM内存':"+Pf.WASM.m_pMemory.buffer.byteLength/1024/1024;Ki+="}";var Li="'JS对象':{";Li+="'工厂':["+Vf.length+", "+Xf+", "+(Vf.length-Xf)+"]";Li+=Uf.Analyze();for(var Mi=1;Mi<Yf.length;Mi++){Li+=", '"+Yf[Mi].prototype._type_name+"':"+Yf[Mi].prototype._ins_count}Li+="}";return[Ki,Li]}function hg(Ni){var Oi=Tf.length;Tf.push(Ni);return Oi}function ig(Pi){var Qi=Sf.UTIL_WORKER_CODE();var Ri=Pf["WASM"]["HEAPU32"](Qi,16);if(false){Zf=new Worker(window.URL.createObjectURL(new Blob([Pf["WASM"]["HEAPU8"](Ri[2],Ri[3])])));var Si=Pf["WASM"]["HEAPU8"]().slice(Ri[0],Ri[0]+Ri[1]);var Ti=Si.buffer;Zf.postMessage({m_nID:1,m_aCode:Ti},[Ti])}else{var Ui=Pf["m_pConfig"]["MODULE"].replace(".wasm","");Zf=new Worker(Ui+"Worker.min.js");fetch(Ui+"Worker.wasm").then(function(Vi){return Vi.arrayBuffer()}).then(function(Wi){if(Wi){Zf.postMessage({m_nID:1,m_aCode:Wi},[Wi])}else{console.error("fetch error: ./js/Miaokit/MiaokitWorker.wasm",Wi)}}).catch(function(Xi){console.error("fetch error: ./js/Miaokit/MiaokitWorker.wasm",Xi)})}Zf.onmessage=function(Yi){var Zi=Yi.data;switch(Zi.m_nID){case 1:Pi();Pi=null;break;case 2:Zf["OnLoadTerrain"](Zi);break;case 3:Zf["OnLoadBlockbox"](Zi);break;case 4:Zf["OnLoad3MX"](Zi);break;default:console.error("子线程消息异常:",Zi);break}};Zf["LoadTerrain"]=function($i,_i,aj,bj,cj){Zf.postMessage({m_nID:2,m_pPath:Pf["WASM"].GetString($i),m_nRequest:_i,m_nCallback:aj,m_nTS:cj})};Zf["OnLoadTerrain"]=function(dj){var ej=Qf.get(dj.m_nCallback);var fj=dj.m_pData;var gj=0;if(fj){gj=Uf.PushBuffer(fj)}else{console.warn("Terrain miss:",dj.m_pPath)}ej(dj.m_nRequest,gj,dj.m_nTS)};Zf["LoadBlockbox"]=function hj(ij,jj,kj,lj,mj,nj,oj){Zf.postMessage({m_nID:3,m_nRequest:ij,m_nCol:jj,m_nRow:kj,m_nColOffset:lj,m_nRowOffset:mj,m_nAlloc:nj,m_nCallback:oj})};Zf["OnLoadBlockbox"]=function(pj){var qj=Qf.get(pj.m_nAlloc);var rj=Qf.get(pj.m_nCallback);var sj=pj.m_pData;var tj=[0,0,0,0];for(var uj=0;uj<4;uj++){var vj=sj[uj];if(0<vj.m_nVertexCount&&0<vj.m_nSubmeshCount){var wj=new Pf.Mesh;var xj=new Int32Array(vj.m_aIndex);wj.position=new Float32Array(vj.m_aPosition);wj.normal=new Float32Array(vj.m_aNormal);wj.uv=new Float32Array(vj.m_aUV);for(var yj=0;yj<vj.m_nSubmeshCount;yj++){var zj=xj[2*yj];var Aj=xj[2*yj+1];var Bj=[];for(var Cj=zj;Cj<Aj;Cj++){Bj.push(Cj)}wj.SetIndices(yj,new Int32Array(Bj),4)}wj.Apply();tj[uj]=wj.m_nObject}else{tj[uj]=0}}var Dj=qj(pj.m_nRequest,16);if(Dj){Pf["WASM"]["HEAPU32"](Dj,16).set(new Uint32Array(tj));rj(pj.m_nRequest)}};Zf["Load3MX"]=function(Ej,Fj,Gj,Hj){var Ij=dg(Ej);if(Ij){var Jj=Ij.m_pFileLut[Fj];var Kj=Jj.m_pPath+Jj.m_aFile[Gj];var Lj=Ij.m_pFileLut.length;Ij.m_pFileLut.push(null);Zf.postMessage({m_nID:4,m_nDior:Ej,m_pPath:Kj,m_nRequest:Hj,m_nNewFolder:Lj})}};Zf["OnLoad3MX"]=function(Mj){var Nj=Mj.m_pData;if(Nj){var Oj=dg(Mj.m_nDior);if(Oj){Oj.m_pFileLut[Mj.m_nNewFolder]=Mj.m_pNewFolder;var Pj=new Int32Array(Nj[0]);var Qj=Pj[1];var Rj=Pj[2];var Sj=4+9*Qj;var Tj=0;var Uj=[];var Vj=function(){if(Rj===++Tj||0==Rj){var Yj=Nj[0].byteLength;var Zj=Oj["_CreateBuffer"](Yj);var $j=Pf["WASM"]["HEAP32"](Zj,Yj);$j.set(Pj);Oj["_Dispose"](Mj.m_nRequest)}};var Wj=function(_j){var ak=Pj[Sj+0];var bk=Pj[Sj+1];if(0===bk){var ck=Nj[1+_j];if(null!==ck){var dk=Uf.CreateImage();var ek=Uf.Get(dk);var fk=new Blob([new Int8Array(ck)]);var gk=window.URL.createObjectURL(fk);ek.src=gk;ek.onload=function(kk){Vj();window.URL.revokeObjectURL(gk)};Uj[ak]=Sf["SE_CREATE_INTERNAL_TEXTURE"]();Pj[Sj+3]=Uj[ak];Pj[Sj+4]=dk}else{Uj[ak]=0;Pj[Sj+3]=Uj[ak];Pj[Sj+4]=0;Vj()}}else if(1===bk){Pj[Sj+4]=Uj[Pj[Sj+5]];var ck=Nj[1+_j];if(null!==ck){var hk=ck.byteLength;var ik=Oj["_CreateBuffer"](hk);var jk=Pf["WASM"]["HEAP8"](ik,hk);jk.set(new Int8Array(ck));Oj["_MarkBuilding"](ik);Uj[ak]=Sf["SE_CREATE_INTERNAL_MESH"](0,ik);Pj[Sj+3]=Uj[ak];Vj()}else{Uj[ak]=0;Pj[Sj+3]=Uj[ak];Vj()}}else{Uj[ak]=0;Pj[Sj+3]=Uj[ak];Pj[Sj+4]=0;Vj()}Sj+=6};for(var Xj=0;Xj<Rj;Xj++){Wj(Xj)}if(0===Rj){Vj()}}}else{console.warn("3mx miss:",Mj.m_pPath)}};return Zf}Pf["WASM"]=Pf["WASM"]||{};Pf["WASM"]["LoadMiaokit"]=cg;Pf["WASM"]["GetObject"]=dg;Pf["WASM"]["RegisterDelegate"]=hg;return[]});MiaokitMerge(function(lk){var mk=null;var nk=null;var ok=null;var pk=null;var qk=null;var rk=null;var sk=null;var tk=null;var uk=null;var vk=null;var wk=null;var xk=null;var yk=null;var zk=null;var Ak=null;var Bk=null;var Ck=0;var Dk=function(){var Fk=lk.m_pConfig.WEBGL;var Gk=lk.m_pConfig.QUALITY;if(0===Gk){ok="\n                #define LOW_QUALITY\n            ";pk="\n                #define LOW_QUALITY\n            "}else if(1===Gk){ok="\n                #define MEDIUM_QUALITY\n            ";pk="\n                #define MEDIUM_QUALITY\n            "}else{ok="\n                #define HIGH_QUALITY\n            ";pk="\n                #define HIGH_QUALITY\n            "}if(1===Fk){mk="\n                precision highp float;\n                precision mediump sampler2D;\n\n                uniform lowp vec4 u_Sunlight;\n                uniform lowp vec4 u_Picker;\n                uniform lowp vec4 u_EyePos;\n                uniform lowp vec4 u_Mark;\n                uniform highp mat4 u_MatG;\n                uniform highp mat4 u_MatVP;\n            ";nk="\n                precision highp float;\n                precision mediump sampler2D;\n\n                uniform lowp vec4 u_Sunlight;\n                uniform lowp vec4 u_Picker;\n                uniform lowp vec4 u_EyePos;\n                uniform lowp vec4 u_Mark;\n                uniform highp mat4 u_MatG;\n                uniform highp mat4 u_MatVP;\n            "}else{mk="#version 300 es\n                #define attribute in\n                #define varying out\n                #define texture2D texture\n\n                precision highp float;\n                precision mediump sampler2D;\n\n                uniform CommonBlock\n                {\n                    lowp vec4 u_Sunlight;\n                    lowp vec4 u_Picker;\n                    lowp vec4 u_EyePos;\n                    lowp vec4 u_Mark;\n                    highp mat4 u_MatG;\n                    highp mat4 u_MatVP;\n                };\n            ";nk="#version 300 es\n                #define varying in\n                #define texture2D texture\n                #define gl_FragColor FragColor\n\n                precision highp float;\n                precision mediump sampler2D;\n\n                uniform CommonBlock\n                {\n                    lowp vec4 u_Sunlight;\n                    lowp vec4 u_Picker;\n                    lowp vec4 u_EyePos;\n                    lowp vec4 u_Mark;\n                    highp mat4 u_MatG;\n                    highp mat4 u_MatVP;\n                };\n\n                out vec4 FragColor;\n            "}Ck=Gk;return{DeclareVS:mk+ok+qk,DeclareFS:nk+pk+rk,ClearVS:sk,ClearFS:tk,RenderVS:uk,RenderFS:vk,PostprocessVS:wk,PostprocessFS:xk,ATOM_VS:zk,ATOM_FS:Ak,BRDF_VS:"",BRDF_FS:yk}};var Ek={_name:"Shader",GetSourceCode:function(Hk){if(!Bk){Bk=Dk()}var Ik=Ek[Hk];var Jk="";var Kk="";if(Ik.include){var Lk=Ik.include[Ck];if(Lk){for(var Mk=0,Nk=Lk;Mk<Nk.length;Mk++){var Ok=Nk[Mk];Jk+=Bk[Ok+"_VS"];Kk+=Bk[Ok+"_FS"]}}}return[Bk["DeclareVS"]+Jk+Ik.vs_src+Bk[Ik.type+"VS"],Bk["DeclareFS"]+Kk+Ik.fs_src+Bk[Ik.type+"FS"]]}};qk="\nattribute mediump vec3 a_Position;\nattribute mediump vec3 a_Normal;\nattribute mediump vec2 a_UV;\nattribute mediump vec4 a_Color;\nattribute mediump vec4 a_Tangent;\nattribute mediump vec4 a_Object;\nattribute highp mat4 a_MatW;\n\nvarying vec4 v_Object;\n\n/// ����ռ�����ת����ռ�����\nvec3 ObjectToWorldPos(vec3 i_Position)\n{\n    return (a_MatW * vec4(i_Position, 1.0)).xyz;\n}\n\n/// ����ռ�����ת�ü��ռ�����\nvec4 ObjectToClipPos(vec3 i_Position)\n{\n    // GIS�ı任����ֵ������ת��Ϣ��δ����λ����Ϣ�����⾫�Ȳ�����ɻ��涶��\n    // return u_MatVP * u_MatG * a_MatW * vec4(i_Position, 1.0);\n    \n    vec4 mPosition = vec4(i_Position, 1.0);\n    mPosition = u_MatG * a_MatW * mPosition;\n    mPosition.y = mPosition.y - 6378137.0;\n\n    return u_MatVP * mPosition;\n}\n\n/// ����ռ䷨��ת����ռ䷨��\nvec3 ObjectToWorldNormal(vec3 i_Normal)\n{\n    return normalize((u_MatG * a_MatW * vec4(i_Normal, 0.0)).xyz);\n}";rk="\nuniform sampler2D u_MainTex;\nvarying vec4 v_Object;\n\n/// ����2D����\nvec4 Tex2D(sampler2D i_Tex, vec2 i_UV)\n{\n    i_UV.x = fract(i_UV.x);\n    i_UV.y = fract(1.0 - i_UV.y);\n\n    return texture2D(i_Tex, i_UV);\n}";sk="\nvoid main()\n{\n    gl_Position = vs();\n}";tk="\nvoid main()\n{\n    gl_FragColor = fs();\n}";uk="\nvoid main()\n{\n    v_Object = a_Object;\n    \n    gl_Position = vs();\n}";vk="\nvoid main()\n{\n    gl_FragColor = fs();\n    \n    float nAlpha = u_Mark.x;\n    \n    // ��͸�������https://zhuanlan.zhihu.com/p/49164063\n    if(0.01 < nAlpha)\n    {\n        // ���Σ�0-��͸����1-ȫ͸����Ĭ��ֵ0��׷��0.3��͸����\n        nAlpha = 0.3 + 0.7 * v_Object.b;\n        \n        // Gͨ������ɫ�Ҷ��ۼӡ�����֧�ֲ�ɫ͸����\n        gl_FragColor.g = dot(gl_FragColor.rgb, vec3(0.299, 0.587, 0.114));\n        // Rͨ������ϴ����ۼӣ���ֵ1.0����ֵ0.99��Ǹ�������\n        gl_FragColor.r = 1.0 - (0.01 * v_Object.a);        \n        // Bͨ����OPACITY�ۼ�\n        gl_FragColor.b = 1.0 - nAlpha;\n        gl_FragColor.g *= gl_FragColor.b;\n        // Aͨ����ALPHA�۳ˡ���ϣ�Դ����Ϊ0��Ŀ�����Դ\n        gl_FragColor.a = 1.0 - gl_FragColor.b;\n    }\n    // ��͸�����\n    else\n    {\n        // ����������\n        gl_FragColor.a = 1.0 - (0.01 * v_Object.a);\n    }\n}";wk="\nvoid main()\n{\n    gl_Position = vs();\n}";xk="\nvoid main()\n{\n    gl_FragColor = fs();\n}";yk='\nconst float PI = 3.14159265358979323846;\n\nconst vec3 baseColor = vec3(0.5, 0.5, 0.5);\nconst float metallic = 0.0;\nconst float subsurface = 0.5; // 0.0\nconst float specular = 0.2;\nconst float roughness = 0.7; //0.5;\nconst float specularTint = 0.0;\nconst float anisotropic = 0.0;\nconst float sheen = 0.0;\nconst float sheenTint = 0.5;\nconst float clearcoat = 0.0;\nconst float clearcoatGloss = 1.0;\n\nfloat sqr(float x) { return x * x; }\n\nfloat SchlickFresnel(float u)\n{\n\tfloat m = clamp(1.0 - u, 0.0, 1.0);\n\tfloat m2 = m * m;\n\treturn m2 * m2 * m; // pow(m,5)\n}\n\nfloat GTR1(float NdotH, float a)\n{\n\tif (a >= 1.0) return 1.0 / PI;\n\tfloat a2 = a * a;\n\tfloat t = 1.0 + (a2 - 1.0) * NdotH * NdotH;\n\treturn (a2 - 1.0) / (PI * log(a2) * t);\n}\n\nfloat GTR2(float NdotH, float a)\n{\n\tfloat a2 = a * a;\n\tfloat t = 1.0 + (a2 - 1.0) * NdotH * NdotH;\n\treturn a2 / (PI * t * t);\n}\n\nfloat GTR2_aniso(float NdotH, float HdotX, float HdotY, float ax, float ay)\n{\n\treturn 1.0 / (PI * ax * ay * sqr(sqr(HdotX / ax) + sqr(HdotY / ay) + NdotH * NdotH));\n}\n\nfloat smithG_GGX(float NdotV, float alphaG)\n{\n\tfloat a = alphaG * alphaG;\n\tfloat b = NdotV * NdotV;\n\treturn 1.0 / (NdotV + sqrt(a + b - a * b));\n}\n\nfloat smithG_GGX_aniso(float NdotV, float VdotX, float VdotY, float ax, float ay)\n{\n\treturn 1.0 / (NdotV + sqrt(sqr(VdotX * ax) + sqr(VdotY * ay) + sqr(NdotV)));\n}\n\nvec3 mon2lin(vec3 x)\n{\n\treturn vec3(pow(x[0], 2.2), pow(x[1], 2.2), pow(x[2], 2.2));\n}\n\nvec3 BRDF(vec3 L, vec3 V, vec3 N, vec3 X, vec3 Y)\n{\n    //x��y����ֱ��ʾ�˱�����������͸�������������\n    //https://www.cnblogs.com/starfallen/p/3572352.html\n\n\tfloat NdotL = dot(N, L);\n\tfloat NdotV = dot(N, V);\n\tif (NdotL < 0.0 || NdotV < 0.0) return vec3(0.0);\n\n\tvec3 H = normalize(L + V);\n\tfloat NdotH = dot(N, H);\n\tfloat LdotH = dot(L, H);\n\n\tvec3 Cdlin = mon2lin(baseColor);\n\tfloat Cdlum = 0.3 * Cdlin[0] + 0.6 * Cdlin[1] + 0.1 * Cdlin[2]; // luminance approx.\n\n\tvec3 Ctint = Cdlum > 0.0 ? Cdlin / Cdlum : vec3(1.0); // normalize lum. to isolate hue+sat\n\tvec3 Cspec0 = mix(specular * 0.08 * mix(vec3(1.0), Ctint, specularTint), Cdlin, metallic);\n\tvec3 Csheen = mix(vec3(1.0), Ctint, sheenTint);\n\n\t// Diffuse fresnel - go from 1 at normal incidence to .5 at grazing\n\t// and mix in diffuse retro-reflection based on roughness\n\tfloat FL = SchlickFresnel(NdotL), FV = SchlickFresnel(NdotV);\n\tfloat Fd90 = 0.5 + 2.0 * LdotH * LdotH * roughness;\n\tfloat Fd = mix(1.0, Fd90, FL) * mix(1.0, Fd90, FV);\n\n\t// Based on Hanrahan-Krueger brdf approximation of isotropic bssrdf\n\t// 1.25 scale is used to (roughly) preserve albedo\n\t// Fss90 used to "flatten" retroreflection based on roughness\n\tfloat Fss90 = LdotH * LdotH * roughness;\n\tfloat Fss = mix(1.0, Fss90, FL) * mix(1.0, Fss90, FV);\n\tfloat ss = 1.25 * (Fss * (1.0 / (NdotL + NdotV) - 0.5) + 0.5);\n\n\t// specular\n\tfloat aspect = sqrt(1.0 - anisotropic * 0.9);\n\tfloat ax = max(0.001, sqr(roughness) / aspect);\n\tfloat ay = max(0.001, sqr(roughness) * aspect);\n\tfloat Ds = GTR2_aniso(NdotH, dot(H, X), dot(H, Y), ax, ay);\n\tfloat FH = SchlickFresnel(LdotH);\n\tvec3 Fs = mix(Cspec0, vec3(1.0), FH);\n\tfloat Gs;\n\tGs = smithG_GGX_aniso(NdotL, dot(L, X), dot(L, Y), ax, ay);\n\tGs *= smithG_GGX_aniso(NdotV, dot(V, X), dot(V, Y), ax, ay);\n\n\t// sheen\n\tvec3 Fsheen = FH * sheen * Csheen;\n\n\t// clearcoat (ior = 1.5 -> F0 = 0.04)\n\tfloat Dr = GTR1(NdotH, mix(0.1, 0.001, clearcoatGloss));\n\tfloat Fr = mix(0.04, 1.0, FH);\n\tfloat Gr = smithG_GGX(NdotL, 0.25) * smithG_GGX(NdotV, 0.25);\n\n\treturn ((1.0 / PI) * mix(Fd, ss, subsurface) * Cdlin + Fsheen) * (1.0 - metallic) + Gs * Fs * Ds + 0.25 * clearcoat * Gr * Fr * Dr;\n}';zk="\nvarying vec4 v_ViewDir;\nvarying vec4 v_Scattering;\nvarying vec4 v_Attenuate;\n\n//P and ray define the line; O is the sphere's center point\nvec3 CalculateIntersection(vec3 P, vec3 ray, vec3 O, float r)\n{\n\tvec3 PO = O - P;\n\tfloat lPO = length(PO);\n\tfloat B = 2.0 * dot(PO, ray);\n\n\tfloat C = B * B - 4.0 * (lPO * lPO - r * r);\n\tfloat det = sqrt(max(0.0, C));\n\n\tfloat d = 0.5*(B-det);\n\tvec3 intersect = P + d * ray;\n\n\treturn intersect;\n}\n\nvoid Atmosphere(vec3 mLightDir, vec3 mWorldPos)\n{\n    // ����ɢ�䣬���Ӧ�����㣬�����Ӧ�����ڲ�֮�⣬��������Ϊ���뾶���ڲ�뾶�����뾶ӦԶ�����ڲ�뾶\n    //650 nm for red; 570 nm for green; 475 nm for blue\n    vec3 _Wave = vec3(5.602046, 9.473285, 20.49314);\n    vec3 _ESun = vec3(20.0, 20.0, 20.0);\n    vec3 _PlanetPos = vec3(0.0, -6378137.0, 0.0);\n    float _Sealevel = 6378137.0;\n    float _OuterRadius = 6478137.0;\n    float _SampleNum = 5.0;\n    //Rayleigh scattering constant\n    float _Kr = 0.0025;\n    //Mie scattering constant\n    float _Km = 0.001;\n    //the altitude at which the atmosphere's average density is found\n    float _H0 = 0.25;\n\n    vec3 mRay = mWorldPos - u_EyePos.xyz;\n    float nDepth = length(mRay); mRay = mRay / nDepth;\n\n    float nSampleLength = nDepth / _SampleNum;\n    vec3 mSampleRay = mRay * nSampleLength;\n    vec3 mSamplePoint = u_EyePos.xyz + mSampleRay * 0.5;\n    vec3 mInScattering = vec3(0.0, 0.0, 0.0);\n    vec3 mOutScatteringAB = vec3(0.0, 0.0, 0.0);\n    vec3 mOutGroundScatteringAB = vec3(0.0, 0.0, 0.0);\n    float nInvOuterH = 1.0 / (_OuterRadius-_Sealevel);\n\n    for(int i=0; i</*_SampleNum*/5; i++)\n    {\n\t    vec3 mCrossPoint = CalculateIntersection(mSamplePoint, -mLightDir, _PlanetPos, _OuterRadius);\n\t    //AP out scattering\n\t    vec3 mAPRay = (mSamplePoint - u_EyePos.xyz) / _SampleNum;\n\t    float nAPRayLength = length(mAPRay);\n\t    vec3 mSampleAP = u_EyePos.xyz + mAPRay * 0.5;\n\t    vec3 mOutScatteringAP = vec3(0.0, 0.0, 0.0);\n\n\t    for(int m=0; m</*_SampleNum*/5; m++)\n\t    {\n\t\t    mOutScatteringAP += exp(-(length(mSampleAP - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nAPRayLength * nInvOuterH;\n\t\t    mSampleAP += mAPRay;\n\t    }\n\t    mOutScatteringAP = 4.0 * 3.14 * (_Km + _Kr * _Wave) * mOutScatteringAP;\n\n\t    //PC out scattering\n\t    vec3 mPCRay = (mCrossPoint - mSamplePoint) / _SampleNum;\n\t    float nPCRayLength = length(mPCRay);\n\t    vec3 mSamplePC = mSamplePoint + mPCRay*0.5;\n\t    vec3 mOutScatteringPC = vec3(0.0, 0.0, 0.0);\n\n\t    for(int n=0; n</*_SampleNum*/5; n++)\n\t    {\n\t\t    mOutScatteringPC += exp(-(length(mSamplePC - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nPCRayLength * nInvOuterH;\n\t\t    mSamplePC += mPCRay;\n\t    }\n\t    mOutScatteringPC = 4.0 * 3.14 * (_Km + _Kr * _Wave) * mOutScatteringPC;\n\n\t    mInScattering += exp(-(length(mSamplePoint - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nSampleLength * nInvOuterH * exp(-mOutScatteringAP - mOutScatteringPC);\n\t    mSamplePoint+=mSampleRay;\n\t    mOutScatteringAB = mCrossPoint;\n        mOutGroundScatteringAB = mOutScatteringAP + mOutScatteringPC;\n    }\n\n    vec3 mAttenuateGround = exp(-mOutGroundScatteringAB);\n\n    v_ViewDir.xyz = u_EyePos.xyz - mWorldPos;\n    v_Scattering.xyz = mInScattering * _ESun * _Kr * _Wave;\n    v_Attenuate.xyz = mInScattering * _ESun * _Km;\n\n    v_ViewDir.w = mAttenuateGround.x;\n    v_Scattering.w = mAttenuateGround.y;\n    v_Attenuate.w = mAttenuateGround.z;\n\n    //Ground : v_ScatteringR = v_Scattering; v_ScatteringM = v_Attenuate; v_Attenuate = v_AttenuateGround;\n    //v_ViewDir = u_EyePos.xyz - mWorldPos;\n    //v_ScatteringR = mInScattering * _ESun * _Kr * _Wave;\n    //v_ScatteringM = mInScattering * _ESun * _Km;\n    //v_Attenuate = exp(-mOutGroundScatteringAB);\n}";Ak="\nvarying vec4 v_ViewDir;\nvarying vec4 v_Scattering;\nvarying vec4 v_Attenuate;\n\nfloat PhaseRayleigh(float nCostheta)\n{\n\treturn 0.75 * (1.0 + nCostheta * nCostheta);\n}\n\nfloat PhaseMie(float nCostheta, float g, float g2)\n{\n\treturn 1.5 * ((1.0 - g2) / (2.0 + g2)) * (1.0 + nCostheta * nCostheta) / pow(1.0 + g2 - 2.0 * g * nCostheta, 1.5);\n}\n\nvec4 AtmosphereColor(vec4 mColor, vec3 mLightDir)\n{\n    float _G = -0.990;\n    float _G2 = _G * _G;\n    \n    float nCostheta = dot(normalize(v_ViewDir.xyz), mLightDir);\n    float nPhaseMie = PhaseMie(nCostheta, _G, _G2);\n    float nPhaseRayleigh = PhaseRayleigh(nCostheta);\n\t\t\t\t\n    mColor.rgb = v_Scattering.xyz * nPhaseRayleigh + v_Attenuate.xyz * nPhaseMie;\n    mColor.a = mColor.b + 0.35;\n    mColor = clamp(mColor, 0.0, 0.9);\n\n    return mColor;\n}\n\nvec4 AtmosphereLight(vec4 mColor, vec3 mLightDir)\n{\n    // Ground : v_ScatteringR = v_Scattering.xyz; v_ScatteringM = v_Attenuate.xyz; v_Attenuate = v_AttenuateGround;\n    \n    float _G = -0.980;\n    float _G2 = _G * _G;\n    \n    float nCostheta = dot(normalize(v_ViewDir.xyz), mLightDir);\n    float nPhaseMie = PhaseMie(nCostheta, _G, _G2);\n    float nPhaseRayleigh = PhaseRayleigh(nCostheta);\n    \n    mColor.rgb = v_Scattering.xyz * nPhaseRayleigh + v_Attenuate.xyz * nPhaseMie + mColor.rgb * vec3(v_ViewDir.w, v_Scattering.w, v_Attenuate.w)/*v_AttenuateGround*/;\n    \n    return mColor;\n}";return[Ek]});MiaokitMerge(function(Pk){var Qk=undefined;var Rk=true;var Sk=[];var Tk={RGBA32_FLOAT:function(){return true?[Qk["RGBA32F"],Qk.RGBA,Qk.FLOAT]:[Qk.RGBA,Qk.RGBA,Qk.FLOAT]},RGBA16_FLOAT:function(){return true?[Qk["RGBA16F"],Qk.RGBA,Qk["HALF_FLOAT"]]:[Qk.RGBA,Qk.RGBA,36193]},RGBA8:function(){return true?[Qk.RGBA,Qk.RGBA,Qk.UNSIGNED_BYTE]:[Qk.RGBA,Qk.RGBA,Qk.UNSIGNED_BYTE]},D16_UNORM:function(){return true?[Qk["DEPTH_COMPONENT16"],Qk.DEPTH_COMPONENT,Qk.UNSIGNED_SHORT]:[Qk.DEPTH_COMPONENT,Qk.DEPTH_COMPONENT,Qk.UNSIGNED_SHORT]},D24_UNORM:function(){return true?[Qk["DEPTH_COMPONENT24"],Qk.DEPTH_COMPONENT,Qk.UNSIGNED_INT]:[Qk.DEPTH_COMPONENT,Qk.DEPTH_COMPONENT,Qk.UNSIGNED_INT]},D24S8_UNORM:function(){return true?[Qk.DEPTH_STENCIL,Qk.DEPTH_STENCIL,34042]:[Qk.DEPTH_STENCIL,Qk.DEPTH_STENCIL,34042]}};var Uk={Opaque:1,Transparent:2,Outline:4,CastShadow:8,ReceiveShadow:16};var Vk=null;var Wk=["u_Sunlight","u_Picker","u_EyePos","u_MatG","u_MatVP","u_Color","u_MainTex","",""];var Xk=[null];var Yk=[null];var Zk=[null];var $k=[null];var _k=[new Int32Array([0,0,0,0]),new Float32Array([0,0,0,0]),new Float32Array([1,0,0,0,1,0,0,0,1]),new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),new Int32Array([0,0,0,0]),new Int32Array([0,0,0,0]),new Int32Array([0,0,0,0]),new Int32Array([0,0,0,0])];var al=[function(Gl,Hl,Il){nl(Xk[Gl],$k[Hl])},function(Jl,Kl,Ll){ol(Xk[Jl],$k[Kl])},function(Ml,Nl,Ol){pl(Xk[Ml],$k[Nl])},function(Pl,Ql,Rl){ql(Xk[Pl],$k[Ql])},function(Sl,Tl,Ul){var Vl=$k[Tl];var Wl=Vl[1];if(Vl[0]){Wl=El.GetTexture(Wl);if(Wl){Vl[0]=0;Vl[1]=Wl}}var Xl=Sk[Wl]||kl;if(null===Xl){console.log("BindTexture null!");return}Qk.activeTexture(33984+Ul);Qk.bindTexture(3553,Xl)},function(Yl,Zl){console.error("Unsupported UniformCubemap!")},null,function($l,_l,am){var bm=$k[_l];var cm=bm[1];if(bm[0]){cm=El.GetTexture(cm);if(cm){bm[0]=0;bm[1]=cm}}var dm=Sk[cm]||kl;if(null===dm){console.log("BindTexture null!");return}Qk.activeTexture(33984+am);Qk.bindTexture(35866,dm)}];var bl=[null];var cl=[null];var dl=1280;var el=720;var fl=1;var gl=0;var hl=null;var il=new Float32Array(4);var jl=[0,0,0,0];var kl=null;var ll=null;var ml=0;function nl(em,fm){if(undefined===em.mark){Qk.uniform4iv(em,fm)}else if(fl!==em.mark){Qk.uniform4iv(em,fm);em.mark=fl}}function ol(gm,hm){if(undefined===gm.mark){Qk.uniform4fv(gm,hm)}else if(fl!==gm.mark){Qk.uniform4fv(gm,hm);gm.mark=fl}}function pl(im,jm){if(undefined===im.mark){Qk.uniformMatrix3fv(im,false,jm)}else if(fl!==im.mark){Qk.uniformMatrix3fv(im,false,jm);im.mark=fl}}function ql(km,lm){if(undefined===km.mark){Qk.uniformMatrix4fv(km,false,lm)}else if(fl!==km.mark){Qk.uniformMatrix4fv(km,false,lm);km.mark=fl}}function rl(mm,nm){var om=Qk.createShader(mm);if(!om){console.error("Could not create shader object!");return null}Qk.shaderSource(om,nm);Qk.compileShader(om);if(!Qk.getShaderParameter(om,Qk.COMPILE_STATUS)){var pm=Qk.getShaderInfoLog(om);Qk.deleteShader(om);console.error("Could not compile shader! \n\n"+pm);return null}return om}function sl(qm){var rm=qm.program;var sm=0;{Qk.bindAttribLocation(rm,0,"a_Position");Qk.bindAttribLocation(rm,1,"a_Normal");Qk.bindAttribLocation(rm,2,"a_UV");Qk.bindAttribLocation(rm,3,"a_Color");Qk.bindAttribLocation(rm,4,"a_Tangent");Qk.bindAttribLocation(rm,5,"a_Object");Qk.bindAttribLocation(rm,6,"a_MatW")}{Qk.linkProgram(rm);if(!Qk.getProgramParameter(rm,Qk.LINK_STATUS)){var tm=Qk.getProgramInfoLog(rm);console.error("Could not compile program! \n\n"+tm);return 0}}{var um=Qk.getProgramParameter(rm,35718);if(Rk){um-=6;var vm=Qk["getUniformBlockIndex"](rm,"CommonBlock")}var wm=El.CreateUniformsDesc(um);var xm=$k[wm];var ym={};var zm=0;xm[19]=Zk.push(ym)-1;bl[xm[19]]=qm;Qk.useProgram(rm);for(var Am=0;Am<2;Am++){var Bm=um+(Rk?6:0);for(var Cm=0;Cm<Bm;Cm++){var tm=Qk.getActiveUniform(rm,Cm);var Dm=tm.type;if(35678===Dm||35680===Dm||36289===Dm){if(0!==Am){continue}}else{if(1!==Am){continue}}var Em=tm.name;var Fm=Qk.getUniformLocation(rm,Em);if(!Fm){continue}var Gm=Xk.push(Fm)-1;for(var Hm=0;Hm<Wk.length;Hm++){if(Em===Wk[Hm]){xm[Hm]=zm;if(5>Hm){Fm.mark=1}break}}switch(Dm){case 35669:Dm=0;break;case 35666:Dm=1;break;case 35675:Dm=2;break;case 35676:Dm=3;break;case 35678:Dm=4;break;case 35680:Dm=5;break;case 36289:Dm=7;break;default:console.error("Unsupported uniform type:",tm);break}xm[20+zm]=Gm;xm[20+um+zm]=Dm;ym[Em]=zm;Yk[Gm]=Em;if(0===Am){Qk.uniform1i(Fm,zm)}zm++}}if(zm!==um){console.error("Process uniform cout error!",um,zm)}sm=xm[16]}{var Im=0;if(qm.mark){for(var Jm=0,Km=qm.mark;Jm<Km.length;Jm++){var Lm=Km[Jm];Im|=Uk[Lm]}}qm.mode=Im}return sm}function tl(Mm){if(!Mm){return null}var Nm=Pk.Shader[Mm];if(!Nm){console.error("Could not find shader:",Mm);return null}if(Nm.program){return Nm}var Om=Pk.Shader.GetSourceCode(Mm);Nm.vs=rl(Qk.VERTEX_SHADER,Om[0]);if(!Nm.vs){console.error("Could not create vertex shader:",Mm);return null}Nm.fs=rl(Qk.FRAGMENT_SHADER,Om[1]);if(!Nm.fs){Qk.deleteShader(Nm.vs);Nm.vs=null;console.error("Could not create fragment shader:",Mm);return null}Nm.program=Qk.createProgram();if(!Nm.program){Qk.deleteShader(Nm.vs);Qk.deleteShader(Nm.fs);Nm.vs=null;Nm.fs=null;console.error("Could not create program object!");return null}Qk.attachShader(Nm.program,Nm.vs);Qk.attachShader(Nm.program,Nm.fs);Nm.id=sl(Nm);if(!Nm.id){Qk.deleteProgram(Nm.program);Qk.deleteShader(Nm.vs);Qk.deleteShader(Nm.fs);Nm.program=null;Nm.vs=null;Nm.fs=null}return Nm}function ul(Pm,Qm){var Rm=undefined;var Sm=undefined;var Tm=undefined;var Um=undefined;var Vm=0;function Wm(){var en=$k[Pm];var fn=$k[Qm];var gn=bl[en[19]];var hn=en[20];var jn=20+en[17];Rm=gn.program;Sm=Zk[en[19]];Tm=en;Um=[];Vm=en[17];var kn=function(tn){var un=tn;var vn=$k[fn[un]];var wn=Xk[hn+un];var xn=en[jn+un];var yn=[function(){return vn},function(zn){vn.set(zn)},undefined];switch(xn){case 0:yn[2]=function(){nl(wn,vn)};break;case 1:yn[2]=function(){ol(wn,vn)};break;case 2:yn[2]=function(){pl(wn,vn)};break;case 3:yn[2]=function(){ql(wn,vn)};break;case 4:yn[2]=function(){var An=vn[1];if(vn[0]){An=El.GetTexture(An);if(An){vn[0]=0;vn[1]=An}}var Bn=Sk[An]||kl;if(null===Bn){console.log("BindTexture null!");return}Qk.activeTexture(33984+un);Qk.bindTexture(3553,Bn)};break;case 7:yn[2]=function(){var Cn=vn[1];if(vn[0]){Cn=El.GetTexture(Cn);if(Cn){vn[0]=0;vn[1]=Cn}}var Dn=Sk[Cn]||kl;if(null===Dn){console.log("BindTexture null!");return}Qk.activeTexture(33984+un);Qk.bindTexture(35866,Dn)};break;default:console.error("Unsupported uniform type!",xn);break}Um[un]=yn};for(var ln=0;ln<Vm;ln++){kn(ln)}if(gn.uniform_values){for(var mn=0,nn=gn.uniform_values;mn<nn.length;mn++){var on=nn[mn];var pn=Sm[on[0]];if(undefined!==pn){var qn=en[jn+pn];if(4===qn||5===qn){var rn=El.Pipeline["Resource"][on[1]];var sn=[0,rn.Handle,0,0];Um[pn][1](sn)}}}}return gn.mode}function Xm(En){if(hl){hl(cl[Qm],Qk)}if(gl!==Pm){Qk.useProgram(Rm);gl=Pm;if(ll){Qk["bindBufferBase"](Qk["UNIFORM_BUFFER"],0,ll)}}for(var Fn=0,Gn=Um;Fn<Gn.length;Fn++){var Hn=Gn[Fn];Hn[2]()}}function Ym(In){return Sm[In]}function Zm(Jn){return Um[Jn][0]()}function $m(Kn){Kn=Tm[Kn];if(-1<Kn){return Um[Kn][0]()}return null}function _m(Ln){var Mn=Sm[Ln];if(undefined!==Mn){return Um[Mn][0]()}return null}function an(Nn,On){Um[Nn][1](On);if(gl===Pm){Um[Nn][2]()}}function bn(Pn,Qn){Pn=Tm[Pn];if(-1<Pn){Um[Pn][1](Qn);if(gl===Pm){Um[Pn][2]()}}}function cn(Rn,Sn){var Tn=Sm[Rn];if(undefined!==Tn){Um[Tn][1](Sn);if(gl===Pm){Um[Tn][2]()}}}function dn(Un){Um[Un][2]()}cl[Qm]=[Wm,Xm,Ym,Zm,$m,_m,an,bn,cn,dn];return Wm()}function vl(Vn){{Object.defineProperty(Vn,"Attr",{get:function(){if(!this.Attr_){this.Attr_=cl[this._VarList()]}return this.Attr_}})}{var Wn=function(Yn){var Zn=Yn;Object.defineProperty(Vn,Wk[Yn],{get:function(){return this.Attr[4](Zn)},set:function($n){if($n){this.Attr[7](Zn,$n)}}})};for(var Xn=0;Xn<Wk.length;Xn++){Wn(Xn)}}{}}function wl(_n){var ao=Qk.createTexture();if(!ao){console.error("Could not create texture object!");return null}Qk.bindTexture(Qk.TEXTURE_2D,ao);Qk.texParameteri(Qk.TEXTURE_2D,Qk.TEXTURE_MIN_FILTER,Qk.NEAREST);Qk.texParameteri(Qk.TEXTURE_2D,Qk.TEXTURE_MAG_FILTER,Qk.NEAREST);Qk.texParameteri(Qk.TEXTURE_2D,Qk.TEXTURE_WRAP_S,Qk.CLAMP_TO_EDGE);Qk.texParameteri(Qk.TEXTURE_2D,Qk.TEXTURE_WRAP_T,Qk.CLAMP_TO_EDGE);Qk.texImage2D(Qk.TEXTURE_2D,0,Qk.RGBA,1,1,0,Qk.RGBA,Qk.UNSIGNED_BYTE,new Uint8Array(4));var bo=new Image;bo.crossOrigin="anonymous";bo.src=_n.URL;bo.onload=function(co){Qk.bindTexture(Qk.TEXTURE_2D,ao);Qk.texImage2D(Qk.TEXTURE_2D,0,Qk.RGBA,Qk.RGBA,Qk.UNSIGNED_BYTE,bo);Qk.bindTexture(Qk.TEXTURE_2D,null)};Qk.bindTexture(Qk.TEXTURE_2D,null);return ao}function xl(eo){var fo=Qk.createTexture();if(!fo){console.error("Could not create texture object!");return null}Qk.bindTexture(Qk.TEXTURE_2D,fo);var go=eo.Params;Qk.texParameteri(Qk.TEXTURE_2D,Qk.TEXTURE_MAG_FILTER,Qk[go[1]]);Qk.texParameteri(Qk.TEXTURE_2D,Qk.TEXTURE_MIN_FILTER,Qk[go[0]]);Qk.texParameteri(Qk.TEXTURE_2D,Qk.TEXTURE_WRAP_S,Qk[go[2]]);Qk.texParameteri(Qk.TEXTURE_2D,Qk.TEXTURE_WRAP_T,Qk[go[3]]);var ho=Tk[eo.Format]();Qk.texImage2D(Qk.TEXTURE_2D,eo.Levels,ho[0],eo.Width,eo.Height,0,ho[1],ho[2],null);Qk.bindTexture(Qk.TEXTURE_2D,null);fo["_Format"]=ho;return fo}function yl(io,jo){var ko=Qk.createFramebuffer();if(!ko){console.error("Could not create framebuffer object!");return null}Qk.bindFramebuffer(Qk.FRAMEBUFFER,ko);Qk.framebufferTexture2D(Qk.FRAMEBUFFER,Qk.COLOR_ATTACHMENT0,Qk.TEXTURE_2D,io,0);if(jo&&jo["_Format"][0]===Qk.DEPTH_STENCIL){Qk.framebufferTexture2D(Qk.FRAMEBUFFER,Qk.DEPTH_STENCIL_ATTACHMENT,Qk.TEXTURE_2D,jo,0)}else{Qk.framebufferTexture2D(Qk.FRAMEBUFFER,Qk.DEPTH_ATTACHMENT,Qk.TEXTURE_2D,jo,0)}if(Qk.FRAMEBUFFER_COMPLETE!=Qk.checkFramebufferStatus(Qk.FRAMEBUFFER)){Qk.deleteFramebuffer(ko);console.error("Framebuffer check failed!");return null}return ko}var zl=function(lo){if(Rk){$k[ml][12]=lo;Qk.bindBuffer(Qk["UNIFORM_BUFFER"],ll);Qk.bufferData(Qk["UNIFORM_BUFFER"],$k[ml],Qk.DYNAMIC_DRAW)}};var Al=null;var Bl=null;var Cl=null;var Dl=null;var El={_name:"ShaderLab",Pipeline:null,Init:function(mo){Qk=Pk["GL"]["Ctx"];Sk=Pk["GL"]["_textures"];dl=Qk.canvas.width;el=Qk.canvas.height;Al=Pk["GL"]["BindViewport"];Bl=Pk["GL"]["BindDepth"];Cl=Pk["GL"]["BindBlend"];Dl=Pk["GL"]["BindStencil"];if(Rk){var no=Qk.createBuffer();if(no){Qk.bindBuffer(Qk["UNIFORM_BUFFER"],no);Qk.bufferData(Qk["UNIFORM_BUFFER"],64*3,Qk.DYNAMIC_DRAW);Qk.bindBuffer(Qk["UNIFORM_BUFFER"],null);ll=no}}this.Pipeline.Init();for(var oo=0,po=this.Pipeline.RenderTarget;oo<po.length;oo++){var qo=po[oo];if(qo){qo.Width=qo.Width||dl;qo.Height=qo.Height||el;qo.Levels=qo.Levels||0;qo.Params=qo.Params||["NEAREST","NEAREST","CLAMP_TO_EDGE","CLAMP_TO_EDGE"];qo.Texture=xl(qo);qo.Handle=Pk["GL"]["RegisterTexture"](qo.Texture);qo.Size=[1/qo.Width,1/qo.Height,qo.Width,qo.Height]}}for(var ro=0,so=this.Pipeline.Resource;ro<so.length;ro++){var to=so[ro];if(to){if("2D"===to.TYPE){to.Texture=wl(to);to.Handle=Pk["GL"]["RegisterTexture"](to.Texture);if(2===to.ID){kl=to.Texture}}}}function uo(Eo){var Fo=Eo.RenderTarget;if(Fo){var Go=El.Pipeline["RenderTarget"][Fo[0]];var Ho=El.Pipeline["RenderTarget"][Fo[1]];Eo.Framebuffer=yl(Go.Texture,Ho?Ho.Texture:null);if(!Eo.Framebuffer){console.log(Eo)}Eo.Framebuffer.width=Go.Size[2];Eo.Framebuffer.height=Go.Size[3]}else{Eo.Framebuffer=null}}for(var vo=0,wo=this.Pipeline.Pass;vo<wo.length;vo++){var xo=wo[vo];if(xo){if("Clear"===xo.Type){xo._Type=2}else{xo._Type="Render"===xo.Type?0:1}xo._Mask=0;for(var yo=0,zo=xo.Mask;yo<zo.length;yo++){var Ao=zo[yo];xo._Mask+=Uk[Ao]}uo(xo);if(xo.Pingpong){for(var Bo=0,Co=xo.Pingpong;Bo<Co.length;Bo++){var Do=Co[Bo];uo(Do)}}}}},Draw:function(){fl++;var Io=0;var Jo=this.Pipeline.Picker;if(Jo){jl[0]=Jo.x;jl[1]=Qk.canvas.height-Jo.y}else{jl[0]=-10;jl[1]=-10}zl(0);for(var Ko=0,Lo=this.Pipeline.Pass;Ko<Lo.length;Ko++){var Mo=Lo[Ko];Fl.BeginDrawPass();if(Mo.Pingpong){for(var No=0;No<Mo.PingpongCount;No++){for(var Oo=0;Oo<Mo.Pingpong.length;Oo++){Mo.Framebuffer=Mo.Pingpong[Oo].Framebuffer;Mo.SetUniforms=Mo.Pingpong[Oo].SetUniforms;this.DrawPass(Mo,El.DrawPass_)}}}else{this.DrawPass(Mo,El.DrawPass_)}Fl.EndDrawPass(Io++)}},DrawPass:function(Po,Qo){Qk.bindFramebuffer(Qk.FRAMEBUFFER,Po.Framebuffer);Al(Po.Framebuffer,dl,el);Bl(Po.Depth);Cl(Po.Blend,zl);Dl(Po.Stencil);var Ro=Po.ClearTarget;if(Ro){var So=0;if(Ro.Color){Qk.clearColor(Ro.Color.r,Ro.Color.g,Ro.Color.b,Ro.Color.a);So+=Qk.COLOR_BUFFER_BIT}if(undefined!==Ro.Depth){Qk.clearDepth(Ro.Depth);So+=Qk.DEPTH_BUFFER_BIT}if(undefined!==Ro.Stencil){Qk.clearStencil(Ro.Stencil);So+=Qk.STENCIL_BUFFER_BIT}Qk.clear(So)}hl=Po.SetUniforms;if(Po.Shader){if(!Po._Material){Po._Material=new Pk["Material"](Po.Shader)}Po._Material._Bind()}Qo(Po._Type,Po._Mask);if(Po.Postprocess){Po.Postprocess(Qk)}},PreflushBuffer:function(){var To=$k.length;var Uo=new Array(To);for(var Vo=0;Vo<To;Vo++){var Wo=$k[Vo];if(Wo){if("Float32Array"===Wo.constructor.name){Uo[Vo]=Wo.length}else{Uo[Vo]=-Wo.length}$k[Vo]=Wo.byteOffset}}return Uo},FlushBuffer:function(Xo,Yo){Vk=Xo;var Zo=$k.length;for(var $o=0;$o<Zo;$o++){var _o=$k[$o];if(_o){var ap=Yo[$o];if(0<ap){$k[$o]=new Float32Array(Vk,_o,ap)}else{$k[$o]=new Int32Array(Vk,_o,-ap)}}}for(var $o=0;$o<Zo;$o++){var bp=cl[$o];if(bp){bp[0]()}}Pk["GL"]["FlushHeap"]()},ResizeCanvas:function(cp,dp){},PickObject:function(){var ep=this.Pipeline.Picker;if(ep){Qk.readPixels(ep.x,Qk.canvas.height-ep.y,1,1,Qk.RGBA,Qk.FLOAT,il);if(0>il[3]){var fp=Math.ceil(il[0]*1e4)*8192+Math.ceil(il[1]*1e4);var gp=Math.ceil(il[2]*1e4);var hp=this["GetObject"](fp);ep.Feedback(hp,gp)}else{ep.Feedback(null,0)}this.Pipeline.Picker=null}},APP_DO_OPERATORS:[function(ip){var jp=Pk["ShaderLab"]["Pipeline"]["InternalShader"][ip];var kp=tl(jp);return kp.id},function(lp,mp,np,op){var pp=null;switch(mp){case 0:pp=new Int32Array(Vk,op,4);pp.set(_k[0]);break;case 1:pp=new Float32Array(Vk,op,4);pp.set(_k[1]);break;case 2:pp=new Float32Array(Vk,op,9);pp.set(_k[2]);break;case 3:pp=new Float32Array(Vk,op,16);pp.set(_k[3]);break;case 4:pp=new Int32Array(Vk,op,4);pp.set(_k[4]);break;case 5:pp=new Int32Array(Vk,op,4);pp.set(_k[5]);break;case 6:pp=new Int32Array(Vk,op,np);break;case 7:pp=new Int32Array(Vk,op,4);pp.set(_k[7]);break;case 8:pp=new Float32Array(Vk,op,48);ml=lp;break;default:console.error("Unsupported uniform type:",mp);break}$k[lp]=pp;return lp},function(qp,rp,sp,tp){al[qp](rp,sp,tp);return 0},function(up,vp,wp,xp){var yp=Pk["WASM"].GetString(xp);var zp=$k[up];var Ap=Zk[zp[19]];var Bp=Ap[yp];return undefined===Bp?0:Bp},function(Cp,Dp){cl[Dp][1](Cp);return 0},function(){El.Draw()},ul,null],ExpandMaterial:vl,CreateUniformsDesc:undefined,GetTexture:undefined,DrawPass_:undefined,SetSunlight:undefined};var Fl={_name:"Profiler",m_pMsg:"",m_nCycleStart:0,m_nCycleTick:0,m_nBeginCycle:0,m_nTotalCycle:0,m_nBeginScript:0,m_nTotalScript:0,m_nBeginUpdate:0,m_nTotalUpdate:0,m_nBeginDraw:0,m_nTotalDraw:0,m_nBeginMaterial:0,m_nTotalMaterial:0,m_nBeginDrawPass:0,m_nTotalDrawPass:[],BeginCycle:function(){if(0===Fl.m_nCycleTick){Fl.m_nCycleStart=Pk["Time"]();Fl.m_nCycleTick=0;Fl.m_nBeginCycle=0;Fl.m_nTotalCycle=0;Fl.m_nBeginScript=0;Fl.m_nTotalScript=0;Fl.m_nBeginUpdate=0;Fl.m_nTotalUpdate=0;Fl.m_nBeginDraw=0;Fl.m_nTotalDraw=0;Fl.m_nBeginMaterial=0;Fl.m_nTotalMaterial=0;Fl.m_nBeginDrawPass=0;Fl.m_nTotalDrawPass=[]}Fl.m_nBeginCycle=Pk["Time"]()},EndCycle:function(){Fl.m_nTotalCycle+=Pk["Time"]()-Fl.m_nBeginCycle;if(60===++Fl.m_nCycleTick){var Ep={"总耗时":Pk["Time"]()-Fl.m_nCycleStart,"应用循环":Fl.m_nTotalCycle,"脚本逻辑":Fl.m_nTotalScript,"场景更新":Fl.m_nTotalUpdate,"场景绘制":Fl.m_nTotalDraw,"通道绘制":Fl.m_nTotalDrawPass};Fl.m_pMsg="'开销统计':"+JSON.stringify(Ep);Fl.m_nCycleTick=0}},BeginScript:function(){Fl.m_nBeginScript=Pk["Time"]()},EndScript:function(){Fl.m_nTotalScript+=Pk["Time"]()-Fl.m_nBeginScript},BeginUpdate:function(){Fl.m_nBeginUpdate=Pk["Time"]()},EndUpdate:function(){Fl.m_nTotalUpdate+=Pk["Time"]()-Fl.m_nBeginUpdate},BeginDraw:function(){Fl.m_nBeginDraw=Pk["Time"]()},EndDraw:function(){Fl.m_nTotalDraw+=Pk["Time"]()-Fl.m_nBeginDraw},BeginMaterial:function(){Fl.m_nBeginMaterial=Pk["Time"]()},EndMaterial:function(){Fl.m_nTotalMaterial+=Pk["Time"]()-Fl.m_nBeginMaterial},BeginDrawPass:function(){Fl.m_nBeginDrawPass=Pk["Time"]()},EndDrawPass:function(Fp){Fl.m_nTotalDrawPass[Fp]=(Fl.m_nTotalDrawPass[Fp]?Fl.m_nTotalDrawPass[Fp]:0)+Pk["Time"]()-Fl.m_nBeginDrawPass}};return[El,Fl]});MiaokitMerge(function(Gp){if("Sisyphus"!==Gp["m_pConfig"]["ENGINE"]){return[]}var Hp=undefined;var Ip=true;function Jp(Pp){Kp();Hp=Pp.OnRenderingEvent;Lp();var Qp={memory:new WebAssembly.Memory({initial:64*16,maximum:32768}),APP_PLUGIN_TYPE:function(){return 2},APP_MEM_TYPE:function(){return 2},APP_MEM_RESERVE:function(){return 1024},APP_MEM_MALLOC:function(Rp){alert("SISYPHUS��չ��֧��ʹ�÷������ڴ�!");return 0},APP_MEM_FREE:function(Sp){alert("SISYPHUS��չ��֧��ʹ�÷������ڴ�!")},APP_MEM_BASE:function(){return 64*1024*1024},APP_MEM_GROW:function(Tp){if(Gp["ShaderLab"]){var Up=Gp["ShaderLab"]["PreflushBuffer"]();Qp["memory"].grow(Tp/64/1024);var Vp=Qp["memory"].buffer;Gp["ShaderLab"]["FlushBuffer"](Vp,Up)}else{Qp["memory"].grow(Tp/64/1024)}},APP_MEM_RECYCLE:function(Wp){alert("WAMSģ�鲻֧�ֻ����ڴ�!")},UNITY_CREATE_OBJ:function(){alert("δװ��UNITY��չ!");return 0},UNITY_FREE_OBJ:function(){alert("δװ��UNITY��չ!");return 0},UNITY_GET:function(){alert("δװ��UNITY��չ!");return 0},UNITY_DO:function(){alert("δװ��UNITY��չ!");return 0}};Object["assign"](Qp,Op.Export);Pp.OnEngineLoad(Qp)}function Kp(){var Xp=document.getElementById("unityContainer");var Yp=document.createElement("canvas");Yp.id="3d";Yp.width=Xp.offsetWidth;Yp.height=Xp.offsetHeight;Yp.style.width="100%";Yp.style.height="100%";Yp.style.top="0rem";Yp.style.bottom="0rem";Yp.style.left="0rem";Yp.style.right="0rem";Yp.style.position="absolute";Yp.style.zIndex="1";Xp.appendChild(Yp);Op["CreateContext"](Yp,null);Gp["ShaderLab"]["Init"](Op)}function Lp(){if(Ip){Ip=false;Np()}}function Mp(){Ip=true}function Np(){if(Ip){return}Gp.Profiler.BeginCycle();Gp.Profiler.BeginScript();Hp(0);Gp.Profiler.EndScript();if(Gp["WASM"]["Update"]){Gp.Profiler.BeginUpdate();Gp["WASM"]["Update"](0);Gp.Profiler.EndUpdate();Gp.Profiler.BeginDraw();Gp["WASM"]["Update"](1);Gp.Profiler.EndDraw()}Gp.Profiler.EndCycle();requestAnimationFrame(Np)}var Op=function(){var Zp=undefined;var $p=[-1,-1,-1,-1];var _p=[-1,-1,-1];var aq=[-1,-1,-1,-1,-1,-1,-1];var bq=[-1,-1,-1,-1,-1,-1,-1];var cq=[null];var dq=null;var eq=null;var fq=0;var gq=function(){var oq=[null];var pq=[];var qq=[];var rq=0;var sq=0;return{Analyze:function(){return", 'Image':["+rq+","+pq.length+","+sq+","+qq.length+"]"},Get:function(tq){return oq[tq]},CreateImage:function(){var uq=null;if(0<pq.length){uq=pq.pop()}else{rq++;uq=oq.push(new Image)-1}return uq},FreeImage:function(vq){pq.push(vq)},PushBuffer:function(wq){var xq=null;if(0<qq.length){xq=qq.pop()}else{sq++;xq=oq.push(null)-1}oq[xq]=wq;return xq},FreeBuffer:function(yq){oq[yq]=null;qq.push(yq)}}}();var hq=function(zq){var Aq=cq.length;zq.name=Aq;cq[Aq]=zq;return Aq};var iq=function(Bq){return cq[Bq]};var jq=function(Cq,Dq){cq[Cq]=Dq};var kq=function(Eq,Fq){eq[Eq>>2]=Fq};var lq=function(Gq){return eq[Gq>>2]};var mq=function(Hq,Iq){return dq.subarray(Hq,Hq+Iq)};var nq={glGenVertexArrays:function(Jq,Kq){var Lq=Zp["createVertexArray"]();if(!Lq||1!=Jq){console.error("gl.createVertexArray error!");return}var Mq=hq(Lq);kq(Kq,Mq)},glDeleteVertexArrays:function(Nq,Oq){var Pq=lq(Oq);var Qq=iq(Pq);if(!Qq||1!=Nq){console.error("gl.deleteVertexArray error!");return}Zp["deleteVertexArray"](Qq);jq(Pq,null)},glBindVertexArray:function(Rq){Zp["bindVertexArray"](iq(Rq))},glVertexAttribPointer:function(Sq,Tq,Uq,Vq,Wq,Xq){Zp.vertexAttribPointer(Sq,Tq,Uq,!!Vq,Wq,Xq)},glEnableVertexAttribArray:function(Yq){Zp.enableVertexAttribArray(Yq)},glVertexAttribDivisor:function(Zq,$q){Zp["vertexAttribDivisor"](Zq,$q)},glGenTextures:function(_q,ar){var br=Zp.createTexture();if(!br||1!=_q){console.error("gl.createTexture error!");return}var cr=hq(br);kq(ar,cr)},glDeleteTextures:function(dr,er){var fr=lq(er);var gr=iq(fr);if(!gr||1!=dr){console.error("gl.deleteTexture error!");return}Zp.deleteTexture(gr);jq(fr,null)},glActiveTexture:function(hr){Zp.activeTexture(hr)},glBindTexture:function(ir,jr){Zp.bindTexture(ir,iq(jr))},glTexParameteri:function(kr,lr,mr){Zp.texParameteri(kr,lr,mr)},glTexImage2DObj:function(nr,or,pr,qr,rr,sr,tr,ur,vr,wr){if(0==wr){var xr=gq.Get(vr);if(xr){if(xr instanceof ArrayBuffer){Zp.texImage2D(nr,or,pr,qr,rr,sr,tr,ur,new Uint8Array(xr));gq.FreeBuffer(vr)}else{Zp.texParameterf(nr,34046,fq);Zp.texImage2D(nr,or,pr,tr,ur,xr);gq.FreeImage(vr)}}}else{Zp.texImage2D(nr,or,pr,qr,rr,sr,tr,ur,0===vr?new Uint8Array(3):mq(vr,wr))}},glGenBuffers:function(yr,zr){var Ar=Zp.createBuffer();if(!Ar||1!=yr){console.error("gl.createBuffer error!");return}var Br=hq(Ar);kq(zr,Br)},glDeleteBuffers:function(Cr,Dr){var Er=lq(Dr);var Fr=iq(Er);if(!Fr||1!=Cr){console.error("gl.deleteBuffer error!");return}Zp.deleteBuffer(Fr);jq(Er,null)},glBindBuffer:function(Gr,Hr){Zp.bindBuffer(Gr,iq(Hr))},glBufferData:function(Ir,Jr,Kr,Lr){if(!Kr){Zp.bufferData(Ir,Jr,Lr)}else{Zp.bufferData(Ir,mq(Kr,Jr),Lr)}},glBufferSubData:function(Mr,Nr,Or,Pr){Zp.bufferSubData(Mr,Nr,mq(Pr,Or))},glBlendEquationSeparate:function(Qr,Rr){if(Qr!=aq[1]||Rr!=aq[2]){Zp.blendEquationSeparate(Qr,Rr);aq[1]=Qr;aq[2]=Rr}},glBlendFuncSeparate:function(Sr,Tr,Ur,Vr){if(Sr!=aq[3]||Tr!=aq[4]||Ur!=aq[5]||Vr!=aq[6]){Zp.blendFuncSeparate(Sr,Tr,Ur,Vr);aq[3]=Sr;aq[4]=Tr;aq[5]=Ur;aq[6]=Vr}},glEnable:function(Wr){Zp.enable(Wr)},glDisable:function(Xr){Zp.disable(Xr)},glDepthFunc:function(Yr){Zp.depthFunc(Yr)},glDepthMask:function(Zr){Zp.depthMask(!!Zr)},glCullFace:function($r){Zp.cullFace($r)},glPolygonOffset:function(_r,as){Zp.polygonOffset(_r,as)},glViewport:function(bs,cs,ds,es){if(ds!=$p[2]||es!=$p[3]){Zp.viewport(bs,cs,ds,es);$p[2]=ds;$p[3]=es}},glDrawArrays:function(fs,gs,hs){Zp.drawArrays(fs,gs,hs)},glDrawArraysInstanced:function(is,js,ks,ls){Zp["drawArraysInstanced"](is,js,ks,ls)},glDrawElements:function(ms,ns,os,ps){Zp.drawElements(ms,ns,os,ps)},glDrawElementsInstanced:function(qs,rs,ss,ts,us){Zp["drawElementsInstanced"](qs,rs,ss,ts,us)}};return{_name:"GL",_textures:cq,Ctx:null,ImageCache:gq,Export:nq,FlushHeap:function(){dq=Gp["WASM"]["HEAPU8"]();eq=Gp["WASM"]["HEAP32"]()},CreateContext:function(vs,ws){ws=ws||{majorVersion:2,minorVersion:0,alpha:0,depth:0,stencil:0,antialias:0,premultipliedAlpha:0,preserveDrawingBuffer:0,preferLowPowerToHighPerformance:0,failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:0,proxyContextToMainThread:0,renderViaOffscreenBackBuffer:0};if(ws["explicitSwapControl"]){return 0}if(ws["majorVersion"]==1){Zp=vs.getContext("webgl",ws)||vs.getContext("experimental-webgl",ws);if(!Zp){console.error("create webgl_1 error!");return}var xs=Zp.getExtension("ANGLE_instanced_arrays");if(xs){Zp["vertexAttribDivisor"]=function(Gs,Hs){xs["vertexAttribDivisorANGLE"](Gs,Hs)};Zp["drawArraysInstanced"]=function(Is,Js,Ks,Ls){xs["drawArraysInstancedANGLE"](Is,Js,Ks,Ls)};Zp["drawElementsInstanced"]=function(Ms,Ns,Os,Ps,Qs){xs["drawElementsInstancedANGLE"](Ms,Ns,Os,Ps,Qs)}}else{console.error("!ANGLE_instanced_arrays")}var ys=Zp.getExtension("OES_vertex_array_object");if(ys){Zp["createVertexArray"]=function(){return ys["createVertexArrayOES"]()};Zp["deleteVertexArray"]=function(Rs){ys["deleteVertexArrayOES"](Rs)};Zp["bindVertexArray"]=function(Ss){ys["bindVertexArrayOES"](Ss)}}else{console.error("!OES_vertex_array_object")}var zs=["EXT_color_buffer_half_float","OES_texture_half_float","EXT_texture_filter_anisotropic","WEBGL_depth_texture","OES_element_index_uint","EXT_frag_depth","EXT_blend_minmax"];for(var As=0,Bs=zs;As<Bs.length;As++){var Cs=Bs[As];var Ds=Zp.getExtension(Cs);if(!Ds){console.error("!"+Cs)}}}else{Zp=vs.getContext("webgl2",ws);if(!Zp){console.error("create webgl_2 error!");return}var zs=["EXT_color_buffer_float","EXT_texture_filter_anisotropic"];for(var Es=0,Fs=zs;Es<Fs.length;Es++){var Cs=Fs[Es];var Ds=Zp.getExtension(Cs);if(!Ds){console.error("!"+Cs)}}}fq=Zp.getParameter(34047);Op.Ctx=Zp;return 0},DestroyContext:function(){console.error("!DestroyContext")},GetTextureByHandle:function(Ts){return cq[Ts]},RegisterTexture:function(Us){return hq(Us)},BindViewport:function(Vs,Ws,Xs){var Ys=Vs&&Vs.width||Ws;var Zs=Vs&&Vs.height||Xs;if(Ys!=$p[2]||Zs!=$p[3]){Zp.viewport(0,0,Ys,Zs);$p[2]=Ys;$p[3]=Zs}},BindDepth:function($s){if($s){var _s=$s.Write;var at=Zp[$s.Func];if(1!=_p[0]){Zp.enable(Zp.DEPTH_TEST);_p[0]=1}if(_s!=_p[1]){Zp.depthMask(_s);_p[1]=_s}if(at!=_p[2]){Zp.depthFunc(at);_p[2]=at}}else{if(0!=_p[0]){Zp.disable(Zp.DEPTH_TEST);_p[0]=0}}},BindBlend:function(bt,ct){if(bt){var dt=Zp[bt.ColorFunc];var et=Zp[bt.AlphaFunc];var ft=Zp[bt.ColorSrc];var gt=Zp[bt.ColorDest];var ht=Zp[bt.AlphaSrc];var it=Zp[bt.AlphaDest];if(1!=aq[0]){Zp.enable(Zp.BLEND);aq[0]=1;ct(1)}Zp.blendEquationSeparate(dt,et);aq[1]=dt;aq[2]=et;Zp.blendFuncSeparate(ft,gt,ht,it);aq[3]=ft;aq[4]=gt;aq[5]=ht;aq[6]=it}else{if(0!=aq[0]){Zp.disable(Zp.BLEND);aq[0]=0;ct(0)}}},BindStencil:function(jt){if(jt){var kt=Zp[jt.Func];var lt=jt.Value;var mt=jt.Mask;var nt=Zp[jt.Faild];var ot=Zp[jt.ZFaild];var pt=Zp[jt.Pass];if(1!=bq[0]){Zp.enable(Zp.STENCIL_TEST);bq[0]=1}if(kt!=bq[1]||lt!=bq[2]||mt!=bq[3]){Zp.stencilFunc(kt,lt,mt);bq[1]=kt;bq[2]=lt;bq[3]=mt}if(nt!=bq[4]||ot!=bq[5]||pt!=bq[6]){Zp.stencilOp(nt,ot,pt);bq[4]=nt;bq[5]=ot;bq[6]=pt}}else{if(0!=bq[0]){Zp.disable(Zp.STENCIL_TEST);bq[0]=0}}}}}();Gp["WASM"]=Gp["WASM"]||{};Gp["WASM"]["LoadEngine"]=Jp;Lp["_name"]="Start";Mp["_name"]="Stop";return[Op,Lp,Mp]});MiaokitMerge(function(qt){var rt=Date.now();function st(){return Date.now()-rt}function tt(wt,xt){if(xt===void 0){xt=0}if(2===xt){console.warn("Track:",st(),wt)}else if(2<xt){console.error("Track:",st(),wt)}else{console.info("Track:",st(),wt)}}function ut(yt,zt,At){if(At===void 0){At=undefined}var Bt=new XMLHttpRequest;Bt.open("GET",yt,true);Bt.responseType="arraybuffer";Bt.onprogress=function(Ct){if(0<Ct.total&&At){At(Ct.loaded/Ct.total)}};Bt.onload=function(Dt){if(Bt.status==200){zt(Bt.response)}else{zt(null)}};Bt.onerror=function(Et){tt(Et,2);zt(null)};Bt.send(null)}function vt(Ft,Gt,Ht,It,Jt,Kt){var Lt=new XMLHttpRequest;Lt.onprogress=function(Mt){if(0<Mt.total&&Jt){Jt(Mt.loaded/Mt.total)}};Lt.onload=function(Nt){if(Lt.status==200){Kt(Lt.response)}else{Kt(null)}Lt=null};Lt.onerror=function(Ot){tt(Ot,2);Kt(null)};Lt.responseType=Gt;Lt.open(Ft,Ht,true);Lt.send(It)}st["_name"]="Time";tt["_name"]="Track";ut["_name"]="Fetch";vt["_name"]="Request";return[st,tt,ut,vt]});MiaokitMerge(function(Pt){if("Unity"!==Pt["m_pConfig"]["ENGINE"]){return[]}if(!UnityLoader){return[]}var Qt=Pt["m_pLogo"]||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAJvNJREFUeNrsnQe4XUXVhufmpveQhIQiNYEYiEASAkiL9CKCGop0AUEUVBRB+KWIYpcuvQqCSpEeEZQqkIQAgohAgBBDgqGmt1v+/f3n2/9dd+7up9wT/N7nmefec/Y+s8vMrFlrzZqZhtbWVieE+O+ki16BEBIAQggJACGEBIAQQgJACCEBIISQABBCSAAIISQAhBASAEIICQAhhASAEEICQAghASCEkAAQQkgACCEkAIQQEgBCCAkAIYQEgBBCAkAIIQEghJAAEEJIAAghJACEEBIAQggJACGEBIAQQgJACCEBIISQABBCSAAIISQAhBASAEIICQAhhASAEEICQAgJACGEBIAQQgJACCEBIISQABBCSAAIISQAhBASAEIICQAhhASAEEICQAghASCEkAAQQkgACCEkAIQQEgBCCAkAIYQEgBBCAkAIIQEghJAAEEJIAAghJACEEBIAQggJACGEBIAQQgJACCEBIISQABBCSAAIISQAhBASAEIICQAhhASAEEICQAghASCEkAAQQgJACCEBIISQABBCSAAIISQAhBASAEIICQAhhASAEEICQAghASCEkAAQQkgACCEkACL5RZD+GaSj9NqFqA8aWltbq32NbYJ0QZAmmO/+GKQTg/S2ikCIj68G8LMgPek1fvD5IL0cpONVBEJ8/DSAHYN0fpC2yHDuHUH6TpBmqjiEWLU1gG609R/J2PjBF4L0Ck0CIcQqqgHsEaSLgjSyjDweDNK3g/QPFY0Qq4YGMDBIlwRpcpmNH+wapBeDdIqKRoj61wAmsddfowr39kSQTg7SFBWTEPWlAQwL0m+CdGuVGj/YLkhPB+mHKiYh6kcDQK9/ZZAG1fA+XwjSV4I0VUUmROcIAPT0GNo7sBPv98dBOjNIzXX4Lnvw/j50pdgHjGx0dqBToyuNzPiFjM8rVP3/nwFBWi9ILeZdNfDvG0FanDO/1YI01nvvKIt5QXq+4D32DdKWzMfm2zVIrwdpRjUFwJGu5OjrUweF9VqQvhqkv9ZZJcKw57P8H0LgpSA9F6SngjTdleIcat3o9gnSoazYzlTs913J0bpYbf//+Czrd5PfPoJ0CE3RPGwfpLuNsA0b6p+pQRdhlCuNkvX1BAAEPCJtzyiSadck4eBKXn1kvmcdFRbu6S8ssB9SqtYDR5r/B9GHgYT4hiUUCNNcybkJx+ZbNdBkNg3SARHfQwB8fxUUAPBZ9XKlkafVg7RWkD4RpPWDtE6Qzg7Svwr2ruvGHOtVUPMaGPF9vzKffXDM/fQtmmnXFJX/lTquDCcEaT+qbp1tEqAy7p9wvDfVN6SvBWkBVUGYCo8G6ZkgvVeF+4rTOBZFmAVgPHuoppjjlaQ7BeJt/L830wBW9CF8r0NYF4cxhd8NYkOz4J3+tMC9JNWflgL5tRa4TpY8myqdb5IAeDdIv+9kmz+NX9aJP+ArLt9oSP8g7cD0PfoK4OB8OEj3BunNTnoOCIBTa3i9WykAvuhK80Z68t30KJgfNNWfe40WPec3g/SAK81GFd7LiWNlkA6qIxXbBzMKL6yTe/kP7bui7wqqLCZIXUQtobOotY9iCf/OoSo/tIzG7/juNvK+gwl7nisFqu2mJp8sAD4Tcc7edXjfC2JU7r2oRtaaq4O0e5A25/v6SZAe433mAR7nP/0X1kOEfr9TgXx6ufZOtgtc2xwT+AjucqVQ81WRhQmmxbJKmQDwrJ/OChwC+xQTfL5bRy9jnwjVH6rzTmU6WsplLtP9/AznFKZCT3Qlh+BGtHeTtJoFFbyfZQl27aI6Kk84JTG6M7zg75cGaT7ffTd2Ar+gv8UCE+NXQRoRpJOCtLxKz9OUwzcAzeeQDL6D4QnaEerWd1JM+rC9z6BpH+sDwFj2R0G6zHx3ClXUEXVQWS5k7+r3wOh5n3f1FSPwJlP4wj/lSguk7EihsIZXyLeWca11qAK3MiG/sTHn9qYGhYaD0Z5GVoyuNX4/1qONUZHtIyp+F9c2Jm8FGOrBdJpd7zB9yMY3nI0iDqxDAa//UTTfygECp4/xO7QmdEJd6eMItW8I6A29DrcIOzJl4bEkAQApCi/speyJfus5WF6rA1XxW953cAQebdSkSrImBWJ3V55XvJUVZAULHQ3vLAraPWmbzqS2VRRoP9dlPBfe9JsjtA84JE9w0Z7vJtroZ7An9cG9X8E61ZCx4Vin3B18H2+zUb/Pz1dG2PUrKQDeiskbwmBX3s9+MefsRU1t/3JUaFdykv+c9xSWdc+YcyHgXuD7wXu6ls9dSxYnmQDWJ3ATK+Xf+HkGG98FnSgAPud9PpGqT0hjha8HYXhEFbWDq9jrD2UvUo720lTm/aAuvMoUxxcS1FDEZdxQxvX/yOQT5ZhsyGDqzWPj/KWLX2sCGtID1HZbXLG5MX1d9hGgXq59vMEQo7E1dEaDSntgDEsN8tTvJzup8Z/g2g+PQcW7qMrXRKVYUqW8rUbxrsu2IhKeedMqPmsax8ZUVKjRk6twTz1deVPWITy+4UpBT3H8icKi6HXKFdoNNW78jXkEANS0h7zvJrnqB4n4PB6kX5vPfdx/n7cc2tefaZYN6ITrb06/RRR3uuoMF7eUKbBCznUlp5/PFdQOOtMh2ky1PCktotkY1+5W8py0fJYwn1gTIE5Nghp1Mj/PpfPkuhq9oBURdtxkV7t5CdVaODWryo6RBHi0v8jPcCReHKTDvfO6l3k/acOnR8eo/81lqv72PbdkbOitEY2hIaVjuoD3GmqNl1GrDDu6zqgffegHGRuhFfrvYATNxSjT5wb6qtLac0OaDyAO2NmI2AonRVzvSkFCu9egAX4pSB+Yz990Hb3F1Wz81fKMb5ThnEkUvn6c+mGuNNHofPPdK6wILaZXQK89ISLfhey1V/AZuzC/ONZhOUSBUOZyF2052JWiKZu9Ro77Wi9GM72GvV4XU7nxPMcFaVbMdS5mo4NQ/XqFNNmV7FlbTGPt5qJj9pt4bjjysoLfvVrAbLR84ApGj+ap3BhnH256LlTOd6rcE2O4wnpJN3C1dUL+25WGPxsLVBZUhNGuFOIaBWIZMMowJ+IYnII/cMnLpkPiY1TkQX7+m2tz2Fq/SZQAwLyDY1z2yD+oyYNjjl3misXLO69cJ+YUzNsU1GR+WuE6cjvfe4tp5Nu49iNoIY/xvTcyfZTjOt0TfAWFnd95BMBg2uHH8fMiagH3VKnxoWEc4n13q6stiyj4ijI34Rga+QERAg3DVwhdTXP2wUF2Cxv4GzHn9EhoQL0yCoCR7J2j+HuFyr9SIchLPWF0LoXw11LKohzmM1nWSLi/ovM8mgtoBhW3X471Kua9MZKuEnzOe+jDXXxgS72SNpX0KNc2ZjyAtv5kl83TD1vuRld8lCKr5/lMF+90hD29vM7eeSgA4Pk/nf6jhxI0hmrQLUd760JB3T0hdeM5rQll2S0ljx5RmkIR+xbOPzth5cgg7eyKh3FGAbt3uteTXew+foxxpcUoEPxySQ4Bdy9NhHICh2zD3YKV6FnvnN0TbH/0/jdV6D00VDCfJfQT2bUkR1OwnuRq57zOyk4U/Gk9fM8Ecxua8g4pHToa/x+cF3VYRABgyui+rjSxIrR59nWVW70Xzix/3gEqe/8aFEZXOp26FKx8zXRA5VFpEVvRz2Wbw/ACK/ZtZT4n7hMhqFvRl7Mzha4VAP1ZMRtjKuTFfOaik6+Wufbhs81eDxdGT8bZvs08bo8tYM8f5TuBFoPIOzhfT6sjAYA4m83LzGN4xg54WiU0gFD1u8t8nuoqN2FonwhbuVZz1Neko2ZAAbuqgRUQMdmv5rxmGggUgsf/0gh7s+hzIrZiYIxGAM6hhhLHKUwNBd5T2GmE7wlm5BOe/d5Mtf38iGtAwB5m7OlG8z20U3jFV4u5PsKdMQHnq6724//NEX6clhpef0WlBACGhRAie4NXIfZ12Ya34kCsgT/f4NwavqAG9ny9y/h9JaO6MMR0PYVrkXkYcfZ5T9cxXt3WBYT8npjynOWUc6tr76B820UvoHpMgjYGE/H1iO+fpTZ6Y4IvBSrzMGoKM6pQj+IaNbS8vahFw3mL4Km7O1P9KCeI4ccRlX2fMvJDof3K+w7e1K/U+J00lfnbSkVJYqLKRFdyvL6Ws0w/ycp9ZE7zB2xMTaOaO0cvz9DzYfThoAQBEgaI3ek6et2fp//ioYT8d3ElJ6FzlY9sjXMCIn7lPpq0e1MIrezM9l5OkAvUyINd+1GAV2kG/KJAflGzturJVqsFqAzP0VFzZ07NA6rvHnQqjXf54zPQIPuy5xxWB+/iuAS/D/wHX6bG2I8q/QGeRjCHmgzCfaMcmVhY9kzz/orSl36jjSl4N0mw6f0GuIRm4xtex7OcdaGby7dCEoTiugn+pI6ORiwLbtKC1ny87P0+TNNz5nNIRB4Dg9SUM5+/xdxP1rR+kJpbi7MwSKNMftvl/P0zQepR4L67BOnR1vL4VZBuaK0NS4O0SUo5vJ/w+6gyejVIYyLy6hqkS7xz7w/SIHPO/gnX2jHl3d8epOUF38PvWXa9g9QrSN2ZJ+rQ74J0cpAaeSwtod6MDNJ/Et7ZLv79lxvmOopq6iPe9/AF/DtjHpNddCzBt1zlp/emgRBZhJj2csmrswx10UulLXLtw5bz8in2VtcX6L2LLGwxn2oyotkmscfMYr/PYi/VkHIe3uPaBXrY7yY48eJMV5gM91KTfM4zy05guX2DKvghFXKmOj5j0XkYK1z7Gadoj1/n86MnR1AYJr1l3S0bw5+rxxxDG3240hoAuCdGMh6W4bcrKb2ifj+nwL2UqwFkTV+Nuf5k77ztUrSnqJ7sg5ieLC2dl+M9oZy/HaR1+duf5PjtiiBtFaSe7LniEo5/hmWcRwPYkseTWBSk12KO/Zvv3c8XPelxQVot4liSBrBDynu/ogxN6Hpzb3sF6amIc6YGqX+G8t8pQRNpCdJuUb+rhKMHgSwbRnx/I6VtEpjhtjTi+0muepuOlkt3DiFFkWe3ot+56ECeQdQAVst5XzNznIu5AOfRToaN/L2c11pMO3xJQlrm8kcpdqX/qGfKeejNj455f2vHOD+b+awfZLKN2/sbQq0D94VFPEabnnZezh5/Gp2s2LHpbH7fg/9vHfGbLXl+khaFe7okQROBZvRgpUcBLMcnNPC4oajbEoZAjqtjRx0805vFeLb/lLMRxk1sGlvAEz83xiSJcxr2oBf82ALvoLHC54Vg6DHL2na9aIbA8TfbO3YFVf2sXvEeLjkI6wzWVcx6nE51HEONx/B4ntWMEWPyaar5vzVCewnvOa68YLL8NEFoXkkHpIupA2fEmbSVmup6oGtbL8BvFPu5jqvFLHbxIaZrcoimHhno4vdgezyHrRZ6jy93pSCnzWLeKXrorMtYzzN2/QPUwOCN/mGMAICHGXEcGJeeUAfvdiyHx7LQyvf3D45E3c/PeNazWK+HsLygUQ12bbsNDacPZzC1LKS1UjTcKIZHaADz6X94l/6Uxoj2EDfM/DTrwq9jjp9Cbfls73sMnX8+4f4hOP6epHJVAqhdu7Pi+aBXvIkqT8gBCS/iy3Xc+//Ixa+MfI3LN57claonKmzckB9i1zFl9JyMJgDWbcDsvDBuYETK9WdSS7uPDsgo52KXGrxXNMarY3rippR6+jg1xonsPP7KBj6I+fVy1VnTYSj/4l1fRifbNL5TqO37F9C4ofWNT2gDZ1HND+MXfpKi7TzqOsbWVNwJGHJdgoMCuxC/x/PuSHFmTCnjHqrpBPxSwnX/HuPMTHIC/o8579aU5zqz4D1/Jya/mRxmtcNur5rjGH69OEgfxTgBN8t4/U9ndAJeG3Offw7StIjv4ezatMJDuHn5U8Jz7xDzm/szvLO+QXok5dqXsXySwHDgRmnXq6R03ztFZTuW9shhCeeNqBN11GfbBNUM/CzGmZmVU6k2xvEDOseqtXjkm9TKwg1Kz+bz9qzR++0Xo32c77JHZr7n4lcCqgZrJjjdyimnRdSWk3Y5hhP6hITjy+mjSJ2TUkkBMDRFCGBln1EueUvqL9Vh4x/nStMoB8Uc/yuPlwMiwdImUsHHcrOLX5mnXJ6nKn0lTZ2erjbqP4haDhymzEMu+9bXaDhvV+n+WtioPqSwhDPwGVe9OJXZ9CEUFWgnuYwLtVS6gNPmAqQV0M511vi3pn0eN2NvMRtuUwWuBYdc2lz1g+hT2aJKz3uHaxuBqeUuQU+49oE5y+nQW5mjjra6jiMCaY16GZ14SUN5/+NKe2ZOoFM13N3pqDK1vjRedqWAun/l+A2e53uu/a5eqY6oSvKZMh1B29dR44cwu5ae4yTV/NkKXhOSe1OXvEMwnEQY08W898vdxwP0dJhSvis/X8deNu9OwW9QaCxgb/0hTQP8xU5Dc9jYP+D3cLBi+BS7M90Yk+eDLmIefY2AVoZl8M7IeD4coufluUClBQCmiGIyxEsFfrtfDVXOLDb5OS45xPPODC8771zv+bT/MFFl7RRhCSm/F+11DPPUck/ERRU+LzSldmUj/WFBW/oSmmP/oRBYnlE7SwpY6t1JdXBPmn075vjNRFeaVXshBceSWgsA8LmCAmDbOmj4iL/GPm8HpJz3ois5NdMaXZGdiuG4wRDS3a5tqClJS1mfBf9+xPFqCAUI6YMzqNtQyUfkEOqP8+9ZLnql5CzMKfjbStvyRacXd2fDxyKmuxX4fTeah9dTm4QGe3uS6V0NATCu4O+26eTGjxd/tUtfoQfqKkKV383Q+I8v6H9BUMiBlOJJTr/3WFnejzk+sArvqdFli0vIywz2XDe4VZ8hOc9fm/b+ESnmXx424/vElPq7WJeecF5kbjUEQJGeHL3YqE4uNDhbnnEdNyC1QJJ+nr00bPFzXVvs+0Kq/M1sJNu45LXe0majYeYWPMGYM7BGjNp6hOk5N6f5BXsXzimstX/MKtRo5rHXal3FGjtWx9qQwngpO5C06E2YNhjd2I7aJjqfPGswNNG8yiLgEbF4HBN8Cthe7h4Kg6oIgOHUAqbn+M1udVCQGN45jNJyYkzPjwYZOv0w3XlCwV52uYuamtmRx2jnI258tHcM48D3m88Ipb3GqKANq1hDWtUafsgmbFBNFP5Zhk/XZtkV2egVHdV3WF8vyNl2Nmd6JxQA1XK67VTl86sFHEeYePFyxEvf2xNqcDQ9UvA659GPkIVweSs7cQp2sj9kCC/6StPDJBHO1hPlM5XaC0Yseqe0qbnmb96RBQw5I6x3BwqPl6k5nODybXoCjfHyLHZouVIxD2PqqEDn0P6eZ1RxNMCoiT5PFcj/WjbgPMym6QGT44oYGxw9wsyM+b0qAVAx4H+ZkkNYhCr8aS77ojl3UCvFqID1PcHkRMQmhs+vcunL0eP46c7EL1Qr2COPPd+bPoB6Ar0zFiMNF46MG856Ooe6jd4ZC6n+oKC6i8L+fkoPgYkpIzPkVc7mGM3UYN526SsCoVxPdPUzvFstoE7vl3IO3tedngZ5ZkJZtLKnh5r/UEreWAvxWOb1bde2n6XPDaHqX20BgKEIeMEXZjh3nKtdzHke7nbpSzZja2cElQzOUEHOKMNkyMobGYTQj1z7PR3iCKcM+zRSC3k9Qx7wRH8z4vvuOXwUXTJ+Vw7l+kumphyHin6M67hsG4KPEPexs2ee3cN3/HDO+4BGiiFkOOIxOoSRhT7mHjpontUSAChgOKUezSgAVmX17wZW9JaISgVnH+Lcf+Nqs/wzNJf51FiaKICXU0jBhAl3ss0Cfj+LdaTVNDyokb1y1IO3XPvdlRv4LlZmbJitERpTpZ2cDSbfIsIBu1lhGHMINbElVNXx7E+yQb8Vo00hdPcxCgfshv3bHP6hOMKdomGKY37NJPoPOvgKME3Xfl7gigWvRHGSy7aVNx744Apd80nXOQFFDa4+vNiQ9oNo4zWz8Te7YrvvouEPiFFNF7hsEXZdWZ8aPAEQ5pEWqASBM55mYov3++kueWJZHhBwtWnE/eBaiLLMso33Wjx/Kd/3Upd9jsi2NN/mVale9OO7aqmVBuBc9o0uR7pVn3oZwlpcwUbR5OIDjPLk8WEZv2/JoF5XgncLqNtRNn45PXY1WZjHvqoUWRv2Gk4I0SlUUwBkiWwaKgEgxMdTAAzP4E/A7MFGFYMQHz8BAE9x2vj+SBWBEB9PAeAyCIANVARCdB7VXvZpvZTj69bRu0AsNzZXwCwtzOzyl2JCdCPGeeHV9tc7wO+wvvxHrm3oC+O6/rbeo3kevOv+fAMMQw1g/rgXDOkhLNkP7hnD8zBk5C/6iOWq+sdcG9oWdrOBZx7zC5ZHmGyY1dbKZ7c76OCdbOPadoBC3hhy9ZfE6s9nhFk3w3UMfOnt2sK+MdYdtWBFA03DDXg+Yhre4jWbeWywSx5CRB6vuPbDdyiTT7NTajbPkDZEimHVcazL3Vk+eD+Iq8gSy4DZgRgRW4sd7rt89hkRzzCO7ycs+ykuen0DvOdN+JwLeS9RI1Gfcm2BQAha6zgDtYLLgsftOJu0LPFfK3y9cpYFxz55L3BJ7Ge4q2x4rDeX/saxGUEaYI71C9I/eWwyd0bG/49xOfTwvAFcehvHXuTeeeEx7Ff3Jo/dG6SX+L+/jPTQIM3msSnePa4RpHd4LGqJ9nPNst5HRxy/m79dHKRx3r55L8bsZLyHl8cXuAx4E5fN7uIdn8jrr+Bedv49HBikh4O0xLsWPt8SpG5cMruZqcnkt9J8j3SUyfdQlpHP09y/MKo+oHxOCdLrMUujH55Sn1YP0kUxu/Vib8MJ5txNuMfmCu+8uUE6LeI97s7nXcn8143ZYXmeOW+fai8LHsXaKccH1pEGMIe9AnqvjT3tZEPTs63PXsiaMRvz2MPsHRopoYd7GsRIHtvItd9P8ZPsYXDsL+Y+NnPtVyMew54kzH9dT4MYxmNRe+Zdyx4A4b3Hu/ZhvugZ9+ZvEbkYznrEeX9g3uhhnmNPEvZWiG23MfCN1IDwFxOo/M0xGnndbp72CY0Hoa9Y+2Ai/UdLqeUs5ef+7DG7MDXE5BceD3tX7DJ9I98xvnvWaHdbudK+eXt69wkNC1GTPzNm6gw+/zu83hspmi/m3Z9IrWsl39vzLANMxJptyhQLvX6W+c5g+a1g/cH8kYsitJKuTMg/ai1OhBcPNecN6AwfwPCU4/3rSACgkJ4wKq+d0LSlV8Hs7MXx/A4NBOvaTTPCzeaxlfm/u2s/FzwMmkIFfci1rTkwLCGPPq79rMtx5jmiAkteZyMLz93DHPs6nwFBROfyO8wbD3eVQWXdlWYAnvdYNkw0XMxGC4dyfTX0TNd+We/WmP/PdW17FMK8OpLq62i+J0zRxjqBLTw2nveHZ1jA393M34xlwgo4E9iIHc2InfgMeP4T2MhgZlzq2q/igz0Y9uL/KNMdeb1wkZedYoRs6Pz+jWvb7u1mlhvueWv+HjH6CMvFHJjL2VGi7LH9F+bRbMtrvmLKx27/5c89iVrExp+cFL28epVNgOkJKlI3qij1YgKEO/m0MK/TzfdXR+zMEh673KhrvanahnzDnHezl8cvzbEb+d2bVOs/Z847xpx3p5fHD8yx2/kdzIceMc/3CbNDU7iV+Siq/eD8iN16oE7vG5GX3VL8VH43KaJMTvW2sA7Zld9NMLsHwcxaM0d5DeN26uCCiOO/M9vQ7x5x/HxzPyfyu63M/WC77j4569ARJs+bUs79ojn36ojj2wdpGY8/Yky+07x3PI8mYPi79YL0oXfOdzvDBEja1GFAnWkAoaMkDOncwvTW49n7/Ns71mj+n06n1kuubYedccb5NY5SPir/sLeYSifdC65tCvJY877GMo853rHerm1vvykufkdm3P9V/H8XahAH8/fhluGOjspwpRmorVGbTFxpet9QhQ5jzd8zZgTmsH8i4Z0f7tomHJ3u8i3q2dO1TdbxHdpruLZZdlOokvtcZRyRYY//RZPXuS5/aHU4rwXOubNTzg179RUueuepx41WuqUxR0LT+T+sJ0Nd+9WDd+Y5s837HNgZJkDfhGsMcvnXfa824ay50DZrZOUdRY/yTTy2MW2v1Y2KHqrd7xo7eYzxIYxgw7jF2OwQgOsYn8ITRuV+2cvjk7wXFOhtxsvbnXmv7+URx695H6jk5xg7/ddGwG1k1PqnXPTy5m+a59zAtW12GnrhL6Uggmp9micg7P8TTH6PVrAsNzKq8pMxXvJXzWjJBhwpGGfK4Mmc1xxiTLvnXPKU6e5GaL/h4rfxetwI+Y29xjyd1wF2U559+fdBU6b9OkMA9Hbxc/0H1enQaDj55BMcwtmcggoV4n5W3IGsYKPYiFtc2+pALcY+3JC96RZ812+anmgoj3+S+aPxPM1jTcYPMIrvMeztX6GjMHSyrm8clMtd+uSZ2UYL+ALzx7TfS8w5w0zdmJWSV1i5+ptG1o8CMVwA48u8xyWeD6Cb8RO95fW2R9N+vpHJ2tVZGGy0g7iVd5q8ZxhCoR46hRflrDtDTUOb5ZInifVn3Qh78jhNw04yWt0TAHYS0/bscIe5thmx9xqhnEkAVLpH7uXiN1boW4XGW4mFRaYY4TXSta3s+3dK3NlmTD+skHOptvt5hOPiWxh1OlxDroGNP+wFZrr28QVPG3V8jBEAz1HYLGT5bWLyeMU4jtK0gLme0+s9z1tvG0kcLTFOvUYe+zHVW5TL9/nMzeb8LmY0otnLA6o45rIfynSYy7fSlDUJmjM+Q1fzu2aXf2OXbubdpU0F7mIEVNJ1ohyn/YyZ8YDpsMZQo1qN5fuYuY9MowDdK9wgexgpVwsBUIl5BWjIHxoP/2amUS81au9YIxymufaBM8+a3m688dZP4TDQy8arP8Y0+CVeHk0soy1d26rAUyn5w4a+jTn2lMsWnPK2qTi47zu84wsyjuSEE74WMTUYE6AP3+UNRtsYb/JuoHCYb3o32wFheSsMf/3RG6nJysKI+/RpMM+3kOW+2GgQvXLWnYXG/5I2GW6JKe8kc9huDvOupwGEmuJs49cJF9h9lEJ9eR4fAFYcvb7CjbJLgopWKfDif+oqs7vwXNPId6RNZ9X66abhjfXsNGfU2X8Zh8xoT60P7bbtjBDxbffXjH26G+38pea34d+JRgN4IsdzrkzoqWaYBrRlQuMfbZ53pSeAw3KHFvA+K/jXzDnh0OkMfh7p2s8NwTAelhO7sGA5zvSEcBTrmGvOYoMJx/f9eI+sdecd459JquOLzLVGJDhKQx/JcvoJupjGjO+WsacPbf/QeXuXuU6oNTSmNc7Haa9twga1qAINql8G1aYosKlPpgPnNNcxvLYIzaaR786KMMsIhWmmgMd4trttXGEDxVj1WmzMr3h5jKVjZ4XruLLsUpodYE/2BC+5tpV/nzGVe32en2ep6S6mF/SXvZpl8traVELLJNM7PZwg7HG/Fxizqb+5LphszMWTK2jWvWbMsh2MkLTsbxrTX4zjLFTnT8p5TTTGcAFPlPlxKec/aLThQyOOjzQ9+gt0KvZzbeG9obZyH/+O4zu2S9YvNu+xR9be+Z9sUBuwUGZWQQCU42+YSkGFF/Qrz36tBE97JsVU0yO+4KnIcDAlLRne1eS53PgClns97ssJ92HzaDYmQrNXZjM8E+siOi63zvn80HiuNBUHG5Gu52mK4Y618136dl4Xu3gv9y1G0zmCPf46MbZ8HqDZXGHexeVeLwvN7Hv8H/Xnt/z/NnOvh1B4+WtWrM22g3eDQCNE8oXReJebRodAqG97baA7hUP47OEyYIhY3Nuch2teamz3K/hM/U3bmW867ve9jvwdY2qE5dhRmGYMbmgM0pFBerJAcM7OMXl+t0BedzJIxlU5bezFo3/LHEMwxlRz7PcxeWzBWPWQr3hx5v8wx65NCEyyHOzNQbBx6pckBKQ85M1LQLqGx94N0loR125gIEvIbM4x+IP3bo43vwkDgRBMNdbL7zDvWXY1x3Y0AUrhPWFOwH1Bes18f0DE/I2PYp4/LKvbzO9n8blvNwE24Mve73YJ0kJz/G3G6t/COR4IvBkRpN3MOdNMoM5XvWfFHJA7GJj0LMt+MM890ptj8EcGBdmyvZ2Bc2HdnM/v7XyH+8z5h5rvf26eYQ3/HRVpHHtHRKQVEQCn58jjqiBtU4OGH6Ye3gSYT3vHr4uJ9rOpjylENIjNveO3mjyOjsljECMMw2i2jb3j95g8DvKOHWCO3R0hAK7nMVT0tROe4dKISSpgDiu6Pf8gc3xcRGN83Bz3I/PGB+nPntBs9QTQDt5v1jPC6IqYZ+jPBhWV7yw2wKjfTeSEqzgQHbmt+fywNznrME4ci8PWh6P5Pn1Wsu73NeduaY4fYr7/mokKtNGU5/D7ZRRa7Z6ziHp1HxPGHY+NsV3KcQ6GvE+17DLXcWputVlOVXRzz2sf8juqVk0uftOGcCun0fS0z/CO/4bq30rjxPH5iCrmCHqAfVPsOpogy1zHXYomU22Ef+CXET6Xu1zbhJsPE57hJPon9nBt04mhsv8h4r5fpLq/wnXcPhy/O4vDeysiTIJn6MTdjQ7W1c07+Cef7wXvNx/wHQ9x7fdJ9Ec0vsHf70a/xQr6Y7AMd1ywD2xobNx5IEdrBtI0+ogm3HSWyYX0Bf3Cc6jeyPcxif6HvizrcCehN82517B+HMiybqQK/wCdoUs9R+N5NAPs8uH3cuh6rjfE+xjb0HxvpKrkiPGWBS/CSDo7DnfR+9nvYhwsFtiQUVtcvUKb8lKXvoOuEKIKQ3R5va1wFCKq7VTjLXfGmxqFH3OAISxEfyHY4ydq/EKsGgIgBF7yn7vSEOIR7PUXuviJKQuZbqV6CZPiWhWJELWjEiaAEEIagBBCAkAIIQEghJAAEEJIAAghJACEEBIAQggJACGEBIAQQgJACCEBIISQABBCSAAIISQAhBASAEIICQAhhASAEEICQAghASCEkAAQQkgACCEkAIQQEgBCCAkAIYQEgBBCAkAIIQEghASAEEICQAghASCEkAAQQkgACCEkAIQQEgBCCAkAIYQEgBBCAkAIIQEghJAAEEJIAAghJACEEBIAQggJACGEBIAQQgJACCEBIISQABBCSAAIISQAhBASAEIICQAhhASAEEICQAghASCEkAAQQkgACCEkAIQQEgBCCAkAIYQEgBBCAkAIIQEghJAAEEJIAAghASCEkAAQQkgACCEkAIQQEgBCCAkAIYQEgBBCAkAIIQEghJAAEEJIAAghJACEEBIAQggJACGEBIAQQgJACCEBIISQABBCSAAIISQAhBASAEIICQAhRNX5XwEGAHVg0DudDdzFAAAAAElFTkSuQmCC";UnityLoader.Progress.Styles.Dark.progressLogoUrl=Qt;UnityLoader.Progress.Styles.Light.progressLogoUrl=Qt;if(UnityLoader.SystemInfo.mobile){UnityLoader.SystemInfo.mobile=false;UnityLoader.downloadJob=function(Yt,Zt){var $t=new XMLHttpRequest;$t.open("GET",Zt.parameters.url);$t.responseType="arraybuffer";$t.onload=function(){UnityLoader.Compression.decompress(new Uint8Array($t.response),function(_t){Zt.complete(_t)})};if(Zt.parameters.onprogress)$t.addEventListener("progress",Zt.parameters.onprogress);if(Zt.parameters.onload)$t.addEventListener("load",Zt.parameters.onload);$t.send()}}UnityLoader.processWasmFrameworkJob=function(au,bu){var cu=UnityLoader.Job.result(au,"downloadWasmFramework");UnityLoader.loadCode(au,cu,function(du,eu){au["mainScriptUrlOrBlob"]=eu;if(au.isModularized){UnityLoader[du]=UnityModule}au["instantiateWasm"]=function(fu,gu){Ut(au,fu["env"]);if(au["wasmBinary"]){WebAssembly.instantiate(au["wasmBinary"],fu).then(function(hu){gu(hu.instance,hu.module)})}else{console.info("MiaokitLoader.InitUnity.instantiateWasm error!")}return{}};UnityLoader[du](au);bu.complete()},{Module:au,url:au["wasmFrameworkUrl"],isModularized:au.isModularized})};var Rt=null;var St=null;var Tt={};function Ut(iu,ju){Object["assign"](ju,{_Init:function(ku,lu){Pt["WASM"]["m_pMemory"]=Pt["WASM"]["m_pMemory"]||St.Module.wasmMemory;Vt(iu,Tt,ku,lu);Wt(St,Tt);Rt.OnEngineLoad(Tt)},_RenderingEvent:function(mu){Rt.OnRenderingEvent(mu)}});Pt["GL"]=ju}function Vt(nu,ou,pu,qu){var ru=Pt.WASM.GetString(pu,qu);var su=JSON.parse(ru);var tu=function(xu){var yu=function(){var zu=Array.prototype.slice.call(arguments);zu.unshift(yu["m_nAddr"]);return yu["m_pFunc"].apply(this,zu)};yu["m_pFunc"]=nu[xu.Call];yu["m_nAddr"]=xu.Addr;ou[xu.Name]=yu};for(var uu=0,vu=su.List;uu<vu.length;uu++){var wu=vu[uu];tu(wu)}}function Wt(Au,Bu){Bu["APP_PLUGIN_TYPE"]=function(){return 1};Bu["APP_MEM_TYPE"]=function(){return 1};Bu["memory"]=function(Cu){var Du=32*1024*1024;var Eu=Cu._memalign(16,Du);var Fu=Du-Eu;Cu._free(Eu);var Gu=Cu._memalign(16,Fu+Du);if(Gu!==Eu){console.error("miaokit.prememory: addr error",Eu,Gu);return}if(Gu+Fu+Du!==67108864){console.error("miaokit.prememory: addr end error",Gu+Fu+Du);return}Bu["APP_MEM_RESERVE"]=function(){return Gu};return Cu.wasmMemory}(St.Module);Bu["APP_MEM_MALLOC"]=function(Hu){return St.Module._memalign(16,Hu)};Bu["APP_MEM_FREE"]=function(Iu){St.Module._free(Iu)};Bu["APP_MEM_BASE"]=function(){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0};Bu["APP_MEM_GROW"]=function(Ju){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0};Bu["APP_MEM_RECYCLE"]=function(Ku){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0}}function Xt(Lu){Rt=Lu;St=UnityLoader.instantiate("unityContainer",Pt["m_pConfig"]["UNITY"])}Pt["WASM"]=Pt["WASM"]||{};Pt["WASM"]["LoadEngine"]=Xt;return[]});MiaokitMerge(function(Mu){var Nu=undefined;var Ou=new TextDecoder("utf-8");var Pu=new TextEncoder;function Qu(Ru){if(!Nu||Mu["WASM"].m_pMemory.buffer.byteLength!==Nu[0].byteLength){if(!Nu){Nu=[]}Nu[0]=new Int8Array(Mu["WASM"].m_pMemory.buffer);Nu[1]=new Uint8Array(Mu["WASM"].m_pMemory.buffer);Nu[2]=new Int16Array(Mu["WASM"].m_pMemory.buffer);Nu[3]=new Uint16Array(Mu["WASM"].m_pMemory.buffer);Nu[4]=new Int32Array(Mu["WASM"].m_pMemory.buffer);Nu[5]=new Uint32Array(Mu["WASM"].m_pMemory.buffer);Nu[6]=new Float32Array(Mu["WASM"].m_pMemory.buffer);Nu[7]=new Float64Array(Mu["WASM"].m_pMemory.buffer)}return Nu[Ru]}Mu["WASM"]=Mu["WASM"]||{};Mu["WASM"]["HEAP8"]=function(Su,Tu){if(Su===void 0){Su=0}if(Tu===void 0){Tu=0}var Uu=Qu(0);if(Su&&Tu){return Uu.subarray(Su,Su+Tu)}else{return Uu}};Mu["WASM"]["HEAPU8"]=function(Vu,Wu){if(Vu===void 0){Vu=0}if(Wu===void 0){Wu=0}var Xu=Qu(1);if(Vu&&Wu){return Xu.subarray(Vu,Vu+Wu)}else{return Xu}};Mu["WASM"]["HEAP16"]=function(Yu,Zu){if(Yu===void 0){Yu=0}if(Zu===void 0){Zu=0}var $u=Qu(2);if(Yu&&Zu){return $u.subarray(Yu/2,(Yu+Zu)/2)}else{return $u}};Mu["WASM"]["HEAPU16"]=function(_u,av){if(_u===void 0){_u=0}if(av===void 0){av=0}var bv=Qu(3);if(_u&&av){return bv.subarray(_u/2,(_u+av)/2)}else{return bv}};Mu["WASM"]["HEAP32"]=function(cv,dv,ev){if(cv===void 0){cv=0}if(dv===void 0){dv=0}var fv=Qu(4);if(cv&&dv){if(ev){return fv.slice(cv/4,(cv+dv)/4)}else{return fv.subarray(cv/4,(cv+dv)/4)}}else{return fv}};Mu["WASM"]["HEAPU32"]=function(gv,hv){if(gv===void 0){gv=0}if(hv===void 0){hv=0}var iv=Qu(5);if(gv&&hv){return iv.subarray(gv/4,(gv+hv)/4)}else{return iv}};Mu["WASM"]["HEAPF32"]=function(jv,kv,lv){if(jv===void 0){jv=0}if(kv===void 0){kv=0}var mv=Qu(6);if(jv&&kv){if(lv){return mv.slice(jv/4,(jv+kv)/4)}else{return mv.subarray(jv/4,(jv+kv)/4)}}else{return mv}};Mu["WASM"]["HEAPF64"]=function(nv,ov){if(nv===void 0){nv=0}if(ov===void 0){ov=0}var pv=Qu(7);if(nv&&ov){return pv.subarray(nv/8,(nv+ov)/8)}else{return pv}};Mu["WASM"]["GetString"]=function(qv,rv){if(!rv){var sv=Mu["WASM"].HEAPU8();var tv=qv;while(0!==sv[tv++]);rv=tv-qv-1}var uv=Mu["WASM"].HEAPU8(qv,rv);var vv=Ou.decode(uv);return vv};Mu["WASM"]["SetString"]=function(wv,xv){var yv=Pu.encode(xv);var zv=Mu["WASM"].HEAPU8(wv,yv.byteLength);zv.set(yv)};Mu["WASM"]["EncodeString"]=function(Av){return Pu.encode(Av)};Mu["WASM"]["m_pMemory"]=null;return[]});