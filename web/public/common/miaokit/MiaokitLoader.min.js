var MiaokitModule=function(a,b){var c=this;c["m_pConfigPath"]=b;c["m_pConfig"]={ENGINE:a};c["Merge"](c);c["Preload"]()};var MiaokitMerge=function(d){var e=[];d["Merge"]=d["Merge"]||function(f){for(var g=0,h=e;g<h.length;g++){var i=h[g];var j=i(f);if(j){for(var k=0,l=j;k<l.length;k++){var m=l[k];f[m._name]=m}}}};return function(n){e.push(n)}}(MiaokitModule.prototype);MiaokitMerge(function(o){var p=undefined;var q=undefined;var r={};var s=function(u,v){if(v===void 0){v=undefined}var w=0;this.length=u(-1);this[Symbol.iterator]=function(){return{next:function(){var x=u(w);if(x){var y=p(x);w=v?w+1:y.m_nObject;return{value:y,done:false}}return{value:undefined,done:true}}}}};r["Transform"]=function(z){Object.defineProperty(z,"position",{get:function(){var A=this["_GetPosition"]()/4;var B=o["WASM"].HEAPF32();return{x:B[A],y:B[A+1],z:B[A+2]}},set:function(C){this["_SetPosition"](C.x,C.y,C.z)}});Object.defineProperty(z,"euler",{get:function(){var D=this["_GetEuler"]()/4;var E=o["WASM"].HEAPF32();return{x:E[D],y:E[D+1],z:E[D+2]}},set:function(F){this["_SetEuler"](F.x,F.y,F.z)}});Object.defineProperty(z,"rotation",{get:function(){var G=this["_GetRotation"]()/4;var H=o["WASM"].HEAPF32();return{x:H[G],y:H[G+1],z:H[G+2],w:H[G+3]}},set:function(I){this["_SetRotation"](I.x,I.y,I.z,I.w)}});Object.defineProperty(z,"scale",{get:function(){var J=this["_GetScale"]()/4;var K=o["WASM"].HEAPF32();return{x:K[J],y:K[J+1],z:K[J+2]}},set:function(L){this["_SetScale"](L.x,L.y,L.z)}});Object.defineProperty(z,"localPosition",{get:function(){var M=this["_GetLocalPosition"]()/4;var N=o["WASM"].HEAPF32();return{x:N[M],y:N[M+1],z:N[M+2]}},set:function(O){this["_SetLocalPosition"](O.x,O.y,O.z)}});Object.defineProperty(z,"localEuler",{get:function(){var P=this["_GetLocalEuler"]()/4;var Q=o["WASM"].HEAPF32();return{x:Q[P],y:Q[P+1],z:Q[P+2]}},set:function(R){this["_SetLocalEuler"](R.x,R.y,R.z)}});Object.defineProperty(z,"localRotation",{get:function(){var S=this["_GetLocalRotation"]()/4;var T=o["WASM"].HEAPF32();return{x:T[S],y:T[S+1],z:T[S+2],w:T[S+3]}},set:function(U){this["_SetLocalRotation"](U.x,U.y,U.z,U.w)}});Object.defineProperty(z,"localScale",{get:function(){var V=this["_GetLocalScale"]()/4;var W=o["WASM"].HEAPF32();return{x:W[V],y:W[V+1],z:W[V+2]}},set:function(X){this["_SetLocalScale"](X.x,X.y,X.z)}});Object.defineProperty(z,"right",{get:function(){var Y=this["_GetRight"]()/4;var Z=o["WASM"].HEAPF32();return{x:Z[Y],y:Z[Y+1],z:Z[Y+2]}},set:function($){this["_SetRight"]($.x,$.y,$.z)}});Object.defineProperty(z,"up",{get:function(){var _=this["_GetUp"]()/4;var aa=o["WASM"].HEAPF32();return{x:aa[_],y:aa[_+1],z:aa[_+2]}},set:function(){var ba=this["_SetUp"]()/4;var ca=o["WASM"].HEAPF32();return{x:ca[ba],y:ca[ba+1],z:ca[ba+2]}}});Object.defineProperty(z,"forward",{get:function(){var da=this["_GetForward"]()/4;var ea=o["WASM"].HEAPF32();return{x:ea[da],y:ea[da+1],z:ea[da+2]}},set:function(){var fa=this["_SetForward"]()/4;var ga=o["WASM"].HEAPF32();return{x:ga[fa],y:ga[fa+1],z:ga[fa+2]}}});Object.defineProperty(z,"regionPosition",{get:function(){var ha=this["_GetRegionPosition"]()/4;var ia=o["WASM"].HEAPF32();return{x:ia[ha],y:ia[ha+1],z:ia[ha+2]}}});z["Rotate"]=function(ja,ka){this["_Rotate"](ja.x,ja.y,ja.z,ka)};z["Rotate2"]=function(la,ma,na){this["_Rotate2"](la.x,la.y,la.z,ma,na)};z["Translate"]=function(oa,pa){this["_Translate"](oa.x,oa.y,oa.z,pa)};z["TransformPoint"]=function(qa){var ra=this["_TransformPoint"](qa.x,qa.y,qa.z)/4;var sa=o["WASM"].HEAPF32();return{x:sa[ra],y:sa[ra+1],z:sa[ra+2]}}};r["GameObject"]=function(ta){Object.defineProperty(ta,"name",{get:function(){if(!this._name){var ua=this._GetName(0);var va=this._GetName(1);this._name=o["WASM"].GetString(va,ua)}return this._name}});Object.defineProperty(ta,"transform",{get:function(){return p(this["_GetTransform"]())}});Object.defineProperty(ta,"mesh",{get:function(){return p(this["_GetMesh"]())},set:function(wa){this["_SetMesh"](wa.m_nObject)}});Object.defineProperty(ta,"children",{get:function(){var xa=this;return new s(function(ya){return xa._IterChild(ya)},true)}});Object.defineProperty(ta,"parent",{get:function(){return p(this["_GetParent"]())}});Object.defineProperty(ta,"data",{get:function(){return p(this["_GetUserData"]())},set:function(za){}});Object.defineProperty(ta,"enableCollider",{set:function(Aa){this["_EnableCollider"](Aa)}});Object.defineProperty(ta,"active",{set:function(Ba){this["_Active"](Ba)}});Object.defineProperty(ta,"highlight",{set:function(Ca){this["_Highlight"](Ca)}});Object.defineProperty(ta,"transparent",{set:function(Da){this["_Transparent"](Da)}});ta["Destory"]=function(){this["_Destory"]()};o["GameObject"]=function(){return p(ta._GameObject())}};r["Miaokit"]=function(Ea){Ea["LoadTile"]=function(Fa){var Ga=this["_Malloc"](Fa.byteLength);if(Ga){o["WASM"]["HEAPU8"](Ga,Fa.byteLength).set(new Uint8Array(Fa));var Ha=this["_LoadTile"](Ga,Fa.byteLength);var Ia=p(Ha);return Ia}return null};Ea["Analyze"]=function(Ja){var Ka=this["_Analyze"]();var La=o["WASM"].HEAP32()[Ka/4];var Ma=o["WASM"].GetString(Ka+4,La);try{var Na=JSON.parse(Ma);var Oa=q(Ja).concat(Na);return Oa}catch(Pa){console.log(Ma)}return null};Ea["PickEntity"]=function(Qa){return p(this["_PickEntity"](Qa))};Ea["GetScene"]=function(Ra){return p(this["_GetScene"](Ra))};Ea["WorldToScreenPoint"]=function(Sa){var Ta=this["_WorldToScreenPoint"](Sa.x,Sa.y,Sa.z)/4;var Ua=o["WASM"].HEAPF32();return{x:Ua[Ta],y:Ua[Ta+1],z:Ua[Ta+2]}};Ea["ScreenPointToRay"]=function(Va){var Wa=this["_ScreenPointToRay"](Va.x,Va.y,Va.z)/4;var Xa=o["WASM"].HEAPF32();return{m_mOrigin:{x:Xa[Wa],y:Xa[Wa+1],z:Xa[Wa+2]},m_mDirection:{x:Xa[Wa+4],y:Xa[Wa+5],z:Xa[Wa+6]}}};Object.defineProperty(Ea,"camera",{get:function(){return p(this["_GetCamera"]())}});Object.defineProperty(Ea,"cameraMode",{set:function(Ya){this["_SetCameraMode"](Ya)}});Object.defineProperty(Ea,"gis",{get:function(){if(!this._gis){this._gis=r["Gis"]["g_pIns"]}return this._gis}});Object.defineProperty(Ea,"progress",{get:function(){return this["_GetProgress"]()}})};r["Mesh"]=function(Za){Za["SetVertices"]=function($a,_a){this["m_aVertex"]=this["m_aVertex"]||[];this["m_aVertex"].push({m_pArray:_a,m_nSlot:this["_SlotLut"][$a],m_nItemSize:this["_SizeLut"][$a]})};Za["SetIndices"]=function(ab,bb,cb){this["m_aIndex"]=this["m_aIndex"]||[];this["m_aIndex"][ab]={m_pArray:bb,m_nItemSize:cb}};Za["Apply"]=function(){var db=this["m_aVertex"];var eb=this["m_aIndex"];if(!db||!eb){return}var fb=2+2*db.length+3*eb.length;var gb=this._CreateBuffer(fb);var hb=o["WASM"]["HEAP32"](gb,fb*4);var ib=0;hb[ib++]=db.length;hb[ib++]=eb.length;for(var jb=0;jb<db.length;jb++){hb[ib++]=db[jb].m_nSlot;hb[ib++]=db[jb].m_pArray.length/db[jb].m_nItemSize}for(var jb=0;jb<eb.length;jb++){hb[ib++]=0;hb[ib++]=0;hb[ib++]=eb[jb].m_pArray.length}this._CreateBuffer(0);for(var jb=0;jb<db.length;jb++){var kb=db[jb].m_pArray;var lb=this._GetVertexBuffer(jb);var mb=o["WASM"]["HEAPF32"](lb,kb.length*4);mb.set(kb)}for(var jb=0;jb<eb.length;jb++){var kb=eb[jb].m_pArray;var lb=this._GetIndexBuffer(jb);var mb=o["WASM"]["HEAP32"](lb,kb.length*4);mb.set(kb)}this._Apply();this["m_aVertex"]=undefined;this["m_aIndex"]=undefined};Za["_SlotLut"]={position:0,normal:1,uv:2,color:3,tangent:4,uv2:9,uv3:10,uv4:11,uv5:12,uv6:13,uv7:14,uv8:15};Za["_SizeLut"]={position:3,normal:3,uv:2,color:4,tangent:4,uv2:2,uv3:2,uv4:2,uv5:2,uv6:2,uv7:2,uv8:2};Object.defineProperty(Za,"position",{set:function(nb){this.SetVertices("position",nb)}});Object.defineProperty(Za,"normal",{set:function(ob){this.SetVertices("normal",ob)}});Object.defineProperty(Za,"uv",{set:function(pb){this.SetVertices("uv",pb)}});Object.defineProperty(Za,"triangles",{set:function(qb){this.SetIndices(0,qb)}});Object.defineProperty(Za,"material",{set:function(rb){this.SetMaterial(0,rb)}});o["Mesh"]=function(){return p(Za._Mesh())}};r["Texture2D"]=function(sb){sb["SetImageData"]=function(tb){var ub=this._CreateBuffer(tb.byteLength);if(ub){o["WASM"]["HEAPU8"](ub,tb.byteLength).set(new Uint8Array(tb));this._Apply()}};sb["Load"]=function(vb){var wb=this;o["Fetch"](vb,function(xb){if(xb){wb.SetImageData(xb)}})};o["Texture2D"]=function(yb){var zb=p(sb._Texture2D());if(yb){if("string"===typeof yb){this.Load(yb)}else{this.SetImageData(yb)}}return zb}};r["Material"]=function(Ab){if("Sisyphus"===o["m_pConfig"]["ENGINE"]){o["ShaderLab"].ExpandMaterial(Ab)}Ab["GetTexture"]=function(){return p(this["_GetTexture"]())};Ab["SetTexture"]=function(Bb){this["_SetTexture"](Bb.m_nObject)};o["Material"]=function(Cb){if(Cb===void 0){Cb=undefined}var Db=null;if(Cb){var Eb=o["ShaderLab"]["Pipeline"]["InternalShader"];var Fb=Eb[0];Eb[0]=Cb;Db=p(Ab._Material());Eb[0]=Fb}else{Db=p(Ab._Material())}return Db}};r["Tile"]=function(Gb){Object.defineProperty(Gb,"scenes",{get:function(){var Hb=this;return new s(function(Ib){return Hb._IterWork(Ib)})}});Object.defineProperty(Gb,"object3D",{get:function(){if(undefined===this._object3D){var Jb=this._GetObject(this.m_nObject);if(0===Jb){this._object3D=null;return null}this._object3D=p(Jb)}return this._object3D}})};r["Scene"]=function(Kb){Kb["GetLayer"]=function(Lb){return p(this["_GetLayer"](Lb))};Object.defineProperty(Kb,"id",{get:function(){if(!this._id){var Mb=this._GetID(0);var Nb=this._GetID(1);this._id=o["WASM"].GetString(Nb,Mb)}return this._id}});Object.defineProperty(Kb,"layers",{get:function(){var Ob=this;return new s(function(Pb){return Ob._IterLayer(Pb)})}});Object.defineProperty(Kb,"object3D",{get:function(){if(undefined===this._object3D){var Qb=this._GetObject(this.m_nObject);if(0===Qb){this._object3D=null;return null}this._object3D=p(Qb)}return this._object3D}});Object.defineProperty(Kb,"viewState",{get:function(){return{m_mTarget:{x:0,y:0,z:0},m_nPitch:45,m_nYaw:0,m_nDistance:60,m_mOrthoTarget:{x:0,y:0,z:0},m_nOrthoScaled:0,m_nOrthoRotate:0}}});Object.defineProperty(Kb,"binding",{get:function(){return p(this._GetBinding())}})};r["Layer"]=function(Rb){Object.defineProperty(Rb,"id",{get:function(){if(!this._id){var Sb=this._GetID(0);var Tb=this._GetID(1);this._id=o["WASM"].GetString(Tb,Sb)}return this._id}});Object.defineProperty(Rb,"sites",{get:function(){var Ub=this;return new s(function(Vb){return Ub._IterSite(Vb)})}});Object.defineProperty(Rb,"object3D",{get:function(){if(undefined===this._object3D){var Wb=this._GetObject(this.m_nObject);if(0===Wb){this._object3D=null;return null}this._object3D=p(Wb)}return this._object3D}});Object.defineProperty(Rb,"viewState",{get:function(){var Xb=this["_GetViewState"]();if(0<Xb){var Yb=o["WASM"]["HEAPF32"](Xb,4*11);var Zb=0;return{m_mTarget:{x:Yb[Zb++],y:Yb[Zb++],z:Yb[Zb++]},m_nPitch:Yb[Zb++],m_nYaw:Yb[Zb++],m_nDistance:Yb[Zb++],m_mOrthoTarget:{x:Yb[Zb++],y:Yb[Zb++],z:Yb[Zb++]},m_nOrthoScaled:Yb[Zb++],m_nOrthoRotate:Yb[Zb++]}}return null}})};r["Attachment"]=function($b){Object.defineProperty($b,"entityType",{get:function(){return this._GetEntityType()}});Object.defineProperty($b,"secondType",{get:function(){return this._GetSecondType()}});Object.defineProperty($b,"flag",{get:function(){return this._GetFlag()}});Object.defineProperty($b,"object3D",{get:function(){return p(this._GetObject())}});Object.defineProperty($b,"viewState",{get:function(){var _b=this["_GetViewState"]();if(0<_b){var ac=o["WASM"]["HEAPF32"](_b,4*11);var bc=0;var cc={m_mTarget:{x:ac[bc++],y:ac[bc++],z:ac[bc++]},m_nPitch:ac[bc++],m_nYaw:ac[bc++],m_nDistance:ac[bc++],m_mOrthoTarget:{x:ac[bc++],y:ac[bc++],z:ac[bc++]},m_nOrthoScaled:ac[bc++],m_nOrthoRotate:ac[bc++]};console.log("attachment view:",cc);return cc}else{console.log("attachment view: null")}return null}})};r["Site"]=function(dc){Object.defineProperty(dc,"id",{get:function(){if(!this._id){var ec=this._GetID(0);var fc=this._GetID(1);this._id=o["WASM"].GetString(fc,ec)}return this._id}});Object.defineProperty(dc,"layer",{get:function(){return p(this["_Layer"]())}});Object.defineProperty(dc,"scene",{get:function(){return p(this["_Scene"]())}});Object.defineProperty(dc,"type",{get:function(){return this["_Type"]()}});Object.defineProperty(dc,"number",{get:function(){return this["_Number"]()}});Object.defineProperty(dc,"position",{get:function(){var gc=this["_Position"]()/4;var hc=o["WASM"].HEAPF32();return{x:hc[gc],y:hc[gc+1],z:hc[gc+2]}}})};r["Prefab"]=function(ic){ic["Instantiate"]=function(){return p(this["_Instantiate"]())};o["LoadPrefab"]=function(jc,kc){o["Fetch"](jc,function(lc){var mc=null;if(lc){var nc=ic._Prefab();var oc=p(nc);var pc=oc.CreateBuffer(lc.byteLength);if(pc){o["WASM"]["HEAPU8"](pc,lc.byteLength).set(new Uint8Array(lc));oc.Apply();mc=oc}}kc(mc)})}};r["Gis"]=function(qc){qc["Update"]=function(rc,sc,tc){return this["_Update"](rc,sc,tc)};qc["AddSvetile"]=function(uc){var vc=o["WASM"]["EncodeString"](uc.m_pUrl);var wc=this["_CreateSvetileDesc"](vc.byteLength);var xc=o["WASM"]["HEAPU32"](wc,4*8);xc[0]=uc.m_nID;xc[1]=uc.m_nFlags;o["WASM"]["HEAPU8"](xc[2],vc.byteLength).set(vc,0);xc[3]=0;xc[4]=o["WASM"]["RegisterDelegate"](function(zc,Ac){uc.OnActive(p(zc),0<Ac)});var yc=o["WASM"]["HEAPF32"](wc+20,16);yc[0]=uc.m_mLngLat.x;yc[1]=uc.m_mLngLat.y;yc[2]=uc.m_mSize.x;yc[3]=uc.m_mSize.y;this["_AddSvetile"](wc)};qc["AddMapbox"]=function(Bc){var Cc=this["_GetMapboxDesc"]();var Dc=o["WASM"]["HEAPF32"](Cc,40);Dc[0]=Bc.m_mOffset.x;Dc[1]=Bc.m_mOffset.y;Dc[2]=Bc.m_mOffset.z;Dc[3]=Bc.m_mScale.x;Dc[4]=Bc.m_mScale.y;Dc[5]=Bc.m_mScale.z;Dc[6]=Bc.m_mLngLat.x;Dc[7]=Bc.m_mLngLat.y;Dc[8]=Bc.m_mSize.x;Dc[9]=Bc.m_mSize.y;this["_AddMapbox"](Cc)};qc["AddGameObject"]=function(Ec,Fc,Gc){this["_AddGameObject"](Ec.m_nObject,Fc,Gc)};Object.defineProperty(qc,"imageServer",{set:function(Hc){if(!Hc){Hc="http://t%d.tianditu.gov.cn/DataServer?T=vec_c&tk=fb14b0853d59b619e18c259898bd0d4d&x=%d&y=%d&l=%d"}var Ic=this["_GetServer"](1);o["WASM"].SetString(Ic,Hc)}});Object.defineProperty(qc,"terrainServer",{set:function(Jc){if(!Jc){Jc="https://t%d.tianditu.gov.cn/dem_sjk/DataServer?T=ele_c&tk=fb14b0853d59b619e18c259898bd0d4d&x=%d&y=%d&l=%d"}var Kc=this["_GetServer"](0);o["WASM"].SetString(Kc,Jc)}})};r["Dioramas3MX"]=function(Lc){Lc["_Load3MX"]=function(Mc,Nc,Oc){var Pc=this;var Qc=Pc.m_pFileLut[Mc];var Rc=Qc.m_pPath+Qc.m_aFile[Nc];o["Request"]("GET","arraybuffer",Rc,null,null,function(Sc){if(!Sc){return}var Tc=new Uint32Array(Sc,0,2);if(1113083187===Tc[0]){var Uc=Tc[1]>>8;var Vc=9+Uc;var Wc=Sc.byteLength-Vc;var Xc=new Uint8Array(Sc,9,Uc);var Yc=Pc.m_pTextDecoder.decode(Xc);var Zc=JSON.parse(Yc);var $c={m_pPath:Rc.substring(0,Rc.lastIndexOf("/")+1),m_aFile:[]};var _c=[];var ad=[];var bd=Zc.resources;var cd=0;for(var dd=0;dd<bd.length;dd++){_c.push(dd);if("textureBuffer"===bd[dd].type){_c.push(0);ad.push(dd);if("jpg"===bd[dd].format){_c.push(0)}else if("png"===bd[dd].format){_c.push(1)}else{_c.push(1e4)}}else if("geometryBuffer"===bd[dd].type){_c.push(1);if("ctm"===bd[dd].format){_c.push(0)}else{_c.push(1e4)}}else{_c.push(1e4);_c.push(1e4)}_c.push(bd[dd].size);_c.push(cd);cd+=bd[dd].size;_c.push(1e4);if(bd[dd].texture){for(var ed=0;ed<bd.length;ed++){if(bd[dd].texture===bd[ed].id){_c[_c.length-1]=ed;break}}}}var fd=[];var gd=Zc.nodes;for(var dd=0;dd<gd.length;dd++){var hd=gd[dd];var id=hd.bbMax[0]-hd.bbMin[0];var jd=hd.bbMax[1]-hd.bbMin[1];var kd=hd.bbMax[2]-hd.bbMin[2];var ld=Math.sqrt(id*id+jd*jd+kd*kd);fd.push(Math.floor(parseInt(hd.bbMin[0]+hd.bbMax[0])*.5*100));fd.push(Math.floor(parseInt(hd.bbMin[1]+hd.bbMax[1])*.5*100));fd.push(Math.floor(parseInt(hd.bbMin[2]+hd.bbMax[2])*.5*100));fd.push(Math.floor(ld*100));fd.push(Math.floor(hd.maxScreenDiameter));var md=hd.children?hd.children.length:0;if(0<md){fd.push($c.m_aFile.length);for(var ed=0;ed<md;ed++){$c.m_aFile.push(hd.children[ed])}fd.push($c.m_aFile.length)}else{fd.push(-1);fd.push(-1)}var nd=hd.resources?hd.resources.length:0;if(0<nd){fd.push(ad.length);for(var ed=0;ed<nd;ed++){for(var od=0;od<bd.length;od++){if(hd.resources[ed]===bd[od].id){ad.push(od);break}}}fd.push(ad.length)}else{fd.push(-1);fd.push(-1)}}var pd=4+9*gd.length+6*ad.length;var qd=4*pd;var rd=qd+Wc;var sd=Pc["_CreateBuffer"](rd);if(sd){var td=o["WASM"]["HEAP32"](sd,qd);td[0]=qd;td[1]=gd.length;td[2]=ad.length;td[3]=Pc.m_pFileLut.length;td.set(fd,4);var ud=4+fd.length;for(var dd=0;dd<ad.length;dd++){var vd=6*ad[dd];for(var ed=0;ed<6;ed++){td[ud++]=_c[vd++]}}var wd=o["WASM"]["HEAPU8"](sd+qd,Wc);wd.set(new Uint8Array(Sc,Vc,Wc));Pc["_Dispose"](Oc)}Pc.m_pFileLut.push($c)}})};Lc["Update"]=function(){return this["_Update"]()};Object.defineProperty(Lc,"object3D",{get:function(){return p(this["_GetObject"]())}});o["Dioramas3MX"]=function(xd,yd){var zd=p(Lc._Dioramas3MX());zd.m_pFileLut=[];zd.m_pTextDecoder=new TextDecoder("utf-8");if(yd){if(yd.m_pGis){yd.m_pGis.AddGameObject(zd.object3D,yd.m_mLngLat.x,yd.m_mLngLat.y);zd.object3D.transform.Translate(yd.m_mOffset,1);zd.object3D.transform.Rotate({x:0,y:0,z:0},1)}}o["Request"]("GET","json",xd,null,null,function(Ad){zd["m_pMeta"]=Ad;var Bd={m_pPath:xd.substring(0,xd.lastIndexOf("/")+1),m_aFile:[]};var Cd=[0];for(var Dd=0;Dd<Ad.layers.length;Dd++){if("meshPyramid"===Ad.layers[Dd].type){Cd.push(Dd);Cd.push(Bd.m_aFile.length);Bd.m_aFile.push(Ad.layers[Dd].root)}}Cd[0]=Bd.m_aFile.length;var Ed=zd["_CreateBuffer"](4*Cd.length);var Fd=o["WASM"]["HEAP32"](Ed,4*Cd.length);Fd.set(Cd);zd["_Initialize"](Ed);zd.m_pFileLut.push(Bd)});return zd}};function t(Gd,Hd,Id){p=Hd;q=Id;for(var Jd=0,Kd=Gd;Jd<Kd.length;Jd++){var Ld=Kd[Jd];if(Ld){var Md=Ld.prototype;if(r[Md._type_name]){r[Md._type_name](Md)}if("Miaokit"===Md._type_name){o["Miaokit"]=new Ld(0,0)}else if("Gis"===Md._type_name){r["Gis"]["g_pIns"]=new Ld(0,0)}}}}o["WASM"]=o["WASM"]||{};o["WASM"]["LoadClass"]=t;return[]});MiaokitMerge(function(Nd){Nd["m_pLogo"]=null;var Od=undefined;var Pd=false;var Qd=false;function Rd(){Nd["Track"]("Preload");Nd["Request"]("GET","json",Nd["m_pConfigPath"],null,null,function(Ud){if(!Ud){Nd["Track"]("�����ļ�����",3);return}Nd["m_pConfig"]=Ud;Nd["Fetch"](Ud.MODULE,function(Xd){if(Od){Od(Xd)}else{Od=Xd}});if(Ud.SVE){var Vd=function(Yd){var Zd=Ud.SVE[Yd];Zd.m_pData=null;Zd.m_pTile=null;if(true===Zd.m_bPreload){Nd["Fetch"](Zd.m_pProject,function($d){Zd.m_pData=$d;if(Qd&&$d){Zd.m_pTile=Nd["Miaokit"]["LoadTile"](Zd.m_pData);Zd.m_pData=null;Nd["App"]["ActiveTile"](Zd)}})}};for(var Wd=0;Wd<Ud.SVE.length;Wd++){Vd(Wd)}}if(Nd["App"]&&Nd["App"].m_pProject){Nd["App"]["Preload"]()}else{Pd=true}})}function Sd(_d,ae){Nd["Track"]("LoadEngine");if(Pd){Nd["App"]["Preload"]();Pd=false}Nd["WASM"]["LoadEngine"]({OnEngineLoad:function(be){Nd["Track"]("LoadEngine End");if(Od){Nd["Track"]("LoadMiaokit");Nd["WASM"]["LoadMiaokit"](Od,be,function(){_d();Qd=true;Td()})}else{Nd["Track"]("LoadMiaokit Delay");Od=function(ce){Nd["Track"]("LoadMiaokit");Nd["WASM"]["LoadMiaokit"](ce,be,function(){_d();Qd=true;Td()})}}},OnRenderingEvent:function(de){if(Qd){ae(de)}}})}function Td(){Nd["Track"]("LoadMiaokit End");var ee=Nd["m_pConfig"]["SVE"];if(ee){for(var fe=0,ge=ee;fe<ge.length;fe++){var he=ge[fe];if(true===he.m_bPreload){if(null===he.m_pTile&&null!==he.m_pData){he.m_pTile=Nd["Miaokit"]["LoadTile"](he.m_pData);he.m_pData=null;Nd["App"]["ActiveTile"](he)}}}}}Rd["_name"]="Preload";Sd["_name"]="Load";return[Rd,Sd]});MiaokitMerge(function(ie){var je=function(){function le(){}le.Clamp=function(me,ne,oe){if(me>oe){return oe}if(me<ne){return ne}return me};return le}();var ke=function(){function pe(qe,re,se){this.x=0;this.y=0;this.z=0;this.x=qe;this.y=re;this.z=se}pe.Scale=function(te,ue){return{x:ue.x*te,y:ue.y*te,z:ue.z*te}};return pe}();je["_name"]="Mathf";ke["_name"]="Vector3";return[je,ke]});MiaokitMerge(function(ve){var we=null;var xe=null;var ye=null;var ze=[null];var Ae=[null];var Be=[null];var Ce=1;var De=0;var Ee=[undefined];var Fe=null;var Ge=null;function He(Se){Se["isnanf"]=isNaN;Se["isinff"]=isFinite;Se["powf"]=Math.pow;Se["sqrtf"]=Math.sqrt;Se["expf"]=Math.exp;Se["logf"]=Math.log;Se["floorf"]=Math.floor;Se["ceilf"]=Math.ceil;Se["sinf"]=Math.sin;Se["cosf"]=Math.cos;Se["tanf"]=Math.tan;Se["asinf"]=Math.asin;Se["acosf"]=Math.acos;Se["atanf"]=Math.atan;Se["atan2f"]=Math.atan2;Se["ldexpf"]=function(Te,Ue){return Te*Math.pow(2,Ue)}}function Ie(Ve){var We=ve["GL"];var Xe=We.Ctx.getParameter(34047);Ve["glTexImage2DExt"]=function(Ye,Ze){var $e=Ae[Ze];if($e){We.Ctx.texParameterf(Ye,34046,Xe);We.Ctx.texImage2D(Ye,0,We.Ctx.RGB,We.Ctx.RGB,We.Ctx.UNSIGNED_BYTE,$e);Ae[Ze]=null}};Ve["glTexImage2DObj"]=function(_e,af,bf,cf,df,ef,ff,gf,hf){var jf=Ae[hf];if(jf){if(jf instanceof ArrayBuffer){We.Ctx.texImage2D(_e,af,bf,cf,df,ef,ff,gf,new Uint8Array(jf));Ae[hf]=null}else{We.Ctx.texParameterf(_e,34046,Xe);We.Ctx.texImage2D(_e,af,bf,ff,gf,jf);Ae[hf]=null}}};Ve["glTexImage3DObj"]=function(kf,lf,mf,nf,of,pf,qf,rf,sf,tf){var uf=Ae[tf];if(uf){We.Ctx.texImage3D(kf,lf,mf,nf,of,pf,qf,rf,sf,uf);Ae[tf]=null}else{We.Ctx.texImage3D(kf,lf,mf,nf,of,pf,qf,rf,sf,new Uint8Array(4*256*256*1024))}};Ve["glTexSubImage3DObj"]=function(vf,wf,xf,yf,zf,Af,Bf,Cf,Df,Ef,Ff){var Gf=Ae[Ff];if(Gf){We.Ctx.texSubImage3D(vf,wf,xf,yf,zf,Af,Bf,Cf,Df,Ef,Gf);Ae[Ff]=null}};Ve["glCreateShader"]=We._glCreateShader;Ve["glDeleteShader"]=We._glDeleteShader;Ve["glShaderSource"]=We._glShaderSource;Ve["glCompileShader"]=We._glCompileShader;Ve["glGetShaderiv"]=We._glGetShaderiv;Ve["glGetShaderInfoLog"]=We._glGetShaderInfoLog;Ve["glCreateProgram"]=We._glCreateProgram;Ve["glDeleteProgram"]=We._glDeleteProgram;Ve["glAttachShader"]=We._glAttachShader;Ve["glLinkProgram"]=We._glLinkProgram;Ve["glUseProgram"]=We._glUseProgram;Ve["glGetProgramiv"]=We._glGetProgramiv;Ve["glGetProgramInfoLog"]=We._glGetProgramInfoLog;Ve["glBindAttribLocation"]=We._glBindAttribLocation;Ve["glGenVertexArrays"]=We._glGenVertexArrays;Ve["glDeleteVertexArrays"]=We._glDeleteVertexArrays;Ve["glBindVertexArray"]=We._glBindVertexArray;Ve["glVertexAttribPointer"]=We._glVertexAttribPointer;Ve["glEnableVertexAttribArray"]=We._glEnableVertexAttribArray;Ve["glVertexAttribDivisor"]=We._glVertexAttribDivisor;Ve["glGetActiveUniform"]=We._glGetActiveUniform;Ve["glGetUniformLocation"]=We._glGetUniformLocation;Ve["glUniform1i"]=We._glUniform1i;Ve["glUniform1fv"]=We._glUniform1fv;Ve["glUniform2fv"]=We._glUniform2fv;Ve["glUniform3fv"]=We._glUniform3fv;Ve["glUniform4fv"]=We._glUniform4fv;Ve["glUniform1iv"]=We._glUniform1iv;Ve["glUniform2iv"]=We._glUniform2iv;Ve["glUniform3iv"]=We._glUniform3iv;Ve["glUniform4iv"]=We._glUniform4iv;Ve["glUniformMatrix3fv"]=We._glUniformMatrix3fv;Ve["glUniformMatrix4fv"]=We._glUniformMatrix4fv;Ve["glGenTextures"]=We._glGenTextures;Ve["glDeleteTextures"]=We._glDeleteTextures;Ve["glActiveTexture"]=We._glActiveTexture;Ve["glBindTexture"]=We._glBindTexture;Ve["glTexStorage2D"]=We._glTexStorage2D;Ve["glTexParameteri"]=We._glTexParameteri;Ve["glTexImage2D"]=We._glTexImage2D;Ve["glGenerateMipmap"]=We._glGenerateMipmap;Ve["glGenBuffers"]=We._glGenBuffers;Ve["glDeleteBuffers"]=We._glDeleteBuffers;Ve["glBindBuffer"]=We._glBindBuffer;Ve["glBufferData"]=We._glBufferData;Ve["glBufferSubData"]=We._glBufferSubData;Ve["glMapBufferRange"]=We._glMapBufferRange;Ve["glUnmapBuffer"]=We._glUnmapBuffer;Ve["glGenFramebuffers"]=We._glGenFramebuffers;Ve["glDeleteFramebuffers"]=We._glDeleteFramebuffers;Ve["glBindFramebuffer"]=We._glBindFramebuffer;Ve["glFramebufferTexture2D"]=We._glFramebufferTexture2D;Ve["glCheckFramebufferStatus"]=We._glCheckFramebufferStatus;Ve["glClearColor"]=We._glClearColor;Ve["glClear"]=We._glClear;Ve["glBlendFuncSeparate"]=We._glBlendFuncSeparate;Ve["glBlendEquationSeparate"]=We._glBlendEquationSeparate;Ve["glEnable"]=We._glEnable;Ve["glDisable"]=We._glDisable;Ve["glDepthFunc"]=We._glDepthFunc;Ve["glDepthMask"]=We._glDepthMask;Ve["glClearDepthf"]=We._glClearDepthf;Ve["glClearStencil"]=We._glClearStencil;Ve["glCullFace"]=We._glCullFace;Ve["glPolygonOffset"]=We._glPolygonOffset;Ve["glViewport"]=We._glViewport;Ve["glDrawArrays"]=We._glDrawArrays;Ve["glDrawArraysInstanced"]=We._glDrawArraysInstanced;Ve["glDrawElements"]=We._glDrawElements;Ve["glDrawElementsInstanced"]=We._glDrawElementsInstanced;Ve["glFlush"]=We._glFlush;Ve["glFinish"]=We._glFinish}function Je(Hf){function If(Sf){var Tf=ve["WASM"].GetString(Sf);if(!Tf.startsWith("http")){Tf="./data/projects/sve/"+Tf}if(Tf.endsWith("assetbundle")){Tf+=".bin"}return Tf}function Jf(Uf,Vf,Wf,Xf,Yf){var Zf=If(Uf);var $f=we.get(Wf);var _f=we.get(Xf);ve["Fetch"](Zf,function(ag){if(ag){var bg=$f(Vf,ag.byteLength,Yf);if(bg){ve["WASM"]["HEAPU8"](bg,ag.byteLength).set(new Uint8Array(ag))}}else{console.error("资源丢失:",Zf)}_f(Vf,Yf)})}function Kf(cg,dg,eg,fg,gg){var hg=If(cg);var ig=we.get(eg);var jg=new Image;jg.crossOrigin="anonymous";jg.src=hg;jg.onload=function(kg){ig(dg,Ae.push(jg)-1,gg)}}function Lf(lg,mg,ng,og,pg){Jf(lg,mg,ng,og,pg)}function Mf(qg,rg,sg,tg,ug){Fe["LoadTerrain"](qg,rg,sg,tg,ug)}function Nf(vg,wg,xg,yg,zg){var Ag=ve["WASM"]["HEAP32"](vg,16);Fe["LoadBlockbox"](wg,Ag[0],Ag[1],Ag[2],Ag[3],xg,yg)}function Of(Bg,Cg){var Dg=ve["WASM"]["HEAP32"](Bg,12);var Eg=Me(Dg[0]);if(Eg){Eg["_Load3MX"](Dg[1],Dg[2],Cg)}}function Pf(Fg,Gg){var Hg=ve["WASM"]["HEAP32"](Fg,12);Fe["Load3MX"](Hg[0],Hg[1],Hg[2],Gg)}function Qf(Ig,Jg,Kg,Lg,Mg){Jf(Ig,Jg,Kg,Lg,Mg)}var Rf=[undefined,Jf,Kf,Lf,Mf,Nf,Pf,Qf];Hf["APP_LOAD"]=function(Ng,Og,Pg,Qg,Rg,Sg){Rf[Ng](Og,Pg,Qg,Rg,Sg)}}function Ke(Tg){var Ug={NaN:NaN,Infinity:Infinity};He(Tg);Ie(Tg);Je(Tg);Tg["APP_DYNAMIC_LINK"]=function(Vg,Wg){var Xg=ve["WASM"]["HEAPU32"](Vg,Wg);var Yg=Xg[0];var Zg=Xg[1];for(var $g=0;$g<Yg;$g++){var _g=Xg[2+$g]-1;var ah=Xg[Zg++];var bh=Xg[Zg++];var ch=ve["WASM"].GetString(ah,bh);var dh=JSON.parse(ch);var eh=function(ih,jh){this["m_nID"]=ih;this["m_nObject"]=jh};var fh=eh.prototype;fh["_type_name"]=dh[0];fh["_type_id"]=$g+1;fh["_ins_count"]=0;Ee[$g+1]=eh;var gh=function(kh){var lh=we.get(Xg[Zg++]);Zg++;var mh=function(){var nh=Array.prototype.slice.call(arguments);nh.unshift(this.m_nObject);return lh.apply(this,nh)};if(0===kh){fh["_"+dh[kh]]=mh}else{fh[dh[kh]]=mh}};for(var hh=0;hh<_g;hh++){gh(hh)}}ve["WASM"]["LoadClass"](Ee,Me,Pe);ve["Miaokit"]["ResizeCavans"]=function(oh,ph){if(ye.SE_RESIZE){ye.SE_RESIZE(oh,ph)}}};Tg["APP_PRINT"]=function(qh,rh,sh){var th=ve["WASM"].GetString(qh,rh);ve["Track"](th,sh)};Tg["APP_DO_ACTION"]=function(uh,vh,wh,xh){ze[uh](vh,wh,xh)};Tg["APP_CREATE_OBJ"]=function(yh,zh){if(0<yh){var Ah=Ne();var Bh=new Ee[yh](Ah,zh);Be[Ah]=Bh;Ee[yh].prototype._ins_count++;return Ah}else{if(-21==yh){var Ch=ve["WASM"]["HEAP32"](zh,16);var Dh=Ch[0];var Eh=Ch[1];var Fh=Ch[2];var Gh=Ch[3];var Hh=ve["WASM"]["HEAP8"](Fh,Eh);var Ih=new Blob([Hh]);var Jh=window.URL.createObjectURL(Ih);var Kh=we.get(Gh);var Lh=new Image;Lh.src=Jh;Lh.onload=function(Mh){Kh(Dh,Ae.push(Lh)-1);window.URL.revokeObjectURL(Jh)}}}return 0};Tg["APP_FREE_OBJ"]=function(Nh){var Oh=Be[Nh];Ee[Oh._type_id].prototype._ins_count--;Oe(Nh)};Ge=ve["ShaderLab"].APP_DO_OPERATORS;Tg["APP_DO"]=function(Ph,Qh,Rh,Sh,Th){return Ge[Ph](Qh,Rh,Sh,Th)};xe=Tg["memory"];ve["WASM"]["m_pMemory"]=ve["WASM"]["m_pMemory"]||xe;return{env:Tg,global:Ug}}function Le(Uh,Vh,Wh){Vh=Ke(Vh);WebAssembly.instantiate(Uh,Vh).then(function(Xh){return Xh.instance}).then(function(Yh){ye=Yh.exports;we=ye.__indirect_function_table;ve["WASM"]["Update"]=Yh.exports.SE_UPDATE;ve["WASM"]["Malloc"]=Yh.exports.Malloc;ve["WASM"]["Free"]=Yh.exports.Free;ve["ShaderLab"]["DrawPass_"]=Yh.exports.SE_DRAW_PASS;ve["ShaderLab"]["SetSunlight"]=Yh.exports.SE_SUNLIGHT;ve["ShaderLab"]["CreateUniformsDesc"]=Yh.exports.SE_CREATE_UNIFORMS_DESC;ve["ShaderLab"]["GetTexture"]=function(Zh){return ye.SE_RESOURCE(9,Zh)};ve["ShaderLab"]["GetObject"]=function($h){var _h=ye.SE_RESOURCE(13,$h);if(_h){return Me(_h)}return null};ve["Track"]("Start thread");ve["WASM"]["Worker"]=Re(function(){ve["Track"]("Start thread succeed")});ye.Start();Wh()})}function Me(ai){return Be[ai]}function Ne(){var bi=Ce;if(Be.length>Ce){Ce=Be[Ce]}else{Ce++}De++;return bi}function Oe(ci){Be[ci]=Ce;Ce=ci;De--}function Pe(di){var ei="'系统运行':{";ei+="'时间':"+(ve.Time()/1e3).toFixed(0);ei+=", '帧率':"+di;ei+=", 'WASM内存':"+ve.WASM.m_pMemory.buffer.byteLength/1024/1024;ei+="}";var fi="'JS对象':{";fi+="'工厂':["+Be.length+", "+De+", "+(Be.length-De)+"]";for(var gi=1;gi<Ee.length;gi++){fi+=", '"+Ee[gi].prototype._type_name+"':"+Ee[gi].prototype._ins_count}fi+="}";return[ei,fi]}function Qe(hi){var ii=ze.length;ze.push(hi);return ii}function Re(ji){var ki=ye.UTIL_WORKER_CODE();var li=ve["WASM"]["HEAPU32"](ki,16);if(false){Fe=new Worker(window.URL.createObjectURL(new Blob([ve["WASM"]["HEAPU8"](li[2],li[3])])));var mi=ve["WASM"]["HEAPU8"]().slice(li[0],li[0]+li[1]);var ni=mi.buffer;Fe.postMessage({m_nID:1,m_aCode:ni},[ni])}else{var oi=ve["m_pConfig"]["MODULE"].replace(".wasm","");Fe=new Worker(oi+"Worker.min.js");fetch(oi+"Worker.wasm").then(function(qi){return qi.arrayBuffer()}).then(function(ri){if(ri){Fe.postMessage({m_nID:1,m_aCode:ri},[ri])}else{console.error("fetch error: ./js/Miaokit/MiaokitWorker.wasm",ri)}}).catch(function(si){console.error("fetch error: ./js/Miaokit/MiaokitWorker.wasm",si)})}Fe.onmessage=function(ti){var ui=ti.data;switch(ui.m_nID){case 1:ji();ji=null;break;case 2:Fe["OnLoadTerrain"](ui);break;case 3:Fe["OnLoadBlockbox"](ui);break;case 4:Fe["OnLoad3MX"](ui);break;default:console.error("子线程消息异常:",ui);break}};Fe["LoadTerrain"]=function(vi,wi,xi,yi,zi){Fe.postMessage({m_nID:2,m_pPath:ve["WASM"].GetString(vi),m_nRequest:wi,m_nCallback:xi,m_nTS:zi})};Fe["OnLoadTerrain"]=function(Ai){var Bi=we.get(Ai.m_nCallback);var Ci=Ai.m_pData;var Di=0;if(Ci){Di=Ae.push(Ci)-1}else{console.warn("Terrain miss:",Ai.m_pPath)}Bi(Ai.m_nRequest,Di,Ai.m_nTS)};Fe["LoadBlockbox"]=function Ei(Fi,Gi,Hi,Ii,Ji,Ki,Li){Fe.postMessage({m_nID:3,m_nRequest:Fi,m_nCol:Gi,m_nRow:Hi,m_nColOffset:Ii,m_nRowOffset:Ji,m_nAlloc:Ki,m_nCallback:Li})};Fe["OnLoadBlockbox"]=function(Mi){var Ni=we.get(Mi.m_nAlloc);var Oi=we.get(Mi.m_nCallback);var Pi=Mi.m_pData;var Qi=[0,0,0,0];for(var Ri=0;Ri<4;Ri++){var Si=Pi[Ri];if(0<Si.m_nVertexCount&&0<Si.m_nSubmeshCount){var Ti=new ve.Mesh;var Ui=new Int32Array(Si.m_aIndex);Ti.position=new Float32Array(Si.m_aPosition);Ti.normal=new Float32Array(Si.m_aNormal);Ti.uv=new Float32Array(Si.m_aUV);for(var Vi=0;Vi<Si.m_nSubmeshCount;Vi++){var Wi=Ui[2*Vi];var Xi=Ui[2*Vi+1];var Yi=[];for(var Zi=Wi;Zi<Xi;Zi++){Yi.push(Zi)}Ti.SetIndices(Vi,new Int32Array(Yi),4)}Ti.Apply();Qi[Ri]=Ti.m_nObject}else{Qi[Ri]=0}}var $i=Ni(Mi.m_nRequest,16);if($i){ve["WASM"]["HEAPU32"]($i,16).set(new Uint32Array(Qi));Oi(Mi.m_nRequest)}};var pi=function(){var _i=[];var aj=[];return{CreateTexture:function(bj,cj){var dj=ve["GL"].Ctx;var ej=null;if(0<_i.length){ej=_i.pop()}else{ej=dj.createTexture();ve["GL"]["RegisterTexture"](ej)}var fj=new Image;var gj=new Int8Array(bj);var hj=new Blob([gj]);var ij=window.URL.createObjectURL(hj);fj.src=ij;fj.onload=function(jj){dj.bindTexture(dj.TEXTURE_2D,ej);dj.texParameteri(dj.TEXTURE_2D,dj.TEXTURE_MAG_FILTER,dj.NEAREST);dj.texParameteri(dj.TEXTURE_2D,dj.TEXTURE_MIN_FILTER,dj.NEAREST);dj.texParameteri(dj.TEXTURE_2D,dj.TEXTURE_WRAP_S,dj.CLAMP_TO_EDGE);dj.texParameteri(dj.TEXTURE_2D,dj.TEXTURE_WRAP_T,dj.CLAMP_TO_EDGE);dj.texImage2D(dj.TEXTURE_2D,0,dj.RGB,dj.RGB,dj.UNSIGNED_BYTE,fj);dj.bindTexture(dj.TEXTURE_2D,null);window.URL.revokeObjectURL(ij);fj=null;cj()};return ej.name},FreeTexture:function(kj){var lj=ve["GL"]["GetTextureByHandle"](kj);if(lj){_i.push(lj)}},CreateMesh:function(mj){var nj=0;if(0<aj.length){nj=aj.pop()}nj=ye["SE_CREATE_INTERNAL_MESH"](nj,0,mj);return nj},FreeMesh:function(oj){aj.push(oj)}}}();Ge[7]=function(pj,qj){if(0===pj){pi.FreeTexture(qj)}else if(1===pj){pi.FreeMesh(qj)}return 0};Fe["Load3MX"]=function(rj,sj,tj,uj){var vj=Me(rj);if(vj){var wj=vj.m_pFileLut[sj];var xj=wj.m_pPath+wj.m_aFile[tj];var yj=vj.m_pFileLut.length;vj.m_pFileLut.push(null);Fe.postMessage({m_nID:4,m_nDior:rj,m_pPath:xj,m_nRequest:uj,m_nNewFolder:yj})}};Fe["OnLoad3MX"]=function(zj){var Aj=zj.m_pData;if(Aj){var Bj=Me(zj.m_nDior);if(Bj){Bj.m_pFileLut[zj.m_nNewFolder]=zj.m_pNewFolder;var Cj=new Int32Array(Aj[0]);var Dj=Cj[1];var Ej=Cj[2];var Fj=4+9*Dj;var Gj=0;var Hj=function(){if(Ej===++Gj||0==Ej){var Nj=Aj[0].byteLength;var Oj=Bj["_CreateBuffer"](Nj);var Pj=ve["WASM"]["HEAP32"](Oj,Nj);Pj.set(Cj);Bj["_Dispose"](zj.m_nRequest)}};for(var Ij=0;Ij<Ej;Ij++){var Jj=Cj[Fj+1];if(0===Jj){if(null!==Aj[1+Ij]){Cj[Fj+4]=pi.CreateTexture(Aj[1+Ij],Hj)}else{Cj[Fj+4]=0;Hj()}}else if(1===Jj){if(null!==Aj[1+Ij]){var Kj=Aj[1+Ij].byteLength;var Lj=Bj["_CreateBuffer"](Kj);var Mj=ve["WASM"]["HEAP8"](Lj,Kj);Mj.set(new Int8Array(Aj[1+Ij]));Cj[Fj+4]=pi.CreateMesh(Lj+4)}else{Cj[Fj+4]=0}Hj()}else{Cj[Fj+4]=0;Hj()}Fj+=6}if(0===Ej){Hj()}}}else{console.warn("3mx miss:",zj.m_pPath)}};return Fe}ve["WASM"]=ve["WASM"]||{};ve["WASM"]["LoadMiaokit"]=Le;ve["WASM"]["GetObject"]=Me;ve["WASM"]["RegisterDelegate"]=Qe;return[]});MiaokitMerge(function(Qj){var Rj=undefined;var Sj=true;var Tj={};var Uj=[];var Vj={RGBA32_FLOAT:function(){return true?[Rj["RGBA32F"],Rj.RGBA,Rj.FLOAT]:[Rj.RGBA,Rj.RGBA,Rj.FLOAT]},RGBA16_FLOAT:function(){return true?[Rj["RGBA16F"],Rj.RGBA,Rj["HALF_FLOAT"]]:[Rj.RGBA,Rj.RGBA,36193]},RGBA8:function(){return true?[Rj.RGBA,Rj.RGBA,Rj.UNSIGNED_BYTE]:[Rj.RGBA,Rj.RGBA,Rj.UNSIGNED_BYTE]},D16_UNORM:function(){return true?[Rj["DEPTH_COMPONENT16"],Rj.DEPTH_COMPONENT,Rj.UNSIGNED_SHORT]:[Rj.DEPTH_COMPONENT,Rj.DEPTH_COMPONENT,Rj.UNSIGNED_SHORT]},D24_UNORM:function(){return true?[Rj["DEPTH_COMPONENT24"],Rj.DEPTH_COMPONENT,Rj.UNSIGNED_INT]:[Rj.DEPTH_COMPONENT,Rj.DEPTH_COMPONENT,Rj.UNSIGNED_INT]},D24S8_UNORM:function(){return true?[Rj.DEPTH_STENCIL,Rj.DEPTH_STENCIL,34042]:[Rj.DEPTH_STENCIL,Rj.DEPTH_STENCIL,34042]}};var Wj={Opaque:1,Transparent:2,Outline:4,CastShadow:8,ReceiveShadow:16};var Xj=null;var Yj=["u_Sunlight","u_Picker","u_EyePos","u_MatG","u_MatVP","u_Color","u_MainTex","",""];var Zj=[null];var $j=[null];var _j=[null];var ak=[null];var bk=[new Int32Array([0,0,0,0]),new Float32Array([0,0,0,0]),new Float32Array([1,0,0,0,1,0,0,0,1]),new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),new Int32Array([0,0,0,0]),new Int32Array([0,0,0,0]),new Int32Array([0,0,0,0]),new Int32Array([0,0,0,0])];var ck=[function(Fk,Gk,Hk){pk(Zj[Fk],ak[Gk])},function(Ik,Jk,Kk){qk(Zj[Ik],ak[Jk])},function(Lk,Mk,Nk){rk(Zj[Lk],ak[Mk])},function(Ok,Pk,Qk){sk(Zj[Ok],ak[Pk])},function(Rk,Sk,Tk){var Uk=ak[Sk];var Vk=Uk[1];if(Uk[0]){Vk=Bk.GetTexture(Vk);if(Vk){Uk[0]=0;Uk[1]=Vk}}var Wk=Uj[Vk]||mk;if(null===Wk){console.log("BindTexture null!");return}Rj.activeTexture(33984+Tk);Rj.bindTexture(3553,Wk)},function(Xk,Yk){console.error("Unsupported UniformCubemap!")},null,function(Zk,$k,_k){var al=ak[$k];var bl=al[1];if(al[0]){bl=Bk.GetTexture(bl);if(bl){al[0]=0;al[1]=bl}}var cl=Uj[bl]||mk;if(null===cl){console.log("BindTexture null!");return}Rj.activeTexture(33984+_k);Rj.bindTexture(35866,cl)}];var dk=[null];var ek=[null];var fk=1280;var gk=720;var hk=1;var ik=0;var jk=null;var kk=new Float32Array(4);var lk=[0,0,0,0];var mk=null;var nk=null;var ok=0;function pk(dl,el){if(undefined===dl.mark){Rj.uniform4iv(dl,el)}else if(hk!==dl.mark){Rj.uniform4iv(dl,el);dl.mark=hk}}function qk(fl,gl){if(undefined===fl.mark){Rj.uniform4fv(fl,gl)}else if(hk!==fl.mark){Rj.uniform4fv(fl,gl);fl.mark=hk}}function rk(hl,il){if(undefined===hl.mark){Rj.uniformMatrix3fv(hl,false,il)}else if(hk!==hl.mark){Rj.uniformMatrix3fv(hl,false,il);hl.mark=hk}}function sk(jl,kl){if(undefined===jl.mark){Rj.uniformMatrix4fv(jl,false,kl)}else if(hk!==jl.mark){Rj.uniformMatrix4fv(jl,false,kl);jl.mark=hk}}function tk(ll,ml){var nl=Rj.createShader(ll);if(!nl){console.error("Could not create shader object!");return null}Rj.shaderSource(nl,ml);Rj.compileShader(nl);if(!Rj.getShaderParameter(nl,Rj.COMPILE_STATUS)){var ol=Rj.getShaderInfoLog(nl);Rj.deleteShader(nl);console.error("Could not compile shader! \n\n"+ol);return null}return nl}function uk(pl){var ql=pl.program;var rl=0;{Rj.bindAttribLocation(ql,0,"a_Position");Rj.bindAttribLocation(ql,1,"a_Normal");Rj.bindAttribLocation(ql,2,"a_UV");Rj.bindAttribLocation(ql,3,"a_Color");Rj.bindAttribLocation(ql,4,"a_Tangent");Rj.bindAttribLocation(ql,5,"a_Object");Rj.bindAttribLocation(ql,6,"a_MatW")}{Rj.linkProgram(ql);if(!Rj.getProgramParameter(ql,Rj.LINK_STATUS)){var sl=Rj.getProgramInfoLog(ql);console.error("Could not compile program! \n\n"+sl);return 0}}{var tl=Rj.getProgramParameter(ql,35718);if(Sj){tl-=6;var ul=Rj["getUniformBlockIndex"](ql,"CommonBlock")}var vl=Bk.CreateUniformsDesc(tl);var wl=ak[vl];var xl={};var yl=0;wl[19]=_j.push(xl)-1;dk[wl[19]]=pl;Rj.useProgram(ql);console.log(".............................",pl.name);for(var zl=0;zl<2;zl++){var Al=tl+(Sj?6:0);for(var Bl=0;Bl<Al;Bl++){var sl=Rj.getActiveUniform(ql,Bl);var Cl=sl.type;if(35678===Cl||35680===Cl||36289===Cl){if(0!==zl){continue}}else{if(1!==zl){continue}}var Dl=sl.name;console.log(Dl);var El=Rj.getUniformLocation(ql,Dl);if(!El){continue}var Fl=Zj.push(El)-1;El.lll=Dl;for(var Gl=0;Gl<Yj.length;Gl++){if(Dl===Yj[Gl]){wl[Gl]=yl;if(5>Gl){El.mark=1}break}}switch(Cl){case 35669:Cl=0;break;case 35666:Cl=1;break;case 35675:Cl=2;break;case 35676:Cl=3;break;case 35678:Cl=4;break;case 35680:Cl=5;break;case 36289:Cl=7;break;default:console.error("Unsupported uniform type:",sl);break}wl[20+yl]=Fl;wl[20+tl+yl]=Cl;xl[Dl]=yl;$j[Fl]=Dl;if(0===zl){Rj.uniform1i(El,yl)}yl++}}if(yl!==tl){console.error("Process uniform cout error!",tl,yl)}rl=wl[16]}{var Hl=0;if(pl.mark){for(var Il=0,Jl=pl.mark;Il<Jl.length;Il++){var Kl=Jl[Il];Hl|=Wj[Kl]}}pl.mode=Hl}return rl}function vk(Ll){if(!Ll){return null}var Ml=Tj[Ll];if(!Ml){console.error("Could not find shader:",Ll);return null}if(Ml.program){return Ml}Ml.vs=tk(Rj.VERTEX_SHADER,Tj["Common"]["DeclareVS"]+Ml.vs_src+Tj["Common"][Ml.type+"VS"]);if(!Ml.vs){console.error("Could not create vertex shader:",Ll);return null}Ml.fs=tk(Rj.FRAGMENT_SHADER,Tj["Common"]["DeclareFS"]+Ml.fs_src+Tj["Common"][Ml.type+"FS"]);if(!Ml.fs){Rj.deleteShader(Ml.vs);Ml.vs=null;console.error("Could not create fragment shader:",Ll);return null}Ml.program=Rj.createProgram();if(!Ml.program){Rj.deleteShader(Ml.vs);Rj.deleteShader(Ml.fs);Ml.vs=null;Ml.fs=null;console.error("Could not create program object!");return null}Rj.attachShader(Ml.program,Ml.vs);Rj.attachShader(Ml.program,Ml.fs);Ml.id=uk(Ml);if(!Ml.id){Rj.deleteProgram(Ml.program);Rj.deleteShader(Ml.vs);Rj.deleteShader(Ml.fs);Ml.program=null;Ml.vs=null;Ml.fs=null}return Ml}function wk(Nl,Ol){var Pl=undefined;var Ql=undefined;var Rl=undefined;var Sl=undefined;var Tl=0;var Ul=null;function Vl(){var dm=ak[Nl];var em=ak[Ol];var fm=dk[dm[19]];Ul=fm.name;var gm=dm[20];var hm=20+dm[17];Pl=fm.program;Ql=_j[dm[19]];Rl=dm;Sl=[];Tl=dm[17];var im=function(rm){var sm=rm;var tm=ak[em[sm]];var um=Zj[gm+sm];var vm=dm[hm+sm];var wm=[function(){return tm},function(xm){tm.set(xm)},undefined];switch(vm){case 0:wm[2]=function(){pk(um,tm)};break;case 1:wm[2]=function(){qk(um,tm)};break;case 2:wm[2]=function(){rk(um,tm)};break;case 3:wm[2]=function(){sk(um,tm)};break;case 4:wm[2]=function(){var ym=tm[1];if(tm[0]){ym=Bk.GetTexture(ym);if(ym){tm[0]=0;tm[1]=ym}}var zm=Uj[ym]||mk;if(null===zm){console.log("BindTexture null!");return}Rj.activeTexture(33984+sm);Rj.bindTexture(3553,zm)};break;case 7:wm[2]=function(){var Am=tm[1];if(tm[0]){Am=Bk.GetTexture(Am);if(Am){tm[0]=0;tm[1]=Am}}var Bm=Uj[Am]||mk;if(null===Bm){console.log("BindTexture null!");return}Rj.activeTexture(33984+sm);Rj.bindTexture(35866,Bm)};break;default:console.error("Unsupported uniform type!",vm);break}Sl[sm]=wm};for(var jm=0;jm<Tl;jm++){im(jm)}if(fm.uniform_values){for(var km=0,lm=fm.uniform_values;km<lm.length;km++){var mm=lm[km];var nm=Ql[mm[0]];if(undefined!==nm){var om=dm[hm+nm];if(4===om||5===om){var pm=Bk.Pipeline["Resource"][mm[1]];var qm=[0,pm.Handle,0,0];Sl[nm][1](qm)}}}}return fm.mode}function Wl(Cm){if(jk){jk(ek[Ol],Rj)}if(ik!==Nl){Rj.useProgram(Pl);ik=Nl;if(nk){Rj["bindBufferBase"](Rj["UNIFORM_BUFFER"],0,nk)}}for(var Dm=0,Em=Sl;Dm<Em.length;Dm++){var Fm=Em[Dm];Fm[2]()}}function Xl(Gm){return Ql[Gm]}function Yl(Hm){return Sl[Hm][0]()}function Zl(Im){Im=Rl[Im];if(-1<Im){return Sl[Im][0]()}return null}function $l(Jm){var Km=Ql[Jm];if(undefined!==Km){return Sl[Km][0]()}return null}function _l(Lm,Mm){Sl[Lm][1](Mm);if(ik===Nl){Sl[Lm][2]()}}function am(Nm,Om){Nm=Rl[Nm];if(-1<Nm){Sl[Nm][1](Om);if(ik===Nl){Sl[Nm][2]()}}}function bm(Pm,Qm){var Rm=Ql[Pm];if(undefined!==Rm){Sl[Rm][1](Qm);if(ik===Nl){Sl[Rm][2]()}}}function cm(Sm){Sl[Sm][2]()}ek[Ol]=[Vl,Wl,Xl,Yl,Zl,$l,_l,am,bm,cm];return Vl()}function xk(Tm){{Object.defineProperty(Tm,"Attr",{get:function(){if(!this.Attr_){this.Attr_=ek[this._VarList()]}return this.Attr_}})}{var Um=function(Wm){var Xm=Wm;Object.defineProperty(Tm,Yj[Wm],{get:function(){return this.Attr[4](Xm)},set:function(Ym){if(Ym){this.Attr[7](Xm,Ym)}}})};for(var Vm=0;Vm<Yj.length;Vm++){Um(Vm)}}{}}function yk(Zm){var $m=Rj.createTexture();if(!$m){console.error("Could not create texture object!");return null}Rj.bindTexture(Rj.TEXTURE_2D,$m);Rj.texParameteri(Rj.TEXTURE_2D,Rj.TEXTURE_MIN_FILTER,Rj.LINEAR);Rj.texParameteri(Rj.TEXTURE_2D,Rj.TEXTURE_MAG_FILTER,Rj.LINEAR);Rj.texParameteri(Rj.TEXTURE_2D,Rj.TEXTURE_WRAP_S,Rj.CLAMP_TO_EDGE);Rj.texParameteri(Rj.TEXTURE_2D,Rj.TEXTURE_WRAP_T,Rj.CLAMP_TO_EDGE);var _m=new Image;_m.crossOrigin="anonymous";_m.src=Zm.URL;_m.onload=function(an){Rj.bindTexture(Rj.TEXTURE_2D,$m);Rj.texImage2D(Rj.TEXTURE_2D,0,Rj.RGB,Rj.RGB,Rj.UNSIGNED_BYTE,_m);Rj.bindTexture(Rj.TEXTURE_2D,null)};Rj.bindTexture(Rj.TEXTURE_2D,null);return $m}function zk(bn){var cn=Rj.createTexture();if(!cn){console.error("Could not create texture object!");return null}Rj.bindTexture(Rj.TEXTURE_2D,cn);var dn=bn.Params;Rj.texParameteri(Rj.TEXTURE_2D,Rj.TEXTURE_MAG_FILTER,Rj[dn[1]]);Rj.texParameteri(Rj.TEXTURE_2D,Rj.TEXTURE_MIN_FILTER,Rj[dn[0]]);Rj.texParameteri(Rj.TEXTURE_2D,Rj.TEXTURE_WRAP_S,Rj[dn[2]]);Rj.texParameteri(Rj.TEXTURE_2D,Rj.TEXTURE_WRAP_T,Rj[dn[3]]);var en=Vj[bn.Format]();Rj.texImage2D(Rj.TEXTURE_2D,bn.Levels,en[0],bn.Width,bn.Height,0,en[1],en[2],null);Rj.bindTexture(Rj.TEXTURE_2D,null);cn["_Format"]=en;return cn}function Ak(fn,gn){var hn=Rj.createFramebuffer();if(!hn){console.error("Could not create framebuffer object!");return null}Rj.bindFramebuffer(Rj.FRAMEBUFFER,hn);Rj.framebufferTexture2D(Rj.FRAMEBUFFER,Rj.COLOR_ATTACHMENT0,Rj.TEXTURE_2D,fn,0);if(gn&&gn["_Format"][0]===Rj.DEPTH_STENCIL){Rj.framebufferTexture2D(Rj.FRAMEBUFFER,Rj.DEPTH_STENCIL_ATTACHMENT,Rj.TEXTURE_2D,gn,0)}else{Rj.framebufferTexture2D(Rj.FRAMEBUFFER,Rj.DEPTH_ATTACHMENT,Rj.TEXTURE_2D,gn,0)}if(Rj.FRAMEBUFFER_COMPLETE!=Rj.checkFramebufferStatus(Rj.FRAMEBUFFER)){Rj.deleteFramebuffer(hn);console.error("Framebuffer check failed!");return null}return hn}var Bk={_name:"ShaderLab",Shader:Tj,Pipeline:null,Init:function(jn){Rj=Qj["GL"]["Ctx"];Uj=Qj["GL"]["_textures"];fk=Rj.canvas.width;gk=Rj.canvas.height;if(Sj){var kn=Rj.createBuffer();if(kn){Rj.bindBuffer(Rj["UNIFORM_BUFFER"],kn);Rj.bufferData(Rj["UNIFORM_BUFFER"],64*3,Rj.DYNAMIC_DRAW);Rj.bindBuffer(Rj["UNIFORM_BUFFER"],null);nk=kn}}for(var ln=0,mn=this.Pipeline.RenderTarget;ln<mn.length;ln++){var nn=mn[ln];if(nn){nn.Width=nn.Width||fk;nn.Height=nn.Height||gk;nn.Levels=nn.Levels||0;nn.Params=nn.Params||["NEAREST","NEAREST","CLAMP_TO_EDGE","CLAMP_TO_EDGE"];nn.Texture=zk(nn);nn.Handle=Qj["GL"]["RegisterTexture"](nn.Texture);nn.Size=[1/nn.Width,1/nn.Height,nn.Width,nn.Height]}}for(var on=0,pn=this.Pipeline.Resource;on<pn.length;on++){var qn=pn[on];if(qn){if("2D"===qn.TYPE){qn.Texture=yk(qn);qn.Handle=Qj["GL"]["RegisterTexture"](qn.Texture);if(2===qn.ID){mk=qn.Texture}}}}function rn(Bn){var Cn=Bn.RenderTarget;if(Cn){var Dn=Bk.Pipeline["RenderTarget"][Cn[0]];var En=Bk.Pipeline["RenderTarget"][Cn[1]];Bn.Framebuffer=Ak(Dn.Texture,En?En.Texture:null);if(!Bn.Framebuffer){console.log(Bn)}Bn.Framebuffer.width=Dn.Size[2];Bn.Framebuffer.height=Dn.Size[3]}else{Bn.Framebuffer=null}}for(var sn=0,tn=this.Pipeline.Pass;sn<tn.length;sn++){var un=tn[sn];if(un){if("Clear"===un.Type){un._Type=2}else{un._Type="Render"===un.Type?0:1}un._Mask=0;for(var vn=0,wn=un.Mask;vn<wn.length;vn++){var xn=wn[vn];un._Mask+=Wj[xn]}rn(un);if(un.Pingpong){for(var yn=0,zn=un.Pingpong;yn<zn.length;yn++){var An=zn[yn];rn(An)}}}}},Draw:function(){hk++;var Fn=0;var Gn=this.Pipeline.Picker;if(Gn){lk[0]=Gn.x;lk[1]=Rj.canvas.height-Gn.y}else{lk[0]=-10;lk[1]=-10}if(Sj){Rj.bindBuffer(Rj["UNIFORM_BUFFER"],nk);Rj.bufferData(Rj["UNIFORM_BUFFER"],ak[ok],Rj.DYNAMIC_DRAW)}for(var Hn=0,In=this.Pipeline.Pass;Hn<In.length;Hn++){var Jn=In[Hn];Ck.BeginDrawPass();if(Jn.Pingpong){for(var Kn=0;Kn<Jn.PingpongCount;Kn++){for(var Ln=0;Ln<Jn.Pingpong.length;Ln++){Jn.Framebuffer=Jn.Pingpong[Ln].Framebuffer;Jn.SetUniforms=Jn.Pingpong[Ln].SetUniforms;this.DrawPass(Jn,Bk.DrawPass_)}}}else{this.DrawPass(Jn,Bk.DrawPass_)}Ck.EndDrawPass(Fn++)}},DrawPass:function(Mn,Nn){Rj.bindFramebuffer(Rj.FRAMEBUFFER,Mn.Framebuffer);if(Mn.Framebuffer){Rj.viewport(0,0,Mn.Framebuffer.width,Mn.Framebuffer.height)}else{Rj.viewport(0,0,fk,gk)}var On=Mn.Depth;if(On){Rj.enable(Rj.DEPTH_TEST);Rj.depthMask(On.Write);Rj.depthFunc(Rj[On.Func])}else{Rj.disable(Rj.DEPTH_TEST)}var Pn=Mn.Blend;if(Pn){Rj.enable(Rj.BLEND);Rj.blendEquationSeparate(Rj[Pn.ColorFunc],Rj[Pn.AlphaFunc]);Rj.blendFuncSeparate(Rj[Pn.ColorSrc],Rj[Pn.ColorDest],Rj[Pn.AlphaSrc],Rj[Pn.AlphaDest])}else{Rj.disable(Rj.BLEND)}var Qn=Mn.Stencil;if(Qn){Rj.enable(Rj.STENCIL_TEST);Rj.stencilFunc(Rj[Qn.Func],Qn.Value,Qn.Mask);Rj.stencilOp(Rj[Qn.Faild],Rj[Qn.ZFaild],Rj[Qn.Pass])}else{Rj.disable(Rj.STENCIL_TEST)}var Rn=Mn.ClearTarget;if(Rn){var Sn=0;if(Rn.Color){Rj.clearColor(Rn.Color.r,Rn.Color.g,Rn.Color.b,Rn.Color.a);Sn+=Rj.COLOR_BUFFER_BIT}if(undefined!==Rn.Depth){Rj.clearDepth(Rn.Depth);Sn+=Rj.DEPTH_BUFFER_BIT}if(undefined!==Rn.Stencil){Rj.clearStencil(Rn.Stencil);Sn+=Rj.STENCIL_BUFFER_BIT}Rj.clear(Sn)}jk=Mn.SetUniforms;if(Mn.Shader){if(!Mn._Material){Mn._Material=new Qj["Material"](Mn.Shader)}Mn._Material._Bind()}Nn(Mn._Type,Mn._Mask);if(Mn.Postprocess){Mn.Postprocess(Rj)}Rj.flush()},PreflushBuffer:function(){var Tn=ak.length;var Un=new Array(Tn);for(var Vn=0;Vn<Tn;Vn++){var Wn=ak[Vn];if(Wn){if("Float32Array"===Wn.constructor.name){Un[Vn]=Wn.length}else{Un[Vn]=-Wn.length}ak[Vn]=Wn.byteOffset}}return Un},FlushBuffer:function(Xn,Yn){Xj=Xn;var Zn=ak.length;for(var $n=0;$n<Zn;$n++){var _n=ak[$n];if(_n){var ao=Yn[$n];if(0<ao){ak[$n]=new Float32Array(Xj,_n,ao)}else{ak[$n]=new Int32Array(Xj,_n,-ao)}}}for(var $n=0;$n<Zn;$n++){var bo=ek[$n];if(bo){bo[0]()}}Qj["GL"]["FlushHeap"]()},ResizeCanvas:function(co,eo){},PickObject:function(){var fo=this.Pipeline.Picker;if(fo){Rj.readPixels(fo.x,Rj.canvas.height-fo.y,1,1,Rj.RGBA,Rj.FLOAT,kk);if(0>kk[3]){var go=Math.ceil(kk[0]*1e4)*8192+Math.ceil(kk[1]*1e4);var ho=Math.ceil(kk[2]*1e4);var io=this["GetObject"](go);fo.Feedback(io,ho)}else{fo.Feedback(null,0)}this.Pipeline.Picker=null}},APP_DO_OPERATORS:[function(jo){var ko=Qj["ShaderLab"]["Pipeline"]["InternalShader"][jo];var lo=vk(ko);return lo.id},function(mo,no,oo,po){var qo=null;switch(no){case 0:qo=new Int32Array(Xj,po,4);qo.set(bk[0]);break;case 1:qo=new Float32Array(Xj,po,4);qo.set(bk[1]);break;case 2:qo=new Float32Array(Xj,po,9);qo.set(bk[2]);break;case 3:qo=new Float32Array(Xj,po,16);qo.set(bk[3]);break;case 4:qo=new Int32Array(Xj,po,4);qo.set(bk[4]);break;case 5:qo=new Int32Array(Xj,po,4);qo.set(bk[5]);break;case 6:qo=new Int32Array(Xj,po,oo);break;case 7:qo=new Int32Array(Xj,po,4);qo.set(bk[7]);break;case 8:qo=new Float32Array(Xj,po,48);ok=mo;break;default:console.error("Unsupported uniform type:",no);break}ak[mo]=qo;return mo},function(ro,so,to,uo){ck[ro](so,to,uo);return 0},function(vo,wo,xo,yo){var zo=Qj["WASM"].GetString(yo);var Ao=ak[vo];var Bo=_j[Ao[19]];var Co=Bo[zo];return undefined===Co?0:Co},function(Do,Eo){ek[Eo][1](Do);return 0},function(){Bk.Draw()},wk,null],ExpandMaterial:xk,CreateUniformsDesc:undefined,GetTexture:undefined,DrawPass_:undefined,SetSunlight:undefined};var Ck={_name:"Profiler",m_pMsg:"",m_nCycleStart:0,m_nCycleTick:0,m_nBeginCycle:0,m_nTotalCycle:0,m_nBeginScript:0,m_nTotalScript:0,m_nBeginUpdate:0,m_nTotalUpdate:0,m_nBeginDraw:0,m_nTotalDraw:0,m_nBeginMaterial:0,m_nTotalMaterial:0,m_nBeginDrawPass:0,m_nTotalDrawPass:[],BeginCycle:function(){if(0===Ck.m_nCycleTick){Ck.m_nCycleStart=Qj["Time"]();Ck.m_nCycleTick=0;Ck.m_nBeginCycle=0;Ck.m_nTotalCycle=0;Ck.m_nBeginScript=0;Ck.m_nTotalScript=0;Ck.m_nBeginUpdate=0;Ck.m_nTotalUpdate=0;Ck.m_nBeginDraw=0;Ck.m_nTotalDraw=0;Ck.m_nBeginMaterial=0;Ck.m_nTotalMaterial=0;Ck.m_nBeginDrawPass=0;Ck.m_nTotalDrawPass=[]}Ck.m_nBeginCycle=Qj["Time"]()},EndCycle:function(){Ck.m_nTotalCycle+=Qj["Time"]()-Ck.m_nBeginCycle;if(60===++Ck.m_nCycleTick){var Fo={"总耗时":Qj["Time"]()-Ck.m_nCycleStart,"应用循环":Ck.m_nTotalCycle,"脚本逻辑":Ck.m_nTotalScript,"场景更新":Ck.m_nTotalUpdate,"场景绘制":Ck.m_nTotalDraw,"通道绘制":Ck.m_nTotalDrawPass};Ck.m_pMsg="'开销统计':"+JSON.stringify(Fo);Ck.m_nCycleTick=0}},BeginScript:function(){Ck.m_nBeginScript=Qj["Time"]()},EndScript:function(){Ck.m_nTotalScript+=Qj["Time"]()-Ck.m_nBeginScript},BeginUpdate:function(){Ck.m_nBeginUpdate=Qj["Time"]()},EndUpdate:function(){Ck.m_nTotalUpdate+=Qj["Time"]()-Ck.m_nBeginUpdate},BeginDraw:function(){Ck.m_nBeginDraw=Qj["Time"]()},EndDraw:function(){Ck.m_nTotalDraw+=Qj["Time"]()-Ck.m_nBeginDraw},BeginMaterial:function(){Ck.m_nBeginMaterial=Qj["Time"]()},EndMaterial:function(){Ck.m_nTotalMaterial+=Qj["Time"]()-Ck.m_nBeginMaterial},BeginDrawPass:function(){Ck.m_nBeginDrawPass=Qj["Time"]()},EndDrawPass:function(Go){Ck.m_nTotalDrawPass[Go]=(Ck.m_nTotalDrawPass[Go]?Ck.m_nTotalDrawPass[Go]:0)+Qj["Time"]()-Ck.m_nBeginDrawPass}};var Dk="#version 300 es\n#define attribute in\n#define varying out\n#define texture2D texture\n\nprecision highp float;\nprecision mediump sampler2D;\nprecision mediump sampler2DArray;\n\nuniform CommonBlock\n{\n    lowp vec4 u_Sunlight;\n    lowp vec4 u_Picker;\n    lowp vec4 u_EyePos;\n    lowp vec4 u_Unused;\n    highp mat4 u_MatG;\n    highp mat4 u_MatVP;\n};\n";var Ek="#version 300 es\n#define varying in\n#define texture2D texture\n#define gl_FragColor FragColor\n\nprecision highp float;\nprecision mediump sampler2D;\nprecision mediump sampler2DArray;\n\nuniform CommonBlock\n{\n    lowp vec4 u_Sunlight;\n    lowp vec4 u_Picker;\n    lowp vec4 u_EyePos;\n    lowp vec4 u_Unused;\n    highp mat4 u_MatG;\n    highp mat4 u_MatVP;\n};\n\nout vec4 FragColor;\n";Bk.Shader["Common"]={DeclareVS:Dk+"\nattribute mediump vec3 a_Position;\nattribute mediump vec3 a_Normal;\nattribute mediump vec2 a_UV;\nattribute mediump vec4 a_Color;\nattribute mediump vec4 a_Tangent;\nattribute mediump vec4 a_Binormal;\nattribute mediump vec4 a_Object;\nattribute mediump mat4 a_MatW;\n\n/// 对象空间坐标转世界空间坐标\nvec3 ObjectToWorldPos(vec3 i_Position)\n{\n    return (a_MatW * vec4(i_Position, 1.0)).xyz;\n}\n\n/// 对象空间坐标转裁剪空间坐标\nvec4 ObjectToClipPos(vec3 i_Position)\n{\n    // GIS的变换矩阵值包含旋转信息，未包含位移信息，避免精度不足造成画面抖动\n    // return u_MatVP * u_MatG * a_MatW * vec4(i_Position, 1.0);\n    \n    vec4 mPosition = vec4(i_Position, 1.0);\n    mPosition = u_MatG * a_MatW * mPosition;\n    mPosition.y = mPosition.y - 6378137.0;\n\n    return u_MatVP * mPosition;\n}\n\n/// 对象空间法线转世界空间法线\nvec3 ObjectToWorldNormal(vec3 i_Normal)\n{\n    return normalize((a_MatW * vec4(i_Normal, 0.0)).xyz);\n}\n       ",DeclareFS:Ek+"\nuniform sampler2D u_MainTex;\n\n/// 采样2D纹理\nvec4 Tex2D(sampler2D i_Tex, vec2 i_UV)\n{\n    i_UV.x = fract(i_UV.x);\n    i_UV.y = fract(1.0 - i_UV.y);\n\n    return texture2D(i_Tex, i_UV);\n}\n        ",ClearVS:"\nvoid main()\n{\n    gl_Position = vs();\n}\n        ",ClearFS:"\nvoid main()\n{\n    gl_FragColor = fs();\n    gl_FragColor.a = 1.0; \n}\n        ",RenderVS:"\nvarying vec4 v_Object;\n\nvoid main()\n{\n    v_Object = a_Object;\n    gl_Position = vs();\n}\n        ",RenderFS:"\nvarying vec4 v_Object;\n\nvoid main()\n{\n    gl_FragColor = fs();\n    \n    // 高亮信息\n    gl_FragColor.a = 1.0 - (0.01 * v_Object.a);\n    \n    // 拾取信息\n    //float nLength = length(gl_FragCoord.xy - u_Picker.xy);\n    //nLength = clamp((ceil(nLength) - 1.0), 0.0, 1.0);    \n    //gl_FragColor = (gl_FragColor * nLength) + (u_Object * (1.0 - nLength));\n    //gl_FragColor.a = u_Object.a + (-2.0 * (1.0 - nLength));\n}\n        ",PostprocessVS:"\nvoid main()\n{\n    gl_Position = vs();\n}\n        ",PostprocessFS:"\nvoid main()\n{\n    gl_FragColor = fs();\n}\n        ",BRDF:'\nconst float PI = 3.14159265358979323846;\n\nconst vec3 baseColor = vec3(0.5, 0.5, 0.5);\nconst float metallic = 0.0;\nconst float subsurface = 0.5; // 0.0\nconst float specular = 0.2;\nconst float roughness = 0.7;//0.5;\nconst float specularTint = 0.0;\nconst float anisotropic = 0.0;\nconst float sheen = 0.0;\nconst float sheenTint = 0.5;\nconst float clearcoat = 0.0;\nconst float clearcoatGloss = 1.0;\n\nfloat sqr(float x) { return x * x; }\n\nfloat SchlickFresnel(float u)\n{\n\tfloat m = clamp(1.0 - u, 0.0, 1.0);\n\tfloat m2 = m * m;\n\treturn m2 * m2 * m; // pow(m,5)\n}\n\nfloat GTR1(float NdotH, float a)\n{\n\tif (a >= 1.0) return 1.0 / PI;\n\tfloat a2 = a * a;\n\tfloat t = 1.0 + (a2 - 1.0) * NdotH * NdotH;\n\treturn (a2 - 1.0) / (PI * log(a2) * t);\n}\n\nfloat GTR2(float NdotH, float a)\n{\n\tfloat a2 = a * a;\n\tfloat t = 1.0 + (a2 - 1.0) * NdotH * NdotH;\n\treturn a2 / (PI * t * t);\n}\n\nfloat GTR2_aniso(float NdotH, float HdotX, float HdotY, float ax, float ay)\n{\n\treturn 1.0 / (PI * ax * ay * sqr(sqr(HdotX / ax) + sqr(HdotY / ay) + NdotH * NdotH));\n}\n\nfloat smithG_GGX(float NdotV, float alphaG)\n{\n\tfloat a = alphaG * alphaG;\n\tfloat b = NdotV * NdotV;\n\treturn 1.0 / (NdotV + sqrt(a + b - a * b));\n}\n\nfloat smithG_GGX_aniso(float NdotV, float VdotX, float VdotY, float ax, float ay)\n{\n\treturn 1.0 / (NdotV + sqrt(sqr(VdotX * ax) + sqr(VdotY * ay) + sqr(NdotV)));\n}\n\nvec3 mon2lin(vec3 x)\n{\n\treturn vec3(pow(x[0], 2.2), pow(x[1], 2.2), pow(x[2], 2.2));\n}\n\nvec3 BRDF(vec3 L, vec3 V, vec3 N, vec3 X, vec3 Y)\n{\n    //x和y方向分别表示了表面的切向量和副法线向量方向\n    //https://www.cnblogs.com/starfallen/p/3572352.html\n\n\tfloat NdotL = dot(N, L);\n\tfloat NdotV = dot(N, V);\n\tif (NdotL < 0.0 || NdotV < 0.0) return vec3(0.0);\n\n\tvec3 H = normalize(L + V);\n\tfloat NdotH = dot(N, H);\n\tfloat LdotH = dot(L, H);\n\n\tvec3 Cdlin = mon2lin(baseColor);\n\tfloat Cdlum = 0.3 * Cdlin[0] + 0.6 * Cdlin[1] + 0.1 * Cdlin[2]; // luminance approx.\n\n\tvec3 Ctint = Cdlum > 0.0 ? Cdlin / Cdlum : vec3(1.0); // normalize lum. to isolate hue+sat\n\tvec3 Cspec0 = mix(specular * 0.08 * mix(vec3(1.0), Ctint, specularTint), Cdlin, metallic);\n\tvec3 Csheen = mix(vec3(1.0), Ctint, sheenTint);\n\n\t// Diffuse fresnel - go from 1 at normal incidence to .5 at grazing\n\t// and mix in diffuse retro-reflection based on roughness\n\tfloat FL = SchlickFresnel(NdotL), FV = SchlickFresnel(NdotV);\n\tfloat Fd90 = 0.5 + 2.0 * LdotH * LdotH * roughness;\n\tfloat Fd = mix(1.0, Fd90, FL) * mix(1.0, Fd90, FV);\n\n\t// Based on Hanrahan-Krueger brdf approximation of isotropic bssrdf\n\t// 1.25 scale is used to (roughly) preserve albedo\n\t// Fss90 used to "flatten" retroreflection based on roughness\n\tfloat Fss90 = LdotH * LdotH * roughness;\n\tfloat Fss = mix(1.0, Fss90, FL) * mix(1.0, Fss90, FV);\n\tfloat ss = 1.25 * (Fss * (1.0 / (NdotL + NdotV) - 0.5) + 0.5);\n\n\t// specular\n\tfloat aspect = sqrt(1.0 - anisotropic * 0.9);\n\tfloat ax = max(0.001, sqr(roughness) / aspect);\n\tfloat ay = max(0.001, sqr(roughness) * aspect);\n\tfloat Ds = GTR2_aniso(NdotH, dot(H, X), dot(H, Y), ax, ay);\n\tfloat FH = SchlickFresnel(LdotH);\n\tvec3 Fs = mix(Cspec0, vec3(1.0), FH);\n\tfloat Gs;\n\tGs = smithG_GGX_aniso(NdotL, dot(L, X), dot(L, Y), ax, ay);\n\tGs *= smithG_GGX_aniso(NdotV, dot(V, X), dot(V, Y), ax, ay);\n\n\t// sheen\n\tvec3 Fsheen = FH * sheen * Csheen;\n\n\t// clearcoat (ior = 1.5 -> F0 = 0.04)\n\tfloat Dr = GTR1(NdotH, mix(0.1, 0.001, clearcoatGloss));\n\tfloat Fr = mix(0.04, 1.0, FH);\n\tfloat Gr = smithG_GGX(NdotL, 0.25) * smithG_GGX(NdotV, 0.25);\n\n\treturn ((1.0 / PI) * mix(Fd, ss, subsurface) * Cdlin + Fsheen) * (1.0 - metallic) + Gs * Fs * Ds + 0.25 * clearcoat * Gr * Fr * Dr;\n}\n        ',AtmosphereVS:"\nvarying vec4 v_ViewDir;\nvarying vec4 v_Scattering;\nvarying vec4 v_Attenuate;\n\n//P and ray define the line; O is the sphere's center point\nvec3 CalculateIntersection(vec3 P, vec3 ray, vec3 O, float r)\n{\n\tvec3 PO = O - P;\n\tfloat lPO = length(PO);\n\tfloat B = 2.0 * dot(PO, ray);\n\n\tfloat C = B * B - 4.0 * (lPO * lPO - r * r);\n\tfloat det = sqrt(max(0.0, C));\n\n\tfloat d = 0.5*(B-det);\n\tvec3 intersect = P + d * ray;\n\n\treturn intersect;\n}\n\nvoid Atmosphere(vec3 mLightDir, vec3 mWorldPos)\n{\n    // 大气散射，天空应分两层，摄像机应该在内层之外，大气层厚度为外层半径减内层半径，外层半径应远大于内层半径\n    //650 nm for red; 570 nm for green; 475 nm for blue\n    vec3 _Wave = vec3(5.602046, 9.473285, 20.49314);\n    vec3 _ESun = vec3(20.0, 20.0, 20.0);\n    vec3 _PlanetPos = vec3(0.0, -6378137.0, 0.0);\n    float _Sealevel = 6378137.0;\n    float _OuterRadius = 6478137.0;\n    float _SampleNum = 5.0;\n    //Rayleigh scattering constant\n    float _Kr = 0.0025;\n    //Mie scattering constant\n    float _Km = 0.001;\n    //the altitude at which the atmosphere's average density is found\n    float _H0 = 0.25;\n\n    vec3 mRay = mWorldPos - u_EyePos.xyz;\n    float nDepth = length(mRay); mRay = mRay / nDepth;\n\n    float nSampleLength = nDepth / _SampleNum;\n    vec3 mSampleRay = mRay * nSampleLength;\n    vec3 mSamplePoint = u_EyePos.xyz + mSampleRay * 0.5;\n    vec3 mInScattering = vec3(0.0, 0.0, 0.0);\n    vec3 mOutScatteringAB = vec3(0.0, 0.0, 0.0);\n    vec3 mOutGroundScatteringAB = vec3(0.0, 0.0, 0.0);\n    float nInvOuterH = 1.0 / (_OuterRadius-_Sealevel);\n\n    for(int i=0; i</*_SampleNum*/5; i++)\n    {\n\t    vec3 mCrossPoint = CalculateIntersection(mSamplePoint, -mLightDir, _PlanetPos, _OuterRadius);\n\t    //AP out scattering\n\t    vec3 mAPRay = (mSamplePoint - u_EyePos.xyz) / _SampleNum;\n\t    float nAPRayLength = length(mAPRay);\n\t    vec3 mSampleAP = u_EyePos.xyz + mAPRay * 0.5;\n\t    vec3 mOutScatteringAP = vec3(0.0, 0.0, 0.0);\n\n\t    for(int m=0; m</*_SampleNum*/5; m++)\n\t    {\n\t\t    mOutScatteringAP += exp(-(length(mSampleAP - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nAPRayLength * nInvOuterH;\n\t\t    mSampleAP += mAPRay;\n\t    }\n\t    mOutScatteringAP = 4.0 * 3.14 * (_Km + _Kr * _Wave) * mOutScatteringAP;\n\n\t    //PC out scattering\n\t    vec3 mPCRay = (mCrossPoint - mSamplePoint) / _SampleNum;\n\t    float nPCRayLength = length(mPCRay);\n\t    vec3 mSamplePC = mSamplePoint + mPCRay*0.5;\n\t    vec3 mOutScatteringPC = vec3(0.0, 0.0, 0.0);\n\n\t    for(int n=0; n</*_SampleNum*/5; n++)\n\t    {\n\t\t    mOutScatteringPC += exp(-(length(mSamplePC - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nPCRayLength * nInvOuterH;\n\t\t    mSamplePC += mPCRay;\n\t    }\n\t    mOutScatteringPC = 4.0 * 3.14 * (_Km + _Kr * _Wave) * mOutScatteringPC;\n\n\t    mInScattering += exp(-(length(mSamplePoint - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nSampleLength * nInvOuterH * exp(-mOutScatteringAP - mOutScatteringPC);\n\t    mSamplePoint+=mSampleRay;\n\t    mOutScatteringAB = mCrossPoint;\n        mOutGroundScatteringAB = mOutScatteringAP + mOutScatteringPC;\n    }\n\n    vec3 mAttenuateGround = exp(-mOutGroundScatteringAB);\n\n    v_ViewDir.xyz = u_EyePos.xyz - mWorldPos;\n    v_Scattering.xyz = mInScattering * _ESun * _Kr * _Wave;\n    v_Attenuate.xyz = mInScattering * _ESun * _Km;\n\n    v_ViewDir.w = mAttenuateGround.x;\n    v_Scattering.w = mAttenuateGround.y;\n    v_Attenuate.w = mAttenuateGround.z;\n\n    //Ground : v_ScatteringR = v_Scattering; v_ScatteringM = v_Attenuate; v_Attenuate = v_AttenuateGround;\n    //v_ViewDir = u_EyePos.xyz - mWorldPos;\n    //v_ScatteringR = mInScattering * _ESun * _Kr * _Wave;\n    //v_ScatteringM = mInScattering * _ESun * _Km;\n    //v_Attenuate = exp(-mOutGroundScatteringAB);\n}\n        ",AtmosphereFS:"\nvarying vec4 v_ViewDir;\nvarying vec4 v_Scattering;\nvarying vec4 v_Attenuate;\n\nfloat PhaseRayleigh(float nCostheta)\n{\n\treturn 0.75 * (1.0 + nCostheta * nCostheta);\n}\n\nfloat PhaseMie(float nCostheta, float g, float g2)\n{\n\treturn 1.5 * ((1.0 - g2) / (2.0 + g2)) * (1.0 + nCostheta * nCostheta) / pow(1.0 + g2 - 2.0 * g * nCostheta, 1.5);\n}\n\nvec4 AtmosphereColor(vec4 mColor, vec3 mLightDir)\n{\n    float _G = -0.990;\n    float _G2 = _G * _G;\n    \n    float nCostheta = dot(normalize(v_ViewDir.xyz), mLightDir);\n    float nPhaseMie = PhaseMie(nCostheta, _G, _G2);\n    float nPhaseRayleigh = PhaseRayleigh(nCostheta);\n\t\t\t\t\n    mColor.rgb = v_Scattering.xyz * nPhaseRayleigh + v_Attenuate.xyz * nPhaseMie;\n    mColor.a = mColor.b + 0.2;\n    mColor = clamp(mColor, 0.0, 0.9);\n\n    return mColor;\n}\n\nvec4 AtmosphereLight(vec4 mColor, vec3 mLightDir)\n{\n    // Ground : v_ScatteringR = v_Scattering.xyz; v_ScatteringM = v_Attenuate.xyz; v_Attenuate = v_AttenuateGround;\n    \n    float _G = -0.980;\n    float _G2 = _G * _G;\n    \n    float nCostheta = dot(normalize(v_ViewDir.xyz), mLightDir);\n    float nPhaseMie = PhaseMie(nCostheta, _G, _G2);\n    float nPhaseRayleigh = PhaseRayleigh(nCostheta);\n    \n    mColor.rgb = v_Scattering.xyz * nPhaseRayleigh + v_Attenuate.xyz * nPhaseMie + mColor.rgb * vec3(v_ViewDir.w, v_Scattering.w, v_Attenuate.w)/*v_AttenuateGround*/;\n    \n    return mColor;\n}\n        "};return[Bk,Ck]});MiaokitMerge(function(Ho){if("Sisyphus"!==Ho["m_pConfig"]["ENGINE"]){return[]}var Io=undefined;var Jo=true;function Ko(Po){Lo();Io=Po.OnRenderingEvent;Mo();var Qo={memory:new WebAssembly.Memory({initial:64*16,maximum:32768}),APP_PLUGIN_TYPE:function(){return 2},APP_MEM_TYPE:function(){return 2},APP_MEM_RESERVE:function(){return 1024},APP_MEM_MALLOC:function(Ro){alert("SISYPHUS��չ��֧��ʹ�÷������ڴ�!");return 0},APP_MEM_FREE:function(So){alert("SISYPHUS��չ��֧��ʹ�÷������ڴ�!")},APP_MEM_BASE:function(){return 64*1024*1024},APP_MEM_GROW:function(To){if(Ho["ShaderLab"]){var Uo=Ho["ShaderLab"]["PreflushBuffer"]();Qo["memory"].grow(To/64/1024);var Vo=Qo["memory"].buffer;Ho["ShaderLab"]["FlushBuffer"](Vo,Uo)}else{Qo["memory"].grow(To/64/1024)}},APP_MEM_RECYCLE:function(Wo){alert("WAMSģ�鲻֧�ֻ����ڴ�!")},UNITY_CREATE_OBJ:function(){alert("δװ��UNITY��չ!");return 0},UNITY_FREE_OBJ:function(){alert("δװ��UNITY��չ!");return 0},UNITY_GET:function(){alert("δװ��UNITY��չ!");return 0},UNITY_DO:function(){alert("δװ��UNITY��չ!");return 0}};Po.OnEngineLoad(Qo)}function Lo(){var Xo=document.getElementById("unityContainer");var Yo=document.createElement("canvas");Yo.id="3d";Yo.width=Xo.offsetWidth;Yo.height=Xo.offsetHeight;Yo.style.width="100%";Yo.style.height="100%";Yo.style.top="0rem";Yo.style.bottom="0rem";Yo.style.left="0rem";Yo.style.right="0rem";Yo.style.position="absolute";Yo.style.zIndex="1";Xo.appendChild(Yo);Ho["GL"]["CreateContext"](Yo);Ho["ShaderLab"]["Init"](Ho["GL"])}function Mo(){if(Jo){Jo=false;Oo()}}function No(){Jo=true}function Oo(){if(Jo){return}Ho.Profiler.BeginCycle();Ho.Profiler.BeginScript();Io(0);Ho.Profiler.EndScript();if(Ho["WASM"]["Update"]){Ho.Profiler.BeginUpdate();Ho["WASM"]["Update"](0);Ho.Profiler.EndUpdate();Ho.Profiler.BeginDraw();Ho["WASM"]["Update"](1);Ho.Profiler.EndDraw()}Ho.Profiler.EndCycle();requestAnimationFrame(Oo)}Ho["WASM"]=Ho["WASM"]||{};Ho["WASM"]["LoadEngine"]=Ko;Mo["_name"]="Start";No["_name"]="Stop";return[Mo,No]});MiaokitMerge(function(Zo){var $o=Date.now();function _o(){return Date.now()-$o}function ap(dp,ep){if(ep===void 0){ep=0}if(2===ep){console.warn("Track:",_o(),dp)}else if(2<ep){console.error("Track:",_o(),dp)}else{console.info("Track:",_o(),dp)}}function bp(fp,gp,hp){if(hp===void 0){hp=undefined}var ip=new XMLHttpRequest;ip.open("GET",fp,true);ip.responseType="arraybuffer";ip.onprogress=function(jp){if(0<jp.total&&hp){hp(jp.loaded/jp.total)}};ip.onload=function(kp){if(ip.status==200){gp(ip.response)}else{gp(null)}};ip.onerror=function(lp){ap(lp,2);gp(null)};ip.send(null)}function cp(mp,np,op,pp,qp,rp){var sp=new XMLHttpRequest;sp.onprogress=function(tp){if(0<tp.total&&qp){qp(tp.loaded/tp.total)}};sp.onload=function(up){if(sp.status==200){rp(sp.response)}else{rp(null)}sp=null};sp.onerror=function(vp){ap(vp,2);rp(null)};sp.responseType=np;sp.open(mp,op,true);sp.send(pp)}_o["_name"]="Time";ap["_name"]="Track";bp["_name"]="Fetch";cp["_name"]="Request";return[_o,ap,bp,cp]});MiaokitMerge(function(wp){if("Unity"!==wp["m_pConfig"]["ENGINE"]){return[]}if(!UnityLoader){return[]}var xp=wp["m_pLogo"]||"data:image/png;base64,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";UnityLoader.Progress.Styles.Dark.progressLogoUrl=xp;UnityLoader.Progress.Styles.Light.progressLogoUrl=xp;if(UnityLoader.SystemInfo.mobile){UnityLoader.SystemInfo.mobile=false;UnityLoader.downloadJob=function(Fp,Gp){var Hp=new XMLHttpRequest;Hp.open("GET",Gp.parameters.url);Hp.responseType="arraybuffer";Hp.onload=function(){UnityLoader.Compression.decompress(new Uint8Array(Hp.response),function(Ip){Gp.complete(Ip)})};if(Gp.parameters.onprogress)Hp.addEventListener("progress",Gp.parameters.onprogress);if(Gp.parameters.onload)Hp.addEventListener("load",Gp.parameters.onload);Hp.send()}}UnityLoader.processWasmFrameworkJob=function(Jp,Kp){var Lp=UnityLoader.Job.result(Jp,"downloadWasmFramework");UnityLoader.loadCode(Jp,Lp,function(Mp,Np){Jp["mainScriptUrlOrBlob"]=Np;if(Jp.isModularized){UnityLoader[Mp]=UnityModule}Jp["instantiateWasm"]=function(Op,Pp){Bp(Jp,Op["env"]);if(Jp["wasmBinary"]){WebAssembly.instantiate(Jp["wasmBinary"],Op).then(function(Qp){Pp(Qp.instance,Qp.module)})}else{console.info("MiaokitLoader.InitUnity.instantiateWasm error!")}return{}};UnityLoader[Mp](Jp);Kp.complete()},{Module:Jp,url:Jp["wasmFrameworkUrl"],isModularized:Jp.isModularized})};var yp=null;var zp=null;var Ap={};function Bp(Rp,Sp){Object["assign"](Sp,{_Init:function(Tp,Up){wp["WASM"]["m_pMemory"]=wp["WASM"]["m_pMemory"]||zp.Module.wasmMemory;Cp(Rp,Ap,Tp,Up);Dp(zp,Ap);yp.OnEngineLoad(Ap)},_RenderingEvent:function(Vp){yp.OnRenderingEvent(Vp)}});wp["GL"]=Sp}function Cp(Wp,Xp,Yp,Zp){var $p=wp.WASM.GetString(Yp,Zp);var _p=JSON.parse($p);var aq=function(eq){var fq=function(){var gq=Array.prototype.slice.call(arguments);gq.unshift(fq["m_nAddr"]);return fq["m_pFunc"].apply(this,gq)};fq["m_pFunc"]=Wp[eq.Call];fq["m_nAddr"]=eq.Addr;Xp[eq.Name]=fq};for(var bq=0,cq=_p.List;bq<cq.length;bq++){var dq=cq[bq];aq(dq)}}function Dp(hq,iq){iq["APP_PLUGIN_TYPE"]=function(){return 1};iq["APP_MEM_TYPE"]=function(){return 1};iq["memory"]=function(jq){var kq=32*1024*1024;var lq=jq._memalign(16,kq);var mq=kq-lq;jq._free(lq);var nq=jq._memalign(16,mq+kq);if(nq!==lq){console.error("miaokit.prememory: addr error",lq,nq);return}if(nq+mq+kq!==67108864){console.error("miaokit.prememory: addr end error",nq+mq+kq);return}iq["APP_MEM_RESERVE"]=function(){return nq};return jq.wasmMemory}(zp.Module);iq["APP_MEM_MALLOC"]=function(oq){return zp.Module._memalign(16,oq)};iq["APP_MEM_FREE"]=function(pq){zp.Module._free(pq)};iq["APP_MEM_BASE"]=function(){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0};iq["APP_MEM_GROW"]=function(qq){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0};iq["APP_MEM_RECYCLE"]=function(rq){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0}}function Ep(sq){yp=sq;zp=UnityLoader.instantiate("unityContainer",wp["m_pConfig"]["UNITY"])}wp["WASM"]=wp["WASM"]||{};wp["WASM"]["LoadEngine"]=Ep;return[]});MiaokitMerge(function(tq){var uq=undefined;var vq=new TextDecoder("utf-8");var wq=new TextEncoder;function xq(yq){if(!uq||tq["WASM"].m_pMemory.buffer.byteLength!==uq[0].byteLength){if(!uq){uq=[]}uq[0]=new Int8Array(tq["WASM"].m_pMemory.buffer);uq[1]=new Uint8Array(tq["WASM"].m_pMemory.buffer);uq[2]=new Int16Array(tq["WASM"].m_pMemory.buffer);uq[3]=new Uint16Array(tq["WASM"].m_pMemory.buffer);uq[4]=new Int32Array(tq["WASM"].m_pMemory.buffer);uq[5]=new Uint32Array(tq["WASM"].m_pMemory.buffer);uq[6]=new Float32Array(tq["WASM"].m_pMemory.buffer);uq[7]=new Float64Array(tq["WASM"].m_pMemory.buffer)}return uq[yq]}tq["WASM"]=tq["WASM"]||{};tq["WASM"]["HEAP8"]=function(zq,Aq){if(zq===void 0){zq=0}if(Aq===void 0){Aq=0}var Bq=xq(0);if(zq&&Aq){return Bq.subarray(zq,zq+Aq)}else{return Bq}};tq["WASM"]["HEAPU8"]=function(Cq,Dq){if(Cq===void 0){Cq=0}if(Dq===void 0){Dq=0}var Eq=xq(1);if(Cq&&Dq){return Eq.subarray(Cq,Cq+Dq)}else{return Eq}};tq["WASM"]["HEAP16"]=function(Fq,Gq){if(Fq===void 0){Fq=0}if(Gq===void 0){Gq=0}var Hq=xq(2);if(Fq&&Gq){return Hq.subarray(Fq/2,(Fq+Gq)/2)}else{return Hq}};tq["WASM"]["HEAPU16"]=function(Iq,Jq){if(Iq===void 0){Iq=0}if(Jq===void 0){Jq=0}var Kq=xq(3);if(Iq&&Jq){return Kq.subarray(Iq/2,(Iq+Jq)/2)}else{return Kq}};tq["WASM"]["HEAP32"]=function(Lq,Mq,Nq){if(Lq===void 0){Lq=0}if(Mq===void 0){Mq=0}var Oq=xq(4);if(Lq&&Mq){if(Nq){return Oq.slice(Lq/4,(Lq+Mq)/4)}else{return Oq.subarray(Lq/4,(Lq+Mq)/4)}}else{return Oq}};tq["WASM"]["HEAPU32"]=function(Pq,Qq){if(Pq===void 0){Pq=0}if(Qq===void 0){Qq=0}var Rq=xq(5);if(Pq&&Qq){return Rq.subarray(Pq/4,(Pq+Qq)/4)}else{return Rq}};tq["WASM"]["HEAPF32"]=function(Sq,Tq,Uq){if(Sq===void 0){Sq=0}if(Tq===void 0){Tq=0}var Vq=xq(6);if(Sq&&Tq){if(Uq){return Vq.slice(Sq/4,(Sq+Tq)/4)}else{return Vq.subarray(Sq/4,(Sq+Tq)/4)}}else{return Vq}};tq["WASM"]["HEAPF64"]=function(Wq,Xq){if(Wq===void 0){Wq=0}if(Xq===void 0){Xq=0}var Yq=xq(7);if(Wq&&Xq){return Yq.subarray(Wq/8,(Wq+Xq)/8)}else{return Yq}};tq["WASM"]["GetString"]=function(Zq,$q){if(!$q){var _q=tq["WASM"].HEAPU8();var ar=Zq;while(0!==_q[ar++]);$q=ar-Zq-1}var br=tq["WASM"].HEAPU8(Zq,$q);var cr=vq.decode(br);return cr};tq["WASM"]["SetString"]=function(dr,er){var fr=wq.encode(er);var gr=tq["WASM"].HEAPU8(dr,fr.byteLength);gr.set(fr)};tq["WASM"]["EncodeString"]=function(hr){return wq.encode(hr)};tq["WASM"]["m_pMemory"]=null;return[]});MiaokitMerge(function(ir){if("Sisyphus"!==ir["m_pConfig"]["ENGINE"]){return[]}var jr={instance:undefined,counter:1,lastError:0,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],currentContext:null,currArrayBuffer:0,currElementArrayBuffer:0,offscreenCanvases:{},timerQueriesEXT:[],queries:[],samplers:[],transformFeedbacks:[],syncs:[],byteSizeByTypeRoot:5120,byteSizeByType:[1,1,2,2,4,4,4,2,3,4,8],programInfos:{},stringCache:{},stringiCache:{},tempFixedLengthArray:[],packAlignment:4,unpackAlignment:4,init:function(){jr.miniTempBuffer=new Float32Array(jr.MINI_TEMP_BUFFER_SIZE);for(var Jr=0;Jr<jr.MINI_TEMP_BUFFER_SIZE;Jr++){jr.miniTempBufferViews[Jr]=jr.miniTempBuffer.subarray(0,Jr+1)}for(var Jr=0;Jr<32;Jr++){jr.tempFixedLengthArray.push(new Array(Jr))}},recordError:function Kr(Lr){if(!jr.lastError){jr.lastError=Lr}},getNewId:function(Mr){var Nr=jr.counter++;for(var Or=Mr.length;Or<Nr;Or++){Mr[Or]=null}return Nr},MINI_TEMP_BUFFER_SIZE:256,miniTempBuffer:null,miniTempBufferViews:[0],getSource:function(Pr,Qr,Rr,Sr){var Tr="";for(var Ur=0;Ur<Qr;++Ur){var Vr;if(Sr){var Wr=sr[Sr+Ur*4>>2];if(Wr<0){Vr=mr(sr[Rr+Ur*4>>2])}else{Vr=mr(sr[Rr+Ur*4>>2],Wr)}}else{Vr=mr(sr[Rr+Ur*4>>2])}Tr+=Vr}return Tr},createContext:function(Xr,Yr){if(typeof Yr["majorVersion"]==="undefined"&&typeof Yr["minorVersion"]==="undefined"){if(typeof WebGL2RenderingContext!=="undefined")Yr["majorVersion"]=2;else Yr["majorVersion"]=1;Yr["minorVersion"]=0}var Zr;var $r="?";function _r(bs){$r=bs.statusMessage||$r}try{Xr.addEventListener("webglcontextcreationerror",_r,false);try{if(Yr["majorVersion"]==1&&Yr["minorVersion"]==0){Zr=Xr.getContext("webgl",Yr)||Xr.getContext("experimental-webgl",Yr)}else if(Yr["majorVersion"]==2&&Yr["minorVersion"]==0){Zr=Xr.getContext("webgl2",Yr)}else{throw"Unsupported WebGL context version "+Yr["majorVersion"]+"."+Yr["minorVersion"]+"!"}}finally{Xr.removeEventListener("webglcontextcreationerror",_r,false)}if(!Zr)throw":("}catch(cs){lr("Could not create canvas: "+[$r,cs,JSON.stringify(Yr)]);return 0}if(!Zr)return 0;var as=jr.registerContext(Zr,Yr);return as},registerContext:function(ds,es){var fs=1;var gs={handle:fs,attributes:es,version:es["majorVersion"],GLctx:ds};function hs(){var is=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return is?parseInt(is[2],10):false}gs["supportsWebGL2EntryPoints"]=gs.version>=2&&(hs()===false||hs()>=58);if(ds.canvas)ds.canvas.GLctxObject=gs;jr.contexts[fs]=gs;if(typeof es["enableExtensionsByDefault"]==="undefined"||es["enableExtensionsByDefault"]){jr.initExtensions(gs)}if(es["renderViaOffscreenBackBuffer"]){return 0}return fs},makeContextCurrent:function(js){if(!js){kr=jr.currentContext=null;return true}var ks=jr.contexts[js];if(!ks){return false}kr=ks.GLctx;jr.currentContext=ks;return true},getContext:function(ls){return jr.contexts[ls]},deleteContext:function(ms){if(!ms)return;if(jr.currentContext===jr.contexts[ms])jr.currentContext=null;if(typeof JSEvents==="object")JSEvents.removeAllHandlersOnTarget(jr.contexts[ms].GLctx.canvas);if(jr.contexts[ms]&&jr.contexts[ms].GLctx.canvas)jr.contexts[ms].GLctx.canvas.GLctxObject=undefined;wr(jr.contexts[ms]);jr.contexts[ms]=null},initExtensions:function(ns){if(!ns)ns=jr.currentContext;if(ns.initExtensionsDone)return;ns.initExtensionsDone=true;kr=ns.GLctx;ns.maxVertexAttribs=kr.getParameter(kr.MAX_VERTEX_ATTRIBS);if(ns.version<2){var os=kr.getExtension("ANGLE_instanced_arrays");if(os){kr["vertexAttribDivisor"]=function(ts,us){os["vertexAttribDivisorANGLE"](ts,us)};kr["drawArraysInstanced"]=function(vs,ws,xs,ys){os["drawArraysInstancedANGLE"](vs,ws,xs,ys)};kr["drawElementsInstanced"]=function(zs,As,Bs,Cs,Ds){os["drawElementsInstancedANGLE"](zs,As,Bs,Cs,Ds)}}var ps=kr.getExtension("OES_vertex_array_object");if(ps){kr["createVertexArray"]=function(){return ps["createVertexArrayOES"]()};kr["deleteVertexArray"]=function(Es){ps["deleteVertexArrayOES"](Es)};kr["bindVertexArray"]=function(Fs){ps["bindVertexArrayOES"](Fs)};kr["isVertexArray"]=function(Gs){return ps["isVertexArrayOES"](Gs)}}var qs=kr.getExtension("WEBGL_draw_buffers");if(qs){kr["drawBuffers"]=function(Hs,Is){qs["drawBuffersWEBGL"](Hs,Is)}}}kr.disjointTimerQueryExt=kr.getExtension("EXT_disjoint_timer_query");var rs=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2"];var ss=kr.getSupportedExtensions();if(ss&&ss.length>0){kr.getSupportedExtensions().forEach(function(Js){if(rs.indexOf(Js)!=-1){kr.getExtension(Js)}})}},populateUniformTable:function(Ks){var Ls=jr.programs[Ks];jr.programInfos[Ks]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1};var Ms=jr.programInfos[Ks];var Ns=Ms.uniforms;var Os=kr.getProgramParameter(Ls,kr.ACTIVE_UNIFORMS);for(var Ps=0;Ps<Os;++Ps){var Qs=kr.getActiveUniform(Ls,Ps);var Rs=Qs.name;Ms.maxUniformLength=Math.max(Ms.maxUniformLength,Rs.length+1);if(Rs.indexOf("]",Rs.length-1)!==-1){var Ss=Rs.lastIndexOf("[");Rs=Rs.slice(0,Ss)}var Ts=kr.getUniformLocation(Ls,Rs);if(Ts!=null){var Us=jr.getNewId(jr.uniforms);Ns[Rs]=[Qs.size,Us];jr.uniforms[Us]=Ts;for(var Vs=1;Vs<Qs.size;++Vs){var Ws=Rs+"["+Vs+"]";Ts=kr.getUniformLocation(Ls,Ws);Us=jr.getNewId(jr.uniforms);jr.uniforms[Us]=Ts}}}}};var kr=undefined;var lr=console.error;var mr=ir["WASM"]["GetString"];var nr=function(Xs,Ys,Zs){ir["WASM"]["SetString"](Ys,Xs)};var or=undefined;var pr=undefined;var qr=undefined;var rr=undefined;var sr=undefined;var tr=undefined;var ur=undefined;function vr($s){return ir["WASM"]["Malloc"]($s)}function wr(_s){ir["WASM"]["Free"](_s)}function xr(at,bt,ct){return ct?+(at>>>0)+ +(bt>>>0)*4294967296:+(at>>>0)+ +(bt|0)*4294967296}function yr(dt){switch(dt){case 34962:dt=34964;break;case 34963:dt=34965;break;case 35051:dt=35053;break;case 35052:dt=35055;break;case 35982:dt=35983;break;case 36662:dt=36662;break;case 36663:dt=36663;break;case 35345:dt=35368;break}var et=kr.getParameter(dt);if(et)return et.name|0;else return 0}function zr(ft){switch(ft){case 34962:case 34963:case 36662:case 36663:case 35051:case 35052:case 35882:case 35982:case 35345:return true;default:return false}}function Ar(gt,ht,it,jt){if(!it){jr.recordError(1281);return}var kt=kr["getIndexedParameter"](gt,ht);var lt;switch(typeof kt){case"boolean":lt=kt?1:0;break;case"number":lt=kt;break;case"object":if(kt===null){switch(gt){case 35983:case 35368:lt=0;break;default:{jr.recordError(1280);return}}}else if(kt instanceof WebGLBuffer){lt=kt["name"]|0}else{jr.recordError(1280);return}break;default:jr.recordError(1280);return}switch(jt){case"Integer64":var mt=0;var nt=[lt>>>0,(mt=lt,+Math.abs(mt)>=1?mt>0?(Math.min(+Math.floor(mt/4294967296),4294967295)|0)>>>0:~~+Math.ceil((mt-+(~~mt>>>0))/4294967296)>>>0:0)];sr[it>>2]=nt[0];sr[it+4>>2]=nt[1];break;case"Integer":sr[it>>2]=lt;break;case"Float":ur[it>>2]=lt;break;case"Boolean":or[it>>0]=lt?1:0;break;default:throw"internal emscriptenWebGLGetIndexed() error, bad type: "+jt}}function Br(ot,pt,qt){if(!pt){jr.recordError(1281);return}var rt=undefined;switch(ot){case 36346:rt=1;break;case 36344:if(qt!=="Integer"&&qt!=="Integer64"){jr.recordError(1280)}return;case 34814:case 36345:rt=0;break;case 34466:var st=kr.getParameter(34467);rt=st.length;break;case 33309:if(kr.canvas.GLctxObject.version<2){jr.recordError(1282);return}var tt=kr.getSupportedExtensions();rt=2*tt.length;break;case 33307:case 33308:if(kr.canvas.GLctxObject.version<2){jr.recordError(1280);return}rt=ot==33307?3:0;break}if(rt===undefined){var ut=kr.getParameter(ot);switch(typeof ut){case"number":rt=ut;break;case"boolean":rt=ut?1:0;break;case"string":jr.recordError(1280);return;case"object":if(ut===null){switch(ot){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 35097:case 36389:case 34068:{rt=0;break};default:{jr.recordError(1280);return}}}else if(ut instanceof Float32Array||ut instanceof Uint32Array||ut instanceof Int32Array||ut instanceof Array){for(var vt=0;vt<ut.length;++vt){switch(qt){case"Integer":sr[pt+vt*4>>2]=ut[vt];break;case"Float":ur[pt+vt*4>>2]=ut[vt];break;case"Boolean":or[pt+vt>>0]=ut[vt]?1:0;break;default:throw"internal glGet error, bad type: "+qt}}return}else if(ut instanceof WebGLBuffer||ut instanceof WebGLProgram||ut instanceof WebGLFramebuffer||ut instanceof WebGLRenderbuffer||ut instanceof WebGLQuery||ut instanceof WebGLSampler||ut instanceof WebGLSync||ut instanceof WebGLTransformFeedback||ut instanceof WebGLVertexArrayObject||ut instanceof WebGLTexture){rt=ut["name"]|0}else{jr.recordError(1280);return}break;default:jr.recordError(1280);return}}switch(qt){case"Integer64":var wt=0;var xt=[rt>>>0,(wt=rt,+Math.abs(wt)>=1?wt>0?(Math.min(+Math.floor(wt/4294967296),4294967295)|0)>>>0:~~+Math.ceil((wt-+(~~wt>>>0))/4294967296)>>>0:0)];sr[pt>>2]=xt[0];sr[pt+4>>2]=xt[1];break;case"Integer":sr[pt>>2]=rt;break;case"Float":ur[pt>>2]=rt;break;case"Boolean":or[pt>>0]=rt?1:0;break;default:throw"internal glGet error, bad type: "+qt}}function Cr(yt,zt,At,Bt){if(!At){jr.recordError(1281);return}var Ct=kr.getUniform(jr.programs[yt],jr.uniforms[zt]);if(typeof Ct=="number"||typeof Ct=="boolean"){switch(Bt){case"Integer":sr[At>>2]=Ct;break;case"Float":ur[At>>2]=Ct;break;default:throw"internal emscriptenWebGLGetUniform() error, bad type: "+Bt}}else{for(var Dt=0;Dt<Ct.length;Dt++){switch(Bt){case"Integer":sr[At+Dt*4>>2]=Ct[Dt];break;case"Float":ur[At+Dt*4>>2]=Ct[Dt];break;default:throw"internal emscriptenWebGLGetUniform() error, bad type: "+Bt}}}}function Dr(Et,Ft,Gt,Ht){if(!Gt){jr.recordError(1281);return}var It=kr.getVertexAttrib(Et,Ft);if(Ft==34975){sr[Gt>>2]=It["name"]}else if(typeof It=="number"||typeof It=="boolean"){switch(Ht){case"Integer":sr[Gt>>2]=It;break;case"Float":ur[Gt>>2]=It;break;case"FloatToInteger":sr[Gt>>2]=Math["fround"](It);break;default:throw"internal emscriptenWebGLGetVertexAttrib() error, bad type: "+Ht}}else{for(var Jt=0;Jt<It.length;Jt++){switch(Ht){case"Integer":sr[Gt+Jt*4>>2]=It[Jt];break;case"Float":ur[Gt+Jt*4>>2]=It[Jt];break;case"FloatToInteger":sr[Gt+Jt*4>>2]=Math["fround"](It[Jt]);break;default:throw"internal emscriptenWebGLGetVertexAttrib() error, bad type: "+Ht}}}}function Er(Kt,Lt,Mt,Nt){function Ot(Rt,St){return Math.floor((Rt+St-1)/St)*St}var Pt=Kt*Mt;var Qt=Ot(Pt,Nt);return Lt<=0?0:(Lt-1)*Qt+Pt}function Fr(Tt,Ut,Vt,Wt,Xt,Yt){var Zt;var $t;switch(Ut){case 6406:case 6409:case 6402:case 6403:case 36244:$t=1;break;case 6410:case 33319:case 33320:$t=2;break;case 6407:case 35904:case 36248:$t=3;break;case 6408:case 35906:case 36249:$t=4;break;default:jr.recordError(1280);return null}switch(Tt){case 5121:case 5120:Zt=$t*1;break;case 5123:case 36193:case 5131:case 5122:Zt=$t*2;break;case 5125:case 5126:case 5124:Zt=$t*4;break;case 34042:case 35902:case 33640:case 35899:case 34042:Zt=4;break;case 33635:case 32819:case 32820:Zt=2;break;default:jr.recordError(1280);return null}var _t=Er(Vt,Wt,Zt,jr.unpackAlignment);switch(Tt){case 5120:return or.subarray(Xt,Xt+_t);case 5121:return pr.subarray(Xt,Xt+_t);case 5122:return qr.subarray(Xt>>1,Xt+_t>>1);case 5124:return sr.subarray(Xt>>2,Xt+_t>>2);case 5126:return ur.subarray(Xt>>2,Xt+_t>>2);case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return tr.subarray(Xt>>2,Xt+_t>>2);case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return rr.subarray(Xt>>1,Xt+_t>>1);default:jr.recordError(1280);return null}}function Gr(au){switch(au){case 5120:return or;case 5121:return pr;case 5122:return qr;case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return rr;case 5124:return sr;case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return tr;case 5126:return ur;default:return null}}function Hr(bu){switch(bu){case 5120:case 5121:return 0;case 5122:case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return 1;case 5124:case 5126:case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return 2;default:return 0}}var Ir=function(){function cu(){this.Ctx=undefined}cu.prototype.FlushHeap=function(){or=ir["WASM"]["HEAP8"]();pr=ir["WASM"]["HEAPU8"]();qr=ir["WASM"]["HEAP16"]();rr=ir["WASM"]["HEAPU16"]();sr=ir["WASM"]["HEAP32"]();tr=ir["WASM"]["HEAPU32"]();ur=ir["WASM"]["HEAPF32"]()};cu.prototype.CreateContext=function(du,eu){eu=eu||{majorVersion:2,minorVersion:0,alpha:0,depth:0,stencil:0,antialias:0,premultipliedAlpha:0,preserveDrawingBuffer:0,preferLowPowerToHighPerformance:0,failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:0,proxyContextToMainThread:0,renderViaOffscreenBackBuffer:0};if(eu["explicitSwapControl"]){return 0}jr.init();var fu=jr.createContext(du,eu);var gu=jr.makeContextCurrent(fu);this.Ctx=kr;return gu?0:-5};cu.prototype.DestroyContext=function(){jr.deleteContext(jr.currentContext?jr.currentContext.handle:0)};cu.prototype.GetTextureByHandle=function(hu){return hu?jr.textures[hu]:null};cu.prototype.RegisterTexture=function(iu){var ju=jr.getNewId(jr.textures);iu.name=ju;jr.textures[ju]=iu;return ju};cu.prototype._glVertexAttribDivisor=function(ku,lu){kr["vertexAttribDivisor"](ku,lu)};cu.prototype._glActiveTexture=function(mu){kr["activeTexture"](mu)};cu.prototype._glAttachShader=function(nu,ou){kr.attachShader(jr.programs[nu],jr.shaders[ou])};cu.prototype._glBeginQuery=function(pu,qu){kr["beginQuery"](pu,qu?jr.queries[qu]:null)};cu.prototype._glBeginTransformFeedback=function(ru){kr["beginTransformFeedback"](ru)};cu.prototype._glBindAttribLocation=function(su,tu,uu){uu=mr(uu);kr.bindAttribLocation(jr.programs[su],tu,uu)};cu.prototype._glBindBuffer=function(vu,wu){var xu=wu?jr.buffers[wu]:null;if(vu==35051){kr.currentPixelPackBufferBinding=wu}else if(vu==35052){kr.currentPixelUnpackBufferBinding=wu}kr.bindBuffer(vu,xu)};cu.prototype._glBindBufferBase=function(yu,zu,Au){var Bu=Au?jr.buffers[Au]:null;kr["bindBufferBase"](yu,zu,Bu)};cu.prototype._glBindBufferRange=function(Cu,Du,Eu,Fu,Gu){var Hu=Eu?jr.buffers[Eu]:null;kr["bindBufferRange"](Cu,Du,Hu,Fu,Gu)};cu.prototype._glBindFramebuffer=function(Iu,Ju){kr.bindFramebuffer(Iu,Ju?jr.framebuffers[Ju]:null)};cu.prototype._glBindRenderbuffer=function(Ku,Lu){kr.bindRenderbuffer(Ku,Lu?jr.renderbuffers[Lu]:null)};cu.prototype._glBindSampler=function(Mu,Nu){kr["bindSampler"](Mu,Nu?jr.samplers[Nu]:null)};cu.prototype._glBindTexture=function(Ou,Pu){kr.bindTexture(Ou,Pu?jr.textures[Pu]:null)};cu.prototype._glBindTransformFeedback=function(Qu,Ru){var Su=Ru?jr.transformFeedbacks[Ru]:null;if(Ru&&!Su){jr.recordError(1282);return}kr["bindTransformFeedback"](Qu,Su)};cu.prototype._glBindVertexArray=function(Tu){kr["bindVertexArray"](jr.vaos[Tu])};cu.prototype._glBlendEquation=function(Uu){kr["blendEquation"](Uu)};cu.prototype._glBlendEquationSeparate=function(Vu,Wu){kr["blendEquationSeparate"](Vu,Wu)};cu.prototype._glBlendFuncSeparate=function(Xu,Yu,Zu,$u){kr["blendFuncSeparate"](Xu,Yu,Zu,$u)};cu.prototype._glBlitFramebuffer=function(_u,av,bv,cv,dv,ev,fv,gv,hv,iv){kr["blitFramebuffer"](_u,av,bv,cv,dv,ev,fv,gv,hv,iv)};cu.prototype._glBufferData=function(jv,kv,lv,mv){if(!lv){kr.bufferData(jv,kv,mv)}else{if(jr.currentContext.supportsWebGL2EntryPoints){kr.bufferData(jv,pr,mv,lv,kv);return}kr.bufferData(jv,pr.subarray(lv,lv+kv),mv)}};cu.prototype._glBufferSubData=function(nv,ov,pv,qv){if(jr.currentContext.supportsWebGL2EntryPoints){kr.bufferSubData(nv,ov,pr,qv,pv);return}kr.bufferSubData(nv,ov,pr.subarray(qv,qv+pv))};cu.prototype._glCheckFramebufferStatus=function(rv){return kr["checkFramebufferStatus"](rv)};cu.prototype._glClear=function(sv){kr["clear"](sv)};cu.prototype._glClearColor=function(tv,uv,vv,wv){kr["clearColor"](tv,uv,vv,wv)};cu.prototype._glClearDepthf=function(xv){kr["clearDepth"](xv)};cu.prototype._glClearStencil=function(yv){kr["clearStencil"](yv)};cu.prototype._glClientWaitSync=function(zv,Av,Bv,Cv){Bv=Bv>>>0;Cv=Cv>>>0;var Dv=Bv==4294967295&&Cv==4294967295?-1:xr(Bv,Cv,true);return kr.clientWaitSync(jr.syncs[zv],Av,Dv)};cu.prototype._glColorMask=function(Ev,Fv,Gv,Hv){kr.colorMask(!!Ev,!!Fv,!!Gv,!!Hv)};cu.prototype._glCompileShader=function(Iv){kr.compileShader(jr.shaders[Iv])};cu.prototype._glCompressedTexImage2D=function(Jv,Kv,Lv,Mv,Nv,Ov,Pv,Qv){if(jr.currentContext.supportsWebGL2EntryPoints){kr["compressedTexImage2D"](Jv,Kv,Lv,Mv,Nv,Ov,pr,Qv,Pv);return}kr["compressedTexImage2D"](Jv,Kv,Lv,Mv,Nv,Ov,Qv?pr.subarray(Qv,Qv+Pv):null)};cu.prototype._glCompressedTexSubImage2D=function(Rv,Sv,Tv,Uv,Vv,Wv,Xv,Yv,Zv){if(jr.currentContext.supportsWebGL2EntryPoints){kr["compressedTexSubImage2D"](Rv,Sv,Tv,Uv,Vv,Wv,Xv,pr,Zv,Yv);return}kr["compressedTexSubImage2D"](Rv,Sv,Tv,Uv,Vv,Wv,Xv,Zv?pr.subarray(Zv,Zv+Yv):null)};cu.prototype._glCompressedTexSubImage3D=function($v,_v,aw,bw,cw,dw,ew,fw,gw,hw,iw){if(jr.currentContext.supportsWebGL2EntryPoints){kr["compressedTexSubImage3D"]($v,_v,aw,bw,cw,dw,ew,fw,gw,pr,iw,hw)}else{kr["compressedTexSubImage3D"]($v,_v,aw,bw,cw,dw,ew,fw,gw,iw?pr.subarray(iw,iw+hw):null)}};cu.prototype._glCopyBufferSubData=function(jw,kw,lw,mw,nw){kr["copyBufferSubData"](jw,kw,lw,mw,nw)};cu.prototype._glCopyTexImage2D=function(ow,pw,qw,rw,sw,tw,uw,vw){kr["copyTexImage2D"](ow,pw,qw,rw,sw,tw,uw,vw)};cu.prototype._glCopyTexSubImage2D=function(ww,xw,yw,zw,Aw,Bw,Cw,Dw){kr["copyTexSubImage2D"](ww,xw,yw,zw,Aw,Bw,Cw,Dw)};cu.prototype._glCreateProgram=function(){var Ew=jr.getNewId(jr.programs);var Fw=kr.createProgram();Fw.name=Ew;jr.programs[Ew]=Fw;return Ew};cu.prototype._glCreateShader=function(Gw){var Hw=jr.getNewId(jr.shaders);jr.shaders[Hw]=kr.createShader(Gw);return Hw};cu.prototype._glCullFace=function(Iw){kr["cullFace"](Iw)};cu.prototype._glDeleteBuffers=function(Jw,Kw){for(var Lw=0;Lw<Jw;Lw++){var Mw=sr[Kw+Lw*4>>2];var Nw=jr.buffers[Mw];if(!Nw)continue;kr.deleteBuffer(Nw);Nw.name=0;jr.buffers[Mw]=null;if(Mw==jr.currArrayBuffer)jr.currArrayBuffer=0;if(Mw==jr.currElementArrayBuffer)jr.currElementArrayBuffer=0}};cu.prototype._glDeleteFramebuffers=function(Ow,Pw){for(var Qw=0;Qw<Ow;++Qw){var Rw=sr[Pw+Qw*4>>2];var Sw=jr.framebuffers[Rw];if(!Sw)continue;kr.deleteFramebuffer(Sw);Sw.name=0;jr.framebuffers[Rw]=null}};cu.prototype._glDeleteProgram=function(Tw){if(!Tw)return;var Uw=jr.programs[Tw];if(!Uw){jr.recordError(1281);return}kr.deleteProgram(Uw);Uw.name=0;jr.programs[Tw]=null;jr.programInfos[Tw]=null};cu.prototype._glDeleteQueries=function(Vw,Ww){for(var Xw=0;Xw<Vw;Xw++){var Yw=sr[Ww+Xw*4>>2];var Zw=jr.queries[Yw];if(!Zw)continue;kr["deleteQuery"](Zw);jr.queries[Yw]=null}};cu.prototype._glDeleteRenderbuffers=function($w,_w){for(var ax=0;ax<$w;ax++){var bx=sr[_w+ax*4>>2];var cx=jr.renderbuffers[bx];if(!cx)continue;kr.deleteRenderbuffer(cx);cx.name=0;jr.renderbuffers[bx]=null}};cu.prototype._glDeleteSamplers=function(dx,ex){for(var fx=0;fx<dx;fx++){var gx=sr[ex+fx*4>>2];var hx=jr.samplers[gx];if(!hx)continue;kr["deleteSampler"](hx);hx.name=0;jr.samplers[gx]=null}};cu.prototype._glDeleteShader=function(ix){if(!ix)return;var jx=jr.shaders[ix];if(!jx){jr.recordError(1281);return}kr.deleteShader(jx);jr.shaders[ix]=null};cu.prototype._glDeleteSync=function(kx){if(!kx)return;var lx=jr.syncs[kx];if(!lx){jr.recordError(1281);return}kr.deleteSync(lx);lx.name=0;jr.syncs[kx]=null};cu.prototype._glDeleteTextures=function(mx,nx){for(var ox=0;ox<mx;ox++){var px=sr[nx+ox*4>>2];var qx=jr.textures[px];if(!qx)continue;kr.deleteTexture(qx);qx.name=0;jr.textures[px]=null}};cu.prototype._glDeleteTransformFeedbacks=function(rx,sx){for(var tx=0;tx<rx;tx++){var ux=sr[sx+tx*4>>2];var vx=jr.transformFeedbacks[ux];if(!vx)continue;kr["deleteTransformFeedback"](vx);vx.name=0;jr.transformFeedbacks[ux]=null}};cu.prototype._glDeleteVertexArrays=function(wx,xx){for(var yx=0;yx<wx;yx++){var zx=sr[xx+yx*4>>2];kr["deleteVertexArray"](jr.vaos[zx]);jr.vaos[zx]=null}};cu.prototype._glDepthFunc=function(Ax){kr["depthFunc"](Ax)};cu.prototype._glDepthMask=function(Bx){kr.depthMask(!!Bx)};cu.prototype._glDetachShader=function(Cx,Dx){kr.detachShader(jr.programs[Cx],jr.shaders[Dx])};cu.prototype._glDisable=function(Ex){kr["disable"](Ex)};cu.prototype._glDisableVertexAttribArray=function(Fx){kr.disableVertexAttribArray(Fx)};cu.prototype._glDrawArrays=function(Gx,Hx,Ix){kr.drawArrays(Gx,Hx,Ix)};cu.prototype._glDrawArraysInstanced=function(Jx,Kx,Lx,Mx){kr["drawArraysInstanced"](Jx,Kx,Lx,Mx)};cu.prototype._glDrawBuffers=function(Nx,Ox){var Px=jr.tempFixedLengthArray[Nx];for(var Qx=0;Qx<Nx;Qx++){Px[Qx]=sr[Ox+Qx*4>>2]}kr["drawBuffers"](Px)};cu.prototype._glDrawElements=function(Rx,Sx,Tx,Ux){kr.drawElements(Rx,Sx,Tx,Ux)};cu.prototype._glDrawElementsInstanced=function(Vx,Wx,Xx,Yx,Zx){kr["drawElementsInstanced"](Vx,Wx,Xx,Yx,Zx)};cu.prototype._glEnable=function($x){kr["enable"]($x)};cu.prototype._glEnableVertexAttribArray=function(_x){kr.enableVertexAttribArray(_x)};cu.prototype._glEndQuery=function(ay){kr["endQuery"](ay)};cu.prototype._glEndTransformFeedback=function(){kr["endTransformFeedback"]()};cu.prototype._glFenceSync=function(by,cy){var dy=kr.fenceSync(by,cy);if(dy){var ey=jr.getNewId(jr.syncs);dy.name=ey;jr.syncs[ey]=dy;return ey}else{return 0}};cu.prototype._glFinish=function(){kr["finish"]()};cu.prototype._glFlush=function(){kr["flush"]()};cu.prototype._glFlushMappedBufferRange=function(fy,gy,hy){if(!zr(fy)){jr.recordError(1280);lr("GL_INVALID_ENUM in glFlushMappedBufferRange");return}var iy=jr.mappedBuffers[yr(fy)];if(!iy){jr.recordError(1282);lr("buffer was never mapped in glFlushMappedBufferRange");return}if(!(iy.access&16)){jr.recordError(1282);lr("buffer was not mapped with GL_MAP_FLUSH_EXPLICIT_BIT in glFlushMappedBufferRange");return}if(gy<0||hy<0||gy+hy>iy.length){jr.recordError(1281);lr("invalid range in glFlushMappedBufferRange");return}kr.bufferSubData(fy,iy.offset,pr.subarray(iy.mem+gy,iy.mem+gy+hy))};cu.prototype._glFramebufferRenderbuffer=function(jy,ky,ly,my){kr.framebufferRenderbuffer(jy,ky,ly,jr.renderbuffers[my])};cu.prototype._glFramebufferTexture2D=function(ny,oy,py,qy,ry){kr.framebufferTexture2D(ny,oy,py,jr.textures[qy],ry)};cu.prototype._glFramebufferTextureLayer=function(sy,ty,uy,vy,wy){kr.framebufferTextureLayer(sy,ty,jr.textures[uy],vy,wy)};cu.prototype._glFrontFace=function(xy){kr["frontFace"](xy)};cu.prototype._glGenBuffers=function(yy,zy){for(var Ay=0;Ay<yy;Ay++){var By=kr.createBuffer();if(!By){jr.recordError(1282);while(Ay<yy)sr[zy+Ay++*4>>2]=0;return}var Cy=jr.getNewId(jr.buffers);By.name=Cy;jr.buffers[Cy]=By;sr[zy+Ay*4>>2]=Cy}};cu.prototype._glGenFramebuffers=function(Dy,Ey){for(var Fy=0;Fy<Dy;++Fy){var Gy=kr.createFramebuffer();if(!Gy){jr.recordError(1282);while(Fy<Dy)sr[Ey+Fy++*4>>2]=0;return}var Hy=jr.getNewId(jr.framebuffers);Gy.name=Hy;jr.framebuffers[Hy]=Gy;sr[Ey+Fy*4>>2]=Hy}};cu.prototype._glGenQueries=function(Iy,Jy){for(var Ky=0;Ky<Iy;Ky++){var Ly=kr["createQuery"]();if(!Ly){jr.recordError(1282);while(Ky<Iy)sr[Jy+Ky++*4>>2]=0;return}var My=jr.getNewId(jr.queries);Ly.name=My;jr.queries[My]=Ly;sr[Jy+Ky*4>>2]=My}};cu.prototype._glGenRenderbuffers=function(Ny,Oy){for(var Py=0;Py<Ny;Py++){var Qy=kr.createRenderbuffer();if(!Qy){jr.recordError(1282);while(Py<Ny)sr[Oy+Py++*4>>2]=0;return}var Ry=jr.getNewId(jr.renderbuffers);Qy.name=Ry;jr.renderbuffers[Ry]=Qy;sr[Oy+Py*4>>2]=Ry}};cu.prototype._glGenSamplers=function(Sy,Ty){for(var Uy=0;Uy<Sy;Uy++){var Vy=kr["createSampler"]();if(!Vy){jr.recordError(1282);while(Uy<Sy)sr[Ty+Uy++*4>>2]=0;return}var Wy=jr.getNewId(jr.samplers);Vy.name=Wy;jr.samplers[Wy]=Vy;sr[Ty+Uy*4>>2]=Wy}};cu.prototype._glGenTextures=function(Xy,Yy){for(var Zy=0;Zy<Xy;Zy++){var $y=kr.createTexture();if(!$y){jr.recordError(1282);while(Zy<Xy)sr[Yy+Zy++*4>>2]=0;return}var _y=jr.getNewId(jr.textures);$y.name=_y;jr.textures[_y]=$y;sr[Yy+Zy*4>>2]=_y}};cu.prototype._glGenTransformFeedbacks=function(az,bz){for(var cz=0;cz<az;cz++){var dz=kr["createTransformFeedback"]();if(!dz){jr.recordError(1282);while(cz<az)sr[bz+cz++*4>>2]=0;return}var ez=jr.getNewId(jr.transformFeedbacks);dz.name=ez;jr.transformFeedbacks[ez]=dz;sr[bz+cz*4>>2]=ez}};cu.prototype._glGenVertexArrays=function(fz,gz){for(var hz=0;hz<fz;hz++){var iz=kr["createVertexArray"]();if(!iz){jr.recordError(1282);while(hz<fz)sr[gz+hz++*4>>2]=0;return}var jz=jr.getNewId(jr.vaos);iz.name=jz;jr.vaos[jz]=iz;sr[gz+hz*4>>2]=jz}};cu.prototype._glGenerateMipmap=function(kz){kr["generateMipmap"](kz)};cu.prototype._glGetActiveAttrib=function(lz,mz,nz,oz,pz,qz,rz){lz=jr.programs[lz];var sz=kr.getActiveAttrib(lz,mz);if(!sz)return;if(nz>0&&rz){var tz=nr(sz.name,rz,nz);if(oz)sr[oz>>2]=tz}else{if(oz)sr[oz>>2]=0}if(pz)sr[pz>>2]=sz.size;if(qz)sr[qz>>2]=sz.type};cu.prototype._glGetActiveUniform=function(uz,vz,wz,xz,yz,zz,Az){uz=jr.programs[uz];var Bz=kr.getActiveUniform(uz,vz);if(!Bz)return;if(wz>0&&Az){var Cz=nr(Bz.name,Az,wz);if(xz)sr[xz>>2]=Cz}else{if(xz)sr[xz>>2]=0}if(yz)sr[yz>>2]=Bz.size;if(zz)sr[zz>>2]=Bz.type};cu.prototype._glGetActiveUniformBlockName=function(Dz,Ez,Fz,Gz,Hz){Dz=jr.programs[Dz];var Iz=kr["getActiveUniformBlockName"](Dz,Ez);if(!Iz)return;if(Hz&&Fz>0){var Jz=nr(Iz,Hz,Fz);if(Gz)sr[Gz>>2]=Jz}else{if(Gz)sr[Gz>>2]=0}};cu.prototype._glGetActiveUniformBlockiv=function(Kz,Lz,Mz,Nz){if(!Nz){jr.recordError(1281);return}Kz=jr.programs[Kz];switch(Mz){case 35393:var Oz=kr["getActiveUniformBlockName"](Kz,Lz);sr[Nz>>2]=Oz.length+1;return;default:var Pz=kr["getActiveUniformBlockParameter"](Kz,Lz,Mz);if(!Pz)return;if(typeof Pz=="number"){sr[Nz>>2]=Pz}else{for(var Qz=0;Qz<Pz.length;Qz++){sr[Nz+Qz*4>>2]=Pz[Qz]}}}};cu.prototype._glGetActiveUniformsiv=function(Rz,Sz,Tz,Uz,Vz){if(!Vz){jr.recordError(1281);return}if(Sz>0&&Tz==0){jr.recordError(1281);return}Rz=jr.programs[Rz];var Wz=[];for(var Xz=0;Xz<Sz;Xz++){Wz.push(sr[Tz+Xz*4>>2])}var Yz=kr["getActiveUniforms"](Rz,Wz,Uz);if(!Yz)return;var Zz=Yz.length;for(var Xz=0;Xz<Zz;Xz++){sr[Vz+Xz*4>>2]=Yz[Xz]}};cu.prototype._glGetAttribLocation=function($z,_z){return kr.getAttribLocation(jr.programs[$z],mr(_z))};cu.prototype._glGetError=function(){if(jr.lastError){var aA=jr.lastError;jr.lastError=0;return aA}else{return kr.getError()}};cu.prototype._glGetFramebufferAttachmentParameteriv=function(bA,cA,dA,eA){var fA=kr.getFramebufferAttachmentParameter(bA,cA,dA);if(fA instanceof WebGLRenderbuffer||fA instanceof WebGLTexture){fA=fA["name"]|0}sr[eA>>2]=fA};cu.prototype._glGetIntegeri_v=function(gA,hA,iA){Ar(gA,hA,iA,"Integer")};cu.prototype._glGetIntegerv=function(jA,kA){Br(jA,kA,"Integer")};cu.prototype._glGetInternalformativ=function(lA,mA,nA,oA,pA){if(oA<0){jr.recordError(1281);return}var qA=kr["getInternalformatParameter"](lA,mA,32937);if(!qA){jr.recordError(1280);return}switch(nA){case 32937:var rA=Math.min(oA,qA.length);for(var sA=0;sA<rA;sA++){var tA=qA[sA];sr[pA+sA*4>>2]=tA}break;case 37760:if(oA>1){var tA=qA.length;sr[pA>>2]=tA}break;default:jr.recordError(1280)}};cu.prototype._glGetProgramBinary=function(uA,vA,wA,xA,yA){jr.recordError(1282)};cu.prototype._glGetProgramInfoLog=function(zA,AA,BA,CA){var DA=kr.getProgramInfoLog(jr.programs[zA]);if(DA===null)DA="(unknown error)";if(AA>0&&CA){var EA=nr(DA,CA,AA);if(BA)sr[BA>>2]=EA}else{if(BA)sr[BA>>2]=0}};cu.prototype._glGetProgramiv=function(FA,GA,HA){if(!HA){jr.recordError(1281);return}if(FA>=jr.counter){jr.recordError(1281);return}var IA=jr.programInfos[FA];if(!IA){jr.recordError(1282);return}if(GA==35716){var JA=kr.getProgramInfoLog(jr.programs[FA]);if(JA===null)JA="(unknown error)";sr[HA>>2]=JA.length+1}else if(GA==35719){sr[HA>>2]=IA.maxUniformLength}else if(GA==35722){if(IA.maxAttributeLength==-1){FA=jr.programs[FA];var KA=kr.getProgramParameter(FA,kr.ACTIVE_ATTRIBUTES);IA.maxAttributeLength=0;for(var LA=0;LA<KA;++LA){var MA=kr.getActiveAttrib(FA,LA);IA.maxAttributeLength=Math.max(IA.maxAttributeLength,MA.name.length+1)}}sr[HA>>2]=IA.maxAttributeLength}else if(GA==35381){if(IA.maxUniformBlockNameLength==-1){FA=jr.programs[FA];var NA=kr.getProgramParameter(FA,kr.ACTIVE_UNIFORM_BLOCKS);IA.maxUniformBlockNameLength=0;for(var LA=0;LA<NA;++LA){var OA=kr.getActiveUniformBlockName(FA,LA);IA.maxUniformBlockNameLength=Math.max(IA.maxUniformBlockNameLength,OA.length+1)}}sr[HA>>2]=IA.maxUniformBlockNameLength}else{sr[HA>>2]=kr.getProgramParameter(jr.programs[FA],GA)}};cu.prototype._glGetRenderbufferParameteriv=function(PA,QA,RA){if(!RA){jr.recordError(1281);return}sr[RA>>2]=kr.getRenderbufferParameter(PA,QA)};cu.prototype._glGetShaderInfoLog=function(SA,TA,UA,VA){var WA=kr.getShaderInfoLog(jr.shaders[SA]);if(WA===null)WA="(unknown error)";if(TA>0&&VA){var XA=nr(WA,VA,TA);if(UA)sr[UA>>2]=XA}else{if(UA)sr[UA>>2]=0}};cu.prototype._glGetShaderPrecisionFormat=function(YA,ZA,$A,_A){var aB=kr.getShaderPrecisionFormat(YA,ZA);sr[$A>>2]=aB.rangeMin;sr[$A+4>>2]=aB.rangeMax;sr[_A>>2]=aB.precision};cu.prototype._glGetShaderSource=function(bB,cB,dB,eB){var fB=kr.getShaderSource(jr.shaders[bB]);if(!fB)return;if(cB>0&&eB){var gB=nr(fB,eB,cB);if(dB)sr[dB>>2]=gB}else{if(dB)sr[dB>>2]=0}};cu.prototype._glGetShaderiv=function(hB,iB,jB){if(!jB){jr.recordError(1281);return}if(iB==35716){var kB=kr.getShaderInfoLog(jr.shaders[hB]);if(kB===null)kB="(unknown error)";sr[jB>>2]=kB.length+1}else if(iB==35720){var lB=kr.getShaderSource(jr.shaders[hB]);var mB=lB===null||lB.length==0?0:lB.length+1;sr[jB>>2]=mB}else{sr[jB>>2]=kr.getShaderParameter(jr.shaders[hB],iB)}};cu.prototype._glGetString=function(nB){lr("unsupported glGetString");return 0};cu.prototype._glGetStringi=function(oB,pB){lr("unsupported glGetStringi");return 0};cu.prototype._glGetTexParameteriv=function(qB,rB,sB){if(!sB){jr.recordError(1281);return}sr[sB>>2]=kr.getTexParameter(qB,rB)};cu.prototype._glGetUniformBlockIndex=function(tB,uB){tB=jr.programs[tB];uB=mr(uB);return kr["getUniformBlockIndex"](tB,uB)};cu.prototype._glGetUniformIndices=function(vB,wB,xB,yB){if(!yB){jr.recordError(1281);return}if(wB>0&&(xB==0||yB==0)){jr.recordError(1281);return}vB=jr.programs[vB];var zB=[];for(var AB=0;AB<wB;AB++)zB.push(mr(sr[xB+AB*4>>2]));var BB=kr["getUniformIndices"](vB,zB);if(!BB)return;var CB=BB.length;for(var AB=0;AB<CB;AB++){sr[yB+AB*4>>2]=BB[AB]}};cu.prototype._glGetUniformLocation=function(DB,EB){EB=mr(EB);var FB=0;if(EB.indexOf("]",EB.length-1)!==-1){var GB=EB.lastIndexOf("[");var HB=EB.slice(GB+1,-1);if(HB.length>0){FB=parseInt(HB);if(FB<0){return-1}}EB=EB.slice(0,GB)}var IB=jr.programInfos[DB];if(!IB){return-1}var JB=IB.uniforms;var KB=JB[EB];if(KB&&FB<KB[0]){return KB[1]+FB}else{return-1}};cu.prototype._glGetUniformiv=function(LB,MB,NB){Cr(LB,MB,NB,"Integer")};cu.prototype._glGetVertexAttribiv=function(OB,PB,QB){Dr(OB,PB,QB,"FloatToInteger")};cu.prototype._glInvalidateFramebuffer=function(RB,SB,TB){var UB=jr.tempFixedLengthArray[SB];for(var VB=0;VB<SB;VB++){UB[VB]=sr[TB+VB*4>>2]}kr["invalidateFramebuffer"](RB,UB)};cu.prototype._glIsEnabled=function(WB){return kr["isEnabled"](WB)};cu.prototype._glIsVertexArray=function(XB){var YB=jr.vaos[XB];if(!YB)return 0;return kr["isVertexArray"](YB)};cu.prototype._glLinkProgram=function(ZB){kr.linkProgram(jr.programs[ZB]);jr.programInfos[ZB]=null;jr.populateUniformTable(ZB)};cu.prototype._glMapBufferRange=function($B,_B,aC,bC){if(bC!=26&&bC!=10){lr("glMapBufferRange is only supported when access is MAP_WRITE|INVALIDATE_BUFFER");return 0}if(!zr($B)){jr.recordError(1280);lr("GL_INVALID_ENUM in glMapBufferRange");return 0}var cC=vr(aC);if(!cC)return 0;jr.mappedBuffers[yr($B)]={offset:_B,length:aC,mem:cC,access:bC};return cC};cu.prototype._glPixelStorei=function(dC,eC){if(dC==3333){jr.packAlignment=eC}else if(dC==3317){jr.unpackAlignment=eC}kr.pixelStorei(dC,eC)};cu.prototype._glPolygonOffset=function(fC,gC){kr["polygonOffset"](fC,gC)};cu.prototype._glProgramBinary=function(hC,iC,jC,kC){jr.recordError(1280)};cu.prototype._glProgramParameteri=function(lC,mC,nC){jr.recordError(1280)};cu.prototype._glReadBuffer=function(oC){kr["readBuffer"](oC)};cu.prototype._glReadPixels=function(pC,qC,rC,sC,tC,uC,vC){if(jr.currentContext.supportsWebGL2EntryPoints){if(kr.currentPixelPackBufferBinding){kr.readPixels(pC,qC,rC,sC,tC,uC,vC)}else{kr.readPixels(pC,qC,rC,sC,tC,uC,Gr(uC),vC>>Hr(uC))}return}var wC=Fr(uC,tC,rC,sC,vC,tC);if(!wC){jr.recordError(1280);return}kr.readPixels(pC,qC,rC,sC,tC,uC,wC)};cu.prototype._glRenderbufferStorage=function(xC,yC,zC,AC){kr["renderbufferStorage"](xC,yC,zC,AC)};cu.prototype._glRenderbufferStorageMultisample=function(BC,CC,DC,EC,FC){kr["renderbufferStorageMultisample"](BC,CC,DC,EC,FC)};cu.prototype._glSamplerParameteri=function(GC,HC,IC){kr["samplerParameteri"](GC?jr.samplers[GC]:null,HC,IC)};cu.prototype._glScissor=function(JC,KC,LC,MC){kr["scissor"](JC,KC,LC,MC)};cu.prototype._glShaderSource=function(NC,OC,PC,QC){var RC=jr.getSource(NC,OC,PC,QC);kr.shaderSource(jr.shaders[NC],RC)};cu.prototype._glStencilFuncSeparate=function(SC,TC,UC,VC){kr["stencilFuncSeparate"](SC,TC,UC,VC)};cu.prototype._glStencilMask=function(WC){kr["stencilMask"](WC)};cu.prototype._glStencilOpSeparate=function(XC,YC,ZC,$C){kr["stencilOpSeparate"](XC,YC,ZC,$C)};cu.prototype._glTexImage2D=function(_C,aD,bD,cD,dD,eD,fD,gD,hD){if(jr.currentContext.supportsWebGL2EntryPoints){if(kr.currentPixelUnpackBufferBinding){kr.texImage2D(_C,aD,bD,cD,dD,eD,fD,gD,hD)}else if(hD!=0){kr.texImage2D(_C,aD,bD,cD,dD,eD,fD,gD,Gr(gD),hD>>Hr(gD))}else{kr.texImage2D(_C,aD,bD,cD,dD,eD,fD,gD,null)}return}var iD=null;if(hD)iD=Fr(gD,fD,cD,dD,hD,bD);kr.texImage2D(_C,aD,bD,cD,dD,eD,fD,gD,iD)};cu.prototype._glTexImage3D=function(jD,kD,lD,mD,nD,oD,pD,qD,rD,sD){if(kr.currentPixelUnpackBufferBinding){kr["texImage3D"](jD,kD,lD,mD,nD,oD,pD,qD,rD,sD)}else if(sD!=0){kr["texImage3D"](jD,kD,lD,mD,nD,oD,pD,qD,rD,Gr(rD),sD>>Hr(rD))}else{kr["texImage3D"](jD,kD,lD,mD,nD,oD,pD,qD,rD,null)}};cu.prototype._glTexParameterf=function(tD,uD,vD){kr["texParameterf"](tD,uD,vD)};cu.prototype._glTexParameteri=function(wD,xD,yD){kr["texParameteri"](wD,xD,yD)};cu.prototype._glTexParameteriv=function(zD,AD,BD){var CD=sr[BD>>2];kr.texParameteri(zD,AD,CD)};cu.prototype._glTexStorage2D=function(DD,ED,FD,GD,HD){kr["texStorage2D"](DD,ED,FD,GD,HD)};cu.prototype._glTexStorage3D=function(ID,JD,KD,LD,MD,ND){kr["texStorage3D"](ID,JD,KD,LD,MD,ND)};cu.prototype._glTexSubImage2D=function(OD,PD,QD,RD,SD,TD,UD,VD,WD){if(jr.currentContext.supportsWebGL2EntryPoints){if(kr.currentPixelUnpackBufferBinding){kr.texSubImage2D(OD,PD,QD,RD,SD,TD,UD,VD,WD)}else if(WD!=0){kr.texSubImage2D(OD,PD,QD,RD,SD,TD,UD,VD,Gr(VD),WD>>Hr(VD))}else{kr.texSubImage2D(OD,PD,QD,RD,SD,TD,UD,VD,null)}return}var XD=null;if(WD)XD=Fr(VD,UD,SD,TD,WD,0);kr.texSubImage2D(OD,PD,QD,RD,SD,TD,UD,VD,XD)};cu.prototype._glTexSubImage3D=function(YD,ZD,$D,_D,aE,bE,cE,dE,eE,fE,gE){if(kr.currentPixelUnpackBufferBinding){kr["texSubImage3D"](YD,ZD,$D,_D,aE,bE,cE,dE,eE,fE,gE)}else if(gE!=0){kr["texSubImage3D"](YD,ZD,$D,_D,aE,bE,cE,dE,eE,fE,Gr(fE),gE>>Hr(fE))}else{kr["texSubImage3D"](YD,ZD,$D,_D,aE,bE,cE,dE,eE,fE,null)}};cu.prototype._glTransformFeedbackVaryings=function(hE,iE,jE,kE){hE=jr.programs[hE];var lE=[];for(var mE=0;mE<iE;mE++)lE.push(mr(sr[jE+mE*4>>2]));kr["transformFeedbackVaryings"](hE,lE,kE)};cu.prototype._glUniform1fv=function(nE,oE,pE){if(jr.currentContext.supportsWebGL2EntryPoints){kr.uniform1fv(jr.uniforms[nE],ur,pE>>2,oE);return}var qE;if(oE<=jr.MINI_TEMP_BUFFER_SIZE){qE=jr.miniTempBufferViews[oE-1];for(var rE=0;rE<oE;++rE){qE[rE]=ur[pE+4*rE>>2]}}else{qE=ur.subarray(pE>>2,pE+oE*4>>2)}kr.uniform1fv(jr.uniforms[nE],qE)};cu.prototype._glUniform1i=function(sE,tE){kr.uniform1i(jr.uniforms[sE],tE)};cu.prototype._glUniform1iv=function(uE,vE,wE){if(jr.currentContext.supportsWebGL2EntryPoints){kr.uniform1iv(jr.uniforms[uE],sr,wE>>2,vE);return}kr.uniform1iv(jr.uniforms[uE],sr.subarray(wE>>2,wE+vE*4>>2))};cu.prototype._glUniform1uiv=function(xE,yE,zE){if(jr.currentContext.supportsWebGL2EntryPoints){kr.uniform1uiv(jr.uniforms[xE],tr,zE>>2,yE)}else{kr.uniform1uiv(jr.uniforms[xE],tr.subarray(zE>>2,zE+yE*4>>2))}};cu.prototype._glUniform2fv=function(AE,BE,CE){if(jr.currentContext.supportsWebGL2EntryPoints){kr.uniform2fv(jr.uniforms[AE],ur,CE>>2,BE*2);return}var DE;if(2*BE<=jr.MINI_TEMP_BUFFER_SIZE){DE=jr.miniTempBufferViews[2*BE-1];for(var EE=0;EE<2*BE;EE+=2){DE[EE]=ur[CE+4*EE>>2];DE[EE+1]=ur[CE+(4*EE+4)>>2]}}else{DE=ur.subarray(CE>>2,CE+BE*8>>2)}kr.uniform2fv(jr.uniforms[AE],DE)};cu.prototype._glUniform2iv=function(FE,GE,HE){if(jr.currentContext.supportsWebGL2EntryPoints){kr.uniform2iv(jr.uniforms[FE],sr,HE>>2,GE*2);return}kr.uniform2iv(jr.uniforms[FE],sr.subarray(HE>>2,HE+GE*8>>2))};cu.prototype._glUniform2uiv=function(IE,JE,KE){if(jr.currentContext.supportsWebGL2EntryPoints){kr.uniform2uiv(jr.uniforms[IE],tr,KE>>2,JE*2)}else{kr.uniform2uiv(jr.uniforms[IE],tr.subarray(KE>>2,KE+JE*8>>2))}};cu.prototype._glUniform3fv=function(LE,ME,NE){if(jr.currentContext.supportsWebGL2EntryPoints){kr.uniform3fv(jr.uniforms[LE],ur,NE>>2,ME*3);return}var OE;if(3*ME<=jr.MINI_TEMP_BUFFER_SIZE){OE=jr.miniTempBufferViews[3*ME-1];for(var PE=0;PE<3*ME;PE+=3){OE[PE]=ur[NE+4*PE>>2];OE[PE+1]=ur[NE+(4*PE+4)>>2];OE[PE+2]=ur[NE+(4*PE+8)>>2]}}else{OE=ur.subarray(NE>>2,NE+ME*12>>2)}kr.uniform3fv(jr.uniforms[LE],OE)};cu.prototype._glUniform3iv=function(QE,RE,SE){if(jr.currentContext.supportsWebGL2EntryPoints){kr.uniform3iv(jr.uniforms[QE],sr,SE>>2,RE*3);return}kr.uniform3iv(jr.uniforms[QE],sr.subarray(SE>>2,SE+RE*12>>2))};cu.prototype._glUniform3uiv=function(TE,UE,VE){if(jr.currentContext.supportsWebGL2EntryPoints){kr.uniform3uiv(jr.uniforms[TE],tr,VE>>2,UE*3)}else{kr.uniform3uiv(jr.uniforms[TE],tr.subarray(VE>>2,VE+UE*12>>2))}};cu.prototype._glUniform4fv=function(WE,XE,YE){if(jr.currentContext.supportsWebGL2EntryPoints){kr.uniform4fv(jr.uniforms[WE],ur,YE>>2,XE*4);return}var ZE;if(4*XE<=jr.MINI_TEMP_BUFFER_SIZE){ZE=jr.miniTempBufferViews[4*XE-1];for(var $E=0;$E<4*XE;$E+=4){ZE[$E]=ur[YE+4*$E>>2];ZE[$E+1]=ur[YE+(4*$E+4)>>2];ZE[$E+2]=ur[YE+(4*$E+8)>>2];ZE[$E+3]=ur[YE+(4*$E+12)>>2]}}else{ZE=ur.subarray(YE>>2,YE+XE*16>>2)}kr.uniform4fv(jr.uniforms[WE],ZE)};cu.prototype._glUniform4iv=function(_E,aF,bF){if(jr.currentContext.supportsWebGL2EntryPoints){kr.uniform4iv(jr.uniforms[_E],sr,bF>>2,aF*4);return}kr.uniform4iv(jr.uniforms[_E],sr.subarray(bF>>2,bF+aF*16>>2))};cu.prototype._glUniform4uiv=function(cF,dF,eF){if(jr.currentContext.supportsWebGL2EntryPoints){kr.uniform4uiv(jr.uniforms[cF],tr,eF>>2,dF*4)}else{kr.uniform4uiv(jr.uniforms[cF],tr.subarray(eF>>2,eF+dF*16>>2))}};cu.prototype._glUniformBlockBinding=function(fF,gF,hF){fF=jr.programs[fF];kr["uniformBlockBinding"](fF,gF,hF)};cu.prototype._glUniformMatrix3fv=function(iF,jF,kF,lF){if(jr.currentContext.supportsWebGL2EntryPoints){kr.uniformMatrix3fv(jr.uniforms[iF],!!kF,ur,lF>>2,jF*9);return}var mF;if(9*jF<=jr.MINI_TEMP_BUFFER_SIZE){mF=jr.miniTempBufferViews[9*jF-1];for(var nF=0;nF<9*jF;nF+=9){mF[nF]=ur[lF+4*nF>>2];mF[nF+1]=ur[lF+(4*nF+4)>>2];mF[nF+2]=ur[lF+(4*nF+8)>>2];mF[nF+3]=ur[lF+(4*nF+12)>>2];mF[nF+4]=ur[lF+(4*nF+16)>>2];mF[nF+5]=ur[lF+(4*nF+20)>>2];mF[nF+6]=ur[lF+(4*nF+24)>>2];mF[nF+7]=ur[lF+(4*nF+28)>>2];mF[nF+8]=ur[lF+(4*nF+32)>>2]}}else{mF=ur.subarray(lF>>2,lF+jF*36>>2)}kr.uniformMatrix3fv(jr.uniforms[iF],!!kF,mF)};cu.prototype._glUniformMatrix4fv=function(oF,pF,qF,rF){if(jr.currentContext.supportsWebGL2EntryPoints){kr.uniformMatrix4fv(jr.uniforms[oF],!!qF,ur,rF>>2,pF*16);return}var sF;if(16*pF<=jr.MINI_TEMP_BUFFER_SIZE){sF=jr.miniTempBufferViews[16*pF-1];for(var tF=0;tF<16*pF;tF+=16){sF[tF]=ur[rF+4*tF>>2];sF[tF+1]=ur[rF+(4*tF+4)>>2];sF[tF+2]=ur[rF+(4*tF+8)>>2];sF[tF+3]=ur[rF+(4*tF+12)>>2];sF[tF+4]=ur[rF+(4*tF+16)>>2];sF[tF+5]=ur[rF+(4*tF+20)>>2];sF[tF+6]=ur[rF+(4*tF+24)>>2];sF[tF+7]=ur[rF+(4*tF+28)>>2];sF[tF+8]=ur[rF+(4*tF+32)>>2];sF[tF+9]=ur[rF+(4*tF+36)>>2];sF[tF+10]=ur[rF+(4*tF+40)>>2];sF[tF+11]=ur[rF+(4*tF+44)>>2];sF[tF+12]=ur[rF+(4*tF+48)>>2];sF[tF+13]=ur[rF+(4*tF+52)>>2];sF[tF+14]=ur[rF+(4*tF+56)>>2];sF[tF+15]=ur[rF+(4*tF+60)>>2]}}else{sF=ur.subarray(rF>>2,rF+pF*64>>2)}kr.uniformMatrix4fv(jr.uniforms[oF],!!qF,sF)};cu.prototype._glUnmapBuffer=function(uF){if(!zr(uF)){jr.recordError(1280);lr("GL_INVALID_ENUM in glUnmapBuffer");return 0}var vF=yr(uF);var wF=jr.mappedBuffers[vF];if(!wF){jr.recordError(1282);lr("buffer was never mapped in glUnmapBuffer");return 0}jr.mappedBuffers[vF]=null;if(!(wF.access&16))if(jr.currentContext.supportsWebGL2EntryPoints){kr.bufferSubData(uF,wF.offset,pr,wF.mem,wF.length)}else{kr.bufferSubData(uF,wF.offset,pr.subarray(wF.mem,wF.mem+wF.length))}wr(wF.mem);return 1};cu.prototype._glUseProgram=function(xF){kr.useProgram(xF?jr.programs[xF]:null)};cu.prototype._glValidateProgram=function(yF){kr.validateProgram(jr.programs[yF])};cu.prototype._glVertexAttrib4f=function(zF,AF,BF,CF,DF){kr["vertexAttrib4f"](zF,AF,BF,CF,DF)};cu.prototype._glVertexAttrib4fv=function(EF,FF){kr.vertexAttrib4f(EF,ur[FF>>2],ur[FF+4>>2],ur[FF+8>>2],ur[FF+12>>2])};cu.prototype._glVertexAttribIPointer=function(GF,HF,IF,JF,KF){var LF=jr.currentContext.clientBuffers[GF];if(!jr.currArrayBuffer){LF.size=HF;LF.type=IF;LF.normalized=false;LF.stride=JF;LF.ptr=KF;LF.clientside=true;return}LF.clientside=false;kr.vertexAttribIPointer(GF,HF,IF,JF,KF)};cu.prototype._glVertexAttribPointer=function(MF,NF,OF,PF,QF,RF){kr.vertexAttribPointer(MF,NF,OF,!!PF,QF,RF)};cu.prototype._glViewport=function(SF,TF,UF,VF){kr["viewport"](SF,TF,UF,VF)};return cu}();jr.instance=new Ir;jr.instance["_name"]="GL";jr.instance["_textures"]=jr.textures;return[jr.instance]});