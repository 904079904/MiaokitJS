!function (t, e) { "object" == typeof exports && "object" == typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : "object" == typeof exports ? exports.G2Plot = e() : t.G2Plot = e() }(window, (function () {
    return function (t) { var e = {}; function n(i) { if (e[i]) return e[i].exports; var r = e[i] = { i: i, l: !1, exports: {} }; return t[i].call(r.exports, r, r.exports, n), r.l = !0, r.exports } return n.m = t, n.c = e, n.d = function (t, e, i) { n.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: i }) }, n.r = function (t) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }, n.t = function (t, e) { if (1 & e && (t = n(t)), 8 & e) return t; if (4 & e && "object" == typeof t && t && t.__esModule) return t; var i = Object.create(null); if (n.r(i), Object.defineProperty(i, "default", { enumerable: !0, value: t }), 2 & e && "string" != typeof t) for (var r in t) n.d(i, r, function (e) { return t[e] }.bind(null, r)); return i }, n.n = function (t) { var e = t && t.__esModule ? function () { return t.default } : function () { return t }; return n.d(e, "a", e), e }, n.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, n.p = "", n(n.s = 112) }([function (t, e, n) { "use strict"; n.r(e); var i = function (t) { return null !== t && "function" != typeof t && isFinite(t.length) }, r = function (t, e) { return !!i(t) && t.indexOf(e) > -1 }, o = {}.toString, a = function (t, e) { return o.call(t) === "[object " + e + "]" }, s = function (t) { return Array.isArray ? Array.isArray(t) : a(t, "Array") }; function u(t) { return (u = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } var l = function (t) { var e = u(t); return null !== t && "object" === e || "function" === e }; var c = function (t, e) { if (t) if (s(t)) for (var n = 0, i = t.length; n < i && !1 !== e(t[n], n); n++); else if (l(t)) for (var r in t) if (t.hasOwnProperty(r) && !1 === e(t[r], r)) break }, h = function (t, e) { if (!i(t)) return t; var n = []; return c(t, (function (t, i) { e(t, i) && n.push(t) })), n }, p = function (t, e) { return void 0 === e && (e = []), h(t, (function (t) { return !r(e, t) })) }, f = function (t) { return a(t, "Function") }, d = function (t) { return null == t }, g = Object.keys ? function (t) { return Object.keys(t) } : function (t) { var e = []; return c(t, (function (n, i) { f(t) && "prototype" === i || e.push(i) })), e }; var v = function (t, e) { var n = g(e), i = n.length; if (d(t)) return !i; for (var r = 0; r < i; r += 1) { var o = n[r]; if (e[o] !== t[o] || !(o in t)) return !1 } return !0 }; function y(t) { return (y = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } var m = function (t) { return "object" === y(t) && null !== t }, x = function (t) { if (!m(t) || !a(t, "Object")) return !1; if (null === Object.getPrototypeOf(t)) return !0; for (var e = t; null !== Object.getPrototypeOf(e);)e = Object.getPrototypeOf(e); return Object.getPrototypeOf(t) === e }; var _ = function (t, e) { if (!s(t)) return null; var n; if (f(e) && (n = e), x(e) && (n = function (t) { return v(t, e) }), n) for (var i = 0; i < t.length; i += 1)if (n(t[i])) return t[i]; return null }; var b = function (t, e, n) { void 0 === n && (n = 0); for (var i = n; i < t.length; i++)if (e(t[i], i)) return i; return -1 }, w = function (t, e) { for (var n = null, i = 0; i < t.length; i++) { var r = t[i][e]; if (!d(r)) { n = s(r) ? r[0] : r; break } } return n }, M = function (t) { if (!s(t)) return []; for (var e = [], n = 0; n < t.length; n++)e = e.concat(t[n]); return e }, S = function t(e, n) { if (void 0 === n && (n = []), s(e)) for (var i = 0; i < e.length; i += 1)t(e[i], n); else n.push(e); return n }, C = function (t) { if (!(t = h(t, (function (t) { return !isNaN(t) }))).length) return { min: 0, max: 0 }; if (s(t[0])) { for (var e = [], n = 0; n < t.length; n++)e = e.concat(t[n]); t = e } var i = Math.max.apply(null, t); return { min: Math.min.apply(null, t), max: i } }, O = Array.prototype, k = O.splice, P = O.indexOf, A = function (t) { for (var e = [], n = 1; n < arguments.length; n++)e[n - 1] = arguments[n]; for (var i = 0; i < e.length; i++)for (var r = e[i], o = -1; (o = P.call(t, r)) > -1;)k.call(t, o, 1); return t }, L = Array.prototype.splice, T = function (t, e) { if (!i(t)) return []; for (var n = t ? e.length : 0, r = n - 1; n--;) { var o = void 0, a = e[n]; n !== r && a === o || (o = a, L.call(t, a, 1)) } return t }, D = function (t, e, n) { if (!s(t) && !x(t)) return t; var i = n; return c(t, (function (t, n) { i = e(i, t, n) })), i }, j = function (t, e) { var n = []; if (!i(t)) return n; for (var r = -1, o = [], a = t.length; ++r < a;) { var s = t[r]; e(s, r, t) && (n.push(s), o.push(r)) } return T(t, o), n }, I = function (t) { return a(t, "String") }; var B = function (t, e) { var n; if (f(e)) n = function (t, n) { return e(t) - e(n) }; else { var i = []; I(e) ? i.push(e) : s(e) && (i = e), n = function (t, e) { for (var n = 0; n < i.length; n += 1) { var r = i[n]; if (t[r] > e[r]) return 1; if (t[r] < e[r]) return -1 } return 0 } } return t.sort(n), t }, E = function (t) { var e = []; return c(t, (function (t) { r(e, t) || e.push(t) })), e }, F = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; return E([].concat.apply([], t)) }, R = function (t, e) { var n = [], i = {}; return t.forEach((function (t) { var r = t[e]; d(r) || (s(r) || (r = [r]), c(r, (function (t) { i[t] || (n.push(t), i[t] = !0) }))) })), n }; function z(t) { if (i(t)) return t[0] } function N(t) { if (i(t)) { return t[t.length - 1] } } var Y = function (t, e) { return !(!s(t) && !I(t)) && t[0] === e }; var H = function (t, e) { return !(!s(t) && !I(t)) && t[t.length - 1] === e }, G = function (t, e) { for (var n = 0; n < t.length; n++)if (!e(t[n], n)) return !1; return !0 }, W = function (t, e) { for (var n = 0; n < t.length; n++)if (e(t[n], n)) return !0; return !1 }, V = Object.prototype.hasOwnProperty; var X = function (t, e) { if (!e || !s(t)) return {}; var n, i = {}, r = f(e) ? e : function (t) { return t[e] }; return c(t, (function (t) { n = r(t), V.call(i, n) ? i[n].push(t) : i[n] = [t] })), i }, q = function (t, e) { if (!e) return { 0: t }; if (!f(e)) { var n = s(e) ? e : e.replace(/\s+/g, "").split("*"); e = function (t) { for (var e = "_", i = 0, r = n.length; i < r; i++)e += t[n[i]] && t[n[i]].toString(); return e } } return X(t, e) }, U = function (t, e) { if (!e) return [t]; var n = q(t, e), i = []; for (var r in n) i.push(n[r]); return i }; var Z = function (t, e) { return t["_wrap_" + e] }; var Q = function (t, e) { if (t["_wrap_" + e]) return t["_wrap_" + e]; var n = function (n) { t[e](n) }; return t["_wrap_" + e] = n, n }, $ = {}; var K = function (t) { var e = $[t]; if (!e) { for (var n = t.toString(16), i = n.length; i < 6; i++)n = "0" + n; e = "#" + n, $[t] = e } return e }; var J = function (t) { var e = 0, n = 0, i = 0, r = 0; return s(t) ? 1 === t.length ? e = n = i = r = t[0] : 2 === t.length ? (e = i = t[0], n = r = t[1]) : 3 === t.length ? (e = t[0], n = r = t[1], i = t[2]) : (e = t[0], n = t[1], i = t[2], r = t[3]) : e = n = i = r = t, { r1: e, r2: n, r3: i, r4: r } }, tt = function (t, e, n) { return t < e ? e : t > n ? n : t }, et = function (t, e) { var n = e.toString(), i = n.indexOf("."); if (-1 === i) return Math.round(t); var r = n.substr(i + 1).length; return r > 20 && (r = 20), parseFloat(t.toFixed(r)) }, nt = function (t) { return a(t, "Number") }, it = function (t) { return nt(t) && t % 1 != 0 }, rt = function (t) { return nt(t) && t % 2 == 0 }, ot = Number.isInteger ? Number.isInteger : function (t) { return nt(t) && t % 1 == 0 }, at = function (t) { return nt(t) && t < 0 }; function st(t, e, n) { return void 0 === n && (n = 1e-5), Math.abs(t - e) < n } var ut = function (t) { return nt(t) && t % 2 != 0 }, lt = function (t) { return nt(t) && t > 0 }, ct = function (t, e) { if (s(t)) { var n, i, r = t[0]; return n = f(e) ? e(t[0]) : t[0][e], c(t, (function (t) { (i = f(e) ? e(t) : t[e]) > n && (r = t, n = i) })), r } }, ht = function (t, e) { if (s(t)) { var n, i, r = t[0]; return n = f(e) ? e(t[0]) : t[0][e], c(t, (function (t) { (i = f(e) ? e(t) : t[e]) < n && (r = t, n = i) })), r } }, pt = function (t, e) { return (t % e + e) % e }, ft = 180 / Math.PI, dt = function (t) { return ft * t }, gt = parseInt, vt = Math.PI / 180, yt = function (t) { return vt * t }, mt = c, xt = function (t, e) { return t.hasOwnProperty(e) }, _t = xt, bt = Object.values ? function (t) { return Object.values(t) } : function (t) { var e = []; return c(t, (function (n, i) { f(t) && "prototype" === i || e.push(n) })), e }, wt = function (t, e) { return r(bt(t), e) }, Mt = function (t) { return d(t) ? "" : t.toString() }, St = function (t) { return Mt(t).toLowerCase() }, Ct = function (t) { var e = Mt(t); return e.charAt(0).toLowerCase() + e.substring(1) }; var Ot = function (t, e) { return t && e ? t.replace(/\\?\{([^{}]+)\}/g, (function (t, n) { return "\\" === t.charAt(0) ? t.slice(1) : void 0 === e[n] ? "" : e[n] })) : t }, kt = function (t) { return Mt(t).toUpperCase() }, Pt = function (t) { var e = Mt(t); return e.charAt(0).toUpperCase() + e.substring(1) }, At = {}.toString, Lt = function (t) { return At.call(t).replace(/^\[object /, "").replace(/]$/, "") }, Tt = function (t) { return a(t, "Arguments") }, Dt = function (t) { return a(t, "Boolean") }, jt = function (t) { return a(t, "Date") }, It = function (t) { return a(t, "Error") }, Bt = function (t) { return nt(t) && isFinite(t) }, Et = function (t) { return null === t }, Ft = Object.prototype, Rt = function (t) { var e = t && t.constructor; return t === ("function" == typeof e && e.prototype || Ft) }, zt = function (t) { return a(t, "RegExp") }, Nt = function (t) { return void 0 === t }, Yt = function (t) { return t instanceof Element || t instanceof HTMLDocument }; function Ht(t) { return (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || function (t) { return setTimeout(t, 16) })(t) } function Gt(t) { (window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.msCancelAnimationFrame || clearTimeout)(t) } function Wt(t, e) { for (var n in e) e.hasOwnProperty(n) && "constructor" !== n && void 0 !== e[n] && (t[n] = e[n]) } function Vt(t, e, n, i) { return e && Wt(t, e), n && Wt(t, n), i && Wt(t, i), t } var Xt = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; for (var n = t[0], i = 1; i < t.length; i++) { var r = t[i]; f(r) && (r = r.prototype), Vt(n.prototype, r) } }; function qt(t) { return (qt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } var Ut = function t(e) { if ("object" !== qt(e) || null === e) return e; var n; if (s(e)) { n = []; for (var i = 0, r = e.length; i < r; i++)"object" === qt(e[i]) && null != e[i] ? n[i] = t(e[i]) : n[i] = e[i] } else for (var o in n = {}, e) "object" === qt(e[o]) && null != e[o] ? n[o] = t(e[o]) : n[o] = e[o]; return n }; var Zt = function (t, e, n) { var i; return function () { var r = this, o = arguments, a = function () { i = null, n || t.apply(r, o) }, s = n && !i; clearTimeout(i), i = setTimeout(a, e), s && t.apply(r, o) } }, Qt = function (t, e) { if (!f(t)) throw new TypeError("Expected a function"); var n = function n() { for (var i = [], r = 0; r < arguments.length; r++)i[r] = arguments[r]; var o = e ? e.apply(this, i) : i[0], a = n.cache; if (a.has(o)) return a.get(o); var s = t.apply(this, i); return a.set(o, s), s }; return n.cache = new Map, n }; function $t(t, e, n, i) { for (var r in n = n || 0, i = i || 5, e) if (e.hasOwnProperty(r)) { var o = e[r]; null !== o && x(o) ? (x(t[r]) || (t[r] = {}), n < i ? $t(t[r], o, n + 1, i) : t[r] = e[r]) : s(o) ? (t[r] = [], t[r] = t[r].concat(o)) : void 0 !== o && (t[r] = o) } } var Kt = function (t) { for (var e = [], n = 1; n < arguments.length; n++)e[n - 1] = arguments[n]; for (var i = 0; i < e.length; i += 1)$t(t, e[i]); return t }, Jt = function (t, e, n, i) { f(e) || (n = e, e = t, t = function () { }); var r = Object.create ? function (t, e) { return Object.create(t, { constructor: { value: e } }) } : function (t, e) { function n() { } n.prototype = t; var i = new n; return i.constructor = e, i }, o = r(e.prototype, t); return t.prototype = Vt(o, t.prototype), t.superclass = r(e.prototype, e), Vt(o, n), Vt(t, i), t }, te = function (t, e) { if (!i(t)) return -1; var n = Array.prototype.indexOf; if (n) return n.call(t, e); for (var r = -1, o = 0; o < t.length; o++)if (t[o] === e) { r = o; break } return r }, ee = Object.prototype.hasOwnProperty; var ne = function (t) { if (d(t)) return !0; if (i(t)) return !t.length; var e = Lt(t); if ("Map" === e || "Set" === e) return !t.size; if (Rt(t)) return !Object.keys(t).length; for (var n in t) if (ee.call(t, n)) return !1; return !0 }, ie = function t(e, n) { if (e === n) return !0; if (!e || !n) return !1; if (I(e) || I(n)) return !1; if (i(e) || i(n)) { if (e.length !== n.length) return !1; for (var r = !0, o = 0; o < e.length && (r = t(e[o], n[o])); o++); return r } if (m(e) || m(n)) { var a = Object.keys(e), s = Object.keys(n); if (a.length !== s.length) return !1; for (r = !0, o = 0; o < a.length && (r = t(e[a[o]], n[a[o]])); o++); return r } return !1 }, re = function (t, e, n) { return f(n) ? !!n(t, e) : ie(t, e) }, oe = function (t, e) { if (!i(t)) return t; var n = []; return c(t, (function (t, i) { n.push(e(t, i)) })), n }, ae = function (t) { return t }, se = function (t, e) { void 0 === e && (e = ae); var n = {}; return l(t) && !d(t) && Object.keys(t).forEach((function (i) { n[i] = e(t[i], i) })), n }, ue = function (t, e, n) { for (var i = 0, r = I(e) ? e.split(".") : e; t && i < r.length;)t = t[r[i++]]; return void 0 === t || i < r.length ? n : t }, le = function (t, e, n) { var i = t, r = I(e) ? e.split(".") : e; return r.forEach((function (t, e) { e < r.length - 1 ? (l(i[t]) || (i[t] = nt(r[e + 1]) ? [] : {}), i = i[t]) : i[t] = n })), t }, ce = Object.prototype.hasOwnProperty, he = function (t, e) { if (null === t || !x(t)) return {}; var n = {}; return c(e, (function (e) { ce.call(t, e) && (n[e] = t[e]) })), n }, pe = function (t, e, n) { var i, r, o, a, s = 0; n || (n = {}); var u = function () { s = !1 === n.leading ? 0 : Date.now(), i = null, a = t.apply(r, o), i || (r = o = null) }, l = function () { var l = Date.now(); s || !1 !== n.leading || (s = l); var c = e - (l - s); return r = this, o = arguments, c <= 0 || c > e ? (i && (clearTimeout(i), i = null), s = l, a = t.apply(r, o), i || (r = o = null)) : i || !1 === n.trailing || (i = setTimeout(u, c)), a }; return l.cancel = function () { clearTimeout(i), s = 0, i = r = o = null }, l }, fe = function (t) { return i(t) ? Array.prototype.slice.call(t) : [] }, de = {}, ge = function (t) { return de[t = t || "g"] ? de[t] += 1 : de[t] = 1, t + de[t] }, ve = function () { }, ye = function (t) { return t }; function me(t) { return d(t) ? 0 : i(t) ? t.length : Object.keys(t).length } var xe = function () { function t() { this.map = {} } return t.prototype.has = function (t) { return void 0 !== this.map[t] }, t.prototype.get = function (t, e) { var n = this.map[t]; return void 0 === n ? e : n }, t.prototype.set = function (t, e) { this.map[t] = e }, t.prototype.clear = function () { this.map = {} }, t.prototype.delete = function (t) { delete this.map[t] }, t.prototype.size = function () { return Object.keys(this.map).length }, t }(); n.d(e, "contains", (function () { return r })), n.d(e, "includes", (function () { return r })), n.d(e, "difference", (function () { return p })), n.d(e, "find", (function () { return _ })), n.d(e, "findIndex", (function () { return b })), n.d(e, "firstValue", (function () { return w })), n.d(e, "flatten", (function () { return M })), n.d(e, "flattenDeep", (function () { return S })), n.d(e, "getRange", (function () { return C })), n.d(e, "pull", (function () { return A })), n.d(e, "pullAt", (function () { return T })), n.d(e, "reduce", (function () { return D })), n.d(e, "remove", (function () { return j })), n.d(e, "sortBy", (function () { return B })), n.d(e, "union", (function () { return F })), n.d(e, "uniq", (function () { return E })), n.d(e, "valuesOfKey", (function () { return R })), n.d(e, "head", (function () { return z })), n.d(e, "last", (function () { return N })), n.d(e, "startsWith", (function () { return Y })), n.d(e, "endsWith", (function () { return H })), n.d(e, "filter", (function () { return h })), n.d(e, "every", (function () { return G })), n.d(e, "some", (function () { return W })), n.d(e, "group", (function () { return U })), n.d(e, "groupBy", (function () { return X })), n.d(e, "groupToMap", (function () { return q })), n.d(e, "getWrapBehavior", (function () { return Z })), n.d(e, "wrapBehavior", (function () { return Q })), n.d(e, "number2color", (function () { return K })), n.d(e, "parseRadius", (function () { return J })), n.d(e, "clamp", (function () { return tt })), n.d(e, "fixedBase", (function () { return et })), n.d(e, "isDecimal", (function () { return it })), n.d(e, "isEven", (function () { return rt })), n.d(e, "isInteger", (function () { return ot })), n.d(e, "isNegative", (function () { return at })), n.d(e, "isNumberEqual", (function () { return st })), n.d(e, "isOdd", (function () { return ut })), n.d(e, "isPositive", (function () { return lt })), n.d(e, "maxBy", (function () { return ct })), n.d(e, "minBy", (function () { return ht })), n.d(e, "mod", (function () { return pt })), n.d(e, "toDegree", (function () { return dt })), n.d(e, "toInteger", (function () { return gt })), n.d(e, "toRadian", (function () { return yt })), n.d(e, "forIn", (function () { return mt })), n.d(e, "has", (function () { return xt })), n.d(e, "hasKey", (function () { return _t })), n.d(e, "hasValue", (function () { return wt })), n.d(e, "keys", (function () { return g })), n.d(e, "isMatch", (function () { return v })), n.d(e, "values", (function () { return bt })), n.d(e, "lowerCase", (function () { return St })), n.d(e, "lowerFirst", (function () { return Ct })), n.d(e, "substitute", (function () { return Ot })), n.d(e, "upperCase", (function () { return kt })), n.d(e, "upperFirst", (function () { return Pt })), n.d(e, "getType", (function () { return Lt })), n.d(e, "isArguments", (function () { return Tt })), n.d(e, "isArray", (function () { return s })), n.d(e, "isArrayLike", (function () { return i })), n.d(e, "isBoolean", (function () { return Dt })), n.d(e, "isDate", (function () { return jt })), n.d(e, "isError", (function () { return It })), n.d(e, "isFunction", (function () { return f })), n.d(e, "isFinite", (function () { return Bt })), n.d(e, "isNil", (function () { return d })), n.d(e, "isNull", (function () { return Et })), n.d(e, "isNumber", (function () { return nt })), n.d(e, "isObject", (function () { return l })), n.d(e, "isObjectLike", (function () { return m })), n.d(e, "isPlainObject", (function () { return x })), n.d(e, "isPrototype", (function () { return Rt })), n.d(e, "isRegExp", (function () { return zt })), n.d(e, "isString", (function () { return I })), n.d(e, "isType", (function () { return a })), n.d(e, "isUndefined", (function () { return Nt })), n.d(e, "isElement", (function () { return Yt })), n.d(e, "requestAnimationFrame", (function () { return Ht })), n.d(e, "clearAnimationFrame", (function () { return Gt })), n.d(e, "augment", (function () { return Xt })), n.d(e, "clone", (function () { return Ut })), n.d(e, "debounce", (function () { return Zt })), n.d(e, "memoize", (function () { return Qt })), n.d(e, "deepMix", (function () { return Kt })), n.d(e, "each", (function () { return c })), n.d(e, "extend", (function () { return Jt })), n.d(e, "indexOf", (function () { return te })), n.d(e, "isEmpty", (function () { return ne })), n.d(e, "isEqual", (function () { return ie })), n.d(e, "isEqualWith", (function () { return re })), n.d(e, "map", (function () { return oe })), n.d(e, "mapValues", (function () { return se })), n.d(e, "mix", (function () { return Vt })), n.d(e, "assign", (function () { return Vt })), n.d(e, "get", (function () { return ue })), n.d(e, "set", (function () { return le })), n.d(e, "pick", (function () { return he })), n.d(e, "throttle", (function () { return pe })), n.d(e, "toArray", (function () { return fe })), n.d(e, "toString", (function () { return Mt })), n.d(e, "uniqueId", (function () { return ge })), n.d(e, "noop", (function () { return ve })), n.d(e, "identity", (function () { return ye })), n.d(e, "size", (function () { return me })), n.d(e, "Cache", (function () { return xe })) }, function (t, e, n) {
        "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) }
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */n.r(e), n.d(e, "__extends", (function () { return o })), n.d(e, "__assign", (function () { return a })), n.d(e, "__rest", (function () { return s })), n.d(e, "__decorate", (function () { return u })), n.d(e, "__param", (function () { return l })), n.d(e, "__metadata", (function () { return c })), n.d(e, "__awaiter", (function () { return h })), n.d(e, "__generator", (function () { return p })), n.d(e, "__exportStar", (function () { return f })), n.d(e, "__values", (function () { return d })), n.d(e, "__read", (function () { return g })), n.d(e, "__spread", (function () { return v })), n.d(e, "__spreadArrays", (function () { return y })), n.d(e, "__await", (function () { return m })), n.d(e, "__asyncGenerator", (function () { return x })), n.d(e, "__asyncDelegator", (function () { return _ })), n.d(e, "__asyncValues", (function () { return b })), n.d(e, "__makeTemplateObject", (function () { return w })), n.d(e, "__importStar", (function () { return M })), n.d(e, "__importDefault", (function () { return S })); var r = function (t, e) { return (r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e } || function (t, e) { for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]) })(t, e) }; function o(t, e) { function n() { this.constructor = t } r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n) } var a = function () { return (a = Object.assign || function (t) { for (var e, n = 1, i = arguments.length; n < i; n++)for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]); return t }).apply(this, arguments) }; function s(t, e) { var n = {}; for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && e.indexOf(i) < 0 && (n[i] = t[i]); if (null != t && "function" == typeof Object.getOwnPropertySymbols) { var r = 0; for (i = Object.getOwnPropertySymbols(t); r < i.length; r++)e.indexOf(i[r]) < 0 && Object.prototype.propertyIsEnumerable.call(t, i[r]) && (n[i[r]] = t[i[r]]) } return n } function u(t, e, n, r) { var o, a = arguments.length, s = a < 3 ? e : null === r ? r = Object.getOwnPropertyDescriptor(e, n) : r; if ("object" === ("undefined" == typeof Reflect ? "undefined" : i(Reflect)) && "function" == typeof Reflect.decorate) s = Reflect.decorate(t, e, n, r); else for (var u = t.length - 1; u >= 0; u--)(o = t[u]) && (s = (a < 3 ? o(s) : a > 3 ? o(e, n, s) : o(e, n)) || s); return a > 3 && s && Object.defineProperty(e, n, s), s } function l(t, e) { return function (n, i) { e(n, i, t) } } function c(t, e) { if ("object" === ("undefined" == typeof Reflect ? "undefined" : i(Reflect)) && "function" == typeof Reflect.metadata) return Reflect.metadata(t, e) } function h(t, e, n, i) { return new (n || (n = Promise))((function (r, o) { function a(t) { try { u(i.next(t)) } catch (t) { o(t) } } function s(t) { try { u(i.throw(t)) } catch (t) { o(t) } } function u(t) { t.done ? r(t.value) : new n((function (e) { e(t.value) })).then(a, s) } u((i = i.apply(t, e || [])).next()) })) } function p(t, e) { var n, i, r, o, a = { label: 0, sent: function () { if (1 & r[0]) throw r[1]; return r[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; a;)try { if (n = 1, i && (r = 2 & o[0] ? i.return : o[0] ? i.throw || ((r = i.return) && r.call(i), 0) : i.next) && !(r = r.call(i, o[1])).done) return r; switch (i = 0, r && (o = [2 & o[0], r.value]), o[0]) { case 0: case 1: r = o; break; case 4: return a.label++ , { value: o[1], done: !1 }; case 5: a.label++ , i = o[1], o = [0]; continue; case 7: o = a.ops.pop(), a.trys.pop(); continue; default: if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === o[0] || 2 === o[0])) { a = 0; continue } if (3 === o[0] && (!r || o[1] > r[0] && o[1] < r[3])) { a.label = o[1]; break } if (6 === o[0] && a.label < r[1]) { a.label = r[1], r = o; break } if (r && a.label < r[2]) { a.label = r[2], a.ops.push(o); break } r[2] && a.ops.pop(), a.trys.pop(); continue }o = e.call(t, a) } catch (t) { o = [6, t], i = 0 } finally { n = r = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } } function f(t, e) { for (var n in t) e.hasOwnProperty(n) || (e[n] = t[n]) } function d(t) { var e = "function" == typeof Symbol && t[Symbol.iterator], n = 0; return e ? e.call(t) : { next: function () { return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t } } } } function g(t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var i, r, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(i = o.next()).done;)a.push(i.value) } catch (t) { r = { error: t } } finally { try { i && !i.done && (n = o.return) && n.call(o) } finally { if (r) throw r.error } } return a } function v() { for (var t = [], e = 0; e < arguments.length; e++)t = t.concat(g(arguments[e])); return t } function y() { for (var t = 0, e = 0, n = arguments.length; e < n; e++)t += arguments[e].length; var i = Array(t), r = 0; for (e = 0; e < n; e++)for (var o = arguments[e], a = 0, s = o.length; a < s; a++ , r++)i[r] = o[a]; return i } function m(t) { return this instanceof m ? (this.v = t, this) : new m(t) } function x(t, e, n) { if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined."); var i, r = n.apply(t, e || []), o = []; return i = {}, a("next"), a("throw"), a("return"), i[Symbol.asyncIterator] = function () { return this }, i; function a(t) { r[t] && (i[t] = function (e) { return new Promise((function (n, i) { o.push([t, e, n, i]) > 1 || s(t, e) })) }) } function s(t, e) { try { (n = r[t](e)).value instanceof m ? Promise.resolve(n.value.v).then(u, l) : c(o[0][2], n) } catch (t) { c(o[0][3], t) } var n } function u(t) { s("next", t) } function l(t) { s("throw", t) } function c(t, e) { t(e), o.shift(), o.length && s(o[0][0], o[0][1]) } } function _(t) { var e, n; return e = {}, i("next"), i("throw", (function (t) { throw t })), i("return"), e[Symbol.iterator] = function () { return this }, e; function i(i, r) { e[i] = t[i] ? function (e) { return (n = !n) ? { value: m(t[i](e)), done: "return" === i } : r ? r(e) : e } : r } } function b(t) { if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined."); var e, n = t[Symbol.asyncIterator]; return n ? n.call(t) : (t = d(t), e = {}, i("next"), i("throw"), i("return"), e[Symbol.asyncIterator] = function () { return this }, e); function i(n) { e[n] = t[n] && function (e) { return new Promise((function (i, r) { (function (t, e, n, i) { Promise.resolve(i).then((function (e) { t({ value: e, done: n }) }), e) })(i, r, (e = t[n](e)).done, e.value) })) } } } function w(t, e) { return Object.defineProperty ? Object.defineProperty(t, "raw", { value: e }) : t.raw = e, t } function M(t) { if (t && t.__esModule) return t; var e = {}; if (null != t) for (var n in t) Object.hasOwnProperty.call(t, n) && (e[n] = t[n]); return e.default = t, e } function S(t) { return t && t.__esModule ? t : { default: t } }
    }, function (t, e, n) {
        (function (t) {
            var n, i, r, o; function a(t) { return (a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } window, o = function () {
                return function (t) { var e = {}; function n(i) { if (e[i]) return e[i].exports; var r = e[i] = { i: i, l: !1, exports: {} }; return t[i].call(r.exports, r, r.exports, n), r.l = !0, r.exports } return n.m = t, n.c = e, n.d = function (t, e, i) { n.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: i }) }, n.r = function (t) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }, n.t = function (t, e) { if (1 & e && (t = n(t)), 8 & e) return t; if (4 & e && "object" == a(t) && t && t.__esModule) return t; var i = Object.create(null); if (n.r(i), Object.defineProperty(i, "default", { enumerable: !0, value: t }), 2 & e && "string" != typeof t) for (var r in t) n.d(i, r, function (e) { return t[e] }.bind(null, r)); return i }, n.n = function (t) { var e = t && t.__esModule ? function () { return t.default } : function () { return t }; return n.d(e, "a", e), e }, n.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, n.p = "", n(n.s = 20) }([function (t, e, n) { var i; i = function () { return function (t) { var e = {}; function n(i) { if (e[i]) return e[i].exports; var r = e[i] = { i: i, l: !1, exports: {} }; return t[i].call(r.exports, r, r.exports, n), r.l = !0, r.exports } return n.m = t, n.c = e, n.d = function (t, e, i) { n.o(t, e) || Object.defineProperty(t, e, { configurable: !1, enumerable: !0, get: i }) }, n.n = function (t) { var e = t && t.__esModule ? function () { return t.default } : function () { return t }; return n.d(e, "a", e), e }, n.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, n.p = "", n(n.s = 40) }([function (t, e, n) { var i = n(16), r = n(1); t.exports = function (t, e) { if (t) if (r(t)) for (var n = 0, o = t.length; n < o && !1 !== e(t[n], n); n++); else if (i(t)) for (var a in t) if (t.hasOwnProperty(a) && !1 === e(t[a], a)) break } }, function (t, e, n) { var i = n(2), r = Array.isArray ? Array.isArray : function (t) { return i(t, "Array") }; t.exports = r }, function (t, e) { var n = {}.toString; t.exports = function (t, e) { return n.call(t) === "[object " + e + "]" } }, function (t, e, n) { var i = n(2); t.exports = function (t) { return i(t, "Function") } }, function (t, e) { t.exports = function (t) { return null !== t && "function" != typeof t && isFinite(t.length) } }, function (t, e) { t.exports = function (t) { return null == t } }, function (t, e, n) { var i = n(2); t.exports = function (t) { return i(t, "Number") } }, function (t, e, n) { var i = n(13), r = n(2); t.exports = function (t) { if (!i(t) || !r(t, "Object")) return !1; if (null === Object.getPrototypeOf(t)) return !0; for (var e = t; null !== Object.getPrototypeOf(e);)e = Object.getPrototypeOf(e); return Object.getPrototypeOf(t) === e } }, function (t, e, n) { var i = n(5); t.exports = function (t) { return i(t) ? "" : t.toString() } }, function (t, e, n) { var i = n(4), r = Array.prototype.indexOf; t.exports = function (t, e) { return !!i(t) && r.call(t, e) > -1 } }, function (t, e, n) { var i = n(2); t.exports = function (t) { return i(t, "String") } }, function (t, e) { function n(t, e) { for (var n in e) e.hasOwnProperty(n) && "constructor" !== n && void 0 !== e[n] && (t[n] = e[n]) } t.exports = function (t, e, i, r) { return e && n(t, e), i && n(t, i), r && n(t, r), t } }, function (t, e, n) { var i = n(0), r = n(4); t.exports = function (t, e) { if (!r(t)) return t; var n = []; return i(t, (function (t, i) { e(t, i) && n.push(t) })), n } }, function (t, e) { var n = "function" == typeof Symbol && "symbol" == a(Symbol.iterator) ? function (t) { return a(t) } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : a(t) }; t.exports = function (t) { return "object" === (void 0 === t ? "undefined" : n(t)) && null !== t } }, function (t, e, n) { var i = n(4); t.exports = function (t) { return i(t) ? Array.prototype.slice.call(t) : [] } }, function (t, e) { Object.defineProperty(e, "__esModule", { value: !0 }), e.setMatrixArrayType = function (t) { e.ARRAY_TYPE = t }, e.toRadian = function (t) { return t * i }, e.equals = function (t, e) { return Math.abs(t - e) <= n * Math.max(1, Math.abs(t), Math.abs(e)) }; var n = e.EPSILON = 1e-6; e.ARRAY_TYPE = "undefined" != typeof Float32Array ? Float32Array : Array, e.RANDOM = Math.random; var i = Math.PI / 180 }, function (t, e) { var n = "function" == typeof Symbol && "symbol" == a(Symbol.iterator) ? function (t) { return a(t) } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : a(t) }; t.exports = function (t) { var e = void 0 === t ? "undefined" : n(t); return null !== t && "object" === e || "function" === e } }, function (t, e, n) { var i = n(18), r = n(5); t.exports = function (t, e) { var n = i(e), o = n.length; if (r(t)) return !o; for (var a = 0; a < o; a += 1) { var s = n[a]; if (e[s] !== t[s] || !(s in t)) return !1 } return !0 } }, function (t, e, n) { var i = n(0), r = n(3), o = Object.keys ? function (t) { return Object.keys(t) } : function (t) { var e = []; return i(t, (function (n, i) { r(t) && "prototype" === i || e.push(i) })), e }; t.exports = o }, function (t, e, n) { var i = n(4), r = Array.prototype.splice; t.exports = function (t, e) { if (!i(t)) return []; for (var n = t ? e.length : 0, o = n - 1; n--;) { var a = void 0, s = e[n]; n !== o && s === a || (a = s, r.call(t, s, 1)) } return t } }, function (t, e, n) { var i = n(0), r = n(9); t.exports = function (t) { var e = []; return i(t, (function (t) { r(e, t) || e.push(t) })), e } }, function (t, e) { t.exports = function (t, e, n) { return t < e ? e : t > n ? n : t } }, function (t, e) { t.exports = parseInt }, function (t, e, n) { var i = n(89); i.translate = function (t, e, n) { var r = new Array(9); return i.fromTranslation(r, n), i.multiply(t, r, e) }, i.rotate = function (t, e, n) { var r = new Array(9); return i.fromRotation(r, n), i.multiply(t, r, e) }, i.scale = function (t, e, n) { var r = new Array(9); return i.fromScaling(r, n), i.multiply(t, r, e) }, t.exports = i }, function (t, e, n) { var i = "function" == typeof Symbol && "symbol" == a(Symbol.iterator) ? function (t) { return a(t) } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : a(t) }, r = n(1); t.exports = function t(e) { if ("object" !== (void 0 === e ? "undefined" : i(e)) || null === e) return e; var n = void 0; if (r(e)) { n = []; for (var o = 0, a = e.length; o < a; o++)"object" === i(e[o]) && null != e[o] ? n[o] = t(e[o]) : n[o] = e[o] } else for (var s in n = {}, e) "object" === i(e[s]) && null != e[s] ? n[s] = t(e[s]) : n[s] = e[s]; return n } }, function (t, e) { t.exports = function (t, e) { return t.hasOwnProperty(e) } }, function (t, e, n) { var i = n(0), r = n(3), o = Object.values ? function (t) { return Object.values(t) } : function (t) { var e = []; return i(t, (function (n, i) { r(t) && "prototype" === i || e.push(n) })), e }; t.exports = o }, function (t, e, n) { var i = n(28); t.exports = function (t, e, n, r, o) { if (o) return [["M", +t + +o, e], ["l", n - 2 * o, 0], ["a", o, o, 0, 0, 1, o, o], ["l", 0, r - 2 * o], ["a", o, o, 0, 0, 1, -o, o], ["l", 2 * o - n, 0], ["a", o, o, 0, 0, 1, -o, -o], ["l", 0, 2 * o - r], ["a", o, o, 0, 0, 1, o, -o], ["z"]]; var a = [["M", t, e], ["l", n, 0], ["l", 0, r], ["l", -n, 0], ["z"]]; return a.parsePathArray = i, a } }, function (t, e) { var n = /,?([a-z]),?/gi; t.exports = function (t) { return t.join(",").replace(n, "$1") } }, function (t, e, n) { var i = n(30), r = function t(e, n, i, r, o, a, s, u, l, c) { i === r && (i += 1); var h = 120 * Math.PI / 180, p = Math.PI / 180 * (+o || 0), f = [], d = void 0, g = void 0, v = void 0, y = void 0, m = void 0, x = function (t, e, n) { return { x: t * Math.cos(n) - e * Math.sin(n), y: t * Math.sin(n) + e * Math.cos(n) } }; if (c) g = c[0], v = c[1], y = c[2], m = c[3]; else { e = (d = x(e, n, -p)).x, n = d.y, u = (d = x(u, l, -p)).x, l = d.y, e === u && n === l && (u += 1, l += 1); var _ = (e - u) / 2, b = (n - l) / 2, w = _ * _ / (i * i) + b * b / (r * r); w > 1 && (i *= w = Math.sqrt(w), r *= w); var M = i * i, S = r * r, C = (a === s ? -1 : 1) * Math.sqrt(Math.abs((M * S - M * b * b - S * _ * _) / (M * b * b + S * _ * _))); y = C * i * b / r + (e + u) / 2, m = C * -r * _ / i + (n + l) / 2, g = Math.asin(((n - m) / r).toFixed(9)), v = Math.asin(((l - m) / r).toFixed(9)), g = e < y ? Math.PI - g : g, v = u < y ? Math.PI - v : v, g < 0 && (g = 2 * Math.PI + g), v < 0 && (v = 2 * Math.PI + v), s && g > v && (g -= 2 * Math.PI), !s && v > g && (v -= 2 * Math.PI) } var O = v - g; if (Math.abs(O) > h) { var k = v, P = u, A = l; v = g + h * (s && v > g ? 1 : -1), f = t(u = y + i * Math.cos(v), l = m + r * Math.sin(v), i, r, o, 0, s, P, A, [v, k, y, m]) } O = v - g; var L = Math.cos(g), T = Math.sin(g), D = Math.cos(v), j = Math.sin(v), I = Math.tan(O / 4), B = 4 / 3 * i * I, E = 4 / 3 * r * I, F = [e, n], R = [e + B * T, n - E * L], z = [u + B * j, l - E * D], N = [u, l]; if (R[0] = 2 * F[0] - R[0], R[1] = 2 * F[1] - R[1], c) return [R, z, N].concat(f); for (var Y = [], H = 0, G = (f = [R, z, N].concat(f).join().split(",")).length; H < G; H++)Y[H] = H % 2 ? x(f[H - 1], f[H], p).y : x(f[H], f[H + 1], p).x; return Y }, o = function (t, e, n, i) { return [t, e, n, i, n, i] }, a = function (t, e, n, i, r, o) { return [1 / 3 * t + 2 / 3 * n, 1 / 3 * e + 2 / 3 * i, 1 / 3 * r + 2 / 3 * n, 1 / 3 * o + 2 / 3 * i, r, o] }; t.exports = function (t, e) { var n = i(t), s = e && i(e), u = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, l = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, c = [], h = [], p = "", f = "", d = void 0, g = function (t, e, n) { var i = void 0, s = void 0; if (!t) return ["C", e.x, e.y, e.x, e.y, e.x, e.y]; switch (!(t[0] in { T: 1, Q: 1 }) && (e.qx = e.qy = null), t[0]) { case "M": e.X = t[1], e.Y = t[2]; break; case "A": t = ["C"].concat(r.apply(0, [e.x, e.y].concat(t.slice(1)))); break; case "S": "C" === n || "S" === n ? (i = 2 * e.x - e.bx, s = 2 * e.y - e.by) : (i = e.x, s = e.y), t = ["C", i, s].concat(t.slice(1)); break; case "T": "Q" === n || "T" === n ? (e.qx = 2 * e.x - e.qx, e.qy = 2 * e.y - e.qy) : (e.qx = e.x, e.qy = e.y), t = ["C"].concat(a(e.x, e.y, e.qx, e.qy, t[1], t[2])); break; case "Q": e.qx = t[1], e.qy = t[2], t = ["C"].concat(a(e.x, e.y, t[1], t[2], t[3], t[4])); break; case "L": t = ["C"].concat(o(e.x, e.y, t[1], t[2])); break; case "H": t = ["C"].concat(o(e.x, e.y, t[1], e.y)); break; case "V": t = ["C"].concat(o(e.x, e.y, e.x, t[1])); break; case "Z": t = ["C"].concat(o(e.x, e.y, e.X, e.Y)) }return t }, v = function (t, e) { if (t[e].length > 7) { t[e].shift(); for (var i = t[e]; i.length;)c[e] = "A", s && (h[e] = "A"), t.splice(e++, 0, ["C"].concat(i.splice(0, 6))); t.splice(e, 1), d = Math.max(n.length, s && s.length || 0) } }, y = function (t, e, i, r, o) { t && e && "M" === t[o][0] && "M" !== e[o][0] && (e.splice(o, 0, ["M", r.x, r.y]), i.bx = 0, i.by = 0, i.x = t[o][1], i.y = t[o][2], d = Math.max(n.length, s && s.length || 0)) }; d = Math.max(n.length, s && s.length || 0); for (var m = 0; m < d; m++) { n[m] && (p = n[m][0]), "C" !== p && (c[m] = p, m && (f = c[m - 1])), n[m] = g(n[m], u, f), "A" !== c[m] && "C" === p && (c[m] = "C"), v(n, m), s && (s[m] && (p = s[m][0]), "C" !== p && (h[m] = p, m && (f = h[m - 1])), s[m] = g(s[m], l, f), "A" !== h[m] && "C" === p && (h[m] = "C"), v(s, m)), y(n, s, u, l, m), y(s, n, l, u, m); var x = n[m], _ = s && s[m], b = x.length, w = s && _.length; u.x = x[b - 2], u.y = x[b - 1], u.bx = parseFloat(x[b - 4]) || u.x, u.by = parseFloat(x[b - 3]) || u.y, l.bx = s && (parseFloat(_[w - 4]) || l.x), l.by = s && (parseFloat(_[w - 3]) || l.y), l.x = s && _[w - 2], l.y = s && _[w - 1] } return s ? [n, s] : n } }, function (t, e, n) { var i = n(31), r = n(32); function o(t, e, n, i, r) { var o = []; if (null === r && null === i && (i = n), t = +t, e = +e, n = +n, i = +i, null !== r) { var a = Math.PI / 180, s = t + n * Math.cos(-i * a), u = t + n * Math.cos(-r * a); o = [["M", s, e + n * Math.sin(-i * a)], ["A", n, n, 0, +(r - i > 180), 0, u, e + n * Math.sin(-r * a)]] } else o = [["M", t, e], ["m", 0, -i], ["a", n, i, 0, 1, 1, 0, 2 * i], ["a", n, i, 0, 1, 1, 0, -2 * i], ["z"]]; return o } t.exports = function (t) { if (!(t = i(t)) || !t.length) return [["M", 0, 0]]; var e = [], n = 0, a = 0, s = 0, u = 0, l = 0, c = void 0, h = void 0; "M" === t[0][0] && (s = n = +t[0][1], u = a = +t[0][2], l++ , e[0] = ["M", n, a]); for (var p, f, d = 3 === t.length && "M" === t[0][0] && "R" === t[1][0].toUpperCase() && "Z" === t[2][0].toUpperCase(), g = l, v = t.length; g < v; g++) { if (e.push(p = []), (c = (f = t[g])[0]) !== c.toUpperCase()) switch (p[0] = c.toUpperCase(), p[0]) { case "A": p[1] = f[1], p[2] = f[2], p[3] = f[3], p[4] = f[4], p[5] = f[5], p[6] = +f[6] + n, p[7] = +f[7] + a; break; case "V": p[1] = +f[1] + a; break; case "H": p[1] = +f[1] + n; break; case "R": for (var y = 2, m = (h = [n, a].concat(f.slice(1))).length; y < m; y++)h[y] = +h[y] + n, h[++y] = +h[y] + a; e.pop(), e = e.concat(r(h, d)); break; case "O": e.pop(), (h = o(n, a, f[1], f[2])).push(h[0]), e = e.concat(h); break; case "U": e.pop(), e = e.concat(o(n, a, f[1], f[2], f[3])), p = ["U"].concat(e[e.length - 1].slice(-2)); break; case "M": s = +f[1] + n, u = +f[2] + a; break; default: for (var x = 1, _ = f.length; x < _; x++)p[x] = +f[x] + (x % 2 ? n : a) } else if ("R" === c) h = [n, a].concat(f.slice(1)), e.pop(), e = e.concat(r(h, d)), p = ["R"].concat(f.slice(-2)); else if ("O" === c) e.pop(), (h = o(n, a, f[1], f[2])).push(h[0]), e = e.concat(h); else if ("U" === c) e.pop(), e = e.concat(o(n, a, f[1], f[2], f[3])), p = ["U"].concat(e[e.length - 1].slice(-2)); else for (var b = 0, w = f.length; b < w; b++)p[b] = f[b]; if ("O" !== (c = c.toUpperCase())) switch (p[0]) { case "Z": n = +s, a = +u; break; case "H": n = p[1]; break; case "V": a = p[1]; break; case "M": s = p[p.length - 2], u = p[p.length - 1]; break; default: n = p[p.length - 2], a = p[p.length - 1] } } return e } }, function (t, e) { var n = "function" == typeof Symbol && "symbol" == a(Symbol.iterator) ? function (t) { return a(t) } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : a(t) }, i = "\t\n\v\f\r   ᠎             　\u2028\u2029", r = new RegExp("([a-z])[" + i + ",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[" + i + "]*,?[" + i + "]*)+)", "ig"), o = new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[" + i + "]*,?[" + i + "]*", "ig"); t.exports = function (t) { if (!t) return null; if ((void 0 === t ? "undefined" : n(t)) === n([])) return t; var e = { a: 7, c: 6, o: 2, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, u: 3, z: 0 }, i = []; return String(t).replace(r, (function (t, n, r) { var a = [], s = n.toLowerCase(); if (r.replace(o, (function (t, e) { e && a.push(+e) })), "m" === s && a.length > 2 && (i.push([n].concat(a.splice(0, 2))), s = "l", n = "m" === n ? "l" : "L"), "o" === s && 1 === a.length && i.push([n, a[0]]), "r" === s) i.push([n].concat(a)); else for (; a.length >= e[s] && (i.push([n].concat(a.splice(0, e[s]))), e[s]);); })), i } }, function (t, e) { t.exports = function (t, e) { for (var n = [], i = 0, r = t.length; r - 2 * !e > i; i += 2) { var o = [{ x: +t[i - 2], y: +t[i - 1] }, { x: +t[i], y: +t[i + 1] }, { x: +t[i + 2], y: +t[i + 3] }, { x: +t[i + 4], y: +t[i + 5] }]; e ? i ? r - 4 === i ? o[3] = { x: +t[0], y: +t[1] } : r - 2 === i && (o[2] = { x: +t[0], y: +t[1] }, o[3] = { x: +t[2], y: +t[3] }) : o[0] = { x: +t[r - 2], y: +t[r - 1] } : r - 4 === i ? o[3] = o[2] : i || (o[0] = { x: +t[i], y: +t[i + 1] }), n.push(["C", (-o[0].x + 6 * o[1].x + o[2].x) / 6, (-o[0].y + 6 * o[1].y + o[2].y) / 6, (o[1].x + 6 * o[2].x - o[3].x) / 6, (o[1].y + 6 * o[2].y - o[3].y) / 6, o[2].x, o[2].y]) } return n } }, function (t, e, n) { var i = n(8); t.exports = function (t) { return i(t).toLowerCase() } }, function (t, e, n) { var i = n(8); t.exports = function (t) { return i(t).toUpperCase() } }, function (t, e) { var n = {}.toString; t.exports = function (t) { return n.call(t).replace(/^\[object /, "").replace(/\]$/, "") } }, function (t, e) { var n = Object.prototype; t.exports = function (t) { var e = t && t.constructor; return t === ("function" == typeof e && e.prototype || n) } }, function (t, e, n) { var i = n(3), r = n(1), o = n(38); t.exports = function (t, e) { if (!e) return { 0: t }; if (!i(e)) { var n = r(e) ? e : e.replace(/\s+/g, "").split("*"); e = function (t) { for (var e = "_", i = 0, r = n.length; i < r; i++)e += t[n[i]] && t[n[i]].toString(); return e } } return o(t, e) } }, function (t, e, n) { var i = n(0), r = n(1), o = Object.prototype.hasOwnProperty; t.exports = function (t, e) { if (!e || !r(t)) return t; var n = {}, a = null; return i(t, (function (t) { a = e(t), o.call(n, a) ? n[a].push(t) : n[a] = [t] })), n } }, function (t, e, n) { var i = n(13), r = n(4), o = n(10); t.exports = function t(e, n) { if (e === n) return !0; if (!e || !n) return !1; if (o(e) || o(n)) return !1; if (r(e) || r(n)) { if (e.length !== n.length) return !1; for (var a = !0, s = 0; s < e.length && (a = t(e[s], n[s])); s++); return a } if (i(e) || i(n)) { var u = Object.keys(e), l = Object.keys(n); if (u.length !== l.length) return !1; for (var c = !0, h = 0; h < u.length && (c = t(e[u[h]], n[u[h]])); h++); return c } return !1 } }, function (t, e, n) { var i = n(0), r = n(11), o = n(41), a = n(53), s = n(67), u = n(70), l = n(74), c = n(88), h = n(95), p = n(99), f = n(105), d = n(111), g = { DOMUtil: o, DomUtil: o, MatrixUtil: c, PathUtil: p, arrayUtil: a, domUtil: o, eventUtil: s, formatUtil: u, mathUtil: l, matrixUtil: c, objectUtil: h, stringUtil: f, pathUtil: p, typeUtil: d, augment: n(119), clone: n(24), debounce: n(120), deepMix: n(121), each: i, extend: n(122), filter: n(12), group: n(123), groupBy: n(38), groupToMap: n(37), indexOf: n(124), isEmpty: n(125), isEqual: n(39), isEqualWith: n(126), map: n(127), mix: r, pick: n(128), throttle: n(129), toArray: n(14), toString: n(8), uniqueId: n(130) }; i([o, a, s, u, l, c, h, p, f, d], (function (t) { r(g, t) })), t.exports = g }, function (t, e, n) { t.exports = { addEventListener: n(42), createDom: n(43), getBoundingClientRect: n(44), getHeight: n(45), getOuterHeight: n(46), getOuterWidth: n(47), getRatio: n(48), getStyle: n(49), getWidth: n(50), modifyCSS: n(51), requestAnimationFrame: n(52) } }, function (t, e) { t.exports = function (t, e, n) { if (t) { if (t.addEventListener) return t.addEventListener(e, n, !1), { remove: function () { t.removeEventListener(e, n, !1) } }; if (t.attachEvent) return t.attachEvent("on" + e, n), { remove: function () { t.detachEvent("on" + e, n) } } } } }, function (t, e) { var n = document.createElement("table"), i = document.createElement("tr"), r = /^\s*<(\w+|!)[^>]*>/, o = { tr: document.createElement("tbody"), tbody: n, thead: n, tfoot: n, td: i, th: i, "*": document.createElement("div") }; t.exports = function (t) { var e = r.test(t) && RegExp.$1; e in o || (e = "*"); var n = o[e]; t = t.replace(/(^\s*)|(\s*$)/g, ""), n.innerHTML = "" + t; var i = n.childNodes[0]; return n.removeChild(i), i } }, function (t, e) { t.exports = function (t, e) { if (t && t.getBoundingClientRect) { var n = t.getBoundingClientRect(), i = document.documentElement.clientTop, r = document.documentElement.clientLeft; return { top: n.top - i, bottom: n.bottom - i, left: n.left - r, right: n.right - r } } return e || null } }, function (t, e) { t.exports = function (t, e) { var n = this.getStyle(t, "height", e); return "auto" === n && (n = t.offsetHeight), parseFloat(n) } }, function (t, e) { t.exports = function (t, e) { var n = this.getHeight(t, e), i = parseFloat(this.getStyle(t, "borderTopWidth")) || 0, r = parseFloat(this.getStyle(t, "paddingTop")) || 0, o = parseFloat(this.getStyle(t, "paddingBottom")) || 0; return n + i + (parseFloat(this.getStyle(t, "borderBottomWidth")) || 0) + r + o } }, function (t, e) { t.exports = function (t, e) { var n = this.getWidth(t, e), i = parseFloat(this.getStyle(t, "borderLeftWidth")) || 0, r = parseFloat(this.getStyle(t, "paddingLeft")) || 0, o = parseFloat(this.getStyle(t, "paddingRight")) || 0; return n + i + (parseFloat(this.getStyle(t, "borderRightWidth")) || 0) + r + o } }, function (t, e) { t.exports = function () { return window.devicePixelRatio ? window.devicePixelRatio : 2 } }, function (t, e, n) { var i = n(5); t.exports = function (t, e, n) { try { return window.getComputedStyle ? window.getComputedStyle(t, null)[e] : t.currentStyle[e] } catch (t) { return i(n) ? null : n } } }, function (t, e) { t.exports = function (t, e) { var n = this.getStyle(t, "width", e); return "auto" === n && (n = t.offsetWidth), parseFloat(n) } }, function (t, e) { t.exports = function (t, e) { if (t) for (var n in e) e.hasOwnProperty(n) && (t.style[n] = e[n]); return t } }, function (t, e) { t.exports = function (t) { return (window.requestAnimationFrame || window.webkitRequestAnimationFrame || function (t) { return setTimeout(t, 16) })(t) } }, function (t, e, n) { t.exports = { contains: n(9), difference: n(54), find: n(55), firstValue: n(56), flatten: n(57), flattenDeep: n(58), getRange: n(59), merge: n(60), pull: n(61), pullAt: n(19), reduce: n(62), remove: n(63), sortBy: n(64), union: n(65), uniq: n(20), valuesOfKey: n(66) } }, function (t, e, n) { var i = n(12), r = n(9); t.exports = function (t) { var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : []; return i(t, (function (t) { return !r(e, t) })) } }, function (t, e, n) { var i = n(3), r = n(7), o = n(17); t.exports = function (t, e) { var n = void 0; if (i(e) && (n = e), r(e) && (n = function (t) { return o(t, e) }), n) for (var a = 0; a < t.length; a += 1)if (n(t[a])) return t[a]; return null } }, function (t, e, n) { var i = n(5), r = n(1); t.exports = function (t, e) { for (var n = null, o = 0; o < t.length; o++) { var a = t[o][e]; if (!i(a)) { n = r(a) ? a[0] : a; break } } return n } }, function (t, e, n) { var i = n(1), r = n(0); t.exports = function (t) { if (!i(t)) return t; var e = []; return r(t, (function (t) { i(t) ? r(t, (function (t) { e.push(t) })) : e.push(t) })), e } }, function (t, e, n) { var i = n(1); t.exports = function t(e) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : []; if (i(e)) for (var r = 0; r < e.length; r += 1)t(e[r], n); else n.push(e); return n } }, function (t, e, n) { var i = n(12), r = n(1); t.exports = function (t) { if (!(t = i(t, (function (t) { return !isNaN(t) }))).length) return { min: 0, max: 0 }; if (r(t[0])) { for (var e = [], n = 0; n < t.length; n++)e = e.concat(t[n]); t = e } var o = Math.max.apply(null, t); return { min: Math.min.apply(null, t), max: o } } }, function (t, e) { t.exports = function (t) { for (var e = [], n = 0; n < t.length; n++)e = e.concat(t[n]); return e } }, function (t, e) { var n = Array.prototype, i = n.splice, r = n.indexOf, o = n.slice; t.exports = function (t) { for (var e = o.call(arguments, 1), n = 0; n < e.length; n++)for (var a = e[n], s = -1; (s = r.call(t, a)) > -1;)i.call(t, s, 1); return t } }, function (t, e, n) { var i = n(1), r = n(7), o = n(0); t.exports = function (t, e, n) { if (!i(t) && !r(t)) return t; var a = n; return o(t, (function (t, n) { a = e(a, t, n) })), a } }, function (t, e, n) { var i = n(4), r = n(19); t.exports = function (t, e) { var n = []; if (!i(t)) return n; for (var o = -1, a = [], s = t.length; ++o < s;) { var u = t[o]; e(u, o, t) && (n.push(u), a.push(o)) } return r(t, a), n } }, function (t, e, n) { var i = n(10), r = n(3), o = n(1); t.exports = function (t, e) { var n = void 0; if (r(e)) n = function (t, n) { return e(t) - e(n) }; else { var a = []; i(e) ? a.push(e) : o(e) && (a = e), n = function (t, e) { for (var n = 0; n < a.length; n += 1) { var i = a[n]; if (t[i] > e[i]) return 1; if (t[i] < e[i]) return -1 } return 0 } } return t.sort(n), t } }, function (t, e, n) { var i = n(0), r = n(14), o = n(20); t.exports = function () { var t = [], e = r(arguments); return i(e, (function (e) { t = t.concat(e) })), o(t) } }, function (t, e, n) { var i = n(5), r = n(1), o = n(0); t.exports = function (t, e) { for (var n = [], a = {}, s = 0; s < t.length; s++) { var u = t[s][e]; i(u) || (r(u) || (u = [u]), o(u, (function (t) { a[t] || (n.push(t), a[t] = !0) }))) } return n } }, function (t, e, n) { t.exports = { getWrapBehavior: n(68), wrapBehavior: n(69) } }, function (t, e) { t.exports = function (t, e) { return t["_wrap_" + e] } }, function (t, e) { t.exports = function (t, e) { if (t["_wrap_" + e]) return t["_wrap_" + e]; var n = function (n) { t[e](n) }; return t["_wrap_" + e] = n, n } }, function (t, e, n) { var i = n(71); t.exports = { number2color: i, numberToColor: i, parsePath: n(72), parseRadius: n(73) } }, function (t, e) { var n = {}; t.exports = function (t) { var e = n[t]; if (!e) { for (var i = t.toString(16), r = i.length; r < 6; r++)i = "0" + i; e = "#" + i, n[t] = e } return e } }, function (t, e, n) { var i = n(1), r = n(10), o = n(0), a = /[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi, s = /[^\s\,]+/gi; t.exports = function (t) { return i(t = t || []) ? t : r(t) ? (t = t.match(a), o(t, (function (e, n) { if ((e = e.match(s))[0].length > 1) { var i = e[0].charAt(0); e.splice(1, 0, e[0].substr(1)), e[0] = i } o(e, (function (t, n) { isNaN(t) || (e[n] = +t) })), t[n] = e })), t) : void 0 } }, function (t, e, n) { var i = n(1); t.exports = function (t) { var e = 0, n = 0, r = 0, o = 0; return i(t) ? 1 === t.length ? e = n = r = o = t[0] : 2 === t.length ? (e = r = t[0], n = o = t[1]) : 3 === t.length ? (e = t[0], n = o = t[1], r = t[2]) : (e = t[0], n = t[1], r = t[2], o = t[3]) : e = n = r = o = t, { r1: e, r2: n, r3: r, r4: o } } }, function (t, e, n) { var i = n(75); t.exports = { clamp: n(21), fixedBase: n(76), isDecimal: n(77), isEven: n(78), isInteger: n(79), isNegative: n(80), isNumberEqual: i, isOdd: n(81), isPositive: n(82), maxBy: n(83), minBy: n(84), mod: n(85), snapEqual: i, toDegree: n(86), toInt: n(22), toInteger: n(22), toRadian: n(87) } }, function (t, e) { t.exports = function (t, e) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1e-5; return Math.abs(t - e) < n } }, function (t, e) { t.exports = function (t, e) { var n = e.toString(), i = n.indexOf("."); if (-1 === i) return Math.round(t); var r = n.substr(i + 1).length; return r > 20 && (r = 20), parseFloat(t.toFixed(r)) } }, function (t, e, n) { var i = n(6); t.exports = function (t) { return i(t) && t % 1 != 0 } }, function (t, e, n) { var i = n(6); t.exports = function (t) { return i(t) && t % 2 == 0 } }, function (t, e, n) { var i = n(6), r = Number.isInteger ? Number.isInteger : function (t) { return i(t) && t % 1 == 0 }; t.exports = r }, function (t, e, n) { var i = n(6); t.exports = function (t) { return i(t) && t < 0 } }, function (t, e, n) { var i = n(6); t.exports = function (t) { return i(t) && t % 2 != 0 } }, function (t, e, n) { var i = n(6); t.exports = function (t) { return i(t) && t > 0 } }, function (t, e, n) { var i = n(1), r = n(3), o = n(0); t.exports = function (t, e) { if (i(t)) { var n = t[0], a = void 0; a = r(e) ? e(t[0]) : t[0][e]; var s = void 0; return o(t, (function (t) { (s = r(e) ? e(t) : t[e]) > a && (n = t, a = s) })), n } } }, function (t, e, n) { var i = n(1), r = n(3), o = n(0); t.exports = function (t, e) { if (i(t)) { var n = t[0], a = void 0; a = r(e) ? e(t[0]) : t[0][e]; var s = void 0; return o(t, (function (t) { (s = r(e) ? e(t) : t[e]) < a && (n = t, a = s) })), n } } }, function (t, e) { t.exports = function (t, e) { return (t % e + e) % e } }, function (t, e) { var n = 180 / Math.PI; t.exports = function (t) { return n * t } }, function (t, e) { var n = Math.PI / 180; t.exports = function (t) { return n * t } }, function (t, e, n) { t.exports = { mat3: n(23), vec2: n(90), vec3: n(92), transform: n(94) } }, function (t, e, n) { Object.defineProperty(e, "__esModule", { value: !0 }), e.sub = e.mul = void 0, e.create = function () { var t = new i.ARRAY_TYPE(9); return i.ARRAY_TYPE != Float32Array && (t[1] = 0, t[2] = 0, t[3] = 0, t[5] = 0, t[6] = 0, t[7] = 0), t[0] = 1, t[4] = 1, t[8] = 1, t }, e.fromMat4 = function (t, e) { return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[4], t[4] = e[5], t[5] = e[6], t[6] = e[8], t[7] = e[9], t[8] = e[10], t }, e.clone = function (t) { var e = new i.ARRAY_TYPE(9); return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4], e[5] = t[5], e[6] = t[6], e[7] = t[7], e[8] = t[8], e }, e.copy = function (t, e) { return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[4] = e[4], t[5] = e[5], t[6] = e[6], t[7] = e[7], t[8] = e[8], t }, e.fromValues = function (t, e, n, r, o, a, s, u, l) { var c = new i.ARRAY_TYPE(9); return c[0] = t, c[1] = e, c[2] = n, c[3] = r, c[4] = o, c[5] = a, c[6] = s, c[7] = u, c[8] = l, c }, e.set = function (t, e, n, i, r, o, a, s, u, l) { return t[0] = e, t[1] = n, t[2] = i, t[3] = r, t[4] = o, t[5] = a, t[6] = s, t[7] = u, t[8] = l, t }, e.identity = function (t) { return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 1, t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1, t }, e.transpose = function (t, e) { if (t === e) { var n = e[1], i = e[2], r = e[5]; t[1] = e[3], t[2] = e[6], t[3] = n, t[5] = e[7], t[6] = i, t[7] = r } else t[0] = e[0], t[1] = e[3], t[2] = e[6], t[3] = e[1], t[4] = e[4], t[5] = e[7], t[6] = e[2], t[7] = e[5], t[8] = e[8]; return t }, e.invert = function (t, e) { var n = e[0], i = e[1], r = e[2], o = e[3], a = e[4], s = e[5], u = e[6], l = e[7], c = e[8], h = c * a - s * l, p = -c * o + s * u, f = l * o - a * u, d = n * h + i * p + r * f; return d ? (d = 1 / d, t[0] = h * d, t[1] = (-c * i + r * l) * d, t[2] = (s * i - r * a) * d, t[3] = p * d, t[4] = (c * n - r * u) * d, t[5] = (-s * n + r * o) * d, t[6] = f * d, t[7] = (-l * n + i * u) * d, t[8] = (a * n - i * o) * d, t) : null }, e.adjoint = function (t, e) { var n = e[0], i = e[1], r = e[2], o = e[3], a = e[4], s = e[5], u = e[6], l = e[7], c = e[8]; return t[0] = a * c - s * l, t[1] = r * l - i * c, t[2] = i * s - r * a, t[3] = s * u - o * c, t[4] = n * c - r * u, t[5] = r * o - n * s, t[6] = o * l - a * u, t[7] = i * u - n * l, t[8] = n * a - i * o, t }, e.determinant = function (t) { var e = t[0], n = t[1], i = t[2], r = t[3], o = t[4], a = t[5], s = t[6], u = t[7], l = t[8]; return e * (l * o - a * u) + n * (-l * r + a * s) + i * (u * r - o * s) }, e.multiply = r, e.translate = function (t, e, n) { var i = e[0], r = e[1], o = e[2], a = e[3], s = e[4], u = e[5], l = e[6], c = e[7], h = e[8], p = n[0], f = n[1]; return t[0] = i, t[1] = r, t[2] = o, t[3] = a, t[4] = s, t[5] = u, t[6] = p * i + f * a + l, t[7] = p * r + f * s + c, t[8] = p * o + f * u + h, t }, e.rotate = function (t, e, n) { var i = e[0], r = e[1], o = e[2], a = e[3], s = e[4], u = e[5], l = e[6], c = e[7], h = e[8], p = Math.sin(n), f = Math.cos(n); return t[0] = f * i + p * a, t[1] = f * r + p * s, t[2] = f * o + p * u, t[3] = f * a - p * i, t[4] = f * s - p * r, t[5] = f * u - p * o, t[6] = l, t[7] = c, t[8] = h, t }, e.scale = function (t, e, n) { var i = n[0], r = n[1]; return t[0] = i * e[0], t[1] = i * e[1], t[2] = i * e[2], t[3] = r * e[3], t[4] = r * e[4], t[5] = r * e[5], t[6] = e[6], t[7] = e[7], t[8] = e[8], t }, e.fromTranslation = function (t, e) { return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 1, t[5] = 0, t[6] = e[0], t[7] = e[1], t[8] = 1, t }, e.fromRotation = function (t, e) { var n = Math.sin(e), i = Math.cos(e); return t[0] = i, t[1] = n, t[2] = 0, t[3] = -n, t[4] = i, t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1, t }, e.fromScaling = function (t, e) { return t[0] = e[0], t[1] = 0, t[2] = 0, t[3] = 0, t[4] = e[1], t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1, t }, e.fromMat2d = function (t, e) { return t[0] = e[0], t[1] = e[1], t[2] = 0, t[3] = e[2], t[4] = e[3], t[5] = 0, t[6] = e[4], t[7] = e[5], t[8] = 1, t }, e.fromQuat = function (t, e) { var n = e[0], i = e[1], r = e[2], o = e[3], a = n + n, s = i + i, u = r + r, l = n * a, c = i * a, h = i * s, p = r * a, f = r * s, d = r * u, g = o * a, v = o * s, y = o * u; return t[0] = 1 - h - d, t[3] = c - y, t[6] = p + v, t[1] = c + y, t[4] = 1 - l - d, t[7] = f - g, t[2] = p - v, t[5] = f + g, t[8] = 1 - l - h, t }, e.normalFromMat4 = function (t, e) { var n = e[0], i = e[1], r = e[2], o = e[3], a = e[4], s = e[5], u = e[6], l = e[7], c = e[8], h = e[9], p = e[10], f = e[11], d = e[12], g = e[13], v = e[14], y = e[15], m = n * s - i * a, x = n * u - r * a, _ = n * l - o * a, b = i * u - r * s, w = i * l - o * s, M = r * l - o * u, S = c * g - h * d, C = c * v - p * d, O = c * y - f * d, k = h * v - p * g, P = h * y - f * g, A = p * y - f * v, L = m * A - x * P + _ * k + b * O - w * C + M * S; return L ? (L = 1 / L, t[0] = (s * A - u * P + l * k) * L, t[1] = (u * O - a * A - l * C) * L, t[2] = (a * P - s * O + l * S) * L, t[3] = (r * P - i * A - o * k) * L, t[4] = (n * A - r * O + o * C) * L, t[5] = (i * O - n * P - o * S) * L, t[6] = (g * M - v * w + y * b) * L, t[7] = (v * _ - d * M - y * x) * L, t[8] = (d * w - g * _ + y * m) * L, t) : null }, e.projection = function (t, e, n) { return t[0] = 2 / e, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = -2 / n, t[5] = 0, t[6] = -1, t[7] = 1, t[8] = 1, t }, e.str = function (t) { return "mat3(" + t[0] + ", " + t[1] + ", " + t[2] + ", " + t[3] + ", " + t[4] + ", " + t[5] + ", " + t[6] + ", " + t[7] + ", " + t[8] + ")" }, e.frob = function (t) { return Math.sqrt(Math.pow(t[0], 2) + Math.pow(t[1], 2) + Math.pow(t[2], 2) + Math.pow(t[3], 2) + Math.pow(t[4], 2) + Math.pow(t[5], 2) + Math.pow(t[6], 2) + Math.pow(t[7], 2) + Math.pow(t[8], 2)) }, e.add = function (t, e, n) { return t[0] = e[0] + n[0], t[1] = e[1] + n[1], t[2] = e[2] + n[2], t[3] = e[3] + n[3], t[4] = e[4] + n[4], t[5] = e[5] + n[5], t[6] = e[6] + n[6], t[7] = e[7] + n[7], t[8] = e[8] + n[8], t }, e.subtract = o, e.multiplyScalar = function (t, e, n) { return t[0] = e[0] * n, t[1] = e[1] * n, t[2] = e[2] * n, t[3] = e[3] * n, t[4] = e[4] * n, t[5] = e[5] * n, t[6] = e[6] * n, t[7] = e[7] * n, t[8] = e[8] * n, t }, e.multiplyScalarAndAdd = function (t, e, n, i) { return t[0] = e[0] + n[0] * i, t[1] = e[1] + n[1] * i, t[2] = e[2] + n[2] * i, t[3] = e[3] + n[3] * i, t[4] = e[4] + n[4] * i, t[5] = e[5] + n[5] * i, t[6] = e[6] + n[6] * i, t[7] = e[7] + n[7] * i, t[8] = e[8] + n[8] * i, t }, e.exactEquals = function (t, e) { return t[0] === e[0] && t[1] === e[1] && t[2] === e[2] && t[3] === e[3] && t[4] === e[4] && t[5] === e[5] && t[6] === e[6] && t[7] === e[7] && t[8] === e[8] }, e.equals = function (t, e) { var n = t[0], r = t[1], o = t[2], a = t[3], s = t[4], u = t[5], l = t[6], c = t[7], h = t[8], p = e[0], f = e[1], d = e[2], g = e[3], v = e[4], y = e[5], m = e[6], x = e[7], _ = e[8]; return Math.abs(n - p) <= i.EPSILON * Math.max(1, Math.abs(n), Math.abs(p)) && Math.abs(r - f) <= i.EPSILON * Math.max(1, Math.abs(r), Math.abs(f)) && Math.abs(o - d) <= i.EPSILON * Math.max(1, Math.abs(o), Math.abs(d)) && Math.abs(a - g) <= i.EPSILON * Math.max(1, Math.abs(a), Math.abs(g)) && Math.abs(s - v) <= i.EPSILON * Math.max(1, Math.abs(s), Math.abs(v)) && Math.abs(u - y) <= i.EPSILON * Math.max(1, Math.abs(u), Math.abs(y)) && Math.abs(l - m) <= i.EPSILON * Math.max(1, Math.abs(l), Math.abs(m)) && Math.abs(c - x) <= i.EPSILON * Math.max(1, Math.abs(c), Math.abs(x)) && Math.abs(h - _) <= i.EPSILON * Math.max(1, Math.abs(h), Math.abs(_)) }; var i = function (t) { if (t && t.__esModule) return t; var e = {}; if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]); return e.default = t, e }(n(15)); function r(t, e, n) { var i = e[0], r = e[1], o = e[2], a = e[3], s = e[4], u = e[5], l = e[6], c = e[7], h = e[8], p = n[0], f = n[1], d = n[2], g = n[3], v = n[4], y = n[5], m = n[6], x = n[7], _ = n[8]; return t[0] = p * i + f * a + d * l, t[1] = p * r + f * s + d * c, t[2] = p * o + f * u + d * h, t[3] = g * i + v * a + y * l, t[4] = g * r + v * s + y * c, t[5] = g * o + v * u + y * h, t[6] = m * i + x * a + _ * l, t[7] = m * r + x * s + _ * c, t[8] = m * o + x * u + _ * h, t } function o(t, e, n) { return t[0] = e[0] - n[0], t[1] = e[1] - n[1], t[2] = e[2] - n[2], t[3] = e[3] - n[3], t[4] = e[4] - n[4], t[5] = e[5] - n[5], t[6] = e[6] - n[6], t[7] = e[7] - n[7], t[8] = e[8] - n[8], t } e.mul = r, e.sub = o }, function (t, e, n) { var i = n(91), r = n(21); i.angle = function (t, e) { var n = i.dot(t, e) / (i.length(t) * i.length(e)); return Math.acos(r(n, -1, 1)) }, i.direction = function (t, e) { return t[0] * e[1] - e[0] * t[1] }, i.angleTo = function (t, e, n) { var r = i.angle(t, e), o = i.direction(t, e) >= 0; return n ? o ? 2 * Math.PI - r : r : o ? r : 2 * Math.PI - r }, i.vertical = function (t, e, n) { return n ? (t[0] = e[1], t[1] = -1 * e[0]) : (t[0] = -1 * e[1], t[1] = e[0]), t }, t.exports = i }, function (t, e, n) { Object.defineProperty(e, "__esModule", { value: !0 }), e.forEach = e.sqrLen = e.sqrDist = e.dist = e.div = e.mul = e.sub = e.len = void 0, e.create = o, e.clone = function (t) { var e = new r.ARRAY_TYPE(2); return e[0] = t[0], e[1] = t[1], e }, e.fromValues = function (t, e) { var n = new r.ARRAY_TYPE(2); return n[0] = t, n[1] = e, n }, e.copy = function (t, e) { return t[0] = e[0], t[1] = e[1], t }, e.set = function (t, e, n) { return t[0] = e, t[1] = n, t }, e.add = function (t, e, n) { return t[0] = e[0] + n[0], t[1] = e[1] + n[1], t }, e.subtract = a, e.multiply = s, e.divide = u, e.ceil = function (t, e) { return t[0] = Math.ceil(e[0]), t[1] = Math.ceil(e[1]), t }, e.floor = function (t, e) { return t[0] = Math.floor(e[0]), t[1] = Math.floor(e[1]), t }, e.min = function (t, e, n) { return t[0] = Math.min(e[0], n[0]), t[1] = Math.min(e[1], n[1]), t }, e.max = function (t, e, n) { return t[0] = Math.max(e[0], n[0]), t[1] = Math.max(e[1], n[1]), t }, e.round = function (t, e) { return t[0] = Math.round(e[0]), t[1] = Math.round(e[1]), t }, e.scale = function (t, e, n) { return t[0] = e[0] * n, t[1] = e[1] * n, t }, e.scaleAndAdd = function (t, e, n, i) { return t[0] = e[0] + n[0] * i, t[1] = e[1] + n[1] * i, t }, e.distance = l, e.squaredDistance = c, e.length = h, e.squaredLength = p, e.negate = function (t, e) { return t[0] = -e[0], t[1] = -e[1], t }, e.inverse = function (t, e) { return t[0] = 1 / e[0], t[1] = 1 / e[1], t }, e.normalize = function (t, e) { var n = e[0], i = e[1], r = n * n + i * i; return r > 0 && (r = 1 / Math.sqrt(r), t[0] = e[0] * r, t[1] = e[1] * r), t }, e.dot = function (t, e) { return t[0] * e[0] + t[1] * e[1] }, e.cross = function (t, e, n) { var i = e[0] * n[1] - e[1] * n[0]; return t[0] = t[1] = 0, t[2] = i, t }, e.lerp = function (t, e, n, i) { var r = e[0], o = e[1]; return t[0] = r + i * (n[0] - r), t[1] = o + i * (n[1] - o), t }, e.random = function (t, e) { e = e || 1; var n = 2 * r.RANDOM() * Math.PI; return t[0] = Math.cos(n) * e, t[1] = Math.sin(n) * e, t }, e.transformMat2 = function (t, e, n) { var i = e[0], r = e[1]; return t[0] = n[0] * i + n[2] * r, t[1] = n[1] * i + n[3] * r, t }, e.transformMat2d = function (t, e, n) { var i = e[0], r = e[1]; return t[0] = n[0] * i + n[2] * r + n[4], t[1] = n[1] * i + n[3] * r + n[5], t }, e.transformMat3 = function (t, e, n) { var i = e[0], r = e[1]; return t[0] = n[0] * i + n[3] * r + n[6], t[1] = n[1] * i + n[4] * r + n[7], t }, e.transformMat4 = function (t, e, n) { var i = e[0], r = e[1]; return t[0] = n[0] * i + n[4] * r + n[12], t[1] = n[1] * i + n[5] * r + n[13], t }, e.rotate = function (t, e, n, i) { var r = e[0] - n[0], o = e[1] - n[1], a = Math.sin(i), s = Math.cos(i); return t[0] = r * s - o * a + n[0], t[1] = r * a + o * s + n[1], t }, e.angle = function (t, e) { var n = t[0], i = t[1], r = e[0], o = e[1], a = n * n + i * i; a > 0 && (a = 1 / Math.sqrt(a)); var s = r * r + o * o; s > 0 && (s = 1 / Math.sqrt(s)); var u = (n * r + i * o) * a * s; return u > 1 ? 0 : u < -1 ? Math.PI : Math.acos(u) }, e.str = function (t) { return "vec2(" + t[0] + ", " + t[1] + ")" }, e.exactEquals = function (t, e) { return t[0] === e[0] && t[1] === e[1] }, e.equals = function (t, e) { var n = t[0], i = t[1], o = e[0], a = e[1]; return Math.abs(n - o) <= r.EPSILON * Math.max(1, Math.abs(n), Math.abs(o)) && Math.abs(i - a) <= r.EPSILON * Math.max(1, Math.abs(i), Math.abs(a)) }; var i, r = function (t) { if (t && t.__esModule) return t; var e = {}; if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]); return e.default = t, e }(n(15)); function o() { var t = new r.ARRAY_TYPE(2); return r.ARRAY_TYPE != Float32Array && (t[0] = 0, t[1] = 0), t } function a(t, e, n) { return t[0] = e[0] - n[0], t[1] = e[1] - n[1], t } function s(t, e, n) { return t[0] = e[0] * n[0], t[1] = e[1] * n[1], t } function u(t, e, n) { return t[0] = e[0] / n[0], t[1] = e[1] / n[1], t } function l(t, e) { var n = e[0] - t[0], i = e[1] - t[1]; return Math.sqrt(n * n + i * i) } function c(t, e) { var n = e[0] - t[0], i = e[1] - t[1]; return n * n + i * i } function h(t) { var e = t[0], n = t[1]; return Math.sqrt(e * e + n * n) } function p(t) { var e = t[0], n = t[1]; return e * e + n * n } e.len = h, e.sub = a, e.mul = s, e.div = u, e.dist = l, e.sqrDist = c, e.sqrLen = p, e.forEach = (i = o(), function (t, e, n, r, o, a) { var s, u = void 0; for (e || (e = 2), n || (n = 0), s = r ? Math.min(r * e + n, t.length) : t.length, u = n; u < s; u += e)i[0] = t[u], i[1] = t[u + 1], o(i, i, a), t[u] = i[0], t[u + 1] = i[1]; return t }) }, function (t, e, n) { var i = n(93); t.exports = i }, function (t, e, n) { Object.defineProperty(e, "__esModule", { value: !0 }), e.forEach = e.sqrLen = e.len = e.sqrDist = e.dist = e.div = e.mul = e.sub = void 0, e.create = o, e.clone = function (t) { var e = new r.ARRAY_TYPE(3); return e[0] = t[0], e[1] = t[1], e[2] = t[2], e }, e.length = a, e.fromValues = s, e.copy = function (t, e) { return t[0] = e[0], t[1] = e[1], t[2] = e[2], t }, e.set = function (t, e, n, i) { return t[0] = e, t[1] = n, t[2] = i, t }, e.add = function (t, e, n) { return t[0] = e[0] + n[0], t[1] = e[1] + n[1], t[2] = e[2] + n[2], t }, e.subtract = u, e.multiply = l, e.divide = c, e.ceil = function (t, e) { return t[0] = Math.ceil(e[0]), t[1] = Math.ceil(e[1]), t[2] = Math.ceil(e[2]), t }, e.floor = function (t, e) { return t[0] = Math.floor(e[0]), t[1] = Math.floor(e[1]), t[2] = Math.floor(e[2]), t }, e.min = function (t, e, n) { return t[0] = Math.min(e[0], n[0]), t[1] = Math.min(e[1], n[1]), t[2] = Math.min(e[2], n[2]), t }, e.max = function (t, e, n) { return t[0] = Math.max(e[0], n[0]), t[1] = Math.max(e[1], n[1]), t[2] = Math.max(e[2], n[2]), t }, e.round = function (t, e) { return t[0] = Math.round(e[0]), t[1] = Math.round(e[1]), t[2] = Math.round(e[2]), t }, e.scale = function (t, e, n) { return t[0] = e[0] * n, t[1] = e[1] * n, t[2] = e[2] * n, t }, e.scaleAndAdd = function (t, e, n, i) { return t[0] = e[0] + n[0] * i, t[1] = e[1] + n[1] * i, t[2] = e[2] + n[2] * i, t }, e.distance = h, e.squaredDistance = p, e.squaredLength = f, e.negate = function (t, e) { return t[0] = -e[0], t[1] = -e[1], t[2] = -e[2], t }, e.inverse = function (t, e) { return t[0] = 1 / e[0], t[1] = 1 / e[1], t[2] = 1 / e[2], t }, e.normalize = d, e.dot = g, e.cross = function (t, e, n) { var i = e[0], r = e[1], o = e[2], a = n[0], s = n[1], u = n[2]; return t[0] = r * u - o * s, t[1] = o * a - i * u, t[2] = i * s - r * a, t }, e.lerp = function (t, e, n, i) { var r = e[0], o = e[1], a = e[2]; return t[0] = r + i * (n[0] - r), t[1] = o + i * (n[1] - o), t[2] = a + i * (n[2] - a), t }, e.hermite = function (t, e, n, i, r, o) { var a = o * o, s = a * (2 * o - 3) + 1, u = a * (o - 2) + o, l = a * (o - 1), c = a * (3 - 2 * o); return t[0] = e[0] * s + n[0] * u + i[0] * l + r[0] * c, t[1] = e[1] * s + n[1] * u + i[1] * l + r[1] * c, t[2] = e[2] * s + n[2] * u + i[2] * l + r[2] * c, t }, e.bezier = function (t, e, n, i, r, o) { var a = 1 - o, s = a * a, u = o * o, l = s * a, c = 3 * o * s, h = 3 * u * a, p = u * o; return t[0] = e[0] * l + n[0] * c + i[0] * h + r[0] * p, t[1] = e[1] * l + n[1] * c + i[1] * h + r[1] * p, t[2] = e[2] * l + n[2] * c + i[2] * h + r[2] * p, t }, e.random = function (t, e) { e = e || 1; var n = 2 * r.RANDOM() * Math.PI, i = 2 * r.RANDOM() - 1, o = Math.sqrt(1 - i * i) * e; return t[0] = Math.cos(n) * o, t[1] = Math.sin(n) * o, t[2] = i * e, t }, e.transformMat4 = function (t, e, n) { var i = e[0], r = e[1], o = e[2], a = n[3] * i + n[7] * r + n[11] * o + n[15]; return a = a || 1, t[0] = (n[0] * i + n[4] * r + n[8] * o + n[12]) / a, t[1] = (n[1] * i + n[5] * r + n[9] * o + n[13]) / a, t[2] = (n[2] * i + n[6] * r + n[10] * o + n[14]) / a, t }, e.transformMat3 = function (t, e, n) { var i = e[0], r = e[1], o = e[2]; return t[0] = i * n[0] + r * n[3] + o * n[6], t[1] = i * n[1] + r * n[4] + o * n[7], t[2] = i * n[2] + r * n[5] + o * n[8], t }, e.transformQuat = function (t, e, n) { var i = n[0], r = n[1], o = n[2], a = n[3], s = e[0], u = e[1], l = e[2], c = r * l - o * u, h = o * s - i * l, p = i * u - r * s, f = r * p - o * h, d = o * c - i * p, g = i * h - r * c, v = 2 * a; return c *= v, h *= v, p *= v, f *= 2, d *= 2, g *= 2, t[0] = s + c + f, t[1] = u + h + d, t[2] = l + p + g, t }, e.rotateX = function (t, e, n, i) { var r = [], o = []; return r[0] = e[0] - n[0], r[1] = e[1] - n[1], r[2] = e[2] - n[2], o[0] = r[0], o[1] = r[1] * Math.cos(i) - r[2] * Math.sin(i), o[2] = r[1] * Math.sin(i) + r[2] * Math.cos(i), t[0] = o[0] + n[0], t[1] = o[1] + n[1], t[2] = o[2] + n[2], t }, e.rotateY = function (t, e, n, i) { var r = [], o = []; return r[0] = e[0] - n[0], r[1] = e[1] - n[1], r[2] = e[2] - n[2], o[0] = r[2] * Math.sin(i) + r[0] * Math.cos(i), o[1] = r[1], o[2] = r[2] * Math.cos(i) - r[0] * Math.sin(i), t[0] = o[0] + n[0], t[1] = o[1] + n[1], t[2] = o[2] + n[2], t }, e.rotateZ = function (t, e, n, i) { var r = [], o = []; return r[0] = e[0] - n[0], r[1] = e[1] - n[1], r[2] = e[2] - n[2], o[0] = r[0] * Math.cos(i) - r[1] * Math.sin(i), o[1] = r[0] * Math.sin(i) + r[1] * Math.cos(i), o[2] = r[2], t[0] = o[0] + n[0], t[1] = o[1] + n[1], t[2] = o[2] + n[2], t }, e.angle = function (t, e) { var n = s(t[0], t[1], t[2]), i = s(e[0], e[1], e[2]); d(n, n), d(i, i); var r = g(n, i); return r > 1 ? 0 : r < -1 ? Math.PI : Math.acos(r) }, e.str = function (t) { return "vec3(" + t[0] + ", " + t[1] + ", " + t[2] + ")" }, e.exactEquals = function (t, e) { return t[0] === e[0] && t[1] === e[1] && t[2] === e[2] }, e.equals = function (t, e) { var n = t[0], i = t[1], o = t[2], a = e[0], s = e[1], u = e[2]; return Math.abs(n - a) <= r.EPSILON * Math.max(1, Math.abs(n), Math.abs(a)) && Math.abs(i - s) <= r.EPSILON * Math.max(1, Math.abs(i), Math.abs(s)) && Math.abs(o - u) <= r.EPSILON * Math.max(1, Math.abs(o), Math.abs(u)) }; var i, r = function (t) { if (t && t.__esModule) return t; var e = {}; if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]); return e.default = t, e }(n(15)); function o() { var t = new r.ARRAY_TYPE(3); return r.ARRAY_TYPE != Float32Array && (t[0] = 0, t[1] = 0, t[2] = 0), t } function a(t) { var e = t[0], n = t[1], i = t[2]; return Math.sqrt(e * e + n * n + i * i) } function s(t, e, n) { var i = new r.ARRAY_TYPE(3); return i[0] = t, i[1] = e, i[2] = n, i } function u(t, e, n) { return t[0] = e[0] - n[0], t[1] = e[1] - n[1], t[2] = e[2] - n[2], t } function l(t, e, n) { return t[0] = e[0] * n[0], t[1] = e[1] * n[1], t[2] = e[2] * n[2], t } function c(t, e, n) { return t[0] = e[0] / n[0], t[1] = e[1] / n[1], t[2] = e[2] / n[2], t } function h(t, e) { var n = e[0] - t[0], i = e[1] - t[1], r = e[2] - t[2]; return Math.sqrt(n * n + i * i + r * r) } function p(t, e) { var n = e[0] - t[0], i = e[1] - t[1], r = e[2] - t[2]; return n * n + i * i + r * r } function f(t) { var e = t[0], n = t[1], i = t[2]; return e * e + n * n + i * i } function d(t, e) { var n = e[0], i = e[1], r = e[2], o = n * n + i * i + r * r; return o > 0 && (o = 1 / Math.sqrt(o), t[0] = e[0] * o, t[1] = e[1] * o, t[2] = e[2] * o), t } function g(t, e) { return t[0] * e[0] + t[1] * e[1] + t[2] * e[2] } e.sub = u, e.mul = l, e.div = c, e.dist = h, e.sqrDist = p, e.len = a, e.sqrLen = f, e.forEach = (i = o(), function (t, e, n, r, o, a) { var s, u = void 0; for (e || (e = 3), n || (n = 0), s = r ? Math.min(r * e + n, t.length) : t.length, u = n; u < s; u += e)i[0] = t[u], i[1] = t[u + 1], i[2] = t[u + 2], o(i, i, a), t[u] = i[0], t[u + 1] = i[1], t[u + 2] = i[2]; return t }) }, function (t, e, n) { var i = n(24), r = n(0), o = n(23); t.exports = function (t, e) { return t = i(t), r(e, (function (e) { switch (e[0]) { case "t": o.translate(t, t, [e[1], e[2]]); break; case "s": o.scale(t, t, [e[1], e[2]]); break; case "r": o.rotate(t, t, e[1]); break; case "m": o.multiply(t, t, e[1]); break; default: return !1 } })), t } }, function (t, e, n) { t.exports = { forIn: n(96), has: n(25), hasKey: n(97), hasValue: n(98), keys: n(18), isMatch: n(17), values: n(26) } }, function (t, e, n) { t.exports = n(0) }, function (t, e, n) { t.exports = n(25) }, function (t, e, n) { var i = n(9), r = n(26); t.exports = function (t, e) { return i(r(t), e) } }, function (t, e, n) { var i = n(100), r = n(30), o = n(29), a = n(32); t.exports = { catmullRom2Bezier: a, catmullRomToBezier: a, fillPath: n(101), fillPathByDiff: n(102), formatPath: n(104), intersection: i, pathIntersection: i, parsePathArray: n(28), parsePathString: n(31), pathToAbsolute: r, path2absolute: r, pathTocurve: o, path2curve: o, rectPath: n(27) } }, function (t, e, n) { var i = n(1), r = n(27), o = n(29), a = function (t, e, n, i, r) { return t * (t * (-3 * e + 9 * n - 9 * i + 3 * r) + 6 * e - 12 * n + 6 * i) - 3 * e + 3 * n }, s = function (t, e, n, i, r, o, s, u, l) { null === l && (l = 1); for (var c = (l = l > 1 ? 1 : l < 0 ? 0 : l) / 2, h = [-.1252, .1252, -.3678, .3678, -.5873, .5873, -.7699, .7699, -.9041, .9041, -.9816, .9816], p = [.2491, .2491, .2335, .2335, .2032, .2032, .1601, .1601, .1069, .1069, .0472, .0472], f = 0, d = 0; d < 12; d++) { var g = c * h[d] + c, v = a(g, t, n, r, s), y = a(g, e, i, o, u), m = v * v + y * y; f += p[d] * Math.sqrt(m) } return c * f }, u = function (t, e, n, i, r, o, a, s) { for (var u = [], l = [[], []], c = void 0, h = void 0, p = void 0, f = void 0, d = 0; d < 2; ++d)if (0 === d ? (h = 6 * t - 12 * n + 6 * r, c = -3 * t + 9 * n - 9 * r + 3 * a, p = 3 * n - 3 * t) : (h = 6 * e - 12 * i + 6 * o, c = -3 * e + 9 * i - 9 * o + 3 * s, p = 3 * i - 3 * e), Math.abs(c) < 1e-12) { if (Math.abs(h) < 1e-12) continue; (f = -p / h) > 0 && f < 1 && u.push(f) } else { var g = h * h - 4 * p * c, v = Math.sqrt(g); if (!(g < 0)) { var y = (-h + v) / (2 * c); y > 0 && y < 1 && u.push(y); var m = (-h - v) / (2 * c); m > 0 && m < 1 && u.push(m) } } for (var x = u.length, _ = x, b = void 0; x--;)b = 1 - (f = u[x]), l[0][x] = b * b * b * t + 3 * b * b * f * n + 3 * b * f * f * r + f * f * f * a, l[1][x] = b * b * b * e + 3 * b * b * f * i + 3 * b * f * f * o + f * f * f * s; return l[0][_] = t, l[1][_] = e, l[0][_ + 1] = a, l[1][_ + 1] = s, l[0].length = l[1].length = _ + 2, { min: { x: Math.min.apply(0, l[0]), y: Math.min.apply(0, l[1]) }, max: { x: Math.max.apply(0, l[0]), y: Math.max.apply(0, l[1]) } } }, l = function (t, e, n, i, r, o, a, s) { if (!(Math.max(t, n) < Math.min(r, a) || Math.min(t, n) > Math.max(r, a) || Math.max(e, i) < Math.min(o, s) || Math.min(e, i) > Math.max(o, s))) { var u = (t - n) * (o - s) - (e - i) * (r - a); if (u) { var l = ((t * i - e * n) * (r - a) - (t - n) * (r * s - o * a)) / u, c = ((t * i - e * n) * (o - s) - (e - i) * (r * s - o * a)) / u, h = +l.toFixed(2), p = +c.toFixed(2); if (!(h < +Math.min(t, n).toFixed(2) || h > +Math.max(t, n).toFixed(2) || h < +Math.min(r, a).toFixed(2) || h > +Math.max(r, a).toFixed(2) || p < +Math.min(e, i).toFixed(2) || p > +Math.max(e, i).toFixed(2) || p < +Math.min(o, s).toFixed(2) || p > +Math.max(o, s).toFixed(2))) return { x: l, y: c } } } }, c = function (t, e, n) { return e >= t.x && e <= t.x + t.width && n >= t.y && n <= t.y + t.height }, h = function (t, e, n, i) { return null === t && (t = e = n = i = 0), null === e && (e = t.y, n = t.width, i = t.height, t = t.x), { x: t, y: e, width: n, w: n, height: i, h: i, x2: t + n, y2: e + i, cx: t + n / 2, cy: e + i / 2, r1: Math.min(n, i) / 2, r2: Math.max(n, i) / 2, r0: Math.sqrt(n * n + i * i) / 2, path: r(t, e, n, i), vb: [t, e, n, i].join(" ") } }, p = function (t, e, n, r, o, a, s, l) { i(t) || (t = [t, e, n, r, o, a, s, l]); var c = u.apply(null, t); return h(c.min.x, c.min.y, c.max.x - c.min.x, c.max.y - c.min.y) }, f = function (t, e, n, i, r, o, a, s, u) { var l = 1 - u, c = Math.pow(l, 3), h = Math.pow(l, 2), p = u * u, f = p * u, d = t + 2 * u * (n - t) + p * (r - 2 * n + t), g = e + 2 * u * (i - e) + p * (o - 2 * i + e), v = n + 2 * u * (r - n) + p * (a - 2 * r + n), y = i + 2 * u * (o - i) + p * (s - 2 * o + i); return { x: c * t + 3 * h * u * n + 3 * l * u * u * r + f * a, y: c * e + 3 * h * u * i + 3 * l * u * u * o + f * s, m: { x: d, y: g }, n: { x: v, y: y }, start: { x: l * t + u * n, y: l * e + u * i }, end: { x: l * r + u * a, y: l * o + u * s }, alpha: 90 - 180 * Math.atan2(d - v, g - y) / Math.PI } }, d = function (t, e, n) { if (!function (t, e) { return t = h(t), e = h(e), c(e, t.x, t.y) || c(e, t.x2, t.y) || c(e, t.x, t.y2) || c(e, t.x2, t.y2) || c(t, e.x, e.y) || c(t, e.x2, e.y) || c(t, e.x, e.y2) || c(t, e.x2, e.y2) || (t.x < e.x2 && t.x > e.x || e.x < t.x2 && e.x > t.x) && (t.y < e.y2 && t.y > e.y || e.y < t.y2 && e.y > t.y) }(p(t), p(e))) return n ? 0 : []; for (var i = ~~(s.apply(0, t) / 8), r = ~~(s.apply(0, e) / 8), o = [], a = [], u = {}, d = n ? 0 : [], g = 0; g < i + 1; g++) { var v = f.apply(0, t.concat(g / i)); o.push({ x: v.x, y: v.y, t: g / i }) } for (var y = 0; y < r + 1; y++) { var m = f.apply(0, e.concat(y / r)); a.push({ x: m.x, y: m.y, t: y / r }) } for (var x = 0; x < i; x++)for (var _ = 0; _ < r; _++) { var b = o[x], w = o[x + 1], M = a[_], S = a[_ + 1], C = Math.abs(w.x - b.x) < .001 ? "y" : "x", O = Math.abs(S.x - M.x) < .001 ? "y" : "x", k = l(b.x, b.y, w.x, w.y, M.x, M.y, S.x, S.y); if (k) { if (u[k.x.toFixed(4)] === k.y.toFixed(4)) continue; u[k.x.toFixed(4)] = k.y.toFixed(4); var P = b.t + Math.abs((k[C] - b[C]) / (w[C] - b[C])) * (w.t - b.t), A = M.t + Math.abs((k[O] - M[O]) / (S[O] - M[O])) * (S.t - M.t); P >= 0 && P <= 1 && A >= 0 && A <= 1 && (n ? d++ : d.push({ x: k.x, y: k.y, t1: P, t2: A })) } } return d }; t.exports = function (t, e) { return function (t, e, n) { t = o(t), e = o(e); for (var i = void 0, r = void 0, a = void 0, s = void 0, u = void 0, l = void 0, c = void 0, h = void 0, p = void 0, f = void 0, g = [], v = 0, y = t.length; v < y; v++) { var m = t[v]; if ("M" === m[0]) i = u = m[1], r = l = m[2]; else { "C" === m[0] ? (p = [i, r].concat(m.slice(1)), i = p[6], r = p[7]) : (p = [i, r, i, r, u, l, u, l], i = u, r = l); for (var x = 0, _ = e.length; x < _; x++) { var b = e[x]; if ("M" === b[0]) a = c = b[1], s = h = b[2]; else { "C" === b[0] ? (f = [a, s].concat(b.slice(1)), a = f[6], s = f[7]) : (f = [a, s, a, s, c, h, c, h], a = c, s = h); for (var w = d(p, f, n), M = 0, S = w.length; M < S; M++)w[M].segment1 = v, w[M].segment2 = x, w[M].bez1 = p, w[M].bez2 = f; g = g.concat(w) } } } } return g }(t, e) } }, function (t, e) { function n(t, e) { var n = [], i = []; return t.length && function t(e, r) { if (1 === e.length) n.push(e[0]), i.push(e[0]); else { for (var o = [], a = 0; a < e.length - 1; a++)0 === a && n.push(e[0]), a === e.length - 2 && i.push(e[a + 1]), o[a] = [(1 - r) * e[a][0] + r * e[a + 1][0], (1 - r) * e[a][1] + r * e[a + 1][1]]; t(o, r) } }(t, e), { left: n, right: i.reverse() } } function i(t, e, i) { if (1 === i) return [[].concat(t)]; var r = []; if ("L" === e[0] || "C" === e[0] || "Q" === e[0]) r = r.concat(function (t, e, i) { var r = [[t[1], t[2]]]; i = i || 2; var o = []; "A" === e[0] ? (r.push(e[6]), r.push(e[7])) : "C" === e[0] ? (r.push([e[1], e[2]]), r.push([e[3], e[4]]), r.push([e[5], e[6]])) : "S" === e[0] || "Q" === e[0] ? (r.push([e[1], e[2]]), r.push([e[3], e[4]])) : r.push([e[1], e[2]]); for (var a = r, s = 1 / i, u = 0; u < i - 1; u++) { var l = n(a, s / (1 - s * u)); o.push(l.left), a = l.right } return o.push(a), o.map((function (t) { var e = []; return 4 === t.length && (e.push("C"), e = e.concat(t[2])), t.length >= 3 && (3 === t.length && e.push("Q"), e = e.concat(t[1])), 2 === t.length && e.push("L"), e.concat(t[t.length - 1]) })) }(t, e, i)); else { var o = [].concat(t); "M" === o[0] && (o[0] = "L"); for (var a = 0; a <= i - 1; a++)r.push(o) } return r } t.exports = function (t, e) { if (1 === t.length) return t; var n = t.length - 1, r = e.length - 1, o = n / r, a = []; if (1 === t.length && "M" === t[0][0]) { for (var s = 0; s < r - n; s++)t.push(t[0]); return t } for (var u = 0; u < r; u++) { var l = Math.floor(o * u); a[l] = (a[l] || 0) + 1 } var c = a.reduce((function (e, r, o) { return o === n ? e.concat(t[n]) : e.concat(i(t[o], t[o + 1], r)) }), []); return c.unshift(t[0]), "Z" !== e[r] && "z" !== e[r] || c.push("Z"), c } }, function (t, e, n) { var i = n(103); function r(t, e, n) { var i = null, r = n; return e < r && (r = e, i = "add"), t < r && (r = t, i = "del"), { type: i, min: r } } t.exports = function (t, e) { var n = function (t, e) { var n = t.length, o = e.length, a = void 0, s = void 0, u = 0; if (0 === n || 0 === o) return null; for (var l = [], c = 0; c <= n; c++)l[c] = [], l[c][0] = { min: c }; for (var h = 0; h <= o; h++)l[0][h] = { min: h }; for (var p = 1; p <= n; p++) { a = t[p - 1]; for (var f = 1; f <= o; f++) { s = e[f - 1], u = i(a, s) ? 0 : 1; var d = l[p - 1][f].min + 1, g = l[p][f - 1].min + 1, v = l[p - 1][f - 1].min + u; l[p][f] = r(d, g, v) } } return l }(t, e), o = t.length, a = e.length, s = [], u = 1, l = 1; if (n[o][a] !== o) { for (var c = 1; c <= o; c++) { var h = n[c][c].min; l = c; for (var p = u; p <= a; p++)n[c][p].min < h && (h = n[c][p].min, l = p); u = l, n[c][u].type && s.push({ index: c - 1, type: n[c][u].type }) } for (var f = s.length - 1; f >= 0; f--)u = s[f].index, "add" === s[f].type ? t.splice(u, 0, [].concat(t[u])) : t.splice(u, 1) } if ((o = t.length) < a) for (var d = 0; d < a - o; d++)"z" === t[o - 1][0] || "Z" === t[o - 1][0] ? t.splice(o - 2, 0, t[o - 2]) : t.push(t[o - 1]); return t } }, function (t, e, n) { var i = n(0); t.exports = function (t, e) { if (t.length !== e.length) return !1; var n = !0; return i(t, (function (t, i) { if (t !== e[i]) return n = !1, !1 })), n } }, function (t, e) { function n(t) { var e = []; switch (t[0]) { case "M": case "L": e.push([t[1], t[2]]); break; case "A": e.push([t[6], t[7]]); break; case "Q": e.push([t[3], t[4]]), e.push([t[1], t[2]]); break; case "T": e.push([t[1], t[2]]); break; case "C": e.push([t[5], t[6]]), e.push([t[1], t[2]]), e.push([t[3], t[4]]); break; case "S": e.push([t[3], t[4]]), e.push([t[1], t[2]]); break; case "H": case "V": e.push([t[1], t[1]]) }return e } function i(t, e, i) { for (var r = [].concat(t), o = void 0, a = 1 / (i + 1), s = n(e)[0], u = 1; u <= i; u++)a *= u, 0 === (o = Math.floor(t.length * a)) ? r.unshift([s[0] * a + t[o][0] * (1 - a), s[1] * a + t[o][1] * (1 - a)]) : r.splice(o, 0, [s[0] * a + t[o][0] * (1 - a), s[1] * a + t[o][1] * (1 - a)]); return r } t.exports = function (t, e) { if (t.length <= 1) return t; for (var r = void 0, o = 0; o < e.length; o++)if (t[o][0] !== e[o][0]) switch (r = n(t[o]), e[o][0]) { case "M": t[o] = ["M"].concat(r[0]); break; case "L": t[o] = ["L"].concat(r[0]); break; case "A": t[o] = [].concat(e[o]), t[o][6] = r[0][0], t[o][7] = r[0][1]; break; case "Q": if (r.length < 2) { if (!(o > 0)) { t[o] = e[o]; break } r = i(r, t[o - 1], 1) } t[o] = ["Q"].concat(r.reduce((function (t, e) { return t.concat(e) }), [])); break; case "T": t[o] = ["T"].concat(r[0]); break; case "C": if (r.length < 3) { if (!(o > 0)) { t[o] = e[o]; break } r = i(r, t[o - 1], 2) } t[o] = ["C"].concat(r.reduce((function (t, e) { return t.concat(e) }), [])); break; case "S": if (r.length < 2) { if (!(o > 0)) { t[o] = e[o]; break } r = i(r, t[o - 1], 1) } t[o] = ["S"].concat(r.reduce((function (t, e) { return t.concat(e) }), [])); break; default: t[o] = e[o] }return t } }, function (t, e, n) { var i = { lc: n(106), lowerCase: n(33), lowerFirst: n(107), substitute: n(108), uc: n(109), upperCase: n(34), upperFirst: n(110) }; t.exports = i }, function (t, e, n) { t.exports = n(33) }, function (t, e, n) { var i = n(8); t.exports = function (t) { var e = i(t); return e.charAt(0).toLowerCase() + e.substring(1) } }, function (t, e) { t.exports = function (t, e) { return t && e ? t.replace(/\\?\{([^{}]+)\}/g, (function (t, n) { return "\\" === t.charAt(0) ? t.slice(1) : void 0 === e[n] ? "" : e[n] })) : t } }, function (t, e, n) { t.exports = n(34) }, function (t, e, n) { var i = n(8); t.exports = function (t) { var e = i(t); return e.charAt(0).toUpperCase() + e.substring(1) } }, function (t, e, n) { var i = n(2), r = { getType: n(35), isArray: n(1), isArrayLike: n(4), isBoolean: n(112), isFunction: n(3), isNil: n(5), isNull: n(113), isNumber: n(6), isObject: n(16), isObjectLike: n(13), isPlainObject: n(7), isPrototype: n(36), isType: i, isUndefined: n(114), isString: n(10), isRegExp: n(115), isDate: n(116), isArguments: n(117), isError: n(118) }; t.exports = r }, function (t, e, n) { var i = n(2); t.exports = function (t) { return i(t, "Boolean") } }, function (t, e) { t.exports = function (t) { return null === t } }, function (t, e) { t.exports = function (t) { return void 0 === t } }, function (t, e, n) { var i = n(2); t.exports = function (t) { return i(t, "RegExp") } }, function (t, e, n) { var i = n(2); t.exports = function (t) { return i(t, "Date") } }, function (t, e, n) { var i = n(2); t.exports = function (t) { return i(t, "Arguments") } }, function (t, e, n) { var i = n(2); t.exports = function (t) { return i(t, "Error") } }, function (t, e, n) { var i = n(3), r = n(14), o = n(11); t.exports = function (t) { for (var e = r(arguments), n = 1; n < e.length; n++) { var a = e[n]; i(a) && (a = a.prototype), o(t.prototype, a) } } }, function (t, e) { t.exports = function (t, e, n) { var i = void 0; return function () { var r = this, o = arguments, a = function () { i = null, n || t.apply(r, o) }, s = n && !i; clearTimeout(i), i = setTimeout(a, e), s && t.apply(r, o) } } }, function (t, e, n) { var i = n(7), r = n(1); function o(t, e, n, a) { for (var s in n = n || 0, a = a || 5, e) if (e.hasOwnProperty(s)) { var u = e[s]; null !== u && i(u) ? (i(t[s]) || (t[s] = {}), n < a ? o(t[s], u, n + 1, a) : t[s] = e[s]) : r(u) ? (t[s] = [], t[s] = t[s].concat(u)) : void 0 !== u && (t[s] = u) } } t.exports = function () { for (var t = new Array(arguments.length), e = t.length, n = 0; n < e; n++)t[n] = arguments[n]; for (var i = t[0], r = 1; r < e; r++)o(i, t[r]); return i } }, function (t, e, n) { var i = n(3), r = n(11); t.exports = function (t, e, n, o) { i(e) || (n = e, e = t, t = function () { }); var a = Object.create ? function (t, e) { return Object.create(t, { constructor: { value: e } }) } : function (t, e) { function n() { } n.prototype = t; var i = new n; return i.constructor = e, i }, s = a(e.prototype, t); return t.prototype = r(s, t.prototype), t.superclass = a(e.prototype, e), r(s, n), r(t, o), t } }, function (t, e, n) { var i = n(37); t.exports = function (t, e) { if (!e) return [t]; var n = i(t, e), r = []; for (var o in n) r.push(n[o]); return r } }, function (t, e, n) { var i = n(4); t.exports = function (t, e) { if (!i(t)) return -1; var n = Array.prototype.indexOf; if (n) return n.call(t, e); for (var r = -1, o = 0; o < t.length; o++)if (t[o] === e) { r = o; break } return r } }, function (t, e, n) { var i = n(5), r = n(4), o = n(35), a = n(36), s = Object.prototype.hasOwnProperty; t.exports = function (t) { if (i(t)) return !0; if (r(t)) return !t.length; var e = o(t); if ("Map" === e || "Set" === e) return !t.size; if (a(t)) return !Object.keys(t).length; for (var n in t) if (s.call(t, n)) return !1; return !0 } }, function (t, e, n) { var i = n(3), r = n(39); t.exports = function (t, e, n) { return i(n) ? !!n(t, e) : r(t, e) } }, function (t, e, n) { var i = n(0), r = n(4); t.exports = function (t, e) { if (!r(t)) return t; var n = []; return i(t, (function (t, i) { n.push(e(t, i)) })), n } }, function (t, e, n) { var i = n(0), r = n(7), o = Object.prototype.hasOwnProperty; t.exports = function (t, e) { if (null === t || !r(t)) return {}; var n = {}; return i(e, (function (e) { o.call(t, e) && (n[e] = t[e]) })), n } }, function (t, e) { t.exports = function (t, e, n) { var i = void 0, r = void 0, o = void 0, a = void 0, s = 0; n || (n = {}); var u = function () { s = !1 === n.leading ? 0 : Date.now(), i = null, a = t.apply(r, o), i || (r = o = null) }, l = function () { var l = Date.now(); s || !1 !== n.leading || (s = l); var c = e - (l - s); return r = this, o = arguments, c <= 0 || c > e ? (i && (clearTimeout(i), i = null), s = l, a = t.apply(r, o), i || (r = o = null)) : i || !1 === n.trailing || (i = setTimeout(u, c)), a }; return l.cancel = function () { clearTimeout(i), s = 0, i = r = o = null }, l } }, function (t, e) { var n, i = (n = {}, function (t) { return n[t = t || "g"] ? n[t] += 1 : n[t] = 1, t + n[t] }); t.exports = i }]) }, t.exports = i() }, function (t, e, n) {
                    "use strict"; n.r(e), n.d(e, "__extends", (function () { return r })), n.d(e, "__assign", (function () { return o })), n.d(e, "__rest", (function () { return s })), n.d(e, "__decorate", (function () { return u })), n.d(e, "__param", (function () { return l })), n.d(e, "__metadata", (function () { return c })), n.d(e, "__awaiter", (function () { return h })), n.d(e, "__generator", (function () { return p })), n.d(e, "__exportStar", (function () { return f })), n.d(e, "__values", (function () { return d })), n.d(e, "__read", (function () { return g })), n.d(e, "__spread", (function () { return v })), n.d(e, "__spreadArrays", (function () { return y })), n.d(e, "__await", (function () { return m })), n.d(e, "__asyncGenerator", (function () { return x })), n.d(e, "__asyncDelegator", (function () { return _ })), n.d(e, "__asyncValues", (function () { return b })), n.d(e, "__makeTemplateObject", (function () { return w })), n.d(e, "__importStar", (function () { return M })), n.d(e, "__importDefault", (function () { return S }));
                    /*! *****************************************************************************
                        Copyright (c) Microsoft Corporation. All rights reserved.
                        Licensed under the Apache License, Version 2.0 (the "License"); you may not use
                        this file except in compliance with the License. You may obtain a copy of the
                        License at http://www.apache.org/licenses/LICENSE-2.0
                        
                        THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
                        KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
                        WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
                        MERCHANTABLITY OR NON-INFRINGEMENT.
                        
                        See the Apache Version 2.0 License for specific language governing permissions
                        and limitations under the License.
                        ***************************************************************************** */
                    var i = function (t, e) { return (i = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e } || function (t, e) { for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]) })(t, e) }; function r(t, e) { function n() { this.constructor = t } i(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n) } var o = function () { return (o = Object.assign || function (t) { for (var e, n = 1, i = arguments.length; n < i; n++)for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]); return t }).apply(this, arguments) }; function s(t, e) { var n = {}; for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && e.indexOf(i) < 0 && (n[i] = t[i]); if (null != t && "function" == typeof Object.getOwnPropertySymbols) { var r = 0; for (i = Object.getOwnPropertySymbols(t); r < i.length; r++)e.indexOf(i[r]) < 0 && Object.prototype.propertyIsEnumerable.call(t, i[r]) && (n[i[r]] = t[i[r]]) } return n } function u(t, e, n, i) { var r, o = arguments.length, s = o < 3 ? e : null === i ? i = Object.getOwnPropertyDescriptor(e, n) : i; if ("object" == ("undefined" == typeof Reflect ? "undefined" : a(Reflect)) && "function" == typeof Reflect.decorate) s = Reflect.decorate(t, e, n, i); else for (var u = t.length - 1; u >= 0; u--)(r = t[u]) && (s = (o < 3 ? r(s) : o > 3 ? r(e, n, s) : r(e, n)) || s); return o > 3 && s && Object.defineProperty(e, n, s), s } function l(t, e) { return function (n, i) { e(n, i, t) } } function c(t, e) { if ("object" == ("undefined" == typeof Reflect ? "undefined" : a(Reflect)) && "function" == typeof Reflect.metadata) return Reflect.metadata(t, e) } function h(t, e, n, i) { return new (n || (n = Promise))((function (r, o) { function a(t) { try { u(i.next(t)) } catch (t) { o(t) } } function s(t) { try { u(i.throw(t)) } catch (t) { o(t) } } function u(t) { t.done ? r(t.value) : new n((function (e) { e(t.value) })).then(a, s) } u((i = i.apply(t, e || [])).next()) })) } function p(t, e) { var n, i, r, o, a = { label: 0, sent: function () { if (1 & r[0]) throw r[1]; return r[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; a;)try { if (n = 1, i && (r = 2 & o[0] ? i.return : o[0] ? i.throw || ((r = i.return) && r.call(i), 0) : i.next) && !(r = r.call(i, o[1])).done) return r; switch (i = 0, r && (o = [2 & o[0], r.value]), o[0]) { case 0: case 1: r = o; break; case 4: return a.label++ , { value: o[1], done: !1 }; case 5: a.label++ , i = o[1], o = [0]; continue; case 7: o = a.ops.pop(), a.trys.pop(); continue; default: if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === o[0] || 2 === o[0])) { a = 0; continue } if (3 === o[0] && (!r || o[1] > r[0] && o[1] < r[3])) { a.label = o[1]; break } if (6 === o[0] && a.label < r[1]) { a.label = r[1], r = o; break } if (r && a.label < r[2]) { a.label = r[2], a.ops.push(o); break } r[2] && a.ops.pop(), a.trys.pop(); continue }o = e.call(t, a) } catch (t) { o = [6, t], i = 0 } finally { n = r = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } } function f(t, e) { for (var n in t) e.hasOwnProperty(n) || (e[n] = t[n]) } function d(t) { var e = "function" == typeof Symbol && t[Symbol.iterator], n = 0; return e ? e.call(t) : { next: function () { return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t } } } } function g(t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var i, r, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(i = o.next()).done;)a.push(i.value) } catch (t) { r = { error: t } } finally { try { i && !i.done && (n = o.return) && n.call(o) } finally { if (r) throw r.error } } return a } function v() { for (var t = [], e = 0; e < arguments.length; e++)t = t.concat(g(arguments[e])); return t } function y() { for (var t = 0, e = 0, n = arguments.length; e < n; e++)t += arguments[e].length; var i = Array(t), r = 0; for (e = 0; e < n; e++)for (var o = arguments[e], a = 0, s = o.length; a < s; a++ , r++)i[r] = o[a]; return i } function m(t) { return this instanceof m ? (this.v = t, this) : new m(t) } function x(t, e, n) { if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined."); var i, r = n.apply(t, e || []), o = []; return i = {}, a("next"), a("throw"), a("return"), i[Symbol.asyncIterator] = function () { return this }, i; function a(t) { r[t] && (i[t] = function (e) { return new Promise((function (n, i) { o.push([t, e, n, i]) > 1 || s(t, e) })) }) } function s(t, e) { try { (n = r[t](e)).value instanceof m ? Promise.resolve(n.value.v).then(u, l) : c(o[0][2], n) } catch (t) { c(o[0][3], t) } var n } function u(t) { s("next", t) } function l(t) { s("throw", t) } function c(t, e) { t(e), o.shift(), o.length && s(o[0][0], o[0][1]) } } function _(t) { var e, n; return e = {}, i("next"), i("throw", (function (t) { throw t })), i("return"), e[Symbol.iterator] = function () { return this }, e; function i(i, r) { e[i] = t[i] ? function (e) { return (n = !n) ? { value: m(t[i](e)), done: "return" === i } : r ? r(e) : e } : r } } function b(t) { if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined."); var e, n = t[Symbol.asyncIterator]; return n ? n.call(t) : (t = d(t), e = {}, i("next"), i("throw"), i("return"), e[Symbol.asyncIterator] = function () { return this }, e); function i(n) { e[n] = t[n] && function (e) { return new Promise((function (i, r) { !function (t, e, n, i) { Promise.resolve(i).then((function (e) { t({ value: e, done: n }) }), e) }(i, r, (e = t[n](e)).done, e.value) })) } } } function w(t, e) { return Object.defineProperty ? Object.defineProperty(t, "raw", { value: e }) : t.raw = e, t } function M(t) { if (t && t.__esModule) return t; var e = {}; if (null != t) for (var n in t) Object.hasOwnProperty.call(t, n) && (e[n] = t[n]); return e.default = t, e } function S(t) { return t && t.__esModule ? t : { default: t } }
                }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = function () { function t(t, e, n, i) { void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === n && (n = 0), void 0 === i && (i = 0), this.height = i, this.width = n, this.x = this.minX = t, this.y = this.minY = e; var r = this.maxX = t + n, o = this.maxY = e + i; this.tl = { x: t, y: e }, this.tr = { x: r, y: e }, this.bl = { x: t, y: o }, this.br = { x: r, y: o }, this.bottom = 0, this.left = this.x, this.right = 0, this.top = this.y } return t.fromRange = function (e, n, i, r) { return new t(e, n, i - e, r - n) }, t.prototype.equals = function (t) { return this.x === t.x && this.y === t.y && this.width === t.width && this.height === t.height }, t }(); e.default = i }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(10), a = n(4), s = { matrix: "matrix", path: "path", points: "points", lineDash: "lineDash" }, u = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.isShape = !0, e } return i.__extends(e, t), e.prototype.createPath = function (t) { }, e.prototype.afterPath = function (t) { }, e.prototype.isPointInPath = function (t, e) { return !1 }, e.prototype.drawInner = function (t) { var e = this.attrs; this.createPath(t); var n = t.globalAlpha; if (this.hasFill()) { var i = e.fillOpacity; r.isNil(i) || 1 === i ? t.fill() : (t.globalAlpha = i, t.fill(), t.globalAlpha = n) } if (this.hasStroke() && this.attrs.lineWidth > 0) { var o = e.strokeOpacity; r.isNil(o) || 1 === o || (t.globalAlpha = o), t.stroke() } this.afterPath(t) }, e.prototype.isHitBox = function () { return !0 }, e.prototype.isHit = function (t, e) { var n = [t, e, 1]; if (this.invert(n), this.isHitBox()) { var i = this.getBBox(); if (i && !a.box(i.minX, i.maxX, i.minY, i.maxY, n[0], n[1])) return !1 } var r = this.attrs.clip; return r ? (r.invert(n, this.get("canvas")), !!r.isPointInPath(n[0], n[1]) && this.isPointInPath(n[0], n[1])) : this.isPointInPath(n[0], n[1]) }, e.prototype.calculateBox = function () { return null }, e.prototype.getHitLineWidth = function () { var t = this.attrs, e = t.lineAppendWidth || 0; return (t.lineWidth || 0) + e }, e.prototype.clearTotalMatrix = function () { this.cfg.totalMatrix = null, this.cfg.region = null }, e.prototype.clearBBox = function () { this.cfg.box = null, this.cfg.region = null }, e.prototype.getBBox = function () { var t = this.get("box"); return t || (t = this.calculateBox()) && this.set("box", t), t }, e.prototype.clone = function () { var t = null, n = this.attrs, i = {}; return r.each(n, (function (t, e) { s[e] && r.isArray(n[e]) ? i[e] = function (t) { for (var e = [], n = 0; n < t.length; n++)r.isArray(t[n]) ? e.push([].concat(t[n])) : e.push(t[n]); return e }(n[e]) : i[e] = n[e] })), (t = new e({ attrs: i })).cfg.zIndex = this.cfg.zIndex, t }, e }(o.default); e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(12), r = n(18), o = n(13), a = n(7); function s(t, e, n, r, o, a, s) { var l = i.box(t, e, n, r, o); if (!u(l.minX, l.maxX, l.minY, l.maxY, a, s)) return !1; var c = i.pointDistance(t, e, n, r, a, s); return !isNaN(c) && c <= o / 2 } function u(t, e, n, i, r, o) { return t <= r && r <= e && n <= o && o <= i } e.line = s, e.polyline = function (t, e, n, i) { var r = t.length - 1; if (r < 1) return !1; for (var o = 0; o < r; o++)if (s(t[o][0], t[o][1], t[o + 1][0], t[o + 1][1], e, n, i)) return !0; return !1 }, e.cubicline = function (t, e, n, i, r, a, s, u, l, c, h) { return o.pointDistance(t, e, n, i, r, a, s, u, c, h) <= l / 2 }, e.quadraticline = function (t, e, n, i, o, a, s, u, l) { return r.pointDistance(t, e, n, i, o, a, u, l) <= s / 2 }, e.arcline = function (t, e, n, i, r, o, s, u, l) { return a.pointDistance(t, e, n, i, r, o, u, l) <= s / 2 }, e.rect = function (t, e, n, i, r, o) { return t <= r && r <= t + n && e <= o && o <= e + i }, e.circle = function (t, e, n, i, r) { return Math.pow(i - t, 2) + Math.pow(r - e, 2) <= Math.pow(n, 2) }, e.box = u }, , function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = /[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi, o = /[^\s\,]+/gi; e.parseRadius = function (t) { var e = 0, n = 0, r = 0, o = 0; return i.isArray(t) ? 1 === t.length ? e = n = r = o = t[0] : 2 === t.length ? (e = r = t[0], n = o = t[1]) : 3 === t.length ? (e = t[0], n = o = t[1], r = t[2]) : (e = t[0], n = t[1], r = t[2], o = t[3]) : e = n = r = o = t, { r1: e, r2: n, r3: r, r4: o } }, e.parsePath = function (t) { return t = t || [], i.isArray(t) ? t : i.isString(t) ? (t = t.match(r), i.each(t, (function (e, n) { if ((e = e.match(o))[0].length > 1) { var r = e[0].charAt(0); e.splice(1, 0, e[0].substr(1)), e[0] = r } i.each(e, (function (t, n) { isNaN(t) || (e[n] = +t) })), t[n] = e })), t) : void 0 } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(2), o = function (t, e, n, i) { return { x: Math.cos(i) * n + t, y: Math.sin(i) * n + e } }, a = function (t, e, n, i) { var r, o; return i ? t < e ? (r = e - t, o = 2 * Math.PI - n + t) : t > n && (r = 2 * Math.PI - t + e, o = t - n) : (r = t - e, o = n - t), r > o ? n : e }; e.nearAngle = function (t, e, n, r) { var o = 0; return n - e >= 2 * Math.PI && (o = 2 * Math.PI), e = i.mod(e, 2 * Math.PI), n = i.mod(n, 2 * Math.PI) + o, t = i.mod(t, 2 * Math.PI), r ? e >= n ? t > n && t < e ? t : a(t, n, e, !0) : t < e || t > n ? t : a(t, e, n, !1) : e <= n ? e < t && t < n ? t : a(t, e, n, !0) : t > e || t < n ? t : a(t, n, e, !1) }, e.pointDistance = function (t, n, r, o, a, s, u, l, c) { var h = [u, l], p = [t, n], f = i.vec2.subtract([], h, p), d = i.vec2.angleTo([1, 0], f); d = e.nearAngle(d, o, a, s); var g = [r * Math.cos(d) + t, r * Math.sin(d) + n]; return c ? { x: g[0], y: g[1] } : i.vec2.distance(g, h) }, e.box = function (t, n, i, a, s, u) { var l = Math.PI / 2, c = Math.PI, h = 3 * Math.PI / 2, p = [], f = e.nearAngle(0, a, s, u); 0 === f && p.push(o(t, n, i, 0)), (f = e.nearAngle(l, a, s, u)) === l && p.push(o(t, n, i, l)), (f = e.nearAngle(c, a, s, u)) === c && p.push(o(t, n, i, c)), (f = e.nearAngle(h, a, s, u)) === h && p.push(o(t, n, i, h)), p.push(o(t, n, i, a)), p.push(o(t, n, i, s)); var d = p.map((function (t) { return t.x })), g = p.map((function (t) { return t.y })); return r.default.fromRange(Math.min.apply(Math, d), Math.min.apply(Math, g), Math.max.apply(Math, d), Math.max.apply(Math, g)) }, e.projectPoint = function (t, n, i, r, o, a, s, u) { return e.pointDistance(t, n, i, r, o, a, s, u, !0) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(4), o = n(13), a = n(18), s = n(39), u = n(2), l = i.vec3, c = i.mat3, h = ["m", "l", "c", "a", "q", "h", "v", "t", "s", "z"]; function p(t, e, n) { return { x: n.x + t, y: n.y + e } } function f(t, e) { return { x: e.x + (e.x - t.x), y: e.y + (e.y - t.y) } } function d(t) { return Math.sqrt(t[0] * t[0] + t[1] * t[1]) } function g(t, e) { return (t[0] * e[0] + t[1] * e[1]) / (d(t) * d(e)) } function v(t, e) { return (t[0] * e[1] < t[1] * e[0] ? -1 : 1) * Math.acos(g(t, e)) } var y = function () { function t(t, e, n) { this.preSegment = e, this.isLast = n, this.init(t, e) } return t.prototype.init = function (t, e) { var n = t[0]; e = e || { endPoint: { x: 0, y: 0 } }; var r, o, a, s, u = h.indexOf(n) >= 0, l = u ? n.toUpperCase() : n, c = t, d = e.endPoint, y = c[1], m = c[2]; switch (l) { default: break; case "M": s = u ? p(y, m, d) : { x: y, y: m }, this.command = "M", this.params = [d, s], this.subStart = s, this.endPoint = s; break; case "L": s = u ? p(y, m, d) : { x: y, y: m }, this.command = "L", this.params = [d, s], this.subStart = e.subStart, this.endPoint = s, this.endTangent = function () { return [s.x - d.x, s.y - d.y] }, this.startTangent = function () { return [d.x - s.x, d.y - s.y] }; break; case "H": s = u ? p(y, 0, d) : { x: y, y: d.y }, this.command = "L", this.params = [d, s], this.subStart = e.subStart, this.endPoint = s, this.endTangent = function () { return [s.x - d.x, s.y - d.y] }, this.startTangent = function () { return [d.x - s.x, d.y - s.y] }; break; case "V": s = u ? p(0, y, d) : { x: d.x, y: y }, this.command = "L", this.params = [d, s], this.subStart = e.subStart, this.endPoint = s, this.endTangent = function () { return [s.x - d.x, s.y - d.y] }, this.startTangent = function () { return [d.x - s.x, d.y - s.y] }; break; case "Q": u ? (r = p(y, m, d), o = p(c[3], c[4], d)) : (r = { x: y, y: m }, o = { x: c[3], y: c[4] }), this.command = "Q", this.params = [d, r, o], this.subStart = e.subStart, this.endPoint = o, this.endTangent = function () { return [o.x - r.x, o.y - r.y] }, this.startTangent = function () { return [d.x - r.x, d.y - r.y] }; break; case "T": o = u ? p(y, m, d) : { x: y, y: m }, "Q" === e.command ? (r = f(e.params[1], d), this.command = "Q", this.params = [d, r, o], this.subStart = e.subStart, this.endPoint = o, this.endTangent = function () { return [o.x - r.x, o.y - r.y] }, this.startTangent = function () { return [d.x - r.x, d.y - r.y] }) : (this.command = "TL", this.params = [d, o], this.subStart = e.subStart, this.endPoint = o, this.endTangent = function () { return [o.x - d.x, o.y - d.y] }, this.startTangent = function () { return [d.x - o.x, d.y - o.y] }); break; case "C": u ? (r = p(y, m, d), o = p(c[3], c[4], d), a = p(c[5], c[6], d)) : (r = { x: y, y: m }, o = { x: c[3], y: c[4] }, a = { x: c[5], y: c[6] }), this.command = "C", this.params = [d, r, o, a], this.subStart = e.subStart, this.endPoint = a, this.endTangent = function () { return [a.x - o.x, a.y - o.y] }, this.startTangent = function () { return [d.x - r.x, d.y - r.y] }; break; case "S": u ? (o = p(y, m, d), a = p(c[3], c[4], d)) : (o = { x: y, y: m }, a = { x: c[3], y: c[4] }), "C" === e.command ? (r = f(e.params[2], d), this.command = "C", this.params = [d, r, o, a], this.subStart = e.subStart, this.endPoint = a, this.endTangent = function () { return [a.x - o.x, a.y - o.y] }, this.startTangent = function () { return [d.x - r.x, d.y - r.y] }) : (this.command = "SQ", this.params = [d, o, a], this.subStart = e.subStart, this.endPoint = a, this.endTangent = function () { return [a.x - o.x, a.y - o.y] }, this.startTangent = function () { return [d.x - o.x, d.y - o.y] }); break; case "A": var x = y, _ = m, b = c[3], w = c[4], M = c[5]; s = u ? p(c[6], c[7], d) : { x: c[6], y: c[7] }, this.command = "A"; var S = function (t, e, n, r, o, a, s) { var u = i.mod(i.toRadian(s), 2 * Math.PI), l = t.x, c = t.y, h = e.x, p = e.y, f = Math.cos(u) * (l - h) / 2 + Math.sin(u) * (c - p) / 2, d = -1 * Math.sin(u) * (l - h) / 2 + Math.cos(u) * (c - p) / 2, y = f * f / (o * o) + d * d / (a * a); y > 1 && (o *= Math.sqrt(y), a *= Math.sqrt(y)); var m = o * o * (d * d) + a * a * (f * f), x = Math.sqrt((o * o * (a * a) - m) / m); n === r && (x *= -1), isNaN(x) && (x = 0); var _ = x * o * d / a, b = x * -a * f / o, w = (l + h) / 2 + Math.cos(u) * _ - Math.sin(u) * b, M = (c + p) / 2 + Math.sin(u) * _ + Math.cos(u) * b, S = v([1, 0], [(f - _) / o, (d - b) / a]), C = [(f - _) / o, (d - b) / a], O = [(-1 * f - _) / o, (-1 * d - b) / a], k = v(C, O); return g(C, O) <= -1 && (k = Math.PI), g(C, O) >= 1 && (k = 0), 0 === r && k > 0 && (k -= 2 * Math.PI), 1 === r && k < 0 && (k += 2 * Math.PI), [t, w, M, o, a, S, k, u, r] }(d, s, w, M, x, _, b); this.params = S; var C = e.subStart; this.subStart = C, this.endPoint = s; var O = S[5] % (2 * Math.PI); i.isNumberEqual(O, 2 * Math.PI) && (O = 0); var k = S[6] % (2 * Math.PI); i.isNumberEqual(k, 2 * Math.PI) && (k = 0); var P = .001; this.startTangent = function () { 0 === M && (P *= -1); var t = S[3] * Math.cos(O - P) + S[1], e = S[4] * Math.sin(O - P) + S[2]; return [t - C.x, e - C.y] }, this.endTangent = function () { var t = S[6]; t - 2 * Math.PI < 1e-4 && (t = 0); var e = S[3] * Math.cos(O + t + P) + S[1], n = S[4] * Math.sin(O + t - P) + S[2]; return [d.x - e, d.y - n] }; break; case "Z": this.command = "Z", this.params = [d, e.subStart], this.subStart = e.subStart, this.endPoint = e.subStart } }, t.prototype.isInside = function (t, e, n) { var i = this.command, o = this.params, a = this.box; if (a && !r.box(a.minX, a.maxX, a.minY, a.maxY, t, e)) return !1; switch (i) { default: break; case "M": return !1; case "TL": case "L": case "Z": return r.line(o[0].x, o[0].y, o[1].x, o[1].y, n, t, e); case "SQ": case "Q": return r.quadraticline(o[0].x, o[0].y, o[1].x, o[1].y, o[2].x, o[2].y, n, t, e); case "C": return r.cubicline(o[0].x, o[0].y, o[1].x, o[1].y, o[2].x, o[2].y, o[3].x, o[3].y, n, t, e); case "A": var s = o, u = s[1], h = s[2], p = s[3], f = s[4], d = s[5], g = s[6], v = s[7], y = s[8], m = p > f ? p : f, x = p > f ? 1 : p / f, _ = p > f ? f / p : 1; s = [t, e, 1]; var b = [1, 0, 0, 0, 1, 0, 0, 0, 1]; return c.translate(b, b, [-u, -h]), c.rotate(b, b, -v), c.scale(b, b, [1 / x, 1 / _]), l.transformMat3(s, s, b), r.arcline(0, 0, m, d, d + g, 1 - y, n, s[0], s[1]) }return !1 }, t.prototype.draw = function (t) { var e, n, i, r = this.command, o = this.params; switch (r) { default: break; case "M": t.moveTo(o[1].x, o[1].y); break; case "TL": case "L": t.lineTo(o[1].x, o[1].y); break; case "SQ": case "Q": e = o[1], n = o[2], t.quadraticCurveTo(e.x, e.y, n.x, n.y); break; case "C": e = o[1], n = o[2], i = o[3], t.bezierCurveTo(e.x, e.y, n.x, n.y, i.x, i.y); break; case "A": var a = o, s = a[1], u = a[2], l = a[3], c = a[4], h = a[5], p = a[6], f = a[7], d = a[8], g = l > c ? l : c, v = l > c ? 1 : l / c, y = l > c ? c / l : 1; t.translate(s, u), t.rotate(f), t.scale(v, y), t.arc(0, 0, g, h, h + p, 1 - d), t.scale(1 / v, 1 / y), t.rotate(-f), t.translate(-s, -u); break; case "Z": t.closePath() } }, t.prototype.getBBox = function (t) { var e, n, i, r, l = t / 2, c = this.params; switch (this.command) { default: case "M": case "Z": break; case "TL": case "L": this.box = u.default.fromRange(Math.min(c[0].x, c[1].x) - l, Math.min(c[0].y, c[1].y) - l, Math.max(c[0].x, c[1].x) + l, Math.max(c[0].y, c[1].y) + l); break; case "SQ": case "Q": for (i = 0, r = (n = a.extrema(c[0].x, c[1].x, c[2].x)).length; i < r; i++)n[i] = a.at(c[0].x, c[1].x, c[2].x, n[i]); for (n.push(c[0].x, c[2].x), i = 0, r = (e = a.extrema(c[0].y, c[1].y, c[2].y)).length; i < r; i++)e[i] = a.at(c[0].y, c[1].y, c[2].y, e); e.push(c[0].y, c[2].y), this.box = u.default.fromRange(Math.min.apply(Math, n) - l, Math.min.apply(Math, e) - l, Math.max.apply(Math, n) + l, Math.max.apply(Math, e) + l); break; case "C": for (i = 0, r = (n = o.extrema(c[0].x, c[1].x, c[2].x, c[3].x)).length; i < r; i++)n[i] = o.at(c[0].x, c[1].x, c[2].x, c[3].x, n[i]); for (i = 0, r = (e = o.extrema(c[0].y, c[1].y, c[2].y, c[3].y)).length; i < r; i++)e[i] = o.at(c[0].y, c[1].y, c[2].y, c[3].y, e[i]); n.push(c[0].x, c[3].x), e.push(c[0].y, c[3].y), this.box = u.default.fromRange(Math.min.apply(Math, n) - l, Math.min.apply(Math, e) - l, Math.max.apply(Math, n) + l, Math.max.apply(Math, e) + l); break; case "A": var h = c, p = h[1], f = h[2], d = h[3], g = h[4], v = h[5], y = h[6], m = h[7], x = h[8], _ = v, b = v + y, w = s.xExtrema(m, d, g), M = 1 / 0, S = -1 / 0, C = [_, b]; for (i = 2 * -Math.PI; i <= 2 * Math.PI; i += Math.PI) { var O = w + i; 1 === x ? _ < O && O < b && C.push(O) : b < O && O < _ && C.push(O) } for (i = 0, r = C.length; i < r; i++) { var k = s.xAt(m, d, g, p, C[i]); k < M && (M = k), k > S && (S = k) } var P = s.yExtrema(m, d, g), A = 1 / 0, L = -1 / 0, T = [_, b]; for (i = 2 * -Math.PI; i <= 2 * Math.PI; i += Math.PI) { var D = P + i; 1 === x ? _ < D && D < b && T.push(D) : b < D && D < _ && T.push(D) } for (i = 0, r = T.length; i < r; i++) { var j = s.yAt(m, d, g, f, T[i]); j < A && (A = j), j > L && (L = j) } this.box = u.default.fromRange(M - l, A - l, S + l, L + l) } }, t }(); e.default = y }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(6), r = n(8), o = Math.PI, s = Math.sin, u = Math.cos, l = Math.atan2, c = o / 3; function h(t, e, n, i, r, a, h) { var p, f, d, g, v, y, m; if (!e.fill) { var x = e.arrowLength || 10, _ = e.arrowAngle ? e.arrowAngle * o / 180 : c; m = l(i - a, n - r), v = Math.abs(e.lineWidth * u(m)) / 2, y = Math.abs(e.lineWidth * s(m)) / 2, h && (v = -v, y = -y), p = r + x * u(m + _ / 2), f = a + x * s(m + _ / 2), d = r + x * u(m - _ / 2), g = a + x * s(m - _ / 2), t.beginPath(), t.moveTo(p - v, f - y), t.lineTo(r - v, a - y), t.lineTo(d - v, g - y), t.moveTo(r - v, a - y), t.lineTo(r + v, a + y), t.moveTo(r, a), t.stroke() } } function p(t, e, n, o, a, s, u) { var l = u ? e.startArrow : e.endArrow, c = l.d, h = 0, p = a - n, f = s - o, d = Math.atan(p / f); 0 === f && p < 0 ? h = Math.PI : p > 0 && f > 0 ? h = Math.PI / 2 - d : p < 0 && f < 0 ? h = -Math.PI / 2 - d : p >= 0 && f < 0 ? h = -d - Math.PI / 2 : p <= 0 && f > 0 && (h = Math.PI / 2 - d); var g = function (t) { var e, n = [], o = i.parsePath(t.path); if (Array.isArray(o) && 0 !== o.length && ("M" === o[0][0] || "m" === o[0][0])) { for (var a = o.length, s = 0; s < o.length; s++) { var u = o[s]; e = new r.default(u, e, s === a - 1), n.push(e) } return n } }(l); if (g) { c && (u ? (a += Math.sin(Math.abs(d)) * c, s = s + Math.cos(Math.abs(d)) * c - .5 * t.lineWidth) : (a -= Math.sin(Math.abs(d)) * c, s = s - Math.cos(Math.abs(d)) * c + .5 * t.lineWidth)), t.save(), t.beginPath(), t.translate(a, s), t.rotate(h); for (var v = 0; v < g.length; v++)g[v].draw(t); t.setTransform(1, 0, 0, 1, 0, 0), t.fillStyle = t.strokeStyle, t.fill(), t.restore() } } e.addStartArrow = function (t, e, n, i, r, o) { "object" == a(e.startArrow) ? p(t, e, n, i, r, o, !0) : e.startArrow && h(t, e, n, i, r, o, !0) }, e.addEndArrow = function (t, e, n, i, r, o) { "object" == a(e.endArrow) ? p(t, e, n, i, r, o, !1) : e.endArrow && h(t, e, n, i, r, o, !1) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(36), a = { delay: "delay", rotate: "rotate" }, s = { fill: "fill", stroke: "stroke", fillStyle: "fillStyle", strokeStyle: "strokeStyle" }; function u(t, e) { var n = {}, i = e.attrs; for (var r in t.attrs) n[r] = i[r]; return n } var l = function (t) { function e(e) { void 0 === e && (e = {}); var n = t.call(this, e) || this; return n.initTransform(), n.initAnimate(), n } return i.__extends(e, t), e.prototype.initAnimate = function () { this.setSilent("animable", !0), this.setSilent("animating", !1) }, e.prototype.animate = function (t, e, n, i, o) { void 0 === i && (i = r.noop), void 0 === o && (o = 0), this.set("animating", !0); var l = this.get("timeline"); l || (l = this.get("canvas").get("timeline"), this.setSilent("timeline", l)); var c = this.get("animators") || []; l.timer || l.initTimer(), r.isNumber(i) && (o = i, i = null), r.isFunction(n) ? (i = n, n = "easeLinear") : n = n || "easeLinear"; var h = function (t, e) { var n = { matrix: null, attrs: {} }, i = e.attrs; for (var o in t) if ("transform" === o) n.matrix = r.transform(e.getMatrix(), t[o]); else if ("rotate" === o) n.matrix = r.transform(e.getMatrix(), [["r", t[o]]]); else if ("matrix" === o) n.matrix = t[o]; else { if (s[o] && /^[r,R,L,l]{1}[\s]*\(/.test(t[o])) continue; a[o] || i[o] === t[o] || (n.attrs[o] = t[o]) } return n }(t, this), p = { fromAttrs: u(h, this), toAttrs: h.attrs, fromMatrix: r.clone(this.getMatrix()), toMatrix: h.matrix, duration: e, easing: n, callback: i, delay: o, startTime: l.getTime(), id: r.uniqueId(), onFrame: null }; t.onFrame && (p.onFrame = t.onFrame), c.length > 0 ? c = function (t, e) { if (e.onFrame) return t; var n = e.delay, i = Object.prototype.hasOwnProperty; return r.each(e.toAttrs, (function (e, o) { r.each(t, (function (t) { n < t.startTime + t.duration && i.call(t.toAttrs, o) && (delete t.toAttrs[o], delete t.fromAttrs[o]) })) })), e.toMatrix && r.each(t, (function (t) { n < t.startTime + t.duration && t.toMatrix && delete t.toMatrix })), t }(c, p) : l.addAnimator(this), c.push(p), this.setSilent("animators", c), this.setSilent("pause", { isPaused: !1 }) }, e.prototype.stopAnimate = function () { var t = this, e = this.get("animators"); r.each(e, (function (e) { e.onFrame ? t.attr(e.onFrame(1)) : t.attr(e.toAttrs), e.toMatrix && t.attr("matrix", e.toMatrix), e.callback && e.callback() })), this.setSilent("animating", !1), this.setSilent("animators", []) }, e.prototype.pauseAnimate = function () { var t = this.get("timeline"); return this.setSilent("pause", { isPaused: !0, pauseTime: t.getTime() }), this }, e.prototype.resumeAnimate = function () { var t = this.get("timeline").getTime(), e = this.get("animators"), n = this.get("pause").pauseTime; return r.each(e, (function (e) { e.startTime = e.startTime + (t - n), e._paused = !1, e._pauseTime = null })), this.setSilent("pause", { isPaused: !1 }), this.setSilent("animators", e), this }, e }(o.default); e.default = l }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = function () { function t(t, e, n, i) { this.x = 0, this.y = 0, this.clientX = 0, this.clientY = 0, this.cfg = {}, this.bubbles = !1, this.cancelable = !1, this.timeStamp = (new Date).getTime(), this.defaultPrevented = !1, this.propagationStopped = !1, this.type = t, this.event = e, this.bubbles = !!n, this.cancelable = !!i } return t.prototype.preventDefault = function () { this.defaultPrevented = this.cancelable && !0 }, t.prototype.stopPropagation = function () { this.propagationStopped = !0 }, t.prototype.remove = function () { this.cfg.removed = !0 }, t.prototype.clone = function () { return i.clone(this) }, t.prototype.toString = function () { return "[Event (type=" + this.type + ")]" }, t }(); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(2); e.at = function (t, e, n) { return (e - t) * n + t }, e.pointDistance = function (t, e, n, r, o, a) { var s = [n - t, r - e]; if (i.vec2.exactEquals(s, [0, 0])) return NaN; var u = [-s[1], s[0]]; i.vec2.normalize(u, u); var l = [o - t, a - e]; return Math.abs(i.vec2.dot(l, u)) }, e.box = function (t, e, n, i, o) { var a = o / 2; return r.default.fromRange(Math.min(t, n) - a, Math.min(e, i) - a, Math.max(t, n) + a, Math.max(e, i) + a) }, e.len = function (t, e, n, i) { return Math.sqrt((n - t) * (n - t) + (i - e) * (i - e)) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = i.vec2; function o(t, e, n, i, r) { var o = 1 - r; return o * o * (o * i + 3 * r * n) + r * r * (r * t + 3 * o * e) } function a(t, e, n, i, a, s, u, l, c, h, p) { var f, d, g, v, y, m, x, _, b = .005, w = 1 / 0, M = [c, h]; for (d = 0; d < 1; d += .05)g = [o(t, n, a, u, d), o(e, i, s, l, d)], (v = r.squaredDistance(M, g)) < w && (f = d, w = v); w = 1 / 0; for (var S = 0; S < 32 && !(b < 1e-4); S++)_ = f + b, g = [o(t, n, a, u, x = f - b), o(e, i, s, l, x)], v = r.squaredDistance(M, g), x >= 0 && v < w ? (f = x, w = v) : (m = [o(t, n, a, u, _), o(e, i, s, l, _)], y = r.squaredDistance(M, m), _ <= 1 && y < w ? (f = _, w = y) : b *= .5); return p ? { x: o(t, n, a, u, f), y: o(e, i, s, l, f) } : Math.sqrt(w) } function s(t, e, n, i, r) { return t * (t * (-3 * e + 9 * n - 9 * i + 3 * r) + 6 * e - 12 * n + 6 * i) - 3 * e + 3 * n } e.at = o, e.derivativeAt = function (t, e, n, i, r) { var o = 1 - r; return 3 * (((e - t) * o + 2 * (n - e) * r) * o + (i - n) * r * r) }, e.pointDistance = a, e.extrema = function (t, e, n, r) { var o, a, s, u = 3 * t - 9 * e + 9 * n - 3 * r, l = 6 * e - 12 * n + 6 * r, c = 3 * n - 3 * r, h = []; if (i.isNumberEqual(u, 0)) i.isNumberEqual(l, 0) || (o = -c / l) >= 0 && o <= 1 && h.push(o); else { var p = l * l - 4 * u * c; i.isNumberEqual(p, 0) ? h.push(-l / (2 * u)) : p > 0 && (a = (-l - (s = Math.sqrt(p))) / (2 * u), (o = (-l + s) / (2 * u)) >= 0 && o <= 1 && h.push(o), a >= 0 && a <= 1 && h.push(a)) } return h }, e.len = function (t, e, n, r, o, a, u, l, c) { i.isNil(c) && (c = 1); for (var h = (c = c > 1 ? 1 : c < 0 ? 0 : c) / 2, p = [-.1252, .1252, -.3678, .3678, -.5873, .5873, -.7699, .7699, -.9041, .9041, -.9816, .9816], f = [.2491, .2491, .2335, .2335, .2032, .2032, .1601, .1601, .1069, .1069, .0472, .0472], d = 0, g = 0; g < 12; g++) { var v = h * p[g] + h, y = s(v, t, n, o, u), m = s(v, e, r, a, l), x = y * y + m * m; d += f[g] * Math.sqrt(x) } return h * d }, e.projectPoint = function (t, e, n, i, r, o, s, u, l, c) { return a(t, e, n, i, r, o, s, u, l, c, !0) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = "\t\n\v\f\r   ᠎             　\u2028\u2029", o = new RegExp("([a-z])[" + r + ",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[" + r + "]*,?[" + r + "]*)+)", "ig"), s = new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[" + r + "]*,?[" + r + "]*", "ig"), u = function (t) { if (!t) return null; if (a(t) == a([])) return t; var e = { a: 7, c: 6, o: 2, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, u: 3, z: 0 }, n = []; return String(t).replace(o, (function (i, r, o) { var a = [], u = r.toLowerCase(); if (o.replace(s, (function (t, e) { e && a.push(+e) })), "m" === u && a.length > 2 && (n.push([r].concat(a.splice(0, 2))), u = "l", r = "m" === r ? "l" : "L"), "o" === u && 1 === a.length && n.push([r, a[0]]), "r" === u) n.push([r].concat(a)); else for (; a.length >= e[u] && (n.push([r].concat(a.splice(0, e[u]))), e[u]);); return t })), n }; e.parsePathString = u; var l = function (t, e) { for (var n = [], i = 0, r = t.length; r - 2 * !e > i; i += 2) { var o = [{ x: +t[i - 2], y: +t[i - 1] }, { x: +t[i], y: +t[i + 1] }, { x: +t[i + 2], y: +t[i + 3] }, { x: +t[i + 4], y: +t[i + 5] }]; e ? i ? r - 4 === i ? o[3] = { x: +t[0], y: +t[1] } : r - 2 === i && (o[2] = { x: +t[0], y: +t[1] }, o[3] = { x: +t[2], y: +t[3] }) : o[0] = { x: +t[r - 2], y: +t[r - 1] } : r - 4 === i ? o[3] = o[2] : i || (o[0] = { x: +t[i], y: +t[i + 1] }), n.push(["C", (-o[0].x + 6 * o[1].x + o[2].x) / 6, (-o[0].y + 6 * o[1].y + o[2].y) / 6, (o[1].x + 6 * o[2].x - o[3].x) / 6, (o[1].y + 6 * o[2].y - o[3].y) / 6, o[2].x, o[2].y]) } return n }; e.catmullRomToBezier = l; var c = function (t, e, n, i, r) { var o = []; if (null === r && null === i && (i = n), t = +t, e = +e, n = +n, i = +i, null !== r) { var a = Math.PI / 180, s = t + n * Math.cos(-i * a), u = t + n * Math.cos(-r * a); o = [["M", s, e + n * Math.sin(-i * a)], ["A", n, n, 0, +(r - i > 180), 0, u, e + n * Math.sin(-r * a)]] } else o = [["M", t, e], ["m", 0, -i], ["a", n, i, 0, 1, 1, 0, 2 * i], ["a", n, i, 0, 1, 1, 0, -2 * i], ["z"]]; return o }, h = function (t) { if (!(t = u(t)) || !t.length) return [["M", 0, 0]]; var e, n, i = [], r = 0, o = 0, a = 0, s = 0, h = 0; "M" === t[0][0] && (a = r = +t[0][1], s = o = +t[0][2], h++ , i[0] = ["M", r, o]); for (var p = 3 === t.length && "M" === t[0][0] && "R" === t[1][0].toUpperCase() && "Z" === t[2][0].toUpperCase(), f = void 0, d = void 0, g = h, v = t.length; g < v; g++) { if (i.push(f = []), (e = (d = t[g])[0]) !== e.toUpperCase()) switch (f[0] = e.toUpperCase(), f[0]) { case "A": f[1] = d[1], f[2] = d[2], f[3] = d[3], f[4] = d[4], f[5] = d[5], f[6] = +d[6] + r, f[7] = +d[7] + o; break; case "V": f[1] = +d[1] + o; break; case "H": f[1] = +d[1] + r; break; case "R": for (var y = 2, m = (n = [r, o].concat(d.slice(1))).length; y < m; y++)n[y] = +n[y] + r, n[++y] = +n[y] + o; i.pop(), i = i.concat(l(n, p)); break; case "O": i.pop(), (n = c(r, o, d[1], d[2])).push(n[0]), i = i.concat(n); break; case "U": i.pop(), i = i.concat(c(r, o, d[1], d[2], d[3])), f = ["U"].concat(i[i.length - 1].slice(-2)); break; case "M": a = +d[1] + r, s = +d[2] + o; break; default: for (y = 1, m = d.length; y < m; y++)f[y] = +d[y] + (y % 2 ? r : o) } else if ("R" === e) n = [r, o].concat(d.slice(1)), i.pop(), i = i.concat(l(n, p)), f = ["R"].concat(d.slice(-2)); else if ("O" === e) i.pop(), (n = c(r, o, d[1], d[2])).push(n[0]), i = i.concat(n); else if ("U" === e) i.pop(), i = i.concat(c(r, o, d[1], d[2], d[3])), f = ["U"].concat(i[i.length - 1].slice(-2)); else for (var x = 0, _ = d.length; x < _; x++)f[x] = d[x]; if ("O" !== (e = e.toUpperCase())) switch (f[0]) { case "Z": r = +a, o = +s; break; case "H": r = f[1]; break; case "V": o = f[1]; break; case "M": a = f[f.length - 2], s = f[f.length - 1]; break; default: r = f[f.length - 2], o = f[f.length - 1] } } return i }; e.pathToAbsolute = h; var p = function (t, e, n, i) { return [t, e, n, i, n, i] }, f = function (t, e, n, i, r, o) { return [1 / 3 * t + 2 / 3 * n, 1 / 3 * e + 2 / 3 * i, 1 / 3 * r + 2 / 3 * n, 1 / 3 * o + 2 / 3 * i, r, o] }, d = function t(e, n, i, r, o, a, s, u, l, c) { i === r && (i += 1); var h, p, f, d, g, v = 120 * Math.PI / 180, y = Math.PI / 180 * (+o || 0), m = [], x = function (t, e, n) { return { x: t * Math.cos(n) - e * Math.sin(n), y: t * Math.sin(n) + e * Math.cos(n) } }; if (c) p = c[0], f = c[1], d = c[2], g = c[3]; else { e = (h = x(e, n, -y)).x, n = h.y, u = (h = x(u, l, -y)).x, l = h.y, e === u && n === l && (u += 1, l += 1); var _ = (e - u) / 2, b = (n - l) / 2, w = _ * _ / (i * i) + b * b / (r * r); w > 1 && (i *= w = Math.sqrt(w), r *= w); var M = i * i, S = r * r, C = (a === s ? -1 : 1) * Math.sqrt(Math.abs((M * S - M * b * b - S * _ * _) / (M * b * b + S * _ * _))); d = C * i * b / r + (e + u) / 2, g = C * -r * _ / i + (n + l) / 2, p = Math.asin(((n - g) / r).toFixed(9)), f = Math.asin(((l - g) / r).toFixed(9)), p = e < d ? Math.PI - p : p, f = u < d ? Math.PI - f : f, p < 0 && (p = 2 * Math.PI + p), f < 0 && (f = 2 * Math.PI + f), s && p > f && (p -= 2 * Math.PI), !s && f > p && (f -= 2 * Math.PI) } var O = f - p; if (Math.abs(O) > v) { var k = f, P = u, A = l; f = p + v * (s && f > p ? 1 : -1), m = t(u = d + i * Math.cos(f), l = g + r * Math.sin(f), i, r, o, 0, s, P, A, [f, k, d, g]) } O = f - p; var L = Math.cos(p), T = Math.sin(p), D = Math.cos(f), j = Math.sin(f), I = Math.tan(O / 4), B = 4 / 3 * i * I, E = 4 / 3 * r * I, F = [e, n], R = [e + B * T, n - E * L], z = [u + B * j, l - E * D], N = [u, l]; if (R[0] = 2 * F[0] - R[0], R[1] = 2 * F[1] - R[1], c) return [R, z, N].concat(m); for (var Y = [], H = 0, G = (m = [R, z, N].concat(m).join().split(",")).length; H < G; H++)Y[H] = H % 2 ? x(m[H - 1], m[H], y).y : x(m[H], m[H + 1], y).x; return Y }, g = function (t, e) { var n, i = h(t), r = e && h(e), o = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, a = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, s = [], u = [], l = "", c = "", g = function (t, e, n) { var i, r; if (!t) return ["C", e.x, e.y, e.x, e.y, e.x, e.y]; switch (!(t[0] in { T: 1, Q: 1 }) && (e.qx = e.qy = null), t[0]) { case "M": e.X = t[1], e.Y = t[2]; break; case "A": t = ["C"].concat(d.apply(0, [e.x, e.y].concat(t.slice(1)))); break; case "S": "C" === n || "S" === n ? (i = 2 * e.x - e.bx, r = 2 * e.y - e.by) : (i = e.x, r = e.y), t = ["C", i, r].concat(t.slice(1)); break; case "T": "Q" === n || "T" === n ? (e.qx = 2 * e.x - e.qx, e.qy = 2 * e.y - e.qy) : (e.qx = e.x, e.qy = e.y), t = ["C"].concat(f(e.x, e.y, e.qx, e.qy, t[1], t[2])); break; case "Q": e.qx = t[1], e.qy = t[2], t = ["C"].concat(f(e.x, e.y, t[1], t[2], t[3], t[4])); break; case "L": t = ["C"].concat(p(e.x, e.y, t[1], t[2])); break; case "H": t = ["C"].concat(p(e.x, e.y, t[1], e.y)); break; case "V": t = ["C"].concat(p(e.x, e.y, e.x, t[1])); break; case "Z": t = ["C"].concat(p(e.x, e.y, e.X, e.Y)) }return t }, v = function (t, e) { if (t[e].length > 7) { t[e].shift(); for (var o = t[e]; o.length;)s[e] = "A", r && (u[e] = "A"), t.splice(e++, 0, ["C"].concat(o.splice(0, 6))); t.splice(e, 1), n = Math.max(i.length, r && r.length || 0) } }, y = function (t, e, o, a, s) { t && e && "M" === t[s][0] && "M" !== e[s][0] && (e.splice(s, 0, ["M", a.x, a.y]), o.bx = 0, o.by = 0, o.x = t[s][1], o.y = t[s][2], n = Math.max(i.length, r && r.length || 0)) }; n = Math.max(i.length, r && r.length || 0); for (var m = 0; m < n; m++) { i[m] && (l = i[m][0]), "C" !== l && (s[m] = l, m && (c = s[m - 1])), i[m] = g(i[m], o, c), "A" !== s[m] && "C" === l && (s[m] = "C"), v(i, m), r && (r[m] && (l = r[m][0]), "C" !== l && (u[m] = l, m && (c = u[m - 1])), r[m] = g(r[m], a, c), "A" !== u[m] && "C" === l && (u[m] = "C"), v(r, m)), y(i, r, o, a, m), y(r, i, a, o, m); var x = i[m], _ = r && r[m], b = x.length, w = r && _.length; o.x = x[b - 2], o.y = x[b - 1], o.bx = parseFloat(x[b - 4]) || o.x, o.by = parseFloat(x[b - 3]) || o.y, a.bx = r && (parseFloat(_[w - 4]) || a.x), a.by = r && (parseFloat(_[w - 3]) || a.y), a.x = r && _[w - 2], a.y = r && _[w - 1] } return r ? [i, r] : i }; e.pathTocurve = g; var v = /,?([a-z]),?/gi, y = function (t) { return t.join(",").replace(v, "$1") }; e.parsePathArray = y; var m = function (t, e, n, i, r) { return t * (t * (-3 * e + 9 * n - 9 * i + 3 * r) + 6 * e - 12 * n + 6 * i) - 3 * e + 3 * n }, x = function (t, e, n, i, r, o, a, s, u) { null === u && (u = 1); for (var l = (u = u > 1 ? 1 : u < 0 ? 0 : u) / 2, c = [-.1252, .1252, -.3678, .3678, -.5873, .5873, -.7699, .7699, -.9041, .9041, -.9816, .9816], h = [.2491, .2491, .2335, .2335, .2032, .2032, .1601, .1601, .1069, .1069, .0472, .0472], p = 0, f = 0; f < 12; f++) { var d = l * c[f] + l, g = m(d, t, n, r, a), v = m(d, e, i, o, s), y = g * g + v * v; p += h[f] * Math.sqrt(y) } return l * p }, _ = function (t, e, n, i, r, o, a, s) { for (var u, l, c, h, p = [], f = [[], []], d = 0; d < 2; ++d)if (0 === d ? (l = 6 * t - 12 * n + 6 * r, u = -3 * t + 9 * n - 9 * r + 3 * a, c = 3 * n - 3 * t) : (l = 6 * e - 12 * i + 6 * o, u = -3 * e + 9 * i - 9 * o + 3 * s, c = 3 * i - 3 * e), Math.abs(u) < 1e-12) { if (Math.abs(l) < 1e-12) continue; (h = -c / l) > 0 && h < 1 && p.push(h) } else { var g = l * l - 4 * c * u, v = Math.sqrt(g); if (!(g < 0)) { var y = (-l + v) / (2 * u); y > 0 && y < 1 && p.push(y); var m = (-l - v) / (2 * u); m > 0 && m < 1 && p.push(m) } } for (var x, _ = p.length, b = _; _--;)x = 1 - (h = p[_]), f[0][_] = x * x * x * t + 3 * x * x * h * n + 3 * x * h * h * r + h * h * h * a, f[1][_] = x * x * x * e + 3 * x * x * h * i + 3 * x * h * h * o + h * h * h * s; return f[0][b] = t, f[1][b] = e, f[0][b + 1] = a, f[1][b + 1] = s, f[0].length = f[1].length = b + 2, { min: { x: Math.min.apply(0, f[0]), y: Math.min.apply(0, f[1]) }, max: { x: Math.max.apply(0, f[0]), y: Math.max.apply(0, f[1]) } } }, b = function (t, e, n, i, r, o, a, s) { if (!(Math.max(t, n) < Math.min(r, a) || Math.min(t, n) > Math.max(r, a) || Math.max(e, i) < Math.min(o, s) || Math.min(e, i) > Math.max(o, s))) { var u = (t - n) * (o - s) - (e - i) * (r - a); if (u) { var l = ((t * i - e * n) * (r - a) - (t - n) * (r * s - o * a)) / u, c = ((t * i - e * n) * (o - s) - (e - i) * (r * s - o * a)) / u, h = +l.toFixed(2), p = +c.toFixed(2); if (!(h < +Math.min(t, n).toFixed(2) || h > +Math.max(t, n).toFixed(2) || h < +Math.min(r, a).toFixed(2) || h > +Math.max(r, a).toFixed(2) || p < +Math.min(e, i).toFixed(2) || p > +Math.max(e, i).toFixed(2) || p < +Math.min(o, s).toFixed(2) || p > +Math.max(o, s).toFixed(2))) return { x: l, y: c } } } }, w = function (t, e, n) { return e >= t.x && e <= t.x + t.width && n >= t.y && n <= t.y + t.height }, M = function (t, e, n, i, r) { if (r) return [["M", +t + +r, e], ["l", n - 2 * r, 0], ["a", r, r, 0, 0, 1, r, r], ["l", 0, i - 2 * r], ["a", r, r, 0, 0, 1, -r, r], ["l", 2 * r - n, 0], ["a", r, r, 0, 0, 1, -r, -r], ["l", 0, 2 * r - i], ["a", r, r, 0, 0, 1, r, -r], ["z"]]; var o = [["M", t, e], ["l", n, 0], ["l", 0, i], ["l", -n, 0], ["z"]]; return o.parsePathArray = y, o }; e.rectPath = M; var S = function (t, e, n, i) { return null === t && (t = e = n = i = 0), null === e && (e = t.y, n = t.width, i = t.height, t = t.x), { x: t, y: e, width: n, w: n, height: i, h: i, x2: t + n, y2: e + i, cx: t + n / 2, cy: e + i / 2, r1: Math.min(n, i) / 2, r2: Math.max(n, i) / 2, r0: Math.sqrt(n * n + i * i) / 2, path: M(t, e, n, i), vb: [t, e, n, i].join(" ") } }, C = function (t, e, n, r, o, a, s, u) { i.isArray(t) || (t = [t, e, n, r, o, a, s, u]); var l = _.apply(null, t); return S(l.min.x, l.min.y, l.max.x - l.min.x, l.max.y - l.min.y) }, O = function (t, e, n, i, r, o, a, s, u) { var l = 1 - u, c = Math.pow(l, 3), h = Math.pow(l, 2), p = u * u, f = p * u, d = t + 2 * u * (n - t) + p * (r - 2 * n + t), g = e + 2 * u * (i - e) + p * (o - 2 * i + e), v = n + 2 * u * (r - n) + p * (a - 2 * r + n), y = i + 2 * u * (o - i) + p * (s - 2 * o + i); return { x: c * t + 3 * h * u * n + 3 * l * u * u * r + f * a, y: c * e + 3 * h * u * i + 3 * l * u * u * o + f * s, m: { x: d, y: g }, n: { x: v, y: y }, start: { x: l * t + u * n, y: l * e + u * i }, end: { x: l * r + u * a, y: l * o + u * s }, alpha: 90 - 180 * Math.atan2(d - v, g - y) / Math.PI } }, k = function (t, e, n) { if (!function (t, e) { return t = S(t), e = S(e), w(e, t.x, t.y) || w(e, t.x2, t.y) || w(e, t.x, t.y2) || w(e, t.x2, t.y2) || w(t, e.x, e.y) || w(t, e.x2, e.y) || w(t, e.x, e.y2) || w(t, e.x2, e.y2) || (t.x < e.x2 && t.x > e.x || e.x < t.x2 && e.x > t.x) && (t.y < e.y2 && t.y > e.y || e.y < t.y2 && e.y > t.y) }(C(t), C(e))) return n ? 0 : []; for (var i = ~~(x.apply(0, t) / 8), r = ~~(x.apply(0, e) / 8), o = [], a = [], s = {}, u = n ? 0 : [], l = 0; l < i + 1; l++) { var c = O.apply(0, t.concat(l / i)); o.push({ x: c.x, y: c.y, t: l / i }) } for (l = 0; l < r + 1; l++)c = O.apply(0, e.concat(l / r)), a.push({ x: c.x, y: c.y, t: l / r }); for (l = 0; l < i; l++)for (var h = 0; h < r; h++) { var p = o[l], f = o[l + 1], d = a[h], g = a[h + 1], v = Math.abs(f.x - p.x) < .001 ? "y" : "x", y = Math.abs(g.x - d.x) < .001 ? "y" : "x", m = b(p.x, p.y, f.x, f.y, d.x, d.y, g.x, g.y); if (m) { if (s[m.x.toFixed(4)] === m.y.toFixed(4)) continue; s[m.x.toFixed(4)] = m.y.toFixed(4); var _ = p.t + Math.abs((m[v] - p[v]) / (f[v] - p[v])) * (f.t - p.t), M = d.t + Math.abs((m[y] - d[y]) / (g[y] - d[y])) * (g.t - d.t); _ >= 0 && _ <= 1 && M >= 0 && M <= 1 && (n ? u += 1 : u.push({ x: m.x, y: m.y, t1: _, t2: M })) } } return u }; function P(t, e) { var n = [], i = []; return t.length && function t(e, r) { if (1 === e.length) n.push(e[0]), i.push(e[0]); else { for (var o = [], a = 0; a < e.length - 1; a++)0 === a && n.push(e[0]), a === e.length - 2 && i.push(e[a + 1]), o[a] = [(1 - r) * e[a][0] + r * e[a + 1][0], (1 - r) * e[a][1] + r * e[a + 1][1]]; t(o, r) } }(t, e), { left: n, right: i.reverse() } } e.intersection = function (t, e) { return function (t, e, n) { var i, r, o, a, s, u, l, c, h, p; t = g(t), e = g(e); for (var f = [], d = 0, v = t.length; d < v; d++) { var y = t[d]; if ("M" === y[0]) i = s = y[1], r = u = y[2]; else { "C" === y[0] ? (h = [i, r].concat(y.slice(1)), i = h[6], r = h[7]) : (h = [i, r, i, r, s, u, s, u], i = s, r = u); for (var m = 0, x = e.length; m < x; m++) { var _ = e[m]; if ("M" === _[0]) o = l = _[1], a = c = _[2]; else { "C" === _[0] ? (p = [o, a].concat(_.slice(1)), o = p[6], a = p[7]) : (p = [o, a, o, a, l, c, l, c], o = l, a = c); for (var b = k(h, p, n), w = 0, M = b.length; w < M; w++)b[w].segment1 = d, b[w].segment2 = m, b[w].bez1 = h, b[w].bez2 = p; f = f.concat(b) } } } } return f }(t, e) }, e.fillPath = function (t, e) { if (1 === t.length) return t; var n = t.length - 1, i = e.length - 1, r = n / i, o = []; if (1 === t.length && "M" === t[0][0]) { for (var a = 0; a < i - n; a++)t.push(t[0]); return t } for (a = 0; a < i; a++) { var s = Math.floor(r * a); o[s] = (o[s] || 0) + 1 } var u = o.reduce((function (e, i, r) { return r === n ? e.concat(t[n]) : e.concat(function (t, e, n) { if (1 === n) return [[].concat(t)]; var i = []; if ("L" === e[0] || "C" === e[0] || "Q" === e[0]) i = i.concat(function (t, e, n) { var i = [[t[1], t[2]]]; n = n || 2; var r = []; "A" === e[0] ? (i.push(e[6]), i.push(e[7])) : "C" === e[0] ? (i.push([e[1], e[2]]), i.push([e[3], e[4]]), i.push([e[5], e[6]])) : "S" === e[0] || "Q" === e[0] ? (i.push([e[1], e[2]]), i.push([e[3], e[4]])) : i.push([e[1], e[2]]); for (var o = i, a = 1 / n, s = 0; s < n - 1; s++) { var u = P(o, a / (1 - a * s)); r.push(u.left), o = u.right } return r.push(o), r.map((function (t) { var e = []; return 4 === t.length && (e.push("C"), e = e.concat(t[2])), t.length >= 3 && (3 === t.length && e.push("Q"), e = e.concat(t[1])), 2 === t.length && e.push("L"), e.concat(t[t.length - 1]) })) }(t, e, n)); else { var r = [].concat(t); "M" === r[0] && (r[0] = "L"); for (var o = 0; o <= n - 1; o++)i.push(r) } return i }(t[r], t[r + 1], i)) }), []); return u.unshift(t[0]), "Z" !== e[i] && "z" !== e[i] || u.push("Z"), u }; var A = function (t, e) { if (t.length !== e.length) return !1; var n = !0; return i.each(t, (function (t, i) { if (t !== e[i]) return n = !1, !1 })), n }; function L(t, e, n) { var i = null, r = n; return e < r && (r = e, i = "add"), t < r && (r = t, i = "del"), { type: i, min: r } } function T(t, e, n) { for (var i, r = [].concat(t), o = 1 / (n + 1), a = D(e)[0], s = 1; s <= n; s++)o *= s, 0 === (i = Math.floor(t.length * o)) ? r.unshift([a[0] * o + t[i][0] * (1 - o), a[1] * o + t[i][1] * (1 - o)]) : r.splice(i, 0, [a[0] * o + t[i][0] * (1 - o), a[1] * o + t[i][1] * (1 - o)]); return r } function D(t) { var e = []; switch (t[0]) { case "M": case "L": e.push([t[1], t[2]]); break; case "A": e.push([t[6], t[7]]); break; case "Q": e.push([t[3], t[4]]), e.push([t[1], t[2]]); break; case "T": e.push([t[1], t[2]]); break; case "C": e.push([t[5], t[6]]), e.push([t[1], t[2]]), e.push([t[3], t[4]]); break; case "S": e.push([t[3], t[4]]), e.push([t[1], t[2]]); break; case "H": case "V": e.push([t[1], t[1]]) }return e } e.fillPathByDiff = function (t, e) { var n = function (t, e) { var n, i, r = t.length, o = e.length, a = 0; if (0 === r || 0 === o) return null; for (var s = [], u = 0; u <= r; u++)s[u] = [], s[u][0] = { min: u }; for (var l = 0; l <= o; l++)s[0][l] = { min: l }; for (u = 1; u <= r; u++)for (n = t[u - 1], l = 1; l <= o; l++) { i = e[l - 1], a = A(n, i) ? 0 : 1; var c = s[u - 1][l].min + 1, h = s[u][l - 1].min + 1, p = s[u - 1][l - 1].min + a; s[u][l] = L(c, h, p) } return s }(t, e), i = t.length, r = e.length, o = [], a = 1, s = 1; if (n[i][r] !== i) { for (var u = 1; u <= i; u++) { var l = n[u][u].min; s = u; for (var c = a; c <= r; c++)n[u][c].min < l && (l = n[u][c].min, s = c); a = s, n[u][a].type && o.push({ index: u - 1, type: n[u][a].type }) } for (u = o.length - 1; u >= 0; u--)a = o[u].index, "add" === o[u].type ? t.splice(a, 0, [].concat(t[a])) : t.splice(a, 1) } var h = r - (i = t.length); if (i < r) for (u = 0; u < h; u++)"z" === t[i - 1][0] || "Z" === t[i - 1][0] ? t.splice(i - 2, 0, t[i - 2]) : t.push(t[i - 1]), i += 1; return t }, e.formatPath = function (t, e) { if (t.length <= 1) return t; for (var n, i = 0; i < e.length; i++)if (t[i][0] !== e[i][0]) switch (n = D(t[i]), e[i][0]) { case "M": t[i] = ["M"].concat(n[0]); break; case "L": t[i] = ["L"].concat(n[0]); break; case "A": t[i] = [].concat(e[i]), t[i][6] = n[0][0], t[i][7] = n[0][1]; break; case "Q": if (n.length < 2) { if (!(i > 0)) { t[i] = e[i]; break } n = T(n, t[i - 1], 1) } t[i] = ["Q"].concat(n.reduce((function (t, e) { return t.concat(e) }), [])); break; case "T": t[i] = ["T"].concat(n[0]); break; case "C": if (n.length < 3) { if (!(i > 0)) { t[i] = e[i]; break } n = T(n, t[i - 1], 2) } t[i] = ["C"].concat(n.reduce((function (t, e) { return t.concat(e) }), [])); break; case "S": if (n.length < 2) { if (!(i > 0)) { t[i] = e[i]; break } n = T(n, t[i - 1], 1) } t[i] = ["S"].concat(n.reduce((function (t, e) { return t.concat(e) }), [])); break; default: t[i] = e[i] }return t } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(43); e.Arc = i.default; var r = n(44); e.Circle = r.default; var o = n(45); e.Dom = o.default; var a = n(46); e.Ellipse = a.default; var s = n(47); e.Fan = s.default; var u = n(48); e.Image = u.default; var l = n(49); e.Line = l.default; var c = n(17); e.Marker = c.default; var h = n(50); e.Path = h.default; var p = n(51); e.Polygon = p.default; var f = n(52); e.Polyline = f.default; var d = n(53); e.Rect = d.default; var g = n(54); e.Text = g.default }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0).createDom('<canvas width="500" height="500"></canvas>').getContext("2d"); e.default = function (t, e, n) { return n.createPath(i), i.isPointInPath(t, e) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(6), a = n(3), s = n(8), u = n(4), l = n(2), c = n(40), h = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "marker", e.canFill = !0, e.canStroke = !0, e } return i.__extends(e, t), e.prototype.getDefaultAttrs = function () { return { path: null, x: 0, y: 0, lineWidth: 1 } }, e.prototype.isPointInPath = function (t, e) { var n = this.attrs, i = n.x, r = n.y, o = n.radius, a = this.getHitLineWidth(); return u.circle(i, r, o + a / 2, t, e) }, e.prototype.calculateBox = function () { var t = this.attrs, e = t.x, n = t.y, i = t.radius, r = this.getHitLineWidth() / 2 + i; return l.default.fromRange(e - r, n - r, e + r, n + r) }, e.prototype._getPath = function () { var t, e = this.attrs, n = e.x, i = e.y, o = e.radius, a = e.symbol || "circle"; return (t = r.isFunction(a) ? a : c.default.get(a)) ? t(n, i, o) : (console.warn(t + " symbol is not exist."), null) }, e.prototype.createPath = function (t) { var e = this.cfg.segments; if (!e || this.cfg.hasUpdate) { var n, i = o.parsePath(this._getPath()); for (t.beginPath(), e = [], a = 0; a < i.length; a++) { var r = i[a]; n = new s.default(r, n, a === i.length - 1), e.push(n), n.draw(t) } this.cfg.segments = e, this.cfg.hasUpdate = !1 } else { t.beginPath(); for (var a = 0; a < e.length; a++)e[a].draw(t) } }, e.symbolsFactory = c.default, e }(a.default); e.default = h }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = i.vec2; function o(t, e, n, i) { var r = 1 - i; return r * (r * t + 2 * i * e) + i * i * n } function a(t, e, n, i, a, s, u, l, c) { var h, p, f, d, g, v, y, m = .005, x = 1 / 0, _ = [u, l]; for (g = 0; g < 1; g += .05)f = [o(t, n, a, g), o(e, i, s, g)], (p = r.squaredDistance(_, f)) < x && (h = g, x = p); for (x = 1 / 0, y = 0; y < 32 && !(m < 1e-4); y++) { var b = h - m, w = h + m; f = [o(t, n, a, b), o(e, i, s, b)], p = r.squaredDistance(_, f), b >= 0 && p < x ? (h = b, x = p) : (d = [o(t, n, a, w), o(e, i, s, w)], v = r.squaredDistance(_, d), w <= 1 && v < x ? (h = w, x = v) : m *= .5) } return c ? { x: o(t, n, a, h), y: o(e, i, s, h) } : Math.sqrt(x) } e.at = o, e.pointDistance = a, e.extrema = function (t, e, n) { var r = t + n - 2 * e; if (i.isNumberEqual(r, 0)) return [.5]; var o = (t - e) / r; return o <= 1 && o >= 0 ? [o] : [] }, e.projectPoint = function (t, e, n, i, r, o, s, u) { return a(t, e, n, i, r, o, s, u, !0) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(10), a = n(2), s = n(15), u = {}; function l(t, e, n) { for (var i, r = t.length - 1; r >= 0; r--) { var o = t[r]; if (o.cfg.visible && o.cfg.capture && !o.destroyed && !o.removed && (o.isGroup ? i = o.getShape(e, n) : o.isHit(e, n) && (i = o)), i) break } return i } var c = function (t) { function e(e) { void 0 === e && (e = {}); var n = t.call(this, e) || this; return n.isGroup = !0, n.type = "group", n.canFill = !0, n.canStroke = !0, n.set("children", []), n.set("tobeRemoved", []), n._beforeRenderUI(), n._renderUI(), n._bindUI(), n } return i.__extends(e, t), e.prototype._beforeRenderUI = function () { }, e.prototype._renderUI = function () { }, e.prototype._bindUI = function () { }, e.prototype.addShape = function (t, e) { var n = this.get("canvas"); e = e || {}; var i = u[t]; if (i || (i = r.upperFirst(t), u[t] = i), e.attrs && n) { var o = e.attrs; if ("text" === t) { var a = n.get("fontFamily"); a && (o.fontFamily = o.fontFamily ? o.fontFamily : a) } } e.canvas = n, e.type = t; var l = new s[i](e); return this.add(l), l }, e.prototype.addGroup = function (t, n) { var i, o = this.get("canvas"); if (n = r.mix({}, n), r.isFunction(t)) n ? (n.canvas = o, n.parent = this, i = new t(n)) : i = new t({ canvas: o, parent: this }), this.add(i); else if (r.isObject(t)) t.canvas = o, i = new e(t), this.add(i); else { if (void 0 !== t) return !1; i = new e, this.add(i) } return i }, e.prototype.renderBack = function (t, e) { var n = this.get("backShape"), i = this.getBBox(); return r.mix(e, { x: i.x - t[3], y: i.y - t[0], width: i.width + t[1] + t[3], height: i.height + t[0] + t[2] }), n ? n.attr(e) : n = this.addShape("rect", { zIndex: -1, attrs: e }), this.set("backShape", n), this.sort(), n }, e.prototype.removeChild = function (e, n) { if (arguments.length >= 2) this.contain(e) && e.remove(n); else { if (1 === arguments.length) { if (!r.isBoolean(e)) return this.contain(e) && e.remove(!0), this; n = e } 0 === arguments.length && (n = !0), t.prototype.remove.call(this, n) } return this }, e.prototype.add = function (t) { var e = this, n = e.get("children"); if (r.isArray(t)) r.each(t, (function (t) { var n = t.get("parent"); n && n.removeChild(t, !1), e._setCfgProperty(t) })), e.cfg.children = n.concat(t); else { var i = t, o = i.get("parent"); o && o.removeChild(i, !1), e._setCfgProperty(i), n.push(i) } return e }, e.prototype._setCfgProperty = function (t) { var e = this.cfg; t.set("parent", this), t.set("canvas", e.canvas), e.timeline && t.set("timeline", e.timeline) }, e.prototype.contain = function (t) { return this.get("children").indexOf(t) > -1 }, e.prototype.getChildByIndex = function (t) { return this.get("children")[t] }, e.prototype.getFirst = function () { return this.getChildByIndex(0) }, e.prototype.getLast = function () { var t = this.get("children").length - 1; return this.getChildByIndex(t) }, e.prototype.getBBox = function () { var t = 1 / 0, e = -1 / 0, n = 1 / 0, i = -1 / 0, o = this.get("children"); return o.length > 0 ? r.each(o, (function (r) { if (r.get("visible")) { var o = r.getBBox(); if (!o) return !0; var a = o.tl, s = o.tr, u = o.bl, l = o.br, c = [a.x, a.y, 1], h = [u.x, u.y, 1], p = [s.x, s.y, 1], f = [l.x, l.y, 1]; r.apply(c), r.apply(h), r.apply(p), r.apply(f); var d = Math.min(c[0], h[0], p[0], f[0]), g = Math.max(c[0], h[0], p[0], f[0]), v = Math.min(c[1], h[1], p[1], f[1]), y = Math.max(c[1], h[1], p[1], f[1]); d < t && (t = d), g > e && (e = g), v < n && (n = v), y > i && (i = y) } })) : (t = 0, e = 0, n = 0, i = 0), new a.default(t, n, e - t, i - n) }, e.prototype.getCount = function () { return this.get("children").length }, e.prototype.sort = function () { var t, e = this.get("children"); return r.each(e, (function (t, e) { return t._INDEX = e, t })), e.sort((t = function (t, e) { return t.get("zIndex") - e.get("zIndex") }, function (e, n) { var i = t(e, n); return 0 === i ? e._INDEX - n._INDEX : i })), this }, e.prototype.findById = function (t) { return this.find((function (e) { return e.get("id") === t })) }, e.prototype.find = function (t) { if (r.isString(t)) return this.findById(t); var e = this.get("children"), n = null; return r.each(e, (function (e) { if (t(e) ? n = e : e.find && (n = e.find(t)), n) return !1 })), n }, e.prototype.findAll = function (t) { var e = this.get("children"), n = [], i = []; return r.each(e, (function (e) { t(e) && n.push(e), e.findAllBy && (i = e.findAllBy(t), n = n.concat(i)) })), n }, e.prototype.findBy = function (t) { var e = this.get("children"), n = null; return r.each(e, (function (e) { if (t(e) ? n = e : e.findBy && (n = e.findBy(t)), n) return !1 })), n }, e.prototype.findAllBy = function (t) { var e = this.get("children"), n = [], i = []; return r.each(e, (function (e) { t(e) && n.push(e), e.findAllBy && (i = e.findAllBy(t), n = n.concat(i)) })), n }, e.prototype.getShape = function (t, e, n) { var i, r = this.attrs.clip, o = this.cfg.children; if (r) { var a = [t, e, 1]; r.invert(a, this.get("canvas")), r.isPointInPath(a[0], a[1]) && (i = l(o, t, e)) } else i = l(o, t, e); return i }, e.prototype.clearTotalMatrix = function () { if (this.get("totalMatrix")) { this.setSilent("totalMatrix", null); for (var t = this.cfg.children, e = 0; e < t.length; e++)t[e].clearTotalMatrix() } }, e.prototype.clear = function (t) { if (!this.destroyed) { for (var e = this.cfg.children, n = e.length - 1; n >= 0; n--)e[n].remove(!0, t); return this.cfg.children = [], this } }, e.prototype.destroy = function () { this.destroyed || (this.clear(), t.prototype.destroy.call(this)) }, e.prototype.clone = function () { var t = this.cfg.children, n = new e; return r.each(t, (function (t) { n.add(t.clone()) })), n }, e }(o.default); e.default = c }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(2); e.BBox = r.default; var o = n(21); e.Canvas = o.default; var a = n(10); e.Element = a.default; var s = n(11); e.Event = s.default; var u = n(19); e.Group = u.default; var l = n(8); e.PathSegment = l.default; var c = n(3); e.Shape = c.default; var h = n(14); e.PathUtil = h; var p = n(15); e.Shapes = p; var f = n(55); e.version = f.version, i.__exportStar(n(15), e), i.__exportStar(n(56), e) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(22), a = n(11), s = n(42), u = n(19), l = ["click", "mousedown", "mouseup", "dblclick", "contextmenu", "mouseenter", "mouseleave", "mouseover", "mouseout", "mousemove", "wheel"], c = null, h = null, p = null; function f(t) { return +t } var d = function (t) { function e(e) { var n = t.call(this, i.__assign({ eventEnable: !0, width: null, height: null, widthCanvas: null, heightCanvas: null, widthStyle: null, heightStyle: null, containerDOM: null, canvasDOM: null, pixelRatio: null, renderer: "canvas" }, e)) || this; return n._setGlobalParam(), n._setContainer(), n._initPainter(), n._scale(), n.get("eventEnable") && n.registerEvent(), n } return i.__extends(e, t), e.prototype._scale = function () { if ("svg" !== this.cfg.renderType) { var t = this.get("pixelRatio"); this.scale(t, t) } }, e.prototype._setGlobalParam = function () { var t = this.get("renderer") || "canvas"; "svg" === t ? this.set("pixelRatio", 1) : this.get("pixelRatio") || this.set("pixelRatio", r.getRatio()), this.cfg.renderType = t; var e = o[t]; this.cfg.renderer = e, this.cfg.canvas = this; var n = new s.default(this); this.cfg.timeline = n }, e.prototype._setContainer = function () { var t = this.get("containerId"), e = this.get("containerDOM"); e || (e = document.getElementById(t), this.set("containerDOM", e)), r.modifyCSS(e, { position: "relative" }); for (var n = e.style.transform, i = [], o = /(\w+)\((.+?)\)/g, a = o.exec(n); a;)i.push([a[1], a[2].split(", ")]), a = o.exec(n); var s = { scaleX: 1, scaleY: 1 }; r.each(i, (function (t, e) { var n = t[0], i = t[1] && t[1][0], o = t[1] && t[1][1]; "scale" === n ? (s.scaleX = r.isNil(i) ? 1 : f(i), s.scaleY = r.isNil(o) ? s.scaleX : f(o)) : n === e && (s[e] = i) })), this.set("containerTransform", s) }, e.prototype._initPainter = function () { var t = this.get("containerDOM"), e = new this.cfg.renderer.painter(t); this.cfg.painter = e, this.cfg.canvasDOM = this.cfg.el = e.canvas, this.changeSize(this.get("width"), this.get("height")) }, e.prototype._resize = function () { var t = this.get("canvasDOM"), e = this.get("widthCanvas"), n = this.get("heightCanvas"), i = this.get("widthStyle"), r = this.get("heightStyle"); t.style.width = i, t.style.height = r, t.setAttribute("width", e), t.setAttribute("height", n) }, e.prototype.getWidth = function () { var t = this.get("pixelRatio"); return this.get("width") * t }, e.prototype.getHeight = function () { var t = this.get("pixelRatio"); return this.get("height") * t }, e.prototype.changeSize = function (t, e) { var n = this.get("pixelRatio"), i = t * n, r = e * n; this.set("widthCanvas", i), this.set("heightCanvas", r), this.set("widthStyle", t + "px"), this.set("heightStyle", e + "px"), this.set("width", t), this.set("height", e), this._resize() }, e.prototype.getPointByClient = function (t, e) { var n = this.get("containerTransform"), i = n.scaleX, r = n.scaleY, o = this.get("el"), a = this.get("pixelRatio") || 1, s = o.getBoundingClientRect(); return { x: (t - s.left) * a / i, y: (e - s.top) * a / r } }, e.prototype.getClientByPoint = function (t, e) { var n = this.get("containerTransform"), i = n.scaleX, r = n.scaleY, o = this.get("el").getBoundingClientRect(), a = this.get("pixelRatio") || 1; return { clientX: t / a * i + o.left, clientY: e / a * r + o.top } }, e.prototype.draw = function () { this.cfg.painter.draw(this) }, e.prototype.getShape = function (e, n, i) { return 3 === arguments.length && this.cfg.renderer.getShape ? this.cfg.renderer.getShape.call(this, e, n, i) : t.prototype.getShape.call(this, e, n) }, e.prototype.getRenderer = function () { return this.cfg.renderType }, e.prototype._drawSync = function () { this.cfg.painter.drawSync(this) }, e.prototype.destroy = function () { var e = this.cfg, n = e.containerDOM, i = e.canvasDOM; i && n && n.removeChild(i), e.timeline.stop(), t.prototype.destroy.call(this) }, e.prototype.registerEvent = function () { var t = this, e = this.get("el"); r.each(l, (function (n) { e.addEventListener(n, (function (e) { t._triggerEvent(n, e) }), !1) })), e.addEventListener("touchstart", (function (e) { r.isEmpty(e.targetTouches) || t._triggerEvent("touchstart", e) }), !1), e.addEventListener("touchmove", (function (e) { r.isEmpty(e.targetTouches) || t._triggerEvent("touchmove", e) }), !1), e.addEventListener("touchend", (function (e) { r.isEmpty(e.changedTouches) || t._triggerEvent("touchend", e) }), !1) }, e.prototype._getEmitter = function (t, e) { if (t) { if (!r.isEmpty(t.getEvents())) return t; var n = t.get("parent"); if (n && !e.propagationStopped) return this._getEmitter(n, e) } }, e.prototype._getEventObj = function (t, e, n, i) { var r = new a.default(t, e, !0, !0); return r.x = n.x, r.y = n.y, r.clientX = e.clientX, r.clientY = e.clientY, r.target = i, r.currentTarget = this._getEmitter(i, r), r }, e.prototype._getClientXY = function (t, e) { return "touchstart" === t || "touchmove" === t ? [e.targetTouches[0].clientX, e.targetTouches[0].clientY] : "touchend" === t ? [e.changedTouches[0].clientX, e.changedTouches[0].clientY] : [e.clientX, e.clientY] }, e.prototype._triggerEvent = function (t, e) { var n = this._getClientXY(t, e), i = n[0], r = n[1], o = this.getPointByClient(i, r), a = this.getShape(o.x, o.y, e), s = this.get("el"); if (p && "svg" === this.getRenderer() && (a = this.getShape(o.x, o.y)), "mousemove" === t) { if (c && c !== a && (this._emitEvent("mouseout", e, o, c), this._emitEvent("mouseleave", e, o, c), p && this._emitEvent("dragleave", e, o, c), c.destroyed || c.removed || (s.style.cursor = c.attr("cursor") || "default")), p && (this._emitEvent("drag", e, o, p), this._emitEvent("mousemove", e, o, a || this)), a) p || (h === a ? (p = a, h = null, this._emitEvent("dragstart", e, o, a)) : this._emitEvent("mousemove", e, o, a)), c !== a && (this._emitEvent("mouseenter", e, o, a), this._emitEvent("mouseover", e, o, a), p && this._emitEvent("dragenter", e, o, a)); else { var u = this._getEventObj("mousemove", e, o, this); this.emit("mousemove", u) } c = a } else this._emitEvent(t, e, o, a || this), p || "mousedown" !== t || (h = a), "mouseup" === t && (h = null, p && (p.cfg.capture = !0, this._emitEvent("dragend", e, o, p), p = null, this._emitEvent("drop", e, o, a || this))); a && !a.destroyed && (s.style.cursor = a.attr("cursor") || "default") }, e.prototype._emitEvent = function (t, e, n, i) { var r = this._getEventObj(t, e, n, i), o = this._getEmitter(i, e); return o && o.emit(t, r), o }, e }(u.default); e.default = d }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(23); e.canvas = i; var r = n(26); e.svg = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(24); e.painter = i.default }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(25), o = ["fillStyle", "font", "globalAlpha", "lineCap", "lineWidth", "lineJoin", "miterLimit", "shadowBlur", "shadowColor", "shadowOffsetX", "shadowOffsetY", "strokeStyle", "textAlign", "textBaseline", "lineDash", "lineDashOffset"], a = function () { function t(t) { if (!t) return null; var e = i.uniqueId("canvas_"), n = i.createDom('<canvas id="' + e + '"></canvas>'); return t.appendChild(n), this.type = "canvas", this.canvas = n, this.context = n.getContext("2d"), this } return t.prototype.beforeDraw = function () { var t = this.canvas; this.context && this.context.clearRect(0, 0, t.width, t.height) }, t.prototype.draw = function (t) { var e = this; e.animateHandler ? e.toDraw = !0 : function n() { e.animateHandler = i.requestAnimationFrame((function () { e.animateHandler = void 0, e.toDraw && n() })), e.beforeDraw(); try { e._drawGroup(t) } catch (t) { console.warn("error in draw canvas, detail as:"), console.warn(t) } finally { e.toDraw = !1 } }() }, t.prototype.drawSync = function (t) { this.beforeDraw(), this._drawGroup(t) }, t.prototype._drawGroup = function (t) { if (!t.removed && !t.destroyed && t.cfg.visible) { var e = t.cfg.children, n = null; this.setContext(t); for (var i = 0; i < e.length; i++)n = e[i], e[i].isGroup ? this._drawGroup(n) : this._drawShape(n); this.restoreContext(t) } }, t.prototype._drawShape = function (t) { t.removed || t.destroyed || !t.cfg.visible || (this.setContext(t), t.drawInner(this.context), this.restoreContext(t), t.cfg.attrs = t.attrs, t.cfg.hasUpdate = !1) }, t.prototype.setContext = function (t) { var e = this.context, n = t.attrs.clip; e.save(), n && (n.resetTransform(e), n.createPath(e), e.clip()), this.resetContext(t), t.resetTransform(e) }, t.prototype.restoreContext = function (t) { this.context.restore() }, t.prototype.resetContext = function (t) { var e = this.context, n = t.attrs; if (!t.isGroup) for (var a in n) if (o.indexOf(a) > -1) { var s = n[a]; "fillStyle" === a && (s = r.parseStyle(s, t, e)), "strokeStyle" === a && (s = r.parseStyle(s, t, e)), "lineDash" === a && e.setLineDash ? i.isArray(s) ? e.setLineDash(s) : i.isString(s) && e.setLineDash(s.split(" ")) : e[a] = s } }, t }(); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = /[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi, o = /[^\s\,]+/gi, a = /^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i, s = /^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i, u = /^p\s*\(\s*([axyn])\s*\)\s*(.*)/i, l = /[\d.]+:(#[^\s]+|[^\)]+\))/gi; function c(t, e) { var n = t.match(l); i.each(n, (function (t) { t = t.split(":"), e.addColorStop(t[0], t[1]) })) } e.parsePath = function (t) { return t = t || [], i.isArray(t) ? t : i.isString(t) ? (t = t.match(r), i.each(t, (function (e, n) { if ((e = e.match(o))[0].length > 1) { var r = e[0].charAt(0); e.splice(1, 0, e[0].substr(1)), e[0] = r } i.each(e, (function (t, n) { isNaN(t) || (e[n] = +t) })), t[n] = e })), t) : void 0 }, e.parseStyle = function (t, e, n) { if (i.isString(t)) { if ("(" === t[1] || "(" === t[2]) { if ("l" === t[0]) return function (t, e, n) { var r, o, s = a.exec(t), u = i.mod(i.toRadian(parseFloat(s[1])), 2 * Math.PI), l = s[2], h = e.getBBox(), p = h.maxX, f = h.maxY; u >= 0 && u < .5 * Math.PI ? (r = { x: h.x, y: h.y }, o = { x: p, y: f }) : .5 * Math.PI <= u && u < Math.PI ? (r = { x: p, y: h.y }, o = { x: h.x, y: f }) : Math.PI <= u && u < 1.5 * Math.PI ? (r = { x: p, y: f }, o = { x: h.x, y: h.y }) : (r = { x: h.x, y: f }, o = { x: p, y: h.y }); var d = Math.tan(u), g = d * d, v = (o.x - r.x + d * (o.y - r.y)) / (g + 1) + r.x, y = d * (o.x - r.x + d * (o.y - r.y)) / (g + 1) + r.y, m = n.createLinearGradient(r.x, r.y, v, y); return c(l, m), m }(t, e, n); if ("r" === t[0]) return function (t, e, n) { var i = s.exec(t), r = parseFloat(i[1]), o = parseFloat(i[2]), a = parseFloat(i[3]), u = i[4]; if (0 === a) { var h = u.match(l); return h[h.length - 1].split(":")[1] } var p = e.getBBox(), f = p.maxX, d = p.maxY, g = f - p.x, v = d - p.y, y = Math.sqrt(g * g + v * v) / 2, m = n.createRadialGradient(p.x + g * r, p.y + v * o, a * y, p.x + g / 2, p.y + v / 2, y); return c(u, m), m }(t, e, n); if ("p" === t[0]) return function (t, e, n) { if (e.get("patternSource") && e.get("patternSource") === t) return e.get("pattern"); var i, r, o = u.exec(t), a = o[1], s = o[2]; function l() { i = n.createPattern(r, a), e.setSilent("pattern", i), e.setSilent("patternSource", t) } switch (a) { case "a": a = "repeat"; break; case "x": a = "repeat-x"; break; case "y": a = "repeat-y"; break; case "n": a = "no-repeat"; break; default: a = "no-repeat" }return r = new Image, s.match(/^data:/i) || (r.crossOrigin = "Anonymous"), r.src = s, r.complete ? l() : (r.onload = l, r.src = r.src), i }(t, e, n) } return t } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(27); e.painter = i.default; var r = n(41); e.getShape = r.default }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(28), o = n(30), a = n(6), s = (n(17).default.symbolsFactory, { rect: "path", circle: "circle", line: "line", path: "path", marker: "path", text: "text", polygon: "polygon", image: "image", ellipse: "ellipse", dom: "foreignObject", fan: "path", group: "g" }), u = { opacity: "opacity", fillStyle: "fill", strokeOpacity: "stroke-opacity", fillOpacity: "fill-opacity", strokeStyle: "stroke", x: "x", y: "y", r: "r", width: "width", height: "height", x1: "x1", x2: "x2", y1: "y1", y2: "y2", lineCap: "stroke-linecap", lineJoin: "stroke-linejoin", lineWidth: "stroke-width", lineDash: "stroke-dasharray", lineDashOffset: "stroke-dashoffset", miterLimit: "stroke-miterlimit", font: "font", fontSize: "font-size", fontStyle: "font-style", fontVariant: "font-variant", fontWeight: "font-weight", fontFamily: "font-family", startArrow: "marker-start", endArrow: "marker-end", path: "d", class: "class", id: "id", style: "style", preserveAspectRatio: "preserveAspectRatio" }, l = { top: "before-edge", middle: "central", bottom: "after-edge", alphabetic: "baseline", hanging: "hanging" }, c = { top: "text-before-edge", middle: "central", bottom: "text-after-edge", alphabetic: "alphabetic", hanging: "hanging" }, h = { left: "left", start: "left", center: "middle", right: "end", end: "end" }, p = function () { function t(t) { if (this.toDraw = !1, this.type = "svg", this.removed = !1, this.destroyed = !1, !t) return null; var e = i.uniqueId("canvas_"), n = i.createDom('<svg id="' + e + '"></svg>'); return t.appendChild(n), this.type = "svg", this.canvas = n, this.context = new o.default(n), this.toDraw = !1, this } return t.prototype.draw = function (t) { var e = this; e.animateHandler ? e.toDraw = !0 : function n() { e.animateHandler = i.requestAnimationFrame((function () { e.animateHandler = void 0, e.toDraw && n() })); try { e._drawChildren(t) } catch (t) { console.warn("error in draw canvas, detail as:"), console.warn(t) } finally { e.toDraw = !1 } }() }, t.prototype.drawSync = function (t) { this._drawChildren(t) }, t.prototype._drawGroup = function (t, e) { var n = t.cfg; t.removed || t.destroyed || (n.tobeRemoved && (i.each(n.tobeRemoved, (function (t) { t.parentNode && t.parentNode.removeChild(t) })), n.tobeRemoved = []), this._drawShape(t, e), n.children && n.children.length > 0 && this._drawChildren(t)) }, t.prototype._drawChildren = function (t) { var e, n = t.cfg.children; if (n) for (var i = 0; i < n.length; i++)(e = n[i]).isGroup ? this._drawGroup(e, i) : this._drawShape(e, i) }, t.prototype._drawShape = function (t, e) { var n = t.attrs, i = t.cfg, r = i.el; t.removed || t.destroyed ? r && r.parentNode.removeChild(i.el) : (!r && i.parent && (this._createDom(t, e), this._updateShape(t)), r = i.el, !1 !== i.visible ? (i.visible && r.hasAttribute("visibility") && r.removeAttribute("visibility"), i.hasUpdate && this._updateShape(t), n.clip && n.clip.cfg.hasUpdate && this._updateShape(n.clip)) : r.setAttribute("visibility", "hidden")) }, t.prototype._updateShape = function (t) { var e = t.attrs, n = t.cfg.attrs; if (n) if (t.cfg.el || this._createDom(t), "clip" in e && this._setClip(t, e.clip), ("shadowOffsetX" in e || "shadowOffsetY" in e || "shadowBlur" in e || "shadowColor" in e) && this._setShadow(t), "text" !== t.type) { for (var r in "fan" === t.type && this._updateFan(t), "marker" === t.type && t.cfg.el.setAttribute("d", this._assembleMarker(t, e)), "rect" === t.type && t.cfg.el.setAttribute("d", this._assembleRect(e)), e) e[r] !== n[r] && this._setAttribute(t, r, e[r]); t.cfg.attrs = i.deepMix({}, t.attrs), t.cfg.hasUpdate = !1 } else this._updateText(t) }, t.prototype._setAttribute = function (t, e, n) { var r = t.type, o = t.attrs, a = t.cfg.el, s = this.context; if ("marker" !== r && "rect" !== r || !~["x", "y", "radius", "r"].indexOf(e)) if (~["circle", "ellipse"].indexOf(r) && ~["x", "y"].indexOf(e)) a.setAttribute("c" + e, parseInt(n, 10)); else { if ("polygon" === r && "points" === e) return n && 0 !== n.length || (n = ""), i.isArray(n) && (n = (n = n.map((function (t) { return t[0] + "," + t[1] }))).join(" ")), void a.setAttribute("points", n); if ("path" !== e) if ("img" !== e) { if ("transform" === e) return n ? void this._setTransform(t) : void a.removeAttribute("transform"); if ("rotate" === e) return n ? void this._setTransform(t) : void a.removeAttribute("transform"); if ("matrix" !== e) if ("fillStyle" !== e && "strokeStyle" !== e) { if ("clip" !== e) if (~e.indexOf("Arrow")) if (e = u[e], n) { var l; l = "boolean" == typeof n ? s.getDefaultArrow(o, e) : s.addArrow(o, e), a.setAttribute(e, "url(#" + l + ")"), t.cfg[e] = l } else t.cfg[e] = null, a.removeAttribute(e); else "html" === e && ("string" == typeof n ? a.innerHTML = n : (a.innerHTML = "", a.appendChild(n))), u[e] && a.setAttribute(u[e], n) } else this._setColor(t, e, n); else this._setTransform(t) } else this._setImage(t, n); else i.isArray(n) && a.setAttribute("d", this._formatPath(n)) } }, t.prototype._createDom = function (t, e) { var n = s[t.type], i = t.attrs, r = t.cfg.parent; if (!n) throw new Error("the type" + t.type + "is not supported by svg"); var o = document.createElementNS("http://www.w3.org/2000/svg", n); if (t.cfg.id && (o.id = t.cfg.id), t.cfg.el = o, r) { var a = r.cfg.el; if (void 0 === e) a.appendChild(o); else { var u = r.cfg.el.childNodes; "svg" === a.tagName && (e += 1), u.length <= e ? a.appendChild(o) : a.insertBefore(o, u[e]) } } return t.cfg.attrs = {}, "text" === t.type ? (o.setAttribute("paint-order", "stroke"), o.setAttribute("style", "stroke-linecap:butt; stroke-linejoin:miter;")) : (i.stroke || i.strokeStyle || o.setAttribute("stroke", "none"), i.fill || i.fillStyle || o.setAttribute("fill", "none")), o }, t.prototype._assembleMarker = function (t, e) { var n = t._getPath(); return i.isArray(n) ? n.map((function (t) { return t.join(" ") })).join("") : n }, t.prototype._assembleRect = function (t) { var e = t.x, n = t.y, r = t.width, o = t.height, s = t.radius; if (!s) return "M " + e + "," + n + " l " + r + ",0 l 0," + o + " l" + -r + " 0 z"; var u = a.parseRadius(s); return i.isArray(s) ? 1 === s.length ? u.r1 = u.r2 = u.r3 = u.r4 = s[0] : 2 === s.length ? (u.r1 = u.r3 = s[0], u.r2 = u.r4 = s[1]) : 3 === s.length ? (u.r1 = s[0], u.r2 = u.r4 = s[1], u.r3 = s[2]) : (u.r1 = s[0], u.r2 = s[1], u.r3 = s[2], u.r4 = s[3]) : u.r1 = u.r2 = u.r3 = u.r4 = s, [["M " + (e + u.r1) + "," + n], ["l " + (r - u.r1 - u.r2) + ",0"], ["a " + u.r2 + "," + u.r2 + ",0,0,1," + u.r2 + "," + u.r2], ["l 0," + (o - u.r2 - u.r3)], ["a " + u.r3 + "," + u.r3 + ",0,0,1," + -u.r3 + "," + u.r3], ["l " + (u.r3 + u.r4 - r) + ",0"], ["a " + u.r4 + "," + u.r4 + ",0,0,1," + -u.r4 + "," + -u.r4], ["l 0," + (u.r4 + u.r1 - o)], ["a " + u.r1 + "," + u.r1 + ",0,0,1," + u.r1 + "," + -u.r1], ["z"]].join(" ") }, t.prototype._formatPath = function (t) { return ~(t = t.map((function (t) { return t.join(" ") })).join("")).indexOf("NaN") ? "" : t }, t.prototype._setTransform = function (t) { for (var e = t.attrs.matrix, n = t.cfg.el, i = [], r = 0; r < 9; r += 3)i.push(e[r] + "," + e[r + 1]); -1 === (i = i.join(",")).indexOf("NaN") ? n.setAttribute("transform", "matrix(" + i + ")") : console.warn("invalid matrix:", e) }, t.prototype._setImage = function (t, e) { var n = t.attrs, r = t.cfg.el; if (i.isString(e)) r.setAttribute("href", e); else if (e instanceof Image) n.width || (r.setAttribute("width", e.width), t.attrs.width = e.width), n.height || (r.setAttribute("height", e.height), t.attrs.height = e.height), r.setAttribute("href", e.src); else if (e instanceof HTMLElement && i.isString(e.nodeName) && "CANVAS" === e.nodeName.toUpperCase()) r.setAttribute("href", e.toDataURL()); else if (e instanceof ImageData) { var o = document.createElement("canvas"); o.setAttribute("width", "" + e.width), o.setAttribute("height", "" + e.height), o.getContext("2d").putImageData(e, 0, 0), n.width || (r.setAttribute("width", e.width), t.attrs.width = e.width), n.height || (r.setAttribute("height", e.height), t.attrs.height = e.height), r.setAttribute("href", o.toDataURL()) } }, t.prototype._updateFan = function (t) { function e(t, e, n) { return { x: e * Math.cos(t) + n.x, y: e * Math.sin(t) + n.y } } var n = t.attrs, r = t.cfg, o = { x: n.x, y: n.y }, a = [], s = n.startAngle, u = n.endAngle; i.isNumberEqual(u - s, 2 * Math.PI) && (u -= 1e-5); var l = e(s, n.re, o), c = e(u, n.re, o), h = u > s ? 1 : 0, p = Math.abs(u - s) > Math.PI ? 1 : 0, f = n.rs, d = n.re, g = e(s, n.rs, o), v = e(u, n.rs, o); n.rs > 0 ? (a.push("M " + c.x + "," + c.y), a.push("L " + v.x + "," + v.y), a.push("A " + f + "," + f + ",0," + p + "," + (1 === h ? 0 : 1) + "," + g.x + "," + g.y), a.push("L " + l.x + " " + l.y)) : (a.push("M " + o.x + "," + o.y), a.push("L " + l.x + "," + l.y)), a.push("A " + d + "," + d + ",0," + p + "," + h + "," + c.x + "," + c.y), n.rs > 0 ? a.push("L " + v.x + "," + v.y) : a.push("Z"), r.el.setAttribute("d", a.join(" ")) }, t.prototype._updateText = function (t) { var e = t.attrs, n = t.cfg.attrs, i = t.cfg.el; for (var r in this._setFont(t), e) if (e[r] !== n[r]) { if ("text" === r) { this._setText(t, "" + e[r]); continue } if ("fillStyle" === r || "strokeStyle" === r) { this._setColor(t, r, e[r]); continue } if ("matrix" === r) { this._setTransform(t); continue } u[r] && i.setAttribute(u[r], e[r]) } t.cfg.attrs = Object.assign({}, t.attrs), t.cfg.hasUpdate = !1 }, t.prototype._setFont = function (t) { var e = t.get("el"), n = t.attrs, i = n.fontSize, o = r.detect(); o && "firefox" === o.name ? e.setAttribute("dominant-baseline", c[n.textBaseline] || "alphabetic") : e.setAttribute("alignment-baseline", l[n.textBaseline] || "baseline"), e.setAttribute("text-anchor", h[n.textAlign] || "left"), i && +i < 12 && (n.matrix = [1, 0, 0, 0, 1, 0, 0, 0, 1], t.transform([["t", -n.x, -n.y], ["s", +i / 12, +i / 12], ["t", n.x, n.y]])) }, t.prototype._setText = function (t, e) { var n = t.cfg.el, r = t.attrs.textBaseline || "bottom"; if (e) if (~e.indexOf("\n")) { var o = t.attrs.x, a = e.split("\n"), s = a.length - 1, u = ""; i.each(a, (function (t, e) { 0 === e ? "alphabetic" === r ? u += '<tspan x="' + o + '" dy="' + -s + 'em">' + t + "</tspan>" : "top" === r ? u += '<tspan x="' + o + '" dy="0.9em">' + t + "</tspan>" : "middle" === r ? u += '<tspan x="' + o + '" dy="' + -(s - 1) / 2 + 'em">' + t + "</tspan>" : "bottom" === r ? u += '<tspan x="' + o + '" dy="-' + (s + .3) + 'em">' + t + "</tspan>" : "hanging" === r && (u += '<tspan x="' + o + '" dy="' + (-(s - 1) - .3) + 'em">' + t + "</tspan>") : u += '<tspan x="' + o + '" dy="1em">' + t + "</tspan>" })), n.innerHTML = u } else n.innerHTML = e; else n.innerHTML = "" }, t.prototype._setClip = function (t, e) { var n = t.cfg.el; if (e) if (n.hasAttribute("clip-path")) e.cfg.hasUpdate && this._updateShape(e); else { this._createDom(e), this._updateShape(e); var i = this.context.addClip(e); n.setAttribute("clip-path", "url(#" + i + ")") } else n.removeAttribute("clip-path") }, t.prototype._setColor = function (t, e, n) { var i = t.cfg.el, r = this.context; if (n) if (n = n.trim(), /^[r,R,L,l]{1}[\s]*\(/.test(n)) (o = r.find("gradient", n)) || (o = r.addGradient(n)), i.setAttribute(u[e], "url(#" + o + ")"); else if (/^[p,P]{1}[\s]*\(/.test(n)) { var o; (o = r.find("pattern", n)) || (o = r.addPattern(n)), i.setAttribute(u[e], "url(#" + o + ")") } else i.setAttribute(u[e], n); else i.setAttribute(u[e], "none") }, t.prototype._setShadow = function (t) { var e = t.cfg.el, n = t.attrs, i = { dx: n.shadowOffsetX, dy: n.shadowOffsetY, blur: n.shadowBlur, color: n.shadowColor }; if (i.dx || i.dy || i.blur || i.color) { var r = this.context.find("filter", i); r || (r = this.context.addShadow(i)), e.setAttribute("filter", "url(#" + r + ")") } else e.removeAttribute("filter") }, t }(); e.default = p }, function (t, e, n) { "use strict"; (function (t) { var n = this && this.__spreadArrays || function () { for (var t = 0, e = 0, n = arguments.length; e < n; e++)t += arguments[e].length; var i = Array(t), r = 0; for (e = 0; e < n; e++)for (var o = arguments[e], a = 0, s = o.length; a < s; a++ , r++)i[r] = o[a]; return i }; Object.defineProperty(e, "__esModule", { value: !0 }); var i = function (t, e, n) { this.name = t, this.version = e, this.os = n }; e.BrowserInfo = i; var r = function (e) { this.version = e, this.name = "node", this.os = t.platform }; e.NodeInfo = r; var o = function () { this.bot = !0, this.name = "bot", this.version = null, this.os = null }; e.BotInfo = o; var a = [["aol", /AOLShield\/([0-9\._]+)/], ["edge", /Edge\/([0-9\._]+)/], ["edge-ios", /EdgiOS\/([0-9\._]+)/], ["yandexbrowser", /YaBrowser\/([0-9\._]+)/], ["vivaldi", /Vivaldi\/([0-9\.]+)/], ["kakaotalk", /KAKAOTALK\s([0-9\.]+)/], ["samsung", /SamsungBrowser\/([0-9\.]+)/], ["silk", /\bSilk\/([0-9._-]+)\b/], ["miui", /MiuiBrowser\/([0-9\.]+)$/], ["beaker", /BeakerBrowser\/([0-9\.]+)/], ["edge-chromium", /Edg\/([0-9\.]+)/], ["chromium-webview", /(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/], ["chrome", /(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/], ["phantomjs", /PhantomJS\/([0-9\.]+)(:?\s|$)/], ["crios", /CriOS\/([0-9\.]+)(:?\s|$)/], ["firefox", /Firefox\/([0-9\.]+)(?:\s|$)/], ["fxios", /FxiOS\/([0-9\.]+)/], ["opera-mini", /Opera Mini.*Version\/([0-9\.]+)/], ["opera", /Opera\/([0-9\.]+)(?:\s|$)/], ["opera", /OPR\/([0-9\.]+)(:?\s|$)/], ["ie", /Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/], ["ie", /MSIE\s([0-9\.]+);.*Trident\/[4-7].0/], ["ie", /MSIE\s(7\.0)/], ["bb10", /BB10;\sTouch.*Version\/([0-9\.]+)/], ["android", /Android\s([0-9\.]+)/], ["ios", /Version\/([0-9\._]+).*Mobile.*Safari.*/], ["safari", /Version\/([0-9\._]+).*Safari/], ["facebook", /FBAV\/([0-9\.]+)/], ["instagram", /Instagram\s([0-9\.]+)/], ["ios-webview", /AppleWebKit\/([0-9\.]+).*Mobile/], ["ios-webview", /AppleWebKit\/([0-9\.]+).*Gecko\)$/], ["searchbot", /alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]], s = [["iOS", /iP(hone|od|ad)/], ["Android OS", /Android/], ["BlackBerry OS", /BlackBerry|BB10/], ["Windows Mobile", /IEMobile/], ["Amazon OS", /Kindle/], ["Windows 3.11", /Win16/], ["Windows 95", /(Windows 95)|(Win95)|(Windows_95)/], ["Windows 98", /(Windows 98)|(Win98)/], ["Windows 2000", /(Windows NT 5.0)|(Windows 2000)/], ["Windows XP", /(Windows NT 5.1)|(Windows XP)/], ["Windows Server 2003", /(Windows NT 5.2)/], ["Windows Vista", /(Windows NT 6.0)/], ["Windows 7", /(Windows NT 6.1)/], ["Windows 8", /(Windows NT 6.2)/], ["Windows 8.1", /(Windows NT 6.3)/], ["Windows 10", /(Windows NT 10.0)/], ["Windows ME", /Windows ME/], ["Open BSD", /OpenBSD/], ["Sun OS", /SunOS/], ["Chrome OS", /CrOS/], ["Linux", /(Linux)|(X11)/], ["Mac OS", /(Mac_PowerPC)|(Macintosh)/], ["QNX", /QNX/], ["BeOS", /BeOS/], ["OS/2", /OS\/2/], ["Search Bot", /(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/]]; function u(t) { var e = "" !== t && a.reduce((function (e, n) { var i = n[0], r = n[1]; if (e) return e; var o = r.exec(t); return !!o && [i, o] }), !1); if (!e) return null; var r = e[0], s = e[1]; if ("searchbot" === r) return new o; var u = s[1] && s[1].split(/[._]/).slice(0, 3); return u ? u.length < 3 && (u = n(u, function (t) { for (var e = [], n = 0; n < t; n++)e.push("0"); return e }(3 - u.length))) : u = [], new i(r, u.join("."), l(t)) } function l(t) { for (var e = 0, n = s.length; e < n; e++) { var i = s[e], r = i[0]; if (i[1].test(t)) return r } return null } function c() { return void 0 !== t && t.version ? new r(t.version.slice(1)) : null } e.detect = function (t) { return t ? u(t) : "undefined" != typeof navigator ? u(navigator.userAgent) : c() }, e.parseUserAgent = u, e.detectOS = l, e.getNodeVersion = c }).call(this, n(29)) }, function (t, e) { var n, i, r = t.exports = {}; function o() { throw new Error("setTimeout has not been defined") } function a() { throw new Error("clearTimeout has not been defined") } function s(t) { if (n === setTimeout) return setTimeout(t, 0); if ((n === o || !n) && setTimeout) return n = setTimeout, setTimeout(t, 0); try { return n(t, 0) } catch (e) { try { return n.call(null, t, 0) } catch (e) { return n.call(this, t, 0) } } } !function () { try { n = "function" == typeof setTimeout ? setTimeout : o } catch (t) { n = o } try { i = "function" == typeof clearTimeout ? clearTimeout : a } catch (t) { i = a } }(); var u, l = [], c = !1, h = -1; function p() { c && u && (c = !1, u.length ? l = u.concat(l) : h = -1, l.length && f()) } function f() { if (!c) { var t = s(p); c = !0; for (var e = l.length; e;) { for (u = l, l = []; ++h < e;)u && u[h].run(); h = -1, e = l.length } u = null, c = !1, function (t) { if (i === clearTimeout) return clearTimeout(t); if ((i === a || !i) && clearTimeout) return i = clearTimeout, clearTimeout(t); try { i(t) } catch (e) { try { return i.call(null, t) } catch (e) { return i.call(this, t) } } }(t) } } function d(t, e) { this.fun = t, this.array = e } function g() { } r.nextTick = function (t) { var e = new Array(arguments.length - 1); if (arguments.length > 1) for (var n = 1; n < arguments.length; n++)e[n - 1] = arguments[n]; l.push(new d(t, e)), 1 !== l.length || c || s(f) }, d.prototype.run = function () { this.fun.apply(null, this.array) }, r.title = "browser", r.browser = !0, r.env = {}, r.argv = [], r.version = "", r.versions = {}, r.on = g, r.addListener = g, r.once = g, r.off = g, r.removeListener = g, r.removeAllListeners = g, r.emit = g, r.prependListener = g, r.prependOnceListener = g, r.listeners = function (t) { return [] }, r.binding = function (t) { throw new Error("process.binding is not supported") }, r.cwd = function () { return "/" }, r.chdir = function (t) { throw new Error("process.chdir is not supported") }, r.umask = function () { return 0 } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(31), o = n(32), a = n(33), s = n(34), u = n(35), l = function () { function t(t) { var e = document.createElementNS("http://www.w3.org/2000/svg", "defs"), n = i.uniqueId("defs_"); e.id = n, t.appendChild(e), this.children = [], this.defaultArrow = {}, this.el = e, this.canvas = t } return t.prototype.find = function (t, e) { for (var n = this.children, i = null, r = 0; r < n.length; r++)if (n[r].match(t, e)) { i = n[r].id; break } return i }, t.prototype.findById = function (t) { for (var e = this.children, n = null, i = 0; i < e.length; i++)if (e[i].id === t) { n = e[i]; break } return n }, t.prototype.add = function (t) { this.children.push(t), t.canvas = this.canvas, t.parent = this }, t.prototype.getDefaultArrow = function (t, e) { var n = t.stroke || t.strokeStyle; if (this.defaultArrow[n]) return this.defaultArrow[n].id; var i = new a.default(t, e); return this.defaultArrow[n] = i, this.el.appendChild(i.el), i.id }, t.prototype.addGradient = function (t) { var e = new r.default(t); return this.el.appendChild(e.el), this.add(e), e.id }, t.prototype.addArrow = function (t, e) { var n = new a.default(t, e); return this.el.appendChild(n.el), n.id }, t.prototype.addShadow = function (t) { var e = new o.default(t); return this.el.appendChild(e.el), this.add(e), e.id }, t.prototype.addPattern = function (t) { var e = new u.default(t); return this.el.appendChild(e.el), this.add(e), e.id }, t.prototype.addClip = function (t) { var e = new s.default(t); return this.el.appendChild(e.el), this.add(e), e.id }, t }(); e.default = l }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = /^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i, o = /^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i, a = /[\d.]+:(#[^\s]+|[^\)]+\))/gi; function s(t) { var e = t.match(a); if (!e) return ""; var n = ""; return e.sort((function (t, e) { return t = t.split(":"), e = e.split(":"), Number(t[0]) - Number(e[0]) })), i.each(e, (function (t) { t = t.split(":"), n += '<stop offset="' + t[0] + '" stop-color="' + t[1] + '"></stop>' })), n } var u = function () { function t(t) { this.cfg = {}; var e, n, a, u, l, c, h, p = null, f = i.uniqueId("gradient_"); return "l" === t.toLowerCase()[0] ? function (t, e) { var n, o, a = r.exec(t), u = i.mod(i.toRadian(parseFloat(a[1])), 2 * Math.PI), l = a[2]; u >= 0 && u < .5 * Math.PI ? (n = { x: 0, y: 0 }, o = { x: 1, y: 1 }) : .5 * Math.PI <= u && u < Math.PI ? (n = { x: 1, y: 0 }, o = { x: 0, y: 1 }) : Math.PI <= u && u < 1.5 * Math.PI ? (n = { x: 1, y: 1 }, o = { x: 0, y: 0 }) : (n = { x: 0, y: 1 }, o = { x: 1, y: 0 }); var c = Math.tan(u), h = c * c, p = (o.x - n.x + c * (o.y - n.y)) / (h + 1) + n.x, f = c * (o.x - n.x + c * (o.y - n.y)) / (h + 1) + n.y; e.setAttribute("x1", n.x), e.setAttribute("y1", n.y), e.setAttribute("x2", p), e.setAttribute("y2", f), e.innerHTML = s(l) }(t, p = document.createElementNS("http://www.w3.org/2000/svg", "linearGradient")) : (e = t, n = p = document.createElementNS("http://www.w3.org/2000/svg", "radialGradient"), a = o.exec(e), u = parseFloat(a[1]), l = parseFloat(a[2]), c = parseFloat(a[3]), h = a[4], n.setAttribute("cx", u), n.setAttribute("cy", l), n.setAttribute("r", c), n.innerHTML = s(h)), p.setAttribute("id", f), this.el = p, this.id = f, this.cfg = t, this } return t.prototype.match = function (t, e) { return this.cfg === e }, t }(); e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = { shadowColor: "color", shadowOpacity: "opacity", shadowBlur: "blur", shadowOffsetX: "dx", shadowOffsetY: "dy" }, o = { x: "-40%", y: "-40%", width: "200%", height: "200%" }, a = function () { function t(t) { this.type = "filter", this.cfg = {}, this.type = "filter"; var e = document.createElementNS("http://www.w3.org/2000/svg", "filter"); return i.each(o, (function (t, n) { e.setAttribute(n, t) })), this.el = e, this.id = i.uniqueId("filter_"), this.el.id = this.id, this.cfg = t, this._parseShadow(t, e), this } return t.prototype.match = function (t, e) { if (this.type !== t) return !1; var n = !0, r = this.cfg; return i.each(Object.keys(r), (function (t) { if (r[t] !== e[t]) return n = !1, !1 })), n }, t.prototype.update = function (t, e) { var n = this.cfg; return n[r[t]] = e, this._parseShadow(n, this.el), this }, t.prototype._parseShadow = function (t, e) { var n = '<feDropShadow\n      dx="' + (t.dx || 0) + '"\n      dy="' + (t.dy || 0) + '"\n      stdDeviation="' + (t.blur ? t.blur / 10 : 0) + '"\n      flood-color="' + (t.color ? t.color : "#000") + '"\n      flood-opacity="' + (t.opacity ? t.opacity : 1) + '"\n      />'; e.innerHTML = n }, t }(); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = function () { function t(t, e) { this.cfg = {}; var n = document.createElementNS("http://www.w3.org/2000/svg", "marker"), r = i.uniqueId("marker_"); n.setAttribute("id", r); var o = document.createElementNS("http://www.w3.org/2000/svg", "path"); o.setAttribute("stroke", "none"), o.setAttribute("fill", t.stroke || "#000"), n.appendChild(o), n.setAttribute("overflow", "visible"), n.setAttribute("orient", "auto-start-reverse"), this.el = n, this.child = o, this.id = r; var a = t["marker-start" === e ? "startArrow" : "endArrow"]; return this.stroke = t.stroke || "#000", !0 === a ? this._setDefaultPath(e, o) : this._setMarker(t.lineWidth, o), this } return t.prototype.match = function () { return !1 }, t.prototype._setDefaultPath = function (t, e) { var n = this.el; e.setAttribute("d", "M0,0 L6,3 L0,6 L3,3Z"), n.setAttribute("refX", "3"), n.setAttribute("refY", "3") }, t.prototype._setMarker = function (t, e) { var n = this.el, r = this.cfg.path, o = this.cfg.d; i.isArray(r) && (r = r.map((function (t) { return t.join(" ") })).join("")), e.setAttribute("d", r), n.appendChild(e), o && n.setAttribute("refX", "" + o / t) }, t.prototype.update = function (t) { var e = this.child; e.attr ? e.attr("fill", t) : e.setAttribute("fill", t) }, t }(); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = function () { function t(t) { this.type = "clip", this.cfg = {}; var e = document.createElementNS("http://www.w3.org/2000/svg", "clipPath"); this.el = e, this.id = i.uniqueId("clip_"), e.id = this.id; var n = t.cfg.el; return e.appendChild(n.cloneNode(!0)), this.cfg = t, this } return t.prototype.match = function () { return !1 }, t.prototype.remove = function () { var t = this.el; t.parentNode.removeChild(t) }, t }(); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = /^p\s*\(\s*([axyn])\s*\)\s*(.*)/i, o = function () { function t(t) { this.cfg = {}; var e = document.createElementNS("http://www.w3.org/2000/svg", "pattern"); e.setAttribute("patternUnits", "userSpaceOnUse"); var n = document.createElementNS("http://www.w3.org/2000/svg", "image"); e.appendChild(n); var o = i.uniqueId("pattern_"); e.id = o, this.el = e, this.id = o, this.cfg = t; var a = r.exec(t)[2]; n.setAttribute("href", a); var s = new Image; function u() { e.setAttribute("width", "" + s.width), e.setAttribute("height", "" + s.height) } return a.match(/^data:/i) || (s.crossOrigin = "Anonymous"), s.src = a, s.complete ? u() : (s.onload = u, s.src = s.src), this } return t.prototype.match = function (t, e) { return this.cfg === e }, t }(); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0); function o(t) { return 1 === t[0] && 0 === t[1] && 0 === t[3] && 1 === t[4] && 0 === t[6] && 0 === t[7] } function a(t) { return 0 === t[1] && 0 === t[3] && 0 === t[6] && 0 === t[7] } function s(t, e) { o(e) || (a(e) ? (t[0] *= e[0], t[4] *= e[4]) : r.mat3.multiply(t, t, e)) } var u = function (t) { function e(e) { void 0 === e && (e = {}); var n = t.call(this, e) || this; return n.canFill = !1, n.canStroke = !1, n.attrs = {}, n.attrs = { opacity: 1, fillOpacity: 1, strokeOpacity: 1, matrix: [1, 0, 0, 0, 1, 0, 0, 0, 1] }, n.attr(i.__assign(i.__assign({}, n.getDefaultAttrs()), n.cfg.attrs)), n.cfg.attrs = {}, n } return i.__extends(e, t), e.prototype.getDefaultAttrs = function () { return {} }, e.prototype.attr = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; var n = t[0], i = t[1]; if (!n) return this.attrs; if (r.isObject(n)) { for (var o in n) this._setAttr(o, n[o]); return this.clearBBox(), this.cfg.hasUpdate = !0, this } return 2 === t.length ? (this._setAttr(n, i), this.clearBBox(), this.cfg.hasUpdate = !0, this) : this.attrs[n] }, e.prototype._afterSetAttrPath = function (t) { }, e.prototype._setAttr = function (t, e) { var n = this.attrs; n[t] = e, "fill" !== t && "stroke" !== t ? "opacity" !== t ? "clip" === t && e ? this._setClip(e) : "path" !== t ? "transform" !== t ? "rotate" === t && this.rotateAtStart(e) : this.transform(e) : this._afterSetAttrPath(e) : n.globalAlpha = e : n[t + "Style"] = e }, e.prototype.clearBBox = function () { this.setSilent("box", null) }, e.prototype.hasFill = function () { return this.canFill && this.attrs.fillStyle }, e.prototype.hasStroke = function () { return this.canStroke && this.attrs.strokeStyle }, e.prototype._setClip = function (t) { t.cfg.renderer = this.cfg.renderer, t.cfg.canvas = this.cfg.canvas, t.cfg.parent = this.cfg.parent, t.hasFill = function () { return !0 } }, e.prototype.initTransform = function () { }, e.prototype.resetMatrix = function () { this.attr("matrix", [1, 0, 0, 0, 1, 0, 0, 0, 1]) }, e.prototype.translate = function (t, e) { var n = this.attrs.matrix; return r.mat3.translate(n, n, [t, e]), this.clearTotalMatrix(), this.attr("matrix", n), this }, e.prototype.rotate = function (t) { var e = this.attrs.matrix; return r.mat3.rotate(e, e, t), this.clearTotalMatrix(), this.attr("matrix", e), this }, e.prototype.scale = function (t, e) { var n = this.attrs.matrix; return r.mat3.scale(n, n, [t, e]), this.clearTotalMatrix(), this.attr("matrix", n), this }, e.prototype.rotateAtStart = function (t) { var e = this.attrs.x || 0, n = this.attrs.y || 0; return Math.abs(t) > 2 * Math.PI && (t = t / 180 * Math.PI), this.transform([["t", -e, -n], ["r", t], ["t", e, n]]) }, e.prototype.move = function (t, e) { var n = this.get("x") || 0, i = this.get("y") || 0; return this.translate(t - n, e - i), this.set("x", t), this.set("y", e), this }, e.prototype.transform = function (t) { var e = this, n = this.attrs.matrix; return r.each(t, (function (t) { switch (t[0]) { case "t": e.translate(t[1], t[2]); break; case "s": e.scale(t[1], t[2]); break; case "r": e.rotate(t[1]); break; case "m": e.attr("matrix", r.mat3.multiply([], n, t[1])), e.clearTotalMatrix() } })), this }, e.prototype.setTransform = function (t) { return this.attr("matrix", [1, 0, 0, 0, 1, 0, 0, 0, 1]), this.transform(t) }, e.prototype.getMatrix = function () { return this.attr("matrix") }, e.prototype.setMatrix = function (t) { return this.attr("matrix", t), this.clearTotalMatrix(), this }, e.prototype.apply = function (t, e) { var n; return n = e ? this._getMatrixByRoot(e) : this.attr("matrix"), r.vec3.transformMat3(t, t, n), this }, e.prototype._getMatrixByRoot = function (t) { t = t || this; for (var e = this, n = []; e !== t;)n.unshift(e), e = e.get("parent"); n.unshift(e); var i = [1, 0, 0, 0, 1, 0, 0, 0, 1]; return r.each(n, (function (t) { r.mat3.multiply(i, t.attr("matrix"), i) })), i }, e.prototype.getTotalMatrix = function () { var t = this.cfg.totalMatrix; if (!t) { t = [1, 0, 0, 0, 1, 0, 0, 0, 1]; var e = this.cfg.parent; e && s(t, e.getTotalMatrix()), s(t, this.attr("matrix")), this.cfg.totalMatrix = t } return t }, e.prototype.clearTotalMatrix = function () { }, e.prototype.invert = function (t) { var e = this.getTotalMatrix(); if (a(e)) t[0] /= e[0], t[1] /= e[4]; else { var n = r.mat3.invert([], e); n && r.vec3.transformMat3(t, t, n) } return this }, e.prototype.resetTransform = function (t) { var e = this.attr("matrix"); o(e) || t.transform(e[0], e[1], e[3], e[4], e[6], e[7]) }, e }(n(37).default); e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(38), o = n(0), a = n(11), s = ["click", "mousedown", "mouseup", "dblclick", "contextmenu", "mouseover", "mouseout", "mousemove", "wheel", "touchstart", "touchend", "touchmove", "dragstart", "drag", "dragend", "dragenter", "dragleave", "drop"], u = function (t) { function e(e) { void 0 === e && (e = {}); var n = t.call(this) || this; return n.destroyed = !1, n.removed = !1, n.cfg = i.__assign(i.__assign({ canvas: null, capture: !0, context: null, parent: null, visible: !0, zIndex: 0 }, e), n.getDefaultCfg()), n } return i.__extends(e, t), e.prototype.emit = function (e, n) { for (var r = [], o = 2; o < arguments.length; o++)r[o - 2] = arguments[o]; if (t.prototype.emit.apply(this, i.__spreadArrays([e, n], r)), !(n instanceof a.default && n.propagationStopped) && s.indexOf(e) >= 0) { var u = this.cfg.parent; !u || u.removed || u.destroyed || u.emit.apply(u, i.__spreadArrays([e, n], r)) } }, e.prototype.set = function (t, e) { return "zIndex" === t && this._beforeSetZIndex && this._beforeSetZIndex(e), "loading" === t && this._beforeSetLoading && this._beforeSetLoading(e), this.cfg[t] = e, this }, e.prototype.setSilent = function (t, e) { this.cfg[t] = e }, e.prototype.get = function (t) { return this.cfg[t] }, e.prototype.show = function () { return this.cfg.visible = !0, this }, e.prototype.hide = function () { return this.cfg.visible = !1, this }, e.prototype.remove = function (t, e) { var n = this.cfg, i = n.parent, r = n.el; return i && !i.destroyed && o.pull(i.get("children"), this), r && (e ? i && i.cfg.tobeRemoved.push(r) : r.parentNode.removeChild(r)), (t || void 0 === t) && this.destroy(), this }, e.prototype.destroy = function () { this.destroyed || (this.off(), this.cfg = {}, this.destroyed = !0) }, e.prototype.getParent = function () { return this.cfg.parent }, e.prototype.getDefaultCfg = function () { return {} }, e.prototype.toFront = function () { var t = this.cfg, e = t.parent; if (e) { var n = e.cfg.children, i = t.el, r = n.indexOf(this); n.splice(r, 1), n.push(this), i && (i.parentNode.removeChild(i), t.el = null) } }, e.prototype.toBack = function () { var t = this.cfg, e = t.parent; if (e) { var n = e.cfg.children, i = t.el, r = n.indexOf(this); if (n.splice(r, 1), n.unshift(this), i) { var o = i.parentNode; o.removeChild(i), o.insertBefore(i, o.firstChild) } } }, e.prototype._beforeSetZIndex = function (t) { var e = this.cfg.parent; this.cfg.zIndex = t, o.isNil(e) || e.sort(); var n = this.cfg.el; if (n) { var i = e.cfg.children, r = i.indexOf(this), a = n.parentNode; a.removeChild(n), r === i.length - 1 ? a.appendChild(n) : a.insertBefore(n, a.childNodes[r]) } return t }, e.prototype._beforeSetLoading = function (t) { }, e.prototype.setZIndex = function (t) { return this.cfg.zIndex = t, this._beforeSetZIndex(t) }, e.prototype.clone = function () { return o.clone(this) }, e.prototype.getBBox = function () { }, e }(r.default); e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = function () { function t() { this._events = {} } return t.prototype.on = function (t, e, n) { return this._events[t] || (this._events[t] = []), this._events[t].push({ callback: e, once: !!n }), this }, t.prototype.once = function (t, e) { return this.on(t, e, !0), this }, t.prototype.emit = function (t) { for (var e = this, n = [], i = 1; i < arguments.length; i++)n[i - 1] = arguments[i]; var r = this._events[t] || [], o = this._events["*"] || [], a = function (i) { for (var r = i.length, o = 0; o < r; o++) { var a = i[o], s = a.callback; a.once && (i.splice(o, 1), 0 === i.length && delete e._events[t], r-- , o--), s.apply(e, n) } }; a(r), a(o) }, t.prototype.off = function (t, e) { if (t) if (e) { for (var n = this._events[t] || [], i = n.length, r = 0; r < i; r++)n[r].callback === e && (n.splice(r, 1), i-- , r--); 0 === n.length && delete this._events[t] } else delete this._events[t]; else this._events = {}; return this }, t.prototype.getEvents = function () { return this._events }, t }(); e.default = i }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.xAt = function (t, e, n, i, r) { return e * Math.cos(t) * Math.cos(r) - n * Math.sin(t) * Math.sin(r) + i }, e.yAt = function (t, e, n, i, r) { return e * Math.sin(t) * Math.cos(r) + n * Math.cos(t) * Math.sin(r) + i }, e.xExtrema = function (t, e, n) { return Math.atan(-n / e * Math.tan(t)) }, e.yExtrema = function (t, e, n) { return Math.atan(n / (e * Math.tan(t))) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = { circle: function (t, e, n) { return [["M", t, e], ["m", -n, 0], ["a", n, n, 0, 1, 0, 2 * n, 0], ["a", n, n, 0, 1, 0, 2 * -n, 0]] }, square: function (t, e, n) { return [["M", t - n, e - n], ["L", t + n, e - n], ["L", t + n, e + n], ["L", t - n, e + n], ["Z"]] }, diamond: function (t, e, n) { return [["M", t - n, e], ["L", t, e - n], ["L", t + n, e], ["L", t, e + n], ["Z"]] }, triangle: function (t, e, n) { var i = n * Math.sin(1 / 3 * Math.PI); return [["M", t - n, e + i], ["L", t, e - i], ["L", t + n, e + i], ["z"]] }, triangleDown: function (t, e, n) { var i = n * Math.sin(1 / 3 * Math.PI); return [["M", t - n, e - i], ["L", t + n, e - i], ["L", t, e + i], ["Z"]] } }; e.default = { get: function (t) { return i[t] }, register: function (t, e) { i[t] = e }, remove: function (t) { delete i[t] }, getAll: function () { return i } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = { svg: "svg", circle: "circle", rect: "rect", text: "text", path: "path", foreignObject: "foreignObject", polygon: "polygon", ellipse: "ellipse", image: "image" }; e.default = function (t, e, n) { var r = n.target || n.srcElement; if (!i[r.tagName]) { for (var o = r.parentNode; o && !i[o.tagName];)o = o.parentNode; r = o } return this.cfg.el === r ? this : this.find((function (t) { return t.cfg && t.cfg.el === r })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(59), o = n(58), a = n(57), s = n(14); function u(t, e, n) { var r, u = e.startTime; if (n < u + e.delay || e.isPaused) return !1; var l = e.duration, c = e.easing; if (n = n - u - e.delay, e.toAttrs.repeat) r = n % l / l, r = o[c](r); else { if (!((r = n / l) < 1)) return e.onFrame ? t.attr(e.onFrame(1)) : t.attr(e.toAttrs), e.toMatrix && t.setMatrix(e.toMatrix), !0; r = o[c](r) } if (e.onFrame) { var h = e.onFrame(r); t.attr(h) } else !function (t, e, n) { var r = {}, o = e.toAttrs, u = e.fromAttrs, l = e.toMatrix; if (!t.destroyed) { var c; for (var h in o) if (!i.isEqual(u[h], o[h])) if ("path" === h) { var p = o[h], f = u[h]; p.length > f.length ? (p = s.parsePathString(o[h]), f = s.parsePathString(u[h]), f = s.fillPathByDiff(f, p), f = s.formatPath(f, p), e.fromAttrs.path = f, e.toAttrs.path = p) : e.pathFormatted || (p = s.parsePathString(o[h]), f = s.parsePathString(u[h]), f = s.formatPath(f, p), e.fromAttrs.path = f, e.toAttrs.path = p, e.pathFormatted = !0), r[h] = []; for (var d = 0; d < p.length; d++) { for (var g = p[d], v = f[d], y = [], m = 0; m < g.length; m++)i.isNumber(g[m]) && v && i.isNumber(v[m]) ? (c = a.interpolate(v[m], g[m]), y.push(c(n))) : y.push(g[m]); r[h].push(y) } } else c = a.interpolate(u[h], o[h]), r[h] = c(n); if (l) { var x = a.interpolateArray(e.fromMatrix, l)(n); t.setMatrix(x) } t.attr(r) } }(t, e, r); return !1 } var l = function () { function t(t) { this.animators = [], this.current = 0, this.timer = null, this.canvas = t } return t.prototype.initTimer = function () { var t, e, n, i = this, o = this; o.timer = r.timer((function (r) { if (o.current = r, i.animators.length > 0) { for (var a = i.animators.length - 1; a >= 0; a--)if ((t = i.animators[a]).destroyed) o.removeAnimator(a); else { if (!t.get("pause").isPaused) for (var s = (e = t.get("animators")).length - 1; s >= 0; s--)n = e[s], u(t, n, r) && (e.splice(s, 1), n.callback && n.callback()); 0 === e.length && o.removeAnimator(a) } i.canvas.draw() } })) }, t.prototype.addAnimator = function (t) { this.animators.push(t) }, t.prototype.removeAnimator = function (t) { this.animators.splice(t, 1) }, t.prototype.isAnimating = function () { return !!this.animators.length }, t.prototype.stop = function () { this.timer && this.timer.stop() }, t.prototype.stopAllAnimations = function () { this.animators.forEach((function (t) { t.stopAnimate() })), this.animators = [], this.canvas.draw() }, t.prototype.getTime = function () { return this.current }, t }(); e.default = l }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(3), o = n(7), a = n(9), s = n(4), u = n(2); function l(t, e, n) { return t + e * Math.cos(n) } function c(t, e, n) { return t + e * Math.sin(n) } var h = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.canStroke = !0, e.type = "arc", e } return i.__extends(e, t), e.prototype.getDefaultAttrs = function () { return { x: 0, y: 0, r: 0, startAngle: 0, endAngle: 0, clockwise: !1, lineWidth: 1, startArrow: !1, endArrow: !1 } }, e.prototype.isPointInPath = function (t, e) { var n = this.attrs, i = n.x, r = n.y, o = n.r, a = n.startAngle, u = n.endAngle, l = n.clockwise, c = this.getHitLineWidth(); return !!this.hasStroke() && s.arcline(i, r, o, a, u, l, c, t, e) }, e.prototype.calculateBox = function () { var t = this.attrs, e = t.x, n = t.y, i = t.r, r = t.startAngle, a = t.endAngle, s = t.clockwise, l = this.getHitLineWidth(), c = l / 2, h = o.box(e, n, i, r, a, s); return new u.default(h.x - c, h.y - c, h.width + l, h.height + l) }, e.prototype.getStartTangent = function () { var t = this.attrs, e = t.x, n = t.y, i = t.startAngle, r = t.r, o = t.clockwise, a = Math.PI / 180; o && (a *= -1); var s = [], u = l(e, r, i + a), h = c(n, r, i + a), p = l(e, r, i), f = c(n, r, i); return s.push([u, h]), s.push([p, f]), s }, e.prototype.getEndTangent = function () { var t = this.attrs, e = t.x, n = t.y, i = t.endAngle, r = t.r, o = t.clockwise, a = Math.PI / 180, s = []; o && (a *= -1); var u = l(e, r, i + a), h = c(n, r, i + a), p = l(e, r, i), f = c(n, r, i); return s.push([p, f]), s.push([u, h]), s }, e.prototype.createPath = function (t) { var e = this.attrs, n = e.x, i = e.y, r = e.r, o = e.startAngle, a = e.endAngle, s = e.clockwise; (t = t || this.get("context")).beginPath(), t.arc(n, i, r, o, a, s) }, e.prototype.afterPath = function (t) { var e = this.attrs; if (t = t || this.get("context"), e.startArrow) { var n = this.getStartTangent(); a.addStartArrow(t, e, n[0][0], n[0][1], n[1][0], n[1][1]) } if (e.endArrow) { var i = this.getEndTangent(); a.addEndArrow(t, e, i[0][0], i[0][1], i[1][0], i[1][1]) } }, e }(r.default); e.default = h }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(3), o = n(4), a = n(2), s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.canFill = !0, e.canStroke = !0, e.type = "circle", e } return i.__extends(e, t), e.prototype.getDefaultAttrs = function () { return { x: 0, y: 0, r: 0, lineWidth: 1 } }, e.prototype.isPointInPath = function (t, e) { var n = this.attrs, i = n.x, r = n.y, a = n.r, s = this.getHitLineWidth(), u = this.hasFill(), l = this.hasStroke(); return u && l ? o.circle(i, r, a, t, e) || o.arcline(i, r, a, 0, 2 * Math.PI, !1, s, t, e) : u ? o.circle(i, r, a, t, e) : !!l && o.arcline(i, r, a, 0, 2 * Math.PI, !1, s, t, e) }, e.prototype.calculateBox = function () { var t = this.attrs, e = t.x, n = t.y, i = t.r, r = this.getHitLineWidth() / 2 + i; return a.default.fromRange(e - r, n - r, e + r, n + r) }, e.prototype.createPath = function (t) { var e = this.attrs, n = e.x, i = e.y, r = e.r; t.beginPath(), t.arc(n, i, r, 0, 2 * Math.PI, !1), t.closePath() }, e }(r.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(3), o = n(4), a = n(2), s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.canFill = !0, e.canStroke = !0, e.type = "dom", e } return i.__extends(e, t), e.prototype.isPointInPath = function (t, e) { if (!this.cfg.el) return !1; var n = this.cfg.el.getBBox(); return o.box(n.x, n.x + n.width, n.y, n.y + n.height, t, e) }, e.prototype.calculateBox = function () { var t = this.attrs, e = t.x, n = t.y, i = t.width, r = t.height, o = this.getHitLineWidth() / 2; return new a.default(e - o, n - o, i, r) }, e }(r.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(3), a = n(4), s = n(2), u = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.canFill = !0, e.canStroke = !0, e.type = "ellipse", e } return i.__extends(e, t), e.prototype.getDefaultAttrs = function () { return { x: 0, y: 0, rx: 1, ry: 1, lineWidth: 1 } }, e.prototype.isPointInPath = function (t, e) { var n = this.attrs, i = this.hasFill(), o = this.hasStroke(), s = n.x, u = n.y, l = n.rx, c = n.ry, h = this.getHitLineWidth(), p = l > c ? l : c, f = l > c ? 1 : l / c, d = l > c ? c / l : 1, g = [t, e, 1], v = [1, 0, 0, 0, 1, 0, 0, 0, 1]; r.mat3.scale(v, v, [f, d]), r.mat3.translate(v, v, [s, u]); var y = r.mat3.invert([], v); return r.vec3.transformMat3(g, g, y), i && o ? a.circle(0, 0, p, g[0], g[1]) || a.arcline(0, 0, p, 0, 2 * Math.PI, !1, h, g[0], g[1]) : i ? a.circle(0, 0, p, g[0], g[1]) : !!o && a.arcline(0, 0, p, 0, 2 * Math.PI, !1, h, g[0], g[1]) }, e.prototype.calculateBox = function () { var t = this.attrs, e = t.x, n = t.y, i = t.rx, r = t.ry, o = this.getHitLineWidth(), a = i + o / 2, u = r + o / 2; return s.default.fromRange(e - a, n - u, e + a, n + u) }, e.prototype.createPath = function (t) { var e = this.attrs, n = e.x, i = e.y, o = e.rx, a = e.ry; t = t || this.get("context"); var s = o > a ? o : a, u = o > a ? 1 : o / a, l = o > a ? a / o : 1, c = [1, 0, 0, 0, 1, 0, 0, 0, 1]; r.mat3.scale(c, c, [u, l]), r.mat3.translate(c, c, [n, i]), t.beginPath(), t.save(), t.transform(c[0], c[1], c[3], c[4], c[6], c[7]), t.arc(0, 0, s, 0, 2 * Math.PI), t.restore(), t.closePath() }, e }(o.default); e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(7), a = n(3), s = n(4), u = n(2), l = n(7), c = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.canFill = !0, e.canStroke = !0, e.type = "fan", e } return i.__extends(e, t), e.prototype.getDefaultAttrs = function () { return { x: 0, y: 0, rs: 0, re: 0, startAngle: 0, endAngle: 0, clockwise: !1, lineWidth: 1 } }, e.prototype.isPointInPath = function (t, e) { var n = this, i = n.hasFill(), a = n.hasStroke(), u = n.attrs, l = u.x, c = u.y, h = u.rs, p = u.re, f = u.startAngle, d = u.endAngle, g = u.clockwise, v = [t - l, e - c], y = r.vec2.angleTo([1, 0], v); function m() { var t = o.nearAngle(y, f, d, g); if (r.isNumberEqual(y, t)) { var e = r.vec2.squaredLength(v); if (h * h <= e && e <= p * p) return !0 } return !1 } function x() { var i = n.getHitLineWidth(), r = { x: Math.cos(f) * h + l, y: Math.sin(f) * h + c }, o = { x: Math.cos(f) * p + l, y: Math.sin(f) * p + c }, a = { x: Math.cos(d) * h + l, y: Math.sin(d) * h + c }, u = { x: Math.cos(d) * p + l, y: Math.sin(d) * p + c }; return !!(s.line(r.x, r.y, o.x, o.y, i, t, e) || s.line(a.x, a.y, u.x, u.y, i, t, e) || s.arcline(l, c, h, f, d, g, i, t, e) || s.arcline(l, c, p, f, d, g, i, t, e)) } return i && a ? m() || x() : i ? m() : !!a && x() }, e.prototype.calculateBox = function () { var t = this.attrs, e = t.x, n = t.y, i = t.rs, r = t.re, o = t.startAngle, a = t.endAngle, s = t.clockwise, c = this.getHitLineWidth(), h = l.box(e, n, i, o, a, s), p = l.box(e, n, r, o, a, s), f = Math.min(h.minX, p.minX), d = Math.min(h.minY, p.minY), g = Math.max(h.maxX, p.maxX), v = Math.max(h.maxY, p.maxY), y = c / 2; return u.default.fromRange(f - y, d - y, g + y, v + y) }, e.prototype.createPath = function (t) { var e = this.attrs, n = e.x, i = e.y, r = e.rs, o = e.re, a = e.startAngle, s = e.endAngle, u = e.clockwise, l = { x: Math.cos(a) * r + n, y: Math.sin(a) * r + i }, c = { x: Math.cos(a) * o + n, y: Math.sin(a) * o + i }, h = { x: Math.cos(s) * r + n, y: Math.sin(s) * r + i }; (t = t || this.get("context")).beginPath(), t.moveTo(l.x, l.y), t.lineTo(c.x, c.y), t.arc(n, i, o, a, s, u), t.lineTo(h.x, h.y), t.arc(n, i, r, s, a, !u), t.closePath() }, e }(a.default); e.default = c }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(3), a = n(4), s = n(2), u = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "image", e } return i.__extends(e, t), e.prototype.getDefaultAttrs = function () { return { x: 0, y: 0, img: null, width: 0, height: 0, sx: null, sy: null, swidth: null, sheight: null } }, e.prototype.isPointInPath = function (t, e) { var n = this.attrs; if (this.get("toDraw") || !n.img) return !1; this.cfg.attrs && this.cfg.attrs.img === n.img || this._setAttrImg(); var i = n.x, r = n.y, o = n.width, s = n.height; return a.rect(i, r, o, s, t, e) }, e.prototype.isHitBox = function () { return !1 }, e.prototype.calculateBox = function () { var t = this.attrs; return this.cfg.attrs && this.cfg.attrs.img === t.img || this._setAttrImg(), new s.default(t.x, t.y, t.width, t.height) }, e.prototype._beforeSetLoading = function (t) { var e = this.get("canvas"); return !1 === t && !0 === this.get("toDraw") && (this.cfg.loading = !1, e.draw()), t }, e.prototype._setAttrImg = function () { var t = this, e = t.attrs, n = e.img; if (!r.isString(n)) return n instanceof Image ? (e.width || t.attr("width", n.width), e.height || t.attr("height", n.height), n) : n instanceof HTMLElement && r.isString(n.nodeName) && "CANVAS" === n.nodeName.toUpperCase() ? (e.width || t.attr("width", Number(n.getAttribute("width"))), e.height || t.attr("height", Number(n.getAttribute("height"))), n) : n instanceof ImageData ? (e.width || t.attr("width", n.width), e.height || t.attr("height", n.height), n) : null; var i = new Image; i.onload = function () { if (t.get("destroyed")) return !1; t.attr("imgSrc", n), t.attr("img", i); var e = t.get("callback"); e && e.call(t), t.set("loading", !1) }, i.src = n, i.crossOrigin = "Anonymous", t.set("loading", !0) }, e.prototype.drawInner = function (t) { this.cfg.hasUpdate && this._setAttrImg(), this.get("loading") ? this.set("toDraw", !0) : (this._drawImage(t), this.cfg.hasUpdate = !1) }, e.prototype._drawImage = function (t) { var e = this.attrs, n = e.x, i = e.y, o = e.img, a = e.width, s = e.height, u = e.sx, l = e.sy, c = e.swidth, h = e.sheight; this.set("toDraw", !1); var p = o; if (p instanceof ImageData && ((p = new Image).src = o), p instanceof Image || p instanceof HTMLImageElement && r.isString(p.nodeName) && "CANVAS" === p.nodeName.toUpperCase()) { if (r.isNil(u) || r.isNil(l) || r.isNil(c) || r.isNil(h)) return void t.drawImage(p, n, i, a, s); if (!(r.isNil(u) || r.isNil(l) || r.isNil(c) || r.isNil(h))) return void t.drawImage(p, u, l, c, h, n, i, a, s) } }, e }(o.default); e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(3), o = n(9), a = n(12), s = n(4), u = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.canStroke = !0, e.type = "line", e } return i.__extends(e, t), e.prototype.getDefaultAttrs = function () { return { x1: 0, y1: 0, x2: 0, y2: 0, lineWidth: 1, startArrow: !1, endArrow: !1 } }, e.prototype.isPointInPath = function (t, e) { var n = this.attrs, i = n.x1, r = n.y1, o = n.x2, a = n.y2, u = this.getHitLineWidth(); return !!this.hasStroke() && s.line(i, r, o, a, u, t, e) }, e.prototype.calculateBox = function () { var t = this.attrs, e = t.x1, n = t.y1, i = t.x2, r = t.y2, o = this.getHitLineWidth(); return a.box(e, n, i, r, o) }, e.prototype.createPath = function (t) { var e = this.attrs, n = e.x1, i = e.y1, r = e.x2, o = e.y2; (t = t || this.get("context")).beginPath(), t.moveTo(n, i), t.lineTo(r, o) }, e.prototype.afterPath = function (t) { var e = this.attrs, n = e.x1, i = e.y1, r = e.x2, a = e.y2; t = t || this.get("context"), e.startArrow && o.addStartArrow(t, e, r, a, n, i), e.endArrow && o.addEndArrow(t, e, n, i, r, a) }, e.prototype.getPoint = function (t) { var e = this.attrs; return { x: a.at(e.x1, e.x2, t), y: a.at(e.y1, e.y2, t) } }, e }(r.default); e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(3), a = n(8), s = n(6), u = n(9), l = n(14), c = n(13), h = n(16), p = n(2), f = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.canFill = !0, e.canStroke = !0, e.type = "path", e } return i.__extends(e, t), e.prototype.getDefaultAttrs = function () { return { path: null, lineWidth: 1, startArrow: !1, endArrow: !1 } }, e.prototype.isPointInPath = function (t, e) { var n = this, i = n.get("segments"), o = n.hasFill(), a = n.hasStroke(); function s() { if (!r.isEmpty(i)) { for (var o = n.getHitLineWidth(), a = 0, s = i.length; a < s; a++)if (i[a].isInside(t, e, o)) return !0; return !1 } } return o && a ? h.default(t, e, n) || s() : o ? h.default(t, e, n) : !!a && s() }, e.prototype._afterSetAttrPath = function (t) { if (r.isNil(t)) return this.setSilent("segments", null), void this.setSilent("box", void 0); var e, n = s.parsePath(t), i = []; if (r.isArray(n) && 0 !== n.length && ("M" === n[0][0] || "m" === n[0][0])) { for (var o = n.length, u = 0; u < n.length; u++) { var l = n[u]; e = new a.default(l, e, u === o - 1), i.push(e) } this.setSilent("segments", i), this.setSilent("tCache", null), this.setSilent("box", null) } }, e.prototype.calculateBox = function () { var t = this.get("segments"); if (!t) return null; var e = this.getHitLineWidth(), n = 1 / 0, i = -1 / 0, o = 1 / 0, a = -1 / 0; return r.each(t, (function (t) { t.getBBox(e); var r = t.box; if (r) { r.x < n && (n = r.x); var s = r.maxX; s > i && (i = s), r.y < o && (o = r.y); var u = r.maxY; u > a && (a = u) } })), n === 1 / 0 || o === 1 / 0 ? new p.default(0, 0, 0, 0) : new p.default(n, o, i - n, a - o) }, e.prototype._setTcache = function () { var t, e, n, i, o = 0, a = 0, s = [], u = this.cfg.curve; u && (r.each(u, (function (t, e) { n = u[e + 1], i = t.length, n && (o += c.len(t[i - 2], t[i - 1], n[1], n[2], n[3], n[4], n[5], n[6])) })), r.each(u, (function (r, l) { n = u[l + 1], i = r.length, n && ((t = [])[0] = a / o, e = c.len(r[i - 2], r[i - 1], n[1], n[2], n[3], n[4], n[5], n[6]), a += e, t[1] = a / o, s.push(t)) })), this.cfg.tCache = s) }, e.prototype._calculateCurve = function () { var t = this.attrs.path; this.cfg.curve = l.pathTocurve(t) }, e.prototype.getStartTangent = function () { var t, e, n, i, o = this.get("segments"); if (o.length > 1) if (t = o[0].endPoint, e = o[1].endPoint, n = o[1].startTangent, i = [], r.isFunction(n)) { var a = n(); i.push([t.x - a[0], t.y - a[1]]), i.push([t.x, t.y]) } else i.push([e.x, e.y]), i.push([t.x, t.y]); return i }, e.prototype.getEndTangent = function () { var t, e, n, i, o = this.get("segments"), a = o.length; if (a > 1) if (t = o[a - 2].endPoint, e = o[a - 1].endPoint, n = o[a - 1].endTangent, i = [], r.isFunction(n)) { var s = n(); i.push([e.x - s[0], e.y - s[1]]), i.push([e.x, e.y]) } else i.push([t.x, t.y]), i.push([e.x, e.y]); return i }, e.prototype.getPoint = function (t) { var e, n, i = this.cfg.tCache; i || (this._calculateCurve(), this._setTcache(), i = this.cfg.tCache); var o = this.cfg.curve; if (!i) return o ? { x: o[0][1], y: o[0][2] } : null; r.each(i, (function (i, r) { t >= i[0] && t <= i[1] && (e = (t - i[0]) / (i[1] - i[0]), n = r) })); var a = o[n]; if (r.isNil(a) || r.isNil(n)) return null; var s = a.length, u = o[n + 1]; return { x: c.at(a[s - 2], u[1], u[3], u[5], 1 - e), y: c.at(a[s - 1], u[2], u[4], u[6], 1 - e) } }, e.prototype.createPath = function (t) { var e = this.get("segments"); if (r.isArray(e)) { (t = t || this.get("context")).beginPath(); for (var n = e.length, i = 0; i < n; i++)e[i].draw(t) } }, e.prototype.afterPath = function (t) { var e = this.attrs, n = this.get("segments"), i = e.path; if (t = t || this.get("context"), r.isArray(n) && 1 !== n.length && (e.startArrow || e.endArrow) && "z" !== i[i.length - 1] && "Z" !== i[i.length - 1] && !e.fill) { var o = this.getStartTangent(); u.addStartArrow(t, e, o[0][0], o[0][1], o[1][0], o[1][1]); var a = this.getEndTangent(); u.addEndArrow(t, e, a[0][0], a[0][1], a[1][0], a[1][1]) } }, e }(o.default); e.default = f }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(3), a = n(4), s = n(16), u = n(2), l = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.canFill = !0, e.canStroke = !0, e.type = "polygon", e } return i.__extends(e, t), e.prototype.getDefaultAttrs = function () { return { points: null, lineWidth: 1 } }, e.prototype.isPointInPath = function (t, e) { var n = this, i = n.hasFill(), r = n.hasStroke(); function o() { var i = n.attrs.points; if (i.length < 2) return !1; var r = n.getHitLineWidth(), o = i.slice(0); return i.length >= 3 && o.push(i[0]), a.polyline(o, r, t, e) } return i && r ? s.default(t, e, n) || o() : i ? s.default(t, e, n) : !!r && o() }, e.prototype.calculateBox = function () { var t = this.attrs.points, e = this.getHitLineWidth(); if (!t || 0 === t.length) return null; var n = 1 / 0, i = 1 / 0, o = -1 / 0, a = -1 / 0; r.each(t, (function (t) { var e = t[0], r = t[1]; e < n && (n = e), e > o && (o = e), r < i && (i = r), r > a && (a = r) })); var s = e / 2; return u.default.fromRange(n - s, i - s, o + s, a + s) }, e.prototype.createPath = function (t) { var e = this.attrs.points; e.length < 2 || ((t = t || this.get("context")).beginPath(), r.each(e, (function (e, n) { 0 === n ? t.moveTo(e[0], e[1]) : t.lineTo(e[0], e[1]) })), t.closePath()) }, e }(o.default); e.default = l }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(3), a = n(9), s = n(12), u = n(4), l = n(2), c = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.canStroke = !0, e.type = "polyline", e.tCache = null, e } return i.__extends(e, t), e.prototype.getDefaultAttrs = function () { return { points: null, lineWidth: 1, startArrow: !1, endArrow: !1, tCache: null } }, e.prototype.isPointInPath = function (t, e) { var n = this.attrs; if (this.hasStroke()) { var i = n.points; if (i.length < 2) return !1; var r = n.lineWidth; return u.polyline(i, r, t, e) } return !1 }, e.prototype.calculateBox = function () { var t = this.attrs, e = this.getHitLineWidth(), n = t.points; if (!n || 0 === n.length) return null; var i = 1 / 0, o = 1 / 0, a = -1 / 0, s = -1 / 0; r.each(n, (function (t) { var e = t[0], n = t[1]; e < i && (i = e), e > a && (a = e), n < o && (o = n), n > s && (s = n) })); var u = e / 2; return l.default.fromRange(i - u, o - u, a + u, s + u) }, e.prototype._setTcache = function () { var t, e, n = this.attrs.points, i = 0, o = 0, a = []; n && 0 !== n.length && (r.each(n, (function (t, e) { n[e + 1] && (i += s.len(t[0], t[1], n[e + 1][0], n[e + 1][1])) })), i <= 0 || (r.each(n, (function (r, u) { n[u + 1] && ((t = [])[0] = o / i, e = s.len(r[0], r[1], n[u + 1][0], n[u + 1][1]), o += e, t[1] = o / i, a.push(t)) })), this.tCache = a)) }, e.prototype.createPath = function (t) { var e, n, i = this.attrs.points; if (!(i.length < 2)) { for ((t = t || this.get("context")).beginPath(), t.moveTo(i[0][0], i[0][1]), n = 1, e = i.length - 1; n < e; n++)t.lineTo(i[n][0], i[n][1]); t.lineTo(i[e][0], i[e][1]) } }, e.prototype.getStartTangent = function () { var t = this.attrs.points, e = []; return e.push([t[1][0], t[1][1]]), e.push([t[0][0], t[0][1]]), e }, e.prototype.getEndTangent = function () { var t = this.attrs.points, e = t.length - 1, n = []; return n.push([t[e - 1][0], t[e - 1][1]]), n.push([t[e][0], t[e][1]]), n }, e.prototype.afterPath = function (t) { var e = this.attrs, n = e.points, i = n.length - 1; t = t || this.get("context"), e.startArrow && a.addStartArrow(t, e, n[1][0], n[1][1], n[0][0], n[0][1]), e.endArrow && a.addEndArrow(t, e, n[i - 1][0], n[i - 1][1], n[i][0], n[i][1]) }, e.prototype.getPoint = function (t) { var e, n, i = this.attrs.points, o = this.tCache; return o || (this._setTcache(), o = this.tCache), r.each(o, (function (i, r) { t >= i[0] && t <= i[1] && (e = (t - i[0]) / (i[1] - i[0]), n = r) })), { x: s.at(i[n][0], i[n + 1][0], e), y: s.at(i[n][1], i[n + 1][1], e) } }, e }(o.default); e.default = c }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(3), o = n(6), a = n(4), s = n(16), u = n(2), l = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.canFill = !0, e.canStroke = !0, e.type = "rect", e } return i.__extends(e, t), e.prototype.getDefaultAttrs = function () { return { x: 0, y: 0, width: 0, height: 0, radius: 0, lineWidth: 1 } }, e.prototype.isPointInPath = function (t, e) { var n = this, i = n.hasFill(), r = n.hasStroke(); function o() { var i = n.attrs, r = i.x, o = i.y, s = i.width, u = i.height, l = i.radius, c = n.getHitLineWidth(); if (0 === l) { var h = c / 2; return a.line(r - h, o, r + s + h, o, c, t, e) || a.line(r + s, o - h, r + s, o + u + h, c, t, e) || a.line(r + s + h, o + u, r - h, o + u, c, t, e) || a.line(r, o + u + h, r, o - h, c, t, e) } return a.line(r + l, o, r + s - l, o, c, t, e) || a.line(r + s, o + l, r + s, o + u - l, c, t, e) || a.line(r + s - l, o + u, r + l, o + u, c, t, e) || a.line(r, o + u - l, r, o + l, c, t, e) || a.arcline(r + s - l, o + l, l, 1.5 * Math.PI, 2 * Math.PI, !1, c, t, e) || a.arcline(r + s - l, o + u - l, l, 0, .5 * Math.PI, !1, c, t, e) || a.arcline(r + l, o + u - l, l, .5 * Math.PI, Math.PI, !1, c, t, e) || a.arcline(r + l, o + l, l, Math.PI, 1.5 * Math.PI, !1, c, t, e) } return i && r ? s.default(t, e, n) || o() : i ? s.default(t, e, n) : !!r && o() }, e.prototype.calculateBox = function () { var t = this.attrs, e = t.x, n = t.y, i = t.width, r = t.height, o = this.getHitLineWidth() / 2; return u.default.fromRange(e - o, n - o, e + i + o, n + r + o) }, e.prototype.createPath = function (t) { var e = this.attrs, n = e.x, i = e.y, r = e.width, a = e.height, s = e.radius; if ((t = t || this.get("context")).beginPath(), 0 === s) t.rect(n, i, r, a); else { var u = o.parseRadius(s); t.moveTo(n + u.r1, i), t.lineTo(n + r - u.r2, i), 0 !== u.r2 && t.arc(n + r - u.r2, i + u.r2, u.r2, -Math.PI / 2, 0), t.lineTo(n + r, i + a - u.r3), 0 !== u.r3 && t.arc(n + r - u.r3, i + a - u.r3, u.r3, 0, Math.PI / 2), t.lineTo(n + u.r4, i + a), 0 !== u.r4 && t.arc(n + u.r4, i + a - u.r4, u.r4, Math.PI / 2, Math.PI), t.lineTo(n, i + u.r1), 0 !== u.r1 && t.arc(n + u.r1, i + u.r1, u.r1, Math.PI, 1.5 * Math.PI), t.closePath() } }, e }(r.default); e.default = l }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(3), a = n(4), s = n(2), u = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.canFill = !0, e.canStroke = !0, e.type = "text", e } return i.__extends(e, t), e.prototype.getDefaultAttrs = function () { return { x: 0, y: 0, text: null, lineHeight: 1, lineWidth: 1, lineCount: 1, fontSize: 12, fontFamily: "sans-serif", fontStyle: "normal", fontWeight: "normal", fontVariant: "normal", textAlign: "start", textBaseline: "bottom", textArr: null } }, e.prototype.isPointInPath = function (t, e) { var n = this.getBBox(); if (this.hasFill() || this.hasStroke()) return a.box(n.x, n.maxX, n.minY, n.maxY, t, e) }, e.prototype.initTransform = function () { var t = this.attrs.fontSize; t && +t < 12 && this.transform([["t", -1 * this.attrs.x, -1 * this.attrs.y], ["s", +t / 12, +t / 12], ["t", this.attrs.x, this.attrs.y]]) }, e.prototype._assembleFont = function () { var t = this.attrs, e = t.fontSize, n = t.fontFamily, i = t.fontWeight, r = t.fontStyle, o = t.fontVariant; t.font = [r, o, i, e + "px", n].join(" ") }, e.prototype._setAttrText = function () { var t = this.attrs, e = t.text, n = null; if (r.isString(e) && -1 !== e.indexOf("\n")) { var i = (n = e.split("\n")).length; t.lineCount = i } t.textArr = n }, e.prototype._getTextHeight = function () { var t = this.attrs, e = t.lineCount, n = 1 * t.fontSize; return e > 1 ? n * e + this._getSpaceingY() * (e - 1) : n }, e.prototype.isHitBox = function () { return !1 }, e.prototype.calculateBox = function () { var t = this.attrs, e = this.cfg; e.attrs && !e.hasUpdate || (this._assembleFont(), this._setAttrText()), t.textArr || this._setAttrText(); var n = t.x, i = t.y, r = this.measureText(); if (!r) return new s.default(n, i, 0, 0); var o = this._getTextHeight(), a = t.textAlign, u = t.textBaseline, l = this.getHitLineWidth(), c = { x: n, y: i - o }; a && ("end" === a || "right" === a ? c.x -= r : "center" === a && (c.x -= r / 2)), u && ("top" === u ? c.y += o : "middle" === u && (c.y += o / 2)), this.set("startPoint", c); var h = l / 2; return s.default.fromRange(c.x - h, c.y - h, c.x + r + h, c.y + o + h) }, e.prototype._getSpaceingY = function () { var t = this.attrs, e = t.lineHeight, n = 1 * t.fontSize; return e ? e - n : .14 * n }, e.prototype.drawInner = function (t) { var e = this.attrs, n = this.cfg; n.attrs && !n.hasUpdate || (this._assembleFont(), this._setAttrText()), t.font = e.font; var i = e.text; if (!r.isNil(i)) { var o = e.textArr, a = e.x, s = e.y, u = e.maxWidth; if (t.beginPath(), this.hasStroke()) { var l = e.strokeOpacity; r.isNil(l) || 1 === l || (t.globalAlpha = l), o ? this._drawTextArr(t, !1) : t.strokeText(i, a, s, u), t.globalAlpha = 1 } if (this.hasFill()) { var c = e.fillOpacity; r.isNil(c) || 1 === c || (t.globalAlpha = c), o ? this._drawTextArr(t, !0) : t.fillText(i, a, s, u) } n.hasUpdate = !1 } }, e.prototype._drawTextArr = function (t, e) { var n, i = this.attrs.textArr, o = this.attrs.textBaseline, a = 1 * this.attrs.fontSize, s = this._getSpaceingY(), u = this.attrs.x, l = this.attrs.y, c = this.attrs.maxWidth, h = this.getBBox(), p = h.maxY - h.minY; r.each(i, (function (i, r) { n = l + r * (s + a) - p + a, "middle" === o && (n += p - a - (p - a) / 2), "top" === o && (n += p - a), e ? t.fillText(i, u, n, c) : t.strokeText(i, u, n, c) })) }, e.prototype.measureText = function () { var t, e = this.attrs, n = e.text, i = e.font, o = e.textArr, a = 0; if (!r.isNil(n)) { var s = document.createElement("canvas").getContext("2d"); return s.save(), s.font = i, o ? r.each(o, (function (e) { t = s.measureText(e).width, a < t && (a = t), s.restore() })) : (a = s.measureText(n).width, s.restore()), void 0 !== e.maxWidth && (a = Math.min(e.maxWidth, a)), a } }, e }(o.default); e.default = u }, function (t) { t.exports = JSON.parse('{"name":"@antv/g","version":"3.5.0-beta.3","description":"A canvas library which providing 2d draw for G2.","keywords":["canvas","svg","G","G2","G6","2d draw"],"main":"lib/index.js","module":"esm/index.js","browser":"dist/g.min.js","types":"lib/index.d.ts","files":["package.json","lib","esm","dist","LICENSE","README.md"],"homepage":"https://github.com/antvis/g","author":"https://github.com/orgs/antvis/people","repository":{"type":"git","url":"git@github.com:antvis/g.git"},"bugs":{"url":"https://github.com/antvis/g/issues"},"scripts":{"test":"torch --compile --renderer --opts __tests__/mocha.opts","test-live":"torch --compile --renderer --interactive --opts __tests__/mocha.opts","build":"run-s clean lib","clean":"rimraf lib esm","lib":"run-p lib:*","lib:cjs":"loose-tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","lib:esm":"loose-tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","lib:umd":"webpack --config webpack.config.js --mode production","lint":"exit 0","coverage":"exit 0","tsc":"loose-tsc --noEmit","prettier":"prettier --write \'*.{js,ts,json,md}\'"},"husky":{"hooks":{"pre-commit":"run-s lint"}},"lint-staged":{"*.{js,json,md}":["prettier --write","git add"],"*.{ts}":["tslint -c tslint.json --fix","prettier --write","git add"]},"dependencies":{"@antv/event-emitter":"^0.1.0","@antv/gl-matrix":"~2.7.1","@antv/util":"~1.3.1","d3-ease":"~1.0.3","d3-interpolate":"~1.1.5","d3-timer":"~1.0.6","detect-browser":"^4.6.0"},"devDependencies":{"@antv/torch":"^1.0.3","@babel/cli":"^7.1.5","@babel/core":"^7.1.6","@babel/plugin-proposal-class-properties":"^7.1.0","@babel/plugin-proposal-object-rest-spread":"^7.0.0","@babel/preset-env":"^7.2.0","@babel/preset-typescript":"^7.1.0","@commitlint/cli":"^7.2.1","@commitlint/config-angular":"^7.1.2","@types/lodash":"^4.14.119","@types/node":"^10.12.18","babel-eslint":"^10.0.1","babel-loader":"^8.0.0","babel-plugin-transform-remove-strict-mode":"~0.0.2","benchmark":"^2.1.4","chai":"~4.0.1","eslint":"^5.10.0","eslint-config-egg":"^7.1.0","eslint-config-prettier":"^6.1.0","event-simulate":"~1.0.0","git-contributor":"~1.0.8","husky":"^1.3.1","lint-staged":"^9.2.3","loose-tsc":"^0.0.1","npm-run-all":"^4.1.5","prettier":"^1.18.2","rimraf":"^3.0.0","source-map-support":"^0.5.9","ts-loader":"^5.3.1","ts-node":"^7.0.1","tslint":"^5.12.0","tslint-config-airbnb":"^5.11.1","tslint-config-prettier":"^1.18.0","typescript":"^3.2.2","webpack":"^4.26.1","webpack-cli":"^3.1.2"}}') }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }) }, function (t, e, n) { "use strict"; n.r(e); var i = function (t, e, n) { t.prototype = e.prototype = n, n.constructor = t }; function r(t, e) { var n = Object.create(t.prototype); for (var i in e) n[i] = e[i]; return n } function o() { } var s = "\\s*([+-]?\\d+)\\s*", u = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*", l = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*", c = /^#([0-9a-f]{3,8})$/, h = new RegExp("^rgb\\(" + [s, s, s] + "\\)$"), p = new RegExp("^rgb\\(" + [l, l, l] + "\\)$"), f = new RegExp("^rgba\\(" + [s, s, s, u] + "\\)$"), d = new RegExp("^rgba\\(" + [l, l, l, u] + "\\)$"), g = new RegExp("^hsl\\(" + [u, l, l] + "\\)$"), v = new RegExp("^hsla\\(" + [u, l, l, u] + "\\)$"), y = { aliceblue: 15792383, antiquewhite: 16444375, aqua: 65535, aquamarine: 8388564, azure: 15794175, beige: 16119260, bisque: 16770244, black: 0, blanchedalmond: 16772045, blue: 255, blueviolet: 9055202, brown: 10824234, burlywood: 14596231, cadetblue: 6266528, chartreuse: 8388352, chocolate: 13789470, coral: 16744272, cornflowerblue: 6591981, cornsilk: 16775388, crimson: 14423100, cyan: 65535, darkblue: 139, darkcyan: 35723, darkgoldenrod: 12092939, darkgray: 11119017, darkgreen: 25600, darkgrey: 11119017, darkkhaki: 12433259, darkmagenta: 9109643, darkolivegreen: 5597999, darkorange: 16747520, darkorchid: 10040012, darkred: 9109504, darksalmon: 15308410, darkseagreen: 9419919, darkslateblue: 4734347, darkslategray: 3100495, darkslategrey: 3100495, darkturquoise: 52945, darkviolet: 9699539, deeppink: 16716947, deepskyblue: 49151, dimgray: 6908265, dimgrey: 6908265, dodgerblue: 2003199, firebrick: 11674146, floralwhite: 16775920, forestgreen: 2263842, fuchsia: 16711935, gainsboro: 14474460, ghostwhite: 16316671, gold: 16766720, goldenrod: 14329120, gray: 8421504, green: 32768, greenyellow: 11403055, grey: 8421504, honeydew: 15794160, hotpink: 16738740, indianred: 13458524, indigo: 4915330, ivory: 16777200, khaki: 15787660, lavender: 15132410, lavenderblush: 16773365, lawngreen: 8190976, lemonchiffon: 16775885, lightblue: 11393254, lightcoral: 15761536, lightcyan: 14745599, lightgoldenrodyellow: 16448210, lightgray: 13882323, lightgreen: 9498256, lightgrey: 13882323, lightpink: 16758465, lightsalmon: 16752762, lightseagreen: 2142890, lightskyblue: 8900346, lightslategray: 7833753, lightslategrey: 7833753, lightsteelblue: 11584734, lightyellow: 16777184, lime: 65280, limegreen: 3329330, linen: 16445670, magenta: 16711935, maroon: 8388608, mediumaquamarine: 6737322, mediumblue: 205, mediumorchid: 12211667, mediumpurple: 9662683, mediumseagreen: 3978097, mediumslateblue: 8087790, mediumspringgreen: 64154, mediumturquoise: 4772300, mediumvioletred: 13047173, midnightblue: 1644912, mintcream: 16121850, mistyrose: 16770273, moccasin: 16770229, navajowhite: 16768685, navy: 128, oldlace: 16643558, olive: 8421376, olivedrab: 7048739, orange: 16753920, orangered: 16729344, orchid: 14315734, palegoldenrod: 15657130, palegreen: 10025880, paleturquoise: 11529966, palevioletred: 14381203, papayawhip: 16773077, peachpuff: 16767673, peru: 13468991, pink: 16761035, plum: 14524637, powderblue: 11591910, purple: 8388736, rebeccapurple: 6697881, red: 16711680, rosybrown: 12357519, royalblue: 4286945, saddlebrown: 9127187, salmon: 16416882, sandybrown: 16032864, seagreen: 3050327, seashell: 16774638, sienna: 10506797, silver: 12632256, skyblue: 8900331, slateblue: 6970061, slategray: 7372944, slategrey: 7372944, snow: 16775930, springgreen: 65407, steelblue: 4620980, tan: 13808780, teal: 32896, thistle: 14204888, tomato: 16737095, turquoise: 4251856, violet: 15631086, wheat: 16113331, white: 16777215, whitesmoke: 16119285, yellow: 16776960, yellowgreen: 10145074 }; function m() { return this.rgb().formatHex() } function x() { return this.rgb().formatRgb() } function _(t) { var e, n; return t = (t + "").trim().toLowerCase(), (e = c.exec(t)) ? (n = e[1].length, e = parseInt(e[1], 16), 6 === n ? b(e) : 3 === n ? new C(e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | 240 & e, (15 & e) << 4 | 15 & e, 1) : 8 === n ? new C(e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, (255 & e) / 255) : 4 === n ? new C(e >> 12 & 15 | e >> 8 & 240, e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | 240 & e, ((15 & e) << 4 | 15 & e) / 255) : null) : (e = h.exec(t)) ? new C(e[1], e[2], e[3], 1) : (e = p.exec(t)) ? new C(255 * e[1] / 100, 255 * e[2] / 100, 255 * e[3] / 100, 1) : (e = f.exec(t)) ? w(e[1], e[2], e[3], e[4]) : (e = d.exec(t)) ? w(255 * e[1] / 100, 255 * e[2] / 100, 255 * e[3] / 100, e[4]) : (e = g.exec(t)) ? A(e[1], e[2] / 100, e[3] / 100, 1) : (e = v.exec(t)) ? A(e[1], e[2] / 100, e[3] / 100, e[4]) : y.hasOwnProperty(t) ? b(y[t]) : "transparent" === t ? new C(NaN, NaN, NaN, 0) : null } function b(t) { return new C(t >> 16 & 255, t >> 8 & 255, 255 & t, 1) } function w(t, e, n, i) { return i <= 0 && (t = e = n = NaN), new C(t, e, n, i) } function M(t) { return t instanceof o || (t = _(t)), t ? new C((t = t.rgb()).r, t.g, t.b, t.opacity) : new C } function S(t, e, n, i) { return 1 === arguments.length ? M(t) : new C(t, e, n, null == i ? 1 : i) } function C(t, e, n, i) { this.r = +t, this.g = +e, this.b = +n, this.opacity = +i } function O() { return "#" + P(this.r) + P(this.g) + P(this.b) } function k() { var t = this.opacity; return (1 === (t = isNaN(t) ? 1 : Math.max(0, Math.min(1, t))) ? "rgb(" : "rgba(") + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.b) || 0)) + (1 === t ? ")" : ", " + t + ")") } function P(t) { return ((t = Math.max(0, Math.min(255, Math.round(t) || 0))) < 16 ? "0" : "") + t.toString(16) } function A(t, e, n, i) { return i <= 0 ? t = e = n = NaN : n <= 0 || n >= 1 ? t = e = NaN : e <= 0 && (t = NaN), new D(t, e, n, i) } function L(t) { if (t instanceof D) return new D(t.h, t.s, t.l, t.opacity); if (t instanceof o || (t = _(t)), !t) return new D; if (t instanceof D) return t; var e = (t = t.rgb()).r / 255, n = t.g / 255, i = t.b / 255, r = Math.min(e, n, i), a = Math.max(e, n, i), s = NaN, u = a - r, l = (a + r) / 2; return u ? (s = e === a ? (n - i) / u + 6 * (n < i) : n === a ? (i - e) / u + 2 : (e - n) / u + 4, u /= l < .5 ? a + r : 2 - a - r, s *= 60) : u = l > 0 && l < 1 ? 0 : s, new D(s, u, l, t.opacity) } function T(t, e, n, i) { return 1 === arguments.length ? L(t) : new D(t, e, n, null == i ? 1 : i) } function D(t, e, n, i) { this.h = +t, this.s = +e, this.l = +n, this.opacity = +i } function j(t, e, n) { return 255 * (t < 60 ? e + (n - e) * t / 60 : t < 180 ? n : t < 240 ? e + (n - e) * (240 - t) / 60 : e) } function I(t, e, n, i, r) { var o = t * t, a = o * t; return ((1 - 3 * t + 3 * o - a) * e + (4 - 6 * o + 3 * a) * n + (1 + 3 * t + 3 * o - 3 * a) * i + a * r) / 6 } i(o, _, { copy: function (t) { return Object.assign(new this.constructor, this, t) }, displayable: function () { return this.rgb().displayable() }, hex: m, formatHex: m, formatHsl: function () { return L(this).formatHsl() }, formatRgb: x, toString: x }), i(C, S, r(o, { brighter: function (t) { return t = null == t ? 1 / .7 : Math.pow(1 / .7, t), new C(this.r * t, this.g * t, this.b * t, this.opacity) }, darker: function (t) { return t = null == t ? .7 : Math.pow(.7, t), new C(this.r * t, this.g * t, this.b * t, this.opacity) }, rgb: function () { return this }, displayable: function () { return -.5 <= this.r && this.r < 255.5 && -.5 <= this.g && this.g < 255.5 && -.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1 }, hex: O, formatHex: O, formatRgb: k, toString: k })), i(D, T, r(o, { brighter: function (t) { return t = null == t ? 1 / .7 : Math.pow(1 / .7, t), new D(this.h, this.s, this.l * t, this.opacity) }, darker: function (t) { return t = null == t ? .7 : Math.pow(.7, t), new D(this.h, this.s, this.l * t, this.opacity) }, rgb: function () { var t = this.h % 360 + 360 * (this.h < 0), e = isNaN(t) || isNaN(this.s) ? 0 : this.s, n = this.l, i = n + (n < .5 ? n : 1 - n) * e, r = 2 * n - i; return new C(j(t >= 240 ? t - 240 : t + 120, r, i), j(t, r, i), j(t < 120 ? t + 240 : t - 120, r, i), this.opacity) }, displayable: function () { return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1 }, formatHsl: function () { var t = this.opacity; return (1 === (t = isNaN(t) ? 1 : Math.max(0, Math.min(1, t))) ? "hsl(" : "hsla(") + (this.h || 0) + ", " + 100 * (this.s || 0) + "%, " + 100 * (this.l || 0) + "%" + (1 === t ? ")" : ", " + t + ")") } })); var B = function (t) { var e = t.length - 1; return function (n) { var i = n <= 0 ? n = 0 : n >= 1 ? (n = 1, e - 1) : Math.floor(n * e), r = t[i], o = t[i + 1], a = i > 0 ? t[i - 1] : 2 * r - o, s = i < e - 1 ? t[i + 2] : 2 * o - r; return I((n - i / e) * e, a, r, o, s) } }, E = function (t) { var e = t.length; return function (n) { var i = Math.floor(((n %= 1) < 0 ? ++n : n) * e), r = t[(i + e - 1) % e], o = t[i % e], a = t[(i + 1) % e], s = t[(i + 2) % e]; return I((n - i / e) * e, r, o, a, s) } }, F = function (t) { return function () { return t } }; function R(t, e) { return function (n) { return t + n * e } } function z(t, e) { var n = e - t; return n ? R(t, n > 180 || n < -180 ? n - 360 * Math.round(n / 360) : n) : F(isNaN(t) ? e : t) } function N(t, e) { var n = e - t; return n ? R(t, n) : F(isNaN(t) ? e : t) } var Y = function t(e) { var n = function (t) { return 1 == (t = +t) ? N : function (e, n) { return n - e ? function (t, e, n) { return t = Math.pow(t, n), e = Math.pow(e, n) - t, n = 1 / n, function (i) { return Math.pow(t + i * e, n) } }(e, n, t) : F(isNaN(e) ? n : e) } }(e); function i(t, e) { var i = n((t = S(t)).r, (e = S(e)).r), r = n(t.g, e.g), o = n(t.b, e.b), a = N(t.opacity, e.opacity); return function (e) { return t.r = i(e), t.g = r(e), t.b = o(e), t.opacity = a(e), t + "" } } return i.gamma = t, i }(1); function H(t) { return function (e) { var n, i, r = e.length, o = new Array(r), a = new Array(r), s = new Array(r); for (n = 0; n < r; ++n)i = S(e[n]), o[n] = i.r || 0, a[n] = i.g || 0, s[n] = i.b || 0; return o = t(o), a = t(a), s = t(s), i.opacity = 1, function (t) { return i.r = o(t), i.g = a(t), i.b = s(t), i + "" } } } var G, W, V, X, q = H(B), U = H(E), Z = function (t, e) { var n, i = e ? e.length : 0, r = t ? Math.min(i, t.length) : 0, o = new Array(r), a = new Array(i); for (n = 0; n < r; ++n)o[n] = nt(t[n], e[n]); for (; n < i; ++n)a[n] = e[n]; return function (t) { for (n = 0; n < r; ++n)a[n] = o[n](t); return a } }, Q = function (t, e) { var n = new Date; return e -= t = +t, function (i) { return n.setTime(t + e * i), n } }, $ = function (t, e) { return e -= t = +t, function (n) { return t + e * n } }, K = function (t, e) { var n, i = {}, r = {}; for (n in null !== t && "object" == a(t) || (t = {}), null !== e && "object" == a(e) || (e = {}), e) n in t ? i[n] = nt(t[n], e[n]) : r[n] = e[n]; return function (t) { for (n in i) r[n] = i[n](t); return r } }, J = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, tt = new RegExp(J.source, "g"), et = function (t, e) { var n, i, r, o = J.lastIndex = tt.lastIndex = 0, a = -1, s = [], u = []; for (t += "", e += ""; (n = J.exec(t)) && (i = tt.exec(e));)(r = i.index) > o && (r = e.slice(o, r), s[a] ? s[a] += r : s[++a] = r), (n = n[0]) === (i = i[0]) ? s[a] ? s[a] += i : s[++a] = i : (s[++a] = null, u.push({ i: a, x: $(n, i) })), o = tt.lastIndex; return o < e.length && (r = e.slice(o), s[a] ? s[a] += r : s[++a] = r), s.length < 2 ? u[0] ? function (t) { return function (e) { return t(e) + "" } }(u[0].x) : function (t) { return function () { return t } }(e) : (e = u.length, function (t) { for (var n, i = 0; i < e; ++i)s[(n = u[i]).i] = n.x(t); return s.join("") }) }, nt = function (t, e) { var n, i = a(e); return null == e || "boolean" === i ? F(e) : ("number" === i ? $ : "string" === i ? (n = _(e)) ? (e = n, Y) : et : e instanceof _ ? Y : e instanceof Date ? Q : Array.isArray(e) ? Z : "function" != typeof e.valueOf && "function" != typeof e.toString || isNaN(e) ? K : $)(t, e) }, it = function (t, e) { return e -= t = +t, function (n) { return Math.round(t + e * n) } }, rt = 180 / Math.PI, ot = { translateX: 0, translateY: 0, rotate: 0, skewX: 0, scaleX: 1, scaleY: 1 }, at = function (t, e, n, i, r, o) { var a, s, u; return (a = Math.sqrt(t * t + e * e)) && (t /= a, e /= a), (u = t * n + e * i) && (n -= t * u, i -= e * u), (s = Math.sqrt(n * n + i * i)) && (n /= s, i /= s, u /= s), t * i < e * n && (t = -t, e = -e, u = -u, a = -a), { translateX: r, translateY: o, rotate: Math.atan2(e, t) * rt, skewX: Math.atan(u) * rt, scaleX: a, scaleY: s } }; function st(t, e, n, i) { function r(t) { return t.length ? t.pop() + " " : "" } return function (o, a) { var s = [], u = []; return o = t(o), a = t(a), function (t, i, r, o, a, s) { if (t !== r || i !== o) { var u = a.push("translate(", null, e, null, n); s.push({ i: u - 4, x: $(t, r) }, { i: u - 2, x: $(i, o) }) } else (r || o) && a.push("translate(" + r + e + o + n) }(o.translateX, o.translateY, a.translateX, a.translateY, s, u), function (t, e, n, o) { t !== e ? (t - e > 180 ? e += 360 : e - t > 180 && (t += 360), o.push({ i: n.push(r(n) + "rotate(", null, i) - 2, x: $(t, e) })) : e && n.push(r(n) + "rotate(" + e + i) }(o.rotate, a.rotate, s, u), function (t, e, n, o) { t !== e ? o.push({ i: n.push(r(n) + "skewX(", null, i) - 2, x: $(t, e) }) : e && n.push(r(n) + "skewX(" + e + i) }(o.skewX, a.skewX, s, u), function (t, e, n, i, o, a) { if (t !== n || e !== i) { var s = o.push(r(o) + "scale(", null, ",", null, ")"); a.push({ i: s - 4, x: $(t, n) }, { i: s - 2, x: $(e, i) }) } else 1 === n && 1 === i || o.push(r(o) + "scale(" + n + "," + i + ")") }(o.scaleX, o.scaleY, a.scaleX, a.scaleY, s, u), o = a = null, function (t) { for (var e, n = -1, i = u.length; ++n < i;)s[(e = u[n]).i] = e.x(t); return s.join("") } } } var ut = st((function (t) { return "none" === t ? ot : (G || (G = document.createElement("DIV"), W = document.documentElement, V = document.defaultView), G.style.transform = t, t = V.getComputedStyle(W.appendChild(G), null).getPropertyValue("transform"), W.removeChild(G), t = t.slice(7, -1).split(","), at(+t[0], +t[1], +t[2], +t[3], +t[4], +t[5])) }), "px, ", "px)", "deg)"), lt = st((function (t) { return null == t ? ot : (X || (X = document.createElementNS("http://www.w3.org/2000/svg", "g")), X.setAttribute("transform", t), (t = X.transform.baseVal.consolidate()) ? (t = t.matrix, at(t.a, t.b, t.c, t.d, t.e, t.f)) : ot) }), ", ", ")", ")"), ct = Math.SQRT2; function ht(t) { return ((t = Math.exp(t)) + 1 / t) / 2 } var pt = function (t, e) { var n, i, r = t[0], o = t[1], a = t[2], s = e[0], u = e[1], l = e[2], c = s - r, h = u - o, p = c * c + h * h; if (p < 1e-12) i = Math.log(l / a) / ct, n = function (t) { return [r + t * c, o + t * h, a * Math.exp(ct * t * i)] }; else { var f = Math.sqrt(p), d = (l * l - a * a + 4 * p) / (2 * a * 2 * f), g = (l * l - a * a - 4 * p) / (2 * l * 2 * f), v = Math.log(Math.sqrt(d * d + 1) - d), y = Math.log(Math.sqrt(g * g + 1) - g); i = (y - v) / ct, n = function (t) { var e, n = t * i, s = ht(v), u = a / (2 * f) * (s * (e = ct * n + v, ((e = Math.exp(2 * e)) - 1) / (e + 1)) - function (t) { return ((t = Math.exp(t)) - 1 / t) / 2 }(v)); return [r + u * c, o + u * h, a * s / ht(ct * n + v)] } } return n.duration = 1e3 * i, n }; function ft(t) { return function (e, n) { var i = t((e = T(e)).h, (n = T(n)).h), r = N(e.s, n.s), o = N(e.l, n.l), a = N(e.opacity, n.opacity); return function (t) { return e.h = i(t), e.s = r(t), e.l = o(t), e.opacity = a(t), e + "" } } } var dt = ft(z), gt = ft(N), vt = Math.PI / 180, yt = 180 / Math.PI, mt = 6 / 29 * 3 * (6 / 29); function xt(t) { if (t instanceof bt) return new bt(t.l, t.a, t.b, t.opacity); if (t instanceof Pt) return At(t); t instanceof C || (t = M(t)); var e, n, i = Ct(t.r), r = Ct(t.g), o = Ct(t.b), a = wt((.2225045 * i + .7168786 * r + .0606169 * o) / 1); return i === r && r === o ? e = n = a : (e = wt((.4360747 * i + .3850649 * r + .1430804 * o) / .96422), n = wt((.0139322 * i + .0971045 * r + .7141733 * o) / .82521)), new bt(116 * a - 16, 500 * (e - a), 200 * (a - n), t.opacity) } function _t(t, e, n, i) { return 1 === arguments.length ? xt(t) : new bt(t, e, n, null == i ? 1 : i) } function bt(t, e, n, i) { this.l = +t, this.a = +e, this.b = +n, this.opacity = +i } function wt(t) { return t > .008856451679035631 ? Math.pow(t, 1 / 3) : t / mt + 4 / 29 } function Mt(t) { return t > 6 / 29 ? t * t * t : mt * (t - 4 / 29) } function St(t) { return 255 * (t <= .0031308 ? 12.92 * t : 1.055 * Math.pow(t, 1 / 2.4) - .055) } function Ct(t) { return (t /= 255) <= .04045 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4) } function Ot(t) { if (t instanceof Pt) return new Pt(t.h, t.c, t.l, t.opacity); if (t instanceof bt || (t = xt(t)), 0 === t.a && 0 === t.b) return new Pt(NaN, 0 < t.l && t.l < 100 ? 0 : NaN, t.l, t.opacity); var e = Math.atan2(t.b, t.a) * yt; return new Pt(e < 0 ? e + 360 : e, Math.sqrt(t.a * t.a + t.b * t.b), t.l, t.opacity) } function kt(t, e, n, i) { return 1 === arguments.length ? Ot(t) : new Pt(t, e, n, null == i ? 1 : i) } function Pt(t, e, n, i) { this.h = +t, this.c = +e, this.l = +n, this.opacity = +i } function At(t) { if (isNaN(t.h)) return new bt(t.l, 0, 0, t.opacity); var e = t.h * vt; return new bt(t.l, Math.cos(e) * t.c, Math.sin(e) * t.c, t.opacity) } function Lt(t, e) { var n = N((t = _t(t)).l, (e = _t(e)).l), i = N(t.a, e.a), r = N(t.b, e.b), o = N(t.opacity, e.opacity); return function (e) { return t.l = n(e), t.a = i(e), t.b = r(e), t.opacity = o(e), t + "" } } function Tt(t) { return function (e, n) { var i = t((e = kt(e)).h, (n = kt(n)).h), r = N(e.c, n.c), o = N(e.l, n.l), a = N(e.opacity, n.opacity); return function (t) { return e.h = i(t), e.c = r(t), e.l = o(t), e.opacity = a(t), e + "" } } } i(bt, _t, r(o, { brighter: function (t) { return new bt(this.l + 18 * (null == t ? 1 : t), this.a, this.b, this.opacity) }, darker: function (t) { return new bt(this.l - 18 * (null == t ? 1 : t), this.a, this.b, this.opacity) }, rgb: function () { var t = (this.l + 16) / 116, e = isNaN(this.a) ? t : t + this.a / 500, n = isNaN(this.b) ? t : t - this.b / 200; return new C(St(3.1338561 * (e = .96422 * Mt(e)) - 1.6168667 * (t = 1 * Mt(t)) - .4906146 * (n = .82521 * Mt(n))), St(-.9787684 * e + 1.9161415 * t + .033454 * n), St(.0719453 * e - .2289914 * t + 1.4052427 * n), this.opacity) } })), i(Pt, kt, r(o, { brighter: function (t) { return new Pt(this.h, this.c, this.l + 18 * (null == t ? 1 : t), this.opacity) }, darker: function (t) { return new Pt(this.h, this.c, this.l - 18 * (null == t ? 1 : t), this.opacity) }, rgb: function () { return At(this).rgb() } })); var Dt = Tt(z), jt = Tt(N), It = 1.78277, Bt = -.29227, Et = -.90649, Ft = 1.97294, Rt = Ft * Et, zt = Ft * It, Nt = It * Bt - -.14861 * Et; function Yt(t) { if (t instanceof Gt) return new Gt(t.h, t.s, t.l, t.opacity); t instanceof C || (t = M(t)); var e = t.r / 255, n = t.g / 255, i = t.b / 255, r = (Nt * i + Rt * e - zt * n) / (Nt + Rt - zt), o = i - r, a = (Ft * (n - r) - Bt * o) / Et, s = Math.sqrt(a * a + o * o) / (Ft * r * (1 - r)), u = s ? Math.atan2(a, o) * yt - 120 : NaN; return new Gt(u < 0 ? u + 360 : u, s, r, t.opacity) } function Ht(t, e, n, i) { return 1 === arguments.length ? Yt(t) : new Gt(t, e, n, null == i ? 1 : i) } function Gt(t, e, n, i) { this.h = +t, this.s = +e, this.l = +n, this.opacity = +i } function Wt(t) { return function e(n) { function i(e, i) { var r = t((e = Ht(e)).h, (i = Ht(i)).h), o = N(e.s, i.s), a = N(e.l, i.l), s = N(e.opacity, i.opacity); return function (t) { return e.h = r(t), e.s = o(t), e.l = a(Math.pow(t, n)), e.opacity = s(t), e + "" } } return n = +n, i.gamma = e, i }(1) } i(Gt, Ht, r(o, { brighter: function (t) { return t = null == t ? 1 / .7 : Math.pow(1 / .7, t), new Gt(this.h, this.s, this.l * t, this.opacity) }, darker: function (t) { return t = null == t ? .7 : Math.pow(.7, t), new Gt(this.h, this.s, this.l * t, this.opacity) }, rgb: function () { var t = isNaN(this.h) ? 0 : (this.h + 120) * vt, e = +this.l, n = isNaN(this.s) ? 0 : this.s * e * (1 - e), i = Math.cos(t), r = Math.sin(t); return new C(255 * (e + n * (-.14861 * i + It * r)), 255 * (e + n * (Bt * i + Et * r)), 255 * (e + n * (Ft * i)), this.opacity) } })); var Vt = Wt(z), Xt = Wt(N), qt = function (t, e) { for (var n = new Array(e), i = 0; i < e; ++i)n[i] = t(i / (e - 1)); return n }; n.d(e, "interpolate", (function () { return nt })), n.d(e, "interpolateArray", (function () { return Z })), n.d(e, "interpolateBasis", (function () { return B })), n.d(e, "interpolateBasisClosed", (function () { return E })), n.d(e, "interpolateDate", (function () { return Q })), n.d(e, "interpolateNumber", (function () { return $ })), n.d(e, "interpolateObject", (function () { return K })), n.d(e, "interpolateRound", (function () { return it })), n.d(e, "interpolateString", (function () { return et })), n.d(e, "interpolateTransformCss", (function () { return ut })), n.d(e, "interpolateTransformSvg", (function () { return lt })), n.d(e, "interpolateZoom", (function () { return pt })), n.d(e, "interpolateRgb", (function () { return Y })), n.d(e, "interpolateRgbBasis", (function () { return q })), n.d(e, "interpolateRgbBasisClosed", (function () { return U })), n.d(e, "interpolateHsl", (function () { return dt })), n.d(e, "interpolateHslLong", (function () { return gt })), n.d(e, "interpolateLab", (function () { return Lt })), n.d(e, "interpolateHcl", (function () { return Dt })), n.d(e, "interpolateHclLong", (function () { return jt })), n.d(e, "interpolateCubehelix", (function () { return Vt })), n.d(e, "interpolateCubehelixLong", (function () { return Xt })), n.d(e, "quantize", (function () { return qt })) }, function (t, e, n) { "use strict"; function i(t) { return +t } function r(t) { return t * t } function o(t) { return t * (2 - t) } function a(t) { return ((t *= 2) <= 1 ? t * t : --t * (2 - t) + 1) / 2 } function s(t) { return t * t * t } function u(t) { return --t * t * t + 1 } function l(t) { return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2 } n.r(e); var c = function t(e) { function n(t) { return Math.pow(t, e) } return e = +e, n.exponent = t, n }(3), h = function t(e) { function n(t) { return 1 - Math.pow(1 - t, e) } return e = +e, n.exponent = t, n }(3), p = function t(e) { function n(t) { return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2 } return e = +e, n.exponent = t, n }(3), f = Math.PI, d = f / 2; function g(t) { return 1 - Math.cos(t * d) } function v(t) { return Math.sin(t * d) } function y(t) { return (1 - Math.cos(f * t)) / 2 } function m(t) { return Math.pow(2, 10 * t - 10) } function x(t) { return 1 - Math.pow(2, -10 * t) } function _(t) { return ((t *= 2) <= 1 ? Math.pow(2, 10 * t - 10) : 2 - Math.pow(2, 10 - 10 * t)) / 2 } function b(t) { return 1 - Math.sqrt(1 - t * t) } function w(t) { return Math.sqrt(1 - --t * t) } function M(t) { return ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2 } var S = 7.5625; function C(t) { return 1 - O(1 - t) } function O(t) { return (t = +t) < 4 / 11 ? S * t * t : t < 8 / 11 ? S * (t -= 6 / 11) * t + .75 : t < 10 / 11 ? S * (t -= 9 / 11) * t + .9375 : S * (t -= 21 / 22) * t + 63 / 64 } function k(t) { return ((t *= 2) <= 1 ? 1 - O(1 - t) : O(t - 1) + 1) / 2 } var P = function t(e) { function n(t) { return t * t * ((e + 1) * t - e) } return e = +e, n.overshoot = t, n }(1.70158), A = function t(e) { function n(t) { return --t * t * ((e + 1) * t + e) + 1 } return e = +e, n.overshoot = t, n }(1.70158), L = function t(e) { function n(t) { return ((t *= 2) < 1 ? t * t * ((e + 1) * t - e) : (t -= 2) * t * ((e + 1) * t + e) + 2) / 2 } return e = +e, n.overshoot = t, n }(1.70158), T = 2 * Math.PI, D = function t(e, n) { var i = Math.asin(1 / (e = Math.max(1, e))) * (n /= T); function r(t) { return e * Math.pow(2, 10 * --t) * Math.sin((i - t) / n) } return r.amplitude = function (e) { return t(e, n * T) }, r.period = function (n) { return t(e, n) }, r }(1, .3), j = function t(e, n) { var i = Math.asin(1 / (e = Math.max(1, e))) * (n /= T); function r(t) { return 1 - e * Math.pow(2, -10 * (t = +t)) * Math.sin((t + i) / n) } return r.amplitude = function (e) { return t(e, n * T) }, r.period = function (n) { return t(e, n) }, r }(1, .3), I = function t(e, n) { var i = Math.asin(1 / (e = Math.max(1, e))) * (n /= T); function r(t) { return ((t = 2 * t - 1) < 0 ? e * Math.pow(2, 10 * t) * Math.sin((i - t) / n) : 2 - e * Math.pow(2, -10 * t) * Math.sin((i + t) / n)) / 2 } return r.amplitude = function (e) { return t(e, n * T) }, r.period = function (n) { return t(e, n) }, r }(1, .3); n.d(e, "easeLinear", (function () { return i })), n.d(e, "easeQuad", (function () { return a })), n.d(e, "easeQuadIn", (function () { return r })), n.d(e, "easeQuadOut", (function () { return o })), n.d(e, "easeQuadInOut", (function () { return a })), n.d(e, "easeCubic", (function () { return l })), n.d(e, "easeCubicIn", (function () { return s })), n.d(e, "easeCubicOut", (function () { return u })), n.d(e, "easeCubicInOut", (function () { return l })), n.d(e, "easePoly", (function () { return p })), n.d(e, "easePolyIn", (function () { return c })), n.d(e, "easePolyOut", (function () { return h })), n.d(e, "easePolyInOut", (function () { return p })), n.d(e, "easeSin", (function () { return y })), n.d(e, "easeSinIn", (function () { return g })), n.d(e, "easeSinOut", (function () { return v })), n.d(e, "easeSinInOut", (function () { return y })), n.d(e, "easeExp", (function () { return _ })), n.d(e, "easeExpIn", (function () { return m })), n.d(e, "easeExpOut", (function () { return x })), n.d(e, "easeExpInOut", (function () { return _ })), n.d(e, "easeCircle", (function () { return M })), n.d(e, "easeCircleIn", (function () { return b })), n.d(e, "easeCircleOut", (function () { return w })), n.d(e, "easeCircleInOut", (function () { return M })), n.d(e, "easeBounce", (function () { return O })), n.d(e, "easeBounceIn", (function () { return C })), n.d(e, "easeBounceOut", (function () { return O })), n.d(e, "easeBounceInOut", (function () { return k })), n.d(e, "easeBack", (function () { return L })), n.d(e, "easeBackIn", (function () { return P })), n.d(e, "easeBackOut", (function () { return A })), n.d(e, "easeBackInOut", (function () { return L })), n.d(e, "easeElastic", (function () { return j })), n.d(e, "easeElasticIn", (function () { return D })), n.d(e, "easeElasticOut", (function () { return j })), n.d(e, "easeElasticInOut", (function () { return I })) }, function (t, e, n) { "use strict"; n.r(e); var i, r, o = 0, s = 0, u = 0, l = 0, c = 0, h = 0, p = "object" == ("undefined" == typeof performance ? "undefined" : a(performance)) && performance.now ? performance : Date, f = "object" == ("undefined" == typeof window ? "undefined" : a(window)) && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (t) { setTimeout(t, 17) }; function d() { return c || (f(g), c = p.now() + h) } function g() { c = 0 } function v() { this._call = this._time = this._next = null } function y(t, e, n) { var i = new v; return i.restart(t, e, n), i } function m() { d(), ++o; for (var t, e = i; e;)(t = c - e._time) >= 0 && e._call.call(null, t), e = e._next; --o } function x() { c = (l = p.now()) + h, o = s = 0; try { m() } finally { o = 0, function () { for (var t, e, n = i, o = 1 / 0; n;)n._call ? (o > n._time && (o = n._time), t = n, n = n._next) : (e = n._next, n._next = null, n = t ? t._next = e : i = e); r = t, b(o) }(), c = 0 } } function _() { var t = p.now(), e = t - l; e > 1e3 && (h -= e, l = t) } function b(t) { o || (s && (s = clearTimeout(s)), t - c > 24 ? (t < 1 / 0 && (s = setTimeout(x, t - p.now() - h)), u && (u = clearInterval(u))) : (u || (l = p.now(), u = setInterval(_, 1e3)), o = 1, f(x))) } v.prototype = y.prototype = { constructor: v, restart: function (t, e, n) { if ("function" != typeof t) throw new TypeError("callback is not a function"); n = (null == n ? d() : +n) + (null == e ? 0 : +e), this._next || r === this || (r ? r._next = this : i = this, r = this), this._call = t, this._time = n, b() }, stop: function () { this._call && (this._call = null, this._time = 1 / 0, b()) } }; var w = function (t, e, n) { var i = new v; return e = null == e ? 0 : +e, i.restart((function (n) { i.stop(), t(n + e) }), e, n), i }, M = function (t, e, n) { var i = new v, r = e; return null == e ? (i.restart(t, e, n), i) : (e = +e, n = null == n ? d() : +n, i.restart((function o(a) { a += r, i.restart(o, r += e, n), t(a) }), e, n), i) }; n.d(e, "now", (function () { return d })), n.d(e, "timer", (function () { return y })), n.d(e, "timerFlush", (function () { return m })), n.d(e, "timeout", (function () { return w })), n.d(e, "interval", (function () { return M })) }])
            }, "object" == a(e) && "object" == a(t) ? t.exports = o() : (i = [], void 0 === (r = "function" == typeof (n = o) ? n.apply(e, i) : n) || (t.exports = r))
        }).call(this, n(58)(t))
    }, function (t, e, n) { "use strict"; e.__esModule = !0; var i = n(113); e.addEventListener = i.default; var r = n(114); e.createDom = r.default; var o = n(60); e.getHeight = o.default; var a = n(115); e.getOuterHeight = a.default; var s = n(116); e.getOuterWidth = s.default; var u = n(117); e.getRatio = u.default; var l = n(29); e.getStyle = l.default; var c = n(61); e.getWidth = c.default; var h = n(118); e.modifyCSS = h.default }, function (t, e, n) { "use strict"; n.r(e); var i = n(14); i.translate = function (t, e, n) { var r = new Array(9); return i.fromTranslation(r, n), i.multiply(t, r, e) }, i.rotate = function (t, e, n) { var r = new Array(9); return i.fromRotation(r, n), i.multiply(t, r, e) }, i.scale = function (t, e, n) { var r = new Array(9); return i.fromScaling(r, n), i.multiply(t, r, e) }, i.transform = function (t, e) { for (var n = [].concat(t), r = 0, o = e.length; r < o; r++) { var a = e[r]; switch (a[0]) { case "t": i.translate(n, n, [a[1], a[2]]); break; case "s": i.scale(n, n, [a[1], a[2]]); break; case "r": i.rotate(n, n, a[1]) } } return n }; var r = i, o = n(19), a = n(0); o.angle = function (t, e) { var n = o.dot(t, e) / (o.length(t) * o.length(e)); return Math.acos(Object(a.clamp)(n, -1, 1)) }, o.direction = function (t, e) { return t[0] * e[1] - e[0] * t[1] }, o.angleTo = function (t, e, n) { var i = o.angle(t, e), r = o.direction(t, e) >= 0; return n ? r ? 2 * Math.PI - i : i : r ? i : 2 * Math.PI - i }, o.vertical = function (t, e, n) { return n ? (t[0] = e[1], t[1] = -1 * e[0]) : (t[0] = -1 * e[1], t[1] = e[0]), t }; var s = o, u = n(108), l = function (t, e) { var n = t ? Object(a.clone)(t) : [1, 0, 0, 0, 1, 0, 0, 0, 1]; return Object(a.each)(e, (function (t) { switch (t[0]) { case "t": r.translate(n, n, [t[1], t[2]]); break; case "s": r.scale(n, n, [t[1], t[2]]); break; case "r": r.rotate(n, n, t[1]); break; case "m": r.multiply(n, n, t[1]); break; default: return !1 } })), n }; n.d(e, "mat3", (function () { return r })), n.d(e, "vec2", (function () { return s })), n.d(e, "vec3", (function () { return u })), n.d(e, "transform", (function () { return l })) }, function (t, e, n) { "use strict"; n.r(e); var i = {}; n.r(i), n.d(i, "registerShapeFactory", (function () { return Rt })), n.d(i, "registerShape", (function () { return zt })), n.d(i, "getShapeFactory", (function () { return Nt })); var r, o = n(2), a = n(0), s = n(59), u = n(1), l = n(3), c = n(107), h = {}, p = function (t) { return h[t.toLowerCase()] }, f = function (t, e) { if (p(t)) throw new Error("Theme type '" + t + "' existed."); h[t.toLowerCase()] = e }, d = '"-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"', g = { area: { lineWidth: 0, fill: "#1890FF", fillOpacity: .6 }, hollowArea: { fill: "#fff", stroke: "#1890FF", fillOpacity: 0, lineWidth: 2 }, box: { stroke: "#1890FF", lineWidth: 1, fill: null }, edge: { stroke: "#1890FF", lineWidth: 1, fill: null }, interval: { lineWidth: 0, fill: "#1890FF", fillOpacity: .85 }, hollowInterval: { fill: "#fff", stroke: "#1890FF", fillOpacity: 0, lineWidth: 2 }, kline: { fill: "#1890FF", lineWidth: 1, stroke: "#1890FF" }, line: { stroke: "#1890FF", lineWidth: 2, fill: null }, polygon: { lineWidth: 0, fill: "#1890FF", fillOpacity: 1 }, hollowPolygon: { fill: "#fff", stroke: "#1890FF", fillOpacity: 0, lineWidth: 2 }, point: { lineWidth: 1, fill: "#1890FF", radius: 4 }, hollowPoint: { fill: "#fff", lineWidth: 1, stroke: "#1890FF", radius: 3 }, text: { fill: "#1890FF", textAlign: "center", textBaseline: "middle" } }, v = function (t) { var e = t.fillOpacity || t.opacity || 1; return { fillOpacity: a.clamp(e - .15, .1, 1), strokeOpacity: a.clamp(e - .15, .1, 1) } }, y = function (t) { return { lineWidth: (t.lineWidth || 1) + 1 } }, m = function (t) { var e = t.fillOpacity || t.opacity || 1; return { fillOpacity: a.clamp(e - .15, .1, 1) } }, x = function (t) { var e = t.fill || t.fillStyle, n = t.size || t.radius; return { radius: n + 1, shadowBlur: n, shadowColor: e, stroke: e, strokeOpacity: 1, lineWidth: 1 } }, _ = function (t) { var e = t.stroke || t.strokeStyle, n = t.size || t.radius; return { radius: n + 1, shadowBlur: n, shadowColor: e, stroke: e, strokeOpacity: 1, lineWidth: 1 } }, b = { autoRotateLabel: !0, autoHideLabel: !1, autoRotateTitle: !0, showTitle: !1, gridType: "line", title: { textStyle: { fontSize: 12, fill: "#ccc", textBaseline: "middle", fontFamily: d, textAlign: "center" }, offset: 20 }, label: { offset: 16, textStyle: { fill: "#545454", fontSize: 12, lineHeight: 16, textBaseline: "middle", fontFamily: d } }, line: { lineWidth: 1, stroke: "#BFBFBF" }, tickLine: { lineWidth: 1, stroke: "#BFBFBF", length: 4, alignWithLabel: !0 }, grid: { stroke: "#E9E9E9", lineWidth: 1, lineDash: [3, 3] } }, w = { showTitle: !1, textStyle: { fill: "#8C8C8C", fontSize: 12, textAlign: "start", textBaseline: "middle", lineHeight: 20, fontFamily: d }, unSelectedColor: "#bfbfbf", titleStyle: { fill: "#333", textBaseline: "top", textAlign: "start", fontFamily: d }, flipPage: !0 }, M = { pixelRatio: null, defaultColor: "#1890FF", padding: [20, 20, 95, 80], fontFamily: d, colors: ["#5B8FF9", "#5AD8A6", "#5D7092", "#F6BD16", "#E8684A", "#6DC8EC", "#9270CA", "#FF9D4D", "#269A99", "#FF99C3"], colors_20: ["#5B8FF9", "#BDD2FD", "#5AD8A6", "#BDEFDB", "#5D7092", "#C2C8D5", "#F6BD16", "#FBE5A2", "#E8684A", "#F6C3B7", "#6DC8EC", "#B6E3F5", "#9270CA", "#D3C6EA", "#FF9D4D", "#FFD8B8", "#269A99", "#AAD8D8", "#FF99C3", "#FFD6E7"], shapes: { point: ["hollowCircle", "hollowSquare", "hollowDiamond", "hollowBowtie", "hollowTriangle", "hollowHexagon", "cross", "tick", "plus", "hyphen", "line"], line: ["line", "dash", "dot"], area: ["area"] }, sizes: [1, 10], opacities: [.1, .9], backgroundStyle: { fill: "rgba(255,255,255,0)" }, axis: { top: a.deepMix({}, b, { position: "top", grid: null }), bottom: a.deepMix({}, b, { position: "bottom", grid: null }), left: a.deepMix({}, b, { position: "left", label: { offset: 8 }, line: null, tickLine: null }), right: a.deepMix({}, b, { position: "right", label: { offset: 8 }, line: null, tickLine: null }), circle: a.deepMix({}, b, { label: { offset: 8, textStyle: { textBaseline: "alphabetic" } } }), radius: a.deepMix({}, b, { label: { offset: 12 }, gridType: "arc" }), helix: a.deepMix({}, b, { label: null, grid: null }) }, label: { offset: 20, textStyle: { fill: "#545454", fontSize: 12, textBaseline: "middle", fontFamily: d } }, treemapLabels: { offset: 10, textStyle: { fill: "#fff", fontSize: 12, textBaseline: "top", fontStyle: "bold", fontFamily: d } }, innerLabels: { textStyle: { fill: "#fff", fontSize: 12, textBaseline: "middle", fontFamily: d } }, thetaLabels: { labelHeight: 14, offset: 30, labelLine: { lineWidth: 1 } }, defaultLegendPosition: "bottom", legend: { right: a.deepMix({}, w, { position: "right", layout: "vertical", itemMarginBottom: 8, textStyle: { lineHeight: 0 } }), left: a.deepMix({}, w, { position: "left", layout: "vertical", itemMarginBottom: 8 }), top: a.deepMix({}, w, { position: "top", layout: "horizontal", itemDistance: 10 }), bottom: a.deepMix({}, w, { position: "bottom", layout: "horizontal", itemDistance: 10 }), html: { position: "bottom", layout: "horizontal", showTitle: !1, unSelectedColor: "#bfbfbf", backgroundStyle: { height: "auto", width: "auto", position: "absolute", overflow: "auto", fontSize: "12px", fontFamily: d, lineHeight: "20px", color: "#8C8C8C" }, titleStyle: { marginBottom: "4px" }, listStyle: { listStyleType: "none", margin: 0, padding: 0 }, itemStyle: { cursor: "pointer", marginBottom: "5px", marginRight: "24px" }, markerStyle: { width: "9px", height: "9px", borderRadius: "50%", display: "inline-block", marginRight: "8px", verticalAlign: "middle" } }, margin: [0, 24, 24, 24], legendMargin: 24 }, tooltip: (r = { useHtml: !0 }, r["g2-tooltip"] = { position: "absolute", display: "none", zIndex: 8, transition: "visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)", backgroundColor: "rgba(255, 255, 255, 0.9)", boxShadow: "0px 0px 10px #aeaeae", borderRadius: "3px", color: "rgb(87, 87, 87)", fontSize: "12px", fontFamily: d, lineHeight: "20px", padding: "10px 10px 6px 10px" }, r["g2-tooltip-title"] = { marginBottom: "4px" }, r["g2-tooltip-list"] = { margin: 0, listStyleType: "none", padding: 0 }, r["g2-tooltip-list-item"] = { marginBottom: "4px", listStyleType: "none", padding: 0, marginTop: 0, marginLeft: 0, marginRight: 0 }, r["g2-tooltip-marker"] = { width: "5px", height: "5px", borderRadius: "50%", display: "inline-block", marginRight: "8px" }, r["g2-tooltip-value"] = { display: "inline-block", float: "right", marginLeft: "30px" }, r), tooltipMarker: { symbol: function (t, e, n) { return [["M", t, e], ["m", -n, 0], ["a", n, n, 0, 1, 0, 2 * n, 0], ["a", n, n, 0, 1, 0, 2 * -n, 0]] }, stroke: "#fff", shadowBlur: 10, shadowOffsetX: 0, shadowOffSetY: 0, shadowColor: "rgba(0,0,0,0.09)", lineWidth: 2, radius: 4 }, tooltipCrosshairsRect: { type: "rect", rectStyle: { fill: "#CCD6EC", opacity: .3 } }, tooltipCrosshairsLine: { lineStyle: { stroke: "rgba(0, 0, 0, 0.25)", lineWidth: 1 } }, annotation: { line: { line: { style: { stroke: "rgba(0, 0, 0, .65)", lineDash: [2, 2], lineWidth: 1 } }, text: { position: "start", autoRotate: !0, style: { fill: "rgba(0, 0, 0, .45)", fontSize: 12, textAlign: "start", fontFamily: d, textBaseline: "bottom" } } }, text: { top: !0, style: { fill: "rgba(0,0,0,.5)", fontSize: 12, textBaseline: "middle", textAlign: "start", fontFamily: d } }, region: { top: !1, style: { lineWidth: 0, fill: "#000", fillOpacity: .04 } }, html: { alignX: "middle", alignY: "middle" }, dataRegion: { region: { style: { lineWidth: 0, fill: "#000000", opacity: .04 } }, text: { style: { textAlign: "center", textBaseline: "bottom", fontSize: 12, fill: "rgba(0, 0, 0, .65)" } } }, dataMarker: { top: !0, direction: "upward", autoAdjust: !0, text: { display: !0, style: { fill: "rgba(0, 0, 0, .65)", opacity: 1, fontSize: 12, textAlign: "start" } }, line: { display: !0, lineLength: 20, style: { stroke: "#A3B1BF", lineWidth: 1 } }, point: { display: !0, style: { r: 3, fill: "#FFFFFF", stroke: "#1890FF", lineWidth: 2 } } } }, shape: { area: { area: { default: g.area, active: v }, smooth: { default: g.area, active: v }, line: { default: g.hollowArea, active: y }, smoothLine: { default: g.hollowArea, active: y } }, box: { box: { default: g.box, active: y } }, edge: { line: { default: g.edge, active: y }, vhv: { default: g.edge, active: y }, smooth: { default: g.edge, active: y }, arc: { default: g.edge, active: y } }, interval: { rect: { default: g.interval, active: m }, hollowInterval: { default: g.hollowInterval, active: y }, line: { default: g.hollowInterval, active: y }, tick: { default: g.hollowInterval, active: y }, funnel: { default: g.interval, active: m }, pyramid: { default: g.interval, active: m }, "top-line": { default: g.interval, active: m } }, kline: { kline: { default: g.kline, active: v } }, line: { line: { default: g.line, active: y }, dot: { default: g.line, active: y }, dash: { default: g.line, active: y }, smooth: { default: g.line, active: y }, hv: { default: g.line, active: y }, vh: { default: g.line, active: y }, hvh: { default: g.line, active: y }, vhv: { default: g.line, active: y } }, polygon: { polygon: { default: g.polygon, active: m }, hollow: { default: g.hollowPolygon, active: y } }, point: { circle: { default: g.point, active: x }, square: { default: g.point, active: x }, bowtie: { default: g.point, active: x }, diamond: { default: g.point, active: x }, hexagon: { default: g.point, active: x }, triangle: { default: g.point, active: x }, triangleDown: { default: g.point, active: x }, hollowCircle: { default: g.hollowPoint, active: _ }, hollowSquare: { default: g.hollowPoint, active: _ }, hollowBowtie: { default: g.hollowPoint, active: _ }, hollowDiamond: { default: g.hollowPoint, active: _ }, hollowHexagon: { default: g.hollowPoint, active: _ }, hollowTriangle: { default: g.hollowPoint, active: _ }, hollowTriangleDown: { default: g.hollowPoint, active: _ }, cross: { default: g.hollowPoint, active: _ }, tick: { default: g.hollowPoint, active: _ }, plus: { default: g.hollowPoint, active: _ }, hyphen: { default: g.hollowPoint, active: _ }, line: { default: g.hollowPoint, active: _ }, rect: { default: g.point, active: x }, image: { default: g.point, active: x }, path: { default: g.point, active: x } }, text: { text: { default: g.text, active: function (t) { return { stroke: t.fill || t.fillStyle, strokeOpacity: 1, lineWidth: 1 } } } } } }; f("default", M); var S = { version: c.a, renderer: "canvas", width: 640, height: 480, pixelRatio: null, animate: !0, widthRatio: { column: .5, rose: .9999999, multiplePie: 1 / 1.3 }, theme: p("default"), setTheme: function (t) { var e = {}; e = a.isObject(t) ? t : p(t) ? p(t) : p("default"), a.deepMix(S.theme, e) } }, C = S, O = S.setTheme, k = S.version, P = n(22), A = function (t) { function e(e) { var n = t.call(this) || this; return n.cfg = {}, n.destroyed = !1, n.cfg = Object(u.__assign)({ visible: !0 }, e), n } return Object(u.__extends)(e, t), e.prototype.get = function (t) { return this.cfg[t] }, e.prototype.set = function (t, e) { return this.cfg[t] = e, this }, e.prototype.show = function () { this.get("visible") || (this.set("visible", !0), this.changeVisible(!0)) }, e.prototype.hide = function () { this.get("visible") && (this.set("visible", !1), this.changeVisible(!1)) }, e.prototype.destroy = function () { this.cfg = {}, this.off(), this.destroyed = !0 }, e }(n.n(P).a), L = n(4), T = n(18); function D(t) { var e, n = t.start, i = t.end, r = t.width, a = t.height; if (t.isPolar) { var s = t.startAngle, u = t.endAngle, l = t.getCenter(), c = t.getRadius(); (e = new o.Shapes.Fan({ attrs: { x: l.x, y: l.y, rs: 0, re: c + 200, startAngle: s, endAngle: s } })).endState = { endAngle: u } } else e = new o.Shapes.Rect({ attrs: { x: n.x - 200, y: i.y - 200, width: t.isTransposed ? r + 400 : 0, height: t.isTransposed ? 0 : a + 400 } }), t.isTransposed ? e.endState = { height: a + 400 } : e.endState = { width: r + 400 }; return e.set("isClip", !0), e } function j(t, e, n) { var i; t.apply(e); var r = e[0], o = e[1]; if ("x" === n) { t.transform([["t", -r, -o], ["s", .01, 1], ["t", r, o]]); var a = t.getMatrix(); i = L.mat3.transform(a, [["t", -r, -o], ["s", 100, 1], ["t", r, o]]) } else if ("y" === n) { t.transform([["t", -r, -o], ["s", 1, .01], ["t", r, o]]); a = t.getMatrix(); i = L.mat3.transform(a, [["t", -r, -o], ["s", 1, 100], ["t", r, o]]) } else if ("xy" === n) { t.transform([["t", -r, -o], ["s", .01, .01], ["t", r, o]]); a = t.getMatrix(); i = L.mat3.transform(a, [["t", -r, -o], ["s", 100, 100], ["t", r, o]]) } return i } function I(t, e, n) { var i = t.id, r = function (t, e, n) { return { delay: a.isFunction(t.delay) ? t.delay(e, n) : t.delay, easing: a.isFunction(t.easing) ? t.easing(e, n) : t.easing, duration: a.isFunction(t.duration) ? t.duration(e, n) : t.duration, callback: t.callback } }(n, t.get("index"), i), o = r.easing, s = r.delay, u = r.duration, l = r.callback; t.animate(e, u, o, l, s) } function B(t, e, n, i, r) { var a, s, u = function (t) { return { start: t.start, end: t.end, width: t.getWidth(), height: t.getWidth() } }(n), l = u.start, c = u.end, h = u.width, p = u.height, f = new o.Shapes.Rect({ attrs: { x: l.x, y: c.y, width: h, height: p } }); "y" === r ? (a = l.x + h / 2, s = i.y < l.y ? i.y : l.y) : "x" === r ? (a = i.x > l.x ? i.x : l.x, s = l.y + p / 2) : "xy" === r && (n.isPolar ? (a = n.getCenter().x, s = n.getCenter().y) : (a = (l.x + c.x) / 2, s = (l.y + c.y) / 2)); var d = j(f, [a, s, 1], r); f.set("isClip", !0), f.set("canvas", t.get("canvas")), t.attr("clip", f), e.callback = function () { t.attr("clip", null), f.remove() }, I(f, { matrix: d }, e) } function E(t, e) { var n, i, r = function (t) { if (a.isEmpty(t)) return null; var e = t[0].x, n = t[0].x, i = t[0].y, r = t[0].y; return a.each(t, (function (t) { e = e > t.x ? t.x : e, n = n < t.x ? t.x : n, i = i > t.y ? t.y : i, r = r < t.y ? t.y : r })), { minX: e, maxX: n, minY: i, maxY: r, centerX: (e + n) / 2, centerY: (i + r) / 2 } }(t.points || t.get("origin").points), o = e.startAngle, s = e.endAngle - o; return e.isTransposed ? (n = r.maxY * s, i = r.minY * s) : (n = r.maxX * s, i = r.minX * s), { startAngle: i += o, endAngle: n += o } } function F(t, e) { var n = t.getBBox(), i = t.get("origin").points; I(t, { matrix: j(t, [(n.minX + n.maxX) / 2, i[0].y - i[1].y <= 0 ? n.maxY : n.minY, 1], "y") }, e) } function R(t, e) { var n = t.getBBox(), i = t.get("origin").points; I(t, { matrix: j(t, [i[0].y - i[1].y > 0 ? n.maxX : n.minX, (n.minY + n.maxY) / 2, 1], "x") }, e) } function z(t, e, n) { var i, r; if (n.isPolar && "point" !== t.name) i = n.getCenter().x, r = n.getCenter().y; else { var o = t.getBBox(); i = (o.minX + o.maxX) / 2, r = (o.minY + o.maxY) / 2 } I(t, { matrix: j(t, [i, r, 1], "xy") }, e) } function N(t, e) { if ("path" === t.get("type")) { var n = T.c(t.attr("path")); t.attr("path", [n[0]]), I(t, { path: n }, e) } } function Y(t, e, n, i, r) { var o, a = D(n), s = t.get("canvas"); i ? (a.attr("startAngle", i), a.attr("endAngle", i), o = { endAngle: r }) : o = a.endState, a.set("canvas", s), t.attr("clip", a), t.setSilent("animating", !0), e.callback = function () { t && !t.get("destroyed") && (t.attr("clip", null), t.setSilent("cacheShape", null), t.setSilent("animating", !1), a.remove()) }, I(a, o, e) } function H(t, e) { var n = a.isNil(t.attr("fillOpacity")) ? 1 : t.attr("fillOpacity"), i = a.isNil(t.attr("strokeOpacity")) ? 1 : t.attr("strokeOpacity"); t.attr("fillOpacity", 0), t.attr("strokeOpacity", 0), I(t, { fillOpacity: n, strokeOpacity: i }, e) } function G(t, e, n) { var i = E(t, n); Y(t, e, n, i.startAngle, i.endAngle) } var W = { enter: { clipIn: Y, zoomIn: z, pathIn: N, scaleInY: F, scaleInX: R, fanIn: G, fadeIn: H }, leave: { lineWidthOut: function (t, e) { e.callback = function () { return t.remove() }, I(t, { lineWidth: 0, opacity: 0 }, e) }, zoomOut: function (t, e, n) { var i, r; if (n.isPolar && "point" !== t.name) i = n.getCenter().x, r = n.getCenter().y; else { var o = t.getBBox(); i = (o.minX + o.maxX) / 2, r = (o.minY + o.maxY) / 2 } var a = [i, r, 1]; t.apply(a); var s = { transform: [["t", -i, -r], ["s", .01, .01], ["t", i, r]] }; e.callback = function () { return t.remove() }, I(t, s, e) }, pathOut: function (t, e) { if ("path" === t.get("type")) { var n = { path: [T.c(t.attr("path"))[0]] }; e.callback = function () { return t.remove() }, I(t, n, e) } }, fadeOut: function (t, e) { e.callback = function () { return t.remove() }, I(t, { fillOpacity: 0, strokeOpacity: 0 }, e) }, fadeIn: H }, appear: { clipIn: Y, zoomIn: z, pathIn: N, scaleInY: F, scaleInX: R, fanIn: G, fadeIn: H, groupWaveIn: function (t, e, n) { var i = D(n); i.set("canvas", t.get("canvas")), t.attr("clip", i), e.callback = function () { t.attr("clip", null), i.remove() }; var r = i.endState; I(i, r, e) }, groupScaleInX: function (t, e, n, i) { B(t, e, n, i, "x") }, groupScaleInY: function (t, e, n, i) { B(t, e, n, i, "y") }, groupScaleInXY: function (t, e, n, i) { B(t, e, n, i, "xy") } }, update: { fadeIn: H, fanIn: G } }; a.each(W, (function (t) { a.each(t, (function (t, e) { t.animationName = e })) })); var V = W, X = { appear: { duration: 450, easing: "easeQuadOut" }, update: { duration: 450, easing: "easeQuadInOut" }, enter: { duration: 400, easing: "easeQuadInOut", delay: 100 }, leave: { duration: 350, easing: "easeQuadIn" } }, q = { line: { appear: function () { return V.appear.groupWaveIn }, enter: function () { return V.enter.clipIn }, leave: function () { return V.leave.lineWidthOut } }, path: { appear: function () { return V.appear.groupWaveIn }, enter: function () { return V.enter.clipIn }, leave: function () { return V.leave.lineWidthOut } }, area: { appear: function () { return V.appear.groupWaveIn }, enter: function () { return V.enter.fadeIn }, leave: function () { return V.leave.fadeOut }, cfg: { appear: { duration: 500, easing: "easeQuadOut" }, update: { duration: 450, easing: "easeQuadInOut" }, enter: { duration: 600, delay: 150, easing: "easeQuadInOut" }, leave: { easing: "easeQuadOut", duration: 350 } } }, polygon: { appear: function () { return V.appear.fadeIn }, enter: function () { return V.enter.zoomIn }, leave: function () { return V.leave.zoomOut } }, edge: { appear: function () { return V.appear.pathIn }, enter: function () { return V.enter.pathIn }, leave: function () { return V.leave.pathOut } }, interval: { appear: function (t) { var e; return t.isPolar ? (e = V.appear.groupScaleInXY, t.isTransposed && (e = V.appear.groupWaveIn)) : e = t.isTransposed ? V.appear.groupScaleInX : V.appear.groupScaleInY, e }, enter: function (t) { return t.isRect || t.isTransposed || "theta" === t.type ? V.enter.fadeIn : V.enter.zoomIn }, leave: function () { return V.leave.fadeOut }, update: function (t) { if ("theta" === t.type) return V.update.fanIn } }, point: { appear: function () { return V.appear.zoomIn }, enter: function () { return V.enter.zoomIn }, leave: function () { return V.leave.zoomOut } }, text: { appear: function () { return V.appear.zoomIn }, enter: function () { return V.enter.zoomIn }, leave: function () { return V.leave.zoomOut } }, kline: { appear: function () { return V.appear.groupWaveIn }, enter: function () { return V.enter.clipIn }, leave: function () { return V.leave.lineWidthOut } }, box: { appear: function () { return V.appear.groupWaveIn }, enter: function () { return V.enter.clipIn }, leave: function () { return V.leave.lineWidthOut } }, heatmap: null, label: { appear: function () { return V.appear.fadeIn }, enter: function () { return V.enter.fadeIn }, leave: function () { return V.leave.fadeOut }, cfg: { appear: { duration: 900 } } }, "axis-label": { enter: function () { return V.appear.fadeIn }, leave: function () { return V.leave.fadeOut }, update: function (t) { if (t.isPolar) return V.appear.fadeIn } }, "axis-ticks": { enter: function () { return V.appear.fadeIn }, leave: function () { return V.leave.fadeOut }, update: function (t) { if (t.isPolar) return V.appear.fadeIn } }, "axis-grid": { enter: function () { return V.appear.fadeIn }, leave: function () { return V.leave.fadeOut }, update: function (t) { if (t.isPolar) return V.appear.fadeIn } }, "axis-grid-rect": { enter: function () { return V.appear.fadeIn }, leave: function () { return V.leave.fadeOut }, update: function () { return V.leave.fadeIn } } }; q.Action = V, q.defaultCfg = X, q.getAnimation = function (t, e, n) { var i = this[t]; if (i) { var r = i[n]; if (a.isFunction(r)) return r(e) } return !1 }, q.getAnimateCfg = function (t, e) { var n = X[e]; return this[t] && this[t].cfg && this[t].cfg[e] ? a.deepMix({}, n, this[t].cfg[e]) : n }, q.registerAnimation = function (t, e, n) { this.Action[t] || (this.Action[t] = {}), this.Action[t][e] = n }; var U = q; function Z(t, e) { var n = []; if (!1 === t.get("animate")) return []; var i = t.get("children"); return a.each(i, (function (t) { if (t.isGroup) n = n.concat(Z(t, e)); else if (t.isShape && t.id) { var i = t.id; (i = i.split("-")[0]) === e && n.push(t) } })), n } function Q(t, e, n, i) { return i ? U.Action[n][i] : U.getAnimation(t, e, n) } function $(t, e, n) { if (!1 === n || a.isObject(n) && !1 === n[e]) return null; var i = U.getAnimateCfg(t, e); return n && n[e] ? a.deepMix({}, i, n[e]) : i } var K = { execAnimation: function (t, e) { var n = e, i = t.get("panelGroup"), r = t.get("backgroundGroup"), o = t.get("id"), s = t.get("canvas"), u = s.get(o + "caches") || []; 0 === u.length && (n = !1); var l, c = Z(i, o), h = Z(r, o), p = c.concat(h); if (s.setSilent(o + "caches", function (t) { var e = {}; return a.each(t, (function (t) { if (t.id && !t.get("isClip")) { var n = t.id; e[n] = { id: n, type: t.get("type"), attrs: a.clone(t.attr()), name: t.name, index: t.get("index"), animateCfg: t.get("animateOptions"), coord: t.get("coord") } } })), e }(p)), n) l = function (t, e, n) { var i, r, o = !1, s = [], u = []; return a.each(e, (function (e) { var n = t[e.id]; n ? (e.setSilent("cacheShape", n), s.push(e), delete t[e.id]) : u.push(e) })), a.each(t, (function (t) { var e = t.name, s = t.coord, u = t.id, l = t.attrs, c = t.index, h = t.type; if (!(r = $(e, "leave", t.animateCfg))) return !0; if (i = Q(e, s, "leave", r.animation), a.isFunction(i)) { var p = n.addShape(h, { attrs: l, index: c }); if (p.id = u, p.name = e, s && "label" !== e) { var f = p.getMatrix(), d = L.mat3.multiply([], f, s.matrix); p.setMatrix(d) } o = !0, i(p, r, s) } })), a.each(s, (function (t) { var e = t.name; if (!(r = $(e, "update", t.get("animateOptions")))) return !0; var n = t.get("coord"), s = t.get("cacheShape").attrs; if (!a.isEqual(s, t.attr())) { if (i = Q(e, n, "update", r.animation), a.isFunction(i)) i(t, r, n); else { var u = a.clone(t.attr()); t.attr(s), t.animate(u, r.duration, r.easing, (function () { t.setSilent("cacheShape", null) })) } o = !0 } })), a.each(u, (function (t) { var e = t.name, n = t.get("coord"); if (!(r = $(e, "enter", t.get("animateOptions")))) return !0; i = Q(e, n, "enter", r.animation), a.isFunction(i) && (i(t, r, n), o = !0) })), o }(u, p, s); else { var f, d, g = t.get("elements"), v = t.get("coord"); a.each(g, (function (t) { var e = t.get("type"), n = t.get("animateOptions"); if (!1 !== n) { if (!(f = $(e, "appear", n))) return !0; if (d = Q(e, v, "appear", f.animation), a.isFunction(d)) if (0 === d.animationName.indexOf("group")) { var i = t.getYScale(), r = v.convertPoint({ x: 0, y: i.scale(t.getYMinValue()) }), s = t.get("container"); d && d(s, f, v, r) } else { var u = Z(t.get("container"), o); a.each(u, (function (t) { t.name === e ? d(t, f, v) : "label" === t.name && (f = $("label", "appear", null), d = Q(t.name, v, "appear", f.animation), a.isFunction(d) && d(t, f, v)) })) } } })), l = !0 } l || s.draw() } }, J = n(16), tt = n(13), et = function () { function t(t) { var e = t.xField, n = t.yField, i = t.adjustNames, r = void 0 === i ? ["x", "y"] : i; this.adjustNames = r, this.xField = e, this.yField = n } return t.prototype.isAdjust = function (t) { return this.adjustNames.indexOf(t) >= 0 }, t.prototype.getAdjustRange = function (t, e, n) { var i, r, o = this.yField, a = n.indexOf(e), s = n.length; return !o && this.isAdjust("y") ? (i = 0, r = 1) : s > 1 ? (i = n[0 === a ? 0 : a - 1], r = n[a === s - 1 ? s - 1 : a + 1], 0 !== a ? i += (e - i) / 2 : i -= (r - e) / 2, a !== s - 1 ? r -= (r - e) / 2 : r += (e - n[s - 2]) / 2) : (i = 0 === e ? 0 : e - .5, r = 0 === e ? 1 : e + .5), { pre: i, next: r } }, t.prototype.adjustData = function (t, e) { var n = this, i = this.getDimValues(e); a.each(t, (function (t, e) { a.each(i, (function (i, r) { n.adjustDim(r, i, t, e) })) })) }, t.prototype.groupData = function (t, e) { return a.each(t, (function (t) { void 0 === t[e] && (t[e] = 0) })), a.groupBy(t, e) }, t.prototype.adjustDim = function (t, e, n, i) { }, t.prototype.getDimValues = function (t) { var e = this.xField, n = this.yField, i = {}, r = []; if (e && this.isAdjust("x") && r.push(e), n && this.isAdjust("y") && r.push(n), r.forEach((function (e) { i[e] = a.valuesOfKey(t, e).sort((function (t, e) { return t - e })) })), !n && this.isAdjust("y")) { i.y = [0, 1] } return i }, t }(), nt = {}, it = function (t) { return nt[t.toLowerCase()] }, rt = function (t, e) { if (it(t)) throw new Error("Adjust type '" + t + "' existed."); nt[t.toLowerCase()] = e }, ot = function (t) { function e(e) { var n = t.call(this, e) || this; n.cacheMap = {}, n.adjustDataArray = [], n.mergeData = []; var i = e.marginRatio, r = void 0 === i ? .5 : i, o = e.dodgeRatio, a = void 0 === o ? .5 : o, s = e.dodgeBy; return n.marginRatio = r, n.dodgeRatio = a, n.dodgeBy = s, n } return Object(u.__extends)(e, t), e.prototype.process = function (t) { var e = a.clone(t), n = a.flatten(e), i = this.dodgeBy, r = i ? a.group(n, i) : e; return this.cacheMap = {}, this.adjustDataArray = r, this.mergeData = n, this.adjustData(r, n), this.adjustDataArray = [], this.mergeData = [], e }, e.prototype.adjustDim = function (t, e, n, i) { var r = this, o = this.getDistribution(t), s = this.groupData(n, t); return a.each(s, (function (n, s) { var u; u = 1 === e.length ? { pre: e[0] - 1, next: e[0] + 1 } : r.getAdjustRange(t, parseFloat(s), e), a.each(n, (function (e) { var n = e[t], a = o[n], s = a.indexOf(i); e[t] = r.getDodgeOffset(u, s, a.length) })) })), [] }, e.prototype.getDodgeOffset = function (t, e, n) { var i = this.dodgeRatio, r = this.marginRatio, o = t.pre, a = t.next, s = a - o, u = s * i / n, l = r * u; return (o + a) / 2 + (.5 * (s - n * u - (n - 1) * l) + ((e + 1) * u + e * l) - .5 * u - .5 * s) }, e.prototype.getDistribution = function (t) { var e = this.adjustDataArray, n = this.cacheMap, i = n[t]; return i || (i = {}, a.each(e, (function (e, n) { var r = a.valuesOfKey(e, t); r.length || r.push(0), a.each(r, (function (t) { i[t] || (i[t] = []), i[t].push(n) })) })), n[t] = i), i }, e }(et); var at = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(u.__extends)(e, t), e.prototype.process = function (t) { var e = a.clone(t), n = a.flatten(e); return this.adjustData(e, n), e }, e.prototype.adjustDim = function (t, e, n) { var i = this, r = this.groupData(n, t); return a.each(r, (function (n, r) { return i.adjustGroup(n, t, parseFloat(r), e) })) }, e.prototype.getAdjustOffset = function (t) { var e, n = t.pre, i = t.next, r = .05 * (i - n); return (i - r - (e = n + r)) * Math.random() + e }, e.prototype.adjustGroup = function (t, e, n, i) { var r = this, o = this.getAdjustRange(e, n, i); return a.each(t, (function (t) { t[e] = r.getAdjustOffset(o) })), t }, e }(et), st = a.Cache, ut = function (t) { function e(e) { var n = t.call(this, e) || this, i = e.adjustNames, r = void 0 === i ? ["y"] : i, o = e.height, a = void 0 === o ? NaN : o, s = e.size, u = void 0 === s ? 10 : s, l = e.reverseOrder, c = void 0 !== l && l; return n.adjustNames = r, n.height = a, n.size = u, n.reverseOrder = c, n } return Object(u.__extends)(e, t), e.prototype.process = function (t) { var e = this.yField, n = this.reverseOrder, i = e ? this.processStack(t) : this.processOneDimStack(t); return n ? this.reverse(i) : i }, e.prototype.reverse = function (t) { return t.slice(0).reverse() }, e.prototype.processStack = function (t) { var e = this.xField, n = this.yField, i = this.reverseOrder ? this.reverse(t) : t, r = new st, o = new st; return i.map((function (t) { return t.map((function (t) { var i, s = a.get(t, e, 0), l = a.get(t, n), c = s.toString(); if (l = a.isArray(l) ? l[1] : l, !a.isNil(l)) { var h = l >= 0 ? r : o; h.has(c) || h.set(c, 0); var p = h.get(c), f = l + p; return h.set(c, f), Object(u.__assign)(Object(u.__assign)({}, t), ((i = {})[n] = [p, f], i)) } return t })) })) }, e.prototype.processOneDimStack = function (t) { var e = this, n = this.xField, i = this.height, r = this.reverseOrder, o = r ? this.reverse(t) : t, a = new st; return o.map((function (t) { return t.map((function (t) { var r, o = e.size, s = t[n], l = 2 * o / i; a.has(s) || a.set(s, l / 2); var c = a.get(s); return a.set(s, c + l), Object(u.__assign)(Object(u.__assign)({}, t), ((r = {}).y = c, r)) })) })) }, e }(et), lt = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(u.__extends)(e, t), e.prototype.process = function (t) { var e = a.flatten(t), n = this.xField, i = this.yField, r = this.getXValuesMaxMap(e), o = Math.max.apply(Math, Object.keys(r).map((function (t) { return r[t] }))); return a.map(t, (function (t) { return a.map(t, (function (t) { var e, s, l = t[i], c = t[n]; if (a.isArray(l)) { var h = (o - r[c]) / 2; return Object(u.__assign)(Object(u.__assign)({}, t), ((e = {})[i] = a.map(l, (function (t) { return h + t })), e)) } var p = (o - l) / 2; return Object(u.__assign)(Object(u.__assign)({}, t), ((s = {})[i] = [p, l + p], s)) })) })) }, e.prototype.getXValuesMaxMap = function (t) { var e = this, n = this.xField, i = this.yField, r = a.groupBy(t, (function (t) { return t[n] })); return a.mapValues(r, (function (t) { return e.getDimMaxValue(t, i) })) }, e.prototype.getDimMaxValue = function (t, e) { var n = a.map(t, (function (t) { return a.get(t, e, []) })), i = a.flatten(n); return Math.max.apply(Math, i) }, e }(et); rt("Dodge", ot), rt("Jitter", at), rt("Stack", ut), rt("Symmetric", lt); var ct = n(24), ht = function (t, e) { return Object(a.isString)(e) ? e : t.invert(t.scale(e)) }, pt = function () { function t(t) { this.names = [], this.scales = [], this.linear = !1, this.values = [], this.callback = function () { return [] }, this._parseCfg(t) } return t.prototype.mapping = function () { for (var t = this, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; var i = e.map((function (e, n) { return t._toOriginParam(e, t.scales[n]) })); return this.callback.apply(this, i) }, t.prototype.getLinearValue = function (t) { var e = this.values.length - 1, n = Math.floor(e * t), i = e * t - n, r = this.values[n]; return r + ((n === e ? r : this.values[n + 1]) - r) * i }, t.prototype.getNames = function () { for (var t = this.scales, e = this.names, n = Math.min(t.length, e.length), i = [], r = 0; r < n; r += 1)i.push(e[r]); return i }, t.prototype.getFields = function () { return this.scales.map((function (t) { return t.field })) }, t.prototype.getScale = function (t) { return this.scales[this.names.indexOf(t)] }, t.prototype.defaultCallback = function () { for (var t = this, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return 0 === e.length ? this.values : e.map((function (e, n) { var i = t.scales[n]; return "identity" === i.type ? i.values[0] : t._getAttributeValue(i, e) })) }, t.prototype._parseCfg = function (t) { var e = this, n = t.type, i = void 0 === n ? "base" : n, r = t.names, o = void 0 === r ? [] : r, s = t.scales, u = void 0 === s ? [] : s, l = t.values, c = void 0 === l ? [] : l, h = t.callback; this.type = i, this.scales = u, this.values = c, this.names = o, this.callback = function () { for (var t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; if (h) { var i = h.apply(void 0, t); if (!Object(a.isNil)(i)) return [i] } return e.defaultCallback.apply(e, t) } }, t.prototype._getAttributeValue = function (t, e) { if (t.isCategory && !this.linear) { var n = t.translate(e); return this.values[n % this.values.length] } var i = t.scale(e); return this.getLinearValue(i) }, t.prototype._toOriginParam = function (t, e) { return e.isLinear ? t : Object(a.isArray)(t) ? t.map((function (t) { return ht(e, t) })) : ht(e, t) }, t }(), ft = function (t) { function e(e) { var n = t.call(this, e) || this; return n.type = "color", n.names = ["color"], Object(a.isString)(n.values) && (n.linear = !0), n.gradient = J.default.gradient(n.values), n } return Object(u.__extends)(e, t), e.prototype.getLinearValue = function (t) { return this.gradient(t) }, e }(pt), dt = function (t) { function e(e) { var n = t.call(this, e) || this; return n.type = "opacity", n.names = ["opacity"], n } return Object(u.__extends)(e, t), e }(pt), gt = function (t) { function e(e) { var n = t.call(this, e) || this; return n.names = ["x", "y"], n.type = "position", n } return Object(u.__extends)(e, t), e.prototype.mapping = function (t, e) { var n = this.scales, i = n[0], r = n[1]; return Object(a.isNil)(t) || Object(a.isNil)(e) ? [] : [Object(a.isArray)(t) ? t.map((function (t) { return i.scale(t) })) : i.scale(t), Object(a.isArray)(e) ? e.map((function (t) { return r.scale(t) })) : r.scale(e)] }, e }(pt), vt = function (t) { function e(e) { var n = t.call(this, e) || this; return n.type = "shape", n.names = ["shape"], n } return Object(u.__extends)(e, t), e.prototype.getLinearValue = function (t) { var e = Math.round((this.values.length - 1) * t); return this.values[e] }, e }(pt), yt = function (t) { function e(e) { var n = t.call(this, e) || this; return n.type = "size", n.names = ["size"], n } return Object(u.__extends)(e, t), e }(pt), mt = {}, xt = function (t) { return mt[t.toLowerCase()] }, _t = function (t, e) { if (xt(t)) throw new Error("Attribute type '" + t + "' existed."); mt[t.toLowerCase()] = e }; _t("Color", ft), _t("Opacity", dt), _t("Position", gt), _t("Shape", vt), _t("Size", yt); var bt, wt = /^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/; !function (t) { t.Linear = "linear", t.Cat = "cat", t.Time = "time" }(bt || (bt = {})); var Mt = function () { function t(t) { this.defs = {}, this.defs = t } return t.prototype.createScale = function (t, e) { var n, i = this.defs[t]; if (!e || !e.length) { if (i && i.type) n = new (Object(tt.getScale)(i.type))(i); else n = new (Object(tt.getScale)("identity"))({ field: t.toString(), values: [t] }); return n } var r = a.firstValue(e, t); if (a.isNumber(t) || a.isNil(r) && !i) { n = new (Object(tt.getScale)("identity"))({ field: t.toString(), values: [t] }) } else { var o = a.get(i, "type", this._getDefaultType(t, e)), s = this._getScaleCfg(o, t, e); i && a.mix(s, i), n = new (Object(tt.getScale)(o))(s) } return n }, t.prototype._getDefaultType = function (t, e) { var n = bt.Linear, i = a.firstValue(e, t); return a.isArray(i) && (i = i[0]), wt.test(i) ? n = bt.Time : a.isString(i) && (n = bt.Cat), n }, t.prototype._getScaleCfg = function (t, e, n) { var i = a.valuesOfKey(n, e), r = { field: e, values: i }; if ("cat" !== t && "timeCat" !== t && "time" !== t) { var o = a.getRange(i), s = o.min, u = o.max; r.min = s, r.max = u, r.nice = !0 } return "time" === t && (r.nice = !1), r }, t }(), St = function () { function t(t) { void 0 === t && (t = {}), this.type = "rect", this.actions = [], this.cfg = {}, this.options = {}, a.mix(this, t), this.options = t } return t.prototype.reset = function (t) { return this.type = t.type || "rect", this.actions = t.actions || [], this.cfg = t.cfg, this.options.type = this.type, this.options.actions = this.actions, this.options.cfg = this.cfg, this }, t.prototype.createCoord = function (t, e) { var n, i, r = this.type, o = this.cfg, a = Object(u.__assign)({ start: t, end: e }, o); return "theta" === r ? (n = Object(ct.getCoordinate)("polar"), this._hasAction("transpose") || this.transpose(), (i = new n(a)).type = r) : i = new (n = Object(ct.getCoordinate)(r))(a), this._execActions(i), i }, t.prototype.rotate = function (t) { var e = t * Math.PI / 180; return this.actions.push(["rotate", e]), this }, t.prototype.reflect = function (t) { return void 0 === t && (t = "y"), this.actions.push(["reflect", t]), this }, t.prototype.scale = function (t, e) { return this.actions.push(["scale", t, e]), this }, t.prototype.transpose = function () { return this.actions.push(["transpose"]), this }, t.prototype._execActions = function (t) { a.each(this.actions, (function (e) { var n = e[0]; t[n](e[1], e[2]) })) }, t.prototype._hasAction = function (t) { var e = this.actions, n = !1; return a.each(e, (function (e) { if (t === e[0]) return n = !0, !1 })), n }, t }(), Ct = n(12), Ot = function () { function t(t) { this.options = [], this.annotations = [], a.assign(this, t) } return t.prototype.add = function (t, e, n) { void 0 === n && (n = !0); var i = a.upperFirst(t); return Ct.Annotation[i] ? this.options.push(Object(u.__assign)({ top: n, type: t }, e)) : console.error("Annotation " + t + " not exist."), this }, t.prototype.get = function (t) { return this.annotations[t] }, t.prototype.render = function (t) { var e = this; this.coord = t; var n = this.view, i = n && n.get("filteredData"); this.createAnnotations(), a.each(this.annotations, (function (n) { n.get("top") ? n.render(t, e.frontgroundGroup, i) : n.render(t, e.backgroundGroup, i) })) }, t.prototype.changeVisible = function (t) { a.each(this.annotations, (function (e) { e.changeVisible(t) })) }, t.prototype.clear = function () { this.reset(), this.options = [], this.backgroundGroup && this.backgroundGroup.remove(), this.frontgroundGroup && this.frontgroundGroup.remove() }, t.prototype.reset = function () { a.each(this.annotations, (function (t) { t.clear() })), this.annotations = [] }, t.prototype.repaint = function () { var t = this; if (!this.coord || !this.view) throw new Error("need render first"); var e = this.coord, n = this.view.get("filteredData"); a.each(this.annotations, (function (i) { i.clear(), i.get("top") ? i.render(e, t.frontgroundGroup, n) : i.render(e, t.backgroundGroup, n) })), this.view.get("canvas").draw() }, t.prototype.createAnnotations = function () { var t = this; a.each(this.options, (function (e) { var n = e.type, i = e.top, r = Object(u.__rest)(e, ["type", "top"]), o = new (Ct.Annotation[a.upperFirst(n)])(a.deepMix({}, Object(u.__assign)({ xScales: t.xScales, yScales: t.yScales }, a.get(t.theme, "annotation." + n) ? t.theme.annotation[n] : {}), r)); o.set("top", i), t.annotations.push(o) })) }, t }(), kt = n(25); function Pt(t, e) { var n = t.getCenter(); return Math.sqrt(Math.pow(e.x - n.x, 2) + Math.pow(e.y - n.y, 2)) } function At(t, e) { for (var n = [t[0]], i = 1, r = t.length; i < r; i += 2) { var o = e.convertPoint({ x: t[i], y: t[i + 1] }); n.push(o.x, o.y) } return n } function Lt(t, e, n) { for (var i = !!e, r = [], o = 0, a = t.length; o < a; o += 2)r.push([t[o], t[o + 1]]); var s, u, l, c = function (t, e, n, i) { var r, o, a, s, u = [], l = !!i; if (l) { a = [1 / 0, 1 / 0], s = [-1 / 0, -1 / 0]; for (var c = 0, h = t.length; c < h; c++) { var p = t[c]; a = L.vec2.min([], a, p), s = L.vec2.max([], s, p) } a = L.vec2.min([], a, i[0]), s = L.vec2.max([], s, i[1]) } c = 0; for (var f = t.length; c < f; c++) { p = t[c]; if (n) r = t[c ? c - 1 : f - 1], o = t[(c + 1) % f]; else { if (0 === c || c === f - 1) { u.push(p); continue } r = t[c - 1], o = t[c + 1] } var d = []; d = L.vec2.sub(d, o, r), d = L.vec2.scale(d, d, e); var g = L.vec2.distance(p, r), v = L.vec2.distance(p, o), y = g + v; 0 !== y && (g /= y, v /= y); var m = L.vec2.scale([], d, -g), x = L.vec2.scale([], d, v), _ = L.vec2.add([], p, m), b = L.vec2.add([], p, x); l && (_ = L.vec2.max([], _, a), _ = L.vec2.min([], _, s), b = L.vec2.max([], b, a), b = L.vec2.min([], b, s)), u.push(_), u.push(b) } return n && u.push(u.shift()), u }(r, .4, i, n), h = r.length, p = []; for (o = 0; o < h - 1; o++)s = c[2 * o], u = c[2 * o + 1], l = r[o + 1], p.push(["C", s[0], s[1], u[0], u[1], l[0], l[1]]); return i && (s = c[h], u = c[h + 1], l = r[0], p.push(["C", s[0], s[1], u[0], u[1], l[0], l[1]])), p } function Tt(t, e) { return function (t, e) { var n = []; if (t.length) { for (var i = 0, r = t.length; i < r; i += 1) { var o = t[i], a = 0 === i ? "M" : "L"; n.push([a, o.x, o.y]) } e && n.push(["Z"]) } return n }(t, e) } function Dt(t, e, n) { var i = [], r = t[0], o = null; if (t.length <= 2) return Tt(t, e); a.each(t, (function (t) { o && o.x === t.x && o.y === t.y || (i.push(t.x), i.push(t.y), o = t) })); var s = Lt(i, e, n || [[0, 0], [1, 1]]); return s.unshift(["M", r.x, r.y]), s } function jt(t, e) { var n = t.getCenter(); return Math.atan2(e.y - n.y, e.x - n.x) } function It(t, e) { var n, i, r, o = []; return a.each(e, (function (a, s) { switch (a[0].toLowerCase()) { case "m": case "c": case "q": o.push(At(a, t)); break; case "l": n = e[s - 1], i = a, r = t.isTransposed, (r ? n[n.length - 2] === i[1] : n[n.length - 1] === i[2]) ? o = o.concat(function (t, e, n) { var i = n.isTransposed, r = n.startAngle, o = n.endAngle, a = { x: t[1], y: t[2] }, s = { x: e[1], y: e[2] }, u = [], l = i ? "y" : "x", c = Math.abs(s[l] - a[l]) * (o - r), h = s[l] >= a[l] ? 1 : 0, p = c > Math.PI ? 1 : 0, f = n.convertPoint(s), d = Pt(n, f); if (d >= .5) if (c === 2 * Math.PI) { var g = { x: (s.x + a.x) / 2, y: (s.y + a.y) / 2 }, v = n.convertPoint(g); u.push(["A", d, d, 0, p, h, v.x, v.y]), u.push(["A", d, d, 0, p, h, f.x, f.y]) } else u.push(["A", d, d, 0, p, h, f.x, f.y]); return u }(n, i, t)) : o.push(At(a, t)); break; case "z": default: o.push(a) } })), function (t) { a.each(t, (function (e, n) { if ("a" === e[0].toLowerCase()) { var i = t[n - 1], r = t[n + 1]; r && "a" === r[0].toLowerCase() ? i && "l" === i[0].toLowerCase() && (i[0] = "M") : i && "a" === i[0].toLowerCase() && r && "l" === r[0].toLowerCase() && (r[0] = "M") } })) }(o), o } var Bt = { _coord: null, getCoord: function () { return this._coord }, parsePath: function (t, e) { var n = this._coord, i = T.b(t); return i = n.isPolar && !1 !== e ? It(n, i) : function (t, e) { var n = []; return a.each(e, (function (e) { switch (e[0].toLowerCase()) { case "m": case "l": case "c": n.push(At(e, t)); break; case "z": default: n.push(e) } })), n }(n, i) }, parsePoint: function (t) { return this._coord.convertPoint(t) }, parsePoints: function (t) { var e = this._coord; return t.map((function (t) { return e.convertPoint(t) })) }, draw: function () { } }, Et = { _theme: C.theme.shape, _coord: null, _getShapeStyleByState: function (t, e, n) { var i = this._theme, r = this.name; if (i && i[r] && i[r][t]) { var o = i[r][t][e]; return a.isFunction(o) && (o = o(n)), o } }, defaultShapeType: null, setCoord: function (t) { this._coord = t }, setTheme: function (t) { this._theme = t }, getShape: function (t) { var e = this[a.isArray(t) ? t[0] : t] || this[this.defaultShapeType]; return e._coord = this._coord, e }, getShapePoints: function (t, e) { var n = this.getShape(t); return n.getPoints ? n.getPoints(e) : this.getDefaultPoints(e) }, getDefaultPoints: function () { return [] }, getMarkerStyle: function (t, e) { var n = this.getShape(t); if (n.getMarkerStyle) { var i = n.getMarkerStyle(e), r = this._theme, o = n.name, s = this.name; return r && r[s] && r[s][o] && (i = a.mix({}, r[s][o].default, i)), i } }, getInactiveStyle: function (t, e) { var n = this.getShape(t); return n.getInactiveStyle ? n.getInactiveStyle(e) : this._getShapeStyleByState(n.name, "inactive", e) }, getActiveStyle: function (t, e) { var n = this.getShape(t); return n.getActiveStyle ? n.getActiveStyle(e) : this._getShapeStyleByState(n.name, "active", e) }, getSelectedStyle: function (t, e) { var n = this.getShape(t); return n.getSelectedStyle ? n.getSelectedStyle(e) : this._getShapeStyleByState(n.name, "selected", e) }, drawShape: function (t, e, n) { var i = this.getShape(t), r = i.name, o = this._theme, s = this.name; if (o && o[s] && o[s][r]) { var u = o[s][r].default; e.style = a.mix({}, u, e.style) } var l = i.draw(e, n); return l && (l.setSilent("origin", e.origin), l.id = e.yIndex ? e.id + e.yIndex : e.id, l.name = this.name), l } }, Ft = {}; function Rt(t, e) { var n = a.upperFirst(t), i = Object(u.__assign)(Object(u.__assign)(Object(u.__assign)({}, Et), e), { name: t }); return Ft[n] = i, i } function zt(t, e, n) { var i = a.upperFirst(t), r = Ft[i], o = Object(u.__assign)(Object(u.__assign)(Object(u.__assign)({}, Bt), n), { name: e }); return r[e] = o, o } function Nt(t) { var e = a.upperFirst(t); return Ft[e] } var Yt = ["cross", "tick", "plus", "hyphen", "line", "hollowCircle", "hollowSquare", "hollowDiamond", "hollowTriangle", "hollowTriangleDown", "hollowHexagon", "hollowBowtie"], Ht = function () { function t(t) { this.legends = []; var e = t.view; this.view = e, this.theme = e.get("theme") } return t.prototype.render = function () { var t = this; this.clear(); var e = this.options; if (a.isObject(e)) { if (e.custom) { var n = this.addCustomLegend(); this.legends.push(n) } else { var i = this.view.getElements(), r = []; a.each(i, (function (n) { var i = n.get("view"), o = n.getAttrsForLegend(); a.each(o, (function (o) { var s, u, l = o.type, c = o.getScale(l); if (c && c.field && "identity" !== c.type && (s = r, u = c, !a.find(s, (function (t) { var e = [].concat(t.values), n = [].concat(u.values); return t.type === u.type && t.field === u.field && a.isEqual(e.sort(), n.sort()) })))) { r.push(c); var h = i.getFilteredOutValues(c.field), p = t.addLegend(e, c, o, n, h); p && t.legends.push(p) } })) })) } this.alignLegends() } }, t.prototype.changeVisible = function (t) { a.each(this.legends, (function (t) { })) }, t.prototype.clear = function () { a.each(this.legends, (function (t) { t.destroy() })), this.legends = [], this.reset() }, t.prototype.reset = function () { this.init() }, t.prototype.init = function () { this.options = this.getLegendOptions(), this.panelRange = this.view.get("panelRange"), this.viewRange = this.view.get("viewRange"), this.container = this.view.get("frontgroundGroup") }, t.prototype.addLegend = function (t, e, n, i, r) { var o = e.field, a = t.fields && t.fields[o]; if (!1 !== a) { if (a && a.custom) return this.addCustomLegend(o); var s = this.getFieldLegendConfig(o, "position", this.theme.defaultLegendPosition); s = this.adjustPosition(s); var u = e.isLinear ? this.addContinuousLegend(e, n, s) : this.addCategoryLegend(e, n, i, r, s); return u && this.bindHoverEvent(u, o), u } }, t.prototype.addContinuousLegend = function (t, e, n) { var i = this.container.addGroup({ name: "legend" }), r = t.field, o = t.getTicks(), s = a.map(o, (function (n) { var i = n.value, r = n.tickValue, o = t.invert(i); return { value: r, color: e.mapping(o).join("") } })), u = !!a.find(o, (function (t) { return 0 === t.value })), l = !!a.find(o, (function (t) { return 1 === t.value })); if (!u) { var c = e.mapping(0).join(""); s.push({ value: t.min, color: c }) } if (!l) { c = e.mapping(0).join(""); s.push({ value: t.max, color: c }) } var h, p = this.options, f = n.split("-"), d = this.theme.legend[f[0]], g = a.deepMix({}, d, this.getFieldLegendOption(r, p), { items: s, attr: e, formatter: t.formatter, container: i, position: n }); if (g.showTitle && a.mix(g, { title: t.field }), "color" === e.type) h = new kt.Color(g); else { if ("size" !== e.type) return; h = new kt.Size(g) } return this.bindFilterEvent(h, t), h }, t.prototype.addCategoryLegend = function (t, e, n, i, r) { var o = this, s = this.options, l = t.field, c = s.fields ? s.fields[l] : null, h = [], p = t.getTicks(), f = !0, d = n.get("shapeType") || "point", g = n.getDefaultValue("shape") || d || "point"; s.marker && (g = s.marker, d = "point", f = !1), c && c.marker && (g = c.marker, d = "point", f = !1); var v = this.view, y = this.theme, m = v.get("canvas"), x = v.get("panelGroup").attr("clip"), _ = x ? x.getBBox() : void 0, b = v.get("panelRange"), w = v.get("viewRange"), M = r.split("-"), S = "right" === M[0] || "left" === M[0] ? _ ? _.height : b.height : _ ? w.width - (b.width - _.width) : w.width; a.each(p, (function (e) { var r = e.text, s = e.value, l = t.invert(s), c = { isInCircle: n.isInCircle() }, p = !i || o.isFiltered(t, i, l), v = n.getAttr("color"), m = n.getAttr("shape"); if (v) if (v.callback && v.callback.length > 1) { var x = Array(v.callback.length - 1).fill(""); c.color = v.mapping.apply(v, Object(u.__spreadArrays)([l], x)).join("") || y.defaultColor } else c.color = v.mapping(l).join("") || y.defaultColor; if (f && m && m.scales.length) if (m.callback && m.callback.length > 1) { x = Array(m.callback.length - 1).fill(""); g = m.mapping.apply(m, Object(u.__spreadArrays)([l], x)).join("") } else g = m.mapping(l).join(""); var _ = Nt(d).getMarkerStyle(g, c); a.isFunction(g) && (_.symbol = g), h.push({ value: r, dataValue: l, checked: p, marker: _ }) })); var C, O, k, P, A = !!s.useHtml || !(!c || !c.useHtml); switch (M[0]) { case "left": P = _ ? _.height : b.height, k = b.x - w.x, O = "vertical"; break; case "right": P = _ ? _.height : b.height, k = w.tr.x - b.tr.x, O = "vertical"; break; case "top": P = b.tr.y - w.tr.y, k = _ ? w.width - (b.width - _.width) : w.width, O = "horizontal"; break; case "bottom": P = w.br.y - b.br.y, k = _ ? w.width - (b.width - _.width) : w.width, O = "horizontal" }C = A ? a.mix({}, y.legend.html, { maxHeight: P, maxWidth: k, layout: O }) : a.mix({}, y.legend[M[0]], { maxHeight: P, maxWidth: k, layout: O, container: this.container.addGroup({ name: "legend" }) }); var L = a.deepMix({}, C, s, c, { maxLength: S, canvas: m, items: h, position: r }); L.showTitle && a.mix(L, { title: t.alias || t.field }); var T = A ? new kt.HtmlCategory(L) : new kt.CanvasCategory(L); return this.bindClickEvent(T, t, i, L.onClick), T }, t.prototype.addCustomLegend = function (t) { var e, n = this.theme, i = (this.view, this.container.addGroup({ name: "legend" })), r = i.get("canvas"), o = this.panelRange, s = this.options; a.isObject(s) && (e = s.fields ? s.fields[t] : {}); var u = e.position || s.position || n.defaultLegendPosition; u = this.adjustPosition(u); var l = e.items || s.items; if (l) { a.each(l, (function (t) { a.isPlainObject(t.marker) ? t.marker.radius = t.marker.radius || 4.5 : (t.marker = { symbol: t.marker || "circle", radius: 4.5 }, a.contains(Yt, t.marker.symbol) ? t.marker.stroke = t.color : t.marker.fill = t.color); var e = t.marker.symbol; a.isString(e) && -1 !== e.indexOf("hollow") && (t.marker.symbol = a.lowerFirst(e.substr(6))), t.checked = !!a.isNil(t.checked) || t.checked })); var c = u.split("-"), h = "right" === c[0] || "left" === c[0] ? o.height : this.viewRange.width, p = a.deepMix({}, n.legend[c[0]], s, e, { maxLength: h, viewTheme: n, items: l, container: i, canvas: r }), f = !!p.useHtml ? new kt.HtmlCategory(p) : new kt.CanvasCategory(p); return f.on("itemclick", (function (t) { s.onClick && s.onClick(t) })), this.bindHoverEvent(f), f } }, t.prototype.alignLegends = function () { var t = this, e = this.getRegion(); this.totalRegion = e; var n = this.groupLegendByPosition(), i = 0; a.each(n, (function (n, r) { var o = e.subs[i]; a.each(n, (function (e, i) { var a = n[i - 1]; t.alignLegend(e, a, o, r) })), i++ })) }, t.prototype.alignLegend = function (t, e, n, i) { var r = this.theme, o = this.viewRange.width, a = this.viewRange.height, s = this.totalRegion, u = this.groupLegendByPosition(), l = this.viewRange, c = t.get("offsetX") || 0, h = t.get("offsetY") || 0, p = t.getHeight(), f = t.getWidth(), d = r.legend.margin, g = r.legend.legendMargin, v = u[i].length, y = i.split("-"), m = 0, x = 0, _ = v > 1 ? s : n; if ("left" === y[0] || "right" === y[0]) a = l.maxY, m = this.getXAlign(y[0], o, n, l, f, d), x = e ? e.get("y") + e.getHeight() + g : this.getYAlignVertical(y[1], a, _, l, 0, d, this.viewRange.height); else if ("top" === y[0] || "bottom" === y[0]) if (x = this.getYAlignHorizontal(y[0], a, n, l, p, d), e) { var b = e.getWidth(); m = e.get("x") + b + g } else m = this.getXAlign(y[1], o, _, l, f, d); t.moveTo(m + c, x + h) }, t.prototype.getXAlign = function (t, e, n, i, r, o) { var a = "left" === t ? i.minX + o[3] : i.maxX - o[1] - r; return "center" === t && (a = (e - n.totalWidth) / 2), a }, t.prototype.getYAlignHorizontal = function (t, e, n, i, r, o) { return "top" === t ? i.minY + o[0] : i.maxY - o[2] - r }, t.prototype.getYAlignVertical = function (t, e, n, i, r, o, a) { var s = "top" === t ? i.minY + o[0] : i.maxY - n.totalHeight - o[2]; return "center" === t && (s = i.minY + (i.height - n.totalHeight) / 2), s }, t.prototype.adjustPosition = function (t) { var e = t.split("-"); if (1 === e.length) { var n = e[0]; return "left" === n ? "left-bottom" : "right" === n ? "right-bottom" : "top" === n ? "top-center" : "bottom" === n ? "bottom-center" : "" } return e.slice(0, 2).join("-") }, t.prototype.bindClickEvent = function (t, e, n, i) { var r = this, o = this.view, s = e.field; t.on("itemclick", (function (e) { if (i) i(e); else { var u = e.item, l = e.checked, c = "single" === t.get("selectedMode"), h = u.dataValue; l ? (a.pull(n, h), r.isFieldInView(s, h) && o.filter(s, (function (t) { return c ? t === h : !a.contains(n, t) }))) : c || (n.push(h), r.isFieldInView(s, h) && o.filter(s, (function (t) { return !a.contains(n, t) }))), o.set("keepLegend", !0), o.repaint(), o.set("keepLegend", !1) } })) }, t.prototype.bindHoverEvent = function (t, e) { var n = t.get("onMouseover"), i = t.get("onMouseleave"); t.on("itemmouseover", (function (t) { n && n(t) })), t.on("itemmouseleave", (function (t) { i && i(t) })) }, t.prototype.getRegion = function () { var t = this, e = this.theme.legend.legendMargin, n = [], i = 0, r = 0, o = this.groupLegendByPosition(); return a.each(o, (function (o) { var a = t.getSubRegion(o); n.push(a), i += a.totalWidth + e, r += a.totalHeight + e })), { totalWidth: i, totalHeight: r, subs: n } }, t.prototype.getSubRegion = function (t) { var e = 0, n = 0, i = 0, r = 0; return a.each(t, (function (t) { var o = t.getWidth(), a = t.getHeight(); e < o && (e = o), i += o, n < a && (n = a), r += a })), { maxWidth: e, totalWidth: i, maxHeight: n, totalHeight: r } }, t.prototype.isFiltered = function (t, e, n) { if (!t.isCategory) return !0; var i = !0; return a.each(e, (function (e) { if (t.getText(e) === t.getText(n)) return i = !1, !1 })), i }, t.prototype.isFieldInView = function (t, e) { var n = !1, i = this.view.get("scales")[t]; return i && i.values && (n = a.contains(i.values, e)), n }, t.prototype.getLegendOptions = function () { return a.get(this.view.get("options"), "legends", {}) }, t.prototype.getFieldLegendConfig = function (t, e, n) { var i = this.options, r = a.get(i, "fields." + t, {}); return r[e] ? r[e] : i[e] ? i[e] : n }, t.prototype.bindFilterEvent = function (t, e) { var n = this, i = e.field; t.on("itemfilter", (function (t) { var e = t.range, r = e[0], o = e[1]; n.filterShape(i, r, o) })) }, t.prototype.filterShape = function (t, e, n) { var i = this; this.view.eachShape((function (r, o, s, u) { var l = r[t]; if (a.isNil(l)) o.show(); else { var c = l >= e && l <= n; i.filterLabels(o, s, c), c ? o.show() : o.hide() } })) }, t.prototype.groupLegendByPosition = function () { return a.groupBy(this.legends, (function (t) { return t.get("position") })) }, t.prototype.filterLabels = function (t, e, n) { if (t.get("gLabel")) t.get("gLabel").set("visible", n); else { var i = e.get("labelOptions"); if (!a.isEmpty(a.get(i, "fields"))) { var r = e.getXScale().field, o = e.getYScale().field, s = t.get("origin")._origin, u = e.get("labels"); a.each(u, (function (e) { var i = e.get("origin") || []; i[r] === s[r] && i[o] === s[o] && (e.set("visible", n), t.set("gLabel", e)) })) } } }, t.prototype.getFieldLegendOption = function (t, e) { return void 0 === e && (e = {}), a.get(this.getLegendOptions(), "fields." + t, e) }, t }(); function Gt(t, e) { void 0 === e && (e = 0); var n = e; return "middle" === t && (n = .5), -1 !== t.indexOf("%") && (n = parseInt(t, 10) / 100), n } var Wt = function () { function t(t) { this.title = null, this.visible = !0, this.canvas = null, this.container = null, this.coord = null, this.options = null, this.axes = [], this.theme = null, a.mix(this, t) } return t.prototype.createAxis = function (t, e, n) { var i, r = this, o = this.coord, s = o.type; "theta" === s || "polar" === s && o.isTransposed || (t && !this._isHide(t.field) && (i = this._drawAxis(o, t, e[0], "x", n)), a.isEmpty(e) || "helix" === s || a.each(e, (function (e, a) { r._isHide(e.field) || r._drawAxis(o, e, t, "y", n, i, a) }))) }, t.prototype.changeVisible = function (t) { var e = this.axes; a.each(e, (function (e) { e.set("visible", t) })) }, t.prototype.clear = function () { var t = this.axes; a.each(t, (function (t) { t.clear() })), this.axes = [] }, t.prototype._getAxisOptionByField = function (t, e) { return void 0 === e && (e = {}), a.get(this.options, "fields." + t, e) }, t.prototype._isHide = function (t) { return !1 === this._getAxisOptionByField(t) }, t.prototype._getMiddleValue = function (t, e, n, i) { if (0 === t && !i) return 0; if (1 === t) return 1; var r = e[n + 1].value; return i || 1 !== r ? (t + r) / 2 : 1 }, t.prototype._getLineRange = function (t, e, n, i) { var r, o, a, s = e.field, u = this._getAxisOptionByField(s).position || ""; if ("x" === n) { var l = "top" === u ? 1 : 0; r = { x: 0, y: l = Gt(u, l) }, o = { x: 1, y: l }, a = !1 } else { var c; if (i) r = { x: c = Gt(u, c = "left" === u ? 0 : 1), y: 0 }, o = { x: c, y: 1 }; else r = { x: c = Gt(u, c = "right" === u ? 1 : 0), y: 0 }, o = { x: c, y: 1 }; a = !0 } return { start: r = t.convert(r), end: o = t.convert(o), isVertical: a } }, t.prototype._getLineCfg = function (t, e, n, i) { var r = this._getLineRange(t, e, n, i), o = r.start, a = r.end, s = t.center, u = t.isTransposed ? !r.isVertical : r.isVertical; return { isVertical: u, factor: u && o.x > s.x || !u && o.y > s.y ? 1 : -1, start: o, end: a } }, t.prototype._getCircleCfg = function (t) { var e, n = t.x, i = t.y, r = t.isTransposed, o = t.circleCenter, a = t.innerRadius, s = i.start > i.end; e = r ? { x: s ? 0 : 1, y: 0 } : { x: 0, y: s ? 0 : 1 }; var u, l = [(e = t.convert(e)).x - o.x, e.y - o.y], c = [1, 0]; return { startAngle: u = e.y > o.y ? L.vec2.angle(l, c) : -1 * L.vec2.angle(l, c), endAngle: u + (n.end - n.start), center: o, radius: Math.sqrt(Math.pow(e.x - o.x, 2) + Math.pow(e.y - o.y, 2)), inner: a || 0 } }, t.prototype._getRadiusCfg = function (t) { var e, n, i = t.x.start < 0 ? -1 : 1; return t.isTransposed ? (e = { x: 0, y: 0 }, n = { x: 1, y: 0 }) : (e = { x: 0, y: 0 }, n = { x: 0, y: 1 }), { factor: i, start: t.convert(e), end: t.convert(n) } }, t.prototype._getHelixCfg = function (t) { for (var e = t.a, n = t.startAngle, i = t.endAngle, r = t.center, o = t.y, a = [], s = 0; s <= 100; s++) { var u = t.convert({ x: s / 100, y: 0 }); a.push(u.x), a.push(u.y) } return { a: e, startAngle: n, endAngle: i, crp: a, axisStart: t.convert({ x: 0, y: 0 }), center: r, inner: o.start } }, t.prototype._getAxisPosition = function (t, e, n, i) { if (this._getAxisOptionByField(i).position) return this._getAxisOptionByField(i).position; var r = "", o = t.type; return t.isRect ? "x" === e ? r = "bottom" : "y" === e && (r = n ? "right" : "left") : r = "helix" === o ? "helix" : "x" === e ? t.isTransposed ? "radius" : "circle" : t.isTransposed ? "circle" : "radius", r }, t.prototype._getAxisDefaultCfg = function (t, e, n, i) { var r = this.theme, o = e.field, s = { coord: t, theme: r.axis[i] }; if ((s = a.deepMix({}, r.axis[i], s, this._getAxisOptionByField(o))).showTitle) { var u = a.get(s, "title", {}); u.text = u.text || e.alias || o, a.deepMix(s, { title: u }) } return s.ticks = e.getTicks(), t.isPolar && !e.isCategory && "x" === n && Math.abs(t.endAngle - t.startAngle) === 2 * Math.PI && s.ticks.pop(), s }, t.prototype._getAxisCfg = function (t, e, n, i, r, o) { var s = this; void 0 === r && (r = ""); var u, l, c, h, p = this._getAxisPosition(t, i, r, e.field), f = this._getAxisDefaultCfg(t, e, i, p); if (f.grid && n) { var d = [], g = function (t) { var e = []; if (t.length) { var n = (e = t.slice(0))[0], i = e[e.length - 1]; 0 !== n.value && e.unshift({ value: 0 }), 1 !== i.value && e.push({ value: 1 }) } return e }(n.getTicks()); if (g.length) { var v = (u = f.ticks, l = e.isLinear, c = "center" === f.gridAlign, h = [], u.length ? (u.length >= 2 && l && c && h.push({ text: "", tickValue: "", value: 0 }), 0 !== u[0].value && h.push({ text: "", tickValue: "", value: 0 }), 1 !== (h = h.concat(u))[h.length - 1].value && h.push({ text: "", tickValue: "", value: 1 }), h) : h); a.each(v, (function (n, u) { var l = [], c = n.value; if ("center" === f.gridAlign && (c = s._getMiddleValue(c, v, u, e.isLinear)), !a.isNil(c)) { var h = t.x, p = t.y; a.each(g, (function (e) { var n = "x" === i ? c : e.value, r = "x" === i ? e.value : c, o = t.convert({ x: n, y: r }); if (t.isPolar) { var a = t.circleCenter; p.start > p.end && (r = 1 - r), o.flag = h.start > h.end ? 0 : 1, o.radius = Math.sqrt(Math.pow(o.x - a.x, 2) + Math.pow(o.y - a.y, 2)) } l.push(o) })), d.push({ id: o + "-" + i + r + "-grid-" + n.tickValue, points: l }) } })) } f.gridPoints = d } return f }, t.prototype._drawAxis = function (t, e, n, i, r, o, s) { var u, l, c = this.container, h = this.canvas; "cartesian" === t.type ? (u = Ct.Axis.Line, l = this._getLineCfg(t, e, i, s)) : "helix" === t.type && "x" === i ? (u = Ct.Axis.Helix, l = this._getHelixCfg(t)) : "x" === i ? (u = Ct.Axis.Circle, l = this._getCircleCfg(t)) : (u = Ct.Axis.Line, l = this._getRadiusCfg(t)); var p = this._getAxisCfg(t, e, n, i, s, r); p = a.mix({}, p, l), "y" === i && o && "circle" === o.get("type") && (p.circle = o), p.id = a.isNil(s) ? r + "-" + i : r + "-" + i + s, a.mix(p, { canvas: h, group: c.addGroup() }); var f = new u(p); return f.render(), this.axes.push(f), f }, t }(), Vt = L.vec2, Xt = ["line", "area", "path"], qt = ["line", "area"], Ut = ["marker", "showMarker"], Zt = function (t) { var e = []; return a.each(t, (function (t) { -1 === function (t, e) { var n = -1; return a.each(t, (function (t, i) { var r = !0; for (var o in e) if (e.hasOwnProperty(o) && -1 === Ut.indexOf(o) && !a.isObject(e[o]) && e[o] !== t[o]) { r = !1; break } if (r) return n = i, !1 })), n }(e, t) && e.push(t) })), e }, Qt = function () { function t(t) { var e = this; this.timeStamp = 0, this.onMouseMove = function (t) { var n = e.view.get("panelGroup"), i = e.timeStamp, r = +new Date, o = { x: t.x - (n.get("x") || 0), y: t.y - (n.get("y") || 0) }; r - i > 16 && (e.showTooltip(o, e.view, t.target), e.timeStamp = r) }, this.onMouseOut = function (t) { t && !t.event || e.hideTooltip() }, a.assign(this, t) } return t.prototype.renderTooltip = function () { var t = this; if (!this.tooltip) { var e, n = this.view, i = this.theme, r = this._getCanvas(), o = this._getDefaultTooltipOptions(), s = this.options; if ((s = a.deepMix({ panelGroup: n.get("panelGroup"), panelRange: n.get("panelRange"), capture: !1, canvas: r, frontgroundGroup: n.get("frontgroundGroup"), theme: i.tooltip, backgroundGroup: n.get("backgroundGroup") }, o, s)).crosshairs && "rect" === s.crosshairs.type && (s.zIndex = 0), s.visible = !1, s.useHtml) { e = new Ct.Tooltip.Html(s); var u = this._getTriggerEvent(); if (!e.get("enterable") && "panel:mousemove" === u) { var l = e.get("container"); l && (l.onmousemove = function (e) { var i = t._normalizeEvent(e); n.emit(u, i) }) } } else e = new Ct.Tooltip.Canvas(s); this.tooltip = e, this.options = s, this._bindEvent() } }, t.prototype._normalizeEvent = function (t) { var e = this.view, n = this._getCanvas(), i = n.getPointByClient(t.clientX, t.clientY), r = n.get("pixelRatio"); return i.x = i.x / r, i.y = i.y / r, i.view = e, i }, t.prototype.hideTooltip = function () { var t = this.tooltip; if (t.get("visible")) { var e = this.view, n = this._getCanvas(); this.prePoint = null, t.hide(), e.emit("tooltip:hide", { tooltip: t }), e.setActive((function () { return !1 })), n.draw() } }, t.prototype.showTooltip = function (t, e, n) { var i = this; if (t) { this.tooltip || this.renderTooltip(); var r = this.options, o = [], s = [], u = e.getElements(), l = e.get("coord"); if (a.each(u, (function (e) { var n = e.get("type"); if (e.get("visible") && !1 !== e.get("tooltipOptions")) { var u = e.get("dataArray"); if (e.isShareTooltip() || a.contains(["area", "line", "path"], n)) a.each(u, (function (u) { var c = e.findPoint(t, u); if (c) { var h = e.getTooltipItems(c, r.title); a.each(h, (function (t) { var r = t.point; if (!a.isNil(r) && !a.isNil(r.x) && !a.isNil(r.y)) { var s = a.isArray(r.x) ? r.x[r.x.length - 1] : r.x, u = a.isArray(r.y) ? r.y[r.y.length - 1] : r.y; r = l.applyMatrix(s, u, 1), t.x = r[0], t.y = r[1], t.showMarker = !0; var c = i._getItemMarker(e, t.color); t.marker = c, -1 !== a.indexOf(Xt, n) && o.push(t) } })), s = s.concat(h) } })); else { var c = e.get("shapeContainer"), h = c.get("canvas").get("pixelRatio"), p = c.getShape(t.x * h, t.y * h); p && p.get("visible") && p.get("origin") && (s = e.getTooltipItems(p.get("origin"), r.title)) } } })), a.each(s, (function (t) { var e = t.point, n = a.isArray(e.x) ? e.x[e.x.length - 1] : e.x, i = a.isArray(e.y) ? e.y[e.y.length - 1] : e.y; e = l.applyMatrix(n, i, 1), t.x = e[0], t.y = e[1] })), s.length) { var c = s[0]; if (!s.every((function (t) { return t.title === c.title }))) { var h = c, p = 1 / 0; s.forEach((function (e) { var n = Vt.distance([t.x, t.y], [e.x, e.y]); n < p && (p = n, h = e) })), s = s.filter((function (t) { return t.title === h.title })), o = o.filter((function (t) { return t.title === h.title })) } if (!1 === r.shared && s.length > 1) { var f = s[0], d = Math.abs(t.y - f.y); a.each(s, (function (e) { Math.abs(t.y - e.y) <= d && (f = e, d = Math.abs(t.y - e.y)) })), !f || a.isNil(f.x) || a.isNil(f.y) || (o = [f]), s = [f] } this._setTooltip(t, s, o, n), e.setActive((function (t) { var e = !1; return a.each(s, (function (n) { if (n.point._origin === t) return e = !0, !1 })), e }), !1) } else this.hideTooltip() } }, t.prototype.clear = function () { var t = this.tooltip; t && t.destroy(), this.tooltip = null, this.prePoint = null, this._offEvent() }, t.prototype._getCanvas = function () { return this.view.get("canvas") }, t.prototype._getTriggerEvent = function () { var t, e = a.get(this.options, "triggerOn"); return e && "mousemove" !== e ? "click" === e ? t = "panel:click" : "none" === e && (t = null) : t = "panel:mousemove", t }, t.prototype._getDefaultTooltipOptions = function () { var t, e = this.view, n = this.options, i = this.theme, r = a.mix({}, i.tooltip), o = a.filter(e.getElements(), (function (t) { return t.get("visible") })), s = a.uniq(a.map(o, (function (t) { return t.get("type") }))), u = !!e.get("coord") && e.get("coord").isTransposed; if (e.get("coord") && "cartesian" === e.get("coord").type) if ("interval" === s[0]) !1 !== n.shape && ((l = a.mix({}, i.tooltipCrosshairsRect)).isTransposed = u, t = { zIndex: 0, crosshairs: l }); else if (a.indexOf(qt, s[0]) > -1) { var l; (l = a.mix({}, i.tooltipCrosshairsLine)).isTransposed = u, t = { crosshairs: l } } return a.mix(r, t) }, t.prototype._bindEvent = function () { var t = this.view, e = this._getTriggerEvent(); e && (t.on(e, this.onMouseMove), t.on("panel:mouseleave", this.onMouseOut)) }, t.prototype._offEvent = function () { var t = this.view, e = this._getTriggerEvent(); e && (t.off(e, this.onMouseMove), t.off("panel:mouseleave", this.onMouseOut)) }, t.prototype._setTooltip = function (t, e, n, i) { var r = this.tooltip, o = this.prePoint; if (!o || o.x !== t.x || o.y !== t.y) { var s = Zt(e); this.prePoint = t; var u = this.view, l = this.theme, c = a.isArray(t.x) ? t.x[t.x.length - 1] : t.x, h = a.isArray(t.y) ? t.y[t.y.length - 1] : t.y; r.get("visible") || u.emit("tooltip:show", { x: c, y: h, tooltip: r }); var p = s[0], f = p.title || p.name; r.isContentChange(f, s) && (u.emit("tooltip:change", { tooltip: r, x: c, y: h, items: s }), f = s[0].title || s[0].name, r.setContent(f, s), a.isEmpty(n) ? (r.clearMarkers(), r.set("markerItems", [])) : !1 === this.options.showTooltipMarkers ? r.set("markerItems", n) : r.setMarkers(n, l.tooltipMarker)), r.setPosition(c + (u.get("panelGroup").get("x") || 0), h + (u.get("panelGroup").get("y") || 0), i), r.show() } }, t.prototype._getItemMarker = function (t, e) { var n = t.get("shapeType") || "point", i = t.getDefaultValue("shape") || "circle", r = { color: e }; return Nt(n).getMarkerStyle(i, r) }, t }(), $t = function () { function t(t) { void 0 === t && (t = { view: null }), this._states = {}, this._stateStack = {}, this.view = t.view } return t.prototype.setState = function (t, e, n) { this._stateStack[t] = { exp: e, draw: n }, this._onUpdate() }, t.prototype.getState = function (t) { return this._states[t] }, t.prototype.getAllStates = function () { return this._states }, t.prototype.clear = function () { this._states = {}, this._stateStack = {}, this._changeTimer && (clearTimeout(this._changeTimer), this._changeTimer = null) }, t.prototype._onUpdate = function () { var t = this, e = this._stateStack; this._changeTimer && (clearTimeout(this._changeTimer), this._changeTimer = null), this._changeTimer = setTimeout((function () { for (var n in e) { var i = e[n], r = i.exp; t._states[n] && t._states[n] === r || (t._states[n] = r, t._triggerEvent(n, i)) } t._stateStack = {} }), 16) }, t.prototype._triggerEvent = function (t, e) { this.view.emit(t + ":change", Object(u.__assign)({ name: t }, e)) }, t }(); function Kt(t, e) { var n = t.get("backgroundGroup").get("backShape"), i = t.get("panelGroup").get("backShape"); return n === e || i === e } function Jt(t) { t.target && t.target.get("origin") && (t.data = t.target.get("origin")) } function te(t, e) { return !(!t || !e || t !== e) } function ee(t, e, n) { return !(t === n || !e.isShapeInView(t)) } function ne(t, e) { for (var n = t; n = n.get("parent");)if (n === e) return !0; return !1 } var ie = function () { function t(t) { void 0 === t && (t = { view: null, canvas: null }), this.view = t.view, this.canvas = t.canvas, this._panelGroup = this.view.get("panelGroup"), this._eventHandlers = [], this._pixelRatio = this.canvas.get("pixelRatio") } return t.prototype._getEventObj = function (t) { return { x: t.x / this._pixelRatio, y: t.y / this._pixelRatio, target: t.target, event: t.event } }, t.prototype._triggerShapeEvent = function (t, e, n) { var i = t.name; if (i && !t.get("destroyed")) { var r = this.view, o = i + ":" + e; n.view = r, n.appendInfo = t.get("appendInfo"), r.emit(o, n) } }, t.prototype._addEvent = function (t, e, n) { t.on(e, n), this._eventHandlers.push({ target: t, type: e, handler: n }) }, t.prototype.bindEvents = function () { var t = this.view.get("container"); this._addEvent(t, "mousedown", a.wrapBehavior(this, "_onEvents")), this._addEvent(t, "mousemove", a.wrapBehavior(this, "_onMove")), this._addEvent(t, "mouseup", a.wrapBehavior(this, "_onEvents")), this._addEvent(t, "click", a.wrapBehavior(this, "_onEvents")), this._addEvent(t, "dblclick", a.wrapBehavior(this, "_onEvents")), this._addEvent(t, "contextmenu", a.wrapBehavior(this, "_onEvents")), this._addEvent(t, "wheel", a.wrapBehavior(this, "_onEvents")), this._addEvent(t, "touchstart", a.wrapBehavior(this, "_onEvents")), this._addEvent(t, "touchmove", a.wrapBehavior(this, "_onEvents")), this._addEvent(t, "touchend", a.wrapBehavior(this, "_onEvents")), this._addEvent(this.canvas, "mousemove", a.wrapBehavior(this, "_onCanvasMove")); var e = this.canvas.get("canvasDOM"); this._canvasDomLeaveHandler = a.wrapBehavior(this, "_onCanvasDomLeave"), e.addEventListener("mouseleave", this._canvasDomLeaveHandler) }, t.prototype._onEvents = function (t) { var e = t.type, n = this._getEventObj(t), i = t.target; Jt(n), Kt(this.view, i) || this._triggerShapeEvent(i, e, n); var r = i.get("parent"); if (r) { var o = r.get("name"); o && "panelGroup" === o && this.view.emit("panel:" + e, n) } this.view.emit(e, n) }, t.prototype._onMove = function (t) { var e = this._getEventObj(t), n = t.target; Jt(e), this.view.emit("mousemove", e); var i = Kt(this.view, n); i || this._triggerShapeEvent(n, "mousemove", e); var r = this._lastShape, o = Kt(this.view, r); !r || o || te(r, n) || (Jt(this._getEventObj(t)), this._triggerShapeEvent(r, "mouseleave", e)); if (!i && !te(r, n)) { var a = this._getEventObj(t); Jt(a), this._triggerShapeEvent(n, "mouseenter", a) } var s = ne(n, this._panelGroup), u = !!r && ne(r, this._panelGroup); s ? u ? this.view.emit("panel:mousemove", e) : this.view.emit("panel:mouseenter", e) : u && this.view.emit("panel:mouseleave", e), this._lastShape = n }, t.prototype._onCanvasMove = function (t) { var e = a.isArray(t) ? t[0] : t, n = this._getEventObj(e), i = this.canvas, r = this.view, o = e.target, s = ee(o, r, i), u = !!this._lastCanvasTarget && ee(this._lastCanvasTarget, r, i); o !== this._lastCanvasTarget && (u && !s ? this.view.emit("mouseleave", n) : !u && s && this.view.emit("mouseenter", n)), this._lastCanvasTarget = o }, t.prototype._onCanvasDomLeave = function (t) { var e = this._getEventObj(t); e.event = t, this.view.emit("panel:mouseleave", e) }, t.prototype.clearEvents = function () { var t = this._eventHandlers; a.each(t, (function (t) { t.target.off(t.type, t.handler) })), this.canvas.get("canvasDOM").removeEventListener("mouseleave", this._canvasDomLeaveHandler) }, t }(), re = function () { function t(t, e) { this.view = t, this.cfg = e, this.init() } return t.prototype.init = function () { this.container = this._createContainer(); var t = this.view.get("data"); this.facets = this.generateFacets(t) }, t.prototype._createContainer = function () { return this.view.get("frontgroundGroup").addGroup() }, t.prototype.render = function () { this._renderViews(), this.renderTitle(), this.renderAxis() }, t.prototype._renderViews = function () { this._clearFacetViews(), this._createFacetViews() }, t.prototype._createFacetViews = function () { var t = this; return this.facets.map((function (e) { return t.facetToView(e) })) }, t.prototype._clearFacetViews = function () { var t = this; a.each(this.facets, (function (e) { e.view && (t.view.removeView(e.view), e.view = void 0) })) }, t.prototype.facetToView = function (t) { var e = t.region, n = t.data, i = this.view.createView({ start: e.start, end: e.end, padding: a.get(t, "padding", this.cfg.padding || 0) }); i.data(n || []), this.beforeProcessView(i, t); var r = this.cfg.eachView; return r && r(i, t), this.afterProcessView(i, t), t.view = i, i }, t.prototype.clear = function () { this._clearFacetViews() }, t.prototype.destroy = function () { this.clear(), this.container && this.container.remove(), this.view = void 0, this.facets = [], this.container = void 0, this.destroyed = !0 }, t.prototype.beforeProcessView = function (t, e) { }, t.prototype.afterProcessView = function (t, e) { }, t.prototype.getFieldValues = function (t, e) { var n = [], i = {}; return a.each(t, (function (t) { var r = t[e]; a.isNil(r) || i[r] || (n.push(r), i[r] = !0) })), n }, t.prototype.getRegion = function (t, e, n, i) { var r = 1 / (0 === e ? 1 : e), o = 1 / (0 === t ? 1 : t); return { start: { x: r * n, y: o * i }, end: { x: r * (n + 1), y: o * (i + 1) } } }, t }(), oe = {}, ae = function (t, e) { oe[a.lowerFirst(t)] = e }, se = {}, ue = function (t) { return se[t.toLowerCase()] }, le = function (t, e) { if (ue(t)) throw new Error("Element type '" + t + "' existed."); var n = t.toLowerCase(); se[n] = e, Ee(n, e) }; function ce(t, e, n) { var i = n.translate(t), r = n.translate(e); return n.isCategory ? i === r : a.isNumberEqual(i, r) } function he(t) { return t.alias || t.field } var pe = function () { function t(t) { this.element = null, this._xDistance = null, this.element = t } return t.prototype.findPoint = function (t, e) { if (0 === e.length) return null; var n = this.element, i = n.get("type"), r = n.getXScale(), o = n.getYScale(), s = r.field, u = o.field, l = null; if ("point" === i || "heatmap" === i) { var c = n.get("coord").invert(t), h = r.invert(c.x), p = o.invert(c.y), f = 1 / 0; return a.each(e, (function (t) { var e = t._origin, n = Math.pow(e[s] - h, 2) + Math.pow(e[u] - p, 2); n < f && (f = n, l = t) })), l } var d = e[0], g = e[e.length - 1], v = this._getXValueByPoint(t), y = d._origin[s], m = d._origin[u], x = g._origin[s], _ = o.isLinear && a.isArray(m); if (a.isArray(y)) a.each(e, (function (t) { var e = t._origin; if (r.translate(e[s][0]) <= v && r.translate(e[s][1]) >= v) { if (!_) return l = t, !1; a.isArray(l) || (l = []), l.push(t) } })), a.isArray(l) && (l = this._filterYValue(l, t)); else { var b; if (r.isLinear || "timeCat" === r.type) { if (v > r.translate(x) || v < r.translate(y)) return null; for (var w = 0, M = e.length - 1, S = void 0; w <= M;) { S = Math.floor((w + M) / 2); var C = e[S]._origin[s]; if (ce(C, v, r)) return e[S]; r.translate(C) <= r.translate(v) ? (w = S + 1, g = e[S], b = e[S + 1]) : (0 === M && (g = e[0]), M = S - 1) } } else a.each(e, (function (t, n) { var i = t._origin; if (ce(i[s], v, r)) { if (!_) return l = t, !1; a.isArray(l) || (l = []), l.push(t) } else r.translate(i[s]) <= v && (g = t, b = e[n + 1]) })), a.isArray(l) && (l = this._filterYValue(l, t)); g && b && Math.abs(r.translate(g._origin[s]) - v) > Math.abs(r.translate(b._origin[s]) - v) && (g = b) } var O = this._getXDistance(); return !l && Math.abs(r.translate(g._origin[s]) - v) <= O / 2 && (l = g), l }, t.prototype.getTooltipItems = function (t, e) { var n, i, r = this.element, o = t._origin, s = this._getTooltipTitle(o, e), l = r.get("tooltipOptions"), c = r.get("theme").defaultColor, h = this._getSize(t), p = []; function f(e, n) { if (!a.isNil(n) && "" !== n) { var i = { title: s, point: t, name: e || s, value: n, color: t.color || c, marker: !0, size: h }; p.push(i) } } if (l) { var d = l.fields, g = l.callback; if (g) { var v = d.map((function (e) { return t._origin[e] })), y = g.apply(void 0, v), m = Object(u.__assign)({ point: t, title: s, color: t.color || c, marker: !0, size: h }, y); p.push(m) } else { var x = r.get("scales"); a.each(d, (function (t) { if (!a.isNil(o[t])) { var e = x[t]; n = he(e), i = e.getText(o[t]), f(n, i) } })) } } else { var _ = this._getTooltipValueScale(); a.isNil(o[_.field]) || (i = this._getTooltipValue(o, _), f(n = this._getTooltipName(o), i)) } return p }, t.prototype.clear = function () { this._xDistance = null }, t.prototype._getXValueByPoint = function (t) { var e = 0, n = this.element, i = n.get("coord"), r = n.getXScale(), o = r.range, a = o[o.length - 1], s = o[0], u = i.invert(t).x; return n.isInCircle() && u > (1 + a) / 2 && (u = s), e = r.invert(u), r.isCategory && (e = r.translate(e)), e }, t.prototype._filterYValue = function (t, e) { var n = this.element, i = n.get("coord"), r = n.getYScale(), o = r.field, s = i.invert(e), u = r.invert(s.y), l = t[t.length - 1]; return a.each(t, (function (t) { var e = t._origin; if (e[o][0] <= u && e[o][1] >= u) return l = t, !1 })), l }, t.prototype._getXDistance = function () { var t = this._xDistance; if (!t) { var e = this.element.getXScale(); if (e.isCategory) t = 1; else { var n = e.values, i = e.translate(n[0]), r = i; a.each(n, (function (t) { var n = e.translate(t); n < i && (i = n), n > r && (r = n) })); var o = n.length; t = (r - i) / (o - 1) } this._xDistance = t } return t }, t.prototype._getTooltipTitleScale = function (t) { var e = this.element, n = e.get("scales"); return t ? n[t] : n[e.getAttr("position").getFields()[0]] }, t.prototype._getTooltipTitle = function (t, e) { var n = "", i = this.element, r = this._getTooltipTitleScale(e); if (r) { var o = t[r.field]; n = r.getText(o) } else if ("heatmap" === i.get("type")) { var a = i.getXScale(), s = i.getYScale(); n = "( " + a.getText(t[a.field]) + ", " + s.getText(t[s.field]) + " )" } return n }, t.prototype._getTooltipValueScale = function () { var t, e = this.element, n = e.getAttrsForLegend(); a.each(n, (function (e) { var n = e.getScale(e.type); if (n && n.isLinear) return t = n, !1 })); var i = e.getXScale(), r = e.getYScale(); return t || r || i }, t.prototype._getTooltipValue = function (t, e) { var n = t[e.field]; return a.isArray(n) ? n.map((function (t) { return e.getText(t) })).join("-") : e.getText(n) }, t.prototype._getTooltipName = function (t) { var e, n = this.element.getGroupScales(); if (n.length && a.each(n, (function (t) { return e = t, !1 })), e) { var i = e.field; return e.getText(t[i]) } return he(this._getTooltipValueScale()) }, t.prototype._getSize = function (t) { var e = this.element, n = e.get("coord"), i = e.getSize(t._origin); if (n.isRect && i) { var r = n.isTransposed ? "y" : "x"; if (a.isArray(t[r])) i = i < Math.abs(t[r][1] - t[r][0]) ? null : i } return i }, t }(), fe = ["line", "point", "path"]; var de = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ labelOptions: null, coord: null, elementType: null, zIndex: 6 }, e)) || this; return n.set("defaultLabelCfg", n.get("theme").label), n } return Object(u.__extends)(e, t), e.prototype._renderUI = function () { t.prototype._renderUI.call(this); var e = this.addGroup({ name: "element-labels-group" }), n = this.addGroup({ name: "element-labels-line-group" }), i = new Ct.Label; i.set("coord", this.get("coord")), i.set("group", e), i.set("lineGroup", n), this.set("labelsRenderer", i), this.set("labelsGroup", e), this.set("lineGroup", n) }, e.prototype.destroy = function () { this.get("labelsRenderer").destroy(), t.prototype.destroy.call(this) }, e.prototype.showLabels = function (t, e) { var n = this.get("labelsRenderer"), i = this.getLabelsItems(t, e), r = [].concat(e), o = this.get("type"); i = this.adjustItems(i, r), this.drawLines(i), n.set("items", i.filter((function (t, e) { return !!t || (r.splice(e, 1), !1) }))), o && (n.set("shapes", r), n.set("type", o), n.set("points", t)), n.set("canvas", this.get("canvas")), n.draw() }, e.prototype.adjustItems = function (t, e) { return a.each(t, (function (t) { t && (t.offsetX && (t.x += t.offsetX), t.offsetY && (t.y += t.offsetY)) })), t }, e.prototype.drawLines = function (t) { var e = this; a.each(t, (function (t) { t && t.offset > 0 && t.labelLine && e.lineToLabel(t) })) }, e.prototype.lineToLabel = function (t) { }, e.prototype.setLabelPosition = function (t, e, n, i) { }, e.prototype.transLabelPoint = function (t) { var e = this.get("coord").applyMatrix(t.x, t.y, 1); t.x = e[0], t.y = e[1] }, e.prototype.getOffsetVector = function (t) { var e = t.offset || 0, n = this.get("coord"); return n.isTransposed ? n.applyMatrix(e, 0) : n.applyMatrix(0, e) }, e.prototype.getDefaultOffset = function (t) { var e = this.get("coord"), n = this.getOffsetVector(t); return e.isTransposed ? n[0] : n[1] }, e.prototype.getLabelOffset = function (t, e, n) { var i = this.getDefaultOffset(t), r = this.get("coord").isTransposed, o = r ? "x" : "y", a = r ? 1 : -1, s = { x: 0, y: 0 }; return s[o] = e > 0 || 1 === n ? i * a : i * a * -1, s }, e.prototype.getLabelsItems = function (t, e) { var n = this, i = [], r = this.get("element"), o = this.get("coord"), s = this._getlabelOptions(t, e); return a.each(t, (function (t, e) { var u = t._origin, l = s[e]; if (l) { a.isArray(l.text) || (l.text = [l.text]); var c = l.length; a.each(l.text, (function (e, s) { if (a.isNil(e) || "" === e) i.push(null); else { var h = n.getLabelPoint(l, t, s); (h = a.mix({}, l, h)).textAlign || (h.textAlign = n.getLabelAlign(h, s, c)), r && (h.id = r.getShapeId(u) + "-glabel-" + s + "-" + h.text), h.coord = o, i.push(h) } })) } else i.push(null) })), i }, e.prototype.getLabelPoint = function (t, e, n) { var i = this.get("coord"), r = t.text.length; function o(e, n) { var i, r, o = e; return a.isArray(o) && (1 === t.text.length ? o.length <= 2 ? o = o[e.length - 1] : (i = o, r = 0, a.each(i, (function (t) { r += t })), o = r / i.length) : o = o[n]), o } var s = { text: t.text[n], x: 0, y: 0, start: { x: 0, y: 0 }, color: "#fff" }; if (e && "polygon" === this.get("elementType")) { var u = function (t, e) { if (a.isNumber(t) && a.isNumber(e)) return [t, e]; for (var n, i, r = -1, o = 0, s = 0, u = t.length - 1, l = 0; ++r < t.length;)n = u, u = r, l += i = t[n] * e[u] - t[u] * e[n], o += (t[n] + t[u]) * i, s += (e[n] + e[u]) * i; return [o / (l *= 3), s / l] }(e.x, e.y); s.x = u[0], s.y = u[1] } else s.x = o(e.x, n), s.y = o(e.y, n); if (e && e.nextPoints && ("funnel" === e.shape || "pyramid" === e.shape)) { var l = -1 / 0; e.nextPoints.forEach((function (t) { var e = i.convert(t); e.x > l && (l = e.x) })), s.x = (s.x + l) / 2 } "pyramid" === e.shape && !e.nextPoints && e.points && e.points.forEach((function (t) { var n = t; n = i.convert(n), (a.isArray(n.x) && -1 === e.x.indexOf(n.x) || a.isNumber(n.x) && e.x !== n.x) && (s.x = (s.x + n.x) / 2) })), t.position && this.setLabelPosition(s, e, n, t.position); var c = this.getLabelOffset(t, n, r); return t.offsetX && (c.x += t.offsetX), t.offsetY && (c.y += t.offsetY), this.transLabelPoint(s), s.start = { x: s.x, y: s.y }, s.x += c.x, s.y += c.y, s.color = e.color, s }, e.prototype.getLabelAlign = function (t, e, n) { var i = "center"; if (this.get("coord").isTransposed) { var r = this.getDefaultOffset(t); i = r < 0 ? "right" : 0 === r ? "center" : "left", n > 1 && 0 === e && ("right" === i ? i = "left" : "left" === i && (i = "right")) } return i }, e.prototype._getLabelValue = function (t, e) { var n = e; a.isArray(n) || (n = [n]); var i = []; return a.each(n, (function (e) { var n = t[e.field]; if (a.isArray(n)) { var r = []; a.each(n, (function (t) { r.push(e.getText(t)) })), n = r } else n = e.getText(n); a.isNil(n) || "" === n ? i.push(null) : i.push(n) })), i }, e.prototype._getlabelOptions = function (t, e) { var n = this, i = this.get("elementType"), r = this.get("theme"), o = this.get("labelOptions"), s = o.scales, u = []; return a.each(t, (function (t, e) { var l = {}, c = t._origin, h = n._getLabelValue(c, s); if (o.callback) { var p = s.map((function (t) { return c[t.field] })); l = o.callback.apply(o, p) } a.isNil(l) ? u.push(null) : (a.isString(l.content) ? (l.text = l.content, delete l.content) : a.isFunction(l.content) ? (l.text = l.content(c, t, e), delete l.content) : l.text = h[0], l.htmlTemplate && (l.useHtml = !0, l.text = l.htmlTemplate(c, t, e), delete l.htmlTemplate), l.formatter && (l.text = l.formatter.call(null, l.text, t, e), delete l.formatter), (l = "polygon" === i || l.offset < 0 && -1 === a.indexOf(fe, i) ? a.deepMix({}, n.get("defaultLabelCfg"), r.innerLabels, l) : a.deepMix({}, n.get("defaultLabelCfg"), r.label, l)).origin = c, u.push(l)) })), u }, e }(o.Group), ge = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(u.__extends)(e, t), e.prototype.setLabelPosition = function (t, e, n, i) { var r = i; a.isFunction(r) && (r = r(e)); var o = this.get("coord"), s = o.isTransposed, u = o.convertPoint(e.points[0]), l = o.convertPoint(e.points[2]), c = (u.x - l.x) / 2 * (s ? -1 : 1), h = (u.y - l.y) / 2 * (s ? -1 : 1); switch (r) { case "right": s ? (t.x -= c, t.y += h, t.textAlign = t.textAlign || "center") : (t.x -= c, t.y += h, t.textAlign = t.textAlign || "left"); break; case "left": s ? (t.x -= c, t.y -= h, t.textAlign = t.textAlign || "center") : (t.x += c, t.y += h, t.textAlign = t.textAlign || "right"); break; case "bottom": s ? (t.x -= 2 * c, t.textAlign = t.textAlign || "left") : (t.y += 2 * h, t.textAlign = t.textAlign || "center"); break; case "middle": s ? t.x -= c : t.y += h, t.textAlign = t.textAlign || "center"; break; case "top": t.textAlign = s ? t.textAlign || "left" : t.textAlign || "center" } }, e }(de), ve = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(u.__extends)(e, t), e.prototype.getLabelPoint = function (t, e, n) { var i, r = n, o = t.text[r], a = 1; this._isToMiddle(e) ? i = this._getMiddlePoint(e.points) : (1 === t.text.length && 0 === r ? r = 1 : 0 === r && (a = -1), i = this.getArcPoint(e, r)); var s = this.getDefaultOffset(t); s *= a; var u = this.getPointAngle(i), l = t.labelEmit, c = this.getCirclePoint(u, s, i, l); return c ? (c.text = o, c.angle = u, c.color = e.color) : c = { text: "" }, t.autoRotate || void 0 === t.autoRotate ? c.rotate = this.getLabelRotate(u, s, l) : c.rotate = t.rotate, c.start = { x: i.x, y: i.y }, c }, e.prototype.getCirclePoint = function (t, e, n, i) { var r = this.get("coord"), o = r.getCenter(), a = t, s = function (t, e) { return Pt(t, e) }(r, n); if (0 === s) return null; r.isTransposed && s > e && !i ? a += 2 * Math.asin(e / (2 * s)) : s += e; return { x: o.x + s * Math.cos(a), y: o.y + s * Math.sin(a), angle: a, r: s } }, e.prototype.getArcPoint = function (t, e) { var n, i = e; return i = i || 0, n = a.isArray(t.x) || a.isArray(t.y) ? { x: a.isArray(t.x) ? t.x[i] : t.x, y: a.isArray(t.y) ? t.y[i] : t.y } : t, this.transLabelPoint(n), n }, e.prototype.getPointAngle = function (t) { return jt(this.get("coord"), t) }, e.prototype.getLabelRotate = function (t, e, n) { var i; return i = 180 * t / Math.PI, i += 90, n && (i -= 90), i && (i > 90 ? i -= 180 : i < -90 && (i += 180)), i / 180 * Math.PI }, e.prototype.getLabelAlign = function (t) { var e, n = this.get("coord"); if (t.labelEmit) e = t.angle <= Math.PI / 2 && t.angle > -Math.PI / 2 ? "left" : "right"; else if (n.isTransposed) { var i = n.getCenter(), r = this.getDefaultOffset(t); e = Math.abs(t.x - i.x) < 1 ? "center" : t.angle > Math.PI || t.angle <= 0 ? r > 0 ? "left" : "right" : r > 0 ? "right" : "left" } else e = "center"; return e }, e.prototype.lineToLabel = function (t) { }, e.prototype._getMiddlePoint = function (t) { var e = this.get("coord"), n = t.length, i = { x: 0, y: 0 }; return a.each(t, (function (t) { i.x += t.x, i.y += t.y })), i.x /= n, i.y /= n, i = e.convert(i) }, e.prototype._isToMiddle = function (t) { return t.x.length > 2 }, e }(de); function ye(t, e, n) { return { x: t.x + n * Math.cos(e), y: t.y + n * Math.sin(e) } } var me = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({}, e)) || this; return n.set("defaultLabelCfg", n.get("theme").thetaLabels), n } return Object(u.__extends)(e, t), e.prototype.getDefaultOffset = function (t) { return t.offset || 0 }, e.prototype.adjustItems = function (e) { var n = e, i = n[0] ? n[0].offset : 0; return i > 0 && (n = this._distribute(n, i)), t.prototype.adjustItems.call(this, n) }, e.prototype.lineToLabel = function (t) { var e = this.get("coord"), n = e.getRadius(), i = t.offset, r = t.orignAngle || t.angle, o = e.getCenter(), s = ye(o, r, n), u = ye(o, r, n + i / 2), l = { x: t.x - 4 * Math.cos(r), y: t.y - 4 * Math.sin(r) }; a.isObject(t.labelLine) || (t.labelLine = {}), t.labelLine.path = ["M " + s.x, s.y + " Q" + u.x, u.y + " " + l.x, l.y].join(",") }, e.prototype.getLabelRotate = function (t, e, n) { var i; return e < 0 && ((i = 180 * t / Math.PI) > 90 && (i -= 180), i < -90 && (i += 180)), i / 180 * Math.PI }, e.prototype.getLabelAlign = function (t) { var e, n = this.get("coord").getCenter(); return e = t.angle <= Math.PI / 2 && t.x >= n.x ? "left" : "right", this.getDefaultOffset(t) <= 0 && (e = "right" === e ? "left" : "right"), e }, e.prototype.getArcPoint = function (t) { return t }, e.prototype.getPointAngle = function (t) { var e = this.get("coord"), n = { x: a.isArray(t.x) ? t.x[0] : t.x, y: t.y[0] }; this.transLabelPoint(n); var i, r = { x: a.isArray(t.x) ? t.x[1] : t.x, y: t.y[1] }; this.transLabelPoint(r); var o = jt(e, n); if (t.points && t.points[0].y === t.points[1].y) i = o; else { var s = jt(e, r); o >= s && (s += 2 * Math.PI), i = o + (s - o) / 2 } return i }, e.prototype.getCirclePoint = function (t, e, n) { var i = this.get("coord"), r = i.getCenter(), o = i.getRadius() + e, a = ye(r, t, o); return a.angle = t, a.r = o, a }, e.prototype._distribute = function (t, e) { var n = this.get("coord"), i = n.getRadius(), r = this.get("defaultLabelCfg").labelHeight, o = n.getCenter(), a = 2 * (i + e) + 2 * r, s = { start: n.start, end: n.end }, u = this.get("element"); if (u) { var l = u.get("view"); s = { start: l.get("panelRange").bl, end: l.get("panelRange").tr } } var c = [[], []]; return t.forEach((function (t) { t && ("right" === t.textAlign ? c[0].push(t) : c[1].push(t)) })), c.forEach((function (t, e) { var n = a / r; t.length > n && (t.sort((function (t, e) { return e["..percent"] - t["..percent"] })), t.splice(n, t.length - n)), t.sort((function (t, e) { return t.y - e.y })), function (t, e, n, i, r) { var o, a = !0, s = n.start, u = n.end, l = Math.min(s.y, u.y), c = Math.abs(s.y - u.y), h = 0, p = Number.MIN_VALUE, f = t.map((function (t) { return t.y > h && (h = t.y), t.y < p && (p = t.y), { size: e, targets: [t.y - l] } })); for (p -= l, h - l > c && (c = h - l); a;)for (f.forEach((function (t) { var e = (Math.min.apply(p, t.targets) + Math.max.apply(p, t.targets)) / 2; t.pos = Math.min(Math.max(p, e - t.size / 2), c - t.size) })), a = !1, o = f.length; o--;)if (o > 0) { var d = f[o - 1], g = f[o]; d.pos + d.size > g.pos && (d.size += g.size, d.targets = d.targets.concat(g.targets), d.pos + d.size > c && (d.pos = c - d.size), f.splice(o, 1), a = !0) } o = 0, f.forEach((function (n) { var i = l + e / 2; n.targets.forEach((function () { t[o].y = n.pos + i, i += e, o++ })) })), t.forEach((function (t) { var e = t.r * t.r, n = Math.pow(Math.abs(t.y - i.y), 2); if (e < n) t.x = i.x; else { var o = Math.sqrt(e - n); t.x = r ? i.x + o : i.x - o } })) }(t, r, s, o, e) })), c[0].concat(c[1]) }, e }(ve), xe = {}; function _e(t) { return xe[t.toLowerCase()] } function be(t, e) { if (_e(t)) throw new Error("ElementLabels type '" + t + "' existed."); xe[t.toLowerCase()] = e } var we = function () { function t(t) { this.element = null, this.labelsContainer = null, this.element = t } return t.prototype._createLabelsContainer = function () { var t = this.element, e = t.get("type"), n = t.get("coord"), i = t.get("labelOptions"), r = this._getElementLabelsConstructor(i.labelType, n.type, e), o = t.get("frontgroundGroup"), s = a.map(t.get("labelOptions").fields, (function (e) { return t.createScale(e) })), u = o.addGroup(r, { labelOptions: a.mix({ scales: s }, i), coord: n, element: t, elementType: e, theme: t.get("theme"), visible: t.get("visible") }); this.labelsContainer = u }, t.prototype.addLabels = function (t, e) { return this._createLabelsContainer(), this.labelsContainer.showLabels(t, e), this.labelsContainer.get("labelsGroup").get("children") }, t.prototype.changeVisible = function (t) { this.labelsContainer && this.labelsContainer.set("visible", t) }, t.prototype.clear = function () { var t = this.labelsContainer; t && !t.destroyed && t.remove() }, t.prototype._getElementLabelsConstructor = function (t, e, n) { var i = t || "base"; return "polar" === e && "base" === i ? i = "polar" : "theta" === e && "base" === i ? i = "pie" : "interval" !== n && "polygon" !== n || "base" !== i || (i = "interval"), _e(i) }, t }(); be("base", de), be("interval", ge), be("pie", me), be("polar", ve); function Me(t, e) { if (!t) return !0; if (t.length !== e.length) return !0; var n = !1; return a.each(e, (function (e, i) { if (!function (t, e) { if (a.isNil(t) || a.isNil(e)) return !1; var n = t.get("origin"), i = e.get("origin"); return a.isEqual(n, i) }(e, t[i])) return n = !0, !1 })), n } function Se(t, e) { var n = {}; return a.each(t, (function (t, i) { var r = e[i]; a.isArray(r) && (r = r.concat()), n[i] = r })), n } var Ce = function () { function t(t) { this.element = null, this._activeShapes = null, this._selectedShapes = null, this._inactiveShapes = null, this.element = t } return t.prototype.bind = function () { var t = this.element.get("view"); t.on("active:change", a.wrapBehavior(this, "_onActive")), t.on("selected:change", a.wrapBehavior(this, "_onSelected")), t.on("inactive:change", a.wrapBehavior(this, "_onInactive")) }, t.prototype.unbind = function () { var t = this.element.get("view"); t.off("active:change", a.getWrapBehavior(this, "_onActive")), t.off("selected:change", a.getWrapBehavior(this, "_onSelected")), t.off("inactive:change", a.getWrapBehavior(this, "_onInactive")) }, t.prototype._onActive = function (t) { var e = this, n = this.element; if (!1 !== n.get("activeOptions")) { var i = n.get("shapeContainer"), r = t.exp, o = t.draw, a = this._filterShapes(r), s = this._activeShapes; Me(s, a) && (s && this._clearActiveShapes(), this._clearInactiveShapes(), a.forEach((function (t) { t.get("animating") && t.stopAnimate(), e._setShapeActive(t) })), this._activeShapes = a, i.sort(), o && this._draw()) } }, t.prototype._clearActiveShapes = function () { var t = this._activeShapes; a.each(t, (function (t) { var e = t.get("_beforeActiveAttrs"); t.attr(e), t.setZIndex(0), t.set("_beforeActiveAttrs", null) })), this.element.get("shapeContainer").get("children").sort((function (t, e) { return t._INDEX - e._INDEX })), this._activeShapes = null }, t.prototype._setShapeActive = function (t) { var e = this._getShapeStyleByState(t, "active"), n = Se(e, t.attr()); t.setSilent("_beforeActiveAttrs", n), t.attr(e), t.setZIndex(1) }, t.prototype._onSelected = function (t) { var e = this; if (!1 !== this.element.get("selectedOptions")) { var n = t.exp, i = t.draw, r = this._filterShapes(n), o = this._selectedShapes; Me(o, r) && (o && this._clearSelectedShapes(), this._clearInactiveShapes(), r.forEach((function (t) { t.get("animating") && t.stopAnimate(), e._setShapeSelected(t) })), this._selectedShapes = r, i && this._draw()) } }, t.prototype._clearSelectedShapes = function () { var t = this._selectedShapes; a.each(t, (function (t) { if (t.set("selected", !1), !t.get("inactive")) { var e = t.get("_originAttrs"); t.attr(e), t.set("_originAttrs", null) } })), this._selectedShapes = null }, t.prototype._setShapeSelected = function (t) { t.set("selected", !0); var e = this._getShapeStyleByState(t, "selected"); this._applyShapeStyle(t, e) }, t.prototype._onInactive = function (t) { var e = this; if (!1 !== this.element.get("inactiveOptions")) { var n = t.exp, i = t.draw, r = this._filterShapes(n), o = this._inactiveShapes; Me(o, r) && (o && this._clearInactiveShapes(), r.forEach((function (t) { t.get("animating") && t.stopAnimate(), e._setShapeInactive(t) })), this._inactiveShapes = r, i && this._draw()) } }, t.prototype._clearInactiveShapes = function () { var t = this._inactiveShapes; a.each(t, (function (t) { if (t.set("inactive", !1), !t.get("selected")) { var e = t.get("_originAttrs"); t.attr(e), t.set("_originAttrs", null) } })), this._inactiveShapes = null }, t.prototype._setShapeInactive = function (t) { t.set("inactive", !0); var e = this._getShapeStyleByState(t, "inactive"); this._applyShapeStyle(t, e) }, t.prototype._applyShapeStyle = function (t, e) { var n = t.get("_originAttrs"); n && t.attr(n), n = Se(e, t.attr()), t.setSilent("_originAttrs", n), t.attr(e) }, t.prototype._filterShapes = function (t) { var e = this.element.get("shapeContainer").get("children"); return a.filter(e, (function (e) { if (e.get("origin") && e.get("visible")) { var n = e.get("origin"), i = a.isArray(n) ? n[0]._origin : n._origin; return t(i) } })) }, t.prototype._getShapeStyleByState = function (t, e) { var n = this.element, i = t.get("origin"), r = i.shape || n.getDefaultValue("shape"); a.isArray(r) && (r = r[0]); var o = n.get("shapeFactory"), s = a.mix({}, t.attr(), { origin: i }); if ("active" === e) { var u = n.get("activeOptions"), l = o.getActiveStyle(r, s) || {}; return a.mix(l, u) } if ("selected" === e) { var c = n.get("selectedOptions"), h = o.getSelectedStyle(r, s) || {}; return a.mix(h, c) } if ("inactive" === e) { var p = n.get("inactiveOptions"), f = o.getInactiveStyle(r, s) || {}; return a.mix(f, p) } return s }, t.prototype._draw = function () { var t = this.element.get("canvas"); if (t) { var e = t.get("_drawTimer"); e && (clearTimeout(e), t.set("_drawTimer", null)), e = setTimeout((function () { t.draw() }), 16), t.set("_drawTimer", e) } }, t }(); function Oe(t) { return a.isArray(t) ? t : t.split("*") } var ke = ["color", "shape", "size"], Pe = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ id: null, type: "base", shapeType: null, coord: null, attrs: {}, data: [], scales: {}, attrOptions: {}, view: null, canvas: null, container: null, shapeContainer: null, generatePoints: !1, sortable: !1, animate: !0, visible: !0, shareTooltip: !0, activeOptions: null, inactiveOptions: null, selectedOptions: null, labelOptions: null, tooltipOptions: null, adjustOptions: null, styleOptions: null, statOptions: null, animateOptions: null, theme: null, widthRatio: C.widthRatio }, e)) || this, i = n.get("theme") || C.theme; return n.set("theme", i), n.get("container") && n._initContainer(), n._initController(), n } return Object(u.__extends)(e, t), e.prototype.position = function (t) { return a.isString(t) ? this._setAttrOptions("position", { fields: Oe(t) }) : this._setAttrOptions("position", t), this }, e.prototype.color = function (t, e) { return this._createAttrOption("color", t, e), this }, e.prototype.shape = function (t, e) { return this._createAttrOption("shape", t, e), this }, e.prototype.size = function (t, e) { return this._createAttrOption("size", t, e), this }, e.prototype.opacity = function (t, e) { return this._createAttrOption("opacity", t, e), this }, e.prototype.adjust = function (t) { var e = t; return (a.isString(t) || a.isPlainObject(t)) && (e = [t]), a.each(e, (function (t, n) { a.isObject(t) || (e[n] = { type: t }) })), this.set("adjustOptions", e), this }, e.prototype.style = function (t, e) { if (a.isString(t)) { var n = Oe(t); this.set("styleOptions", { fields: n, callback: e }) } else { n = t.fields; var i = t.callback, r = t.cfg; n || i || r ? this.set("styleOptions", t) : this.set("styleOptions", { cfg: t }) } return this }, e.prototype.tooltip = function (t, e) { if (a.isString(t)) { var n = Oe(t); this.set("tooltipOptions", { fields: n, callback: e }) } else this.set("tooltipOptions", t); return this }, e.prototype.label = function (t, e) { var n = {}; if (a.isString(t)) { var i = Oe(t); n.fields = i, n.callback = e, this.set("labelOptions", n) } else this.set("labelOptions", t); return this }, e.prototype.animate = function (t) { return this.set("animateOptions", t), this }, e.prototype.active = function (t) { return this.set("activeOptions", t), this }, e.prototype.selected = function (t) { return this.set("selectedOptions", t), this }, e.prototype.inactive = function (t) { return this.set("inactiveOptions", t), this }, e.prototype.init = function () { var t = this, e = this.get("coord"); this.get("shapeContainer").setMatrix(e.matrix); var n = this.get("data"); this._initAttrs(n); var i = this.get("tooltipOptions"); i && i.fields && i.fields.forEach((function (e) { t.createScale(e, n) })); var r = this._processData(n); r = this._adjustData(r), this.set("dataArray", r) }, e.prototype.bindStates = function () { if (this.get("view")) { var t = new Ce(this); t.bind(), this.set("stateController", t) } }, e.prototype.unbindStates = function () { if (this.get("view")) { var t = this.get("stateController"); t && t.unbind() } }, e.prototype.paint = function () { var t = this.get("coord"), e = this.get("theme"), n = this.get("dataArray"), i = [], r = this._getShapeFactory(); r.setCoord(t), r.setTheme(e.shape); var o = this.get("shapeContainer"); this._beforeMapping(n); for (var s = 0, u = n.length; s < u; s += 1) { var l = n[s]; l = this._mapping(l), i.push(l), this.draw(l, o, r, s) } if (this.get("labelOptions")) { var c = this.get("labelController").addLabels(a.union.apply(a, i), o.get("children")); this.set("labels", c) } this.get("sortable") ? this.set("dataArray", i) : this._sort(i) }, e.prototype.clear = function () { this.clearInner(), this.set("scales", {}), this.set("labels", null) }, e.prototype.destroy = function () { this.clear(); var e = this.get("shapeContainer"); e && e.remove(); var n = this.get("container"); n && n.remove(), this.unbindStates(), t.prototype.destroy.call(this) }, e.prototype.getDefaultValue = function (t) { var e, n = this.getAttr(t); return n && a.isEmpty(n.scales) && (e = n.values[0]), e }, e.prototype.changeVisible = function (t, e) { this.set("visible", t); var n = this.get("shapeContainer"); n && n.set("visible", t); var i = this.get("labelController"); (i && i.changeVisible(t), !e && n) && this.get("canvas").draw() }, e.prototype.getAttr = function (t) { return this.get("attrs")[t] }, e.prototype.getAttrsForLegend = function () { var t = a.values(this.get("attrs")); return a.filter(t, (function (t) { return a.contains(ke, t.type) })) }, e.prototype.getXScale = function () { return this.getAttr("position").scales[0] }, e.prototype.getYScale = function () { return this.getAttr("position").scales[1] }, e.prototype.getShapes = function () { return this.get("shapeContainer").get("children") }, e.prototype.isInCircle = function () { var t = this.get("coord"); return !(!t || !t.isPolar) }, e.prototype.appendShapeInfo = function (t, e) { t && (t.setSilent("index", e), t.setSilent("coord", this.get("coord")), t.setSilent("scales", this.get("scales")), this.get("animate") && !a.isNil(this.get("animateOptions")) && t.setSilent("animateOptions", this.get("animateOptions"))) }, e.prototype.hasAdjust = function (t) { var e = this.get("adjustOptions"), n = !1; return a.each(e, (function (e) { if (e.type === t) return n = !0, !1 })), n }, e.prototype.getAttrValues = function (t, e) { var n = t.scales, i = a.map(n, (function (t) { var n = t.field; return "identity" === t.type ? t.values[0] : (t.isCategory, e[n]) })); return t.mapping.apply(t, i) }, e.prototype.getSize = function (t) { var e = this.get("sizeController"); if (e) return e.getSize(t) }, e.prototype.getNormalizedSize = function (t) { var e = this.get("sizeController"); if (e) return e.getNormalizedSize(t) }, e.prototype.getGroupScales = function () { var t = this.get("groupScales"); if (!t) { var e = a.values(this.get("attrs")), n = a.filter(e, (function (t) { return a.contains(ke, t.type) })), i = a.map(n, (function (t) { return a.filter(t.scales, (function (t) { return t.isCategory })) })); t = a.uniq(a.flatten(i)), this.set("groupScales", t) } return t }, e.prototype.getLegendFields = function () { var t = [], e = this.get("attrOptions"); return ke.forEach((function (n) { var i = e[n], r = a.get(i, "fields", []); t = t.concat(r) })), a.uniq(t) }, e.prototype.isShareTooltip = function () { var t = this.get("shareTooltip"); return this.getYScale() || (t = !1), t }, e.prototype.findPoint = function (t, e) { return this.get("tooltipController").findPoint(t, e) }, e.prototype.getTooltipItems = function (t, e) { return this.get("tooltipController").getTooltipItems(t, e) }, e.prototype.getYMinValue = function () { var t = this.getYScale(), e = t.min, n = t.max; return e >= 0 ? e : n <= 0 ? n : 0 }, e.prototype.getShapeId = function (t) { var e = this.get("id"), n = this.get("keyFields"); if (n && n.length > 0) a.each(n, (function (n) { e = e + "-" + t[n] })); else { var i = this.get("type"), r = this.getXScale(), o = this.getYScale(), s = r.field || "x", u = o.field || "y", l = t[u], c = void 0; c = r.isIdentity ? r.values[0] : t[s], e = "interval" === i || "schema" === i ? e + "-" + c : "line" === i || "area" === i || "path" === i ? e + "-" + i : e + "-" + c + "-" + l; var h = this.getGroupScales(); a.isEmpty(h) || a.each(h, (function (n) { var i = n.field; "identity" !== n.type && (e = e + "-" + t[i]) })) } return e }, e.prototype.getOriginDataByPoint = function (t) { var e, n = this.getXScale(), i = this.getYScale(), r = this.get("coord").invert(t), o = n.invert(r.x), a = i.invert(r.y), s = n.field, u = i.field; return (e = {})[s] = o, e[u] = a, e }, e.prototype.createShapePointsCfg = function (t) { var e = this.getXScale(), n = this.getYScale(); return { x: this._normalizeValues(t[e.field], e), y: n ? this._normalizeValues(t[n.field], n) : t.y ? t.y : .1, y0: n ? n.scale(this.getYMinValue()) : void 0 } }, e.prototype.draw = function (t, e, n, i) { for (var r = 0, o = t.length; r < o; r += 1) { var a = t[r]; this.drawPoint(a, e, n, i + r) } }, e.prototype.drawPoint = function (t, e, n, i) { var r = t.shape, o = this.getDrawCfg(t), a = n.drawShape(r, o, e); this.appendShapeInfo(a, i) }, e.prototype.getDrawCfg = function (t) { var e = { origin: t, x: t.x, y: t.y, color: t.color, size: t.size, shape: t.shape, isInCircle: this.isInCircle(), opacity: t.opacity }, n = this.get("styleOptions"); return n && (e.style = this._getStyleCfg(n, t._origin)), this.get("generatePoints") && (e.points = t.points, e.nextPoints = t.nextPoints), e.id = this.getShapeId(t._origin), e }, e.prototype.clearInner = function () { var t = this.get("shapeContainer"); t && t.clear(); var e = this.get("labelController"); e && e.clear(), this.set("attrs", {}), this.set("groupScales", null); var n = this.get("sizeController"); n && n.clear(), this.get("tooltipController").clear() }, e.prototype._createAttrOption = function (t, e, n) { if (a.isObject(e)) this._setAttrOptions(t, e); else { var i = {}; a.isNumber(e) ? i.values = [e] : i.fields = Oe(e), n && (a.isFunction(n) ? i.callback = n : i.values = n), this._setAttrOptions(t, i) } }, e.prototype._initContainer = function () { var t = this.get("container"), e = this.get("view").get("id"), n = this.get("visible"), i = t.addGroup({ viewId: e, visible: n }); this.set("shapeContainer", i) }, e.prototype._initController = function () { var t = new pe(this); this.set("tooltipController", t); var e = new we(this); this.set("labelController", e) }, e.prototype._setAttrOptions = function (t, e) { this.get("attrOptions")[t] = e }, e.prototype.createScale = function (t, e) { var n = this.get("view"), i = this.get("scales"), r = i[t]; return r || (r = n._initScale(t, e), i[t] = r), r }, e.prototype._initAttrs = function (t) { var e = this, n = this.get("attrs"), i = this.get("attrOptions"), r = this.get("coord"), o = this.get("theme"), s = this.get("type"); a.each(i, (function (i, l) { var c = Object(u.__assign)({}, i), h = c.callback, p = c.values, f = c.fields, d = void 0 === f ? [] : f; "position" === l && 1 === d.length && "theta" === r.type && d.unshift("1"); var g = a.map(d, (function (n) { return e.createScale(n, t) })); if ("theta" === r.type && "position" === l && g.length > 1) { var v = g[1]; v.change({ nice: !1, min: 0, max: Math.max.apply(null, v.values) }) } if (c.scales = g, -1 !== a.indexOf(["color", "size", "shape", "opacity"], l) && 1 === g.length && g[0].isIdentity) c.values = g[0].values; else if (!h && !p) if ("size" === l) c.values = o.sizes; else if ("shape" === l) c.values = o.shapes[s] || []; else if ("opacity" === l) c.values = o.opacities; else if ("color" === l && g.length) { var y = g[0].values.length; c.values = y <= 10 ? o.colors : o.colors_20 } var m = xt(l); n[l] = new m(c) })) }, e.prototype._updateStackRange = function (t, e, n) { for (var i = a.flatten(n), r = e.min, o = e.max, s = 0, u = i.length; s < u; s += 1) { var l = i[s], c = Math.min.apply(null, l[t]), h = Math.max.apply(null, l[t]); c < r && (r = c), h > o && (o = h) } (r < e.min || o > e.max) && e.change({ min: r, max: o }) }, e.prototype._groupData = function (t) { var e = this.getGroupScales().map((function (t) { return t.field })); return a.group(t, e) }, e.prototype._saveOrigin = function (t) { return a.map(t, (function (t) { var e; return Object(u.__assign)(Object(u.__assign)({}, t), ((e = {})._origin = t, e)) })) }, e.prototype._numeric = function (t) { for (var e = this.getAttr("position").scales, n = 0, i = t.length; n < i; n += 1)for (var r = t[n], o = 0; o < Math.min(2, e.length); o += 1) { var a = e[o]; if (a.isCategory) { var s = a.field; r[s] = a.translate(r[s]) } } }, e.prototype._processData = function (t) { var e = this, n = this._groupData(t); return a.map(n, (function (t) { var n = e._saveOrigin(t); return e._numeric(n), n })) }, e.prototype._adjustData = function (t) { var e = this, n = this.get("adjustOptions"), i = t; if (n) { this.get("theme"); var r = this.getXScale(), o = this.getYScale(), s = r.field, l = o ? o.field : null; n.forEach((function (t) { var n = Object(u.__assign)({ xField: s, yField: l }, t), c = t.type; if ("dodge" === c) { var h = []; if (r.isCategory || r.isIdentity) h.push("x"); else { if (o) throw new Error("dodge is not support linear attribute, please use category attribute!"); h.push("y") } n.adjustNames = h, n.dodgeRatio = e.get("widthRatio").column } else if ("stack" === c) { var p = e.get("coord"); if (!o) { n.height = p.getHeight(); var f = e.getDefaultValue("size") || 3; n.size = f } !p.isTransposed && a.isNil(n.reverseOrder) && (n.reverseOrder = !0) } var d = new (it(c))(n); i = d.process(i), "stack" === c && o && e._updateStackRange(l, o, i) })) } return i }, e.prototype._getShapeFactory = function () { var t = this.get("shapeFactory"); t || (t = Nt(this.get("shapeType")), this.set("shapeFactory", t)); return t }, e.prototype._generatePoints = function (t) { for (var e = this._getShapeFactory(), n = this.getAttr("shape"), i = 0, r = t.length; i < r; i += 1) { var o = t[i], a = this.createShapePointsCfg(o), s = n ? this.getAttrValues(n, o) : null, u = e.getShapePoints(s, a); o.points = u } }, e.prototype._normalizeValues = function (t, e) { var n = []; if (a.isArray(t)) for (var i = 0, r = t.length; i < r; i += 1) { var o = t[i]; n.push(e.scale(o)) } else n = e.scale(t); return n }, e.prototype._beforeMapping = function (t) { var e = this; if (this.get("sortable")) { var n = this.getXScale(), i = n.field; a.each(t, (function (t) { t.sort((function (t, e) { return n.translate(t[i]) - n.translate(e[i]) })) })) } this.get("generatePoints") && (a.each(t, (function (t) { e._generatePoints(t) })), a.each(t, (function (e, n) { var i = t[n + 1]; i && (e[0].nextPoints = i[0].points) }))) }, e.prototype._mapping = function (t) { for (var e = this.get("attrs"), n = [], i = 0, r = t.length; i < r; i += 1) { var o = t[i], s = { _origin: o._origin, points: o.points, nextPoints: o.nextPoints }; for (var u in e) if (e.hasOwnProperty(u)) { var l = e[u], c = l.names, h = this.getAttrValues(l, o); if (c.length > 1) for (var p = 0; p < h.length; p += 1) { var f = h[p]; s[c[p]] = a.isArray(f) && 1 === f.length ? f[0] : f } else 1 === h.length || "color" === c[0] ? s[c[0]] = h[0] : s[c[0]] = h } this._convertPoint(s), n.push(s) } return n }, e.prototype._convertPoint = function (t) { var e = t.x, n = t.y; if (!a.isNil(e) && !a.isNil(n)) { var i, r, o, s = this.get("coord"); if (a.isArray(n) && a.isArray(e)) { i = [], r = []; for (var u = 0, l = 0, c = e.length, h = n.length; u < c && l < h; u += 1, l += 1)o = s.convertPoint({ x: e[u], y: n[l] }), i.push(o.x), r.push(o.y) } else if (a.isArray(n)) r = [], n.forEach((function (t) { o = s.convertPoint({ x: e, y: t }), i && i !== o.x ? (a.isArray(i) || (i = [i]), i.push(o.x)) : i = o.x, r.push(o.y) })); else if (a.isArray(e)) i = [], e.forEach((function (t) { o = s.convertPoint({ x: t, y: n }), r && r !== o.y ? (a.isArray(r) || (r = [r]), r.push(o.y)) : r = o.y, i.push(o.x) })); else { var p = s.convertPoint({ x: e, y: n }); i = p.x, r = p.y } t.x = i, t.y = r } }, e.prototype._getStyleCfg = function (t, e) { var n = t.fields, i = void 0 === n ? [] : n, r = t.callback, o = t.cfg; if (o) return o; var a = i.map((function (t) { return e[t] })); return r.apply(void 0, a) }, e.prototype._sort = function (t) { var e = this.getXScale(), n = e.field; a.each(t, (function (t) { t.sort((function (t, i) { return e.translate(t._origin[n]) - e.translate(i._origin[n]) })) })), this.set("dataArray", t) }, e }(A), Ae = ["start", "process", "end", "reset"], Le = function () { function t(t) { var e = this._getDefaultCfg(); a.assign(this, e, t), this.canvas = this.view.get("canvas"), this._eventHandlers = [], this._bindEvents() } return t.prototype._getDefaultCfg = function () { return { startEvent: "mousedown", processEvent: "mousemove", endEvent: "mouseup", resetEvent: "dblclick" } }, t.prototype._start = function (t) { this.preStart(t), this.start(t), this.afterStart(t) }, t.prototype.preStart = function (t) { }, t.prototype.start = function (t) { }, t.prototype.afterStart = function (t) { }, t.prototype._process = function (t) { this.preProcess(t), this.process(t), this.afterProcess(t) }, t.prototype.preProcess = function (t) { }, t.prototype.process = function (t) { }, t.prototype.afterProcess = function (t) { }, t.prototype._end = function (t) { this.preEnd(t), this.end(t), this.afterEnd(t) }, t.prototype.preEnd = function (t) { }, t.prototype.end = function (t) { }, t.prototype.afterEnd = function (t) { }, t.prototype._reset = function (t) { this.preReset(t), this.reset(t), this.afterReset(t) }, t.prototype.preReset = function (t) { }, t.prototype.reset = function (t) { }, t.prototype.afterReset = function (t) { }, t.prototype._bindEvents = function () { var t = this; a.each(Ae, (function (e) { var n = t[e + "Event"], i = a.wrapBehavior(t, "_" + e); t.view.on(n, i), t._eventHandlers.push({ type: n, handler: i }) })) }, t.prototype._unbindEvents = function () { var t = this, e = this._eventHandlers; a.each(e, (function (e) { t.view.off(e.type, e.handler) })) }, t.prototype.destroy = function () { this._unbindEvents(), this._reset() }, t }(), Te = {}, De = function (t) { return Te[t] }, je = function (t, e) { if (De(t)) throw new Error("Interaction type '" + t + "' existed."); Te[t] = e }; var Ie = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ animate: C.animate, widthRatio: C.widthRatio, canvas: null, container: null, coord: null, elements: [], guideController: null, id: a.uniqueId("view_"), options: {}, padding: C.theme.padding, parent: null, scaleController: null, scales: {}, start: { x: 0, y: 0 }, end: { x: 1, y: 1 }, width: null, height: null, theme: null, title: null, views: [], visible: !0, backgroundStyle: {}, interactions: {} }, e)) || this; return n.init(), n } return Object(u.__extends)(e, t), e.prototype.axis = function (t, e) { var n = this.get("options") || {}; return !1 === t ? (n.axes = !1, a.set(n, "axes", !1)) : a.isObject(t) ? a.set(n, ["axes", "fields"], t) : a.isString(t) ? a.set(n, ["axes", "fields", t], e) : a.set(n, "axes", e), this }, e.prototype.title = function (t) { }, e.prototype.tooltip = function (t, e) { var n = this.get("options"); return n.tooltip || (n.tooltip = {}), !1 === t ? n.tooltip = !1 : a.isObject(t) ? a.mix(n.tooltip, t) : a.mix(n.tooltip, e), this }, e.prototype.legend = function (t, e) { var n = this.get("options"); return !1 === t ? a.set(n, "legends", !1) : a.isObject(t) ? a.set(n, "legends", t) : a.isString(t) ? a.set(n, ["legends", "fields", t], e) : a.set(n, "legends", e), this }, e.prototype.annotation = function () { return this.get("annotationController") }, e.prototype.changeData = function (t) { return this.emit("beforechangedata"), this.set("data", t), this._initData(), this.emit("afterchangedata"), this.repaint(), this }, e.prototype.data = function (t) { return this.set("data", t), this._initData(), this }, e.prototype.scale = function (t, e) { var n = this.get("options").scales; return a.isObject(t) ? a.mix(n, t) : n[t] = e, this }, e.prototype.filter = function (t, e) { var n = this.get("options"); return n.filters || (n.filters = {}), n.filters[t] = e, this }, e.prototype.coordinate = function (t, e) { var n = this.get("coordController"); return a.isObject(t) ? n.reset(t) : n.reset({ type: t, cfg: e }), n }, e.prototype.createView = function (t) { void 0 === t && (t = {}); var n = this.get("views"), i = Object(u.__assign)({ theme: this.get("theme"), parent: this, container: this.get("panelGroup"), canvas: this.get("canvas"), animate: this.get("animate") }, t); i.options = a.mix({}, this._getSharedOptions(), t.options); var r = new e(i); return r.set("id", a.uniqueId("view_")), n.push(r), this.emit("addview", { view: r }), r }, e.prototype.removeView = function (t) { var e = this.get("views"); a.pull(e, t), t.destroy() }, e.prototype.facet = function (t) { var e = this.get("facet"); e && e.destroy(); var n = a.get(t, "type"), i = function (t) { return oe[a.lowerFirst(t)] }(n); if (!i) throw new Error("facet '" + n + "' is not exist!"); this.set("facet", new i(this, t)) }, e.prototype.animate = function (t) { return this.get("options").animate = t, this.set("animate", t), this }, e.prototype.render = function (t) { return this._clearInner(), this.emit("beforerender"), this._beforeRender(), this.emit("beforedraw"), this._drawGuides(), this._drawElements(), this._renderFacet(), this.get("views").length && a.each(this.get("views"), (function (e) { e.render(t) })), this._addBackShape(), this._canvasDraw(t), this.emit("afterdraw"), this.emit("afterrender"), this.set("rendered", !0), this }, e.prototype.changeVisible = function (t, e) { a.each(this.get("elements"), (function (e) { e.changeVisible(t, !0) })), this.get("container").set("visible", t); var n = this.get("annotationController"); n && n.changeVisible(t); var i = this.get("axisController"); i && i.changeVisible(t), e || this.get("canvas").draw() }, e.prototype.isShapeInView = function (t) { var e = this.get("id"), n = t.get("viewId"); if (n) return n === e; for (var i = this.get("container"), r = t.get("parent"); r;) { if (r === i) return t.set("viewId", this.get("id")), !0; r = r.get("parent") } return !1 }, e.prototype.isPointInView = function (t) { var e = this.get("viewRange"); return t.x > e.minX && t.x < e.maxX && t.y > e.minY && t.y < e.maxY }, e.prototype.getXScale = function () { var t = this.get("elements"); return t.length ? t[0].getXScale() : null }, e.prototype.getYScales = function () { var t = this.get("elements"), e = []; return t.forEach((function (t) { var n = t.getYScale(); n && -1 === a.indexOf(e, n) && e.push(n) })), e }, e.prototype.getXY = function (t) { var e, n, i = this.get("coord"), r = this._getScales("x"), o = this._getScales("y"); for (var s in t) r[s] && (e = r[s].scale(t[s])), o[s] && (n = o[s].scale(t[s])); return a.isNil(e) || a.isNil(n) ? null : i.convert({ x: e, y: n }) }, e.prototype.showTooltip = function (t) { return this.get("tooltipController").showTooltip(t, this), this }, e.prototype.hideTooltip = function () { return this.get("tooltipController").hideTooltip(), this }, e.prototype.getTooltipItems = function (t) { var e = [], n = this.getElements(); return a.each(n, (function (n) { var i = n.get("dataArray"), r = []; a.each(i, (function (e) { var i = n.findPoint(t, e); if (i) { var o = n.getTooltipItems(i); r = r.concat(o) } })), e = e.concat(r) })), e }, e.prototype.init = function () { this._initTheme(), this._initLayers(), this.initRegion(), this._initOptions(), this._initControllers(), this._bindEvents(), this.get("data") && this._initData() }, e.prototype.destroy = function () { this._clearEvents(), this.off(), this.clear(), this.clearAllInteractions(), this._destroyViewGroups(), t.prototype.destroy.call(this) }, e.prototype.clear = function () { return this.set("isUpdate", !1), this._clearInner(), this._destroyElements(), this }, e.prototype.repaint = function () { return this.set("isUpdate", !0), this.render(), this }, e.prototype.eachShape = function (t) { var e = this, n = this.get("views"), i = this.get("canvas"); a.each(n, (function (e) { e.eachShape(t) })); var r = this.get("elements"); return a.each(r, (function (n) { var i = n.getShapes(); a.each(i, (function (i) { var r = i.get("origin"); if (a.isArray(r)) { var o = r.map((function (t) { return t._origin })); t(o, i, n, e) } else { var s = r._origin; t(s, i, n, e) } })) })), i.draw(), this }, e.prototype.getElements = function (t) { void 0 === t && (t = !1); var e = Object(u.__spreadArrays)(this.get("elements")); if (t) { var n = this.get("views"); a.each(n, (function (n) { e = e.concat(n.getElements(t)) })) } return e }, e.prototype.getFilteredValues = function (t) { var e = this.get("scales")[t].values, n = this._getFilters(); return n && n[t] ? e.filter(n[t]) : e.slice(0) }, e.prototype.getFilteredOutValues = function (t) { var e = this.get("scales")[t].values, n = this._getFilters(); return n && n[t] ? e.filter((function (e) { return !n[t](e) })) : [] }, e.prototype.setActive = function (t, e) { return void 0 === e && (e = !0), this.get("shapeStateController").setState("active", t, e), this }, e.prototype.setSelected = function (t, e) { return void 0 === e && (e = !0), this.get("shapeStateController").setState("selected", t, e), this }, e.prototype.setInactive = function (t, e) { return void 0 === e && (e = !0), this.get("shapeStateController").setState("inactive", t, e), this }, e.prototype.clearAllInteractions = function () { var t = this.get("interactions"); return a.each(t, (function (e, n) { e.destroy(), delete t[n] })), this }, e.prototype.clearInteraction = function (t) { var e = this.get("interactions"); return e[t] && (e[t].destroy(), delete e[t]), this }, e.prototype.interaction = function (t, e) { void 0 === e && (e = {}), e.view = this; var n = new (De(t))(e); return this._setInteraction(t, n), this }, e.prototype._renderFacet = function () { var t = this.get("facet"); t && t.render() }, e.prototype._getSharedOptions = function () { var t = this.get("options"); return { scales: t.scales, coord: t.coord, axes: t.axes } }, e.prototype._getFilters = function () { return this.get("options").filters }, e.prototype._initTheme = function () { var t = this.get("theme"), e = {}, n = {}; a.isObject(t) ? n = t : a.isString(t) && (n = p(t)), a.deepMix(e, C.theme, n), this.set("theme", e) }, e.prototype._bindEvents = function () { this.get("eventController").bindEvents() }, e.prototype._clearEvents = function () { this.get("eventController").clearEvents() }, e.prototype._initLayers = function () { var t = this.get("container"), e = t.addGroup({ name: "backgroundGroup", zIndex: 0, viewId: this.get("id") }), n = t.addGroup({ name: "panelGroup", zIndex: 1, viewId: this.get("id") }), i = t.addGroup({ name: "frontgroundGroup", zIndex: 2 }); this.set("frontgroundGroup", i), this.set("backgroundGroup", e), this.set("panelGroup", n) }, e.prototype.initRegion = function () { var t = this.get("start"), e = t.x, n = t.y, i = this.get("end"), r = i.x, s = i.y, u = this.get("parent"); if (u) { var l = u.get("panelRange"), c = l.width, h = l.height, p = l.tl; r - e <= 1 && (e *= c, n *= h, r *= c, s *= h), e += p.x, r += p.x, n += p.y, s += p.y } else if (r - e <= 1) { e *= c = this.get("width"), n *= h = this.get("height"), r *= c, s *= h } var f = r - e, d = s - n; this.set("viewRange", new o.BBox(e, n, f, d)); var g = function (t) { var e, n, i, r; return a.isNumber(t) || a.isString(t) ? e = n = i = r = t : a.isArray(t) && (e = t[0], i = a.isNil(t[1]) ? t[0] : t[1], r = a.isNil(t[2]) ? t[0] : t[2], n = a.isNil(t[3]) ? i : t[3]), [e, i, r, n] }(this.get("padding")), v = g[0], y = g[1], m = g[2], x = g[3], _ = new o.BBox(e + x, n + v, f - x - y, d - v - m); this.set("panelRange", _) }, e.prototype._initData = function () { }, e.prototype._initOptions = function () { var t = this, e = a.mix({}, this.get("options")); e.scales || (e.scales = {}), e.coord || (e.coord = {}), a.isUndefined(e.animate) || this.set("animate", !!e.animate), e.elements && e.elements.length && a.each(e.elements, (function (e) { t._createElement(e) })); var n = this.get("scaleController"); n && (n.defs = e.scales); var i = this.get("coordController"); i && i.reset(e.coord), this.set("options", e) }, e.prototype._drawGuides = function () { this.get("keepLegend") || this._renderLegend(), this._renderAnnotations(), this._renderAxes(), this._renderTooltip() }, e.prototype._renderAxes = function () { var t = this.get("options"); if (!1 !== t.axes) { var e = this.get("axisController"); e.container = this.get("backgroundGroup").addGroup({ name: "axisGroup" }), e.coord = this.get("coord"), e.options = a.get(t, "axes", {}); var n = this.getXScale(), i = this.getYScales(), r = this.get("id"); e.createAxis(n, i, r) } }, e.prototype._renderTooltip = function () { var t = this.get("options"); if (a.isNil(t.tooltip) || !1 !== t.tooltip) { var e = this.get("tooltipController"); e.options = t.tooltip || {}, e.renderTooltip() } }, e.prototype._initControllers = function () { var t = this.get("options"), e = this.get("theme"), n = this.get("canvas"), i = new Mt(t.scales); this.set("scaleController", i); var r = new St(t.coord); this.set("coordController", r); var o = new ie({ canvas: this.get("canvas"), view: this }); this.set("eventController", o); var a = new $t({ view: this }); this.set("shapeStateController", a); var s = new Ht({ view: this }); this.set("legendController", s); var u = new Ot({ theme: this.get("theme"), view: this, frontgroundGroup: this.get("frontgroundGroup").addGroup(), backgroundGroup: this.get("backgroundGroup").addGroup(), options: t.annotations || [] }); this.set("annotationController", u); var l = new Wt({ canvas: n, theme: e }); this.set("axisController", l); var c = new Qt({ view: this, theme: e }); this.set("tooltipController", c) }, e.prototype._initScale = function (t, e) { void 0 === e && (e = []); var n = this.get("scales"), i = n[t], r = e, o = this._getLegendFields(); r.length && -1 === o.indexOf(t) || (r = this.get("data") || []); var a = this.get("scaleController"); return i || (i = a.createScale(t, r), n[t] = i), i }, e.prototype._createElement = function (t) { var e, n = t.type; if (ue(n)) { var i = Object(u.__assign)(Object(u.__assign)({}, t), { container: this.get("panelGroup").addGroup(), frontgroundGroup: this.get("frontgroundGroup").addGroup(), view: this, canvas: this.get("canvas"), theme: this.get("theme") }), r = ue(n); e = new r(i), a.each(t, (function (t, n) { e[n] && e[n](t) })), this._addElement(e) } }, e.prototype._addElement = function (t) { this.get("elements").push(t), t.bindStates() }, e.prototype._drawElements = function () { this.emit("beforedrawelements"), a.each(this.get("elements"), (function (t) { t.paint() })), this.emit("afterdrawelements") }, e.prototype._clearElements = function () { a.each(this.get("elements"), (function (t) { t.clear() })) }, e.prototype._destroyElements = function () { for (var t = this.get("elements"); t.length > 0;) { t.shift().destroy() } }, e.prototype._clearInner = function () { this.set("scales", {}), this.emit("beforeclearinner"), this.get("options").elements = [], this._clearElements(); var t = this.get("facet"); t && t.clear(); var e = this.get("annotationController"); e && e.reset(); var n = this.get("axisController"); n && n.clear(); var i = this.get("tooltipController"); if (i && i.clear(), !this.get("keepLegend")) { var r = this.get("legendController"); r && r.clear() } var o = this.get("backgroundGroup"), a = this.get("panelGroup"); o.get("backShape") && o.get("backShape").remove(), a.get("backShape") && a.get("backShape").remove(), this.emit("afterclearinner") }, e.prototype._beforeRender = function () { a.each(this.get("views"), (function (t) { t._beforeRender() })), this._initView() }, e.prototype._initView = function () { this._execFilters(), this._initCoord(), this.emit("beforeinitelements"), this._initElements(), this._adjustScales() }, e.prototype._initCoord = function () { var t = this.get("panelRange"), e = this.get("coordController").createCoord(t.bl, t.tr); this.set("coord", e) }, e.prototype._getScales = function (t) { var e = this.get("elements"); return a.reduce(e, (function (e, n) { var i = "x" === t ? n.getXScale() : n.getYScale(); return i && !a.has(e, i.field) && (e[i.field] = i), e }), {}) }, e.prototype._initElements = function () { var t = this.get("filteredData"), e = this.get("coord"), n = this.get("id"), i = this.get("options"), r = this.get("animate"), o = this.get("widthRatio"), s = i.tooltip && i.tooltip.shared; a.each(this.get("elements"), (function (i, u) { i.set("data", t), i.set("coord", e), i.set("id", n + "-element-" + u), i.set("animate", r), i.set("widthRatio", a.deepMix({}, o, i.get("widthRatio"))), a.isBoolean(s) && i.set("shareTooltip", s), i.init() })) }, e.prototype._adjustScales = function () { this._adjustCategoryScalesRange(); var t = this.get("elements"), e = this.get("scaleController").defs; t.forEach((function (t) { if ("interval" === t.get("type")) { var n = t.getYScale(), i = n.field, r = n.min, o = n.max, a = n.type; e[i] && e[i].min || "time" === a || (r > 0 ? n.change({ min: 0 }) : o <= 0 && n.change({ max: 0 })) } })) }, e.prototype._adjustCategoryScalesRange = function () { var t = this.get("coord"), e = this.getXScale(), n = this.getYScales(), i = this.get("widthRatio"), r = []; e && r.push(e), r = r.concat(n); var o = function (t) { if (t.isPolar) { var e = t.startAngle; return t.endAngle - e == 2 * Math.PI } return !1 }(t), a = this.get("scaleController").defs; r.forEach((function (e) { var n = e.field, r = e.values; if ((e.isCategory || e.isIdentity) && r && (!a[n] || !a[n].range)) { var s = r.length, u = void 0; if (1 === s) u = [.5, 1]; else { var l = 0; u = o ? t.isTransposed ? [(l = 1 / s * i.multiplePie) / 2, 1 - l / 2] : [0, 1 - 1 / s] : [l = 1 / s * 1 / 2, 1 - l] } e.range = u } })) }, e.prototype._execFilters = function () { this.get("data"); var t = this.get("data") || [], e = this._getFilters(); e && (t = t.filter((function (t) { var n = !0; return a.each(e, (function (e, i) { if (e && !(n = e(t[i], t))) return !1 })), n }))), this.set("filteredData", t) }, e.prototype._addBackShape = function () { var t = this.get("backgroundGroup"), e = this.get("viewRange"), n = { x: e.x, y: e.y, width: e.width, height: e.height, fill: "rgba(255,255,255,0)" }, i = a.mix(this.get("theme").backgroundStyle, this.get("backgroundStyle")), r = t.addShape("rect", { attrs: a.mix(n, i), zIndex: -1 }); t.set("backShape", r), t.sort(); var o = this.get("panelGroup"), s = this.get("panelRange"), u = o.addShape("rect", { attrs: { x: s.x, y: s.y, width: s.width, height: s.height, fill: "rgba(255,255,255,0)" }, zIndex: -1 }); o.set("backShape", u), o.sort() }, e.prototype._destroyViewGroups = function () { this.get("frontgroundGroup").remove(), this.get("backgroundGroup").remove(), this.get("panelGroup").remove(), this.set("frontgroundGroup", null), this.set("backgroundGroup", null), this.set("panelGroup", null) }, e.prototype._canvasDraw = function (t) { var e = this.get("canvas"); if (!t) { var n = this.get("views"); if (this.get("animate")) { var i = this.get("isUpdate"); a.each(n, (function (t) { K.execAnimation(t, i) })), K.execAnimation(this, i), e.draw() } else e.draw() } }, e.prototype._renderLegend = function () { this.get("legendController").render() }, e.prototype._renderAnnotations = function () { var t = this.get("coord"), e = this.get("annotationController"); e.xScales = this._getScales("x"), e.yScales = this._getScales("y"), e.render(t) }, e.prototype._getLegendFields = function () { var t = []; return this.get("elements").forEach((function (e) { var n = e.getLegendFields(); t = t.concat(n) })), a.uniq(t) }, e.prototype._setInteraction = function (t, e) { var n = this.get("interactions"); n[t] && n[t].destroy(), n[t] = e }, e }(A), Be = Ie, Ee = function (t, e) { Ie.prototype[t] = function (t) { void 0 === t && (t = {}), t.view = this, t.theme = this.get("theme"), t.container = this.get("panelGroup").addGroup(), t.frontgroundGroup = this.get("frontgroundGroup").addGroup(), t.canvas = this.get("canvas"); var n = new e(t); return this._addElement(n), n } }, Fe = function (t) { function e(e) { return t.call(this, Object(u.__assign)({ containerDOM: null, containerId: null, width: C.width, height: C.height, pixelRatio: C.pixelRatio, renderer: C.renderer, forceFit: !1 }, e)) || this } return Object(u.__extends)(e, t), e.prototype.init = function () { this.set("id", a.uniqueId("chart")), this._initCanvas(), this._initEvents(), t.prototype.init.call(this) }, e.prototype.changeSize = function (t, e, n) { return void 0 === n && (n = !0), this.get("canvas").changeSize(t, e), this.set("width", t), this.set("height", e), this.initRegion(), n && (this.render(), this.emit("afterchangesize")), this }, e.prototype.render = function (e) { return t.prototype.render.call(this, e), this.get("canvas").draw(), this }, e.prototype.destroy = function () { window.removeEventListener("resize", a.getWrapBehavior(this, "_initForceFitEvent")), t.prototype.destroy.call(this) }, e.prototype._initCanvas = function () { var t = new o.Canvas({ containerDOM: this.get("containerDOM"), containerId: this.get("containerId"), width: this.get("width"), height: this.get("height"), renderer: this.get("renderer"), pixelRatio: this.get("pixelRatio") }); if (this.set("canvas", t), this.set("container", t), this.get("forceFit")) { var e = this._getContainerDOM(), n = l.getWidth(e, this.get("width")); this.set("width", n) } }, e.prototype._initEvents = function () { this.get("forceFit") && window.addEventListener("resize", a.wrapBehavior(this, "_initForceFitEvent")) }, e.prototype._initForceFitEvent = function () { var t = setTimeout(a.wrapBehavior(this, "forceFit"), 200); clearTimeout(this.get("resizeTimer")), this.set("resizeTimer", t) }, e.prototype.forceFit = function () { if (!this.destroyed) { var t = this._getContainerDOM(), e = this.get("width"), n = l.getWidth(t, e); if (0 !== n && n !== e) { var i = this.get("height"); this.changeSize(n, i) } return this } }, e.prototype._getContainerDOM = function () { var t = this.get("containerDOM"); return a.isElement(t) || (t = document.getElementById(this.get("containerId"))), t }, e }(Be); function Re(t) { var e = [], n = t.x, i = t.y; return i = a.isArray(i) ? i : [i], a.each(i, (function (t, i) { var r = { x: a.isArray(n) ? n[i] : n, y: t }; e.push(r) })), e } function ze(t, e) { var n = e.color, i = e.opacity; n && (t.fill = n), a.isNumber(i) && (t.opacity = t.fillOpacity = i) } function Ne(t, e) { var n = e.color, i = e.opacity; n && (t.stroke = n), a.isNumber(i) && (t.opacity = t.strokeOpacity = i) } function Ye(t) { var e = t.style; return Ne(e, t), a.isNumber(t.size) && (e.lineWidth = t.size), e } function He(t) { var e = t.style; return ze(e, t), e } function Ge(t, e, n) { var i = [], r = [], o = [], s = [], u = t.isInCircle; return a.each(t.points, (function (t) { o.push(t[1]), s.push(t[0]) })), s = s.reverse(), r.push(o, s), a.each(r, (function (r, o) { var a = [], s = n.parsePoints(r), l = s[0]; u && s.push({ x: l.x, y: l.y }), a = e ? Dt(s, !1, t.constraint) : Tt(s, !1), o > 0 && (a[0][0] = "L"), i = i.concat(a) })), i.push(["Z"]), i } var We = Rt("area", { defaultShapeType: "area", getDefaultPoints: function (t) { var e = t.x, n = t.y, i = t.y0; return (n = a.isArray(n) ? n : [i, n]).map((function (t) { return { x: e, y: t } })) }, drawShape: function (t, e, n) { var i = this.getShape(t), r = i.name, o = this._theme; if (o && o.area && o.area[r]) { var s = o.area[r].default; e.style = a.mix({}, s, e.style) } var u = 1 === e.points.length && e.showSinglePoint ? function (t, e, n) { var i = t._coord.convertPoint(e.points[0][1]); return n.addShape("circle", { attrs: a.mix({ x: i.x, y: i.y, r: 2, fill: e.color }, e.style) }) }(this, e, n) : i.draw(e, n); return u && (u.set("origin", e.origin), u.id = e.splitedIndex ? e.id + e.splitedIndex : e.id, u.name = this.name), u }, getMarkerStyle: function (t, e) { var n, i = this.getShape(t); n = i.getMarkerStyle ? i.getMarkerStyle(e) : function (t) { return { symbol: function (t, e) { return [["M", t - 5.5, e - 4], ["L", t + 5.5, e - 4], ["L", t + 5.5, e + 4], ["L", t - 5.5, e + 4], ["Z"]] }, radius: 5, fill: t.color } }(e); var r = this._theme, o = i.name; return r && r.area && r.area[o] && (n = a.mix({}, r.area[o].default, n)), n } }); zt("area", "area", { draw: function (t, e) { var n = He(t), i = Ge(t, !1, this); return e.addShape("path", { attrs: a.mix(n, { path: i }) }) } }), zt("area", "smooth", { draw: function (t, e) { var n = He(t), i = this.getCoord(); t.constraint = [[i.start.x, i.end.y], [i.end.x, i.start.y]]; var r = Ge(t, !0, this); return e.addShape("path", { attrs: a.mix(n, { path: r }) }) } }), zt("area", "line", { draw: function (t, e) { var n = Ye(t), i = Ge(t, !1, this); return e.addShape("path", { attrs: a.mix(n, { path: i }) }) } }), zt("area", "smoothLine", { draw: function (t, e) { var n = Ye(t), i = Ge(t, !0, this); return e.addShape("path", { attrs: a.mix(n, { path: i }) }) } }); var Ve = We; function Xe(t, e, n) { if (!t.length) return []; var i, r = [], o = []; return t.forEach((function (t) { i = t._origin ? t._origin[n] : t[n], e ? a.isNil(i) || o.push(t) : a.isArray(i) && a.isNil(i[0]) || a.isNil(i) ? o.length && (r.push(o), o = []) : o.push(t) })), o.length && r.push(o), r } var qe = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ type: "area", shapeType: "area", generatePoints: !0, sortable: !0, connectNulls: !1, showSinglePoint: !1 }, e)) || this; return n.set("shapeFactory", Ve), n } return Object(u.__extends)(e, t), e.prototype.draw = function (t, e, n, i) { var r = this, o = this.getDrawCfg(t[0]), s = Xe(t, this.get("connectNulls"), this.getYScale().field); o.origin = t, a.each(s, (function (t, a) { o.splitedIndex = a; var s = t.map((function (t) { return t.points })); o.points = s; var u = n.drawShape(o.shape, o, e); r.appendShapeInfo(u, i + a) })) }, e }(Pe); var Ue = function () { function t(t) { this.element = null, this.element = t } return t.prototype.getSize = function (t) { var e = this._getSizeValue(t); if (a.isUndefined(e)) { var n = this._getDefaultSize(); return this._toCoordinateSize(n) } return e }, t.prototype.getNormalizedSize = function (t) { var e = this._getSizeValue(t); return a.isUndefined(e) ? this._getDefaultSize() : this._toNormalizedSize(e) }, t.prototype.clear = function () { this._defaultSize = null }, t.prototype._getSizeValue = function (t) { var e, n = this.element, i = n.getAttr("size"); return i && (e = n.getAttrValues(i, t)[0]), e }, t.prototype._getDodgeCount = function (t) { var e, n = this.element.get("adjustOptions"); if (a.each(n, (function (t) { if ("dodge" === t.type) return e = t.dodgeBy, !1 })), e) { var i = a.flatten(t); return a.valuesOfKey(i, e).length } return t.length }, t.prototype._getDefaultSize = function () { var t = this.element.get("widthRatio"), e = this._defaultSize; if (!e) { var n = this.element, i = n.get("coord"), r = n.getXScale(), o = r.values, s = n.get("dataArray"), u = o.length; if (r.isLinear && o.length > 1) { o.sort(); var l = function (t, e) { var n = t.length, i = t; a.isString(i[0]) && (i = t.map((function (t) { return e.translate(t) }))); for (var r = i[1] - i[0], o = 2; o < n; o++) { var s = i[o] - i[o - 1]; r > s && (r = s) } return r }(o, r); u = (r.max - r.min) / l, o.length > u && (u = o.length) } var c = r.range, h = 1 / u, p = 1; if (n.isInCircle() ? p = i.isTransposed && u > 1 ? t.multiplePie : t.rose : (r.isLinear && (h *= c[1] - c[0]), p = t.column), h *= p, n.hasAdjust("dodge")) h /= this._getDodgeCount(s); return this._defaultSize = h, h } return e }, t.prototype._getCoordinateWidth = function () { var t = this.element, e = t.get("coord"); if (t.isInCircle() && !e.isTransposed) return (e.endAngle - e.startAngle) * e.getRadius(); var n = e.convertPoint({ x: 0, y: 0 }), i = e.convertPoint({ x: 1, y: 0 }), r = 0; return n && i && (r = Math.sqrt(Math.pow(i.x - n.x, 2) + Math.pow(i.y - n.y, 2))), r }, t.prototype._toCoordinateSize = function (t) { return t * this._getCoordinateWidth() }, t.prototype._toNormalizedSize = function (t) { return t / this._getCoordinateWidth() }, t }(); function Ze(t) { var e = t; a.isArray(t) || (e = [t]); var n = e[0], i = e[e.length - 1], r = e.length > 1 ? e[1] : n; return { min: n, max: i, min1: r, max1: e.length > 3 ? e[3] : i, median: e.length > 2 ? e[2] : r } } function Qe(t, e, n) { var i, r, o, s, u = [], l = t, c = e; return a.isArray(c) ? i = [[l - n / 2, (r = Ze(c)).max], [l + n / 2, r.max], [l, r.max], [l, r.max1], [l - n / 2, r.min1], [l - n / 2, r.max1], [l + n / 2, r.max1], [l + n / 2, r.min1], [l, r.min1], [l, r.min], [l - n / 2, r.min], [l + n / 2, r.min], [l - n / 2, r.median], [l + n / 2, r.median]] : (c = c || .5, i = [[(r = Ze(l)).min, c - n / 2], [r.min, c + n / 2], [r.min, c], [r.min1, c], [r.min1, c - n / 2], [r.min1, c + n / 2], [r.max1, c + n / 2], [r.max1, c - n / 2], [r.max1, c], [r.max, c], [r.max, c - n / 2], [r.max, c + n / 2], [r.median, c - n / 2], [r.median, c + n / 2]]), o = i, s = u, a.each(o, (function (t) { s.push({ x: t[0], y: t[1] }) })), u } var $e = Rt("box", { defaultShapeType: "box" }); zt("box", "box", { getPoints: function (t) { return Qe(t.x, t.y, t.size) }, draw: function (t, e) { var n, i = function (t) { var e = t.style; return Ne(e, t), e }(t), r = [["M", (n = t.points)[0].x, n[0].y], ["L", n[1].x, n[1].y], ["M", n[2].x, n[2].y], ["L", n[3].x, n[3].y], ["M", n[4].x, n[4].y], ["L", n[5].x, n[5].y], ["L", n[6].x, n[6].y], ["L", n[7].x, n[7].y], ["L", n[4].x, n[4].y], ["Z"], ["M", n[8].x, n[8].y], ["L", n[9].x, n[9].y], ["M", n[10].x, n[10].y], ["L", n[11].x, n[11].y], ["M", n[12].x, n[12].y], ["L", n[13].x, n[13].y]]; return r = this.parsePath(r), e.addShape("path", { attrs: a.mix(i, { path: r }) }) }, getMarkerStyle: function (t) { return { symbol: function (t, e, n) { var i = Qe(t, [e - 6, e - 3, e, e + 3, e + 6], n); return [["M", i[0].x + 1, i[0].y], ["L", i[1].x - 1, i[1].y], ["M", i[2].x, i[2].y], ["L", i[3].x, i[3].y], ["M", i[4].x, i[4].y], ["L", i[5].x, i[5].y], ["L", i[6].x, i[6].y], ["L", i[7].x, i[7].y], ["L", i[4].x, i[4].y], ["Z"], ["M", i[8].x, i[8].y], ["L", i[9].x, i[9].y], ["M", i[10].x + 1, i[10].y], ["L", i[11].x - 1, i[11].y], ["M", i[12].x, i[12].y], ["L", i[13].x, i[13].y]] }, radius: 6, lineWidth: 1, stroke: t.color } } }); var Ke = $e, Je = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ type: "box", shapeType: "box", generatePoints: !0 }, e)) || this, i = new Ue(n); return n.set("sizeController", i), n.set("shapeFactory", Ke), n } return Object(u.__extends)(e, t), e.prototype.createShapePointsCfg = function (e) { var n = t.prototype.createShapePointsCfg.call(this, e); return n.size = this.getNormalizedSize(e), n }, e }(Pe); function tn(t) { var e = t.style; return Ne(e, t), e } function en(t, e) { var n = []; n.push({ x: t.x, y: .5 * t.y + 1 * e.y / 2 }), n.push({ y: .5 * t.y + 1 * e.y / 2, x: e.x }), n.push(e); var i = ["C"]; return a.each(n, (function (t) { i.push(t.x, t.y) })), i } function nn(t, e) { var n = []; n.push({ x: e.x, y: e.y }), n.push(t); var i = ["Q"]; return a.each(n, (function (t) { i.push(t.x, t.y) })), i } var rn = Rt("edge", { defaultShapeType: "line", getDefaultPoints: function (t) { return Re(t) }, getMarkerStyle: function (t, e) { var n, i = this.getShape(t); n = i.getMarkerStyle ? i.getMarkerStyle(e) : function (t) { var e = { symbol: "circle", radius: 4.5 }; return Ne(e, t), e }(e); var r = this._theme, o = i.name; return r && r.edge && r.edge[o] && (n = a.mix({}, r.edge[o].default, n)), n } }); zt("edge", "line", { draw: function (t, e) { var n = t.isInCircle, i = this.parsePoints(t.points), r = tn(t), o = Tt(i, n); return e.addShape("path", { attrs: a.mix(r, { path: o }) }) } }), zt("edge", "vhv", { draw: function (t, e) { var n = t.points, i = tn(t), r = function (t, e) { var n = []; n.push({ y: t.y * (1 - 1 / 3) + e.y * (1 / 3), x: t.x }), n.push({ y: t.y * (1 - 1 / 3) + e.y * (1 / 3), x: e.x }), n.push(e); var i = [["M", t.x, t.y]]; return a.each(n, (function (t) { i.push(["L", t.x, t.y]) })), i }(n[0], n[1]); return r = this.parsePath(r), e.addShape("path", { attrs: a.mix(i, { path: r }) }) } }), zt("edge", "smooth", { draw: function (t, e) { var n = t.points, i = tn(t), r = function (t, e) { var n = en(t, e), i = [["M", t.x, t.y]]; return i.push(n), i }(n[0], n[1]); return r = this.parsePath(r), e.addShape("path", { attrs: a.mix(i, { path: r }) }) } }), zt("edge", "arc", { draw: function (t, e) { var n, i, r = t.points, o = r.length > 2 ? "weight" : "normal", s = tn(t); if (t.isInCircle) { var u = { x: 0, y: 1 }; "normal" === o ? i = function (t, e, n) { var i = nn(e, n), r = [["M", t.x, t.y]]; return r.push(i), r }(r[0], r[1], u) : (s.fill = s.stroke, i = function (t, e) { var n = nn(t[1], e), i = nn(t[3], e), r = [["M", t[0].x, t[0].y]]; return r.push(i), r.push(["L", t[3].x, t[3].y]), r.push(["L", t[2].x, t[2].y]), r.push(n), r.push(["L", t[1].x, t[1].y]), r.push(["L", t[0].x, t[0].y]), r.push(["Z"]), r }(r, u)), i = this.parsePath(i), n = e.addShape("path", { attrs: a.mix(s, { path: i }) }) } else if ("normal" === o) r = this.parsePoints(r), n = e.addShape("arc", { attrs: a.mix(s, { x: (r[1].x + r[0].x) / 2, y: r[0].y, r: Math.abs(r[1].x - r[0].x) / 2, startAngle: Math.PI, endAngle: 2 * Math.PI }) }); else { i = [["M", r[0].x, r[0].y], ["L", r[1].x, r[1].y]]; var l = en(r[1], r[3]), c = en(r[2], r[0]); i.push(l), i.push(["L", r[3].x, r[3].y]), i.push(["L", r[2].x, r[2].y]), i.push(c), i.push(["Z"]), i = this.parsePath(i), s.fill = s.stroke, n = e.addShape("path", { attrs: a.mix(s, { path: i }) }) } return n } }); var on = rn, an = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ type: "edge", generatePoints: !0, shapeType: "edge", shareTooltip: !1 }, e)) || this; return n.set("shapeFactory", on), n } return Object(u.__extends)(e, t), e }(Pe), sn = function (t) { function e(e) { return t.call(this, Object(u.__assign)({ type: "heatmap", shapeType: "point", paletteCache: {} }, e)) || this } return Object(u.__extends)(e, t), e.prototype._prepareRange = function () { var t = this.get("mappedData"), e = this.getAttr("color").scales[0].field, n = 1 / 0, i = -1 / 0; t.forEach((function (t) { var r = t._origin[e]; r > i && (i = r), r < n && (n = r) })), n === i && (n = i - 1); var r = [n, i]; this.set("valueRange", r) }, e.prototype._prepareSize = function () { var t = this.getDefaultValue("size"); a.isNumber(t) || (t = this.getDefaultSize()); var e = this.get("styleOptions"), n = e && a.isObject(e.cfg) ? e.cfg.blur : null; a.isFinite(n) && null !== n || (n = t / 2), this.set("heatmapSize", { blur: n, radius: t }) }, e.prototype.getDefaultSize = function () { var t = this.getAttr("position"), e = this.get("coord"); return Math.min(e.width / (4 * t.scales[0].ticks.length), e.height / (4 * t.scales[1].ticks.length)) }, e.prototype._colorize = function (t) { for (var e = this.getAttr("color"), n = t.data, i = this.get("paletteCache"), r = 3; r < n.length; r += 4) { var o = n[r]; if (o) { var a = void 0; i[o] ? a = i[o] : (a = J.default.rgb2arr(e.gradient(o / 256)), i[o] = a), n[r - 3] = a[0], n[r - 2] = a[1], n[r - 1] = a[2], n[r] = o } } }, e.prototype._prepareGreyScaleBlurredCircle = function (t, e) { var n = this.get("grayScaleBlurredCanvas"); n || (n = document.createElement("canvas"), this.set("grayScaleBlurredCanvas", n)); var i = t + e, r = n.getContext("2d"); n.width = n.height = 2 * i, r.clearRect(0, 0, n.width, n.height), r.shadowOffsetX = r.shadowOffsetY = 2 * i, r.shadowBlur = e, r.shadowColor = "black", r.beginPath(), r.arc(-i, -i, t, 0, 2 * Math.PI, !0), r.closePath(), r.fill() }, e.prototype._drawGrayScaleBlurredCircle = function (t, e, n, i, r) { var o = this.get("grayScaleBlurredCanvas"); r.globalAlpha = i, r.drawImage(o, t - n, e - n) }, e.prototype._getShadowCanvasCtx = function () { var t = this.get("shadowCanvas"); t || (t = document.createElement("canvas"), this.set("shadowCanvas", t)); var e = this.get("view").get("viewRange"); return t.width = e.width, t.height = e.height, t.getContext("2d") }, e.prototype._clearShadowCanvasCtx = function () { var t = this._getShadowCanvasCtx(); t.clearRect(0, 0, t.canvas.width, t.canvas.height) }, e.prototype._getImageShape = function () { var t = this.get("imageShape"); return t || (t = this.get("container").addShape("Image", {}), this.set("imageShape", t), t) }, e.prototype.clear = function () { this._clearShadowCanvasCtx(), t.prototype.clear.call(this) }, e.prototype.drawWithRange = function (t) { var e = this.get("coord"), n = e.start, i = e.end, r = e.width, o = e.height, a = this.getAttr("color").scales[0].field, s = this.get("heatmapSize"); this._clearShadowCanvasCtx(); var u = this._getShadowCanvasCtx(), l = this.get("mappedData"); t && (l = l.filter((function (e) { return e._origin[a] <= t[1] && e._origin[a] >= t[0] }))); for (var c = this.get("scales")[a], h = 0; h < l.length; h++) { var p = l[h], f = this.getDrawCfg(p), d = c.scale(p._origin[a]); this._drawGrayScaleBlurredCircle(f.x - n.x, f.y - i.y, s.radius + s.blur, d, u) } var g = u.getImageData(0, 0, r, o); this._clearShadowCanvasCtx(), this._colorize(g), u.putImageData(g, 0, 0); var v = new Image; v.src = u.canvas.toDataURL("image/png"), this._getImageShape().attr({ x: n.x, y: i.y, width: r, height: o, img: v }) }, e.prototype.draw = function (t) { this.set("mappedData", t), this._prepareRange(), this._prepareSize(); var e = this.get("heatmapSize"); this._prepareGreyScaleBlurredCircle(e.radius, e.blur); var n = this.get("valueRange"); this.drawWithRange(n) }, e }(Pe), un = Math.sqrt(3), ln = { line: function (t, e, n) { return [["M", t - n, e], ["L", t + n, e]] }, smooth: function (t, e, n) { return [["M", t - n, e], ["A", n / 2, n / 2, 0, 1, 1, t, e], ["A", n / 2, n / 2, 0, 1, 0, t + n, e]] }, hv: function (t, e, n) { return [["M", t - n - 1, e - 2.5], ["L", t, e - 2.5], ["L", t, e + 2.5], ["L", t + n + 1, e + 2.5]] }, vh: function (t, e, n) { return [["M", t - n - 1, e + 2.5], ["L", t, e + 2.5], ["L", t, e - 2.5], ["L", t + n + 1, e - 2.5]] }, hvh: function (t, e, n) { return [["M", t - (n + 1), e + 2.5], ["L", t - n / 2, e + 2.5], ["L", t - n / 2, e - 2.5], ["L", t + n / 2, e - 2.5], ["L", t + n / 2, e + 2.5], ["L", t + n + 1, e + 2.5]] }, vhv: function (t, e) { return [["M", t - 5, e + 2.5], ["L", t - 5, e], ["L", t, e], ["L", t, e - 3], ["L", t, e + 3], ["L", t + 6.5, e + 3]] } }, cn = { hexagon: function (t, e, n) { var i = n / 2 * un; return [["M", t, e - n], ["L", t + i, e - n / 2], ["L", t + i, e + n / 2], ["L", t, e + n], ["L", t - i, e + n / 2], ["L", t - i, e - n / 2], ["Z"]] }, bowtie: function (t, e, n) { var i = n - 1.5; return [["M", t - n, e - i], ["L", t + n, e + i], ["L", t + n, e - i], ["L", t - n, e + i], ["Z"]] }, cross: function (t, e, n) { return [["M", t - n, e - n], ["L", t + n, e + n], ["M", t + n, e - n], ["L", t - n, e + n]] }, tick: function (t, e, n) { return [["M", t - n / 2, e - n], ["L", t + n / 2, e - n], ["M", t, e - n], ["L", t, e + n], ["M", t - n / 2, e + n], ["L", t + n / 2, e + n]] }, plus: function (t, e, n) { return [["M", t - n, e], ["L", t + n, e], ["M", t, e - n], ["L", t, e + n]] }, hyphen: function (t, e, n) { return [["M", t - n, e], ["L", t + n, e]] }, line: function (t, e, n) { return [["M", t, e - n], ["L", t, e + n]] } }; function hn(t) { var e = t.style; return ze(e, t), e } function pn(t) { var e = t.style; return Ne(e, t), e } function fn(t, e) { void 0 === e && (e = !1); var n, i, r, o, s = t.x, u = t.y, l = t.y0, c = t.size; a.isArray(u) ? (n = u[0], i = u[1]) : (n = l, i = u), a.isArray(s) ? (r = s[0], o = s[1]) : (r = s - c / 2, o = s + c / 2); var h = [{ x: r, y: n }, { x: r, y: i }]; return e ? h.push({ x: o, y: (i + n) / 2 }) : h.push({ x: o, y: i }, { x: o, y: n }), h } function dn(t) { var e = [], n = t[0]; e.push(["M", n.x, n.y]); for (var i = 1, r = t.length; i < r; i++)e.push(["L", t[i].x, t[i].y]); return e.push(["L", n.x, n.y]), e.push(["z"]), e } function gn(t, e) { var n = [], i = t.points, r = t.nextPoints; return a.isNil(r) ? e ? n.push(["M", i[0].x, i[0].y], ["L", i[1].x, i[1].y], ["L", i[2].x, i[2].y], ["L", i[3].x, i[3].y], ["Z"]) : n.push(["M", i[0].x, i[0].y], ["L", i[1].x, i[1].y], ["L", i[2].x, i[2].y], ["Z"]) : n.push(["M", i[0].x, i[0].y], ["L", i[1].x, i[1].y], ["L", r[1].x, r[1].y], ["L", r[0].x, r[0].y], ["Z"]), n } a.each({ tick: function (t, e, n) { return [["M", t - n / 2, e - n], ["L", t + n / 2, e - n], ["M", t, e - n], ["L", t, e + n], ["M", t - n / 2, e + n], ["L", t + n / 2, e + n]] }, line: function (t, e, n) { return [["M", t, e - n], ["L", t, e + n]] } }, (function (t, e) { o.Marker.symbolsFactory.register(e, t) })); var vn = Rt("interval", { defaultShapeType: "rect", getDefaultPoints: function (t) { return fn(t) } }); zt("interval", "rect", { draw: function (t, e) { var n = hn(t), i = dn(t.points); return i = this.parsePath(i), e.addShape("path", { attrs: Object(u.__assign)(Object(u.__assign)({}, n), { path: i }) }) }, getMarkerStyle: function (t) { var e = t.isInCircle, n = { symbol: e ? "circle" : "square", radius: e ? 4.5 : 4 }; return ze(n, t), n } }), zt("interval", "hollowInterval", { draw: function (t, e) { var n = pn(t), i = dn(t.points); return i = this.parsePath(i), e.addShape("path", { attrs: Object(u.__assign)(Object(u.__assign)({}, n), { path: i }) }) }, getMarkerStyle: function (t) { var e = t.isInCircle, n = { symbol: e ? "circle" : "square", radius: e ? 4.5 : 4 }; return Ne(n, t), n } }), zt("interval", "line", { getPoints: function (t) { return n = (e = t).x, i = e.y, r = e.y0, a.isArray(i) ? i.map((function (t, e) { return { x: a.isArray(n) ? n[e] : n, y: t } })) : [{ x: n, y: i }, { x: n, y: r }]; var e, n, i, r }, draw: function (t, e) { var n = pn(t); n.lineWidth = t.size || 1; var i = dn(t.points); return i = this.parsePath(i), e.addShape("path", { attrs: Object(u.__assign)(Object(u.__assign)({}, n), { path: i }) }) }, getMarkerStyle: function (t) { var e = { symbol: "line", radius: 5 }; return Ne(e, t), e } }), zt("interval", "tick", { getPoints: function (t) { return function (t) { var e, n, i = t.x, r = t.y, o = t.y0, s = t.size; a.isArray(r) ? (e = r[0], n = r[1]) : (e = o, n = r); var u = i + s / 2, l = i - s / 2; return [{ x: l, y: n }, { x: u, y: n }, { x: i, y: n }, { x: i, y: e }, { x: l, y: e }, { x: u, y: e }] }(t) }, draw: function (t, e) { var n, i = pn(t), r = [["M", (n = t.points)[0].x, n[0].y], ["L", n[1].x, n[1].y], ["M", n[2].x, n[2].y], ["L", n[3].x, n[3].y], ["M", n[4].x, n[4].y], ["L", n[5].x, n[5].y]]; return r = this.parsePath(r), e.addShape("path", { attrs: Object(u.__assign)(Object(u.__assign)({}, i), { path: r }) }) }, getMarkerStyle: function (t) { var e = { symbol: "tick", radius: 5 }; return Ne(e, t), e } }), zt("interval", "funnel", { getPoints: function (t) { return t.size = 2 * t.size, fn(t) }, draw: function (t, e) { var n = hn(t), i = gn(t, !0); return i = this.parsePath(i), e.addShape("path", { attrs: Object(u.__assign)(Object(u.__assign)({}, n), { path: i }) }) }, getMarkerStyle: function (t) { var e = { symbol: "square", radius: 4 }; return ze(e, t), e } }), zt("interval", "pyramid", { getPoints: function (t) { return t.size = 2 * t.size, fn(t, !0) }, draw: function (t, e) { var n = hn(t), i = gn(t, !1); return i = this.parsePath(i), e.addShape("path", { attrs: Object(u.__assign)(Object(u.__assign)({}, n), { path: i }) }) }, getMarkerStyle: function (t) { var e = { symbol: "square", radius: 4 }; return ze(e, t), e } }), zt("interval", "top-line", { draw: function (t, e) { var n = a.mix({}, hn(t)), i = t.style, r = t.points, o = dn(r); o = this.parsePath(o), delete n.stroke; var s = e.addShape("path", { attrs: Object(u.__assign)(Object(u.__assign)({}, n), { zIndex: 0, path: o }) }), l = [["M", r[1].x, r[1].y], ["L", r[2].x, r[2].y]]; return e.addShape("path", { zIndex: 1, attrs: { stroke: i.stroke || "white", lineWidth: i.lineWidth || 1, path: this.parsePath(l) } }), s }, getMarkerStyle: function (t) { var e = t.isInCircle, n = { symbol: e ? "circle" : "square", radius: e ? 4.5 : 4 }; return ze(n, t), n } }); var yn = vn, mn = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ type: "interval", shapeType: "interval", generatePoints: !0 }, e)) || this, i = new Ue(n); return n.set("sizeController", i), n.set("shapeFactory", yn), n } return Object(u.__extends)(e, t), e.prototype.createShapePointsCfg = function (e) { var n = t.prototype.createShapePointsCfg.call(this, e); return n.size = this.getNormalizedSize(e), n }, e.prototype.isShareTooltip = function () { var t = this.get("shareTooltip"), e = this.get("coord"), n = e.type; return ("theta" === n || "polar" === n && e.isTransposed) && (t = !1), t }, e }(Pe); function xn(t, e, n) { var i = function (t) { var e = t; a.isArray(t) || (e = [t]); var n = e.sort((function (t, e) { return t < e ? 1 : -1 })), i = n.length; if (i < 4) for (var r = n[i - 1], o = 0; o < 4 - i; o++)n.push(r); return n }(e); return [{ x: t, y: i[0] }, { x: t, y: i[1] }, { x: t - n / 2, y: i[2] }, { x: t - n / 2, y: i[1] }, { x: t + n / 2, y: i[1] }, { x: t + n / 2, y: i[2] }, { x: t, y: i[2] }, { x: t, y: i[3] }] } var _n = Rt("kline", { defaultShapeType: "kline" }); zt("kline", "kline", { getPoints: function (t) { return xn(t.x, t.y, t.size) }, draw: function (t, e) { var n, i = function (t) { var e = t.style; return ze(e, t), Ne(e, t), e }(t), r = [["M", (n = t.points)[0].x, n[0].y], ["L", n[1].x, n[1].y], ["M", n[2].x, n[2].y], ["L", n[3].x, n[3].y], ["L", n[4].x, n[4].y], ["L", n[5].x, n[5].y], ["Z"], ["M", n[6].x, n[6].y], ["L", n[7].x, n[7].y]]; return r = this.parsePath(r), e.addShape("path", { attrs: a.mix(i, { path: r }) }) }, getMarkerStyle: function (t) { return { symbol: function (t, e, n) { var i = xn(t, [e + 7.5, e + 3, e - 3, e - 7.5], n); return [["M", i[0].x, i[0].y], ["L", i[1].x, i[1].y], ["M", i[2].x, i[2].y], ["L", i[3].x, i[3].y], ["L", i[4].x, i[4].y], ["L", i[5].x, i[5].y], ["Z"], ["M", i[6].x, i[6].y], ["L", i[7].x, i[7].y]] }, lineWidth: 1, stroke: t.color, fill: t.color, radius: 6 } } }); var bn = _n, wn = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ type: "kline", shapeType: "kline", generatePoints: !0 }, e)) || this, i = new Ue(n); return n.set("sizeController", i), n.set("shapeFactory", bn), n } return Object(u.__extends)(e, t), e.prototype.createShapePointsCfg = function (e) { var n = t.prototype.createShapePointsCfg.call(this, e); return n.size = this.getNormalizedSize(e), n }, e }(Pe), Mn = [1, 1], Sn = [5.5, 1]; function Cn(t) { var e = t.style; return Ne(e, t), t.size && (e.lineWidth = t.size), e } function On(t, e, n, i) { var r; if (e) { var o = i.constraint; n && t.length && t.push({ x: t[0].x, y: t[0].y }), r = Dt(t, !1, o) } else r = Tt(t, !1), n && r.push(["Z"]); return r } function kn(t, e) { var n = t.points, i = t.isInCircle, r = n[0]; return a.isArray(r.y) ? function (t, e, n, i) { for (var r = i.isStack, o = [], a = [], s = 0, u = t.length; s < u; s++) { var l = Re(t[s]); a.push(l[0]), o.push(l[1]) } var c = On(o, e, n, i), h = On(a, e, n, i); return r ? c : c.concat(h) }(n, e, i, t) : On(n, e, i, t) } function Pn(t, e) { return function (t) { return t.map((function (t, e) { return 0 === e ? ["M", t.x, t.y] : ["L", t.x, t.y] })) }(function (t, e) { var n = []; return a.each(t, (function (i, r) { var o = t[r + 1]; n.push(i), o && (n = n.concat(e(i, o))) })), n }(t.points, e)) } var An = Rt("line", { defaultShapeType: "line", drawShape: function (t, e, n) { var i = this.getShape(t), r = i.name, o = this._theme; if (o && o.line && o.line[r]) { var s = o.line[r].default; e.style = a.mix({}, s, e.style) } var u = 1 === e.points.length && e.showSinglePoint ? function (t, e) { var n = t.points[0]; return e.addShape("circle", { attrs: { x: n.x, y: n.y, r: 2, fill: t.color } }) }(e, n) : i.draw(e, n); return u && (u.setSilent("origin", e.origin), u.id = e.splitedIndex ? e.id + e.splitedIndex : e.id, u.name = this.name), u }, getMarkerStyle: function (t, e) { var n, i, r = this.getShape(t); if (r.getMarkerStyle) n = r.getMarkerStyle(e); else { Ne(i = { lineWidth: 2, radius: 6 }, e), n = i; var o = ln[t]; "dot" === t && (o = ln.line, n.lineDash = n.lineDash || Mn), "dash" === t && (o = ln.line, n.lineDash = n.lineDash || Sn), n.symbol = o } var s = this._theme, u = r.name; return s && s.line && s.line[u] && (n = a.mix({}, s.line[u].default, n)), n } }); zt("line", "line", { draw: function (t, e) { var n = Cn(t), i = kn(t, !1); return e.addShape("path", { attrs: Object(u.__assign)(Object(u.__assign)({}, n), { path: i }) }) } }), zt("line", "dot", { draw: function (t, e) { var n = Cn(t), i = kn(t, !1); return e.addShape("path", { attrs: Object(u.__assign)(Object(u.__assign)({ lineDash: Mn }, n), { path: i }) }) } }), zt("line", "dash", { draw: function (t, e) { var n = Cn(t), i = kn(t, !1); return e.addShape("path", { attrs: Object(u.__assign)(Object(u.__assign)({ lineDash: Sn }, n), { path: i }) }) } }), zt("line", "smooth", { draw: function (t, e) { var n = Cn(t), i = this.getCoord(); t.constraint = [[i.start.x, i.end.y], [i.end.x, i.start.y]]; var r = kn(t, !0); return e.addShape("path", { attrs: Object(u.__assign)(Object(u.__assign)({}, n), { path: r }) }) } }), zt("line", "hv", { draw: function (t, e) { var n = Cn(t), i = Pn(t, (function (t, e) { return [{ x: e.x, y: t.y }] })); return e.addShape("path", { attrs: Object(u.__assign)(Object(u.__assign)({}, n), { path: i }) }) } }), zt("line", "vh", { draw: function (t, e) { var n = Cn(t), i = Pn(t, (function (t, e) { return [{ x: t.x, y: e.y }] })); return e.addShape("path", { attrs: Object(u.__assign)(Object(u.__assign)({}, n), { path: i }) }) } }), zt("line", "hvh", { draw: function (t, e) { var n = Cn(t), i = Pn(t, (function (t, e) { var n = (e.x + t.x) / 2; return [{ x: n, y: t.y }, { x: n, y: e.y }] })); return e.addShape("path", { attrs: Object(u.__assign)(Object(u.__assign)({}, n), { path: i }) }) } }), zt("line", "vhv", { draw: function (t, e) { var n = Cn(t), i = Pn(t, (function (t, e) { var n = (t.y + e.y) / 2; return [{ x: t.x, y: n }, { x: e.x, y: n }] })); return e.addShape("path", { attrs: Object(u.__assign)(Object(u.__assign)({}, n), { path: i }) }) } }); var Ln = An, Tn = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ type: "path", shapeType: "line", connectNulls: !1, showSinglePoint: !1 }, e)) || this; return n.set("shapeFactory", Ln), n } return Object(u.__extends)(e, t), e.prototype.getDrawCfg = function (e) { var n = t.prototype.getDrawCfg.call(this, e), i = this.hasAdjust("stack"); return Object(u.__assign)(Object(u.__assign)({}, n), { isStack: i, showSinglePoint: this.get("showSinglePoint") }) }, e.prototype.draw = function (t, e, n, i) { var r = this, o = Xe(t, this.get("connectNulls"), this.getYScale().field), s = this.getDrawCfg(t[0]); s.origin = t, a.each(o, (function (t, o) { if (!a.isEmpty(t)) { s.splitedIndex = o, s.points = t; var u = n.drawShape(s.shape, s, e); r.appendShapeInfo(u, i + o) } })) }, e }(Pe), Dn = function (t) { function e(e) { return t.call(this, Object(u.__assign)({ type: "line", sortable: !0 }, e)) || this } return Object(u.__extends)(e, t), e }(Tn); a.each(cn, (function (t, e) { o.Marker.symbolsFactory.register(e, t) })); function jn(t) { var e = t.style; return ze(e, t), a.isNumber(t.size) && (e.radius = t.size), e } function In(t) { var e = t.style; return Ne(e, t), a.isNumber(t.size) && (e.radius = t.size), e } var Bn = Rt("point", { defaultShapeType: "hollowCircle", getDefaultPoints: function (t) { return Re(t) } }); zt("point", "rect", { draw: function (t, e) { var n = jn(t), i = function (t) { var e = t.points[0].x, n = t.points[0].y, i = t.size[0], r = t.size[1]; return [["M", e - .5 * i, n - .5 * r], ["L", e + .5 * i, n - .5 * r], ["L", e + .5 * i, n + .5 * r], ["L", e - .5 * i, n + .5 * r], ["z"]] }(t); return i = this.parsePath(i), e.addShape("path", { attrs: a.mix(n, { path: i }) }) }, getMarkerStyle: function (t) { var e = { symbol: "rect", radius: 4.5 }; return ze(e, t), e } }), a.each(["circle", "square", "bowtie", "diamond", "hexagon", "triangle", "triangleDown"], (function (t) { zt("point", t, { draw: function (e, n) { var i = jn(e); return n.addShape("Marker", { attrs: Object(u.__assign)(Object(u.__assign)({}, i), { symbol: t, x: e.x, y: e.y }) }) }, getMarkerStyle: function (e) { var n = { symbol: t, radius: 4.5 }; return ze(n, e), n } }), zt("point", "hollow" + a.upperFirst(t), { draw: function (e, n) { var i = In(e); return n.addShape("Marker", { attrs: Object(u.__assign)(Object(u.__assign)({}, i), { symbol: t, x: e.x, y: e.y }) }) }, getMarkerStyle: function (e) { var n = { symbol: t, radius: 4.5 }; return Ne(n, e), n } }) })), a.each(["cross", "tick", "plus", "hyphen", "line"], (function (t) { zt("point", t, { draw: function (e, n) { var i = In(e); return n.addShape("Marker", { attrs: Object(u.__assign)(Object(u.__assign)({}, i), { symbol: t, x: e.x, y: e.y }) }) }, getMarkerStyle: function (e) { var n = { symbol: t, radius: 4.5 }; return Ne(n, e), n } }) })), zt("point", "image", { draw: function (t, e) { return t.points = this.parsePoints(t.points), e.addShape("image", { attrs: { x: t.points[0].x - t.size / 2, y: t.points[0].y - t.size, width: t.size, height: t.size, img: t.shape[1] } }) }, getMarkerStyle: function (t) { var e = { symbol: "circle", radius: 4.5 }; return ze(e, t), e } }); var En = a.memoize((function (t) { var e = T.b(t), n = a.flatten(e).filter((function (t) { return a.isNumber(t) })); return { range: Math.max.apply(null, n) - Math.min.apply(null, n), segments: e } })); zt("point", "path", { draw: function (t, e) { var n = a.mix({}, In(t), jn(t)), i = t.shape[1], r = t.size || 10, o = En(i), s = r / o.range, l = []; n.rotate && (l.push(["r", n.rotate / 180 * Math.PI]), delete n.rotate); var c = e.addShape("path", { attrs: Object(u.__assign)(Object(u.__assign)({}, n), { path: o.segments }) }); return l.push(["s", s, s], ["t", t.x, t.y]), c.transform(l), c }, getMarkerStyle: function (t) { var e = { symbol: "circle", radius: 4.5 }; return ze(e, t), e } }); var Fn = Bn, Rn = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ type: "point", shapeType: "point", generatePoints: !0, shareTooltip: !1 }, e)) || this; return n.set("shapeFactory", Fn), n } return Object(u.__extends)(e, t), e.prototype.drawPoint = function (t, e, n, i) { var r = this, o = t.shape, s = this.getDrawCfg(t); if (a.isArray(t.y)) { var u = this.hasAdjust("stack"); a.each(t.y, (function (t, a) { if (s.y = t, s.yIndex = a, !u || 0 !== a) { var l = n.drawShape(o, s, e); r.appendShapeInfo(l, i + a) } })) } else if (!a.isNil(t.y)) { var l = n.drawShape(o, s, e); this.appendShapeInfo(l, i) } }, e }(Pe); function zn(t) { for (var e = t[0], n = 1, i = [["M", e.x, e.y]]; n < t.length;) { var r = t[n]; r.x === t[n - 1].x && r.y === t[n - 1].y || (i.push(["L", r.x, r.y]), r.x === e.x && r.y === e.y && n < t.length - 1 && (e = t[n + 1], i.push(["Z"]), i.push(["M", e.x, e.y]), n++)), n++ } return a.isEqual(i[i.length - 1], e) || i.push(["L", e.x, e.y]), i.push(["Z"]), i } function Nn(t) { var e = { symbol: "square", radius: 4 }; return ze(e, t), e } var Yn = Rt("polygon", { defaultShapeType: "polygon", getDefaultPoints: function (t) { var e = []; return a.each(t.x, (function (n, i) { var r = t.y[i]; e.push({ x: n, y: r }) })), e } }); zt("polygon", "polygon", { draw: function (t, e) { if (!a.isEmpty(t.points)) { var n = function (t) { var e = t.style; return ze(e, t), e }(t), i = zn(t.points); return i = this.parsePath(i), e.addShape("path", { attrs: a.mix(n, { path: i }) }) } }, getMarkerStyle: function (t) { return Nn(t) } }), zt("polygon", "hollow", { draw: function (t, e) { if (!a.isEmpty(t.points)) { var n = function (t) { var e = t.style; return Ne(e, t), e }(t), i = zn(t.points); return i = this.parsePath(i), e.addShape("path", { attrs: a.mix(n, { path: i }) }) } }, getMarkerStyle: function (t) { return Nn(t) } }); var Hn = Yn, Gn = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ type: "polygon", shapeType: "polygon", generatePoints: !0, shareTooltip: !1 }, e)) || this; return n.set("shapeFactory", Hn), n } return Object(u.__extends)(e, t), e.prototype.createShapePointsCfg = function (e) { var n, i = t.prototype.createShapePointsCfg.call(this, e), r = i.x, o = i.y; if (!a.isArray(r) || !a.isArray(o)) { var s = this.getXScale(), u = this.getYScale(), l = .5 / s.values.length, c = .5 / u.values.length; s.isCategory && u.isCategory ? (r = [r - l, r - l, r + l, r + l], o = [o - c, o + c, o + c, o - c]) : a.isArray(r) ? (r = [(n = r)[0], n[0], n[1], n[1]], o = [o - c / 2, o + c / 2, o + c / 2, o - c / 2]) : a.isArray(o) && (o = [(n = o)[0], n[1], n[1], n[0]], r = [r - l / 2, r - l / 2, r + l / 2, r + l / 2]), i.x = r, i.y = o } return i }, e }(Pe); var Wn = Rt("text", { defaultShapeType: "text", getDefaultPoints: function (t) { return Re(t) } }); zt("text", "text", { draw: function (t, e) { var n = function (t) { var e = t.style; return ze(e, t), a.isNumber(t.size) && (e.fontSize = t.size), e }(t); return e.addShape("text", { attrs: Object(u.__assign)(Object(u.__assign)({}, n), { x: t.x, y: t.y, text: t.text }) }) }, getMarkerStyle: function (t) { var e = { symbol: "circle", radius: 4.5 }; return ze(e, t), e } }); var Vn = Wn, Xn = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ type: "text", shapeType: "text" }, e)) || this; return n.set("shapeFactory", Vn), n } return Object(u.__extends)(e, t), e.prototype.content = function (t, e) { if (a.isObject(t)) this.set("contentOptions", t); else { var n = Oe(t); this.set("contentOptions", { fields: n, callback: e }) } return this }, e.prototype._getContent = function (t, e) { var n = t.fields || [], i = t.callback; if (i) { var r = n.map((function (t) { return e[t] })); return i.apply(void 0, r) } return e[n[0]] }, e.prototype.getDrawCfg = function (e) { var n = t.prototype.getDrawCfg.call(this, e), i = this.get("contentOptions"); return i && (n.text = this._getContent(i, e._origin)), n }, e }(Rn), qn = function (t) { function e(e, n) { return t.call(this, e, Object(u.__assign)({ showTitle: !0, autoSetAxis: !0, padding: 16 }, n)) || this } return Object(u.__extends)(e, t), e.prototype.generateFacets = function (t) { var e = this, n = this.cfg.fields, i = n[0], r = n[1], o = [], s = 0, u = 0, l = [], c = []; return i && (l = this.getFieldValues(t, i), s = l.length), r && (c = this.getFieldValues(t, r), u = c.length), l.forEach((function (n, h) { c.forEach((function (p, f) { var d = [{ field: i, value: n, values: l }, { field: r, value: p, values: c }], g = a.filter(t, (function (t) { return a.every(d, (function (e) { var n = e.field, i = e.value; return t[n] === i })) })), v = { type: e.cfg.type, columnValue: n, rowValue: p, columnField: i, rowField: r, columnIndex: h, rowIndex: f, columnValuesLength: s, rowValuesLength: u, data: g, region: e.getRegion(u, s, h, f) }; o.push(v) })) })), o }, e.prototype.renderAxis = function () { }, e.prototype.renderTitle = function () { }, e }(re), Un = n(67); n.d(e, "Util", (function () { return a })), n.d(e, "G", (function () { return o })), n.d(e, "Interface", (function () { return s })), n.d(e, "Plot", (function () { return Fe })), n.d(e, "View", (function () { return Be })), n.d(e, "registerElement", (function () { return le })), n.d(e, "getElement", (function () { return ue })), n.d(e, "Element", (function () { return Pe })), n.d(e, "registerShape", (function () { return zt })), n.d(e, "registerShapeFactory", (function () { return Rt })), n.d(e, "getShapeFactory", (function () { return Nt })), n.d(e, "Shape", (function () { return i })), n.d(e, "registerFacet", (function () { return ae })), n.d(e, "Facet", (function () { return re })), n.d(e, "registerInteraction", (function () { return je })), n.d(e, "getInteraction", (function () { return De })), n.d(e, "Interaction", (function () { return Le })), n.d(e, "Global", (function () { return C })), n.d(e, "setTheme", (function () { return O })), n.d(e, "version", (function () { return k })), n.d(e, "registerTheme", (function () { return f })), n.d(e, "getTheme", (function () { return p })), n.d(e, "Animate", (function () { return U })), n.d(e, "registerScale", (function () { return tt.registerScale })), n.d(e, "getScale", (function () { return tt.getScale })), n.d(e, "Scale", (function () { return tt.Scale })), n.d(e, "registerAdjust", (function () { return rt })), n.d(e, "getAdjust", (function () { return it })), n.d(e, "Adjust", (function () { return et })), n.d(e, "getCoordinate", (function () { return ct.getCoordinate })), n.d(e, "Coordinate", (function () { return ct.Coordinate })), n.d(e, "getAttribute", (function () { return xt })), n.d(e, "Attribute", (function () { return pt })), n.d(e, "Option", (function () { return Un })), n.d(e, "registerElementLabels", (function () { return be })), n.d(e, "getElementLabels", (function () { return _e })), n.d(e, "ElementLabels", (function () { return de })), le("Line", Dn), le("Path", Tn), le("Point", Rn), le("Interval", mn), le("Edge", an), le("Polygon", Gn), le("Area", qe), le("Box", Je), le("Kline", wn), le("Text", Xn), le("Heatmap", sn), ae("rect", qn) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(22)), o = i.__importStar(n(0)), a = i.__importDefault(n(146)), s = i.__importDefault(n(148)), u = n(7), l = i.__importDefault(n(28)), c = i.__importDefault(n(8)), h = n(10), p = function (t) { function e(e, n) { var i = t.call(this) || this; return i.containerDOM = "string" == typeof e ? document.getElementById(e) : e, i.forceFit = o.isNil(n.forceFit) ? o.isNil(n.width) && o.isNil(n.height) : n.forceFit, i.renderer = n.renderer || "canvas", i.pixelRatio = n.pixelRatio || null, i.width = n.width, i.height = n.height, i.theme = n.theme, i.canvasController = new a.default({ containerDOM: i.containerDOM, plot: i }), i.width = i.canvasController.width, i.height = i.canvasController.height, i.canvas = i.canvasController.canvas, i.layers = [], i.destroyed = !1, i.createLayers(n), i.eventController = new s.default({ plot: i, canvas: i.canvasController.canvas }), i.eventController.bindEvents(), i.parseEvents(n), i } return i.__extends(e, t), e.prototype.destroy = function () { this.eachLayer((function (t) { t.destroy() })), this.canvasController.destroy(), this.eventController.clearEvents(), this.layers = [], this.destroyed = !0 }, e.prototype.repaint = function () { this.canvasController.canvas.draw() }, e.prototype.updateConfig = function (t, e) { if (void 0 === e && (e = !1), e) this.eachLayer((function (e) { e instanceof c.default && e.updateConfig(t) })); else { var n = this.layers[0]; n instanceof l.default && n.updateConfig(t) } t.width && (this.width = t.width), t.height && (this.height = t.height), t.theme && (this.theme = t.theme), this.canvasController.updateCanvasSize(), this.canvasController.updateCanvasTheme() }, e.prototype.changeData = function (t, e) { if (void 0 === e && (e = !1), e) this.eachLayer((function (e) { e instanceof c.default && e.changeData(t) })); else { var n = this.layers[0]; n instanceof c.default && n.changeData(t) } }, e.prototype.getPlotTheme = function () { return this.layers[0].getPlotTheme() }, e.prototype.getData = function () { return this.layers[0].getData() }, e.prototype.bindStateManager = function (t, e) { this.eachLayer((function (n) { n instanceof c.default && n.bindStateManager(t, e) })) }, e.prototype.setActive = function (t, e) { this.eachLayer((function (n) { n instanceof c.default && n.setActive(t, e) })) }, e.prototype.setSelected = function (t, e) { this.eachLayer((function (n) { n instanceof c.default && n.setSelected(t, e) })) }, e.prototype.setDisable = function (t, e) { this.eachLayer((function (n) { n instanceof c.default && n.setDisable(t, e) })) }, e.prototype.setNormal = function (t) { this.eachLayer((function (e) { e instanceof c.default && e.setNormal(t) })) }, e.prototype.getLayer = function (t) { return void 0 === t && (t = 0), this.layers[t] }, e.prototype.getCanvas = function () { return this.canvasController.canvas }, e.prototype.getLayers = function () { return this.layers }, e.prototype.render = function () { this.eachLayer((function (t) { return t.render() })) }, e.prototype.eachLayer = function (t) { o.each(this.layers, t) }, e.prototype.addLayer = function (t) { o.findIndex(this.layers, (function (e) { return e === t })) < 0 && this.layers.push(t) }, e.prototype.createLayers = function (t) { if (t.layers); else if (t.type) { var e = new (u.getPlotType(t.type))(o.deepMix({}, t, { canvas: this.canvasController.canvas, x: 0, y: 0, width: this.width, height: this.height })); this.addLayer(e) } }, e.prototype.parseEvents = function (t) { var e = this, n = o.keys(h.CANVAS_EVENT_MAP); t.events && o.each(t.events, (function (t, i) { if (o.contains(n, i) && o.isFunction(t)) { var r = h.CANVAS_EVENT_MAP[i] || i, a = t; e.on(r, a) } })) }, e }(r.default); e.default = p }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = {}; e.registerPlotType = function (t, e) { i[t.toLowerCase()] = e }, e.getPlotType = function (t) { return i[t.toLowerCase()] } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(2), o = i.__importStar(n(5)), a = i.__importStar(n(0)), s = i.__importDefault(n(130)), u = n(9), l = i.__importDefault(n(136)), c = n(10), h = i.__importDefault(n(139)), p = i.__importDefault(n(36)), f = i.__importDefault(n(73)), d = i.__importDefault(n(28)), g = n(45), v = function (t) { function e(e) { var n = t.call(this, e) || this; return n.interactions = [], n.options = n.getOptions(e), n.initialOptions = a.deepMix({}, n.options), n.paddingController = new h.default({ plot: n }), n.stateController = new p.default({ plot: n }), n.themeController = new f.default, n } return i.__extends(e, t), e.getDefaultOptions = function (t) { return { title: { visible: !1, text: "" }, description: { visible: !1, text: "" }, padding: "auto", legend: { visible: !0, position: "bottom-center" }, tooltip: { visible: !0, shared: !0, crosshairs: { type: "y" } }, xAxis: { visible: !0, autoHideLabel: !1, autoRotateLabel: !1, autoRotateTitle: !1, grid: { visible: !1 }, line: { visible: !0 }, tickLine: { visible: !0 }, label: { visible: !0 }, title: { visible: !1, offset: 12 } }, yAxis: { visible: !0, autoHideLabel: !1, autoRotateLabel: !1, autoRotateTitle: !0, grid: { visible: !0 }, line: { visible: !1 }, tickLine: { visible: !1 }, label: { visible: !0 }, title: { visible: !1, offset: 12 } }, label: { visible: !1 } } }, e.prototype.getOptions = function (e) { var n = t.prototype.getOptions.call(this, e), i = this.constructor.getDefaultOptions(e); return a.deepMix({}, n, i, e) }, e.prototype.beforeInit = function () { t.prototype.beforeInit.call(this) }, e.prototype.init = function () { var e = this; t.prototype.init.call(this), this.theme = this.themeController.getTheme(this.options, this.type), this.config = { scales: {}, legends: {}, tooltip: { showTitle: !0, triggerOn: "mousemove", inPanel: !0, useHtml: !0 }, axes: { fields: {} }, coord: { type: "cartesian" }, elements: [], annotations: [], interactions: {}, theme: this.theme, panelRange: {}, animate: !0 }, this.paddingController.clear(), this.drawTitle(), this.drawDescription(), this.coord(), this.scale(), this.axis(), this.tooltip(), this.legend(), this.addGeometry(), this.annotation(), this.animation(), this.viewRange = this.getViewRange(), this.paddingController.clearOuterComponents(), this.view = new o.View({ width: this.width, height: this.height, canvas: this.canvas, container: this.container, padding: this.paddingController.getPadding(), data: this.processData(this.options.data), theme: this.theme, options: this.config, start: { x: this.viewRange.minX, y: this.viewRange.minY }, end: { x: this.viewRange.maxX, y: this.viewRange.maxY } }), this.applyInteractions(), this.view.on("afterrender", (function () { e.afterRender() })) }, e.prototype.afterInit = function () { t.prototype.afterInit.call(this), this.view && !this.view.destroyed && "auto" !== this.options.padding && this.parseEvents() }, e.prototype.afterRender = function () { if (this.view && !this.view.destroyed) { var t = this.options, e = t.padding ? t.padding : this.config.theme.padding; t.defaultState && "auto" !== e && this.stateController.defaultStates(t.defaultState), "auto" === e && this.paddingController.processAutoPadding() } }, e.prototype.render = function () { t.prototype.render.call(this); var e = this.options.data; a.isEmpty(e) || this.view.render() }, e.prototype.destroy = function () { this.doDestroy(), t.prototype.destroy.call(this) }, e.prototype.updateConfig = function (t) { this.doDestroy(), !t.padding && this.initialOptions.padding && "auto" === this.initialOptions.padding && (t.padding = "auto"), this.options = a.deepMix({}, this.options, t), this.processOptions(this.options) }, e.prototype.changeData = function (t) { this.options.data = this.processData(t), this.view.changeData(this.options.data) }, e.prototype.getPlot = function () { return this.view }, e.prototype.getTheme = function () { return this.theme }, e.prototype.getResponsiveTheme = function () { return this.themeController.getResponsiveTheme(this.type) }, e.prototype.getPlotTheme = function () { return this.themeController.getPlotTheme(this.options, this.type) }, e.prototype.bindStateManager = function (t, e) { this.stateController.bindStateManager(t, e) }, e.prototype.setActive = function (t, e) { this.stateController.setState({ type: "active", condition: t, style: e }) }, e.prototype.setSelected = function (t, e) { this.stateController.setState({ type: "selected", condition: t, style: e }) }, e.prototype.setDisable = function (t, e) { this.stateController.setState({ type: "disable", condition: t, style: e }) }, e.prototype.setNormal = function (t) { this.stateController.setState({ type: "normal", condition: t, style: {} }) }, e.prototype.getData = function (t, e) { return this.processData((this.options.data || []).slice(t, e)) }, e.prototype.processData = function (t) { return t }, e.prototype.scale = function () { var t = a.mapValues(this.config.scales, (function (t) { var e = t.type; return e ? { type: e } : {} })), e = a.deepMix({}, this.config.scales, this.options.meta || {}, t); this.setConfig("scales", e) }, e.prototype.axis = function () { var t = u.getComponent("axis", { plot: this, dim: "x" }), e = u.getComponent("axis", { plot: this, dim: "y" }), n = { fields: {} }; n.fields[this.options.xField] = t, n.fields[this.options.yField] = e, this.setConfig("axes", n) }, e.prototype.tooltip = function () { !1 !== this.options.tooltip.visible ? (this.setConfig("tooltip", a.deepMix({}, a.get(this.options, "tooltip"))), a.deepMix(this.config.theme.tooltip, this.options.tooltip.style)) : this.setConfig("tooltip", !1) }, e.prototype.legend = function () { if (!1 !== this.options.legend.visible) { var t = a.get(this.options, "legend.flipPage"), e = a.get(this.options, "legend.clickable"); this.setConfig("legends", { position: a.get(this.options, "legend.position"), formatter: a.get(this.options, "legend.formatter"), offsetX: a.get(this.options, "legend.offsetX"), offsetY: a.get(this.options, "legend.offsetY"), clickable: !!a.isUndefined(e) || e, flipPage: t }) } else this.setConfig("legends", !1) }, e.prototype.annotation = function () { var t = this, e = []; "cartesian" === this.config.coord.type && this.options.guideLine && a.each(this.options.guideLine, (function (n) { var i = u.getComponent("guideLine", { plot: t, cfg: n }); e.push(i) })), this.setConfig("annotations", e) }, e.prototype.animation = function () { !1 !== this.options.animation && "auto" !== this.options.padding || (this.config.animate = !1) }, e.prototype.applyInteractions = function () { var t = this, e = this.options.interactions, n = void 0 === e ? [] : e; this.interactions && this.interactions.forEach((function (t) { t.destroy() })), this.interactions = [], n.forEach((function (e) { var n = l.default.getInteraction(e.type, t.type); if (n) { var i = new n({ view: t.view }, t, n.getInteractionRange(t.layerBBox, e.cfg), e.cfg); t.interactions.push(i) } })) }, e.prototype.setConfig = function (t, e) { "element" !== t ? !1 !== e ? a.assign(this.config[t], e) : this.config[t] = !1 : this.config.elements.push(e) }, e.prototype.parseEvents = function (e) { var n = this, i = this.options; if (i.events) { t.prototype.parseEvents.call(this, i.events); var r = e ? e.EVENT_MAP : c.EVENT_MAP; a.each(i.events, (function (t, e) { if (a.isFunction(t)) { var i = r[e] || e, o = t; c.onEvent(n, i, o) } })) } }, e.prototype.drawTitle = function () { var t = this.options, e = this.layerBBox; if (this.title && (this.title.destroy(), this.title = null), g.isTextUsable(t.title)) { var n = this.width, i = this.config.theme, r = new s.default({ leftMargin: e.minX + i.title.padding[3], topMargin: e.minY + i.title.padding[0], text: t.title.text, style: a.mix(i.title, t.title.style), wrapperWidth: n - i.title.padding[3] - i.title.padding[1], container: this.container.addGroup(), theme: i, index: g.isTextUsable(t.description) ? 0 : 1, plot: this, name: "title" }); this.title = r, this.paddingController.registerPadding(r, "outer") } }, e.prototype.drawDescription = function () { var t = this.options, e = this.layerBBox; if (this.description && (this.description.destroy(), this.description = null), g.isTextUsable(t.description)) { var n = this.width, i = this.config.theme, r = 0; if (this.title) { var o = this.title.getBBox(); r += o.minY + o.height, r += i.description.padding[0] } else r += e.minY + i.title.padding[0]; var u = new s.default({ leftMargin: e.minX + i.description.padding[3], topMargin: r, text: t.description.text, style: a.mix(i.description, t.description.style), wrapperWidth: n - i.description.padding[3] - i.description.padding[1], container: this.container.addGroup(), theme: i, index: 1, plot: this, name: "description" }); this.description = u, this.paddingController.registerPadding(u, "outer") } }, e.prototype.doDestroy = function () { this.doDestroyInteractions(), this.view.destroyed || this.view.destroy() }, e.prototype.doDestroyInteractions = function () { this.interactions && this.interactions.forEach((function (t) { t.destroy() })), this.interactions = [] }, e.prototype.getViewRange = function () { var t = this, e = this.options.interactions, n = void 0 === e ? [] : e, i = this.layerBBox; return n.forEach((function (e) { var n = l.default.getInteraction(e.type, t.type), r = n && n.getInteractionRange(i, e.cfg), o = ""; r && (r.bottom === i.bottom && r.top > i.top ? o = "bottom" : r.right === i.right && r.left > i.left ? o = "right" : r.left === i.left && r.right > i.right ? o = "left" : r.top === i.top && r.bottom > i.bottom && (o = "top"), t.paddingController.registerPadding({ getBBox: function () { return r }, position: o }, "outer")) })), this.paddingController.processOuterPadding() }, e.prototype.addGeomCliper = function () { var t = this.view.get("panelRange"), e = new r.Rect({ attrs: { x: t.minX, y: t.minY, width: t.width, height: t.height } }), n = this.view.get("elements"); a.each(n, (function (t) { var n = t.get("shapeContainer"), i = n.attr("clip"); i && i.remove(), n.attr("clip", e) })) }, e }(d.default); e.default = v }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(131)), o = i.__importDefault(n(132)), a = i.__importDefault(n(68)), s = i.__importDefault(n(133)), u = i.__importDefault(n(134)), l = i.__importDefault(n(135)), c = { axis: r.default, label: a.default, guideLine: o.default }, h = { tooltip: l.default, label: u.default, axis: s.default }; e.getComponent = function (t, e) { return new (0, c[t])(e).config }, e.getComponentStateMethod = function (t, e) { return h[t][e] } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); e.EVENT_MAP = { onViewClick: "click", onViewDblClick: "dblclick", onViewMousemove: "mousemove", onViewMousedown: "mousedown", onViewMouseup: "mouseup", onViewMouseenter: "mouseenter", onViewMouseleave: "mouseleave", onViewContextmenu: "contextmenu", onAxisClick: "axis-label:click", onAxisDblClick: "axis-label:dblclick", onAxisMousemove: "axis-label:mousemove", onAxisMousedown: "axis-label:mousedown", onAxisMouseup: "axis-label:mouseup", onAxisMouseenter: "axis-label:mouseenter", onAxisMouseleave: "axis-label:mouseleave", onAxisContextmenu: "axis-label:contextmenu", onLabelClick: "label:click", onLabelDblClick: "label:dblclick", onLabelMousemove: "label:mousemove", onLabelMouseup: "label:mouseup", onLabelMousedown: "label:mousedown", onLabelMouseenter: "label:mouseenter", onLabelMouseleave: "label:mouseleave", onLabelContextmenu: "label:contextmenu", onLegendClick: "legend-item:click", onLegendDblClick: "legend-item:dblclick", onLegendMouseMove: "legend-item:mousemove", onLegendMouseDown: "legend-item:mousedown", onLegendMouseUp: "legend-item:mouseup", onLegendMouseLeave: "legend-item:mouseleave", onLegendMouseEnter: "legend-item:mouseenter", onLegendContextmenu: "legend-item:contextmenu" }; e.CANVAS_EVENT_MAP = { onPlotClick: "click", onPlotDblClick: "dblclick", onPlotMousemove: "mousemove", onPlotMousedown: "mousedown", onPlotMouseup: "mouseup", onPlotMouseenter: "mouseenter", onPlotMouseleave: "mouseleave", onPlotContextmenu: "contextmenu", onTitleClick: "title:click", onTitleDblClick: "title:dblclick", onTitleMousemove: "title:mousemove", onTitleMousedown: "title:mousedown", onTitleMouseup: "title:mouseup", onTitleMouseenter: "title:mouseenter", onTitleMouseleave: "title:mouseleave", onTitleContextmenu: "title:contextmenu", onDescriptionClick: "description:click", onDescriptionDblClick: "description:dblclick", onDescriptionMousemove: "description:mousemove", onDescriptionMousedown: "description:mousedown", onDescriptionMouseup: "description:mouseup", onDescriptionMouseenter: "description:mouseenter", onDescriptionMouseleave: "description:mouseleave", onDescriptionContextmenu: "description:contextmenu", onBreadcrumbClick: "breadcrumb:click", onBreadcrumbDblClick: "breadcrumb:dblclick", onBreadcrumbMousemove: "breadcrumb:mousemove", onBreadcrumbMousedown: "breadcrumb:mousedown", onBreadcrumbMouseup: "breadcrumb:mouseup", onBreadcrumbMouseenter: "breadcrumb:mouseenter", onBreadcrumbMouseleave: "breadcrumb:mouseleave", onBreadcrumbContextmenu: "breadcrumb:contextmenu" }; e.LAYER_EVENT_MAP = { onLayerClick: "click", onLayerDblClick: "dblclick", onLayerMousemove: "mousemove", onLayerMousedown: "mousedown", onLayerMouseup: "mouseup", onLayerMouseenter: "mouseenter", onLayerMouseleave: "mouseleave", onLayerContextmenu: "contextmenu" }, e.onEvent = function (t, e, n) { t.view.on(e, n) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(150)), o = i.__importDefault(n(152)), a = i.__importDefault(n(154)), s = i.__importDefault(n(156)), u = { area: r.default, line: a.default, point: s.default, interval: o.default }; e.getGeom = function (t, e, n) { return new (0, u[t][e])(n).config } }, function (t, e, n) { "use strict"; n.r(e); var i = {}; n.r(i), n.d(i, "Base", (function () { return _ })), n.d(i, "Html", (function () { return P })), n.d(i, "Canvas", (function () { return T })); var r = {}; n.r(r), n.d(r, "Base", (function () { return j })), n.d(r, "Circle", (function () { return I })), n.d(r, "Helix", (function () { return E })), n.d(r, "Line", (function () { return R })); var o = {}; n.r(o), n.d(o, "Legend", (function () { return z })), n.d(o, "Size", (function () { return q })), n.d(o, "Color", (function () { return Z })), n.d(o, "CanvasCategory", (function () { return tt })), n.d(o, "HtmlCategory", (function () { return lt })); var a = {}; n.r(a), n.d(a, "Annotation", (function () { return ct })), n.d(a, "Line", (function () { return ht })), n.d(a, "Text", (function () { return pt })), n.d(a, "Arc", (function () { return ft })), n.d(a, "Region", (function () { return dt })), n.d(a, "Image", (function () { return gt })), n.d(a, "Html", (function () { return vt })), n.d(a, "DataMarker", (function () { return yt })), n.d(a, "DataRegion", (function () { return mt })); var s = n(63), u = n(1), l = n(22), c = function (t) { function e(e) { var n = t.call(this) || this; return n.cfg = Object(u.__assign)({ id: null, canvas: null, container: null, group: null, capture: !0, offsetX: 0, offsetY: 0, visible: !0, zIndex: 1 }, e), n.destroyed = !1, n } return Object(u.__extends)(e, t), e.prototype.get = function (t) { return this.cfg[t] }, e.prototype.set = function (t, e) { return this.cfg[t] = e, this }, e.prototype.destroy = function () { this.off(), this.destroyed = !0 }, e }(n.n(l).a), h = n(3), p = n(0), f = function () { function t(t) { this.bitmap = {}, this.xGap = 1, this.yGap = 8, t && p.mix(this, t) } return t.prototype.hasGap = function (t) { for (var e = !0, n = this.bitmap, i = Math.round(t.minX), r = Math.round(t.maxX), o = Math.round(t.minY), a = Math.round(t.maxY), s = i; s <= r; s += 1)if (n[s]) { if (s === i || s === r) { for (var u = o; u <= a; u++)if (n[s][u]) { e = !1; break } } else if (n[s][o] || n[s][a]) { e = !1; break } } else n[s] = {}; return e }, t.prototype.fillGap = function (t) { for (var e = this.bitmap, n = Math.round(t.minX), i = Math.round(t.maxX), r = Math.round(t.minY), o = Math.round(t.maxY), a = n; a <= i; a += 1)e[a] || (e[a] = {}); for (a = n; a <= i; a += this.xGap) { for (var s = r; s <= o; s += this.yGap)e[a][s] = !0; e[a][o] = !0 } if (1 !== this.yGap) for (a = r; a <= o; a += 1)e[n][a] = !0, e[i][a] = !0; if (1 !== this.xGap) for (a = n; a <= i; a += 1)e[a][r] = !0, e[a][o] = !0 }, t.prototype.destroy = function () { this.bitmap = {} }, t }(); function d(t, e, n, i) { var r = t.getBBox(), o = r.width, a = r.height, s = { x: e, y: n, textAlign: "center" }; switch (i) { case 0: s.y -= a + 1, s.x += 1, s.textAlign = "left"; break; case 1: s.y -= a + 1, s.x -= 1, s.textAlign = "right"; break; case 2: s.y += a + 1, s.x -= 1, s.textAlign = "right"; break; case 3: s.y += a + 1, s.x += 1, s.textAlign = "left"; break; case 5: s.y -= 2 * a + 2; break; case 6: s.y += 2 * a + 2; break; case 7: s.x += o + 1, s.textAlign = "left"; break; case 8: s.x -= o + 1, s.textAlign = "right" }return t.attr(s), t.getBBox() } function g(t, e, n) { void 0 === n && (n = 100); var i, r = t.attr("x"), o = t.attr("y"), a = t.getBBox(), s = Math.sqrt(a.width * a.width + a.height * a.height), u = 1, l = 0, c = 0, h = function (t) { var e = .1 * t; return [e * Math.cos(e), e * Math.sin(e)] }; if (e.hasGap(a)) return e.fillGap(a), !0; for (var p = !1, f = 0, d = {}; Math.min(Math.abs(l), Math.abs(c)) < s && f < n;)if (l = ~~(i = h(u += -1))[0], c = ~~i[1], (l || c) && !d[l + "-" + c] && (t.attr({ x: r + l, y: o + c }), l + c < 0 && t.attr("textAlign", "right"), f++ , e.hasGap(t.getBBox()))) { e.fillGap(t.getBBox()), p = !0, d[l + "-" + c] = !0; break } return p } var v, y = { scatter: function (t) { for (var e, n, i, r, o, a = new f, s = [], u = 0; u < t.length; u++) { i = (n = t[u]).attr("x"), r = n.attr("y"), o = !1; for (var l = 0; l <= 8; l++)if (e = d(n, i, r, l), a.hasGap(e)) { a.fillGap(e), o = !0; break } o || s.push(n) } for (u = 0; u < s.length; u++)s[u].remove() }, map: function (t, e) { var n; void 0 === e && (e = 100); for (var i = new f, r = [], o = 0; o < t.length; o++)g(n = t[o], i, e) || r.push(n); for (o = 0; o < r.length; o++)r[o].remove() }, treemap: function (t, e) { for (var n, i, r = [], o = 0; o < t.length; o++)n = t[o].getBBox(), i = e[o].getBBox(), (n.width > i.width || n.height > i.height) && r.push(t[o]); for (o = 0; o < r.length; o++)r[o].remove() } }, m = function (t) { function e(e) { return t.call(this, Object(u.__assign)({ name: "label", type: "default", containerTpl: '<div class="g-labels" style="position:absolute;top:0;left:0;"></div>', itemTpl: '<div class="g-label" style="position:absolute;">{text}</div>', items: null, lineGroup: null, shapes: null, useHtml: !1 }, e)) || this } return Object(u.__extends)(e, t), e.prototype.render = function () { this.clear(), this._init(), this.emit("beforerender"), this.draw(), this.emit("afterrender") }, e.prototype.draw = function (t) { void 0 === t && (t = !0), this._dryDraw(), t && this.get("canvas").draw() }, e.prototype.clear = function () { var t = this.get("group"), e = this.get("container"); t && !t.destroyed && t.clear(), e && (e.innerHTML = "") }, e.prototype.destroy = function () { t.prototype.destroy.call(this); var e = this.get("group"), n = this.get("container"); e && !e.destroyed && e.destroy(), n && (n.innerHTML = "") }, e.prototype.changeLabel = function (t, e) { if (t) if (t.tagName) { var n = this._createDom(e); t.innerHTML = n.innerHTML, this._setCustomPosition(e, t) } else t.id = e.id, t.attr("text", e.text), t.attr("x") === e.x && t.attr("y") === e.y || (t.resetMatrix(), e.textStyle.rotate && (t.rotateAtStart(e.textStyle.rotate), delete e.textStyle.rotate), t.attr(e)) }, e.prototype.show = function () { var t = this.get("group"), e = this.get("container"); t && t.show(), e && (e.style.opacity = 1) }, e.prototype.hide = function () { var t = this.get("group"), e = this.get("container"); t && t.hide(), e && (e.style.opacity = 0) }, e.prototype.drawLines = function () { var t = this, e = this.get("lineGroup"); !e || e.destroyed ? (e = this.get("group").addGroup(), this.set("lineGroup", e)) : e.clear(), p.each(this.get("items"), (function (n) { t._lineToLabel(n, e) })) }, e.prototype._lineToLabel = function (t, e) { if (t.labelLine) { var n = p.isBoolean(t.labelLine) ? {} : t.labelLine, i = void 0 === t.capture ? this.get("capture") : t.capture, r = n.path; if (r && p.isFunction(n.path) && (r = n.path(t)), !r) { var o = t.start; r = [["M", o.x, o.y], ["L", t.x, t.y]] } var a = t.color; a || (a = t.textStyle && t.textStyle.fill ? t.textStyle.fill : "#000"); var s = e.addShape("path", { capture: i, attrs: p.mix({ path: r, stroke: a, fill: null }, n) }); s.name = this.get("name"), s.id = t.id && t.id.replace("glabel", "glabelline"), s.set("coord", this.get("coord")) } }, e.prototype._adjustLabels = function () { var t = this.get("type"), e = this.getLabels(), n = this.get("shapes"), i = y[t]; i && i(e, n) }, e.prototype.getLabels = function () { var t = this.get("container"); if (t) return p.toArray(t.childNodes); var e = this.get("group").get("children"); return p.filter(e, (function (t) { return t.isShape })) }, e.prototype._createText = function (t) { var e, n = t, i = this.get("container"), r = void 0 === n.capture ? this.get("capture") : n.capture; if (!n.useHtml && !n.htmlTemplate) { var o = this.get("name"), a = n.origin, s = this.get("group"); delete n.origin; var u = n.rotate; return n.textStyle && (n.textStyle.rotate && (u = n.textStyle.rotate, delete n.textStyle.rotate), n = p.mix({ x: n.x, y: n.y, textAlign: n.textAlign, text: n.text }, n.textStyle)), e = s.addShape("text", { capture: r, attrs: n }), u && (Math.abs(u) > 2 * Math.PI && (u = u / 180 * Math.PI), e.transform([["t", -n.x, -n.y], ["r", u], ["t", n.x, n.y]])), e.setSilent("origin", a || n), e.name = o, this.get("appendInfo") && e.setSilent("appendInfo", this.get("appendInfo")), e } i || (i = this._initHtmlContainer()); var l = this._createDom(n); i.appendChild(l), this._setCustomPosition(n, l) }, e.prototype._initHtmlContainer = function () { var t = this.get("container"); if (!t) { var e = this.get("containerTpl"), n = this.get("canvas").get("el").parentNode; t = h.createDom(e), n.style.position = "relative", n.appendChild(t), this.set("container", t) } return t }, e.prototype._createDom = function (t) { var e = this.get("itemTpl"), n = p.substitute(e, { text: t.text }); return h.createDom(n) }, e.prototype._setCustomPosition = function (t, e) { var n = t.textAlign || "left", i = t.y, r = t.x, o = h.getOuterWidth(e); i -= h.getOuterHeight(e) / 2, "center" === n ? r -= o / 2 : "right" === n && (r -= o), e.style.top = parseInt(i, 10) + "px", e.style.left = parseInt(r, 10) + "px" }, e.prototype._init = function () { if (!this.get("group")) { var t = this.get("canvas").addGroup({ id: "label-group" }); this.set("group", t) } }, e.prototype._dryDraw = function () { var t = this, e = this.get("items"), n = this.getLabels(), i = n.length; p.each(e, (function (e, r) { if (r < i) { var o = n[r]; t.changeLabel(o, e) } else { var a = t._createText(e); a && (a.id = e.id, a.set("coord", e.coord)) } })); for (var r = i - 1; r >= e.length; r -= 1)n[r].remove(); this._adjustLabels(), this.drawLines() }, e }(c), x = m, _ = function (t) { function e(e) { return t.call(this, Object(u.__assign)({ x: 0, y: 0, items: null, titleContent: null, showTitle: !0, panelRange: null, inPanel: !0, crosshairs: null }, e)) || this } return Object(u.__extends)(e, t), e.prototype.isContentChange = function (t, e) { var n = this.get("titleContent"), i = this.get("items"), r = !(t === n && i.length === e.length); return r || p.each(e, (function (t, e) { var n = i[e], o = Object.keys(t); if (r = o.some((function (e) { return !p.isObject(t[e]) && t[e] !== n[e] }))) return !1 })), r }, e.prototype.setContent = function (t, e) { return this.set("items", e), this.set("titleContent", t), this.render(), this }, e.prototype.setPosition = function (t, e, n) { this.set("x", t), this.set("y", e) }, e.prototype.setMarkers = function (t, e) { var n = this.get("markerGroup"), i = this.get("frontgroundGroup"); n ? n.clear() : (n = i.addGroup({ zIndex: 1, capture: !1 }), this.set("markerGroup", n)), p.each(t, (function (t) { n.addShape("marker", { color: t.color, attrs: p.mix({ fill: t.color, symbol: "circle", shadowColor: t.color }, e, { x: t.x, y: t.y }) }) })), this.set("markerItems", t) }, e.prototype.clearMarkers = function () { var t = this.get("markerGroup"); t && t.clear() }, e.prototype.render = function () { }, e.prototype.clear = function () { }, e.prototype.show = function () { this.set("visible", !0) }, e.prototype.hide = function () { this.set("visible", !1) }, e }(c), b = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ type: null, plot: null, panelRange: null, rectStyle: { fill: "#CCD6EC", opacity: .3 }, lineStyle: { stroke: "rgba(0, 0, 0, 0.25)", lineWidth: 1 }, isTransposed: !1 }, e)) || this; return n._init_(), n.render(), n } return Object(u.__extends)(e, t), e.prototype._init_ = function () { var t = this.get("plot").addGroup(); this.set("container", t) }, e.prototype._addLineShape = function (t, e) { var n = this.get("container").addShape("line", { attrs: t, capture: !1 }); return this.set("crossLineShape" + e, n), n }, e.prototype._renderHorizontalLine = function (t, e) { var n = p.mix(this.get("lineStyle"), this.get("style")), i = p.mix({ x1: e ? e.bl.x : t.get("width"), y1: 0, x2: e ? e.br.x : 0, y2: 0 }, n); this._addLineShape(i, "X") }, e.prototype._renderVerticalLine = function (t, e) { var n = p.mix(this.get("lineStyle"), this.get("style")), i = p.mix({ x1: 0, y1: e ? e.bl.y : t.get("height"), x2: 0, y2: e ? e.tl.y : 0 }, n); this._addLineShape(i, "Y") }, e.prototype._renderBackground = function (t, e) { var n = p.mix(this.get("rectStyle"), this.get("style")), i = this.get("container"), r = p.mix({ x: e ? e.tl.x : 0, y: e ? e.tl.y : t.get("height"), width: e ? e.br.x - e.bl.x : t.get("width"), height: e ? Math.abs(e.tl.y - e.bl.y) : t.get("height") }, n), o = i.addShape("rect", { attrs: r, capture: !1 }); return this.set("crosshairsRectShape", o), o }, e.prototype._updateRectShape = function (t) { var e, n = this.get("crosshairsRectShape"), i = this.get("isTransposed"), r = t[0], o = t[t.length - 1], a = i ? "y" : "x", s = i ? "height" : "width", u = r[a]; if (t.length > 1 && r[a] > o[a] && (u = o[a]), this.get("width")) n.attr(a, u - this.get("crosshairs").width / 2), n.attr(s, this.get("width")); else if (p.isArray(r.point[a]) && !r.size) { var l = r.point[a][1] - r.point[a][0]; n.attr(a, r.point[a][0]), n.attr(s, l) } else e = 3 * r.size / 4, n.attr(a, u - e), 1 === t.length ? n.attr(s, 3 * r.size / 2) : n.attr(s, Math.abs(o[a] - r[a]) + 2 * e) }, e.prototype.render = function () { var t = this.get("canvas"), e = this.get("panelRange"), n = this.get("isTransposed"); switch (this.clear(), this.get("type")) { case "x": this._renderHorizontalLine(t, e); break; case "y": this._renderVerticalLine(t, e); break; case "cross": this._renderHorizontalLine(t, e), this._renderVerticalLine(t, e); break; case "rect": this._renderBackground(t, e); break; default: n ? this._renderHorizontalLine(t, e) : this._renderVerticalLine(t, e) } }, e.prototype.show = function () { this.get("container").show() }, e.prototype.hide = function () { this.get("container").hide() }, e.prototype.clear = function () { var t = this.get("container"); this.set("crossLineShapeX", null), this.set("crossLineShapeY", null), this.set("crosshairsRectShape", null), t.clear() }, e.prototype.destroy = function () { var e = this.get("container"); t.prototype.destroy.call(this), e.remove() }, e.prototype.setPosition = function (t, e, n) { var i = this.get("crossLineShapeX"), r = this.get("crossLineShapeY"), o = this.get("crosshairsRectShape"); r && !r.get("destroyed") && r.move(t, 0), i && !i.get("destroyed") && i.move(0, e), o && !o.get("destroyed") && this._updateRectShape(n) }, e }(c), w = '"-apple-system", "BlinkMacSystemFont", "Segoe UI", Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", SimSun, "sans-serif"', M = ((v = {})["g2-tooltip"] = { position: "absolute", display: "none", zIndex: 8, transition: "visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)", backgroundColor: "rgba(255, 255, 255, 0.9)", boxShadow: "0px 0px 10px #aeaeae", borderRadius: "3px", color: "rgb(87, 87, 87)", fontSize: "12px", fontFamily: w, lineHeight: "20px", padding: "10px 10px 6px 10px" }, v["g2-tooltip-title"] = { marginBottom: "4px" }, v["g2-tooltip-list"] = { margin: 0, listStyleType: "none", padding: 0 }, v["g2-tooltip-list-item"] = { marginBottom: "4px" }, v["g2-tooltip-marker"] = { width: "5px", height: "5px", borderRadius: "50%", display: "inline-block", marginRight: "8px" }, v["g2-tooltip-value"] = { display: "inline-block", float: "right", marginLeft: "30px" }, v); function S(t, e, n, i, r, o) { var a = t, s = e, u = 0, l = 0, c = 20; if (o) { var h = o.getBBox(); u = h.width, l = h.height, a = h.x, s = h.y, c = 5 } switch (n) { case "inside": a = a + u / 2 - i / 2, s = s + l / 2 - r / 2; break; case "top": a = a + u / 2 - i / 2, s = s - r - c; break; case "left": a = a - i - c, s = s + l / 2 - r / 2; break; case "right": a = a + u + c, s = s + l / 2 - r / 2; break; case "bottom": default: a = a + u / 2 - i / 2, s = s + l + c }return [a, s] } function C(t, e, n, i, r, o) { var a = t, s = e; return a + n + 20 > r ? a = (a -= n + 20) < 0 ? 0 : a : a + 20 < 0 ? a = 20 : a += 20, s + i + 20 > o ? s = (s -= i + 20) < 0 ? 0 : s : s + 20 < 0 ? s = 20 : s += 20, [a, s] } function O(t, e, n, i, r, o) { var a = t, s = e; return a + n > r.tr.x && (a -= n + 40), a < r.tl.x && (a = r.tl.x), o || (s + i > r.bl.y && (s -= i + 40), s < r.tl.y && (s = r.tl.y)), [a, s] } var k = function (t, e) { return t.getElementsByClassName(e)[0] }, P = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ containerTpl: '<div class="g2-tooltip">\n        <div class="g2-tooltip-title"></div>\n        <ul class="g2-tooltip-list"></ul>\n        </div>', itemTpl: '<li data-index={index}>\n        <span style="background-color:{color};" class="g2-tooltip-marker"></span>\n        {name}<span class="g2-tooltip-value">{value}</span></li>', htmlContent: null, follow: !0, enterable: !1 }, e)) || this, i = M; n.style = function (t, e) { return Object.keys(t).forEach((function (n) { e[n] && (t[n] = p.mix(t[n], e[n])) })), t }(i, e), n._init_(), n.get("items") && n.render(); var r = n.get("crosshairs"); if (r) { var o = "rect" === r.type ? n.get("backgroundGroup") : n.get("frontgroundGroup"), a = new b(p.mix({ plot: o, panelRange: n.get("panelRange"), canvas: n.get("canvas") }, n.get("crosshairs"))); a.hide(), n.set("crosshairGroup", a) } return n } return Object(u.__extends)(e, t), e.prototype._init_ = function () { var t, e = this.get("containerTpl"), n = this.get("canvas").get("el").parentNode; if (this.get("htmlContent")) t = this._getHtmlContent(); else if (/^\#/.test(e)) { var i = e.replace("#", ""); t = document.getElementById(i) } else t = h.createDom(e); this.set("container", t), h.modifyCSS(t, this.style["g2-tooltip"]), n.appendChild(t), n.style.position = "relative" }, e.prototype.render = function () { if (this.clear(), this.get("htmlContent")) { var t = this.get("canvas").get("el").parentNode, e = this._getHtmlContent(); t.appendChild(e), h.modifyCSS(e, this.style["g2-tooltip"]), this.set("container", e) } else this._renderTpl() }, e.prototype._renderTpl = function () { var t = this, e = this.get("showTitle"), n = this.get("titleContent"), i = this.get("container"), r = k(i, "g2-tooltip-title"), o = k(i, "g2-tooltip-list"), a = this.get("items"); r && e && (h.modifyCSS(r, this.style["g2-tooltip-title"]), r.innerHTML = n), o && (h.modifyCSS(o, this.style["g2-tooltip-list"]), p.each(a, (function (e, n) { o.appendChild(t._addItem(e, n)) }))) }, e.prototype.clear = function () { var t = this.get("container"); if (t && this.get("htmlContent")) t.remove(); else { var e = k(t, "g2-tooltip-title"), n = k(t, "g2-tooltip-list"); e && (e.innerHTML = ""), n && (n.innerHTML = "") } }, e.prototype.show = function () { var e = this.get("container"); e.style.visibility = "visible", e.style.display = "block"; var n = this.get("crosshairGroup"); n && n.show(); var i = this.get("markerGroup"); i && i.show(), t.prototype.show.call(this), this.get("canvas").draw() }, e.prototype.hide = function () { var e = this.get("container"); e.style.visibility = "hidden", e.style.display = "none"; var n = this.get("crosshairGroup"); n && n.hide(); var i = this.get("markerGroup"); i && i.hide(), t.prototype.hide.call(this), this.get("canvas").draw() }, e.prototype.destroy = function () { var e = this.get("container"), n = this.get("containerTpl"); e && !/^\#/.test(n) && e.parentNode.removeChild(e); var i = this.get("crosshairGroup"); i && i.destroy(); var r = this.get("markerGroup"); r && r.remove(), t.prototype.destroy.call(this) }, e.prototype._addItem = function (t, e) { var n = this.get("itemTpl"), i = p.substitute(n, p.mix({ index: e }, t)), r = h.createDom(i); h.modifyCSS(r, this.style["g2-tooltip-list-item"]); var o = k(r, "g2-tooltip-marker"); o && h.modifyCSS(o, this.style["g2-tooltip-marker"]); var a = k(r, "g2-tooltip-value"); return a && h.modifyCSS(a, this.style["g2-tooltip-value"]), r }, e.prototype._getHtmlContent = function () { var t = this.get("htmlContent")(this.get("titleContent"), this.get("items")); return p.isElement(t) ? t : h.createDom(t) }, e.prototype.setPosition = function (e, n, i) { var r, o = e, a = n, s = this.get("container"), u = this.get("canvas").get("el"), l = h.getWidth(u), c = h.getHeight(u), f = s.clientWidth, d = s.clientHeight, g = o, v = a, y = this.get("prePosition") || { x: 0, y: 0 }; if (f || (s.style.display = "block", f = s.clientWidth, d = s.clientHeight, s.style.display = "none"), this.get("enterable") ? (r = [o, a -= s.clientHeight / 2], y && o - y.x > 0 ? o -= s.clientWidth + 1 : o += 1) : this.get("position") ? (o = (r = S(o, a, this.get("position"), f, d, i))[0], a = r[1]) : (o = (r = C(o, a, f, d, l, c))[0], a = r[1]), this.get("inPanel")) { var m = this.get("panelRange"), x = this.get("panelGroup").attr("clip"); o = (r = O(o, a, f, d, x ? x.getBBox() : m, this.get("enterable")))[0], a = r[1] } var _ = this.get("markerItems"); p.isEmpty(_) || (g = _[0].x, v = _[0].y), this.set("prePosition", r), this.get("follow") && (s.style.left = o + "px", s.style.top = a + "px"); var b = this.get("crosshairGroup"); if (b) { var w = this.get("items"); b.setPosition(g, v, w) } t.prototype.setPosition.call(this, o, a) }, e }(_), A = n(2), L = n(4), T = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ backgroundStyle: { x: 0, y: 0, width: 100, height: 100, fill: "rgba(255, 255, 255, 0.9)", radius: 4, stroke: "#e2e2e2", lineWidth: 1 }, titleStyle: { fontFamily: w, text: "", textBaseline: "top", fontSize: 12, fill: "rgb(87, 87, 87)", lineHeight: 20, padding: 20 }, markerStyle: { radius: 4 }, nameStyle: { fontFamily: w, fontSize: 12, fill: "rgb(87, 87, 87)", textBaseline: "middle", textAlign: "start", padding: 8 }, valueStyle: { fontFamily: w, fontSize: 12, fill: "rgb(87, 87, 87)", textBaseline: "middle", textAlign: "start", padding: 30 }, padding: { top: 20, right: 20, bottom: 20, left: 20 }, itemGap: 10, animationDuration: 200 }, e)) || this; if (n.get("crosshairs")) { var i = n.get("frontgroundGroup"), r = new b(p.mix({ plot: i, panelRange: n.get("panelRange"), canvas: n.get("canvas") }, n.get("crosshairs"))); r.hide(), n.set("crosshairGroup", r) } return n._init_(), n.get("items") && n.render(), n } return Object(u.__extends)(e, t), e.prototype._init_ = function () { var t = this.get("padding"), e = this.get("frontgroundGroup"), n = e.addGroup({ capture: !1 }); this.set("markerGroup", n); var i = e.addGroup(); i.hide(), this.set("container", i); var r = i.addShape("rect", { attrs: p.mix({}, this.get("backgroundStyle")) }); this.set("board", r); var o = this.get("titleStyle"); if (this.get("showTitle")) { var a = i.addShape("text", { attrs: p.mix({ x: t.left, y: t.top }, o) }); this.set("titleShape", a), a.name = "tooltip-title" } var s = i.addGroup(); s.move(t.left, t.top + o.lineHeight + o.padding), this.set("itemsGroup", s) }, e.prototype.render = function () { var t = this; this.clear(); var e = this.get("container"), n = this.get("board"), i = this.get("showTitle"), r = this.get("titleContent"), o = this.get("titleShape"), a = this.get("itemsGroup"), s = this.get("items"), u = this.get("padding"); o && i && o.attr("text", r); var l = this.get("itemGap"), c = 0; p.each(s, (function (e) { var n = t._addItem(e); n.move(0, c), a.add(n); var i = n.getBBox().height; c += i + l })); var h = e.getBBox(), f = h.width + u.right, d = h.height + u.bottom; n.attr("width", f), n.attr("height", d), this._alignToRight(f) }, e.prototype.clear = function () { var t = this.get("titleShape"), e = this.get("itemsGroup"), n = this.get("board"); t && (t.text = ""), e.clear(), n.attr("width", 0), n.attr("height", 0) }, e.prototype.show = function () { this.get("container").show(); var e = this.get("crosshairGroup"); e && e.show(); var n = this.get("markerGroup"); n && n.show(), t.prototype.show.call(this), this.get("canvas").draw() }, e.prototype.hide = function () { this.get("container").hide(); var e = this.get("crosshairGroup"); e && e.hide(); var n = this.get("markerGroup"); n && n.hide(), t.prototype.hide.call(this), this.get("canvas").draw() }, e.prototype.destroy = function () { var e = this.get("container"), n = this.get("crosshairGroup"); n && n.destroy(); var i = this.get("markerGroup"); i && i.remove(), t.prototype.destroy.call(this), e.remove() }, e.prototype.setPosition = function (e, n, i) { var r, o = e, a = n, s = this.get("container"), u = this.get("canvas").get("el"), l = h.getWidth(u), c = h.getHeight(u), f = s.getBBox(), d = f.width, g = f.height, v = o, y = a; if (this.get("position") ? (o = (r = S(o, a, this.get("position"), d, g, i))[0], a = r[1]) : (o = (r = C(o, a, d, g, l, c))[0], a = r[1]), this.get("inPanel")) { var m = this.get("panelRange"), x = this.get("panelGroup").attr("clip"); o = (r = O(o, a, d, g, x ? x.getBBox() : m, this.get("enterable")))[0], a = r[1] } var _ = this.get("markerItems"); p.isEmpty(_) || (v = _[0].x, y = _[0].y); var b = Object(L.transform)([1, 0, 0, 0, 1, 0, 0, 0, 1], [["t", o, a]]); s.stopAnimate(), s.animate({ matrix: b }, this.get("animationDuration")); var w = this.get("crosshairGroup"); if (w) { var M = this.get("items"); w.setPosition(v, y, M) } t.prototype.setPosition.call(this, o, a) }, e.prototype._addItem = function (t) { var e = new A.Group, n = this.get("markerStyle").radius; if (t.marker) { var i = p.mix({}, t.marker, { x: t.marker.radius / 2, y: 0 }); e.addShape("marker", { attrs: i }), n = t.marker.radius } var r = this.get("nameStyle"); e.addShape("text", { attrs: p.mix({ x: n + r.padding, y: 0, text: t.name }, r) }); var o = this.get("valueStyle"); return e.addShape("text", { attrs: p.mix({ x: e.getBBox().width + o.padding, y: 0, text: t.value }, o) }), e }, e.prototype._alignToRight = function (t) { var e = this, n = this.get("itemsGroup").get("children"); p.each(n, (function (n) { var i = n.get("children")[2]; if (i) { var r = i.getBBox().width, o = t - r - 2 * e.get("padding").right; i.attr("x", o) } })) }, e }(_), D = { title: { textStyle: { fontSize: 12, fill: "#595959", textBaseline: "middle", fontFamily: w, textAlign: "center" }, offset: 20 }, label: { textStyle: { fontSize: 12, fill: "#ccc", textBaseline: "middle", fontFamily: w }, offset: 10, offsetX: 0, offsetY: 0 }, grid: { lineWidth: 1, stroke: "#C0D0E0" } }, j = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ type: "base", id: null, line: { lineWidth: 1, stroke: "#C0D0E0" }, tickLine: { lineWidth: 1, stroke: "#C0D0E0", length: 5 }, subTickCount: 0, subTickLine: null, grid: null, label: null, title: null, autoRotateLabel: !0, autoHideLabel: !1, autoRotateTitle: !0, gridType: "line", ticks: [], labelItems: [], gridPoints: [] }, e)) || this; return n._processTicks(), n } return Object(u.__extends)(e, t), e.prototype.render = function () { this.get("grid") && this._renderGrid(), this.get("line") && this._renderLine(), this.get("tickLine") && this._renderTicks(), this.get("label") && this._renderLabels(), this.get("title") && (this.set("title", p.deepMix({}, D.title, this.get("title"))), this.renderTitle()) }, e.prototype.destroy = function () { if (!this.destroyed) { t.prototype.destroy.call(this); var e = this.get("gridGroup"); e && e.remove(); var n = this.get("labelRenderer"); n && n.destroy(), this.get("group").destroy(), this.destroyed = !0 } }, e.prototype.clear = function () { var t = this.get("group"); if (!t.get("destroyed") && t.get("children").length) { var e = this.get("gridGroup"); e && e.clear(); var n = this.get("labelRenderer"); n && n.clear(), this.get("group").clear() } }, e.prototype.parseTick = function (t, e, n) { return { text: t, value: e / (n - 1) } }, e.prototype.addLabel = function (t, e, n, i) { var r = this.get("theme") || {}, o = this.get("label"), a = o; if (p.isFunction(a)) { var s = o(t.text, n, i); a = s ? p.deepMix({}, r.label, s) : null } if (a) { (a = p.deepMix({ text: t.text }, D.label, a)).formatter && (a.text = a.formatter(t.text, n, i)); var u = this.getSideVector(a.offset, e, n), l = { x: e.x + u[0] + a.offsetX, y: e.y + u[1] + a.offsetY }; if (a.x = l.x, a.y = l.y, a.point = l, p.isNil(e.rotate) || (a.rotate = e.rotate), p.isNil(a.rotate)) a.textAlign = this.getTextAnchor(u); else { a.textAlign = a.rotate % 180 == 0 ? "center" : a.rotate > 0 ? a.rotate % 360 < 180 ? "left" : "right" : a.rotate % 360 > -180 ? "right" : "left"; var c = -6 * Math.abs(Math.sin(a.rotate * Math.PI / 180)); a.y += c, a.point.y += c } a.useHtml && (a.text = a.htmlTemplate), this.get("labelItems").push(a) } }, e.prototype.getTextAnchor = function (t) { return Math.abs(t[1] / t[0]) >= 1 ? "center" : t[0] > 0 ? "start" : "end" }, e.prototype.getMaxLabelWidthOrHeight = function (t, e) { var n = t.getLabels(), i = 0; return p.each(n, (function (t) { var n = t.getBBox()[e]; i < n && (i = n) })), i }, e.prototype.autoRotateLabels = function () { }, e.prototype.autoHideLabels = function () { }, e.prototype.renderTitle = function () { }, e.prototype._renderLine = function () { var t = this.getLinePath(), e = Object(u.__assign)({ path: t }, this.get("line")), n = this.get("group").addShape("path", { attrs: e, zIndex: 1 }); n.name = "axis-line", this.get("appendInfo") && n.setSilent("appendInfo", this.get("appendInfo")), this.set("lineShape", n) }, e.prototype._renderTicks = function () { var t = this.get("tickLine"), e = this.get("tickItems"), n = this.get("subTickItems"); if (e && e.length && this._addTickLine(e, t), n && n.length) { var i = this.get("subTickLine") || t; this._addTickLine(n, i) } }, e.prototype._renderGrid = function () { var t = this, e = this.get("coord"), n = this.get("appendInfo"), i = this.get("group"), r = this.get("gridPoints"), o = this.get("grid"), a = this.get("gridType"), s = this.get("theme") || {}, u = this.get("ticks"), l = r.length, c = i.addGroup({ class: "axis-grid", zIndex: 0 }); this.set("gridGroup", c); var h, f = o; (p.each(r, (function (t, i) { if (p.isFunction(o)) { var r = u[i], h = r && o(r.text, i, l); f = h ? p.mix({}, s.grid, h) : null } if (f) { var d = t.points, g = []; "arc" === a ? p.each(d, (function (t, e) { var n = t.radius, i = t.x, r = t.y, o = t.flag; 0 === e ? g.push(["M", i, r]) : g.push(["A", n, n, 0, 0, o, i, r]) })) : p.each(d, (function (t, e) { var n = t.x, i = t.y; 0 === e ? g.push(["M", n, i]) : g.push(["L", n, i]) })); var v = c.addShape("path", { attrs: p.mix({ path: g }, D.grid, f) }); v.name = "axis-grid", v.id = t.id, v.set("coord", e), n && v.setSilent("appendInfo", v) } })), this.get("gridAlternateColor")) && p.each(r, (function (e, n) { h && t._drawAlternativeBg(e, h, n), h = e })) }, e.prototype._renderLabels = function () { var t = this.get("group"), e = new m({ name: "axis-label" }); e.set("coord", this.get("coord")), e.set("group", t.addGroup({ class: "axis-labels" })), e.set("canvas", this.get("canvas")), e.set("items", this.get("labelItems")), e.draw(!1), this.set("labelRenderer", e), this.get("autoRotateLabel") && this.autoRotateLabels(), this.get("autoHideLabel") && this.autoHideLabels() }, e.prototype._processTicks = function () { var t = this, e = this.get("label"), n = this.get("subTickCount"), i = this.get("tickLine"), r = this._parseTicks(this.get("ticks")), o = r.length; if (p.each(r, (function (n, r) { var a = t.getTickPoint(n.value, r); i && t._addTickItem(r, a, i.length), e && t.addLabel(n, a, r, o) })), n) { var a = this.get("subTickLine"); p.each(r, (function (e, o) { if (o > 0) { var s = e.value - r[o - 1].value; s /= t.get("subTickCount") + 1; for (var u = 1; u <= n; u++) { var l = { text: "", value: o ? r[o - 1].value + u * s : u * s }, c = t.getTickPoint(l.value), h = void 0; h = a && a.length ? a.length : Math.floor(.6 * i.length), t._addTickItem(u - 1, c, h, "sub") } } })) } }, e.prototype._parseTicks = function (t) { void 0 === t && (t = []); for (var e = t.length, n = 0; n < e; n++) { var i = t[n]; p.isObject(i) || (t[n] = this.parseTick(i, n, e)) } return this.set("ticks", t), t }, e.prototype._addTickItem = function (t, e, n, i) { void 0 === i && (i = ""); var r = this.get("tickItems") || [], o = this.get("subTickItems") || [], a = this.getTickEnd(e, n, t), s = { x1: e.x, y1: e.y, x2: a.x, y2: a.y }; "sub" === i ? o.push(s) : r.push(s), this.set("tickItems", r), this.set("subTickItems", o) }, e.prototype._addTickLine = function (t, e) { var n = p.mix({}, e), i = []; p.each(t, (function (t) { i.push(["M", t.x1, t.y1]), i.push(["L", t.x2, t.y2]) })), delete n.length, n.path = i; var r = this.get("group").addShape("path", { attrs: n, zIndex: 1 }); r.name = "axis-ticks", r.id = this.get("id") + "-ticks", r.set("coord", this.get("coord")), this.get("appendInfo") && r.setSilent("appendInfo", this.get("appendInfo")) }, e.prototype._drawAlternativeBg = function (t, e, n) { var i, r, o, a = this.get("gridAlternateColor"); p.isString(a) ? r = a : p.isArray(a) && (r = a[0], o = a[1]), n % 2 == 0 ? o && (i = this._getBackItem(e.points, t.points, o)) : r && (i = this._getBackItem(e.points, t.points, r)); var s = this.get("gridGroup").addShape("Path", { attrs: i }); s.name = "axis-grid-rect", s.id = t.id && t.id.replace("grid", "grid-rect"), s.set("coord", this.get("coord")), this.get("appendInfo") && s.setSilent("appendInfo", this.get("appendInfo")) }, e.prototype._getBackItem = function (t, e, n) { var i = []; if ("arc" === this.get("gridType")) { p.each(t, (function (t, e) { var n = t.x, r = t.y, o = t.radius, a = t.flag; 0 === e ? i.push(["M", n, r]) : i.push(["A", o, o, 0, 0, a, n, r]) })); for (var r = e.length - 1; r >= 0; r--) { var o = e[r], a = o.x, s = o.y, u = o.radius, l = o.flag; r === e.length - 1 ? i.push(["M", a, s]) : i.push(["A", u, u, 0, 0, 1 === l ? 0 : 1, a, s]) } } else { p.each(t, (function (t, e) { var n = t.x, r = t.y; 0 === e ? i.push(["M", n, r]) : i.push(["L", n, r]) })); for (var c = e.length - 1; c >= 0; c--)i.push(["L", e[c].x, e[c].y]); i.push(["Z"]) } return { fill: n, path: i } }, e }(c), I = function (t) { function e(e) { return void 0 === e && (e = {}), t.call(this, Object(u.__assign)({ type: "circle", startAngle: -Math.PI / 2, endAngle: 3 * Math.PI / 2 }, e)) || this } return Object(u.__extends)(e, t), e.prototype.parseTick = function (t, e, n) { return { text: t, value: e / n } }, e.prototype.getTickPoint = function (t) { var e = this.get("startAngle"), n = e + (this.get("endAngle") - e) * t; return this._getCirclePoint(n) }, e.prototype.getSideVector = function (t, e) { var n = this.get("center"), i = [e.x - n.x, e.y - n.y]; if (!p.isNil(t)) { var r = L.vec2.length(i); L.vec2.scale(i, i, t / r) } return i }, e.prototype.getSidePoint = function (t, e) { var n = this.getSideVector(e, t); return { x: t.x + n[0], y: t.y + n[1] } }, e.prototype.getTickEnd = function (t, e) { var n = this.get("tickLine"), i = p.isNil(e) ? n.length : e; return this.getSidePoint(t, i) }, e.prototype.getTextAnchor = function (t) { var e; return p.isNumberEqual(t[0], 0) ? e = "center" : t[0] > 0 ? e = "left" : t[0] < 0 && (e = "right"), e }, e.prototype.getLinePath = function () { var t = this.get("center"), e = t.x, n = t.y, i = this.get("radius"), r = i, o = this.get("startAngle"), a = this.get("endAngle"), s = this.get("inner"), u = []; if (Math.abs(a - o) === 2 * Math.PI) u = [["M", e, n], ["m", 0, -r], ["a", i, r, 0, 1, 1, 0, 2 * r], ["a", i, r, 0, 1, 1, 0, -2 * r], ["z"]]; else { var l = this._getCirclePoint(o), c = this._getCirclePoint(a), h = Math.abs(a - o) > Math.PI ? 1 : 0, p = o > a ? 0 : 1; if (s) { var f = this.getSideVector(s * i, l), d = this.getSideVector(s * i, c), g = { x: f[0] + e, y: f[1] + n }, v = { x: d[0] + e, y: d[1] + n }; u = [["M", g.x, g.y], ["L", l.x, l.y], ["A", i, r, 0, h, p, c.x, c.y], ["L", v.x, v.y], ["A", i * s, r * s, 0, h, Math.abs(p - 1), g.x, g.y]] } else u = [["M", e, n], ["L", l.x, l.y], ["A", i, r, 0, h, p, c.x, c.y], ["L", e, n]] } return u }, e.prototype.addLabel = function (e, n, i, r) { var o = p.get(this.get("label"), "offset", 5), a = this.getSidePoint(n, o); t.prototype.addLabel.call(this, e, a, i, r) }, e.prototype.autoRotateLabels = function () { var t = this.get("ticks"), e = this.get("labelRenderer"); if (e && t.length > 12) { var n = this.get("radius"), i = this.get("startAngle"), r = this.get("endAngle") - i, o = r / (t.length - 1), a = Math.sin(o / 2) * n * 2, s = this.getMaxLabelWidthOrHeight(e, "width"); p.each(e.getLabels(), (function (e, n) { var o = t[n].value * r + i, u = o % (2 * Math.PI); s < a ? (u <= 0 && (o += Math.PI), u > Math.PI && (o -= Math.PI), o -= Math.PI / 2, e.attr("textAlign", "center")) : u > Math.PI / 2 ? o -= Math.PI : u < Math.PI / 2 * -1 && (o += Math.PI), e.rotateAtStart(o) })) } }, e.prototype._getCirclePoint = function (t, e) { void 0 === e && (e = 0); var n = this.get("center"), i = e || this.get("radius"); return { x: n.x + Math.cos(t) * i, y: n.y + Math.sin(t) * i } }, e }(j), B = n(18), E = function (t) { function e(e) { return void 0 === e && (e = {}), t.call(this, Object(u.__assign)({ type: "helix", startAngle: 1.25 * Math.PI, endAngle: 7.25 * Math.PI, inner: 0, a: 0, center: null, axisStart: null, crp: [] }, e)) || this } return Object(u.__extends)(e, t), e.prototype.getLinePath = function () { var t = this.get("crp"), e = this.get("axisStart"), n = B.a(t); return n.unshift(["M", e.x, e.y]), n }, e.prototype.getTickPoint = function (t) { var e = this.get("startAngle"), n = e + (this.get("endAngle") - e) * t; return this._getHelixPoint(n) }, e.prototype.getSideVector = function (t, e) { var n = this.get("center"), i = [e.x - n.x, e.y - n.y]; if (!p.isNil(t)) { var r = L.vec2.length(i); L.vec2.scale(i, i, t / r) } return i }, e.prototype.getSidePoint = function (t, e) { var n = this.getSideVector(e, t); return { x: t.x + n[0], y: t.y + n[1] } }, e.prototype.getTickEnd = function (t, e) { var n = this.get("tickLine"), i = e || n.length; return this.getSidePoint(t, i) }, e.prototype._getHelixPoint = function (t) { var e = this.get("center"), n = this.get("a") * t + this.get("inner"); return { x: e.x + Math.cos(t) * n, y: e.y + Math.sin(t) * n } }, e }(j), F = [0, -45, -90], R = function (t) { function e(e) { return void 0 === e && (e = {}), t.call(this, Object(u.__assign)({ type: "line", x: null, y: null, isVertical: !1, start: null, end: null }, e)) || this } return Object(u.__extends)(e, t), e.prototype.getSideVector = function (t) { var e = this.get("isVertical"), n = this.get("factor"); if (!p.isNumber(t)) return [0, 0]; var i = this.get("start"), r = this.get("end"), o = this.getAxisVector(), a = L.vec2.normalize([], o), s = !1; (e && i.y < r.y || !e && i.x > r.x) && (s = !0); var u = L.vec2.vertical([], a, s); return L.vec2.scale([], u, t * n) }, e.prototype.getAxisVector = function () { var t = this.get("start"), e = this.get("end"); return [e.x - t.x, e.y - t.y] }, e.prototype.getLinePath = function () { var t = this.get("start"), e = this.get("end"); return [["M", t.x, t.y], ["L", e.x, e.y]] }, e.prototype.getTickEnd = function (t, e) { var n = this.getSideVector(e); return { x: t.x + n[0], y: t.y + n[1] } }, e.prototype.getTickPoint = function (t) { var e = this.get("start"), n = this.get("end"), i = n.x - e.x, r = n.y - e.y; return { x: e.x + i * t, y: e.y + r * t } }, e.prototype.renderTitle = function () { var t = this.get("title"), e = this.get("label"), n = p.get(e, "rotate"), i = this.get("autoRotateTitle"), r = this.getTickPoint(.5), o = t.offset ? t.offset : 20, a = this.get("labelRenderer"); if (a) { var s = "bottom" === (g = this.get("position")) || "top" === g ? "height" : "width", u = this.getMaxLabelWidthOrHeight(a, s); if (this.get("autoRotateLabel")) (f = this.getAutoRotateAngle()) && (u = this.getOffsetByRotateAngle(f)); n && (u = this.getOffsetByRotateAngle(n * Math.PI / 180)), o += u + p.get(this.get("label"), "offset", 5) } var l = t.textStyle, c = p.mix({}, l); if (t.text) { var h = this.getAxisVector(); if (i && p.isNil(t.rotate)) { var f = 0; if (!p.isNumberEqual(h[1], 0)) { var d = [h[0], h[1]]; f = L.vec2.angleTo(d, [1, 0], !0) } c.rotate = f * (180 / Math.PI) } else p.isNil(t.rotate) || (c.rotate = t.rotate / 180 * Math.PI); var g, v = this.getSideVector(o), y = void 0; y = "start" === (g = t.position) ? { x: this.get("start").x + v[0], y: this.get("start").y + v[1] } : "end" === g ? { x: this.get("end").x + v[0], y: this.get("end").y + v[1] } : { x: r.x + v[0], y: r.y + v[1] }, c.x = y.x, c.y = y.y, c.text = t.text; var m = this.get("group").addShape("Text", { zIndex: 2, attrs: c }); m.name = "axis-title", this.get("appendInfo") && m.setSilent("appendInfo", this.get("appendInfo")) } }, e.prototype.autoRotateLabels = function () { var t = this.get("labelRenderer"); if (t) { var e = t.getLabels(), n = (this.getAxisVector(), this.getAutoRotateAngle()); if (n) { this.set("autoRotateAngle", n); var i = -6 * Math.abs(Math.sin(n)), r = n % Math.PI == 0 ? "center" : n > 0 ? n % (2 * Math.PI) < Math.PI ? "left" : "right" : n % (2 * Math.PI) > -Math.PI ? "right" : "left"; p.each(e, (function (t) { t.attr("textAlign", r), t.rotateAtStart(n), t.attr("y", t.attr("y") + i) })) } } }, e.prototype.autoHideLabels = function () { var t, e, n = this.get("labelRenderer"); if (n) { var i = this.get("tickItems"), r = n.getLabels(), o = this.getAxisVector(); if (r.length < 2) return; if (p.isNumberEqual(o[0], 0)) { var a = this.getMaxLabelWidthOrHeight(n, "height") + 8, s = Math.abs(this._getAvgLabelHeightSpace(n)); a > s && (t = a, e = s) } else if (p.isNumberEqual(o[1], 0) && r.length > 1) { var u = this.getMaxLabelWidthOrHeight(n, "width") + 8, l = Math.abs(this._getAvgLabelLength(n)); u > l && (t = u, e = l) } if (t && e) { var c = Math.ceil(t / e); if (p.each(r, (function (t, e) { e % c != 0 && (t.set("visible", !1), t.attr("text", "")) })), i) { var h = p.filter(i, (function (t, e) { return r[e].get("visible") })); p.size(h) > 0 && (this.set("tickItems", h), p.remove(this.get("group").get("children"), (function (t) { return "axis-ticks" === t.name })), this._renderTicks()) } } } }, e.prototype.getAutoRotateAngleByAvgWidth = function (t) { var e, n = this.get("autoRotateLabel"), i = this.get("labelRenderer"), r = this.get("title"); if (i) { var o = i.getLabels(), a = this.get("label").offset, s = r && r.offset ? r.offset : 20; if (s < 0) return; var u = this.getAxisVector(), l = void 0, c = void 0; if (p.isNumberEqual(u[0], 0) && r && r.text) (l = this.getMaxLabelWidthOrHeight(i, "width")) > s - a - 12 && (e = -1 * Math.acos((s - a - 12) / l)); else if (p.isNumberEqual(u[1], 0) && o.length > 1 && (l = this.getMaxLabelWidthOrHeight(i, "width"), c = this.getMaxLabelWidthOrHeight(i, "height"), l > t)) for (var h = 0, f = p.isArray(n) ? n : F; h < f.length; h++) { if (e = f[h] * Math.PI / 180, t * Math.abs(Math.sin(e)) > c + 4) break } } return e }, e.prototype.getOffsetByRotateAngle = function (t) { var e = this.get("labelRenderer"), n = this.get("position"), i = "bottom" === n || "top" === n ? "height" : "width", r = this.getMaxLabelWidthOrHeight(e, i); return t ? Math.max(r, this.getMaxLabelWidthOrHeight(e, "width") * Math.abs(Math.sin(t))) : r }, e.prototype._getAvgLabelLength = function (t) { var e = t.getLabels(); return e[1].attr("x") - e[0].attr("x") }, e.prototype._getAvgLabelHeightSpace = function (t) { var e = t.getLabels(); return e[1].attr("y") - e[0].attr("y") }, e.prototype.getAutoRotateAngle = function () { var t = this.get("labelRenderer"), e = t.getLabels(); if (e && !(e.length < 2)) { var n = Math.abs(this._getAvgLabelLength(t)); return this.getAutoRotateAngleByAvgWidth(n) } }, e }(j), z = function (t) { function e(e) { var n = t.call(this, Object(u.__assign)({ type: "base", title: null, items: null, formatter: null, offsetX: 0, offsetY: 0 }, e)) || this; return n.init(), n.render(), n.bindEvents(), n } return Object(u.__extends)(e, t), e.prototype.render = function () { this.renderTitle(), this.renderItems() }, e.prototype.getWidth = function () { return this.get("container").getBBox().width }, e.prototype.getHeight = function () { return this.get("container").getBBox().height }, e.prototype.getBBox = function () { return this.get("container").getBBox() }, e.prototype.moveTo = function (t, e) { this.get("container").move(t, e), this.set("x", t), this.set("y", e) }, e.prototype.draw = function () { this.get("canvas").draw() }, e.prototype.formatterValue = function (t) { return (this.get("formatter") || p.identity).call(this, t) }, e }(c), N = { fill: "#fff", shadowBlur: 10, shadowColor: "rgba(0,0,0,0.65)", radius: 2 }, Y = { fill: "#333", textAlign: "center", textBaseline: "middle", stroke: "#fff", lineWidth: 5, fontFamily: w }, H = { fill: "#D9D9D9" }, G = { fill: "rgb(64, 141, 251)" }, W = { fill: "#333", textBaseline: "top", textAlign: "start", fontFamily: w }, V = function (t) { function e(e) { var n = t.call(this) || this; n.onMouseMove = function (t) { var e = t.clientX, i = t.clientY; n.updateSliderStatus(e, i) }, n.onMouseUp = function () { n.clearAllEvents && n.clearAllEvents(), n.currentTarget = void 0 }; var i = e.layout, r = e.sliderType, o = e.sliderSize, a = e.operational, s = e.width, u = e.height, l = e.textStyle, c = e.min, h = e.max, p = e.range, f = e.formatter; n.layout = i, n.sliderType = r; var d = o || [], g = d[0], v = void 0 === g ? 8 : g, y = d[1], m = void 0 === y ? 16 : y; return n.sliderSize = [v, m], n.operational = a, n.width = s, n.height = u, n.min = c, n.max = h, n.range = p, n.textStyle = l, n.formatter = f, n.initialSlider(), n } return Object(u.__extends)(e, t), e.prototype.setBackground = function (t) { this.backgroundGroup && this.backgroundGroup.destroy(); var e = t.group, n = (t.background, t.frontend); this.backgroundGroup = e, this.backgroundGroup.set("zIndex", 0), this.operational && this.rangeSliderShape && n && n.attr("clip", this.rangeSliderShape), this.add(this.backgroundGroup), this.sort() }, e.prototype.isHorizontal = function () { return "horizontal" === this.layout }, e.prototype.initialSlider = function () { if (this.operational) { this.rangeSliderShape = this.createRangeSliderShape(), this.rangeSliderShape.set("zIndex", 1), this.minSliderGroup = this.createMinSliderGroup(), this.minSliderGroup.set("zIndex", 2), this.maxSliderGroup = this.createMaxSliderGroup(), this.maxSliderGroup.set("zIndex", 2); var t = this.range, e = t[0], n = t[1]; this.renderUIWithRange(e, n) } this.bindEvent() }, e.prototype.getSliderCursor = function () { return this.isHorizontal() ? "ew-resize" : "ns-resize" }, e.prototype.createMinSliderGroup = function () { var t = this.addGroup(); return this.minSliderShape = this.createSliderButton(t, !0), this.minTextShape = this.createSliderText(t, !0), t }, e.prototype.createMaxSliderGroup = function () { var t = this.addGroup(); return this.maxSliderShape = this.createSliderButton(t, !1), this.maxTextShape = this.createSliderText(t, !1), t }, e.prototype.createRangeSliderShape = function () { return this.addShape("rect", { attrs: { fill: "#fff", fillOpacity: 0, cursor: "move" } }) }, e.prototype.getRectButtonAttribute = function (t) { var e = this.sliderSize, n = e[0], i = e[1]; return this.isHorizontal() ? { x: t ? -n : 0, y: this.height / 2 - i / 2, width: n, height: i } : { x: this.width / 2 - i / 2, y: t ? 0 : -n, width: i, height: n } }, e.prototype.getCircleButtonAttribute = function (t) { return this.isHorizontal() ? { x: 0, y: this.height / 2, r: 16 } : { x: this.width / 2, y: 0, r: 16 } }, e.prototype.createSliderButton = function (t, e) { var n = "rect" === this.sliderType ? this.getRectButtonAttribute(e) : "circle" === this.sliderType ? this.getCircleButtonAttribute(e) : {}, i = Object(u.__assign)(Object(u.__assign)(Object(u.__assign)({}, n), N), { cursor: this.getSliderCursor() }); return t.addShape(this.sliderType, { attrs: i }) }, e.prototype.getRectTextAttribute = function (t) { var e = this.sliderSize, n = e[0], i = e[1]; return this.isHorizontal() ? { x: t ? -n / 2 : n / 2, y: this.height / 2 + i / 2 + 4, textAlign: "center", textBaseline: "top" } : { x: this.width / 2 + i / 2 + 4, y: t ? n / 2 : -n / 2, textAlign: "left", textBaseline: "middle" } }, e.prototype.getCircleTextAttribute = function (t) { return this.isHorizontal() ? { x: 0, y: this.height / 2 + 16 + 4, textAlign: "center", textBaseline: "top" } : { x: this.width / 2 + 16 + 4, y: 0, textAlign: "left", textBaseline: "middle" } }, e.prototype.createSliderText = function (t, e) { var n = "rect" === this.sliderType ? this.getRectTextAttribute(e) : "circle" === this.sliderType ? this.getCircleTextAttribute(e) : {}, i = Object(u.__assign)(Object(u.__assign)(Object(u.__assign)({}, this.textStyle), n), { text: "" }); return t.addShape("text", { attrs: i }) }, e.prototype.bindEvent = function () { this.operational && this.on("mousedown", this.onMouseDown) }, e.prototype.onMouseDown = function (t) { this.currentTarget = t.target; var e = t.event; e.stopPropagation(), e.preventDefault(); var n = e.clientX, i = e.clientY; this.pos = this.isHorizontal() ? n : i, this.bindCanvasEvents() }, e.prototype.bindCanvasEvents = function () { var t = this.get("canvas").get("containerDOM"), e = h.addEventListener(t, "mousemove", this.onMouseMove), n = h.addEventListener(t, "mouseup", this.onMouseUp), i = h.addEventListener(t, "mouseleave", this.onMouseUp); this.clearAllEvents = function () { e.remove(), n.remove(), i.remove() } }, e.prototype.isDragMin = function () { return this.currentTarget === this.minSliderShape }, e.prototype.isDragMax = function () { return this.currentTarget === this.maxSliderShape }, e.prototype.isDragAll = function () { return this.currentTarget === this.rangeSliderShape }, e.prototype.updateSliderStatus = function (t, e) { var n = this, i = this.isHorizontal() ? this.width : this.height, r = this.isHorizontal() ? 1 : -1, o = this.range, a = o[0], s = o[1], u = this.pos, l = this.isHorizontal() ? t : e, c = (l - u) / i * r, h = [a, s]; this.isDragAll() ? h = c >= 0 && s + c > 1 ? [a + (1 - s), 1] : c < 0 && a + c < 0 ? [0, s - a] : [a + c, s + c] : (this.isDragMin() && (h[0] = this.getNewRange(a, c)), this.isDragMax() && (h[1] = this.getNewRange(s, c)), h[1] < h[0] && (h = Array(2).fill(this.isDragMin() ? h[0] : h[1]))), this.pos = l, this.range = h, this.emit("sliderchange", { range: h, value: h.map((function (t) { return n.getValue(t) })) }), this.renderUIWithRange(h[0], h[1]), this.get("canvas").draw() }, e.prototype.renderUIWithRange = function (t, e) { var n = this.width, i = this.height; this.minSliderGroup.resetMatrix(), this.maxSliderGroup.resetMatrix(), this.isHorizontal() ? (this.rangeSliderShape.attr({ x: n * t, y: 0, width: (e - t) * n, height: i }), this.minSliderGroup.translate(t * n, 0), this.maxSliderGroup.translate(e * n, 0)) : (this.rangeSliderShape.attr({ x: 0, y: i * (1 - e), width: n, height: (e - t) * i }), this.minSliderGroup.translate(0, (1 - t) * i), this.maxSliderGroup.translate(0, (1 - e) * i)), this.minTextShape.attr("text", this.formatter(this.getValue(t))), this.maxTextShape.attr("text", this.formatter(this.getValue(e))), "circle" === this.sliderType && (this.minSliderShape.attr({ r: (16 + 16 * t) / 2 }), this.maxSliderShape.attr({ r: (16 + 16 * e) / 2 })) }, e.prototype.getNewRange = function (t, e) { var n = e + t; return n > 1 ? 1 : n < 0 ? 0 : n }, e.prototype.getValue = function (t) { var e = this.min + (this.max - this.min) * t; return Number(e.toFixed(e > 1 ? 0 : 2)) }, e }(A.Group), X = function (t) { function e(e) { var n = e.backgroundStyle, i = e.fillStyle, r = e.textStyle, o = e.titleStyle, a = Object(u.__rest)(e, ["backgroundStyle", "fillStyle", "textStyle", "titleStyle"]), s = e.layout, l = void 0 === s ? "horizontal" : s, c = { width: "horizontal" === l ? 156 : 16, height: "horizontal" === l ? 16 : 156 }; return t.call(this, Object(u.__assign)(Object(u.__assign)({ titleDistance: 16, layout: "horizontal", operational: !0, handleIcon: "rect", backgroundStyle: Object(u.__assign)(Object(u.__assign)({}, H), n), fillStyle: Object(u.__assign)(Object(u.__assign)({}, G), i), textStyle: Object(u.__assign)(Object(u.__assign)({}, Y), r), titleStyle: Object(u.__assign)(Object(u.__assign)({}, W), o), width: 156, height: 16 }, c), a)) || this } return Object(u.__extends)(e, t), e.prototype.init = function () { var t = this.get("container"); this.set("canvas", t.get("canvas")); var e = t.addGroup(); this.set("legendGroup", e); var n = e.addGroup(); this.set("itemsGroup", n), e.translate(this.get("offsetX"), this.get("offsetY")) }, e.prototype.renderTitle = function () { if (this.isShowTitle()) { var t = this.get("title"), e = this.get("legendGroup"), n = this.get("titleStyle"), i = e.addShape("text", { attrs: Object(u.__assign)({ x: 0, y: 0, text: t }, n) }); i.name = "legend-title", this.set("titleShape", i) } }, e.prototype.renderItems = function () { this.renderSlider() }, e.prototype.bindEvents = function () { this.isOperational() }, e.prototype.clear = function () { var t = this.get("container"); t && !t.destroyed && t.clear() }, e.prototype.destroy = function () { t.prototype.destroy.call(this); var e = this.get("container"); e && !e.destroyed && (e.get("parent") && e.remove(!0), e.destroy()) }, e.prototype.isHorizontal = function () { return "horizontal" === this.get("layout") }, e.prototype.isOperational = function () { return this.get("operational") }, e.prototype.isShowTitle = function () { return !!this.get("title") }, e.prototype.getSliderConfig = function () { return { layout: this.get("layout"), sliderType: this.get("handleIcon"), sliderSize: this.get("handleSize"), sliderStyle: this.get("handleStyle"), operational: this.isOperational(), width: this.get("width"), height: this.get("height"), min: p.head(this.get("items")).value, max: p.last(this.get("items")).value, range: this.get("range") || [0, 1], textStyle: Object(u.__assign)({}, this.get("textStyle")), formatter: this.formatterValue } }, e.prototype.renderSlider = function () { var t = this, e = this.get("itemsGroup"), n = new V(this.getSliderConfig()); if (n.setBackground(this.createBackgroundGroup()), this.isShowTitle()) { var i = this.get("titleDistance"), r = this.get("titleShape").getBBox().height; n.translate(0, i + r) } n.on("sliderchange", (function (e) { var n = e.value, i = (e.range, new A.Event("itemfilter", e, !0, !0)); i.range = n, t.emit("itemfilter", i) })), e.add(n), this.set("slider", n) }, e }(z), q = function (t) { function e(e) { return t.call(this, Object(u.__assign)({ type: "size-legend" }, e)) || this } return Object(u.__extends)(e, t), e.prototype.getBackgroundShapeAttr = function () { var t = this.get("width"), e = this.get("height"), n = t / 2, i = e / 2; return { points: "rect" === this.get("handleIcon") ? this.isHorizontal() ? [[0, e], [0, e - 4], [t, 0], [t, e]] : [[0, 0], [t, 0], [t, e], [t - 4, e]] : this.isHorizontal() ? [[0, i + 2], [0, i - 2], [t, i - 2], [t, i + 2]] : [[n + 2, 0], [n - 2, 0], [n - 2, e], [n + 2, e]] } }, e.prototype.createBackgroundGroup = function () { var t = this.getBackgroundShapeAttr(), e = this.get("backgroundStyle"), n = this.get("fillStyle"), i = new A.Polygon({ attrs: Object(u.__assign)(Object(u.__assign)({}, t), e) }), r = new A.Polygon({ attrs: Object(u.__assign)(Object(u.__assign)(Object(u.__assign)({}, t), e), n) }), o = new A.Group; return this.isOperational() ? (o.add(i), o.add(r)) : o.add(r), { group: o, background: i, frontend: r } }, e }(X), U = n(16), Z = function (t) { function e(e) { return t.call(this, Object(u.__assign)({ type: "color-legend" }, e)) || this } return Object(u.__extends)(e, t), e.prototype.calculatePercent = function (t) { var e = p.head(t).value, n = p.last(t).value - e; return p.map(t, (function (t) { return Object(u.__assign)(Object(u.__assign)({}, t), { percentage: (Number(t.value) - e) / n }) })) }, e.prototype.isSegment = function () { return !!this.get("isSegment") }, e.prototype.getOperationalGroup = function () { var t, e = this.get("width"), n = this.get("height"), i = this.calculatePercent(this.get("items")), r = this.get("backgroundStyle"), o = ""; this.isHorizontal() ? (o += "l (0) ", p.each(i, (function (e) { t = U.default.toRGB(e.color), o += e.percentage + ":" + t + " " }))) : (o += "l (90) ", p.each(i, (function (e) { t = U.default.toRGB(e.color), o += 1 - e.percentage + ":" + t + " " }))); var a = new A.Rect({ attrs: Object(u.__assign)({ x: 0, y: 0, width: e, height: n, strokeOpacity: 0 }, r) }), s = new A.Rect({ attrs: { x: 0, y: 0, width: e, height: n, fill: o, strokeOpacity: 0 } }), l = new A.Group; return this.isOperational() ? (l.add(a), l.add(s)) : l.add(s), { group: l, background: a, frontend: s } }, e.prototype.getUnOperationalGroup = function () { var t, e = this, n = this.get("width"), i = this.get("height"), r = this.calculatePercent(this.get("items")), o = this.get("textStyle"), a = new A.Group, s = "", l = [], c = r.length; this.isHorizontal() ? (s += "l (0) ", p.each(r, (function (h, p) { if (0 !== p && p !== c - 1 && (l.push(["M", h.percentage * n, 0]), l.push(["L", h.percentage * n, i])), t = U.default.toRGB(r[p].color), e.isSegment() && p > 0) { var f = U.default.toRGB(r[p - 1].color); s += h.percentage + ":" + f + " " } s += h.percentage + ":" + t + " ", a.addShape("text", { attrs: Object(u.__assign)(Object(u.__assign)({ x: h.percentage * n, y: i + 4, text: "" + e.formatterValue(h.value) }, o), { textBaseline: "top", textAlign: "center" }) }) }))) : (s += "l (90) ", p.each(r, (function (h, p) { if (0 !== p && p !== c - 1 && (l.push(["M", 0, i - h.percentage * i]), l.push(["L", n, i - h.percentage * i])), t = U.default.toRGB(r[p].color), s += 1 - h.percentage + ":" + t + " ", e.isSegment() && p > 0) { var f = U.default.toRGB(r[p - 1].color); s += 1 - h.percentage + ":" + f + " " } a.addShape("text", { attrs: Object(u.__assign)(Object(u.__assign)({ x: n + 4, y: (1 - h.percentage) * i, text: "" + e.formatterValue(h.value) }, o), { textAlign: "start", textBaseline: "middle" }) }) }))); var h = a.addShape("rect", { attrs: { x: 0, y: 0, width: n, height: i, fill: s, strokeOpacity: 0 } }); return a.addShape("path", { attrs: { path: l, lineWidth: 1, stroke: "#fff" } }), { group: a, background: h, frontend: void 0 } }, e.prototype.createBackgroundGroup = function () { return this.isOperational() ? this.getOperationalGroup() : this.getUnOperationalGroup() }, e }(X), Q = { right: 90 * Math.PI / 180, left: 270 * Math.PI / 180, up: 0, down: 180 * Math.PI / 180 }, $ = function () { function t(t) { this.width = 10, this.height = 10, this.direction = "right", p.assign(this, t), this._init() } return t.prototype._init = function () { var t = this.width / 2, e = this.height / 2, n = [{ x: 0, y: -e }, { x: -t, y: e }, { x: t, y: e }]; this.shape = new A.Path({ attrs: p.deepMix({ path: [["M", n[0].x, n[0].y], ["L", n[1].x, n[1].y], ["L", n[2].x, n[2].y], ["Z"]] }, this.attrs) }); var i = []; i.push(["r", Q[this.direction]]), i.push(["t", this.x, this.y]), this.shape.transform(i) }, t }(), K = { layout: "horizontal", titleDistance: 15, itemDistance: 5, itemMarginBottom: 8, wordSpacing: 8, backgroundPadding: 0, unSelectedColor: "#ccc", offsetX: 0, offsetY: 0 }, J = function (t) { function e(e) { return t.call(this, Object(u.__assign)(Object(u.__assign)({ hoverable: !0, clickable: !0, selectedMode: "multiple", allowAllCanceled: !1, reversed: !1, autoWrap: !0 }, K), e)) || this } return Object(u.__extends)(e, t), e }(z), tt = function (t) { function e(e) { return t.call(this, Object(u.__assign)({ type: "category-legend" }, e)) || this } return Object(u.__extends)(e, t), e.prototype.init = function () { this.isFlipped = !1; var t = this.get("container"); this.set("canvas", t.get("canvas")); var e = t.addGroup(); this.set("itemsGroup", e), this.get("flipPage") && this.set("autoWrap", !0) }, e.prototype.renderTitle = function () { var t = this.get("title"); if (t) { var e = this.get("container"), n = this.get("titleStyle"), i = e.addShape("text", { attrs: Object(u.__assign)({ x: 0, y: 0, text: t }, n) }); i.name = "legend-title", this.set("titleShape", i) } }, e.prototype.renderItems = function () { var t = this, e = this.get("items"); this.get("reversed") && e.reverse(), Object(p.each)(e, (function (e) { t._addItem(e) })), this.get("autoWrap") && this._adjustItems(); var n = this._getMaxItemSize(), i = n.maxItemWidth, r = n.maxItemHeight; this.set("maxItemWidth", i), this.set("maxItemHeight", r), this.isNeedFlip() && this.flipPage(), this._adjustPositionOffset(), this._renderBack() }, e.prototype.isNeedFlip = function () { var t = this.get("maxWidth"), e = this.get("maxItemHeight"), n = this.get("itemsGroup").getBBox(), i = this.get("layout"); if (this.get("flipPage")) { if ("vertical" === i && t < n.width) return !0; if ("horizontal" === i && e < n.height) return !0 } return !1 }, e.prototype.flipPage = function () { var t = this; this.isFlipped = !0; var e = this.get("maxItemWidth"), n = this.get("maxItemHeight"), i = this.get("maxWidth"), r = this.get("maxHeight"), o = this.get("itemsGroup"), a = o.getBBox(), s = this.get("layout"), u = this._getPaginationCfg(), l = 0, c = "up-down", h = a.tl.x, f = a.tl.y, d = 0, g = new A.Rect({ attrs: { x: h, y: f, width: i - u.size, height: r } }); if ("horizontal" === s) { var v = Math.max(i, a.width); if (g.attr("width", v), g.attr("height", n), this.set("maxWidth", v), this.set("maxHeight", n), l = Math.ceil(a.height / (n + this.get("itemMarginBottom"))), h = h + v - u.size, f = Math.ceil(f + n / 2), d = n, f - this._getHorizontalPaginationHeight() / 2 < 0) { var y = (this.get("offsetY") || 0) + this._getHorizontalPaginationHeight() / 2 - f; this.set("offsetY", y) } } if ("vertical" === s) { g.attr("width", e); var m = Math.max(r, a.height); g.attr("height", m), this.set("maxWidth", e), this.set("maxHeight", m), l = Math.ceil(a.width / (e + this.get("itemDistance"))), f = f + m + 10, c = "left-right", d = e } o.attr("clip", g), this.set("clip", g); var x = this.flipPageUI(h, f, d, l, c); this.flipUI = x; var _ = 1, b = x.arrows[0], w = x.arrows[1]; b.on("click", (function () { if (_ > 1) { _ -= 1, x.text.attr("text", _ + " / " + l); var i = Object(p.clone)(o.attr("matrix")); if ("vertical" === s) { var r = t.get("itemDistance") + e; i[6] += r } else { r = n + t.get("itemMarginBottom"); i[7] += r } o.stopAnimate(), o.animate({ matrix: i }, 100), t.get("canvas").draw() } })), w.on("click", (function () { if (_ < l) { _ += 1, x.text.attr("text", _ + " / " + l); var i = Object(p.clone)(o.attr("matrix")); if ("vertical" === s) { var r = t.get("itemDistance") + e; i[6] -= r } else { r = n + t.get("itemMarginBottom"); i[7] -= r } o.stopAnimate(), o.animate({ matrix: i }, 100) } })) }, e.prototype.flipPageUI = function (t, e, n, i, r) { var o, a = this._getPaginationCfg(), s = this.get("container").addGroup(), u = []; if ("left-right" === r) { var l = new $(Object(p.mix)({}, a.arrow, { x: t + a.arrow.width / 2, y: e, direction: "left" })); s.add(l.shape), u.push(l.shape); var c = new $(Object(p.mix)({}, a.arrow, { x: t + n - a.arrow.width / 2, y: e, direction: "right" })); s.add(c.shape), u.push(c.shape), o = s.addShape("text", { attrs: Object(p.mix)({}, a.text, { x: t + n / 2, y: e, text: "1 / " + i }) }) } else { var h = this._getHorizontalPaginationHeight(), f = new $(Object(p.mix)({}, a.arrow, { x: t, y: e - h / 2 + a.arrow.height / 2, direction: "up" })); s.add(f.shape), u.push(f.shape); var d = new $(Object(p.mix)({}, a.arrow, { x: t, y: e + h / 2 - a.arrow.height / 2, direction: "down" })); s.add(d.shape), u.push(d.shape), o = s.addShape("text", { attrs: Object(p.mix)({}, a.text, { x: t, y: e, text: "1 / " + i }) }) } return { arrows: u, text: o, container: s } }, e.prototype._getPaginationCfg = function () { return { arrow: { x: 0, y: 0, width: 10, height: 8, attrs: { fill: "#ccc", cursor: "pointer" }, direction: "right" }, text: { fontSize: 12, fill: "#ccc", textAlign: "center", textBaseline: "middle" }, size: 40 } }, e.prototype._getHorizontalPaginationHeight = function () { var t = this._getPaginationCfg(); return t.text.fontSize + 2 * t.arrow.height + 4 }, e.prototype.bindEvents = function () { var t = this.get("itemsGroup"); this.get("hoverable") && (t.on("mousemove", Object(p.wrapBehavior)(this, "_onMousemove")), t.on("mouseleave", Object(p.wrapBehavior)(this, "_onMouseleave"))), this.get("clickable") && t.on("click", Object(p.wrapBehavior)(this, "_onClick")) }, e.prototype.clear = function () { var t = this.get("container"); t && !t.destroyed && t.clear() }, e.prototype.destroy = function () { t.prototype.destroy.call(this); var e = this.get("container"); e && !e.destroyed && (e.get("parent") && e.remove(), e.destroy()) }, e.prototype.getCheckedCount = function () { var t = this.get("itemsGroup").get("children"); return Object(p.filter)(t, (function (t) { return t.get("checked") })).length }, e.prototype.getWidth = function () { return this.getBBox().width }, e.prototype.getHeight = function () { return this.getBBox().height }, e.prototype.getBBox = function () { if (this.isFlipped) { var t = this.get("clip"), e = this.flipUI.container; return this._mergeBBox([t.getBBox(), e.getBBox()]) } return this.get("container").getBBox() }, e.prototype._adjustPositionOffset = function () { var t = this.get("offsetX"), e = this.get("offsetY"); this.get("container").move(t, e) }, e.prototype._addItem = function (t) { var e = this.get("itemsGroup"), n = this._getNextX(), i = this._getNextY(), r = this.get("unSelectedColor"), o = e.addGroup({ x: n, y: i, value: t.value, checked: t.checked }), a = this.get("textStyle"), s = this.get("wordSpacing"), u = 0; if (t.marker) { var l = Object.assign({}, t.marker, { x: t.marker.radius + n, y: i }); t.checked || (l.fill && (l.fill = r), l.stroke && (l.stroke = r)); var c = o.addShape("marker", { type: "marker", attrs: l }); c.attr("cursor", "pointer"), c.name = "legend-marker", u += c.getBBox().width + s } var h = Object.assign({}, a, { x: u + n, y: i - (t.marker ? t.marker.radius / 2 : 0) + a.fontSize / 4, text: this.formatterValue(t.value) }); t.checked || Object.assign(h, { fill: r }); var p = o.addShape("text", { attrs: h }); p.attr("cursor", "pointer"), p.name = "legend-text"; var f = o.getBBox(), d = this.get("itemWidth"), g = o.addShape("rect", { attrs: { x: n, y: i - f.height / 2, fill: "#fff", fillOpacity: 0, width: d || f.width, height: f.height } }); return g.attr("cursor", "pointer"), g.set("origin", t), g.name = "legend-item", o.name = "legendGroup", o }, e.prototype._getNextX = function () { var t = this.get("layout"), e = this.get("itemDistance"), n = this.get("itemsGroup"), i = this.get("itemWidth"), r = n.get("children"), o = 0; return "horizontal" === t && Object(p.each)(r, (function (t) { o += (i || t.getBBox().width) + e })), o }, e.prototype._getNextY = function () { var t = this.get("itemMarginBottom"), e = this.get("titleDistance"), n = this.get("layout"), i = this.get("itemsGroup"), r = this.get("titleShape"), o = i.get("children"), a = e; return r && (a += r.getBBox().height), "vertical" === n && Object(p.each)(o, (function (e) { a += e.getBBox().height + t })), a }, e.prototype._adjustHorizontal = function () { var t, e, n, i = this.flipPage ? this._getPaginationCfg().size : 0, r = this.get("itemsGroup"), o = r.get("children"), a = this.get("maxWidth") - i, s = this.get("itemDistance"), u = this.get("itemMarginBottom"), l = this.get("titleDistance"), c = 0, h = 0, f = this.get("itemWidth"); r.getBBox().width > a && Object(p.each)(o, (function (i) { n = i.getBBox(), t = f || n.width, e = n.height + u, a - h < t && (c++ , h = 0), i.move(h, c * e + l), h += t + s })) }, e.prototype._adjustVertical = function () { var t, e, n = this._getMaxItemSize().maxItemWidth, i = this.get("itemsGroup"), r = this.get("titleShape"), o = i.get("children"), a = this.get("maxLength"), s = this.get("itemDistance"), u = this.get("itemMarginBottom"), l = this.get("titleDistance"), c = r ? r.getBBox().height + l : 0, h = this.get("itemWidth") ? this.get("itemWidth") : 0, f = c + i.getBBox().height; n = Math.max(n, h) + s; var d = 0; f > a && Object(p.each)(o, (function (i, r) { e = i.getBBox(), e.width, t = e.height, a - f < t ? (f = c, r > 0 && (d += n), i.move(d, c)) : i.move(d, f), f += t + u })) }, e.prototype._adjustItems = function () { "horizontal" === this.get("layout") ? this._adjustHorizontal() : this._adjustVertical() }, e.prototype._renderBack = function () { var t = this.get("container"), e = this.get("backgroundPadding"), n = this.get("backgroundStyle"); Object(p.isNumber)(e) && (e = [e, e, e, e]), n && t.renderBack(e, n) }, e.prototype._onMousemove = function (t) { var e = this._getLegendItem(t.target); if (e && e.get("checked")) { var n = new A.Event("itemmouseover", t, !0, !0); n.item = this._findItem(e), n.checked = e.get("checked"), this.emit("itemmouseover", n), this.get("canvas").draw() } }, e.prototype._onMouseleave = function (t) { var e = this._getLegendItem(t.target); if (e && e.get("checked")) { var n = new A.Event("itemmouseleave", t, !0, !0); n.item = this._findItem(e), n.checked = e.get("checked"), this.emit("itemmouseleave", n), this.get("canvas").draw() } }, e.prototype._onClick = function (t) { var e = this, n = this._getLegendItem(t.target); if (n && !n.get("destroyed")) { var i = n.get("checked"); if (!this.get("allowAllCanceled") && i && 1 === this.getCheckedCount()) return; var r = this.get("selectedMode"), o = this._findItem(n), a = new A.Event("itemclick", t, !0, !0); a.item = o, a.currentTarget = n, a.checked = "single" === r || !i; var s, l, c, h = this.get("unSelectedColor"), f = this.get("textStyle").fill; if ("single" === r) { var d = this.get("itemsGroup").get("children"); Object(p.each)(d, (function (t) { s = e._findShapeByName(t, "legend-marker"), l = e._findShapeByName(t, "legend-text"), c = e._findShapeByName(t, "legend-item"), t !== n ? (s.attr("fill") && s.attr("fill", h), s.attr("stroke") && s.attr("stroke", h), l.attr("fill", h), s.set("checked", !1), s.set("rawAttrs", Object(u.__assign)({}, s.get("attrs"))), l.set("checked", !1), c.set("checked", !1), t.set("checked", !1)) : (s.attr("fill") && s.attr("fill", o.marker.fill), s.attr("stroke") && s.attr("stroke", o.marker.stroke), l.attr("fill", f), s.set("rawAttrs", Object(u.__assign)({}, s.get("attrs"))), s.set("checked", !0), l.set("checked", !0), c.set("checked", !0), t.set("checked", !0)) })) } else s = this._findShapeByName(n, "legend-marker"), l = this._findShapeByName(n, "legend-text"), c = this._findShapeByName(n, "legend-item"), s.attr("fill") && s.attr("fill", i ? h : o.marker.fill), s.attr("stroke") && s.attr("stroke", i ? h : o.marker.stroke), l.attr("fill", i ? h : f), n.set("checked", !i), s.set("checked", !i), l.set("checked", !i), c.set("checked", !i); this.emit("itemclick", a), this.get("canvas").draw() } }, e.prototype._getLegendItem = function (t) { var e = t.get("parent"); return e && "legendGroup" === e.name ? e : null }, e.prototype._findItem = function (t) { var e = this.get("items"), n = null, i = t instanceof A.Group ? t.get("value") : t; return Object(p.each)(e, (function (t) { if (t.value === i) return n = t, !1 })), n }, e.prototype._findShapeByName = function (t, e) { return t.findBy((function (t) { return t.name === e })) }, e.prototype._getMaxItemSize = function () { var t = -1 / 0, e = -1 / 0, n = this.get("itemsGroup").get("children"); return Object(p.each)(n, (function (n) { var i = n.getBBox(); t < i.width && (t = i.width), e < i.height && (e = i.height) })), { maxItemWidth: t, maxItemHeight: e } }, e.prototype._mergeBBox = function (t) { var e = 1 / 0, n = -1 / 0, i = 1 / 0, r = -1 / 0; return Object(p.each)(t, (function (t) { var o = t; e = Math.min(o.minX, e), n = Math.max(o.maxX, n), i = Math.min(o.minY, i), r = Math.max(o.maxY, r) })), new A.BBox(e, i, n - e, r - i) }, e }(J), et = { position: "absolute", overflow: "auto", top: 0, left: 0 }, nt = { marginBottom: "4px" }, it = { listStyleType: "none", margin: 0, padding: 0 }, rt = { cursor: "pointer", marginBottom: "5px", marginRight: "16px", userSelect: "none" }, ot = { width: "9px", height: "9px", borderRadius: "50%", display: "inline-block", marginRight: "8px", verticalAlign: "middle" }, at = { activeColor: "#000", inactiveColor: "#ccc", arrowSize: 8, animation: !0 }; function st(t, e) { var n = t.className; return p.isNil(n) ? t : (n = n.split(" ")).indexOf(e) > -1 ? t : t.parentNode ? t.parentNode.className === e ? t.parentNode : st(t.parentNode, e) : null } function ut(t, e) { return t.getElementsByClassName(e)[0] } var lt = function (t) { function e(e) { return t.call(this, Object(u.__assign)({ type: "html-legend", prefixClassName: "g2-legend", pagination: !0, highlight: !1 }, e)) || this } return Object(u.__extends)(e, t), e.prototype.init = function () { var t = this.get("fontFamily"), e = this.get("layout"), n = this.get("maxWidth"), i = this.get("maxHeight"), r = this.get("prefixClassName"), o = this.get("containerTpl"); o || (o = '<div class="' + r + '">\n        <div class="' + r + '-title"></div>\n        <ul class="' + r + '-list"></ul>\n      </div>'); var a = h.createDom(o), s = p.deepMix({}, et, this.get("backgroundStyle")); h.modifyCSS(a, Object(u.__assign)({ fontFamily: t, maxHeight: i + "px", width: "100%", height: "auto" }, s)), "horizontal" === e && h.modifyCSS(a, { maxWidth: n + "px" }); var l = this.get("container"); if (l) if (/^\#/.test(l)) { var c = l.replace("#", ""); (l = document.getElementById(c)).appendChild(a) } else l.appendChild(a); else this.get("canvas").get("el").parentNode.appendChild(a); this.set("_legendContainer", a) }, e.prototype.renderTitle = function () { var t = this.get("title"); if (t) { var e = this.get("prefixClassName"), n = this.get("_legendContainer"), i = ut(n, e + "-title"); i || (i = h.createDom('<div class="' + e + '-title"></div>'), n.appendChild(i)), i.innerHTML = t; var r = p.deepMix({}, nt, this.get("titleStyle")); h.modifyCSS(i, r), this.set("_titleContainer", i) } }, e.prototype.renderItems = function () { var t = this, e = this.get("items"); if (e && e.length) { var n = this.get("_legendContainer"), i = this.get("layout"), r = this.get("prefixClassName"); this.get("reversed") && e.reverse(); var o = ut(n, r + "-list"); o || (o = h.createDom('<ul class="' + r + '-list"></ul>')); var a = p.deepMix({}, it, this.get("listStyle")); "horizontal" === i && (a.width = "max-content"), h.modifyCSS(o, a); var s = h.createDom("<div></div>"); n.appendChild(s), s.appendChild(o), this.set("_clipContainer", s), this.set("_itemGroupContainer", o); var u = this.get("itemTpl"); u || (u = '<li class="' + r + '-item">\n      <span class="' + r + '-item-marker"></span>\n      <span class="' + r + '-item-text"></span>\n      </li>'); var l = this.get("unSelectedColor"), c = p.deepMix({}, rt, this.get("itemStyle")), f = p.deepMix({}, ot, this.get("markerStyle")); "horizontal" === i ? c.display = "inline-block" : "vertical" === i && (c.display = "block"); var d = {}; p.each(e, (function (e, n) { var i, a = e.checked, s = t.formatterValue(e.value), g = e.marker.fill || e.marker.stroke, v = a ? g : l; if (p.isFunction(u)) { var y = u(s, v, a, n); i = h.createDom(y) } else { ut(i = h.createDom(u), r + "-item-text").innerHTML = s } c.color = v, f.backgroundColor = v, h.modifyCSS(i, c), i.setAttribute("data-checked", a), i.setAttribute("data-value", e.value), i.setAttribute("data-color", g); var m = ut(i, r + "-item-marker"); m && h.modifyCSS(m, f), o.appendChild(i), d[e.value] = e })), this.set("_itemMap", d), "horizontal" === i ? this._renderHorizontalPagination() : this._renderPagination() } }, e.prototype.bindEvents = function () { var t = this, e = this.get("_itemGroupContainer"); e && (this.get("clickable") && (e.onclick = function (e) { return t._onClick(e) }), this.get("hoverable") && (e.onmousemove = function (e) { return t._onMousemove(e) }, e.onmouseout = function (e) { return t._onMouseout(e) })) }, e.prototype.getWidth = function () { var t = this.get("_legendContainer"); return h.getOuterWidth(t) }, e.prototype.getHeight = function () { var t = this.get("_legendContainer"); return h.getOuterHeight(t) }, e.prototype.getBBox = function () { return new A.BBox(this.get("x") || 0, this.get("y") || 0, this.getWidth(), this.getHeight()) }, e.prototype.moveTo = function (t, e) { var n = this.get("_legendContainer"); h.modifyCSS(n, { left: t + "px", top: e + "px" }), this.set("x", t), this.set("y", e) }, e.prototype.destroy = function () { t.prototype.destroy.call(this); var e = this.get("_legendContainer"); e && e.parentNode && e.parentNode.removeChild(e) }, e.prototype.draw = function () { return null }, e.prototype._updateStatus = function (t, e, n, i) { e && (e.style.background = n), t.style.color = n, t.setAttribute("data-checked", i) }, e.prototype._onClick = function (t) { var e = this, n = (this.get("items"), this.get("_itemGroupContainer")), i = this.get("prefixClassName"), r = i + "-item", o = i + "-item-marker", a = t.target, s = a.className.split(" "); if (!(p.indexOf(s, i + "-list") > -1)) { var u = st(a, r), l = ut(u, o), c = this.get("_itemMap"), h = c[u.getAttribute("data-value")], f = u.getAttribute("data-color"), d = this.get("selectedMode"), g = this.get("unSelectedColor"), v = n.childNodes; if ("single" === d) h.checked = !0, p.each(v, (function (t) { if (t !== u) { var n = ut(t, o); e._updateStatus(t, n, g, "false"), c[t.getAttribute("data-value")].checked = !1 } else e._updateStatus(u, l, f, "true") })); else { var y = "true" === u.getAttribute("data-checked"), m = 0; if (p.each(v, (function (t) { "true" === t.getAttribute("data-checked") && m++ })), !this.get("allowAllCanceled") && y && 1 === m) return; h.checked = !h.checked, y ? this._updateStatus(u, l, g, "false") : this._updateStatus(u, l, f, "true") } this.emit("itemclick", { item: h, currentTarget: u, checked: "single" === d || h.checked }) } }, e.prototype._onMousemove = function (t) { var e = this.get("_lastActiveItem"), n = (this.get("items"), this.get("_itemMap")), i = this.get("prefixClassName"), r = i + "-list", o = i + "-item", a = t.target, s = a.className.split(" "); if (!(p.indexOf(s, r) > -1)) { var u = st(a, o), l = n[u.getAttribute("data-value")]; if (l) { var c = this.get("highlight"); if (l.checked && e !== l) { if (u.className += " active", c) this.get("_itemGroupContainer").childNodes.forEach((function (t) { t !== u && "true" === t.getAttribute("data-checked") && (t.className += " inactive") })); this.set("_lastActiveItem", l) } this.emit("itemmouseover", { item: l, currentTarget: u, checked: l.checked }) } } }, e.prototype._onMouseout = function (t) { this.get("_itemGroupContainer").childNodes.forEach((function (t) { var e = t.className.split(" "); p.remove(e, (function (t) { return "active" === t || "inactive" === t })), t.className = e.join(" ") })), this.set("_lastActiveItem", null), this.emit("itemmouseleave", t) }, e.prototype._renderPagination = function () { var t = this.get("pagination"), e = this.get("_legendContainer"), n = this.get("_itemGroupContainer"); if (t && e.scrollHeight > e.offsetHeight) { h.modifyCSS(e, { overflow: "hidden", height: this.get("maxHeight") + "px" }); var i = h.createDom('\n      <div style="position: absolute;bottom: 0;left: 0;user-select: none;margin-top: 5px;">\n        <div class="pre-page"\n          style="display:inline-block;-webkit-transform: rotate(-135deg);transform: rotate(-135deg);margin-left: 2px;">\n        </div>\n        <span class="current-page-number">1</span> /  <span class="total-page-number">0</span>\n        <div class="next-page"\n          style="display:inline-block;-webkit-transform: rotate(45deg);transform: rotate(45deg);margin-right: 2px;">\n        </div>\n      </div>\n    '); e.appendChild(i); var r = this.getHeight() - (this.get("_titleContainer") ? h.getOuterHeight(this.get("_titleContainer")) : 0) - h.getOuterHeight(i), o = n.offsetHeight, a = this.get("_clipContainer"); h.modifyCSS(a, { maxHeight: r + "px", overflow: "hidden" }); var s = Math.ceil(o / r), u = h.getOuterHeight(n.childNodes[0]), l = Math.floor(r / u) * u, c = ut(i, "current-page-number"), f = ut(i, "total-page-number"), d = ut(i, "pre-page"), g = ut(i, "next-page"); f.innerHTML = s; var v = p.deepMix({}, at, t), y = { cursor: "pointer", border: v.activeColor + " solid", borderWidth: "2px 2px 0 0", width: v.arrowSize + "px", height: v.arrowSize + "px" }, m = { cursor: "default", border: v.inactiveColor + " solid", borderWidth: "2px 2px 0 0", width: v.arrowSize + "px", height: v.arrowSize + "px" }; h.modifyCSS(d, m), h.modifyCSS(g, y), v.animation && h.modifyCSS(n, { transition: "transform .3s ease-in" }); var x = 1, _ = 0; d.onclick = function () { 1 !== x && (x -= 1, _ += l, c.innerHTML = x, h.modifyCSS(d, y), h.modifyCSS(g, y), h.modifyCSS(n, { transform: "translateY(" + _ + "px)" }), 1 === x && h.modifyCSS(d, m)) }, g.onclick = function () { x !== s && (x += 1, _ -= l, c.innerHTML = x, h.modifyCSS(g, y), h.modifyCSS(d, y), h.modifyCSS(n, { transform: "translateY(" + _ + "px)" }), x === s && h.modifyCSS(g, m)) } } }, e.prototype._renderHorizontalPagination = function () { var t = this.get("pagination"), e = this.get("_legendContainer"), n = this.get("_itemGroupContainer"); if (t && e.scrollWidth > e.offsetWidth) { h.modifyCSS(e, { overflow: "hidden", width: this.get("maxWidth") + "px" }); var i = h.createDom('\n      <div style="position: absolute;bottom: 4px;right: 12px;user-select: none;margin-top: 5px;background: #fff;">\n        <div class="pre-page"\n          style="display:inline-block;-webkit-transform: rotate(-135deg);transform: rotate(-135deg);margin-left: 2px;">\n        </div>\n        <span class="current-page-number">1</span> /  <span class="total-page-number">0</span>\n        <div class="next-page"\n          style="display:inline-block;-webkit-transform: rotate(45deg);transform: rotate(45deg);margin-right: 2px;">\n        </div>\n      </div>\n    '); e.appendChild(i); var r = this.getWidth() - h.getOuterWidth(i) - 40, o = n.offsetWidth, a = this.get("_clipContainer"); h.modifyCSS(a, { maxWidth: r + "px", overflow: "hidden" }); var s = Math.ceil(o / r), u = (h.getOuterWidth(n.childNodes[0]), r), l = ut(i, "current-page-number"), c = ut(i, "total-page-number"), f = ut(i, "pre-page"), d = ut(i, "next-page"); c.innerHTML = s; var g = p.deepMix({}, at, t), v = { cursor: "pointer", border: g.activeColor + " solid", borderWidth: "2px 2px 0 0", width: g.arrowSize + "px", height: g.arrowSize + "px" }, y = { cursor: "default", border: g.inactiveColor + " solid", borderWidth: "2px 2px 0 0", width: g.arrowSize + "px", height: g.arrowSize + "px" }; h.modifyCSS(f, y), h.modifyCSS(d, v), g.animation && h.modifyCSS(n, { transition: "transform .3s ease-in" }); var m = 1, x = 0; f.onclick = function () { 1 !== m && (m -= 1, x += u, l.innerHTML = m, h.modifyCSS(f, v), h.modifyCSS(d, v), h.modifyCSS(n, { transform: "translateX(" + x + "px)" }), 1 === m && h.modifyCSS(f, y)) }, d.onclick = function () { m !== s && (m += 1, x -= u, l.innerHTML = m, h.modifyCSS(d, v), h.modifyCSS(f, v), h.modifyCSS(n, { transform: "translateX(" + x + "px)" }), m === s && h.modifyCSS(d, y)) } } }, e }(J), ct = function (t) { function e(e) { return t.call(this, Object(u.__assign)({ xScales: null, yScales: null, el: null }, e)) || this } return Object(u.__extends)(e, t), e.prototype.clear = function () { var t = this.get("el"); t && t.remove() }, e.prototype.changeVisible = function (t) { this.set("visible", t); var e = this.get("el"); e instanceof A.Element ? e.set("visible", t) : e instanceof HTMLElement && (e.style.display = t ? "" : "none") }, e.prototype.change = function (t) { this.cfg = p.deepMix({}, this.cfg, t) }, e.prototype.get = function (t) { return this.cfg[t] }, e.prototype.set = function (t, e) { return this.cfg[t] = e, this }, e.prototype.parsePoint = function (t, e) { var n = this.get("xScales"), i = this.get("yScales"), r = p.isFunction(e) ? e.call(null, n, i) : e, o = 0, a = 0; if (p.isArray(r) && p.includes(r[0], "%")) return this.parsePercentPoint(t, r); if (p.isArray(r)) o = this.getNormalizedValue(r[0], p.head(p.values(n))), a = this.getNormalizedValue(r[1], p.head(p.values(i))); else if (!p.isNil(r)) for (var s = 0, u = p.keys(r); s < u.length; s++) { var l = u[s], c = r[l]; n[l] && (o = this.getNormalizedValue(c, n[l])), i[l] && (a = this.getNormalizedValue(c, i[l])) } return t.convert({ x: o, y: a }) }, e.prototype.getNormalizedValue = function (t, e) { var n, i; switch (t) { case "start": n = 0; break; case "end": n = 1; break; case "median": i = e.isCategory ? (e.values.length - 1) / 2 : (e.min + e.max) / 2, n = e.scale(i); break; case "min": case "max": i = e.isCategory ? "min" === t ? 0 : e.values.length - 1 : e[t], n = e.scale(i); break; default: n = e.scale(t) }return n }, e.prototype.parsePercentPoint = function (t, e) { var n = parseFloat(e[0]) / 100, i = parseFloat(e[1]) / 100, r = t.start, o = t.end, a = Math.min(r.x, o.x), s = Math.min(r.y, o.y); return { x: t.getWidth() * n + a, y: t.getHeight() * i + s } }, e }(c), ht = function (t) { function e(e) { return t.call(this, p.deepMix({ type: "line", xScales: null, yScales: null, line: { style: { stroke: "#000" } }, text: { display: !0, position: "end", autoRotate: !0, style: { fill: "#999", fontSize: 12, fontWeight: 500, fontFamily: w } } }, e)) || this } return Object(u.__extends)(e, t), e.prototype.render = function (t, e) { var n = this, i = this.parsePoint(t, this.get("start")), r = this.parsePoint(t, this.get("end")), o = e.addGroup(); this.drawLines(i, r, o); var a = this.get("text"); a.display && a.content && this.drawText(i, r, o), o.get("children").forEach((function (t) { t.name = "annotation-line", n.get("appendInfo") && t.setSilent("appendInfo", n.get("appendInfo")) })), this.set("el", o) }, e.prototype.drawLines = function (t, e, n) { var i = [["M", t.x, t.y], ["L", e.x, e.y]]; n.addShape("Path", { attrs: p.assign({ path: i }, this.get("line").style) }) }, e.prototype.drawText = function (t, e, n) { var i = this.get("text"), r = i.position, o = i.style || {}, a = 1; "start" === r ? a = 0 : "center" === r ? a = .5 : !p.isNil(r) && p.includes(r, "%") ? a = parseInt(r, 10) / 100 : p.isNumber(r) && r >= 0 && r < 1 && (a = r); var s = { x: t.x + (e.x - t.x) * a, y: t.y + (e.y - t.y) * a, text: i.content }; if (i.offsetX && (s.x += i.offsetX), i.offsetY && (s.y += i.offsetY), p.assign(s, o), i.autoRotate && p.isNil(o.rotate)) { var u = L.vec2.angleTo([e.x - t.x, e.y - t.y], [1, 0], 1); s.rotate = u } else p.isNil(o.rotate) || (s.rotate = o.rotate * Math.PI / 180); n.addShape("Text", { attrs: s }) }, e }(ct), pt = function (t) { function e(e) { return t.call(this, Object(u.__assign)({ type: "text", position: null, content: null, style: { fill: "#999", fontSize: 12, fontWeight: 500, textAlign: "center" } }, e)) || this } return Object(u.__extends)(e, t), e.prototype.render = function (t, e) { var n = this.parsePoint(t, this.get("position")), i = p.clone(this.get("style")), r = this.get("offsetX"), o = this.get("offsetY"); r && (n.x += r), o && (n.y += o), i.rotate && (i.rotate = i.rotate * Math.PI / 180); var a = e.addShape("Text", { zIndex: this.get("zIndex"), attrs: p.assign({ text: this.get("content") }, i, n) }); a.name = "annotation-text", this.get("appendInfo") && a.setSilent("appendInfo", this.get("appendInfo")), this.set("el", a) }, e }(ct), ft = function (t) { function e(e) { return t.call(this, Object(u.__assign)({ type: "arc", start: null, end: null, style: { stroke: "#999", lineWidth: 1 } }, e)) || this } return Object(u.__extends)(e, t), e.prototype.render = function (t, e) { var n = this.get("start"), i = this.get("end"), r = this.parsePoint(t, this.get("start")), o = this.parsePoint(t, this.get("end")), a = t.getCenter(), s = Math.sqrt((r.x - a.x) * (r.x - a.x) + (r.y - a.y) * (r.y - a.y)), u = [["M", r.x, r.y]]; if (p.isNumberEqual(r.x, o.x) && p.isNumberEqual(r.y, o.y)) p.isEqual(n, i) ? console.warn("start point is the same as end point!") : u = [["M", r.x, r.y], ["A", s, s, 0, 1, 1, 2 * a.x - r.x, 2 * a.y - r.y], ["A", s, s, 0, 1, 1, r.x, r.y]]; else { var l = L.vec2.angleTo([a.x - r.x, a.y - r.y], [a.x - o.x, a.y - o.y], 0) > Math.PI ? 1 : 0; u = [["M", r.x, r.y], ["A", s, s, 0, l, 1, o.x, o.y]] } var c = e.addShape("path", { zIndex: this.get("zIndex"), attrs: p.assign({ path: u }, this.get("style")) }); c.name = "annotation-arc", this.get("appendInfo") && c.setSilent("appendInfo", this.get("appendInfo")), this.set("el", c) }, e }(ct), dt = function (t) { function e(e) { return t.call(this, Object(u.__assign)({ type: "region", zIndex: 1, start: null, end: null, style: { lineWidth: 0, fill: "#CCD7EB", opacity: .4 } }, e)) || this } return Object(u.__extends)(e, t), e.prototype.render = function (t, e) { var n = this.get("style"), i = this.getPath(t), r = e.addShape("path", { zIndex: this.get("zIndex"), attrs: p.assign({ path: i }, n) }); r.name = "annotation-region", this.get("appendInfo") && r.setSilent("appendInfo", this.get("appendInfo")), this.set("el", r) }, e.prototype.getPath = function (t) { var e = this.parsePoint(t, this.get("start")), n = this.parsePoint(t, this.get("end")); return [["M", e.x, e.y], ["L", n.x, e.y], ["L", n.x, n.y], ["L", e.x, n.y], ["z"]] }, e }(ct), gt = function (t) { function e(e) { return t.call(this, Object(u.__assign)({ type: "image", start: null, end: null, src: "" }, e)) || this } return Object(u.__extends)(e, t), e.prototype.render = function (t, e) { var n = this.parsePoint(t, this.get("start")), i = { x: n.x, y: n.y, img: this.get("src") }; if (this.get("end")) { var r = this.parsePoint(t, this.get("end")); i.width = r.x - n.x, i.height = r.y - n.y } else i.width = this.get("width") || 32, i.height = this.get("height") || 32; this.get("offsetX") && (i.x += this.get("offsetX")), this.get("offsetY") && (i.y += this.get("offsetY")); var o = e.addShape("Image", { zIndex: 1, attrs: i }); o.name = "annotation-image", this.get("appendInfo") && o.setSilent("appendInfo", this.get("appendInfo")), this.set("el", o) }, e }(ct), vt = function (t) { function e(e) { return t.call(this, Object(u.__assign)({ type: "html", zIndex: 7, position: null, alignX: "middle", alignY: "middle", offsetX: null, offsetY: null, html: null }, e)) || this } return Object(u.__extends)(e, t), e.prototype.render = function (t, e) { var n = this.parsePoint(t, this.get("position")), i = e.get("canvas").get("el").parentNode, r = h.createDom('<div class="guide-annotation"></div>'); i.appendChild(r); var o = this.get("html"); p.isFunction(o) && (o = o(this.get("xScales"), this.get("yScales"))); var a = p.isElement(o) ? o : h.createDom(o); r.appendChild(a), h.modifyCSS(r, { position: "absolute" }), this.setDomPosition(r, a, n), this.set("el", r) }, e.prototype.clear = function () { var t = this.get("el"); t && t.parentNode && t.parentNode.removeChild(t) }, e.prototype.setDomPosition = function (t, e, n) { var i = this.get("alignX"), r = this.get("alignY"), o = h.getOuterWidth(e), a = h.getOuterHeight(e), s = { x: n.x, y: n.y }; "middle" === i ? s.x -= Math.round(o / 2) : "right" === i && (s.x -= Math.round(o)), "middle" === r ? s.y -= Math.round(a / 2) : "bottom" === r && (s.y -= Math.round(a)); var u = this.get("offsetX"); u && (s.x += u); var l = this.get("offsetY"); l && (s.y += l), h.modifyCSS(t, { top: Math.round(s.y) + "px", left: Math.round(s.x) + "px", zIndex: this.get("zIndex") }) }, e }(ct), yt = function (t) { function e(e) { return t.call(this, p.deepMix({ type: "dataMarker", zIndex: 1, position: null, point: { display: !0, style: { r: 3, fill: "#ffffff", stroke: "#1890FF", lineWidth: 2 } }, line: { display: !0, lineLength: 20, style: { stroke: "#A3B1BF", lineWidth: 1 } }, text: { display: !0, style: { fill: "#000000", opacity: .65, fontSize: 12, textAlign: "start" } }, direction: "upward", autoAdjust: !0 }, e)) || this } return Object(u.__extends)(e, t), e.prototype.render = function (t, e) { var n, i, r = this, o = this.parsePoint(t, this.get("position")), a = e.addGroup(), s = this.getElementPosition(o), u = this.get("line"), l = this.get("point"), c = this.get("text"); if (u.display) { var h = s.line; n = this.drawLine(h, a) } if (c.display && c.content) { var p = s.text; i = this.drawText(p, a) } if (l.display) { var f = s.point; this.drawPoint(f, a) } if (this.get("autoAdjust")) { var d = a.getBBox(), g = d.minX, v = d.minY, y = d.maxX, m = d.maxY, x = t.start, _ = t.end; if (i) { g <= x.x && i.attr("textAlign", "start"), y >= _.x && i.attr("textAlign", "end"); var b = this.get("direction"); if ("upward" === b && v <= _.y || "upward" !== b && m >= x.y) { var w = void 0, M = void 0; "upward" === b && v <= _.y ? (w = "top", M = 1) : (w = "bottom", M = -1), i.attr("textBaseline", w); var S = 0; if (u.display) { S = u.lineLength; var C = [["M", o.x, o.y], ["L", o.x, o.y + S * M]]; n.attr("path", C) } var O = o.y + (S + 2) * M; i.attr("y", O) } } } a.get("children").forEach((function (t) { t.name = "annotation-data-marker", r.get("appendInfo") && t.setSilent("appendInfo", r.get("appendInfo")) })), this.set("el", a) }, e.prototype.getElementPosition = function (t) { var e = t.x, n = t.y, i = this.get("line").display ? this.get("line").lineLength : 0, r = this.get("direction"); this.get("text").style.textBaseline = "upward" === r ? "bottom" : "top"; var o = "upward" === r ? -1 : 1; return { point: { x: e, y: n }, line: [{ x: e, y: n }, { x: e, y: i * o + n }], text: { x: e, y: (i + 2) * o + n } } }, e.prototype.drawLine = function (t, e) { var n = this.get("line").style, i = [["M", t[0].x, t[0].y], ["L", t[1].x, t[1].y]]; return e.addShape("path", { attrs: p.assign({ path: i }, n) }) }, e.prototype.drawText = function (t, e) { var n = this.get("text"); return e.addShape("text", { attrs: p.assign({ text: n.content }, n.style, t) }) }, e.prototype.drawPoint = function (t, e) { var n = this.get("point").style; return e.addShape("circle", { attrs: p.assign({}, n, t) }) }, e }(ct), mt = function (t) { function e(e) { return t.call(this, p.deepMix({ type: "dataRegion", start: null, end: null, region: { lineLength: 0, style: { lineWidth: 0, fill: "#000000", opacity: .04 } }, text: { display: !0, content: "", style: { textAlign: "center", textBaseline: "bottom", fontSize: 12, fill: "rgba(0, 0, 0, .65)" } } }, e)) || this } return Object(u.__extends)(e, t), e.prototype.render = function (t, e, n) { var i = this, r = this.get("region"), o = this.get("text"), a = r.lineLength, s = this.getRegionData(t, n); if (s.length) { var u = this.getBBox(s), l = []; l.push(["M", s[0].x, u.minY - a]); for (var c = 0, h = s.length; c < h; c++) { var f = ["L", s[c].x, s[c].y]; l.push(f) } l.push(["L", s[s.length - 1].x, u.minY - a]); var d = e.addGroup(); d.addShape("path", { attrs: p.mix({ path: l }, r.style) }), o.display && o.content && d.addShape("Text", { attrs: p.mix({ x: (u.minX + u.maxX) / 2, y: u.minY - a, text: o.content }, o.style) }), d.get("children").forEach((function (t) { t.name = "annotation-data-region", i.get("appendInfo") && t.setSilent("appendInfo", i.get("appendInfo")) })), this.set("el", d) } }, e.prototype.getRegionData = function (t, e) { for (var n, i = this.get("start"), r = this.get("end"), o = p.head(p.values(this.get("xScales"))).field, a = p.head(p.values(this.get("yScales"))).field, s = p.isArray(i) ? i[0] : i[o], u = p.isArray(r) ? r[0] : r[o], l = [], c = 0, h = e.length; c < h; c++) { var f = e[c]; if (f[o] === s && (n = c), c >= n && l.push(this.parsePoint(t, [f[o], f[a]])), f[o] === u) break } return l }, e.prototype.getBBox = function (t) { for (var e = [], n = [], i = 0; i < t.length; i++)e.push(t[i].x), n.push(t[i].y); var r = p.getRange(e), o = p.getRange(n); return A.BBox.fromRange(r.min, o.min, r.max, o.max) }, e }(ct); n.d(e, "Axis", (function () { return r })), n.d(e, "Guide", (function () { return c })), n.d(e, "Interface", (function () { return s })), n.d(e, "Label", (function () { return x })), n.d(e, "Tooltip", (function () { return i })), n.d(e, "Legend", (function () { return o })), n.d(e, "Annotation", (function () { return a })); e.default = c }, function (t, e, n) { "use strict"; n.r(e); var i = {}; n.r(i), n.d(i, "default", (function () { return C })); var r = n(0), o = {}; function a(t) { return o[t] } function s(t, e) { o[t] = e } var u = function () { function t(t) { this.type = "base", this.isCategory = !1, this.isLinear = !1, this.isContinuous = !1, this.isIdentity = !1, this.values = [], this.range = [0, 1], this.ticks = [], this.__cfg__ = t, this.initCfg(), this.init() } return t.prototype.translate = function (t) { return t }, t.prototype.change = function (t) { Object(r.assign)(this.__cfg__, t), this.init() }, t.prototype.clone = function () { return this.constructor(this.__cfg__) }, t.prototype.getTicks = function () { var t = this; return Object(r.map)(this.ticks, (function (e, n) { return Object(r.isObject)(e) ? e : { text: t.getText(e, n), tickValue: e, value: t.scale(e) } })) }, t.prototype.getText = function (t, e) { var n = this.formatter, i = n ? n(t, e) : t; return Object(r.isNil)(i) || !Object(r.isFunction)(i.toString) ? "" : i.toString() }, t.prototype.getConfig = function (t) { return this.__cfg__[t] }, t.prototype.init = function () { Object(r.assign)(this, this.__cfg__), this.setDomain(), Object(r.isEmpty)(this.getConfig("ticks")) && (this.ticks = this.calculateTicks()) }, t.prototype.initCfg = function () { }, t.prototype.setDomain = function () { }, t.prototype.calculateTicks = function () { var t = this.tickMethod, e = []; if (Object(r.isString)(t)) { var n = a(t); if (!n) throw new Error("There is no method to to calculate ticks!"); e = n(this) } else Object(r.isFunction)(t) && (e = t(this)); return e }, t.prototype.rangeMin = function () { return Object(r.head)(this.range) }, t.prototype.rangeMax = function () { return Object(r.last)(this.range) }, t.prototype.calcPercent = function (t, e, n) { return Object(r.isNumber)(t) ? (t - e) / (n - e) : NaN }, t.prototype.calcValue = function (t, e, n) { return e + t * (n - e) }, t }(), l = n(1), c = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "cat", e.isCategory = !0, e } return Object(l.__extends)(e, t), e.prototype.translate = function (t) { var e = Object(r.indexOf)(this.values, t); return -1 === e ? Object(r.isNumber)(t) ? t : NaN : e }, e.prototype.scale = function (t) { var e = this.translate(t); if (e < this.min - .5 || e > this.max + .5) return NaN; var n = this.calcPercent(e, this.min, this.max); return this.calcValue(n, this.rangeMin(), this.rangeMax()) }, e.prototype.invert = function (t) { var e = this.max - this.min, n = this.calcPercent(t, this.rangeMin(), this.rangeMax()), i = Math.round(e * n) + this.min; return i < this.min || i > this.max ? NaN : this.values[i] }, e.prototype.getText = function (e) { for (var n = [], i = 1; i < arguments.length; i++)n[i - 1] = arguments[i]; var o = e; return Object(r.isNumber)(e) && !this.values.includes(e) && (o = this.values[o]), t.prototype.getText.apply(this, Object(l.__spreadArrays)([o], n)) }, e.prototype.initCfg = function () { this.tickMethod = "cat" }, e.prototype.setDomain = function () { if (Object(r.isNil)(this.getConfig("min")) && (this.min = 0), Object(r.isNil)(this.getConfig("max"))) { var t = this.values.length; this.max = t > 1 ? t - 1 : t } }, e }(u), h = {}, p = /d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g, f = "[^\\s]+", d = /\[([^]*?)\]/gm, g = function () { }; function v(t, e) { for (var n = [], i = 0, r = t.length; i < r; i++)n.push(t[i].substr(0, e)); return n } function y(t) { return function (e, n, i) { var r = i[t].indexOf(n.charAt(0).toUpperCase() + n.substr(1).toLowerCase()); ~r && (e.month = r) } } function m(t, e) { for (t = String(t), e = e || 2; t.length < e;)t = "0" + t; return t } var x = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], _ = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], b = v(_, 3), w = v(x, 3); h.i18n = { dayNamesShort: w, dayNames: x, monthNamesShort: b, monthNames: _, amPm: ["am", "pm"], DoFn: function (t) { return t + ["th", "st", "nd", "rd"][t % 10 > 3 ? 0 : (t - t % 10 != 10) * t % 10] } }; var M = { D: function (t) { return t.getDate() }, DD: function (t) { return m(t.getDate()) }, Do: function (t, e) { return e.DoFn(t.getDate()) }, d: function (t) { return t.getDay() }, dd: function (t) { return m(t.getDay()) }, ddd: function (t, e) { return e.dayNamesShort[t.getDay()] }, dddd: function (t, e) { return e.dayNames[t.getDay()] }, M: function (t) { return t.getMonth() + 1 }, MM: function (t) { return m(t.getMonth() + 1) }, MMM: function (t, e) { return e.monthNamesShort[t.getMonth()] }, MMMM: function (t, e) { return e.monthNames[t.getMonth()] }, YY: function (t) { return m(String(t.getFullYear()), 4).substr(2) }, YYYY: function (t) { return m(t.getFullYear(), 4) }, h: function (t) { return t.getHours() % 12 || 12 }, hh: function (t) { return m(t.getHours() % 12 || 12) }, H: function (t) { return t.getHours() }, HH: function (t) { return m(t.getHours()) }, m: function (t) { return t.getMinutes() }, mm: function (t) { return m(t.getMinutes()) }, s: function (t) { return t.getSeconds() }, ss: function (t) { return m(t.getSeconds()) }, S: function (t) { return Math.round(t.getMilliseconds() / 100) }, SS: function (t) { return m(Math.round(t.getMilliseconds() / 10), 2) }, SSS: function (t) { return m(t.getMilliseconds(), 3) }, a: function (t, e) { return t.getHours() < 12 ? e.amPm[0] : e.amPm[1] }, A: function (t, e) { return t.getHours() < 12 ? e.amPm[0].toUpperCase() : e.amPm[1].toUpperCase() }, ZZ: function (t) { var e = t.getTimezoneOffset(); return (e > 0 ? "-" : "+") + m(100 * Math.floor(Math.abs(e) / 60) + Math.abs(e) % 60, 4) } }, S = { D: ["\\d\\d?", function (t, e) { t.day = e }], Do: ["\\d\\d?" + f, function (t, e) { t.day = parseInt(e, 10) }], M: ["\\d\\d?", function (t, e) { t.month = e - 1 }], YY: ["\\d\\d?", function (t, e) { var n = +("" + (new Date).getFullYear()).substr(0, 2); t.year = "" + (e > 68 ? n - 1 : n) + e }], h: ["\\d\\d?", function (t, e) { t.hour = e }], m: ["\\d\\d?", function (t, e) { t.minute = e }], s: ["\\d\\d?", function (t, e) { t.second = e }], YYYY: ["\\d{4}", function (t, e) { t.year = e }], S: ["\\d", function (t, e) { t.millisecond = 100 * e }], SS: ["\\d{2}", function (t, e) { t.millisecond = 10 * e }], SSS: ["\\d{3}", function (t, e) { t.millisecond = e }], d: ["\\d\\d?", g], ddd: [f, g], MMM: [f, y("monthNamesShort")], MMMM: [f, y("monthNames")], a: [f, function (t, e, n) { var i = e.toLowerCase(); i === n.amPm[0] ? t.isPm = !1 : i === n.amPm[1] && (t.isPm = !0) }], ZZ: ["[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z", function (t, e) { var n, i = (e + "").match(/([+-]|\d\d)/gi); i && (n = 60 * i[1] + parseInt(i[2], 10), t.timezoneOffset = "+" === i[0] ? n : -n) }] }; S.dd = S.d, S.dddd = S.ddd, S.DD = S.D, S.mm = S.m, S.hh = S.H = S.HH = S.h, S.MM = S.M, S.ss = S.s, S.A = S.a, h.masks = { default: "ddd MMM DD YYYY HH:mm:ss", shortDate: "M/D/YY", mediumDate: "MMM D, YYYY", longDate: "MMMM D, YYYY", fullDate: "dddd, MMMM D, YYYY", shortTime: "HH:mm", mediumTime: "HH:mm:ss", longTime: "HH:mm:ss.SSS" }, h.format = function (t, e, n) { var i = n || h.i18n; if ("number" == typeof t && (t = new Date(t)), "[object Date]" !== Object.prototype.toString.call(t) || isNaN(t.getTime())) throw new Error("Invalid Date in fecha.format"); e = h.masks[e] || e || h.masks.default; var r = []; return (e = (e = e.replace(d, (function (t, e) { return r.push(e), "@@@" }))).replace(p, (function (e) { return e in M ? M[e](t, i) : e.slice(1, e.length - 1) }))).replace(/@@@/g, (function () { return r.shift() })) }, h.parse = function (t, e, n) { var i = n || h.i18n; if ("string" != typeof e) throw new Error("Invalid format in fecha.parse"); if (e = h.masks[e] || e, t.length > 1e3) return null; var r = {}, o = [], a = []; e = e.replace(d, (function (t, e) { return a.push(e), "@@@" })); var s, u = (s = e, s.replace(/[|\\{()[^$+*?.-]/g, "\\$&")).replace(p, (function (t) { if (S[t]) { var e = S[t]; return o.push(e[1]), "(" + e[0] + ")" } return t })); u = u.replace(/@@@/g, (function () { return a.shift() })); var l = t.match(new RegExp(u, "i")); if (!l) return null; for (var c = 1; c < l.length; c++)o[c - 1](r, l[c], i); var f, g = new Date; return !0 === r.isPm && null != r.hour && 12 != +r.hour ? r.hour = +r.hour + 12 : !1 === r.isPm && 12 == +r.hour && (r.hour = 0), null != r.timezoneOffset ? (r.minute = +(r.minute || 0) - +r.timezoneOffset, f = new Date(Date.UTC(r.year || g.getFullYear(), r.month || 0, r.day || 1, r.hour || 0, r.minute || 0, r.second || 0, r.millisecond || 0))) : f = new Date(r.year || g.getFullYear(), r.month || 0, r.day || 1, r.hour || 0, r.minute || 0, r.second || 0, r.millisecond || 0), f }; var C = h; function O(t, e) { return (i.format || C.format)(t, e) } function k(t) { return Object(r.isString)(t) && (t = t.indexOf("T") > 0 ? new Date(t).getTime() : new Date(t.replace(/-/gi, "/")).getTime()), Object(r.isDate)(t) && (t = t.getTime()), t } var P = 864e5, A = [["HH:mm:ss", 1e3], ["HH:mm:ss", 1e4], ["HH:mm:ss", 3e4], ["HH:mm", 6e4], ["HH:mm", 6e5], ["HH:mm", 18e5], ["HH", 36e5], ["HH", 216e5], ["HH", 432e5], ["YYYY-MM-DD", P], ["YYYY-MM-DD", 4 * P], ["YYYY-WW", 7 * P], ["YYYY-MM", 26784e5], ["YYYY-MM", 107136e5], ["YYYY-MM", 160704e5], ["YYYY", 32832e6]]; function L(t, e, n) { var i, o = (i = function (t) { return t[1] }, function (t, e, n, o) { for (var a = Object(r.isNil)(n) ? 0 : n, s = Object(r.isNil)(o) ? t.length : o; a < s;) { var u = a + s >>> 1; i(t[u]) > e ? s = u : a = u + 1 } return a })(A, (e - t) / n) - 1, a = A[o]; return o < 0 ? a = A[0] : o >= A.length && (a = Object(r.last)(A)), a } var T = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(l.__extends)(e, t), e.prototype.translate = function (t) { t = k(t); var e = this.values.indexOf(t); return -1 === e && (e = Object(r.isNumber)(t) && t < this.values.length ? t : NaN), e }, e.prototype.getText = function (t, e) { var n = this.translate(t); if (n > -1) { var i = this.values[n], r = this.formatter; return i = r ? r(i, e) : O(i, this.mask) } return t }, e.prototype.initCfg = function () { this.tickMethod = "time-cat", this.mask = "YYYY-MM-DD", this.tickCount = 7 }, e.prototype.setDomain = function () { var e = this.values; Object(r.each)(e, (function (t, n) { e[n] = k(t) })), e.sort((function (t, e) { return t - e })), t.prototype.setDomain.call(this) }, e }(c), D = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.isContinuous = !0, e } return Object(l.__extends)(e, t), e.prototype.scale = function (t) { if (Object(r.isNil)(t)) return NaN; var e = this.rangeMin(), n = this.rangeMax(); return this.max === this.min ? e : e + this.getScalePercent(t) * (n - e) }, e.prototype.init = function () { t.prototype.init.call(this); var e = this.ticks, n = Object(r.head)(e), i = Object(r.last)(e); n < this.min && (this.min = n), i > this.max && (this.max = i) }, e.prototype.setDomain = function () { var t = Object(r.getRange)(this.values), e = t.min, n = t.max; Object(r.isNil)(this.min) && (this.min = e), Object(r.isNil)(this.max) && (this.max = n), this.min > this.max && (this.min = e, this.max = n) }, e.prototype.calculateTicks = function () { var e = this, n = t.prototype.calculateTicks.call(this); return this.nice || (n = Object(r.filter)(n, (function (t) { return t >= e.min && t <= e.max }))), n }, e.prototype.getScalePercent = function (t) { var e = this.max, n = this.min; return (t - n) / (e - n) }, e.prototype.getInvertPercent = function (t) { return (t - this.rangeMin()) / (this.rangeMax() - this.rangeMin()) }, e }(u), j = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "linear", e.isLinear = !0, e } return Object(l.__extends)(e, t), e.prototype.invert = function (t) { var e = this.getInvertPercent(t); return this.min + e * (this.max - this.min) }, e.prototype.initCfg = function () { this.tickMethod = "wilkinson-extended", this.nice = !1 }, e }(D); function I(t, e) { var n = Math.E; return e >= 0 ? Math.pow(n, Math.log(e) / t) : -1 * Math.pow(n, Math.log(-e) / t) } function B(t, e) { return 1 === t ? 1 : Math.log(e) / Math.log(t) } function E(t, e, n) { Object(r.isNil)(n) && (n = Math.max.apply(null, t)); var i = n; return Object(r.each)(t, (function (t) { t > 0 && t < i && (i = t) })), i === n && (i = n / e), i > 1 && (i = 1), i } var F = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "log", e } return Object(l.__extends)(e, t), e.prototype.invert = function (t) { var e, n = this.base, i = B(n, this.max), r = this.rangeMin(), o = this.rangeMax() - r, a = this.positiveMin; if (a) { if (0 === t) return 0; var s = 1 / (i - (e = B(n, a / n))) * o; if (t < s) return t / s * a } else e = B(n, this.min); var u = (t - r) / o * (i - e) + e; return Math.pow(n, u) }, e.prototype.initCfg = function () { this.tickMethod = "log", this.base = 10, this.tickCount = 6, this.nice = !0 }, e.prototype.setDomain = function () { t.prototype.setDomain.call(this); var e = this.min; if (e < 0) throw new Error("When you use log scale, the minimum value must be greater than zero!"); 0 === e && (this.positiveMin = E(this.values, this.base, this.max)) }, e.prototype.getScalePercent = function (t) { var e = this.max, n = this.min; if (e === n) return 0; if (t <= 0) return 0; var i = this.base, r = this.positiveMin; return r && (n = 1 * r / i), t < r ? t / r / (B(i, e) - B(i, n)) : (B(i, t) - B(i, n)) / (B(i, e) - B(i, n)) }, e }(D), R = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "pow", e } return Object(l.__extends)(e, t), e.prototype.invert = function (t) { var e = this.getInvertPercent(t), n = this.exponent, i = I(n, this.max), r = I(n, this.min), o = e * (i - r) + r, a = o >= 0 ? 1 : -1; return Math.pow(o, n) * a }, e.prototype.initCfg = function () { this.tickMethod = "pow", this.exponent = 2, this.tickCount = 5, this.nice = !0 }, e.prototype.getScalePercent = function (t) { var e = this.max, n = this.min; if (e === n) return 0; var i = this.exponent; return (I(i, t) - I(i, n)) / (I(i, e) - I(i, n)) }, e }(D), z = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "time", e } return Object(l.__extends)(e, t), e.prototype.getText = function (t, e) { var n = this.translate(t), i = this.formatter; return i ? i(n, e) : O(n, this.mask) }, e.prototype.scale = function (e) { var n = e; return (Object(r.isString)(n) || Object(r.isDate)(n)) && (n = this.translate(n)), t.prototype.scale.call(this, n) }, e.prototype.translate = function (t) { return k(t) }, e.prototype.initCfg = function () { this.tickMethod = "time-pretty", this.mask = "YYYY-MM-DD", this.tickCount = 7, this.nice = !1 }, e.prototype.setDomain = function () { var t = this.values, e = this.getConfig("min"), n = this.getConfig("max"); if (Object(r.isNil)(e) && Object(r.isNumber)(e) || (this.min = this.translate(this.min)), Object(r.isNil)(n) && Object(r.isNumber)(n) || (this.max = this.translate(this.max)), t && t.length) { var i = [], o = 1 / 0, a = o, s = 0; Object(r.each)(t, (function (t) { var e = k(t); if (isNaN(e)) throw new TypeError("Invalid Time: " + t + " in time scale!"); o > e ? (a = o, o = e) : a > e && (a = e), s < e && (s = e), i.push(e) })), t.length > 1 && (this.minTickInterval = a - o), Object(r.isNil)(e) && (this.min = o), Object(r.isNil)(n) && (this.max = s) } }, e }(j), N = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "quantize", e } return Object(l.__extends)(e, t), e.prototype.invert = function (t) { var e = this.ticks, n = e.length, i = this.getInvertPercent(t), o = Math.floor(i * (n - 1)); if (o >= n - 1) return Object(r.last)(e); if (o < 0) return Object(r.head)(e); var a = e[o], s = o / (n - 1); return a + (i - s) / ((o + 1) / (n - 1) - s) * (e[o + 1] - a) }, e.prototype.initCfg = function () { this.tickMethod = "r-pretty", this.tickCount = 5, this.nice = !0 }, e.prototype.calculateTicks = function () { var e = t.prototype.calculateTicks.call(this); return this.nice || (Object(r.last)(e) !== this.max && e.push(this.max), Object(r.head)(e) !== this.min && e.unshift(this.min)), e }, e.prototype.getScalePercent = function (t) { var e = this.ticks; if (t < Object(r.head)(e)) return 0; if (t > Object(r.last)(e)) return 1; var n = 0; return Object(r.each)(e, (function (e, i) { if (!(t >= e)) return !1; n = i })), n / (e.length - 1) }, e }(D), Y = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "quantile", e } return Object(l.__extends)(e, t), e.prototype.initCfg = function () { this.tickMethod = "quantile", this.tickCount = 5, this.nice = !0 }, e }(N), H = {}; function G(t) { return H[t] } function W(t, e) { if (G(t)) throw new Error("type '" + t + "' existed."); H[t] = e } var V = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "identity", e.isIdentity = !0, e } return Object(l.__extends)(e, t), e.prototype.calculateTicks = function () { return this.values }, e.prototype.scale = function (t) { return this.values[0] !== t && Object(r.isNumber)(t) ? t : this.range[0] }, e.prototype.invert = function (t) { var e = this.range; return t < e[0] || t > e[1] ? NaN : this.values[0] }, e }(u), X = [1, 5, 2, 2.5, 4, 3], q = 100 * Number.EPSILON; function U(t, e, n, i, o, a) { var s = Object(r.size)(e), u = Object(r.indexOf)(e, t), l = 0, c = function (t, e) { return (t % e + e) % e }(i, a); return (c < q || a - c < q) && i <= 0 && o >= 0 && (l = 1), 1 - u / (s - 1) - n + l } function Z(t, e, n) { var i = Object(r.size)(e); return 1 - Object(r.indexOf)(e, t) / (i - 1) - n + 1 } function Q(t, e, n, i, r, o) { var a = (t - 1) / (o - r), s = (e - 1) / (Math.max(o, i) - Math.min(n, r)); return 2 - Math.max(a / s, s / a) } function $(t, e) { return t >= e ? 2 - (t - 1) / (e - 1) : 1 } function K(t, e, n, i) { var r = e - t; return 1 - .5 * (Math.pow(e - i, 2) + Math.pow(t - n, 2)) / Math.pow(.1 * r, 2) } function J(t, e, n) { var i = e - t; if (n > i) { var r = (n - i) / 2; return 1 - Math.pow(r, 2) / Math.pow(.1 * i, 2) } return 1 } function tt(t, e, n, i, o, a) { if (void 0 === n && (n = 5), void 0 === i && (i = !0), void 0 === o && (o = X), void 0 === a && (a = [.25, .2, .5, .05]), t === e || 1 === n) return { min: t, max: e, ticks: [t] }; for (var s = { score: -2, lmin: 0, lmax: 0, lstep: 0 }, u = 1; u < 1 / 0;) { for (var l = 0, c = o; l < c.length; l++) { var h = c[l], p = Z(h, o, u); if (Number.isNaN(p)) throw new Error("NaN"); if (a[0] * p + a[1] + a[2] + a[3] < s.score) { u = 1 / 0; break } for (var f = 2; f < 1 / 0;) { var d = $(f, n); if (a[0] * p + a[1] + a[2] * d + a[3] < s.score) break; for (var g = (e - t) / (f + 1) / u / h, v = Math.ceil(Math.log10(g)); v < 1 / 0;) { var y = u * h * Math.pow(10, v), m = J(t, e, y * (f - 1)); if (a[0] * p + a[1] * m + a[2] * d + a[3] < s.score) break; var x = Math.floor(e / y) * u - (f - 1) * u, _ = Math.ceil(t / y) * u; if (x > _) v += 1; else { for (var b = x; b <= _; b += 1) { var w = b * (y / u), M = w + y * (f - 1), S = y, C = U(h, o, u, w, M, S), O = K(t, e, w, M), k = Q(f, n, t, e, w, M), P = a[0] * C + a[1] * O + a[2] * k + 1 * a[3]; P > s.score && (!i || w <= t && M >= e) && (s.lmin = w, s.lmax = M, s.lstep = S, s.score = P) } v += 1 } } f += 1 } } u += 1 } for (var A = Number.isInteger(s.lstep) ? 0 : Math.ceil(Math.abs(Math.log10(s.lstep))), L = [], T = s.lmin; T <= s.lmax; T += s.lstep)L.push(T); var D = A ? Object(r.map)(L, (function (t) { return Number.parseFloat(t.toFixed(A)) })) : L; return { min: Math.min(t, Object(r.head)(D)), max: Math.max(e, Object(r.last)(D)), ticks: D } } function et(t) { var e = t.values, n = t.tickInterval, i = t.tickCount, o = e; if (Object(r.isNumber)(n)) return Object(r.filter)(o, (function (t, e) { return e % n == 0 })); var a = t.min, s = t.max; if (Object(r.isNil)(a) && (a = 0), Object(r.isNil)(s) && (s = e.length - 1), Object(r.isNumber)(i) && i < s - a) { var u = tt(a, s, i, !1, [1, 2, 5, 3, 4, 7, 6, 8, 9]).ticks; return Object(r.filter)(u, (function (t) { return t >= a && t <= s })).map((function (t) { return e[t] })) } return e.slice(a, s + 1) } function nt(t, e, n) { return ("ceil" === n ? Math.ceil(t / e) : "floor" === n ? Math.floor(t / e) : Math.round(t / e)) * e } function it(t, e, n) { var i = nt(t, n, "floor"), o = nt(e, n, "ceil"); i = Object(r.fixedBase)(i, n), o = Object(r.fixedBase)(o, n); for (var a = [], s = i; s <= o; s += n) { var u = Object(r.fixedBase)(s, n); a.push(u) } return { min: i, max: o, ticks: a } } function rt(t, e, n) { void 0 === n && (n = 5); var i = { max: 0, min: 0, ticks: [] }, r = (e - t) / n, o = Math.pow(10, Math.floor(Math.log10(r))), a = o < 1 ? Math.ceil(Math.abs(Math.log10(o))) : 0, s = o; 2 * o - r < 1.5 * (r - s) && 5 * o - r < 2.75 * (r - (s = 2 * o)) && 10 * o - r < 1.5 * (r - (s = 5 * o)) && (s = 10 * o); var u = Math.ceil(e / s), l = Math.floor(t / s); i.max = Math.max(u * s, e), i.min = Math.min(l * s, t); for (var c = Number.parseFloat((l * s).toFixed(a)); c < e;)i.ticks.push(c), c += s, a && (c = Number.parseFloat(c.toFixed(a))); return i.ticks.push(c), i } function ot(t, e) { var n = t.length * e; return 1 === e ? t[t.length - 1] : 0 === e ? t[0] : n % 1 != 0 ? t[Math.ceil(n) - 1] : t.length % 2 == 0 ? (t[n - 1] + t[n]) / 2 : t[n] } function at(t) { return new Date(t).getFullYear() } function st(t) { return new Date(t, 0, 1).getTime() } function ut(t) { return new Date(t).getMonth() } function lt(t, e) { return new Date(t, e, 1).getTime() } s("cat", et), s("time-cat", (function (t) { var e = et(t), n = Object(r.last)(t.values); return n !== Object(r.last)(e) && e.push(n), e })), s("wilkinson-extended", (function (t) { var e = t.min, n = t.max, i = t.tickCount, r = t.nice, o = t.tickInterval; return o ? it(e, n, o).ticks : tt(e, n, i, r).ticks })), s("r-pretty", (function (t) { var e = t.min, n = t.max, i = t.tickCount, r = t.tickInterval; return r ? it(e, n, r).ticks : rt(e, n, i).ticks })), s("time", (function (t) { var e = t.min, n = t.max, i = t.minTickInterval, r = t.tickInterval, o = t.tickCount; if (r) o = Math.ceil((n - e) / r); else { var a = (n - e) / (r = L(e, n, o)[1]) / o; a > 1 && (r *= Math.ceil(a)), i && r < i && (r = i) } for (var s = [], u = e; u < n + r; u += r)s.push(u); return s })), s("time-pretty", (function (t) { var e = t.min, n = t.max, i = t.minTickInterval, r = t.tickInterval, o = t.tickCount, a = []; r || (r = (n - e) / o, i && r < i && (r = i)); var s = at(e); if (r > 31536e6) for (var u = at(n), l = Math.ceil(r / 31536e6), c = s; c <= u + l; c += l)a.push(st(c)); else if (r > 26784e5) { var h = Math.ceil(r / 26784e5), p = ut(e), f = function (t, e) { var n = at(t), i = at(e), r = ut(t); return 12 * (i - n) + (ut(e) - r) % 12 }(e, n); for (c = 0; c <= f + h; c += h)a.push(lt(s, c + p)) } else if (r > P) { var d = (x = new Date(e)).getFullYear(), g = x.getMonth(), v = x.getDate(), y = Math.ceil(r / P), m = function (t, e) { return Math.ceil((e - t) / P) }(e, n); for (c = 0; c < m + y; c += y)a.push(new Date(d, g, v + c).getTime()) } else if (r > 36e5) { d = (x = new Date(e)).getFullYear(), g = x.getMonth(), y = x.getDate(); var x, _ = x.getHours(), b = Math.ceil(r / 36e5), w = function (t, e) { return Math.ceil((e - t) / 36e5) }(e, n); for (c = 0; c <= w + b; c += b)a.push(new Date(d, g, y, _ + c).getTime()) } else if (r > 6e4) { var M = function (t, e) { return Math.ceil((e - t) / 6e4) }(e, n), S = Math.ceil(r / 6e4); for (c = 0; c <= M + S; c += S)a.push(e + 6e4 * c) } else { var C = r; C < 1e3 && (C = 1e3); var O = 1e3 * Math.floor(e / 1e3), k = Math.ceil((n - e) / 1e3), A = Math.ceil(C / 1e3); for (c = 0; c < k + A; c += A)a.push(O + 1e3 * c) } return a })), s("log", (function (t) { var e, n = t.base, i = t.tickCount, r = t.min, o = t.max, a = t.values, s = B(n, o); if (r > 0) e = Math.floor(B(n, r)); else { var u = E(a, n, o); e = Math.floor(B(n, u)) } for (var l = s - e, c = Math.ceil(l / i), h = [], p = e; p < s + c; p += c)h.push(Math.pow(n, p)); return r <= 0 && h.unshift(0), h })), s("pow", (function (t) { var e = t.exponent, n = t.tickCount, i = Math.ceil(I(e, t.max)); return rt(Math.floor(I(e, t.min)), i, n).ticks.map((function (t) { var n = t >= 0 ? 1 : -1; return Math.pow(t, e) * n })) })), s("quantile", (function (t) { var e = t.tickCount, n = t.values; if (!n || !n.length) return []; for (var i = n.slice().sort((function (t, e) { return t - e })), r = [], o = 0; o < e; o++) { var a = o / (e - 1); r.push(ot(i, a)) } return r })), n.d(e, "Category", (function () { return c })), n.d(e, "Identity", (function () { return V })), n.d(e, "Linear", (function () { return j })), n.d(e, "Log", (function () { return F })), n.d(e, "Pow", (function () { return R })), n.d(e, "Time", (function () { return z })), n.d(e, "TimeCat", (function () { return T })), n.d(e, "Quantile", (function () { return Y })), n.d(e, "Quantize", (function () { return N })), n.d(e, "Scale", (function () { return u })), n.d(e, "getScale", (function () { return G })), n.d(e, "registerScale", (function () { return W })), n.d(e, "getTickMethod", (function () { return a })), W("cat", c), W("category", c), W("identity", V), W("linear", j), W("log", F), W("pow", R), W("time", z), W("timeCat", T), W("quantize", N), W("quantile", Y) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.sub = e.mul = void 0, e.create = function () { var t = new i.ARRAY_TYPE(9); i.ARRAY_TYPE != Float32Array && (t[1] = 0, t[2] = 0, t[3] = 0, t[5] = 0, t[6] = 0, t[7] = 0); return t[0] = 1, t[4] = 1, t[8] = 1, t }, e.fromMat4 = function (t, e) { return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[4], t[4] = e[5], t[5] = e[6], t[6] = e[8], t[7] = e[9], t[8] = e[10], t }, e.clone = function (t) { var e = new i.ARRAY_TYPE(9); return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4], e[5] = t[5], e[6] = t[6], e[7] = t[7], e[8] = t[8], e }, e.copy = function (t, e) { return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[4] = e[4], t[5] = e[5], t[6] = e[6], t[7] = e[7], t[8] = e[8], t }, e.fromValues = function (t, e, n, r, o, a, s, u, l) { var c = new i.ARRAY_TYPE(9); return c[0] = t, c[1] = e, c[2] = n, c[3] = r, c[4] = o, c[5] = a, c[6] = s, c[7] = u, c[8] = l, c }, e.set = function (t, e, n, i, r, o, a, s, u, l) { return t[0] = e, t[1] = n, t[2] = i, t[3] = r, t[4] = o, t[5] = a, t[6] = s, t[7] = u, t[8] = l, t }, e.identity = function (t) { return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 1, t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1, t }, e.transpose = function (t, e) { if (t === e) { var n = e[1], i = e[2], r = e[5]; t[1] = e[3], t[2] = e[6], t[3] = n, t[5] = e[7], t[6] = i, t[7] = r } else t[0] = e[0], t[1] = e[3], t[2] = e[6], t[3] = e[1], t[4] = e[4], t[5] = e[7], t[6] = e[2], t[7] = e[5], t[8] = e[8]; return t }, e.invert = function (t, e) { var n = e[0], i = e[1], r = e[2], o = e[3], a = e[4], s = e[5], u = e[6], l = e[7], c = e[8], h = c * a - s * l, p = -c * o + s * u, f = l * o - a * u, d = n * h + i * p + r * f; if (!d) return null; return d = 1 / d, t[0] = h * d, t[1] = (-c * i + r * l) * d, t[2] = (s * i - r * a) * d, t[3] = p * d, t[4] = (c * n - r * u) * d, t[5] = (-s * n + r * o) * d, t[6] = f * d, t[7] = (-l * n + i * u) * d, t[8] = (a * n - i * o) * d, t }, e.adjoint = function (t, e) { var n = e[0], i = e[1], r = e[2], o = e[3], a = e[4], s = e[5], u = e[6], l = e[7], c = e[8]; return t[0] = a * c - s * l, t[1] = r * l - i * c, t[2] = i * s - r * a, t[3] = s * u - o * c, t[4] = n * c - r * u, t[5] = r * o - n * s, t[6] = o * l - a * u, t[7] = i * u - n * l, t[8] = n * a - i * o, t }, e.determinant = function (t) { var e = t[0], n = t[1], i = t[2], r = t[3], o = t[4], a = t[5], s = t[6], u = t[7], l = t[8]; return e * (l * o - a * u) + n * (-l * r + a * s) + i * (u * r - o * s) }, e.multiply = r, e.translate = function (t, e, n) { var i = e[0], r = e[1], o = e[2], a = e[3], s = e[4], u = e[5], l = e[6], c = e[7], h = e[8], p = n[0], f = n[1]; return t[0] = i, t[1] = r, t[2] = o, t[3] = a, t[4] = s, t[5] = u, t[6] = p * i + f * a + l, t[7] = p * r + f * s + c, t[8] = p * o + f * u + h, t }, e.rotate = function (t, e, n) { var i = e[0], r = e[1], o = e[2], a = e[3], s = e[4], u = e[5], l = e[6], c = e[7], h = e[8], p = Math.sin(n), f = Math.cos(n); return t[0] = f * i + p * a, t[1] = f * r + p * s, t[2] = f * o + p * u, t[3] = f * a - p * i, t[4] = f * s - p * r, t[5] = f * u - p * o, t[6] = l, t[7] = c, t[8] = h, t }, e.scale = function (t, e, n) { var i = n[0], r = n[1]; return t[0] = i * e[0], t[1] = i * e[1], t[2] = i * e[2], t[3] = r * e[3], t[4] = r * e[4], t[5] = r * e[5], t[6] = e[6], t[7] = e[7], t[8] = e[8], t }, e.fromTranslation = function (t, e) { return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 1, t[5] = 0, t[6] = e[0], t[7] = e[1], t[8] = 1, t }, e.fromRotation = function (t, e) { var n = Math.sin(e), i = Math.cos(e); return t[0] = i, t[1] = n, t[2] = 0, t[3] = -n, t[4] = i, t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1, t }, e.fromScaling = function (t, e) { return t[0] = e[0], t[1] = 0, t[2] = 0, t[3] = 0, t[4] = e[1], t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1, t }, e.fromMat2d = function (t, e) { return t[0] = e[0], t[1] = e[1], t[2] = 0, t[3] = e[2], t[4] = e[3], t[5] = 0, t[6] = e[4], t[7] = e[5], t[8] = 1, t }, e.fromQuat = function (t, e) { var n = e[0], i = e[1], r = e[2], o = e[3], a = n + n, s = i + i, u = r + r, l = n * a, c = i * a, h = i * s, p = r * a, f = r * s, d = r * u, g = o * a, v = o * s, y = o * u; return t[0] = 1 - h - d, t[3] = c - y, t[6] = p + v, t[1] = c + y, t[4] = 1 - l - d, t[7] = f - g, t[2] = p - v, t[5] = f + g, t[8] = 1 - l - h, t }, e.normalFromMat4 = function (t, e) { var n = e[0], i = e[1], r = e[2], o = e[3], a = e[4], s = e[5], u = e[6], l = e[7], c = e[8], h = e[9], p = e[10], f = e[11], d = e[12], g = e[13], v = e[14], y = e[15], m = n * s - i * a, x = n * u - r * a, _ = n * l - o * a, b = i * u - r * s, w = i * l - o * s, M = r * l - o * u, S = c * g - h * d, C = c * v - p * d, O = c * y - f * d, k = h * v - p * g, P = h * y - f * g, A = p * y - f * v, L = m * A - x * P + _ * k + b * O - w * C + M * S; if (!L) return null; return L = 1 / L, t[0] = (s * A - u * P + l * k) * L, t[1] = (u * O - a * A - l * C) * L, t[2] = (a * P - s * O + l * S) * L, t[3] = (r * P - i * A - o * k) * L, t[4] = (n * A - r * O + o * C) * L, t[5] = (i * O - n * P - o * S) * L, t[6] = (g * M - v * w + y * b) * L, t[7] = (v * _ - d * M - y * x) * L, t[8] = (d * w - g * _ + y * m) * L, t }, e.projection = function (t, e, n) { return t[0] = 2 / e, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = -2 / n, t[5] = 0, t[6] = -1, t[7] = 1, t[8] = 1, t }, e.str = function (t) { return "mat3(" + t[0] + ", " + t[1] + ", " + t[2] + ", " + t[3] + ", " + t[4] + ", " + t[5] + ", " + t[6] + ", " + t[7] + ", " + t[8] + ")" }, e.frob = function (t) { return Math.sqrt(Math.pow(t[0], 2) + Math.pow(t[1], 2) + Math.pow(t[2], 2) + Math.pow(t[3], 2) + Math.pow(t[4], 2) + Math.pow(t[5], 2) + Math.pow(t[6], 2) + Math.pow(t[7], 2) + Math.pow(t[8], 2)) }, e.add = function (t, e, n) { return t[0] = e[0] + n[0], t[1] = e[1] + n[1], t[2] = e[2] + n[2], t[3] = e[3] + n[3], t[4] = e[4] + n[4], t[5] = e[5] + n[5], t[6] = e[6] + n[6], t[7] = e[7] + n[7], t[8] = e[8] + n[8], t }, e.subtract = o, e.multiplyScalar = function (t, e, n) { return t[0] = e[0] * n, t[1] = e[1] * n, t[2] = e[2] * n, t[3] = e[3] * n, t[4] = e[4] * n, t[5] = e[5] * n, t[6] = e[6] * n, t[7] = e[7] * n, t[8] = e[8] * n, t }, e.multiplyScalarAndAdd = function (t, e, n, i) { return t[0] = e[0] + n[0] * i, t[1] = e[1] + n[1] * i, t[2] = e[2] + n[2] * i, t[3] = e[3] + n[3] * i, t[4] = e[4] + n[4] * i, t[5] = e[5] + n[5] * i, t[6] = e[6] + n[6] * i, t[7] = e[7] + n[7] * i, t[8] = e[8] + n[8] * i, t }, e.exactEquals = function (t, e) { return t[0] === e[0] && t[1] === e[1] && t[2] === e[2] && t[3] === e[3] && t[4] === e[4] && t[5] === e[5] && t[6] === e[6] && t[7] === e[7] && t[8] === e[8] }, e.equals = function (t, e) { var n = t[0], r = t[1], o = t[2], a = t[3], s = t[4], u = t[5], l = t[6], c = t[7], h = t[8], p = e[0], f = e[1], d = e[2], g = e[3], v = e[4], y = e[5], m = e[6], x = e[7], _ = e[8]; return Math.abs(n - p) <= i.EPSILON * Math.max(1, Math.abs(n), Math.abs(p)) && Math.abs(r - f) <= i.EPSILON * Math.max(1, Math.abs(r), Math.abs(f)) && Math.abs(o - d) <= i.EPSILON * Math.max(1, Math.abs(o), Math.abs(d)) && Math.abs(a - g) <= i.EPSILON * Math.max(1, Math.abs(a), Math.abs(g)) && Math.abs(s - v) <= i.EPSILON * Math.max(1, Math.abs(s), Math.abs(v)) && Math.abs(u - y) <= i.EPSILON * Math.max(1, Math.abs(u), Math.abs(y)) && Math.abs(l - m) <= i.EPSILON * Math.max(1, Math.abs(l), Math.abs(m)) && Math.abs(c - x) <= i.EPSILON * Math.max(1, Math.abs(c), Math.abs(x)) && Math.abs(h - _) <= i.EPSILON * Math.max(1, Math.abs(h), Math.abs(_)) }; var i = function (t) { if (t && t.__esModule) return t; var e = {}; if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]); return e.default = t, e }(n(41)); function r(t, e, n) { var i = e[0], r = e[1], o = e[2], a = e[3], s = e[4], u = e[5], l = e[6], c = e[7], h = e[8], p = n[0], f = n[1], d = n[2], g = n[3], v = n[4], y = n[5], m = n[6], x = n[7], _ = n[8]; return t[0] = p * i + f * a + d * l, t[1] = p * r + f * s + d * c, t[2] = p * o + f * u + d * h, t[3] = g * i + v * a + y * l, t[4] = g * r + v * s + y * c, t[5] = g * o + v * u + y * h, t[6] = m * i + x * a + _ * l, t[7] = m * r + x * s + _ * c, t[8] = m * o + x * u + _ * h, t } function o(t, e, n) { return t[0] = e[0] - n[0], t[1] = e[1] - n[1], t[2] = e[2] - n[2], t[3] = e[3] - n[3], t[4] = e[4] - n[4], t[5] = e[5] - n[5], t[6] = e[6] - n[6], t[7] = e[7] - n[7], t[8] = e[8] - n[8], t } e.mul = r, e.sub = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(4)), o = i.__importStar(n(0)); function a(t) { var e = 0; return o.each(t, (function (t) { e += t * t })), Math.sqrt(e) } function s(t, e) { return t.x * e.y + t.y * e.x } function u(t, e, n) { void 0 === n && (n = 1); var i = [t.x, t.y, n]; return r.vec3.transformMat3(i, i, e), { x: i[0], y: i[1] } } function l(t, e, n) { return t >= e && t <= n } e.dotProduct2D = s, e.angleTo = function (t, e) { var n = a(t), i = a(e), r = s(t, e); return Math.acos(r / n / i) }, e.crossProduct2D = function (t, e) { var n = a(t), i = a(e), r = s(t, e), o = Math.acos(r / n / i); return n * i * Math.sin(o) }, e.crossProduct3D = function (t, e) { var n = t.x, i = t.y, r = t.z, o = e.x, a = e.y, s = e.z; return { x: i * s - r * a, y: r * o - n * s, z: n * a - i * o } }, e.sub2D = function (t, e) { return { x: t.x - e.x, y: t.y - e.y } }, e.applyMatrix = u, e.isBetween = l; function c(t, e) { for (var n = !1, i = 0, r = e.length - 1; i < e.length; r = i++) { var o = e[i].x, a = e[i].y, s = e[r].x, u = e[r].y; a > t.y != u > t.y && t.x <= (s - o) * (t.y - a) / (u - a) + o && (n = !n) } return n } function h(t) { return t * t } function p(t, e) { return Math.sqrt(h(t.x - e.x) + h(t.y - e.y)) } function f(t, e, n) { var i = p(e, n); if (0 === i) return p(t, e); var r = ((t.x - e.x) * (n.x - e.x) + (t.y - e.y) * (n.y - e.y)) / i; r = Math.max(0, Math.min(1, r)); var o = p(t, { x: e.x + r * (n.x - e.x), y: e.y + r * (n.y - e.y) }); return Math.sqrt(o) } function d(t, e) { var n = 1 / 0; o.each(e, (function (e) { var i = Math.sqrt(p(e, t)); n > i && (n = i) })); for (var i = 0, r = e.length - 1; i < e.length; r = i++) { var a = e[i].x, s = e[i].y, u = e[r].x, l = e[r].y, c = f(t, { x: a, y: s }, { x: u, y: l }); n > c && (n = c) } return n } function g(t, e) { for (var n = 0, i = t; n < i.length; n++) { if (c(i[n], e)) return !0 } return !1 } e.getLineIntersect = function (t, e, n, i) { var r = n.x - t.x, o = n.y - t.y, a = e.x - t.x, s = e.y - t.y, u = i.x - n.x, c = i.y - n.y, h = a * c - s * u, p = null; if (h * h > .001 * (a * a + s * s) * (u * u + c * c)) { var f = (r * c - o * u) / h, d = (r * s - o * a) / h; l(f, 0, 1) && l(d, 0, 1) && (p = { x: t.x + f * a, y: t.y + f * s }) } return p }, e.isPointInPolygon = c, e.dist2 = p, e.distBetweenPoints = function (t, e) { return Math.sqrt(h(t.x - e.x) + h(t.y - e.y)) }, e.distBetweenPointLine = f, e.isPolygonIntersection = g, e.minDistBetweenConvexPolygon = function (t, e) { if (g(t, e)) return 0; var n = 1 / 0, i = 1 / 0; return o.each(t, (function (t) { var i = d(t, e); n > i && (n = i) })), o.each(e, (function (e) { var n = d(e, t); i > n && (i = n) })), Math.min(n, i) }, e.bboxOnRotate = function (t) { var e = t.getBBox(), n = e.minX, i = e.minY, r = e.tr.x - e.tl.x, o = e.bl.y - e.tl.y, a = t.attr("matrix"), s = [a[0], a[1], 0, a[3], a[4], 0, 0, 0, 1], l = u({ x: 0, y: 0 }, s); l.x += n, l.y += i; var c = u({ x: r, y: 0 }, s); c.x += n, c.y += i; var h = u({ x: 0, y: o }, s); h.x += n, h.y += i; var p = u({ x: r, y: o }, s); p.x += n, p.y += i; var f = [l, c, h, p]; f.sort((function (t, e) { return t.y - e.y })); var d = f[0].y, g = f[f.length - 1].y, v = [f[0], f[1]], y = [f[2], f[3]], m = v[0].x < v[1].x ? v[0] : v[1], x = v[0].x < v[1].x ? v[1] : v[0], _ = y[0].x < y[1].x ? y[0] : y[1], b = y[0].x < y[1].x ? y[1] : y[0]; f.sort((function (t, e) { return t.x - e.x })); var w = f[0].x, M = f[f.length - 1].x; return { width: M - w, height: g - d, left: w, right: M, top: d, bottom: g, topLeft: m, topRight: x, bottomLeft: _, bottomRight: b, centerX: w + (M - w) / 2, centerY: d + (g - d) / 2 } }; e.lineSimplification = function (t) { return t.length < 5 ? t : function t(e, n) { for (var i, r = -1 / 0, o = 0, a = e.length - 1, s = 1; s < a; s++) { var u = e[s], l = { start: e[0], end: e[a] }, c = f(u, l.start, l.end); c > r && (r = c, o = s) } if (r > n) { var h = t(e.slice(0, o + 1), n), p = t(e.slice(o, e.length), n); i = h.concat(p) } else i = [e[0], e[e.length - 1]]; return i }(t, 2) }, e.getMedian = function (t) { var e = o.clone(t); e.sort((function (t, e) { return t - e })); var n = Math.floor(e.length / 2); return e.length % 2 ? e[n] : (e[n - 1] + e[n]) / 2 }, e.getMean = function (t) { var e = 0; return o.each(t, (function (t) { e += t })), e / t.length }, e.sturges = function (t) { return Math.ceil(Math.log(t.length) / Math.LN2) + 1 } }, function (t, e, n) { "use strict"; n.r(e); var i = n(0), r = /rgba?\(([\s.,0-9]+)\)/, o = function (t, e, n, i) { return t[i] + (e[i] - t[i]) * n }; function a(t) { return "#" + l(t[0]) + l(t[1]) + l(t[2]) } var s, u = function (t) { return [parseInt(t.substr(1, 2), 16), parseInt(t.substr(3, 2), 16), parseInt(t.substr(5, 2), 16)] }, l = function (t) { var e = Math.round(t).toString(16); return 1 === e.length ? "0" + e : e }, c = function (t) { if ("#" === t[0] && 7 === t.length) return t; var e; s || ((e = document.createElement("i")).title = "Web Colour Picker", e.style.display = "none", document.body.appendChild(e), s = e), s.style.color = t; var n = document.defaultView.getComputedStyle(s, "").getPropertyValue("color"); return n = a(r.exec(n)[1].split(/\s*,\s*/).map((function (t) { return Number(t) }))) }; e.default = { rgb2arr: u, gradient: function (t) { var e = Object(i.isString)(t) ? t.split("-") : t, n = Object(i.map)(e, (function (t) { return u(-1 === t.indexOf("#") ? c(t) : t) })); return function (t) { return function (t, e) { var n = isNaN(Number(e)) || e < 0 ? 0 : e > 1 ? 1 : Number(e), i = t.length - 1, r = Math.floor(i * n), s = i * n - r, u = t[r], l = r === i ? u : t[r + 1]; return a([o(u, l, s, 0), o(u, l, s, 1), o(u, l, s, 2)]) }(n, t) } }, toRGB: Object(i.memoize)(c) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(57); e.extractScale = function (t, e) { if (!e) return t; var n, i, o, a, s; Object.prototype.hasOwnProperty.call(e, "tickCount") && (t.tickCount = e.tickCount), Object.prototype.hasOwnProperty.call(e, "type") && "dateTime" !== e.type && (t.type = e.type), Object.prototype.hasOwnProperty.call(e, "tickInterval") && ("time" === e.type ? t.tickInterval = (n = e.tickInterval, i = r.timeIntervals, o = n.split(" "), a = i[o[1]], s = parseInt(o[0], 10), [a.format, s * a.value]) : t.tickInterval = e.tickInterval), "time" === e.type && e.mask && (t.mask = e.mask), Object.prototype.hasOwnProperty.call(e, "min") && (t.min = e.min), Object.prototype.hasOwnProperty.call(e, "max") && (t.max = e.max), Object.prototype.hasOwnProperty.call(e, "nice") && (t.nice = e.nice), Object.prototype.hasOwnProperty.call(e, "formatter") && (t.formatter = e.formatter), e.tickMethod && (t.tickMethod = e.tickMethod) }, e.trySetScaleMinToZero = function (t, e) { var n = i.filter(e, (function (t) { return i.isNumber(t) })), r = Math.min.apply(Math, n), o = Math.max.apply(Math, n); r > 0 ? i.isNil(t.min) && (t.min = 0) : o <= 0 && i.isNil(t.max) && (t.max = 0) } }, function (t, e, n) { "use strict"; n(40); var i = n(27), r = n.n(i); n(56); function o(t, e) { for (var n = [], i = 0, r = t.length; r - 2 * !e > i; i += 2) { var o = [{ x: +t[i - 2], y: +t[i - 1] }, { x: +t[i], y: +t[i + 1] }, { x: +t[i + 2], y: +t[i + 3] }, { x: +t[i + 4], y: +t[i + 5] }]; e ? i ? r - 4 === i ? o[3] = { x: +t[0], y: +t[1] } : r - 2 === i && (o[2] = { x: +t[0], y: +t[1] }, o[3] = { x: +t[2], y: +t[3] }) : o[0] = { x: +t[r - 2], y: +t[r - 1] } : r - 4 === i ? o[3] = o[2] : i || (o[0] = { x: +t[i], y: +t[i + 1] }), n.push(["C", (-o[0].x + 6 * o[1].x + o[2].x) / 6, (-o[0].y + 6 * o[1].y + o[2].y) / 6, (o[1].x + 6 * o[2].x - o[3].x) / 6, (o[1].y + 6 * o[2].y - o[3].y) / 6, o[2].x, o[2].y]) } return n } n(109); n(0); var a = "\t\n\v\f\r   ᠎             　\u2028\u2029", s = new RegExp("([a-z])[" + a + ",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[" + a + "]*,?[" + a + "]*)+)", "ig"), u = new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[" + a + "]*,?[" + a + "]*", "ig"); function l(t) { if (!t) return null; if (r()(t)) return t; var e = { a: 7, c: 6, o: 2, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, u: 3, z: 0 }, n = []; return String(t).replace(s, (function (t, i, r) { var o = [], a = i.toLowerCase(); if (r.replace(u, (function (t, e) { e && o.push(+e) })), "m" === a && o.length > 2 && (n.push([i].concat(o.splice(0, 2))), a = "l", i = "m" === i ? "l" : "L"), "o" === a && 1 === o.length && n.push([i, o[0]]), "r" === a) n.push([i].concat(o)); else for (; o.length >= e[a] && (n.push([i].concat(o.splice(0, e[a]))), e[a]);); return "" })), n } var c = /[a-z]/; function h(t, e) { return [e[0] + (e[0] - t[0]), e[1] + (e[1] - t[1])] } function p(t) { var e = l(t); if (!e || !e.length) return [["M", 0, 0]]; for (var n = !1, i = 0; i < e.length; i++) { var r = e[i][0]; if (c.test(r) || ["V", "H", "T", "S"].indexOf(r) >= 0) { n = !0; break } } if (!n) return e; var o = [], a = 0, s = 0, u = 0, p = 0, f = 0, d = e[0]; "M" !== d[0] && "m" !== d[0] || (u = a = +d[1], p = s = +d[2], f++ , o[0] = ["M", a, s]); i = f; for (var g = e.length; i < g; i++) { var v = e[i], y = o[i - 1], m = [], x = (r = v[0]).toUpperCase(); if (r !== x) switch (m[0] = x, x) { case "A": m[1] = v[1], m[2] = v[2], m[3] = v[3], m[4] = v[4], m[5] = v[5], m[6] = +v[6] + a, m[7] = +v[7] + s; break; case "V": m[1] = +v[1] + s; break; case "H": m[1] = +v[1] + a; break; case "M": u = +v[1] + a, p = +v[2] + s; break; default: for (var _ = 1, b = v.length; _ < b; _++)m[_] = +v[_] + (_ % 2 ? a : s) } else m = e[i]; switch (x) { case "Z": a = +u, s = +p; break; case "H": m = ["L", a = m[1], s]; break; case "V": m = ["L", a, s = m[1]]; break; case "T": a = m[1], s = m[2]; var w = h([y[1], y[2]], [y[3], y[4]]); m = ["Q", w[0], w[1], a, s]; break; case "S": a = m[m.length - 2], s = m[m.length - 1]; var M = y.length, S = h([y[M - 4], y[M - 3]], [y[M - 2], y[M - 1]]); m = ["C", S[0], S[1], m[1], m[2], a, s]; break; case "M": u = m[m.length - 2], p = m[m.length - 1]; break; default: a = m[m.length - 2], s = m[m.length - 1] }o.push(m) } return o } var f = function t(e, n, i, r, o, a, s, u, l, c) { i === r && (i += 1); var h, p, f, d, g, v = 120 * Math.PI / 180, y = Math.PI / 180 * (+o || 0), m = [], x = function (t, e, n) { return { x: t * Math.cos(n) - e * Math.sin(n), y: t * Math.sin(n) + e * Math.cos(n) } }; if (c) p = c[0], f = c[1], d = c[2], g = c[3]; else { e = (h = x(e, n, -y)).x, n = h.y, u = (h = x(u, l, -y)).x, l = h.y, e === u && n === l && (u += 1, l += 1); var _ = (e - u) / 2, b = (n - l) / 2, w = _ * _ / (i * i) + b * b / (r * r); w > 1 && (i *= w = Math.sqrt(w), r *= w); var M = i * i, S = r * r, C = (a === s ? -1 : 1) * Math.sqrt(Math.abs((M * S - M * b * b - S * _ * _) / (M * b * b + S * _ * _))); d = C * i * b / r + (e + u) / 2, g = C * -r * _ / i + (n + l) / 2, p = Math.asin(Number(((n - g) / r).toFixed(9))), f = Math.asin(Number(((l - g) / r).toFixed(9))), p = e < d ? Math.PI - p : p, f = u < d ? Math.PI - f : f, p < 0 && (p = 2 * Math.PI + p), f < 0 && (f = 2 * Math.PI + f), s && p > f && (p -= 2 * Math.PI), !s && f > p && (f -= 2 * Math.PI) } var O = f - p; if (Math.abs(O) > v) { var k = f, P = u, A = l; f = p + v * (s && f > p ? 1 : -1), m = t(u = d + i * Math.cos(f), l = g + r * Math.sin(f), i, r, o, 0, s, P, A, [f, k, d, g]) } O = f - p; var L = Math.cos(p), T = Math.sin(p), D = Math.cos(f), j = Math.sin(f), I = Math.tan(O / 4), B = 4 / 3 * i * I, E = 4 / 3 * r * I, F = [e, n], R = [e + B * T, n - E * L], z = [u + B * j, l - E * D], N = [u, l]; if (R[0] = 2 * F[0] - R[0], R[1] = 2 * F[1] - R[1], c) return [R, z, N].concat(m); for (var Y = [], H = 0, G = (m = [R, z, N].concat(m).join().split(",")).length; H < G; H++)Y[H] = H % 2 ? x(m[H - 1], m[H], y).y : x(m[H], m[H + 1], y).x; return Y }, d = function (t, e, n, i) { return [t, e, n, i, n, i] }, g = function (t, e, n, i, r, o) { return [1 / 3 * t + 2 / 3 * n, 1 / 3 * e + 2 / 3 * i, 1 / 3 * r + 2 / 3 * n, 1 / 3 * o + 2 / 3 * i, r, o] }; function v(t, e) { var n, i = p(t), r = e && p(e), o = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, a = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, s = [], u = [], l = "", c = "", h = function (t, e, n) { var i, r; if (!t) return ["C", e.x, e.y, e.x, e.y, e.x, e.y]; switch (!(t[0] in { T: 1, Q: 1 }) && (e.qx = e.qy = null), t[0]) { case "M": e.X = t[1], e.Y = t[2]; break; case "A": t = ["C"].concat(f.apply(0, [e.x, e.y].concat(t.slice(1)))); break; case "S": "C" === n || "S" === n ? (i = 2 * e.x - e.bx, r = 2 * e.y - e.by) : (i = e.x, r = e.y), t = ["C", i, r].concat(t.slice(1)); break; case "T": "Q" === n || "T" === n ? (e.qx = 2 * e.x - e.qx, e.qy = 2 * e.y - e.qy) : (e.qx = e.x, e.qy = e.y), t = ["C"].concat(g(e.x, e.y, e.qx, e.qy, t[1], t[2])); break; case "Q": e.qx = t[1], e.qy = t[2], t = ["C"].concat(g(e.x, e.y, t[1], t[2], t[3], t[4])); break; case "L": t = ["C"].concat(d(e.x, e.y, t[1], t[2])); break; case "H": t = ["C"].concat(d(e.x, e.y, t[1], e.y)); break; case "V": t = ["C"].concat(d(e.x, e.y, e.x, t[1])); break; case "Z": t = ["C"].concat(d(e.x, e.y, e.X, e.Y)) }return t }, v = function (t, e) { if (t[e].length > 7) { t[e].shift(); for (var o = t[e]; o.length;)s[e] = "A", r && (u[e] = "A"), t.splice(e++, 0, ["C"].concat(o.splice(0, 6))); t.splice(e, 1), n = Math.max(i.length, r && r.length || 0) } }, y = function (t, e, o, a, s) { t && e && "M" === t[s][0] && "M" !== e[s][0] && (e.splice(s, 0, ["M", a.x, a.y]), o.bx = 0, o.by = 0, o.x = t[s][1], o.y = t[s][2], n = Math.max(i.length, r && r.length || 0)) }; n = Math.max(i.length, r && r.length || 0); for (var m = 0; m < n; m++) { i[m] && (l = i[m][0]), "C" !== l && (s[m] = l, m && (c = s[m - 1])), i[m] = h(i[m], o, c), "A" !== s[m] && "C" === l && (s[m] = "C"), v(i, m), r && (r[m] && (l = r[m][0]), "C" !== l && (u[m] = l, m && (c = u[m - 1])), r[m] = h(r[m], a, c), "A" !== u[m] && "C" === l && (u[m] = "C"), v(r, m)), y(i, r, o, a, m), y(r, i, a, o, m); var x = i[m], _ = r && r[m], b = x.length, w = r && _.length; o.x = x[b - 2], o.y = x[b - 1], o.bx = parseFloat(x[b - 4]) || o.x, o.by = parseFloat(x[b - 3]) || o.y, a.bx = r && (parseFloat(_[w - 4]) || a.x), a.by = r && (parseFloat(_[w - 3]) || a.y), a.x = r && _[w - 2], a.y = r && _[w - 1] } return r ? [i, r] : i } n.d(e, "a", (function () { return o })), n.d(e, "b", (function () { return l })), n.d(e, "c", (function () { return v })) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.forEach = e.sqrLen = e.sqrDist = e.dist = e.div = e.mul = e.sub = e.len = void 0, e.create = r, e.clone = function (t) { var e = new i.ARRAY_TYPE(2); return e[0] = t[0], e[1] = t[1], e }, e.fromValues = function (t, e) { var n = new i.ARRAY_TYPE(2); return n[0] = t, n[1] = e, n }, e.copy = function (t, e) { return t[0] = e[0], t[1] = e[1], t }, e.set = function (t, e, n) { return t[0] = e, t[1] = n, t }, e.add = function (t, e, n) { return t[0] = e[0] + n[0], t[1] = e[1] + n[1], t }, e.subtract = o, e.multiply = a, e.divide = s, e.ceil = function (t, e) { return t[0] = Math.ceil(e[0]), t[1] = Math.ceil(e[1]), t }, e.floor = function (t, e) { return t[0] = Math.floor(e[0]), t[1] = Math.floor(e[1]), t }, e.min = function (t, e, n) { return t[0] = Math.min(e[0], n[0]), t[1] = Math.min(e[1], n[1]), t }, e.max = function (t, e, n) { return t[0] = Math.max(e[0], n[0]), t[1] = Math.max(e[1], n[1]), t }, e.round = function (t, e) { return t[0] = Math.round(e[0]), t[1] = Math.round(e[1]), t }, e.scale = function (t, e, n) { return t[0] = e[0] * n, t[1] = e[1] * n, t }, e.scaleAndAdd = function (t, e, n, i) { return t[0] = e[0] + n[0] * i, t[1] = e[1] + n[1] * i, t }, e.distance = u, e.squaredDistance = l, e.length = c, e.squaredLength = h, e.negate = function (t, e) { return t[0] = -e[0], t[1] = -e[1], t }, e.inverse = function (t, e) { return t[0] = 1 / e[0], t[1] = 1 / e[1], t }, e.normalize = function (t, e) { var n = e[0], i = e[1], r = n * n + i * i; r > 0 && (r = 1 / Math.sqrt(r), t[0] = e[0] * r, t[1] = e[1] * r); return t }, e.dot = function (t, e) { return t[0] * e[0] + t[1] * e[1] }, e.cross = function (t, e, n) { var i = e[0] * n[1] - e[1] * n[0]; return t[0] = t[1] = 0, t[2] = i, t }, e.lerp = function (t, e, n, i) { var r = e[0], o = e[1]; return t[0] = r + i * (n[0] - r), t[1] = o + i * (n[1] - o), t }, e.random = function (t, e) { e = e || 1; var n = 2 * i.RANDOM() * Math.PI; return t[0] = Math.cos(n) * e, t[1] = Math.sin(n) * e, t }, e.transformMat2 = function (t, e, n) { var i = e[0], r = e[1]; return t[0] = n[0] * i + n[2] * r, t[1] = n[1] * i + n[3] * r, t }, e.transformMat2d = function (t, e, n) { var i = e[0], r = e[1]; return t[0] = n[0] * i + n[2] * r + n[4], t[1] = n[1] * i + n[3] * r + n[5], t }, e.transformMat3 = function (t, e, n) { var i = e[0], r = e[1]; return t[0] = n[0] * i + n[3] * r + n[6], t[1] = n[1] * i + n[4] * r + n[7], t }, e.transformMat4 = function (t, e, n) { var i = e[0], r = e[1]; return t[0] = n[0] * i + n[4] * r + n[12], t[1] = n[1] * i + n[5] * r + n[13], t }, e.rotate = function (t, e, n, i) { var r = e[0] - n[0], o = e[1] - n[1], a = Math.sin(i), s = Math.cos(i); return t[0] = r * s - o * a + n[0], t[1] = r * a + o * s + n[1], t }, e.angle = function (t, e) { var n = t[0], i = t[1], r = e[0], o = e[1], a = n * n + i * i; a > 0 && (a = 1 / Math.sqrt(a)); var s = r * r + o * o; s > 0 && (s = 1 / Math.sqrt(s)); var u = (n * r + i * o) * a * s; return u > 1 ? 0 : u < -1 ? Math.PI : Math.acos(u) }, e.str = function (t) { return "vec2(" + t[0] + ", " + t[1] + ")" }, e.exactEquals = function (t, e) { return t[0] === e[0] && t[1] === e[1] }, e.equals = function (t, e) { var n = t[0], r = t[1], o = e[0], a = e[1]; return Math.abs(n - o) <= i.EPSILON * Math.max(1, Math.abs(n), Math.abs(o)) && Math.abs(r - a) <= i.EPSILON * Math.max(1, Math.abs(r), Math.abs(a)) }; var i = function (t) { if (t && t.__esModule) return t; var e = {}; if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]); return e.default = t, e }(n(41)); function r() { var t = new i.ARRAY_TYPE(2); return i.ARRAY_TYPE != Float32Array && (t[0] = 0, t[1] = 0), t } function o(t, e, n) { return t[0] = e[0] - n[0], t[1] = e[1] - n[1], t } function a(t, e, n) { return t[0] = e[0] * n[0], t[1] = e[1] * n[1], t } function s(t, e, n) { return t[0] = e[0] / n[0], t[1] = e[1] / n[1], t } function u(t, e) { var n = e[0] - t[0], i = e[1] - t[1]; return Math.sqrt(n * n + i * i) } function l(t, e) { var n = e[0] - t[0], i = e[1] - t[1]; return n * n + i * i } function c(t) { var e = t[0], n = t[1]; return Math.sqrt(e * e + n * n) } function h(t) { var e = t[0], n = t[1]; return e * e + n * n } var p; e.len = c, e.sub = o, e.mul = a, e.div = s, e.dist = u, e.sqrDist = l, e.sqrLen = h, e.forEach = (p = r(), function (t, e, n, i, r, o) { var a = void 0, s = void 0; for (e || (e = 2), n || (n = 0), s = i ? Math.min(i * e + n, t.length) : t.length, a = n; a < s; a += e)p[0] = t[a], p[1] = t[a + 1], r(p, p, o), t[a] = p[0], t[a + 1] = p[1]; return t }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(23); e.getGlobalTheme = i.getGlobalTheme, e.registerGlobalTheme = i.registerGlobalTheme; var r = n(141); e.getTheme = r.getTheme, e.registerTheme = r.registerTheme; var o = n(142); e.convertToG2Theme = o.convertToG2Theme }, function (t, e, n) { "use strict"; function i(t) { var e; return 1 === (e = (e = Math.round(t)).toString(16)).length && (e = "0" + t), e } Object.defineProperty(e, "__esModule", { value: !0 }), e.rgb2arr = function (t) { var e = []; return e.push(parseInt(t.substr(1, 2), 16)), e.push(parseInt(t.substr(3, 2), 16)), e.push(parseInt(t.substr(5, 2), 16)), e }, e.toHex = i, e.arr2rgb = function (t) { return "#" + (i(t[0]) + i(t[1]) + i(t[2])) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = function () { function t() { this._events = {} } return t.prototype.on = function (t, e, n) { return this._events[t] || (this._events[t] = []), this._events[t].push({ callback: e, once: !!n }), this }, t.prototype.once = function (t, e) { return this.on(t, e, !0), this }, t.prototype.emit = function (t) { for (var e = this, n = [], i = 1; i < arguments.length; i++)n[i - 1] = arguments[i]; var r = this._events[t] || [], o = this._events["*"] || [], a = function (i) { for (var r = i.length, o = 0; o < r; o++) { var a = i[o], s = a.callback; a.once && (i.splice(o, 1), 0 === i.length && delete e._events[t], r-- , o--), s.apply(e, n) } }; a(r), a(o) }, t.prototype.off = function (t, e) { if (t) if (e) { for (var n = this._events[t] || [], i = n.length, r = 0; r < i; r++)n[r].callback === e && (n.splice(r, 1), i-- , r--); 0 === n.length && delete this._events[t] } else delete this._events[t]; else this._events = {}; return this }, t.prototype.getEvents = function () { return this._events }, t }(); e.default = i }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(74), o = n(140), a = { default: r.DEFAULT_GLOBAL_THEME, dark: o.DEFAULT_DARK_THEME }; function s(t) { void 0 === t && (t = "default"); var e = a[t.toLowerCase()]; return e || (console.warn("error in theme: Can't find the theme named %s. Please register theme first.", t), r.DEFAULT_GLOBAL_THEME) } e.registerGlobalTheme = function (t, e) { var n = s(); a[t.toLowerCase()] = i.deepMix({}, n, e) }, e.getGlobalTheme = s }, function (t, e, n) { "use strict"; n.r(e); var i = n(4), r = n(0), o = function () { function t(t) { this.type = "coordinate", this.isRect = !1, this.isHelix = !1, this.isPolar = !1, this.isReflectX = !1, this.isReflectY = !1; var e = t.start, n = t.end, i = t.matrix, r = void 0 === i ? [1, 0, 0, 0, 1, 0, 0, 0, 1] : i, o = t.isTransposed, a = void 0 !== o && o; this.start = e, this.end = n, this.matrix = r, this.isTransposed = a } return t.prototype.initial = function () { this.center = { x: (this.start.x + this.end.x) / 2, y: (this.start.y + this.end.y) / 2 }, this.width = Math.abs(this.end.x - this.start.x), this.height = Math.abs(this.end.y - this.start.y) }, t.prototype.update = function (t) { r.assign(this, t), this.initial() }, t.prototype.convertDim = function (t, e) { var n, i = this[e], r = i.start, o = i.end; return this.isReflect(e) && (r = (n = [o, r])[0], o = n[1]), r + t * (o - r) }, t.prototype.invertDim = function (t, e) { var n, i = this[e], r = i.start, o = i.end; return this.isReflect(e) && (r = (n = [o, r])[0], o = n[1]), (t - r) / (o - r) }, t.prototype.applyMatrix = function (t, e, n) { void 0 === n && (n = 0); var r = this.matrix, o = [t, e, n]; return i.vec3.transformMat3(o, o, r), o }, t.prototype.invertMatrix = function (t, e, n) { void 0 === n && (n = 0); var r = this.matrix, o = i.mat3.invert([], r), a = [t, e, n]; return i.vec3.transformMat3(a, a, o), a }, t.prototype.convert = function (t) { var e = this.convertPoint(t), n = e.x, i = e.y, r = this.applyMatrix(n, i, 1); return { x: r[0], y: r[1] } }, t.prototype.invert = function (t) { var e = this.invertMatrix(t.x, t.y, 1); return this.invertPoint({ x: e[0], y: e[1] }) }, t.prototype.rotate = function (t) { var e = this.matrix, n = this.center; return i.mat3.translate(e, e, [-n.x, -n.y]), i.mat3.rotate(e, e, t), i.mat3.translate(e, e, [n.x, n.y]), this }, t.prototype.reflect = function (t) { return "x" === t ? this.isReflectX = !this.isReflectX : this.isReflectY = !this.isReflectY, this }, t.prototype.scale = function (t, e) { var n = this.matrix, r = this.center; return i.mat3.translate(n, n, [-r.x, -r.y]), i.mat3.scale(n, n, [t, e]), i.mat3.translate(n, n, [r.x, r.y]), this }, t.prototype.translate = function (t, e) { var n = this.matrix; return i.mat3.translate(n, n, [t, e]), this }, t.prototype.transpose = function () { return this.isTransposed = !this.isTransposed, this }, t.prototype.getCenter = function () { return this.center }, t.prototype.getWidth = function () { return this.width }, t.prototype.getHeight = function () { return this.height }, t.prototype.isReflect = function (t) { return "x" === t ? this.isReflectX : this.isReflectY }, t }(), a = n(1), s = function (t) { function e(e) { var n = t.call(this, e) || this; return n.isRect = !0, n.type = "cartesian", n.initial(), n } return Object(a.__extends)(e, t), e.prototype.initial = function () { t.prototype.initial.call(this); var e = this.start, n = this.end; this.x = { start: e.x, end: n.x }, this.y = { start: e.y, end: n.y } }, e.prototype.convertPoint = function (t) { var e, n = t.x, i = t.y; return this.isTransposed && (n = (e = [i, n])[0], i = e[1]), { x: this.convertDim(n, "x"), y: this.convertDim(i, "y") } }, e.prototype.invertPoint = function (t) { var e, n = this.invertDim(t.x, "x"), i = this.invertDim(t.y, "y"); return this.isTransposed && (n = (e = [i, n])[0], i = e[1]), { x: n, y: i } }, e }(o), u = function (t) { function e(e) { var n = t.call(this, e) || this; n.isHelix = !0, n.type = "helix"; var i = e.startAngle, r = void 0 === i ? 1.25 * Math.PI : i, o = e.endAngle, a = void 0 === o ? 7.25 * Math.PI : o, s = e.innerRadius, u = void 0 === s ? 0 : s, l = e.radius; return n.startAngle = r, n.endAngle = a, n.innerRadius = u, n.radius = l, n.initial(), n } return Object(a.__extends)(e, t), e.prototype.initial = function () { t.prototype.initial.call(this); var e = (this.endAngle - this.startAngle) / (2 * Math.PI) + 1, n = Math.min(this.width, this.height) / 2; this.radius && this.radius >= 0 && this.radius <= 1 && (n *= this.radius), this.d = Math.floor(n * (1 - this.innerRadius) / e), this.a = this.d / (2 * Math.PI), this.x = { start: this.startAngle, end: this.endAngle }, this.y = { start: this.innerRadius * n, end: this.innerRadius * n + .99 * this.d } }, e.prototype.convertPoint = function (t) { var e, n = t.x, i = t.y; this.isTransposed && (n = (e = [i, n])[0], i = e[1]); var r = this.convertDim(n, "x"), o = this.a * r, a = this.convertDim(i, "y"); return { x: this.center.x + Math.cos(r) * (o + a), y: this.center.y + Math.sin(r) * (o + a) } }, e.prototype.invertPoint = function (t) { var e, n = this.d + this.y.start, o = i.vec2.subtract([], [t.x, t.y], [this.center.x, this.center.y]), a = i.vec2.angleTo(o, [1, 0], !0), s = a * this.a; i.vec2.length(o) < s && (s = i.vec2.length(o)), a = 2 * Math.floor((i.vec2.length(o) - s) / n) * Math.PI + a; var u = this.a * a, l = i.vec2.length(o) - u; l = Object(r.isNumberEqual)(l, 0) ? 0 : l; var c = this.invertDim(a, "x"), h = this.invertDim(l, "y"); return c = Object(r.isNumberEqual)(c, 0) ? 0 : c, h = Object(r.isNumberEqual)(h, 0) ? 0 : h, this.isTransposed && (c = (e = [h, c])[0], h = e[1]), { x: c, y: h } }, e }(o), l = function (t) { function e(e) { var n = t.call(this, e) || this; n.isPolar = !0, n.type = "polar"; var i = e.startAngle, r = void 0 === i ? -Math.PI / 2 : i, o = e.endAngle, a = void 0 === o ? 3 * Math.PI / 2 : o, s = e.innerRadius, u = void 0 === s ? 0 : s, l = e.radius; return n.startAngle = r, n.endAngle = a, n.innerRadius = u, n.radius = l, n.initial(), n } return Object(a.__extends)(e, t), e.prototype.initial = function () { for (t.prototype.initial.call(this); this.endAngle < this.startAngle;)this.endAngle += 2 * Math.PI; var e, n = this.getOneBox(), i = n.maxX - n.minX, r = n.maxY - n.minY, o = Math.abs(n.minX) / i, a = Math.abs(n.minY) / r; this.height / r > this.width / i ? (e = this.width / i, this.circleCenter = { x: this.center.x - (.5 - o) * this.width, y: this.center.y - (.5 - a) * e * r }) : (e = this.height / r, this.circleCenter = { x: this.center.x - (.5 - o) * e * i, y: this.center.y - (.5 - a) * this.height }), this.polarRadius = this.radius, this.radius ? this.radius > 0 && this.radius <= 1 ? this.polarRadius = e * this.radius : (this.radius <= 0 || this.radius > e) && (this.polarRadius = e) : this.polarRadius = e, this.x = { start: this.startAngle, end: this.endAngle }, this.y = { start: this.innerRadius * this.polarRadius, end: this.polarRadius } }, e.prototype.getRadius = function () { return this.polarRadius }, e.prototype.convertPoint = function (t) { var e, n = this.getCenter(), i = t.x, r = t.y; return this.isTransposed && (i = (e = [r, i])[0], r = e[1]), i = this.convertDim(i, "x"), r = this.convertDim(r, "y"), { x: n.x + Math.cos(i) * r, y: n.y + Math.sin(i) * r } }, e.prototype.invertPoint = function (t) { var e = this.getCenter(), n = [t.x - e.x, t.y - e.y], o = [1, 0, 0, 0, 1, 0, 0, 0, 1]; i.mat3.rotate(o, o, this.startAngle); var a = [1, 0, 0]; i.vec3.transformMat3(a, a, o), a = [a[0], a[1]]; var s = i.vec2.angleTo(a, n, this.endAngle < this.startAngle); Object(r.isNumberEqual)(s, 2 * Math.PI) && (s = 0); var u = i.vec2.length(n), l = s / (this.endAngle - this.startAngle); l = this.endAngle - this.startAngle > 0 ? l : -l; var c = this.invertDim(u, "y"), h = { x: 0, y: 0 }; return h.x = this.isTransposed ? c : l, h.y = this.isTransposed ? l : c, h }, e.prototype.getCenter = function () { return this.circleCenter }, e.prototype.getOneBox = function () { var t = this.startAngle, e = this.endAngle; if (Math.abs(e - t) >= 2 * Math.PI) return { minX: -1, maxX: 1, minY: -1, maxY: 1 }; for (var n = [0, Math.cos(t), Math.cos(e)], i = [0, Math.sin(t), Math.sin(e)], r = Math.min(t, e); r < Math.max(t, e); r += Math.PI / 18)n.push(Math.cos(r)), i.push(Math.sin(r)); return { minX: Math.min.apply(Math, n), maxX: Math.max.apply(Math, n), minY: Math.min.apply(Math, i), maxY: Math.max.apply(Math, i) } }, e }(o), c = {}, h = function (t) { return c[t.toLowerCase()] }, p = function (t, e) { c[t.toLowerCase()] = e }; n.d(e, "getCoordinate", (function () { return h })), n.d(e, "registerCoordinate", (function () { return p })), n.d(e, "Coordinate", (function () { return o })), p("rect", s), p("cartesian", s), p("polar", l), p("helix", u) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(42); e.Legend = i.default; var r = n(122); e.Size = r.Size, e.Color = r.Color; var o = n(126); e.CanvasCategory = o.CanvasCategory, e.HtmlCategory = o.HtmlCategory }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.default = function (t) { t.attr("text", "") } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(62); e.default = function (t) { return Array.isArray ? Array.isArray(t) : i.default(t, "Array") } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(22)), o = i.__importStar(n(2)), a = i.__importStar(n(0)), s = n(10), u = function (t) { function e(e) { var n = t.call(this) || this; return n.layers = [], n.destroyed = !1, n.visibility = !0, n.rendered = !1, n.eventHandlers = [], n.options = n.getOptions(e), n.processOptions(n.options), n.container = new o.Group, n } return i.__extends(e, t), e.prototype.processOptions = function (t) { this.id = t.id, this.x = t.x, this.y = t.y, this.width = t.width, this.height = t.height, this.canvas = t.canvas, this.parent = t.parent }, e.prototype.updateConfig = function (t) { this.options = a.deepMix({}, this.options, t), this.processOptions(this.options) }, e.prototype.beforeInit = function () { }, e.prototype.init = function () { this.layerBBox = this.getLayerBBox(), this.layerRegion = this.getLayerRegion(), this.eachLayer((function (t) { t.init() })) }, e.prototype.afterInit = function () { }, e.prototype.render = function () { this.rendered || (this.parent ? this.parent.container.add(this.container) : this.canvas.add(this.container)), this.rendered = !0, this.beforeInit(), this.init(), this.afterInit(), this.container.transform([["t", this.x, this.y]]), this.eachLayer((function (t) { t.render() })), this.canvas.draw() }, e.prototype.clear = function () { this.eachLayer((function (t) { t.destroy() })), this.layers = [], this.container.clear() }, e.prototype.destroy = function () { var t = this; this.eachLayer((function (t) { t.destroy() })), a.each(this.eventHandlers, (function (e) { t.off(e.eventName, e.handler) })), this.container.remove(!0), this.destroyed = !0 }, e.prototype.show = function () { this.container.set("visible", !0), this.visibility = !0 }, e.prototype.hide = function () { this.container.set("visible", !1), this.visibility = !1 }, e.prototype.addLayer = function (t) { a.findIndex(this.layers, (function (e) { return e === t })) < 0 && (t.parent !== this && (t.parent = this, t.init()), this.layers.push(t)) }, e.prototype.removeLayer = function (t) { var e = a.findIndex(this.layers, (function (e) { return e === t })); e >= 0 && this.layers.splice(e, 1) }, e.prototype.updateBBox = function (t, e) { void 0 === e && (e = !1); var n = { x: this.x, y: this.y, width: this.width, height: this.height }, i = a.deepMix({}, n, t); this.x = i.x, this.y = i.y, this.width = i.width, this.height = i.height, this.layerBBox = this.getLayerBBox(), this.layerRegion = this.getLayerRegion(), this.render(), e && this.eachLayer((function (t) { t.updateBBoxByParent(), t.render() })), this.canvas.draw() }, e.prototype.updateBBoxByParent = function () { var t = this.layerRegion; this.x = this.parent.x + this.parent.width * t.start.x, this.y = this.parent.y + this.parent.height * t.start.y, this.width = this.parent.width * (t.end.x - t.start.x), this.height = this.parent.height * (t.end.y - t.start.y), this.layerBBox = this.getLayerBBox() }, e.prototype.getGlobalPosition = function () { for (var t = this.x, e = this.y, n = this.parent; n;)t += n.x, e += n.y, n = n.parent; return { x: t, y: e } }, e.prototype.getGlobalBBox = function () { var t = this.getGlobalPosition(); return new o.BBox(t.x, t.y, this.width, this.height) }, e.prototype.getOptions = function (t) { var e = 0, n = 0; t.parent && (e = t.parent.width, n = t.parent.height); var i = { x: 0, y: 0, width: e, height: n }; return a.deepMix({}, i, t) }, e.prototype.eachLayer = function (t) { a.each(this.layers, t) }, e.prototype.parseEvents = function (t) { var e = this, n = a.keys(s.LAYER_EVENT_MAP); a.each(t, (function (t, i) { if (a.contains(n, i) && a.isFunction(t)) { var r = s.LAYER_EVENT_MAP[i] || i, o = t; e.on(r, o), e.eventHandlers.push({ name: r, handler: o }) } })) }, e.prototype.getLayerBBox = function () { return new o.BBox(this.x, this.y, this.width, this.height) }, e.prototype.getLayerRegion = function () { if (this.parent) { var t = this.parent.width, e = this.parent.height, n = this.parent.x, i = this.parent.y; return { start: { x: (this.x - n) / t, y: (this.y - i) / e }, end: { x: (this.x + this.width - n) / t, y: (this.y + this.height - i) / e } } } return { start: { x: 0, y: 0 }, end: { x: 1, y: 1 } } }, e }(r.default); e.default = u }, function (t, e, n) { "use strict"; e.__esModule = !0, e.default = function (t, e, n) { var i; try { i = window.getComputedStyle ? window.getComputedStyle(t, null)[e] : t.style[e] } catch (t) { } finally { i = void 0 === i ? n : i } return i } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e(e, n, i, r) { var o = t.call(this, e) || this; return o.viewLayer = n, o.interactionRange = i, o.interactionConfig = r, o.render(), o } return i.__extends(e, t), e.registerInteraction = function (t, n) { e.GLOBAL_INTERACTION_MAP[t] = n }, e.registerPlotInteraction = function (t, n, i) { e.PLOT_INTERACTION_MAP[t] || (e.PLOT_INTERACTION_MAP[t] = {}), e.PLOT_INTERACTION_MAP[t][n] = i }, e.getInteraction = function (t, n) { return n && e.PLOT_INTERACTION_MAP[n] && e[n][t] ? e.PLOT_INTERACTION_MAP[n][t] : e.GLOBAL_INTERACTION_MAP[t] }, e.getInteractionRange = function (t, e) { }, e.prototype.destroy = function () { this.clear(), t.prototype.destroy.call(this) }, e.prototype.getViewLayer = function () { return this.viewLayer }, e.prototype.getRange = function () { return this.interactionRange }, e.prototype.getInteractionConfig = function () { return this.interactionConfig }, e.prototype.render = function () { }, e.prototype.clear = function () { }, e.GLOBAL_INTERACTION_MAP = {}, e.PLOT_INTERACTION_MAP = {}, e }(n(5).Interaction); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(145), o = { default: r.DEFAULT_RESPONSIVE_THEME }; e.registerResponsiveTheme = function (t, e) { o[t.toLowerCase()] = i.deepMix({}, r.DEFAULT_RESPONSIVE_THEME, e) }, e.getResponsiveTheme = function (t) { var e = o[t.toLowerCase()]; return e || r.DEFAULT_RESPONSIVE_THEME } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = function () { function t(t) { i.assign(this, t), this.init() } return t.prototype.init = function () { this.config = { type: this.type, position: { fields: this.positionFields }, widthRatio: { column: this.widthRatio || .6, rose: .9999999, multiplePie: 1 / 1.3 } } }, t }(); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(8)), s = n(9), u = n(11), l = n(17), c = i.__importDefault(n(195)); n(198), n(51); var h = i.__importStar(n(38)); n(199); var p = { column: "interval" }, f = { interval: "column" }, d = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "column", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { xAxis: { visible: !0, tickLine: { visible: !1 }, title: { visible: !0 } }, yAxis: { title: { visible: !0 }, label: { visible: !0 }, grid: { visible: !0 } }, tooltip: { visible: !0, shared: !0, crosshairs: { type: "rect" } }, label: { visible: !1, position: "top", adjustColor: !0 }, legend: { visible: !0, position: "top-left" } }) }, e.prototype.getOptions = function (e) { var n = t.prototype.getOptions.call(this, e), i = this.constructor.getDefaultOptions(); return r.deepMix({}, n, i, e) }, e.prototype.beforeInit = function () { t.prototype.beforeInit.call(this), this.options.responsive && "auto" !== this.options.padding && this.applyResponsive("preRender") }, e.prototype.afterRender = function () { this.options.responsive && "auto" !== this.options.padding && this.applyResponsive("afterRender"), t.prototype.afterRender.call(this) }, e.prototype.geometryParser = function (t, e) { return "g2" === t ? p[e] : f[e] }, e.prototype.scale = function () { var e = this.options, n = {}; n[e.xField] = { type: "cat" }, r.has(e, "xAxis") && l.extractScale(n[e.xField], e.xAxis), n[e.yField] = {}, r.has(e, "yAxis") && l.extractScale(n[e.yField], e.yAxis), this.setConfig("scales", n), t.prototype.scale.call(this) }, e.prototype.coord = function () { }, e.prototype.adjustColumn = function (t) { }, e.prototype.addGeometry = function () { var t = this.options, e = u.getGeom("interval", "main", { positionFields: [t.xField, t.yField], plot: this }); t.label && (e.label = this.extractLabel()), this.adjustColumn(e), this.column = e, this.setConfig("element", e) }, e.prototype.animation = function () { t.prototype.animation.call(this), !1 === this.options.animation && (this.column.animate = !1) }, e.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, h) }, e.prototype.extractLabel = function () { var t = this.options, e = this.getLabelOptionsByPosition(t.label.position), n = r.deepMix({}, e, this.options.label); return !1 !== n.visible && s.getComponent("label", i.__assign({ plot: this, labelType: "columnLabel", fields: [this.options.yField] }, n)) }, e.prototype.applyResponsive = function (t) { var e = this, n = c.default[t]; r.each(n, (function (t) { t.method(e) })) }, e.prototype.getLabelOptionsByPosition = function (t) { return "middle" === t ? { offset: 0, style: { textBaseline: "middle" } } : "top" === t ? { offset: 4, style: { textBaseline: "bottom" } } : "bottom" === t ? { offset: 4, style: { textBaseline: "bottom" } } : { offset: 0 } }, e }(a.default); e.default = d, o.registerPlotType("column", d) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getEndPoint = function (t, e, n) { return { x: t.x + n * Math.cos(e), y: t.y + n * Math.sin(e) } }, e.getCenter = function (t) { return { x: t.x + t.width / 2, y: t.y + t.height / 2 } }, e.getOverlapArea = function (t, e, n) { return void 0 === n && (n = 0), Math.max(0, Math.min(t.x + t.width + n, e.x + e.width + n) - Math.max(t.x - n, e.x - n)) * Math.max(0, Math.min(t.y + t.height + n, e.y + e.height + n) - Math.max(t.y - n, e.y - n)) }, e.getOverlapInfo = function (t, e, n) { void 0 === n && (n = 0); var i = Math.max(0, Math.min(t.x + t.width + n, e.x + e.width + n) - Math.max(t.x - n, e.x - n)), r = Math.max(0, Math.min(t.y + t.height + n, e.y + e.height + n) - Math.max(t.y - n, e.y - n)); return i && t.x < e.x && (i = -i), r && t.y < e.y && (r = -r), t.x === e.x && t.width === e.width && (i = e.width), t.y === e.y && t.height === e.height && (r = e.height), { xOverlap: i, yOverlap: r } }, e.inPanel = function (t, e) { return t.x < e.x && t.x + t.width > e.x + e.width && t.y < e.y && t.y + t.height > e.y + e.height }, e.near = function (t, e, n) { return void 0 === n && (n = Math.pow(Number.EPSILON, .5)), [t, e].includes(1 / 0) ? Math.abs(t) === Math.abs(e) : Math.abs(t - e) < n } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(8)), a = n(9); n(79); var s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { title: { visible: !1 }, description: { visible: !1 }, padding: [0, 0, 0, 0], legend: { visible: !1 }, xAxis: { visible: !1 }, yAxis: { visible: !1 }, tooltip: { visible: !1 } }) }, e.prototype.coord = function () { }, e.prototype.addGeometry = function () { }, e.prototype.annotation = function () { var t = this, e = this.options, n = [], i = { line: { style: { lineWidth: 1, stroke: "#66d6a8" } } }; r.each(e.guideLine, (function (e) { var o = a.getComponent("guideLine", { plot: t, cfg: r.deepMix({}, i, e) }); n.push(o) })), this.setConfig("annotations", n) }, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(9), a = n(10), s = i.__importDefault(n(69)); function u(t, e) { if (!r.isFunction(e)) { var n = e.name, i = e.exp; return r.isFunction(i) ? i(t[n]) : t[n] === i } return e(t) } e.compare = u; var l = function () { function t(t) { this.shapeContainers = [], r.assign(this, t) } return t.prototype.createStateManager = function (t) { this.stateManager = new s.default(t) }, t.prototype.bindStateManager = function (t, e) { this.stateManager = t, e.setState && this._updateStateProcess(e.setState), e.onStateChange && this._stateChangeProcess(e.onStateChange) }, t.prototype.defaultStates = function (t) { var e = this; r.each(t, (function (t, n) { var i = t.condition, r = (t.style, t.related); e.setState({ type: n, condition: i, related: r }) })) }, t.prototype.setState = function (t) { var e = this, n = t.type, i = t.condition, o = t.related; this.shapes || (this.shapes = this._getShapes(), this.originAttrs = this._getOriginAttrs()), r.each(this.shapes, (function (o, a) { var s = o.get("origin"); if (u(r.isArray(s) ? s[0]._origin : s._origin, i)) { var l = t.style ? t.style : e._getDefaultStateStyle(n, o), c = e.originAttrs[a], h = void 0; h = r.isFunction(l) ? l(c) : r.mix({}, c, l), o.attr(h), e.setZIndex(n, o) } })), o && this._parserRelated(n, o, i), this.plot.canvas.draw() }, t.prototype._updateStateProcess = function (t) { var e = this; r.each(t, (function (t) { var n, i = t.state; n = r.isFunction(i) ? function (t) { var n = i(t); e.stateManager.setState(n.name, n.exp) } : function () { e.stateManager.setState(i.name, i.exp) }, t.event ? a.onEvent(e.plot, e._eventParser(t.event), n) : n() })) }, t.prototype._stateChangeProcess = function (t) { var e = this; r.each(t, (function (t) { e.stateManager.on(t.name + ":change", (function (n) { t.callback(n, e.plot) })) })) }, t.prototype._getShapes = function () { var t = this, e = [], n = this.plot.view.get("elements"); return r.each(n, (function (n) { var i = n.get("shapeContainer"); t.shapeContainers.push(i), n.destroyed || e.push.apply(e, n.getShapes()) })), e }, t.prototype._getOriginAttrs = function () { var t = []; return r.each(this.shapes, (function (e) { t.push(r.clone(e.attr())) })), t }, t.prototype._eventParser = function (t) { var e = t.split(":"); return this.plot.geometryParser("g2", e[0]) + ":" + e[1] }, t.prototype._getDefaultStateStyle = function (t, e) { var n = this.plot.theme, i = this.plot.geometryParser("plot", e.name) + "Style"; if (n[i]) { var o = n[i][t]; return r.isFunction(o) && (o = o(e.attr())), o } return {} }, t.prototype._parserRelated = function (t, e, n) { var i = this; r.each(e, (function (e) { i.plot[e] && o.getComponentStateMethod(e, t)(i.plot, n) })) }, t.prototype.setZIndex = function (t, e) { if ("active" === t || "selected" === t) { var n = e.get("parent").get("children"); n[n.length - 1].setZIndex(0), e.setZIndex(1) } }, t.prototype.resetZIndex = function () { r.each(this.shapeContainers, (function (t) { t.get("children").sort((function (t, e) { return t._INDEX - e._INDEX })) })) }, t }(); e.default = l }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(80)), a = i.__importDefault(n(49)), s = i.__importDefault(n(88)), u = { cat: "category", timeCat: "category", time: "dateTime", linear: "linear" }; var l = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.init = function () { this.axisInstance = this.getAxisInstance(), t.prototype.init.call(this) }, e.prototype.shouldApply = function () { return !!this.responsiveTheme.axis && !!(this.responsiveTheme.axis[this.dim] && this.type && this.axisInstance && this.axisInstance.get("labelRenderer")) }, e.prototype.apply = function () { for (var t = this.axisInstance, e = t.get("labelRenderer").get("group").get("children"), n = [], i = 0; i < e.length - 1; i++)n.push(e[i]); var s = new o.default({ shapes: n }), u = this.responsiveTheme.axis.x[this.type], l = u.constraints, c = u.rules; new a.default({ nodes: s, constraints: l, region: this.plot.view.get("viewRange"), rules: c, plot: this.plot, onEnd: function (e) { t.get("tickLine") && function (t, e) { var n = null; e.get("group").get("children").forEach((function (t) { if ("axis-ticks" === t.name) return n = t, !1 })); var i = e.get("ticks"), o = e.get("tickItems"), a = []; r.each(i, (function (t) { var e = t; a.push(e.text) })); var s = []; r.each(t.nodes, (function (t) { var e = t; if (e.width > 0 && e.height > 0) { var n = e.shape.get("origin").text, i = a.indexOf(n), r = o[i]; s.push(["M", r.x1, r.y1], ["L", r.x2, r.y2]) } })), 0 === s.length && (s = [["M", 0, 0]]), n.attr("path", s) }(e, t) } }) }, e.prototype.getType = function () { var t = this.plot.options, e = this.dim + "Axis", n = this.dim + "Field"; if (t[e] && t[e].type && "dateTime" === t[e].type) return "dateTime"; var i = this.plot.view.get("scales")[t[n]].type; return u[i] }, e.prototype.getAxisInstance = function () { var t = "x" === this.dim ? 0 : 1; return this.plot.view.get("axisController").axes[t] }, e }(s.default); e.default = l }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(10); e.EVENT_MAP = r.EVENT_MAP, e.onEvent = r.onEvent; i.assign(r.EVENT_MAP, { onColumnClick: "interval:click", onColumnDblclick: "interval:dblclick", onColumnMousemove: "interval:mousemove", onColumnMouseenter: "interval:mouseenter", onColumnMouseleave: "interval:mouseleave", onColumnMousedown: "interval:mousedown", onColumnMouseup: "interval:mouseup", onColumnContextmenu: "interval:contextmenu" }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(8)), s = n(9), u = n(11), l = n(17), c = i.__importDefault(n(215)); n(93); var h = i.__importStar(n(217)); n(218); var p = { bar: "interval" }, f = { interval: "bar" }, d = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "bar", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { xAxis: { visible: !0, line: { visible: !1 }, title: { visible: !0 }, label: { visible: !1 }, tickLine: { visible: !1 }, grid: { visible: !1 } }, yAxis: { visible: !0, autoHideLabel: !1, autoRotateLabel: !1, autoRotateTitle: !0, grid: { visible: !1 }, line: { visible: !1 }, tickLine: { visible: !1 }, label: { visible: !0 }, title: { visible: !1, offset: 12 } }, tooltip: { visible: !0, shared: !0, crosshairs: { type: "rect" } }, label: { visible: !0, position: "left", adjustColor: !0 }, legend: { visible: !0, position: "top-left" } }) }, e.prototype.beforeInit = function () { t.prototype.beforeInit.call(this); var e = this.options; e.responsive && "auto" !== e.padding && this.applyResponsive("preRender") }, e.prototype.afterRender = function () { var e = this.options; e.responsive && "auto" !== e.padding && this.applyResponsive("afterRender"), t.prototype.afterRender.call(this) }, e.prototype.geometryParser = function (t, e) { return "g2" === t ? p[e] : f[e] }, e.prototype.processData = function (t) { return t ? t.slice().reverse() : t }, e.prototype.scale = function () { var e = this.options, n = {}; n[e.yField] = { type: "cat" }, r.has(e, "yAxis") && l.extractScale(n[e.yField], e.yAxis), n[e.xField] = {}, r.has(e, "xAxis") && l.extractScale(n[e.xField], e.xAxis), this.setConfig("scales", n), t.prototype.scale.call(this) }, e.prototype.coord = function () { this.setConfig("coord", { actions: [["transpose"]] }) }, e.prototype.adjustBar = function (t) { }, e.prototype.addGeometry = function () { var t = this.options, e = u.getGeom("interval", "main", { positionFields: [t.yField, t.xField], plot: this }); t.label && (e.label = this.extractLabel()), this.adjustBar(e), this.bar = e, this.setConfig("element", e) }, e.prototype.animation = function () { t.prototype.animation.call(this), !1 === this.options.animation && (this.bar.animate = !1) }, e.prototype.extractLabel = function () { var t = this.options, e = this.getLabelOptionsByPosition(t.label.position), n = r.deepMix({}, e, this.options.label); return (!n || !1 !== n.visible) && s.getComponent("label", i.__assign({ plot: this, labelType: "barLabel", fields: [t.xField] }, n)) }, e.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, h) }, e.prototype.applyResponsive = function (t) { var e = this, n = c.default[t]; r.each(n, (function (t) { t.method(e) })) }, e.prototype.getLabelOptionsByPosition = function (t) { return "middle" === t ? { offset: 0 } : "left" === t ? { offset: 7, style: { stroke: null, lineWidth: 0 } } : "right" === t ? { offset: 4 } : void 0 }, e }(a.default); e.default = d, o.registerPlotType("bar", d) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(27), r = n(119); e.default = function (t, e) { if (t) if (i.default(t)) for (var n = 0, o = t.length; n < o && !1 !== e(t[n], n); n++); else if (r.default(t)) for (var a in t) if (t.hasOwnProperty(a) && !1 === e(t[a], a)) break } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.setMatrixArrayType = function (t) { e.ARRAY_TYPE = t }, e.toRadian = function (t) { return t * r }, e.equals = function (t, e) { return Math.abs(t - e) <= i * Math.max(1, Math.abs(t), Math.abs(e)) }; var i = e.EPSILON = 1e-6; e.ARRAY_TYPE = "undefined" != typeof Float32Array ? Float32Array : Array, e.RANDOM = Math.random; var r = Math.PI / 180 }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = function (t) { function e(e) { var n = t.call(this, i.__assign({ type: "base", title: null, items: null, formatter: null, offsetX: 0, offsetY: 0 }, e)) || this; return n.init(), n.render(), n.bindEvents(), n } return i.__extends(e, t), e.prototype.render = function () { this.renderTitle(), this.renderItems() }, e.prototype.getWidth = function () { return this.get("container").getBBox().width }, e.prototype.getHeight = function () { return this.get("container").getBBox().height }, e.prototype.getBBox = function () { return this.get("container").getBBox() }, e.prototype.moveTo = function (t, e) { this.get("container").move(t, e), this.set("x", t), this.set("y", e) }, e.prototype.draw = function () { this.get("canvas").draw() }, e.prototype.formatterValue = function (t) { return (this.get("formatter") || r.identity).call(this, t) }, e }(n(43).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e(e) { var n = t.call(this) || this; return n.cfg = i.__assign({ id: null, canvas: null, container: null, group: null, capture: !0, offsetX: 0, offsetY: 0, visible: !0, zIndex: 1 }, e), n.destroyed = !1, n } return i.__extends(e, t), e.prototype.get = function (t) { return this.cfg[t] }, e.prototype.set = function (t, e) { return this.cfg[t] = e, this }, e.prototype.destroy = function () { this.off(), this.destroyed = !0 }, e }(n(22).default); e.Guide = r, e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(65); e.SLIDER_WIDTH = 8, e.SLIDER_HEIGHT = 2 * e.SLIDER_WIDTH, e.SLIDER_CIRCLE_MAX_SIZE = 2 * e.SLIDER_HEIGHT, e.TEXT_OFFSET = 4, e.SliderBtnStyle = { fill: "#fff", shadowBlur: 10, shadowColor: "rgba(0,0,0,0.65)", radius: 2 }, e.SliderTextStyle = { fill: "#333", textAlign: "center", textBaseline: "middle", stroke: "#fff", lineWidth: 5, fontFamily: i.FONT_FAMILY }, e.SliderMiddleBackgroundStyle = { fill: "#D9D9D9" }, e.SliderMiddleFrontendStyle = { fill: "rgb(64, 141, 251)" }, e.DefaultTitleStyle = { fill: "#333", textBaseline: "top", textAlign: "start", fontFamily: i.FONT_FAMILY } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1); e.isTextUsable = function (t) { return !!t && !(!0 !== t.visible || "string" != typeof t.text || !t.text.trim()) }, e.breakText = function (t, e) { var n = i.__spreadArrays(t); return e.forEach((function (t, e) { n.splice(t + e, 0, "\n") })), n.join("") } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0); e.combineFormatter = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; return function (e, n, i) { return t.reduce((function (t, e) { return e(t, n, i) }), e) } }, e.getNoopFormatter = function () { return function (t, e, n) { return t } }, e.getPrecisionFormatter = function (t) { return function (e, n, r) { var o = Number(e); return isNaN(o) || i.isNil(t) ? e : o.toFixed(t) } }, e.getSuffixFormatter = function (t) { return function (e, n, r) { return i.isNil(t) ? e : e + " " + t } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(4)), o = i.__importStar(n(0)), a = r.vec2; function s(t, e) { var n = t.getCenter(); return Math.sqrt(Math.pow(e.x - n.x, 2) + Math.pow(e.y - n.y, 2)) } function u(t, e) { for (var n = [t[0]], i = 1, r = t.length; i < r; i += 2) { var o = e.convertPoint({ x: t[i], y: t[i + 1] }); n.push(o.x, o.y) } return n } function l(t, n, i) { for (var r = !!n, o = [], a = 0, s = t.length; a < s; a += 2)o.push([t[a], t[a + 1]]); var u, l, c, h = e.smoothBezier(o, .4, r, i), p = o.length, f = []; for (a = 0; a < p - 1; a++)u = h[2 * a], l = h[2 * a + 1], c = o[a + 1], f.push(["C", u[0], u[1], l[0], l[1], c[0], c[1]]); return r && (u = h[p], l = h[p + 1], c = o[0], f.push(["C", u[0], u[1], l[0], l[1], c[0], c[1]])), f } function c(t, e) { return function (t, e) { var n = []; if (t.length) { for (var i = 0, r = t.length; i < r; i += 1) { var o = t[i], a = 0 === i ? "M" : "L"; n.push([a, o.x, o.y]) } e && n.push(["Z"]) } return n }(t, e) } e.smoothBezier = function (t, e, n, i) { var r, o, s, u, l = [], c = !!i; if (c) { s = [1 / 0, 1 / 0], u = [-1 / 0, -1 / 0]; for (var h = 0, p = t.length; h < p; h++) { var f = t[h]; s = a.min([], s, f), u = a.max([], u, f) } s = a.min([], s, i[0]), u = a.max([], u, i[1]) } h = 0; for (var d = t.length; h < d; h++) { f = t[h]; if (n) r = t[h ? h - 1 : d - 1], o = t[(h + 1) % d]; else { if (0 === h || h === d - 1) { l.push(f); continue } r = t[h - 1], o = t[h + 1] } var g = []; g = a.sub(g, o, r), g = a.scale(g, g, e); var v = a.distance(f, r), y = a.distance(f, o), m = v + y; 0 !== m && (v /= m, y /= m); var x = a.scale([], g, -v), _ = a.scale([], g, y), b = a.add([], f, x), w = a.add([], f, _); c && (b = a.max([], b, s), b = a.min([], b, u), w = a.max([], w, s), w = a.min([], w, u)), l.push(b), l.push(w) } return n && l.push(l.shift()), l }, e.catmullRom2bezier = l, e.getLinePath = c, e.getSplinePath = function (t, e, n) { var i = [], r = t[0], a = null; if (t.length <= 2) return c(t, e); o.each(t, (function (t) { a && a.x === t.x && a.y === t.y || (i.push(t.x), i.push(t.y), a = t) })); var s = l(i, e, n || [[0, 0], [1, 1]]); return s.unshift(["M", r.x, r.y]), s }, e.getPointRadius = function (t, e) { return s(t, e) }, e.getPointAngle = function (t, e) { var n = t.getCenter(); return Math.atan2(e.y - n.y, e.x - n.x) }, e.convertNormalPath = function (t, e) { var n = []; return o.each(e, (function (e) { switch (e[0].toLowerCase()) { case "m": case "l": case "c": n.push(u(e, t)); break; case "z": default: n.push(e) } })), n }, e.convertPolarPath = function (t, e) { var n, i, r, a = []; return o.each(e, (function (o, l) { switch (o[0].toLowerCase()) { case "m": case "c": case "q": a.push(u(o, t)); break; case "l": n = e[l - 1], i = o, r = t.isTransposed, (r ? n[n.length - 2] === i[1] : n[n.length - 1] === i[2]) ? a = a.concat(function (t, e, n) { var i = n.isTransposed, r = n.startAngle, o = n.endAngle, a = { x: t[1], y: t[2] }, u = { x: e[1], y: e[2] }, l = [], c = i ? "y" : "x", h = Math.abs(u[c] - a[c]) * (o - r), p = u[c] >= a[c] ? 1 : 0, f = h > Math.PI ? 1 : 0, d = n.convertPoint(u), g = s(n, d); if (g >= .5) if (h === 2 * Math.PI) { var v = { x: (u.x + a.x) / 2, y: (u.y + a.y) / 2 }, y = n.convertPoint(v); l.push(["A", g, g, 0, f, p, y.x, y.y]), l.push(["A", g, g, 0, f, p, d.x, d.y]) } else l.push(["A", g, g, 0, f, p, d.x, d.y]); return l }(n, i, t)) : a.push(u(o, t)); break; case "z": default: a.push(o) } })), function (t) { o.each(t, (function (e, n) { if ("a" === e[0].toLowerCase()) { var i = t[n - 1], r = t[n + 1]; r && "a" === r[0].toLowerCase() ? i && "l" === i[0].toLowerCase() && (i[0] = "M") : i && "a" === i[0].toLowerCase() && r && "l" === r[0].toLowerCase() && (r[0] = "M") } })) }(a), a } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.init = function () { var t = this.plot.options; this.config = { type: "line", position: { fields: [t.xField, t.yField] }, connectNulls: t.connectNulls }, t.lineSize && this.parseSize(), t.smooth && (this.config.shape = { values: ["smooth"] }), t.step && (this.config.shape = { values: [t.step] }), (t.seriesField || t.color) && this.parseColor(), t.lineStyle && this.parseStyle() }, e.prototype.parseSize = function () { var t = this.plot.options.lineSize, e = {}; r.isFunction(t) ? e.callback = t : e.values = [t], this.config.size = e }, e.prototype.parseColor = function () { var t = this.plot.options, e = {}; if (t.seriesField && (e.fields = [t.seriesField]), r.has(t, "color")) { var n = t.color; r.isString(n) ? e.values = [n] : r.isFunction(n) ? e.callback = n : e.values = n } this.config.color = e }, e.prototype.parseStyle = function () { var t = this.plot.options, e = t.lineStyle, n = { fields: null, callback: null, cfg: null }; r.isFunction(e) && t.seriesField ? (n.fields = [t.seriesField], n.callback = e) : n.cfg = e, this.config.style = n }, e }(i.__importDefault(n(32)).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(81), o = n(82), a = function () { function t(t) { this.iterationTime = 10, this.iterationIndex = 0, this.rulesLocker = [], this.constraintIndex = 0, i.assign(this, t), this.currentConstraint = this.constraints[0], this.rules && (this.iterationTime = this.rules[this.currentConstraint.name].length), this._start(), this._run(), this._end() } return t.prototype._start = function () { this.onStart && this.onStart(this.nodes) }, t.prototype._iteration = function () { var t; "shape" === (t = (this.nodes.type, this.nodes)).type && t.measureNodes(), this.rules && this._applyRules(), "shape" === t.type && t.measureNodes(), this.onIteration && this.onIteration(this.nodes) }, t.prototype._end = function () { this.onEnd && this.onEnd(this.nodes) }, t.prototype._run = function () { for (var t = this._constraintsTest(); !(t || this.iterationIndex > this.iterationTime - 1);)this._iteration(), t = this._constraintsTest(), this.iterationIndex++; this.constraintIndex < this.constraints.length - 1 && (this.constraintIndex++ , this.currentConstraint = this.constraints[this.constraintIndex], this.iterationTime = this.rules ? this.rules[this.currentConstraint.name].length : 1, this.iterationIndex = 0, this._run()) }, t.prototype._constraintsTest = function () { var t = r.constraintsLib[this.currentConstraint.name], e = this.currentConstraint.option; return "compare" === t.usage ? this._constraintCompare(t, e) : this._constraintAssignment(t, e) }, t.prototype._constraintCompare = function (t, e) { var n = t.type, i = t.expression, r = this.nodes.nodes; return "chain" === n ? this._chainConstraintCompare(i, r, e) : "padding" === n ? this._paddingConstraintCompare(i, this.region, r, e) : "group" === n ? this._groupConstraintCompare(i, r, e) : void 0 }, t.prototype._chainConstraintCompare = function (t, e, n) { for (var i = 0; i < e.length - 1; i++) { if (!1 === t(e[i], e[i + 1], n)) return !1 } return !0 }, t.prototype._paddingConstraintCompare = function (t, e, n, i) { if (e) for (var r = 0, o = n; r < o.length; r++) { if (!1 === t(o[r], e, i)) return !1 } return !0 }, t.prototype._groupConstraintCompare = function (t, e, n) { for (var i = 0; i < e.length; i++)for (var r = e[i], o = 0; o < e.length; o++) { if (o !== i) if (!1 === t(r, e[o], n)) return !1 } return !0 }, t.prototype._constraintAssignment = function (t, e) { var n = t.type, i = t.expression, r = this.nodes.nodes; return "chain" === n ? this._chainConstraintAssign(i, r, e) : "padding" === n ? this._paddingConstraintAssign(i, this.region, r, e) : void 0 }, t.prototype._chainConstraintAssign = function (t, e, n) { return !0 }, t.prototype._paddingConstraintAssign = function (t, e, n, i) { if (e) for (var r = 0, o = n; r < o.length; r++) { var a = o[r], s = t(a, e, i); a.value = s } return !0 }, t.prototype._applyRules = function () { for (var t = this.rules[this.currentConstraint.name][this.iterationIndex], e = o.rulesLib[t.name], n = t.option ? t.option : {}, i = this.nodes.nodes, r = 0; r < i.length; r++) { var a = i[r]; this._applyRule(a.shape, e, n, r) } }, t.prototype._applyRule = function (t, e, n, i) { e(t, n, i, { nodes: this.nodes, region: this.region, plot: this.plot }) }, t }(); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(8)), s = n(9), u = n(11), l = n(17), c = i.__importDefault(n(190)), h = i.__importStar(n(192)); n(193); var p = { area: "area", line: "line", point: "point" }, f = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "area", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { smooth: !1, areaStyle: { opacity: .25, fillOpacity: 1 }, line: { visible: !0, size: 2, style: { opacity: 1, lineJoin: "round", lineCap: "round" } }, point: { visible: !1, size: 4, shape: "point" }, label: { visible: !1, type: "point" }, legend: { visible: !0, position: "top-left", wordSpacing: 4 } }) }, e.prototype.beforeInit = function () { t.prototype.beforeInit.call(this), this.options.responsive && "auto" !== this.options.padding && this.applyResponsive("preRender") }, e.prototype.afterRender = function () { this.options.responsive && "auto" !== this.options.padding && this.applyResponsive("afterRender"), t.prototype.afterRender.call(this) }, e.prototype.geometryParser = function (t, e) { return p[e] }, e.prototype.scale = function () { var e = this.options, n = {}; n[e.xField] = { type: "cat" }, r.has(e, "xAxis") && l.extractScale(n[e.xField], e.xAxis), n[e.yField] = {}, r.has(e, "yAxis") && l.extractScale(n[e.yField], e.yAxis), this.setConfig("scales", n), t.prototype.scale.call(this) }, e.prototype.coord = function () { }, e.prototype.addGeometry = function () { var t = this.options, e = u.getGeom("area", "main", { plot: this }); this.area = e, t.label && this.label(), this.adjustArea(e), this.setConfig("element", e), this.addLine(), this.addPoint() }, e.prototype.adjustArea = function (t) { }, e.prototype.adjustLine = function (t) { }, e.prototype.adjustPoint = function (t) { }, e.prototype.addLine = function () { var t = this.options, e = r.deepMix({}, t.line); if (e.visible) { var n = u.getGeom("line", "guide", { type: "line", plot: this, line: e }); this.adjustLine(n), this.setConfig("element", n), this.line = n } }, e.prototype.addPoint = function () { var t = this.options; if (r.deepMix({}, t.point).visible) { var e = u.getGeom("point", "guide", { plot: this }); this.adjustPoint(e), this.setConfig("element", e), this.point = e } }, e.prototype.animation = function () { t.prototype.animation.call(this), !1 === this.options.animation && (this.area.animate = !1, this.line && (this.line.animate = !1), this.point && (this.point.animate = !1)) }, e.prototype.label = function () { var t = this.options; if (!1 === t.label.visible) return this.line && (this.line.label = !1), void (this.area.label = !1); this.area.label = s.getComponent("label", { fields: [t.yField], plot: this }) }, e.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, h) }, e.prototype.applyResponsive = function (t) { var e = this, n = c.default[t]; r.each(n, (function (t) { t.method(e) })) }, e }(a.default); e.default = f, o.registerPlotType("area", f) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = i.__importStar(n(0)), a = n(21), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.setLabelPosition = function (t, e, n, i) { var r = i; o.isFunction(r) && (r = r(e)); var a = this.get("coord"), s = a.convertPoint(e.points[0]), u = a.convertPoint(e.points[2]), l = (s.y, u.y, (s.x - u.x) / 2), c = (s.y - u.y) / 2; switch (r) { case "right": t.x -= l, t.y += c, t.textAlign = t.textAlign || "left"; break; case "left": t.x += l, t.y += c, t.textAlign = t.textAlign || "right"; break; case "bottom": t.y += 2 * c, t.textAlign = t.textAlign || "center"; break; case "middle": t.y += c, t.textAlign = t.textAlign || "center"; break; case "top": t.textAlign = t.textAlign || "center" } }, e.prototype.adjustOffset = function (t, e) { var n = this.get("labelsRenderer"), i = n.get("items"), r = n.get("group").get("children"), a = this.get("coord"); o.each(i, (function (e, n) { var i = r[n], o = a.convertPoint(t[n].points[0]), s = a.convertPoint(t[n].points[2]); o.y < s.y && (e.y += 2 * e.offset, i.attr("textBaseline", "top"), i.attr("y", i.attr("y") + 2 * e.offset)) })) }, e.prototype.showLabels = function (e, n) { var i = this; t.prototype.showLabels.call(this, e, n), this.adjustOffset(e, n); var r = this.get("labelsRenderer"), a = r.get("group").get("children"), s = r.get("items"), u = this.get("element").get("view"); o.each(a, (function (t, e) { var r = t, o = s[e], a = r.get("origin"), u = i.get("element").getShapeId(a), l = i._getShape(u, n), c = i.get("labelOptions"), h = c.adjustColor; c.adjustPosition && i.adjustPosition(r, l, o), h && i.adjustColor(r, l) })), u.get("canvas").draw() }, e.prototype._getShape = function (t, e) { var n; return o.each(e, (function (e) { var i = e; i.id === t && (n = i) })), n }, e.prototype.adjustPosition = function (t, e, n) { var i = t.getBBox(), r = e.getBBox(); if (r.height <= i.height && "top" !== n.position) { var o = r.minY - 20; t.attr("y", o) } }, e.prototype.adjustColor = function (t, e) { var n = t.getBBox(), i = e.getBBox(); if (n.minY >= i.minY && n.maxY <= i.maxY) { var r = e.attr("fill"), s = e.attr("opacity") ? e.attr("opacity") : 1, u = a.rgb2arr(r), l = Math.round(.299 * u[0] + .587 * u[1] + .114 * u[2]) / s, c = this._mappingColor([{ from: 0, to: 85, color: "white" }, { from: 85, to: 170, color: "#F6F6F6" }, { from: 170, to: 255, color: "black" }], l); t.attr("fill", c), "black" !== c ? (t.attr("stroke", null), t.attr("lineWidth", 0)) : (t.attr("stroke", "white"), t.attr("lineWidth", 2)) } else if (n.maxY < i.minY) { var h = this.get("theme"), p = o.get(h, "label.textStyle.fill", "black"); t.attr("fill", p) } }, e.prototype._mappingColor = function (t, e) { var n; return o.each(t, (function (t) { var i = t; e >= i.from && e < i.to && (n = i.color) })), n }, e }(r.ElementLabels); e.ColumnLabels = s, r.registerElementLabels("columnLabel", s) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = i.__importStar(n(0)), a = n(21), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.setLabelPosition = function (t, e, n, i) { var r = i; o.isFunction(r) && (r = r(e)); var a = e.size, s = (e.points[0], this.get("coord"), a), u = a; switch (r) { case "right": t.x += 2 * s, t.textAlign = t.textAlign || "left"; break; case "left": t.x -= 2 * s, t.textAlign = t.textAlign || "right"; break; case "bottom": t.y += 2 * u, t.textAlign = t.textAlign || "center", t.textBaseline = "top"; break; case "middle": t.textBaseline = "middle", t.textAlign = t.textAlign || "center"; break; case "top": t.y -= 2 * u, t.textAlign = t.textAlign || "center", t.textBaseline = "bottom" } }, e.prototype.showLabels = function (e, n) { var i = this; t.prototype.showLabels.call(this, e, n); var r = this.get("labelsRenderer"), a = r.get("group").get("children"), s = r.get("items"), u = this.get("element").get("view"); o.each(a, (function (t, e) { var r = t, o = s[e], a = r.get("origin"), u = i.get("element").getShapeId(a), l = i._getShape(u, n), c = i.get("labelOptions"), h = c.adjustColor; c.adjustPosition && i.adjustPosition(r, l, o), h && i.adjustColor(r, l) })), u.get("canvas").draw() }, e.prototype._getShape = function (t, e) { var n; return o.each(e, (function (e) { var i = e; i.id === t && (n = i) })), n }, e.prototype.adjustPosition = function (t, e, n) { e.get("origin")._origin; var i = t.getBBox(), r = e.getBBox(); (r.height <= i.height || r.width <= i.width && "middle" === n.position) && t.attr("text", "") }, e.prototype.adjustColor = function (t, e) { var n = t.getBBox(), i = e.getBBox(); if (n.minY >= i.minY && n.maxY <= i.maxY) { var r = e.attr("fill"), s = e.attr("opacity") ? e.attr("opacity") : 1, u = a.rgb2arr(r), l = Math.round(.299 * u[0] + .587 * u[1] + .114 * u[2]) / s, c = this._mappingColor([{ from: 0, to: 85, color: "white" }, { from: 85, to: 170, color: "#F6F6F6" }, { from: 170, to: 255, color: "black" }], l); t.attr("fill", c) } else if (n.maxY < i.minY) { var h = this.get("theme"), p = o.get(h, "label.textStyle.fill", "black"); t.attr("fill", p) } }, e.prototype._mappingColor = function (t, e) { var n; return o.each(t, (function (t) { var i = t; e >= i.from && e < i.to && (n = i.color) })), n }, e }(r.ElementLabels); e.ScatterLabels = s, r.registerElementLabels("scatterLabel", s) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0); e.transformDataPercentage = function (t, e, n) { var o = r.groupBy(t, e); o = r.mapValues(o, (function (t) { return r.map(t, (function (t) { return r.map(n, (function (e) { return t[e] })) })) })), o = r.mapValues(o, r.flatten), o = r.mapValues(o, (function (t) { return r.map(t, (function (t) { var e = Number.parseFloat(t); return !r.isNumber(e) || isNaN(e) ? 0 : e })) })); var a = r.mapValues(o, (function (t) { return r.reduce(t, (function (t, e) { return t + e }), 0) })), s = r.map(t, (function (t) { var o = i.__assign(i.__assign({}, t), { _origin: t, total: a[t[e]] }); return r.each(n, (function (n) { o[n] = t[n] / a[t[e]] })), o })); return r.each(r.groupBy(s, e), (function (t) { var e = 0; r.each(t, (function (i, o) { r.each(n, (function (r, a) { (e + i[r] >= 1 || o === t.length - 1 && a === n.length - 1) && (i[r] = 1 - e), e += i[r] })) })) })), s } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = n(34), a = n(235), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.showLabels = function (e, n) { var r = this; t.prototype.showLabels.call(this, e, n); var a = this.get("element").get("view"), s = this.get("coord"), u = a.get("panelRange"), l = this.get("labelsRenderer"), c = l.get("group").get("children"), h = a.get("data"), p = this.getLabelOptions().fields, f = p[0], d = p[1], g = a.get("scales")[f]; c.forEach((function (t, e) { var n = h[e], i = g.scale(n[f]); t.attr("data", { value: n[f], name: n[d], percent: i }) })); var v = l.get("items") || []; this.anchors = []; var y = s.getRadius() + this.getOffsetOfLabel(); this.anchorRadius = y, c.forEach((function (t, e) { var n = v[e], a = o.getEndPoint(s.getCenter(), n.angle, y); r.anchors.push(i.__assign(i.__assign(i.__assign({}, n), a), { id: t.id })) })); var m = l.get("lineGroup").get("children") || []; this.adjustPosition(c, v, s, u), this.adjustTexts(c, v, s, u), this.adjustOverlap(c, u), this.adjustLines(c, v, m, s, u), a.get("canvas").draw() }, e.prototype.adjustTexts = function (t, e, n, i) { var r = this; t.forEach((function (t) { var o = e.find((function (e) { return e.id === t.id })); r.adjustLabelText(t, o, n, i) })) }, e.prototype.adjustItems = function (t) { return t }, e.prototype.adjustLabelText = function (t, e, n, i) { var r = t.getBBox(), o = "right" === e.textAlign ? r.maxX - i.minX : i.maxX - r.minX; if (o < r.width) { var s = { fontFamily: t.attr("fontFamily"), fontSize: t.attr("fontSize"), fontVariant: t.attr("fontVariant"), fontWeight: t.attr("fontWeight"), fontStyle: t.attr("fontStyle") }, u = t.attr("text"), l = ["[\\d,.]*", "[\\d.]*%", t.attr("data").name], c = u.split("\n").map((function (t) { return a.getEllipsisText(t, o - 2, s, l) })); t.attr("text", c.join("\n")) } }, e.prototype.adjustOverlap = function (t, e) { var n = this; if (!this.getLabelOptions().allowOverlap) { for (var i = 1; i < t.length; i++)for (var r = t[i], a = 0, s = i - 1; s >= 0; s--) { var u = t[s], l = u.getBBox(), c = r.getBBox(); if (u.get("visible") && (a = o.getOverlapArea(l, c), !o.near(a, 0))) { r.set("visible", !1); break } } t.forEach((function (t) { return n.checkInPanel(t, e) })) } }, e.prototype.checkInPanel = function (t, e) { var n = t.getBBox(); e.y <= n.y && e.y + e.height >= n.y + n.height || t.set("visible", !1) }, e.prototype.getLabelOptions = function () { return this.get("labelOptions") }, e }(r.getElementLabels("pie")); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7); n(284); var a = i.__importDefault(n(8)), s = n(17), u = n(9), l = i.__importStar(n(285)); n(286); var c = i.__importDefault(n(287)), h = { waterfall: "interval" }, p = { interval: "waterfall" }; e.VALUE_FIELD = "$$value$$", e.IS_TOTAL = "$$total$$"; var f = function (t) { function n() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "watarfall", e } return i.__extends(n, t), n.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { legend: { visible: !1, position: "bottom" }, label: { visible: !0, adjustPosition: !0 }, diffLabel: { visible: !0 }, leaderLine: { visible: !0 }, showTotal: { visible: !0, label: "总计值" }, waterfallStyle: { lineWidth: 0 }, tooltip: { visible: !0, shared: !0, crosshairs: { type: "rect" } } }) }, n.prototype.getOptions = function (e) { var n = t.prototype.getOptions.call(this, e); return this.adjustLegendOptions(n), this.adjustMeta(n), n }, n.prototype.afterInit = function () { t.prototype.afterInit.call(this); var n = this.options; n.diffLabel && n.diffLabel.visible ? this.diffLabel = new c.default({ view: this.view, fields: [n.xField, n.yField, e.VALUE_FIELD], formatter: n.diffLabel.formatter, style: n.diffLabel.style }) : this.diffLabel && (this.diffLabel.clear(), this.diffLabel = null) }, n.prototype.afterRender = function () { t.prototype.afterRender.call(this); var n = this.options; this.view.on("tooltip:change", (function (t) { for (var i = t.items, o = 0; o < i.length; o++) { var a = i[o], s = r.get(a.point, "_origin", {}); if (a.name = s[n.xField], a.value = s[n.yField], !a.value && s[e.IS_TOTAL]) { var u = s[e.VALUE_FIELD]; a.value = u[0] - u[1] } t.items[o] = a } })) }, n.prototype.geometryParser = function (t, e) { return "g2" === t ? h[e] : p[e] }, n.prototype.addGeometry = function () { var t = this.options, n = { type: "interval", position: { fields: [t.xField, e.VALUE_FIELD] }, shape: { values: ["waterfall"] } }; t.label && (n.label = this.extractLabel()), n.style = this._parseStyle(), n.color = this._parseColor(), this.waterfall = n, this.setConfig("element", n) }, n.prototype.processData = function (t) { var n, o = [], a = this.options.xField, s = this.options.yField; if (r.map(t, (function (t, n) { var a, u = t[s]; if (n > 0) { var l = o[n - 1][e.VALUE_FIELD]; u = r.isArray(l) ? [l[1], t[s] + l[1]] : [l, t[s] + l] } o.push(i.__assign(i.__assign({}, t), ((a = {})[e.VALUE_FIELD] = u, a.$$index$$ = n, a))) })), this.options.showTotal && this.options.showTotal.visible) { var u = r.map(t, (function (t) { return t[s] })), l = r.reduce(u, (function (t, e) { return t + e }), 0); o.push(((n = {})[a] = this.options.showTotal.label, n[s] = null, n[e.VALUE_FIELD] = [l, 0], n.$$index$$ = o.length, n[e.IS_TOTAL] = !0, n)) } return o }, n.prototype.scale = function () { var n = this.options, i = {}; i[n.xField] = { type: "cat" }, r.has(n, "xAxis") && s.extractScale(i[n.xField], n.xAxis), i[e.VALUE_FIELD] = {}, r.has(n, "yAxis") && s.extractScale(i[e.VALUE_FIELD], n.yAxis), this.setConfig("scales", i), t.prototype.scale.call(this) }, n.prototype.axis = function () { var t = u.getComponent("axis", { plot: this, dim: "x" }), n = u.getComponent("axis", { plot: this, dim: "y" }), i = { fields: {} }; i.fields[this.options.xField] = t, i.fields[e.VALUE_FIELD] = n, this.setConfig("axes", i) }, n.prototype.coord = function () { }, n.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, l) }, n.prototype.extractLabel = function () { var t = this.options, e = r.deepMix({}, t.label); return !1 !== e.visible && u.getComponent("label", i.__assign({ plot: this, labelType: "waterfall", fields: [t.yField] }, e)) }, n.prototype._parseStyle = function () { var t = this.options.waterfallStyle, e = this.options.leaderLine, n = {}; return r.isFunction(t) ? n.callback = function () { for (var n = [], i = 0; i < arguments.length; i++)n[i] = arguments[i]; return Object.assign({}, t.apply(void 0, n), { leaderLine: e }) } : n.cfg = i.__assign(i.__assign({}, t), { leaderLine: e }), n }, n.prototype._parseColor = function () { var t = this, n = this.options, i = this.options, o = { fields: [i.xField, i.yField, e.VALUE_FIELD, "$$index$$"] }; if (r.isFunction(n.color)) o.callback = n.color; else { var a = "#f4664a", s = "#30bf78", u = "rgba(0, 0, 0, 0.25)"; if (r.isString(n.color)) a = s = u = n.color; else if (r.isObject(n.color)) { var l = n.color, c = l.rising, h = l.falling, p = l.total; a = c, s = h, u = p } o.callback = function (e, n, i, o) { return o === t.options.data.length ? u || (i[0] >= 0 ? a : s) : (r.isArray(i) ? i[1] - i[0] : i) >= 0 ? a : s } } return o }, n.prototype.adjustLegendOptions = function (t) { var e = t.legend; e && (e.visible = !1) }, n.prototype.adjustMeta = function (t) { var n = t.meta; if (n) { var i = n ? n[t.yField] : {}; i.alias = i.alias || t.yField, t.meta[e.VALUE_FIELD] = i } }, n }(a.default); e.default = f, o.registerPlotType("waterfall", f) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(62); e.default = function (t) { return i.default(t, "String") } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); e.timeIntervals = { second: { value: 1e3, format: "HH:mm:ss" }, miniute: { value: 6e4, format: "HH:mm" }, hour: { value: 36e5, format: "HH" }, day: { value: 864e5, format: "YYYY-MM-DD" }, week: { value: 6048e5, format: "YYYY-MM-DD" }, month: { value: 2592e6, format: "YYYY-MM" }, year: { value: 31536e6, format: "YYYY" } } }, function (t, e) { t.exports = function (t) { return t.webpackPolyfill || (t.deprecate = function () { }, t.paths = [], t.children || (t.children = []), Object.defineProperty(t, "loaded", { enumerable: !0, get: function () { return t.l } }), Object.defineProperty(t, "id", { enumerable: !0, get: function () { return t.i } }), t.webpackPolyfill = 1), t } }, function (t, e) { }, function (t, e, n) { "use strict"; e.__esModule = !0; var i = n(29); e.default = function (t, e) { var n = i.default(t, "height", e); return "auto" === n && (n = t.offsetHeight), parseFloat(n) } }, function (t, e, n) { "use strict"; e.__esModule = !0; var i = n(29); e.default = function (t, e) { var n = i.default(t, "width", e); return "auto" === n && (n = t.offsetWidth), parseFloat(n) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = {}.toString; e.default = function (t, e) { return i.call(t) === "[object " + e + "]" } }, function (t, e) { }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(2), a = n(42), s = n(124), u = n(44), l = function (t) { function e(e) { var n = e.backgroundStyle, r = e.fillStyle, o = e.textStyle, a = e.titleStyle, s = i.__rest(e, ["backgroundStyle", "fillStyle", "textStyle", "titleStyle"]), l = e.layout, c = void 0 === l ? "horizontal" : l, h = { width: "horizontal" === c ? 156 : 16, height: "horizontal" === c ? 16 : 156 }; return t.call(this, i.__assign(i.__assign({ titleDistance: 16, layout: "horizontal", operational: !0, handleIcon: "rect", backgroundStyle: i.__assign(i.__assign({}, u.SliderMiddleBackgroundStyle), n), fillStyle: i.__assign(i.__assign({}, u.SliderMiddleFrontendStyle), r), textStyle: i.__assign(i.__assign({}, u.SliderTextStyle), o), titleStyle: i.__assign(i.__assign({}, u.DefaultTitleStyle), a), width: 156, height: 16 }, h), s)) || this } return i.__extends(e, t), e.prototype.init = function () { var t = this.get("container"); this.set("canvas", t.get("canvas")); var e = t.addGroup(); this.set("legendGroup", e); var n = e.addGroup(); this.set("itemsGroup", n), e.translate(this.get("offsetX"), this.get("offsetY")) }, e.prototype.renderTitle = function () { if (this.isShowTitle()) { var t = this.get("title"), e = this.get("legendGroup"), n = this.get("titleStyle"), r = e.addShape("text", { attrs: i.__assign({ x: 0, y: 0, text: t }, n) }); r.name = "legend-title", this.set("titleShape", r) } }, e.prototype.renderItems = function () { this.renderSlider() }, e.prototype.bindEvents = function () { this.isOperational() }, e.prototype.clear = function () { var t = this.get("container"); t && !t.destroyed && t.clear() }, e.prototype.destroy = function () { t.prototype.destroy.call(this); var e = this.get("container"); e && !e.destroyed && (e.get("parent") && e.remove(!0), e.destroy()) }, e.prototype.isHorizontal = function () { return "horizontal" === this.get("layout") }, e.prototype.isOperational = function () { return this.get("operational") }, e.prototype.isShowTitle = function () { return !!this.get("title") }, e.prototype.getSliderConfig = function () { return { layout: this.get("layout"), sliderType: this.get("handleIcon"), sliderSize: this.get("handleSize"), sliderStyle: this.get("handleStyle"), operational: this.isOperational(), width: this.get("width"), height: this.get("height"), min: r.head(this.get("items")).value, max: r.last(this.get("items")).value, range: this.get("range") || [0, 1], textStyle: i.__assign({}, this.get("textStyle")), formatter: this.formatterValue } }, e.prototype.renderSlider = function () { var t = this, e = this.get("itemsGroup"), n = new s.default(this.getSliderConfig()); if (n.setBackground(this.createBackgroundGroup()), this.isShowTitle()) { var i = this.get("titleDistance"), r = this.get("titleShape").getBBox().height; n.translate(0, i + r) } n.on("sliderchange", (function (e) { var n = e.value, i = (e.range, new o.Event("itemfilter", e, !0, !0)); i.range = n, t.emit("itemfilter", i) })), e.add(n), this.set("slider", n) }, e }(a.default); e.default = l }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.FONT_FAMILY = '"-apple-system", "BlinkMacSystemFont", "Segoe UI", Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", SimSun, "sans-serif"' }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(42), o = { layout: "horizontal", titleDistance: 15, itemDistance: 5, itemMarginBottom: 8, wordSpacing: 8, backgroundPadding: 0, unSelectedColor: "#ccc", offsetX: 0, offsetY: 0 }, a = function (t) { function e(e) { return t.call(this, i.__assign(i.__assign({ hoverable: !0, clickable: !0, selectedMode: "multiple", allowAllCanceled: !1, reversed: !1, autoWrap: !0 }, o), e)) || this } return i.__extends(e, t), e }(r.default); e.default = a }, function (t, e) { }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(46), a = function () { function t(t) { this.config = {}; var e = t.plot, n = i.__rest(t, ["plot"]); this.plot = e, this.originConfig = n, this.init(t) } return t.prototype.getConfig = function () { return this.config }, t.prototype.init = function (t) { var e = this; r.assign(this.config, t), this.config.callback = function (t) { for (var n = [], r = 1; r < arguments.length; r++)n[r - 1] = arguments[r]; return e.parseCallBack.apply(e, i.__spreadArrays([t], n)) } }, t.prototype.parseCallBack = function (t) { for (var e = [], n = 1; n < arguments.length; n++)e[n - 1] = arguments[n]; var o = this.originConfig, a = this.plot.getPlotTheme(), s = i.__assign({}, o); return this.parseOffset(o, s), o.position && (r.isFunction(o.position) ? s.position = o.position(t) : s.position = o.position), this.parseFormatter.apply(this, i.__spreadArrays([s, t], e)), o.style && (r.isFunction(o.style) ? s.textStyle = o.style(t) : s.textStyle = o.style), s.textStyle = r.deepMix({}, r.get(a, "label.style"), s.textStyle), o.autoRotate && (s.autoRotate = o.autoRotate), s }, t.prototype.parseOffset = function (t, e) { var n = 0; r.each(["offset", "offsetX", "offsetY"], (function (i) { r.has(t, i) && (e[i] = t[i], n++) })), 0 === n && "middle" === r.get(t, "position") && (e.offset = 0) }, t.prototype.parseFormatter = function (t) { for (var e = [], n = 1; n < arguments.length; n++)e[n - 1] = arguments[n]; var i = this.originConfig; t.formatter = o.combineFormatter(o.getNoopFormatter(), o.getPrecisionFormatter(i.precision), o.getSuffixFormatter(i.suffix)), i.formatter && (t.formatter = o.combineFormatter(t.formatter, i.formatter)) }, t }(); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(22)), o = i.__importStar(n(0)), a = function (t) { function e(e) { var n = t.call(this) || this; return n._states = {}, n._stateStack = {}, n } return i.__extends(e, t), e.prototype.setState = function (t, e) { this._stateStack[t] = e, this._onUpdate() }, e.prototype.getState = function (t) { return this._states[t] }, e.prototype.getAllStates = function () { return this._states }, e.prototype.clear = function () { this._states = {}, this._stateStack = {}, this._changeTimer && (clearTimeout(this._changeTimer), this._changeTimer = null) }, e.prototype._onUpdate = function () { var t = this, e = this._stateStack; this._changeTimer && (clearTimeout(this._changeTimer), this._changeTimer = null), this._changeTimer = setTimeout((function () { o.each(e, (function (n, i) { var r = e[i]; t._states[i] && t._states[i] === n || (t._states[i] = n, t._triggerEvent(i, r)) })), t._stateStack = {} }), 16) }, e.prototype._triggerEvent = function (t, e) { this.emit(t + ":change", { name: t, exp: e }) }, e }(r.default); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = function () { function t(t) { this.type = "base", this.range = [0, 1], this.ticks = [], this.__cfg__ = t, this._initDefaultCfg(), i.assign(this, t), this._init() } return t.prototype.translate = function (t) { return t }, t.prototype.change = function (t) { this.constructor(i.assign(this.__cfg__, t)) }, t.prototype.clone = function () { return this.constructor(this.__cfg__) }, t.prototype.getTicks = function () { var t = this; return i.map(this.ticks, (function (e, n) { return i.isObject(e) ? e : { text: t.getText(e, n), tickValue: e, value: t.scale(e) } })) }, t.prototype.getText = function (t, e) { var n = this.formatter, r = n ? n(t, e) : t; return i.isNil(r) || !i.isFunction(r.toString) ? "" : r.toString() }, t.prototype._calcPercent = function (t, e, n) { return i.isNumber(t) ? (t - e) / (n - e) : NaN }, t.prototype._calcValue = function (t, e, n) { return e + t * (n - e) }, t }(); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0); e.DEFAULT_Q = [1, 5, 2, 2.5, 4, 3], e.ALL_Q = [1, 5, 2, 2.5, 4, 3, 1.5, 7, 6, 8, 9]; var r = 100 * Number.EPSILON; function o(t, e, n, o, a, s) { var u = i.size(e), l = i.indexOf(e, t), c = 0, h = function (t, e) { return (t % e + e) % e }(o, s); return (h < r || s - h < r) && o <= 0 && a >= 0 && (c = 1), 1 - l / (u - 1) - n + c } function a(t, e, n) { var r = i.size(e); return 1 - i.indexOf(e, t) / (r - 1) - n + 1 } function s(t, e, n, i, r, o) { var a = (t - 1) / (o - r), s = (e - 1) / (Math.max(o, i) - Math.min(n, r)); return 2 - Math.max(a / s, s / a) } function u(t, e) { return t >= e ? 2 - (t - 1) / (e - 1) : 1 } function l(t, e, n, i) { var r = e - t; return 1 - .5 * (Math.pow(e - i, 2) + Math.pow(t - n, 2)) / Math.pow(.1 * r, 2) } function c(t, e, n) { var i = e - t; if (n > i) { var r = (n - i) / 2; return 1 - Math.pow(r, 2) / Math.pow(.1 * i, 2) } return 1 } e.default = function (t, n, r, h, p, f) { if (void 0 === r && (r = 5), void 0 === h && (h = !0), void 0 === p && (p = e.DEFAULT_Q), void 0 === f && (f = [.25, .2, .5, .05]), t === n || 1 === r) return { min: t, max: n, ticks: [t] }; for (var d = { score: -2, lmin: 0, lmax: 0, lstep: 0 }, g = 1; g < 1 / 0;) { for (var v = 0, y = p; v < y.length; v++) { var m = y[v], x = a(m, p, g); if (Number.isNaN(x)) throw new Error("NaN"); if (f[0] * x + f[1] + f[2] + f[3] < d.score) { g = 1 / 0; break } for (var _ = 2; _ < 1 / 0;) { var b = u(_, r); if (f[0] * x + f[1] + f[2] * b + f[3] < d.score) break; for (var w = (n - t) / (_ + 1) / g / m, M = Math.ceil(Math.log10(w)); M < 1 / 0;) { var S = g * m * Math.pow(10, M), C = c(t, n, S * (_ - 1)); if (f[0] * x + f[1] * C + f[2] * b + f[3] < d.score) break; var O = Math.floor(n / S) * g - (_ - 1) * g, k = Math.ceil(t / S) * g; if (O > k) M += 1; else { for (var P = O; P <= k; P += 1) { var A = P * (S / g), L = A + S * (_ - 1), T = S, D = o(m, p, g, A, L, T), j = l(t, n, A, L), I = s(_, r, t, n, A, L), B = f[0] * D + f[1] * j + f[2] * I + 1 * f[3]; B > d.score && (!h || A <= t && L >= n) && (d.lmin = A, d.lmax = L, d.lstep = T, d.score = B) } M += 1 } } _ += 1 } } g += 1 } for (var E = Number.isInteger(d.lstep) ? 0 : Math.ceil(Math.abs(Math.log10(d.lstep))), F = [], R = d.lmin; R <= d.lmax; R += d.lstep)F.push(R); var z = E ? i.map(F, (function (t) { return Number.parseFloat(t.toFixed(E)) })) : F; return { min: Math.min(t, i.head(z)), max: Math.max(n, i.last(z)), ticks: z } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0); e.getDataByScaleRange = function (t, e, n, r, o) { var a = r[0], s = r[1]; void 0 === o && (o = !1); var u = i.groupBy(n, t), l = o ? e.slice(e.length - s, e.length - a) : e.slice(a, s); return i.flatten(i.map(l, (function (t) { return u[t] || [] }))) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(5)), o = i.__importStar(n(0)), a = n(20), s = n(143), u = n(31), l = r.Global.theme, c = function () { function t() { } return t.getGlobalTheme = function (t) { return o.isString(t) ? a.getGlobalTheme(t) : o.deepMix({}, a.getGlobalTheme(), t) }, t.prototype.getPlotTheme = function (t, e) { var n = t.theme; return o.isString(n) ? o.deepMix({}, a.getGlobalTheme(n), a.getTheme(e)) : o.deepMix({}, a.getGlobalTheme(), a.getTheme(e), n) }, t.prototype.getTheme = function (t, e) { var n = a.convertToG2Theme(this.getPlotTheme(t, e)); return o.deepMix({}, l, n) }, t.prototype.getResponsiveTheme = function (t) { return u.getResponsiveTheme(t) || u.getResponsiveTheme("default") }, t.prototype._processVisible = function (t) { return s.processAxisVisible(t.axis.left), s.processAxisVisible(t.axis.right), s.processAxisVisible(t.axis.top), s.processAxisVisible(t.axis.bottom), t }, t }(); e.default = c }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); e.COLOR_PLATE_10 = ["#5B8FF9", "#5AD8A6", "#5D7092", "#F6BD16", "#E8684A", "#6DC8EC", "#9270CA", "#FF9D4D", "#269A99", "#FF99C3"], e.COLOR_PLATE_20 = ["#5B8FF9", "#BDD2FD", "#5AD8A6", "#BDEFDB", "#5D7092", "#C2C8D5", "#F6BD16", "#FBE5A2", "#E8684A", "#F6C3B7", "#6DC8EC", "#B6E3F5", "#9270CA", "#D3C6EA", "#FF9D4D", "#FFD8B8", "#269A99", "#AAD8D8", "#FF99C3", "#FFD6E7"]; var i = n(0); e.DESCRIPTION_BOTTOM_MARGIN = function (t) { return t && "top" === t.split("-")[0] ? 12 : 24 }, e.TOP_BLEEDING = function (t) { var e = t.title && t.title.visible, n = t.description && t.description.visible; return e || n ? 12 : 24 }, e.BOTTOM_BLEEDING = function (t) { return i.some(t.interactions || [], (function (t) { return ("slider" === t.type || "scrollbar" === t.type) && "vertical" !== (t.cfg && t.cfg.type) })) ? 8 : 24 }, e.DEFAULT_GLOBAL_THEME = { width: 400, height: 400, bleeding: [e.TOP_BLEEDING, 24, e.BOTTOM_BLEEDING, 24], padding: "auto", defaultColor: "#5B8FF9", colors: e.COLOR_PLATE_10, colors_20: e.COLOR_PLATE_20, title: { padding: [24, 24, 24, 24], fontFamily: "PingFang SC", fontSize: 18, fill: "black", textAlign: "left", textBaseline: "top", lineHeight: 20, alignWithAxis: !1 }, description: { padding: [10, 24, e.DESCRIPTION_BOTTOM_MARGIN, 24], fontFamily: "PingFang SC", fontSize: 12, fill: "grey", textAlign: "left", textBaseline: "top", lineHeight: 16, alignWithAxis: !1 }, axis: { y: { visible: !0, position: "left", autoHideLabel: !1, autoRotateLabel: !1, autoRotateTitle: !0, grid: { visible: !0, style: { stroke: "rgba(0, 0, 0, 0.15)", lineWidth: 1, lineDash: [0, 0] } }, line: { visible: !1, style: { stroke: "rgba(0, 0, 0, 0.45)", lineWidth: 1 } }, tickLine: { visible: !1, style: { stroke: "rgba(0,0,0,0.45)", lineWidth: .5, length: 4 } }, label: { visible: !0, offset: 8, textStyle: { fill: "rgba(0,0,0,0.45)", fontSize: 12 } }, title: { visible: !1, offset: 12, style: { fill: "rgba(0, 0, 0, 0.65)", fontSize: 12, textBaseline: "bottom" } } }, x: { visible: !0, position: "bottom", autoHideLabel: !1, autoRotateLabel: !1, autoRotateTitle: !1, grid: { visible: !1, style: { stroke: "rgba(0, 0, 0, 0.15)", lineWidth: 1, lineDash: [0, 0] } }, line: { visible: !1, style: { stroke: "rgba(0, 0, 0, 0.45)", lineWidth: 1 } }, tickLine: { visible: !0, style: { length: 4, stroke: "rgba(0, 0, 0, 0.45)", lineWidth: .5 } }, label: { visible: !0, textStyle: { fill: "rgba(0,0,0,0.45)", fontSize: 12 }, offset: 16 }, title: { visible: !1, offset: 12, style: { fill: "rgba(0, 0, 0, 0.65)", fontSize: 12 } } }, circle: { autoHideLabel: !1, autoRotateLabel: !0, autoRotateTitle: !0, grid: { style: { lineDash: null, lineWidth: 1, stroke: "rgba(0, 0, 0, 0.15)" } }, line: { style: { lineWidth: 1, stroke: "rgba(0, 0, 0, 0.45)" } }, tickLine: { style: { lineWidth: 1, stroke: "rgba(0, 0, 0, 0.45)", length: 4, alignWithLabel: !0 } }, label: { offset: 16, textStyle: { fill: "rgba(0,0,0,0.45)", fontSize: 12 } }, title: { offset: 12, style: { fill: "rgba(0, 0, 0, 0.65)", fontSize: 12 } } }, radius: { label: { textStyle: { fill: "rgba(0,0,0,0.45)", fontSize: 12 } } } }, legend: { flipPage: !1, position: "bottom-center", innerPadding: [16, 16, 16, 16], margin: [0, 24, 24, 24] }, label: { offset: 12, textStyle: { fill: "#595959" }, style: { fill: "#595959", stroke: "#ffffff", lineWidth: 2 } }, tooltip: { "g2-tooltip": { boxShadow: "0px 0px 8px rgba(0,0,0,0.15)" } } } }, function (t, e) { function n(t) { return (n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } var i; i = function () { return this }(); try { i = i || new Function("return this")() } catch (t) { "object" === ("undefined" == typeof window ? "undefined" : n(window)) && (i = window) } t.exports = i }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(149); e.Line = i.default, e.LineConfig = i.LineConfig; var r = n(188); e.Density = r.default, e.DensityConfig = r.DensityConfig; var o = n(194); e.Column = o.default, e.ColumnConfig = o.ColumnConfig; var a = n(200); e.Bubble = a.default, e.BubbleConfig = a.BubbleConfig; var s = n(204); e.Scatter = s.default, e.ScatterConfig = s.ScatterConfig; var u = n(205); e.GroupColumn = u.default, e.GroupColumnConfig = u.GroupColumnConfig; var l = n(207); e.StackColumn = l.default, e.StackColumnConfig = l.StackColumnConfig; var c = n(210); e.PercentageStackColumn = c.default, e.PercentageStackColumnConfig = c.PercentageStackColumnConfig; var h = n(212); e.Histogram = h.default, e.HistogramConfig = h.HistogramConfig; var p = n(214); e.Bar = p.default, e.BarConfig = p.BarConfig; var f = n(219); e.StackBar = f.default, e.StackBarConfig = f.StackBarConfig; var d = n(221); e.PercentageStackBar = d.default, e.PercentageStackBarConfig = d.PercentageStackBarConfig; var g = n(223); e.GroupBar = g.default, e.GroupBarConfig = g.GroupBarConfig; var v = n(225); e.RangeBar = v.default, e.RangeBarConfig = v.RangeBarConfig; var y = n(229); e.RangeColumn = y.default, e.RangeColumnConfig = y.RangeColumnConfig; var m = n(233); e.Pie = m.default, e.PieConfig = m.PieConfig; var x = n(240); e.Ring = x.default, e.RingConfig = x.RingConfig; var _ = n(248); e.Radar = _.default, e.RadarConfig = _.RadarConfig; var b = n(251); e.Liquid = b.default, e.LiquidConfig = b.LiquidConfig; var w = n(255); e.Gauge = w.default, e.GaugeConfig = w.GaugeConfig; var M = n(259); e.Area = M.default, e.AreaConfig = M.AreaConfig; var S = n(260); e.StackArea = S.default, e.StackAreaConfig = S.StackAreaConfig; var C = n(263); e.PercentageStackArea = C.default, e.PercentageStackAreaConfig = C.PercentageStackAreaConfig; var O = n(265); e.Funnel = O.default, e.FunnelConfig = O.FunnelConfig; var k = n(274); e.Heatmap = k.default, e.HeatmapConfig = k.HeatmapConfig; var P = n(279); e.Matrix = P.default, e.MatrixConfig = P.MatrixConfig; var A = n(283); e.Waterfall = A.default, e.WaterfallConfig = A.WaterfallConfig; var L = n(288); e.Treemap = L.default; var T = n(300); e.StepLine = T.default, e.StepLineConfig = T.StepLineConfig; var D = n(302); e.WordCloud = D.default, e.WordCloudConfig = D.WordCloudConfig; var j = n(310); e.Rose = j.default, e.RoseConfig = j.RoseConfig; var I = n(314); e.Bullet = I.default, e.BulletConfig = I.BulletConfig }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(8)), s = n(9), u = n(11), l = n(17); n(159); var c = i.__importDefault(n(160)); n(179), n(180), n(182); var h = i.__importStar(n(183)), p = n(184); n(187); var f = { line: "line", point: "point" }, d = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "line", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { connectNulls: !1, smooth: !1, lineSize: 2, lineStyle: { lineJoin: "round", lineCap: "round" }, point: { visible: !1, size: 3, shape: "circle", style: { stroke: "#fff" } }, label: { visible: !1, type: "point" }, legend: { visible: !0, position: "top-left", wordSpacing: 4 } }) }, e.prototype.getOptions = function (e) { var n = t.prototype.getOptions.call(this, e), i = this.constructor.getDefaultOptions(); return r.deepMix({}, n, i, e) }, e.prototype.afterRender = function () { var e = this.options; e.responsive && "auto" !== e.padding && this.applyResponsive("afterRender"), t.prototype.afterRender.call(this) }, e.prototype.geometryParser = function (t, e) { return f[e] }, e.prototype.scale = function () { var e = this.options, n = {}; n[e.xField] = {}, r.has(e, "xAxis") && l.extractScale(n[e.xField], e.xAxis), n[e.yField] = {}, r.has(e, "yAxis") && l.extractScale(n[e.yField], e.yAxis), this.setConfig("scales", n), l.trySetScaleMinToZero(n[e.yField], r.map(e.data, (function (t) { return t[e.yField] }))), t.prototype.scale.call(this) }, e.prototype.coord = function () { }, e.prototype.addGeometry = function () { this.addLine(), this.addPoint() }, e.prototype.addLine = function () { var t = this.options; this.line = u.getGeom("line", "main", { plot: this }), t.label && this.label(), this.setConfig("element", this.line) }, e.prototype.addPoint = function () { var t = this.options; t.point && (t.point = r.deepMix({ visible: !1 }, t.point)), t.point && t.point.visible && (this.point = u.getGeom("point", "guide", { plot: this }), this.point.active = !1, this.setConfig("element", this.point)) }, e.prototype.label = function () { var t = this.options, e = t.label; !1 === e.visible || this.singleLineLabelCheck() ? this.line.label = !1 : ("line" === e.type && (e.offset = 0), this.line.label = s.getComponent("label", i.__assign({ plot: this, top: !0, labelType: e.type, fields: "line" === e.type ? [t.seriesField] : [t.yField] }, e))) }, e.prototype.animation = function () { t.prototype.animation.call(this); var e = this.options; !1 === e.animation ? (this.line.animate = !1, this.point && (this.point.animate = !1)) : r.has(e, "animation") && "clipingWithData" === e.animation.type && "auto" !== e.padding && (this.line.animate = { appear: { animation: "clipingWithData", easing: "easeLinear", duration: 1e4, yField: e.yField, seriesField: e.seriesField, plot: this } }, e.point && e.point.visible && (this.point.animate = !1)) }, e.prototype.applyInteractions = function () { t.prototype.applyInteractions.call(this); var e = this.view.get("interactions"), n = new p.LineActive({ view: this.view }); e.lineActive = n; var i = new p.LineSelect({ view: this.view }); e.lineSelect = i }, e.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, h) }, e.prototype.applyResponsive = function (t) { var e = this, n = c.default[t]; r.each(n, (function (t) { t.method(e) })) }, e.prototype.singleLineLabelCheck = function () { return !this.options.seriesField && this.options.label.type && "line" === this.options.label.type }, e }(a.default); e.default = d, o.registerPlotType("line", d) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.init = function () { var t = this.plot.options; this.config = { type: "area", position: { fields: [t.xField, t.yField] }, connectNulls: t.connectNulls || !1 }, t.smooth && (this.config.shape = { values: ["smooth"] }), (this._getColorMappingField() || t.color) && this.parseColor(), (t.areaStyle || t.area && t.area.style) && this.parseStyle() }, e.prototype.parseColor = function () { var t = this.plot.options, e = {}, n = this._getColorMappingField(); if (n && (e.fields = n), r.has(t, "color")) { var i = t.color; r.isString(i) ? e.values = [i] : r.isFunction(i) ? e.callback = i : e.values = i } this.config.color = e }, e.prototype.parseStyle = function () { var t = this.plot.options, e = t.areaStyle ? t.areaStyle : t.area.style, n = {}; r.isFunction(e) && t.seriesField ? (n.fields = [t.seriesField], n.callback = e) : n.cfg = e, this.config.style = n }, e.prototype._getColorMappingField = function () { for (var t = this.plot.options, e = 0, n = ["stackField", "seriesField"]; e < n.length; e++) { var i = n[e]; if (r.get(t, i)) return [t[i]] } }, e }(i.__importDefault(n(32)).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(5)), o = i.__importStar(n(0)), a = n(15), s = n(47), u = i.__importDefault(n(48)), l = r.Global.theme; r.registerShape("line", "miniLine", { draw: function (t, e) { for (var n = a.lineSimplification(t.points), i = [], r = 0; r < n.length; r++) { var s = n[r], u = 0 === r ? "M" : "L"; i.push([u, s.x, s.y]) } var c = o.deepMix({}, { lineJoin: "round", lineCap: "round" }, t.style); return e.addShape("path", { attrs: o.mix({ path: i, stroke: t.color || l.defaultColor, lineWidth: t.size || 2 }, c) }) } }), r.registerShape("line", "miniLineSmooth", { draw: function (t, e) { var n = a.lineSimplification(t.points), i = s.getSplinePath(n, !1, [[0, 0], [1, 1]]); return e.addShape("path", { attrs: o.mix({ path: i, stroke: t.color || l.defaultColor, lineWidth: t.size || 2 }, t.style) }) } }); var c = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.init = function () { t.prototype.init.call(this), this.parseShape() }, e.prototype.parseShape = function () { this.plot.options.smooth ? this.config.shape = { values: ["miniLineSmooth"] } : this.config.shape = { values: ["miniLine"] } }, e }(u.default); e.default = c }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importStar(n(15)), a = function () { function t(t) { this.type = "shape", this.shapes = t.shapes, this.nodes = [], this._parserNodes(), this.origion_nodes = r.deepMix([], this.nodes) } return t.prototype.measure = function (t) { return r.deepMix({}, o.bboxOnRotate(t), { shape: t }) }, t.prototype.measureNodes = function () { var t = this, e = [], n = []; r.each(this.shapes, (function (i, o) { var a = r.deepMix({}, t.nodes[o], t.measure(i)); 0 !== a.width && 0 !== a.height && (e.push(a), n.push(i)) })), this.nodes = e, this.shapes = n }, t.prototype.updateShapes = function () { }, t.prototype._parserNodes = function () { var t = this; r.each(this.shapes, (function (e) { var n = t.measure(e); t.nodes.push(n) })) }, t }(); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(162)), o = i.__importDefault(n(163)), a = i.__importDefault(n(164)), s = i.__importDefault(n(165)), u = i.__importDefault(n(166)), l = i.__importDefault(n(167)), c = i.__importDefault(n(168)); e.constraintsLib = { elementDist: a.default, elementDistVertical: s.default, elementCollision: o.default, elementWidth: u.default, columnWidth: r.default, ringThickness: c.default, minRingThickness: l.default }, e.registerResponsiveConstraint = function (t, n) { e.constraintsLib[t] = n } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(83)), o = i.__importDefault(n(84)), a = i.__importDefault(n(85)), s = i.__importDefault(n(170)), u = i.__importDefault(n(171)), l = i.__importDefault(n(86)), c = i.__importDefault(n(172)), h = i.__importDefault(n(173)), p = i.__importDefault(n(174)), f = i.__importDefault(n(175)), d = i.__importDefault(n(87)), g = i.__importDefault(n(26)), v = i.__importDefault(n(176)), y = i.__importDefault(n(177)); e.rulesLib = { textWrapper: y.default, textRotation: v.default, textAbbreviate: d.default, textHide: g.default, digitsAbbreviate: a.default, datetimeStringAbbrevaite: o.default, robustAbbrevaite: f.default, nodesResampling: l.default, nodesResamplingByAbbrevate: c.default, nodesResamplingByChange: h.default, nodesResamplingByState: p.default, nodeJitter: s.default, nodeJitterUpward: u.default, clearOverlapping: r.default }, e.registerResponsiveRule = function (t, n) { e.rulesLib[t] = n } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(26)); function a(t, e) { return !(t.bottom < e.top || e.bottom < t.top) && !(t.right < e.left || e.right < t.left) } e.default = function (t, e, n, i) { var s = i.nodes.nodes, u = s[n], l = []; if (!u.shape.get("blank")) for (var c = 0; c < s.length; c++) { var h = s[c], p = h.shape; if (c !== n && !p.get("blank")) a(u, h) && l.push(h) } l.length > 0 && (l.push(u), l.sort((function (t, e) { return e.top - t.top })), r.each(l, (function (t, e) { if (e > 0) { var n = t.shape; o.default(n), n.set("blank", !0) } }))) }, e.isNodeOverlap = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(169)); function a(t, e) { var n, i = Math.abs(t - e), o = { minute: [6e4, 36e5], hour: [36e5, 864e5], day: [864e5, 26784e5], month: [26784e5, 31536e6], year: [31536e6, 1 / 0] }; return r.each(o, (function (t, e) { i >= t[0] && i < t[1] && (n = e) })), n } function s(t, e) { return "year" === e ? t.getFullYear() : "month" === e ? t.getMonth() + 1 : "day" === e ? t.getDay() + 1 : "hour" === e ? t.getHours() + 1 : "minute" === e ? t.getMinutes() + 1 : void 0 } e.default = function (t, e, n, i) { var r, u = i.nodes.nodes; r = n === u.length - 1 ? u[n - 1].shape.get("origin").text : u[n + 1].shape.get("origin").text; var l = new Date(r), c = t.get("origin").text, h = new Date(c), p = u[0].shape.get("origin").text, f = new Date(p), d = u[u.length - 1].shape.get("origin").text, g = a(f, new Date(d)), v = a(h, l); if (g !== v) { if (0 !== n) { var y = u[n - 1].shape.get("origin").text; if (function (t, e, n) { var i = s(e, t), r = s(n, t); if (i !== r) return !1; return !0 }(g, h, new Date(y))) { m = function (t, e) { for (var n = ["year", "month", "day", "hour", "minute"], i = ["YYYY", "MM", "DD", "HH", "MM"], r = n.indexOf(t) + 1, o = n.indexOf(e), a = "", s = r; s <= o; s++)a += i[s], s < o && (a += "-"); return a }(g, v); return void t.attr("text", o.default.format(h, m)) } } } else if (0 !== n && n !== u.length - 1) { var m = function (t) { var e = ["year", "month", "day", "hour", "minute"].indexOf(t); return ["YYYY", "MM", "DD", "HH", "MM"][e] }(g); t.attr("text", o.default.format(h, m)) } }, e.isTime = function (t) { return /^(?:(?:[0-2][0-3])|(?:[0-1][0-9])):[0-5][0-9]$/.test(t) || /^(?:(?:[0-2][0-3])|(?:[0-1][0-9])):[0-5][0-9]:[0-5][0-9]$/.test(t) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(15), o = { k: { number: 1e3, index: 0 }, m: { number: 1e6, index: 1 }, b: { number: 1e9, index: 2 }, t: { number: 1e12, index: 3 } }; function a(t, e) { var n, i; if ("auto" === t.unit) { var r = Math.floor(Math.log(e) / Math.log(1e3)); i = ["k", "m", "b", "t"][r - 1], n = (e / Math.pow(1e3, r)).toFixed(t.decimal) } else if (t.unit) { var a = o[t.unit]; i = t.unit, n = (e / a.number).toFixed(t.decimal) } return { num: n, unitname: i } } e.default = function (t, e, n, s) { if (i.has(s, "node") && i.has(s.node, "node")) { var u = s.nodes.nodes, l = parseFloat(t.get("origin").text); if (0 !== l) if (e.formatter) t.attr("text", e.formatter(l)); else if (e.unit) { var c = a(e, l), h = c.num, p = c.unitname; t.attr("text", h + p) } else { var f = function (t) { var e = []; return i.each(t, (function (t) { var n = parseFloat(t.shape.get("origin").text); e.push(n) })), e }(u), d = (p = function (t) { var e = Math.floor(Math.log(t) / Math.log(1e3)); return ["k", "m", "b", "t"][e - 1] }(r.getMedian(f)), o[p].number); h = a({ unit: p, decimal: function (t, e) { var n = Math.floor(Math.log10(e)); if (!(t >= e)) { var i = Math.floor(Math.log10(t)); return Math.abs(i - n) } var r = t % e; if (r > 0) { var o = Math.floor(Math.log10(r)); return Math.abs(o - n) } return 0 }(function (t) { if (t.length >= 2) { var e = parseFloat(t[0].shape.get("origin").text), n = parseFloat(t[1].shape.get("origin").text); return Math.abs(e - n) } return 0 }(u), d) }, l).num; t.attr("text", h + p) } } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(26)); function a(t, e, n) { var i = []; r.each(t, (function (t) { "start" === t ? i.push(0 === e) : "end" === t ? i.push(e === n.length - 1) : r.isNumber(t) && i.push(e === t) })); for (var o = 0, a = i; o < a.length; o++) { if (!0 === a[o]) return !0 } return !1 } e.default = function (t, e, n, i) { var r = i.nodes.nodes, s = r.length % 2 != 0; if (!a(e.keep, n, r)) { var u = n % 2 == 0; (!s && u || s && !u) && o.default(t) } }, e.isKeep = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.default = function (t, e) { var n, i = e.abbreviateBy ? e.abbreviateBy : "end", r = t.attr("text"); "end" === i && (n = r[0] + "..."), "start" === i && (n = "..." + r[r.length - 1]), "middle" === i && (n = r[0] + "..." + r[r.length - 1]), t.resetMatrix(), t.attr({ text: n, textAlign: "center", textBaseline: "top" }) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = function () { function t(t) { i.assign(this, t), this.init() } return t.prototype.init = function () { this.type = this.getType(), this.shouldApply() && this.apply() }, t }(); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(80)), o = i.__importDefault(n(49)), a = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.shouldApply = function () { return !(!this.responsiveTheme.label || !this.responsiveTheme.label[this.type]) }, e.prototype.apply = function () { var t = this.plot.view.get("elements")[0].get("labels"), e = new r.default({ shapes: t }), n = this.responsiveTheme.label[this.type], i = n.constraints, a = n.rules; new o.default({ nodes: e, constraints: i, rules: a, plot: this.plot, region: this.plot.view.get("viewRange") }) }, e.prototype.getType = function () { return null }, e }(i.__importDefault(n(88)).default); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(10); e.EVENT_MAP = r.EVENT_MAP, e.onEvent = r.onEvent; i.assign(r.EVENT_MAP, { onPointClick: "point:click", onPointDblclick: "point:dblclick", onPointMousemove: "point:mousemove", onPointMouseenter: "point:mouseenter", onPointMouseleave: "point:mouseleave", onPointMousedown: "point:mousedown", onPointMouseup: "point:mouseup", onPointContextmenu: "point:contextmenu" }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(8)), s = n(11), u = n(17), l = i.__importDefault(n(202)), c = i.__importDefault(n(203)), h = n(9), p = i.__importStar(n(90)); n(52); var f = { scatter: "point" }, d = { point: "point" }, g = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "scatter", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { pointSize: 4, pointStyle: { strokeOpacity: 1, fillOpacity: .4, opacity: .65 }, xAxis: { grid: { visible: !0 }, line: { visible: !0 } }, yAxis: { grid: { visible: !0 }, line: { visible: !0 } }, tooltip: { visible: !0, shared: null, crosshairs: { type: "rect" } }, label: { visible: !1, position: "top" }, shape: "circle" }) }, e.prototype.afterRender = function () { t.prototype.afterRender.call(this), this.options.quadrant && this.options.quadrant.visible && !this.quadrant && (this.quadrant && this.quadrant.destroy(), this.quadrant = new l.default(i.__assign({ view: this.view, plotOptions: this.options }, this.options.quadrant)), this.quadrant.render()), this.options.trendline && this.options.trendline.visible && (this.trendline = new c.default(i.__assign({ view: this.view, plotOptions: this.options }, this.options.trendline)), this.trendline.render()) }, e.prototype.destroy = function () { this.quadrant && (this.quadrant.destroy(), this.quadrant = null), this.trendline && (this.trendline.destroy(), this.trendline = null), t.prototype.destroy.call(this) }, e.prototype.geometryParser = function (t, e) { return "g2" === t ? f[e] : d[e] }, e.prototype.scale = function () { var e = this.options, n = {}; n[e.xField] = {}, r.has(e, "xAxis") && u.extractScale(n[e.xField], e.xAxis), n[e.yField] = {}, r.has(e, "yAxis") && u.extractScale(n[e.yField], e.yAxis), this.setConfig("scales", n), t.prototype.scale.call(this) }, e.prototype.coord = function () { }, e.prototype.annotation = function () { }, e.prototype.addGeometry = function () { var t = s.getGeom("point", "circle", { plot: this }); this.points = t, this.options.label && this.options.label.visible && (this.points.label = this.extractLabel()), this.options.tooltip && this.options.tooltip.visible && (this.points.tooltip = this.extractTooltip(), this.setConfig("tooltip", i.__assign({ showTitle: !1 }, this.options.tooltip))), this.setConfig("element", t) }, e.prototype.animation = function () { t.prototype.animation.call(this), !1 === this.options.animation && (this.points.animate = !1) }, e.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, e || p) }, e.prototype.extractLabel = function () { var t = this.options, e = t.label; return (!e || !1 !== e.visible) && h.getComponent("label", i.__assign({ plot: this, labelType: "scatterLabel", fields: [t.yField], position: "right", offset: 0 }, e)) }, e.prototype.extractTooltip = function () { var t = this.options; return { fields: [t.xField, t.yField] } }, e }(a.default); e.default = g, o.registerPlotType("scatter", g) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(208)), s = n(9), u = i.__importDefault(n(33)); n(209); var l = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "stackColum", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { legend: { visible: !0, position: "right-top" }, label: { visible: !1, position: "middle", offset: 0, adjustColor: !0 }, connectedArea: { visible: !1, triggerOn: "mouseenter" } }) }, e.prototype.init = function () { this.options.connectedArea.visible && (this.options.tooltip.crosshairs = null), t.prototype.init.call(this) }, e.prototype.afterRender = function () { var e = this.options; e.connectedArea.visible && (this.connectedArea = new a.default(i.__assign({ view: this.view, field: e.stackField, animation: !1 !== e.animation }, e.connectedArea))), t.prototype.afterRender.call(this) }, e.prototype.adjustColumn = function (t) { t.adjust = [{ type: "stack" }] }, e.prototype.extractLabel = function () { var t = this.options, e = this.getLabelOptionsByPosition(t.label.position), n = r.deepMix({}, e, this.options.label); return (!n || !1 !== n.visible) && s.getComponent("label", i.__assign({ plot: this, labelType: "stackColumnLabel", fields: [t.yField] }, n)) }, e }(u.default); e.default = l, o.registerPlotType("stackColumn", l) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = i.__importStar(n(0)), a = n(21), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.setLabelPosition = function (t, e, n, i) { var r = i; o.isFunction(r) && (r = r(e)); var a = this.get("coord"), s = a.convertPoint(e.points[0]), u = a.convertPoint(e.points[2]), l = s.x > u.x, c = (s.x - u.x) / 2 * -1, h = (s.y - u.y) / 2 * -1; switch (r) { case "bottom": t.x -= c, t.y += h, t.textAlign = t.textAlign || "center"; break; case "top": t.x -= c, t.y -= h, t.textAlign = t.textAlign || "center"; break; case "left": t.x -= 2 * c, t.textAlign = t.textAlign || (l ? "right" : "left"); break; case "middle": t.x -= c, t.textAlign = t.textAlign || "center"; break; case "right": t.textAlign = t.textAlign || (l ? "right" : "left") } }, e.prototype.adjustOffset = function (t, e) { var n = this.get("labelsRenderer"), i = n.get("items"), r = n.get("group").get("children"), a = this.get("coord"); o.each(i, (function (e, n) { var i = r[n], o = a.convertPoint(t[n].points[0]), s = a.convertPoint(t[n].points[2]); o.x > s.x && e.offset && (e.x -= 2 * e.offset, i.attr("x", i.attr("x") - 2 * e.offset)) })) }, e.prototype.showLabels = function (e, n) { var i = this; t.prototype.showLabels.call(this, e, n), this.adjustOffset(e, n); var r = this.get("labelsRenderer"), a = r.get("group").get("children"), s = r.get("items"), u = this.get("element").get("view"), l = this.get("labelOptions"), c = l.adjustColor, h = l.adjustPosition; o.each(a, (function (t, e) { var r = t, o = s[e], a = r.get("origin"), u = i.get("element").getShapeId(a), l = i._getShape(u, n); h && i.adjustPosition(r, l, o), c && i.adjustColor(r, l) })), u.get("canvas").draw() }, e.prototype._getShape = function (t, e) { var n; return o.each(e, (function (e) { var i = e; i.id === t && (n = i) })), n }, e.prototype.adjustPosition = function (t, e, n) { var i = t.getBBox(), r = e.getBBox(); if (r.width <= i.width && "right" !== n.position) { var o = r.maxX + 20; t.attr("x", o) } }, e.prototype.adjustColor = function (t, e) { var n = t.getBBox(), i = e.getBBox(); if (n.minX >= i.minX && n.maxX <= i.maxX) { var r = e.attr("fill"), s = e.attr("opacity") ? e.attr("opacity") : 1, u = a.rgb2arr(r), l = Math.round(.299 * u[0] + .587 * u[1] + .114 * u[2]) / s, c = this._mappingColor([{ from: 0, to: 85, color: "white" }, { from: 85, to: 170, color: "#F6F6F6" }, { from: 170, to: 255, color: "black" }], l); t.attr("fill", c), "black" !== c ? (t.attr("stroke", null), t.attr("lineWidth", 0)) : (t.attr("stroke", "white"), t.attr("lineWidth", 2)) } else if (n.maxY < i.minY) { var h = this.get("theme"), p = o.get(h, "label.textStyle.fill", "black"); t.attr("fill", p) } }, e.prototype._mappingColor = function (t, e) { var n; return o.each(t, (function (t) { var i = t; e >= i.from && e < i.to && (n = i.color) })), n }, e }(r.ElementLabels); e.BarLabels = s, r.registerElementLabels("barLabel", s) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = n(9), s = i.__importDefault(n(39)); n(220); var u = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "stackBar", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { xAxis: { visible: !0, autoHideLabel: !1, autoRotateLabel: !1, autoRotateTitle: !1, grid: { visible: !0 }, line: { visible: !1 }, tickLine: { visible: !0 }, label: { visible: !0 }, title: { visible: !0, offset: 12 } }, yAxis: { visible: !0, autoHideLabel: !1, autoRotateLabel: !1, autoRotateTitle: !0, grid: { visible: !1 }, line: { visible: !1 }, tickLine: { visible: !1 }, label: { visible: !0 }, title: { visible: !1, offset: 12 } } }) }, e.prototype.adjustBar = function (t) { t.adjust = [{ type: "stack" }] }, e.prototype.extractLabel = function () { var t = this.options, e = t.label; return !1 !== e.visible && a.getComponent("label", i.__assign({ plot: this, labelType: "stackBarLabel", fields: [t.xField] }, e)) }, e }(s.default); e.default = u, o.registerPlotType("stackBar", u) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(8)), s = n(9), u = n(11), l = i.__importDefault(n(234)); n(96), n(97), n(237); var c = i.__importStar(n(238)); n(239); var h = { pie: "interval" }, p = { pie: "column" }, f = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "pie", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { width: 400, height: 400, title: { visible: !1 }, description: { visible: !1 }, forceFit: !0, padding: "auto", radius: .8, label: { visible: !0, type: "inner", autoRotate: !1, allowOverlap: !1, line: { smooth: !0 } }, legend: { visible: !0, position: "right-center" }, tooltip: { visible: !0, shared: !1, crosshairs: null }, pieStyle: { stroke: "white", lineWidth: 1 } }) }, e.prototype.getOptions = function (e) { var n = this.constructor.getDefaultOptions(); return r.deepMix({}, t.prototype.getOptions.call(this, e), n, e) }, e.prototype.afterInit = function () { t.prototype.afterInit.call(this); var e = this.options; if (e.label && e.label.visible) { var n = e.label; if ("spider" === n.type) { var i = new l.default({ view: this.view, fields: e.colorField ? [e.angleField, e.colorField] : [e.angleField], style: n.style ? n.style : {}, formatter: !!e.label.formatter && e.label.formatter, offsetX: e.label.offsetX, offsetY: e.label.offsetY }); this.spiderLabel = i } } }, e.prototype.geometryParser = function (t, e) { return "g2" === t ? h[e] : p[e] }, e.prototype.scale = function () { var t = this.options, e = {}; e[t.angleField] = {}, e[t.colorField] = { type: "cat" }, this.setConfig("scales", e) }, e.prototype.processData = function (t) { var e = this.options.angleField; return t.map((function (t) { var n; return i.__assign(i.__assign({}, t), ((n = {})[e] = "string" == typeof t[e] ? Number.parseFloat(t[e]) : t[e], n)) })) }, e.prototype.axis = function () { }, e.prototype.coord = function () { var t = this.options, e = { type: "theta", cfg: { radius: t.radius, innerRadius: t.innerRadius || 0 } }; this.setConfig("coord", e) }, e.prototype.addGeometry = function () { var t = this.options, e = u.getGeom("interval", "main", { plot: this, positionFields: [t.angleField] }); e.adjust = [{ type: "stack" }], this.pie = e, t.label && this.label(), this.setConfig("element", e) }, e.prototype.animation = function () { t.prototype.animation.call(this), !1 === this.options.animation && (this.pie.animate = !1) }, e.prototype.annotation = function () { }, e.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, c) }, e.prototype.label = function () { var t = this.options, e = i.__assign({}, t.label); if (e = this.adjustLabelDefaultOptions(this.options), this.showLabel()) { "inner" === e.type ? e.labelLine = !1 : e.labelLine = !0; var n = e.type; -1 !== ["spider"].indexOf(n) && (n = null), this.pie.label = s.getComponent("label", i.__assign({ plot: this, labelType: n, fields: t.colorField ? [t.angleField, t.colorField] : [t.angleField] }, e)) } else this.pie.label = !1 }, e.prototype.showLabel = function () { var t = this.options; return t.label && !0 === t.label.visible && "spider" !== t.label.type }, e.prototype.adjustLabelDefaultOptions = function (t) { var e = i.__assign({}, t.label); return e && "inner" === e.type && (e = r.deepMix({}, { offset: -1 / 3 * 100 + "%", style: { textAlign: "center" } }, e)), e && "outer" === e.type && (e = r.deepMix({}, { offset: 20 }, e)), e }, e }(a.default); e.default = f, o.registerPlotType("pie", f) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = i.__importStar(n(0)), a = n(34), s = i.__importDefault(n(54)), u = n(97); e.DEFAULT_OFFSET = 16, e.CROOK_DISTANCE = 4; var l = function (t) { function n() { return null !== t && t.apply(this, arguments) || this } return i.__extends(n, t), n.prototype.adjustPosition = function (t, e, n, i) { var r = this; this._adjustLabelPosition(t, n, i); var a = o.filter(t, (function (t) { return "right" === o.find(r.anchors, (function (e) { return e.id === t.id })).textAlign }));[o.filter(t, (function (t) { return "left" === o.find(r.anchors, (function (e) { return e.id === t.id })).textAlign })), a].forEach((function (t, e) { r._antiCollision(t, n, i, !e) })) }, n.prototype.adjustLines = function (t, e, n, i, r) { var a = this, s = this.getLabelOptions(); o.each(t, (function (t, e) { var o = n[e], u = a._getLinePath(t, i, r); if (o.attr("path", u), s.line) for (var l in s.line) o.attr(l, s.line[l]); o.set("visible", t.get("visible")) })) }, n.prototype.getOffsetOfLabel = function () { var t = this.getLabelOptions().offset; return o.isString(t) && (t = u.percent2Number(t)), void 0 === t ? e.DEFAULT_OFFSET : t < 2 * e.CROOK_DISTANCE ? t / 2 : t - e.CROOK_DISTANCE }, n.prototype._antiCollision = function (t, e, n, i) { var r = this, s = this.getLabelHeight(), u = this.anchorRadius, l = e.getCenter(), c = Math.min(n.height, Math.max(2 * u + 2 * s, t.length * s)), h = Math.floor(c / s); this.get("labelOptions").allowOverlap || t.slice(h).forEach((function (t) { t.set("visible", !1) })), t.splice(h, t.length - h), t.sort((function (t, e) { return t.getBBox().y - e.getBBox().y })); for (var p, f = !0, d = l.y + c / 2, g = l.y - c / 2, v = t.map((function (t) { var e = t.getBBox(); return e.maxY > d && (d = Math.min(n.maxY, e.maxY)), e.minY < g && (g = Math.max(n.minY, e.minY)), { text: t.attr("text"), size: s, pos: e.y, targets: [] } })), y = 0; y < v.length;)y === v.length - 1 ? v[y].targets[0] = d : v[y].targets[0] = v[y + 1].pos - v[y + 1].size / 2, y++; for (; f;)for (v.forEach((function (t) { var e = o.last(t.targets); t.pos = Math.max(g, Math.min(t.pos, e - t.size)) })), f = !1, p = v.length; p--;)if (p > 0) { var m = v[p - 1], x = v[p]; if (m.pos + m.size > x.pos) { m.size += x.size, m.targets = m.targets.concat(x.targets); var _ = o.last(m.targets); m.pos + m.size > _ && (m.pos = _ - m.size), v.splice(p, 1), f = !0 } else m.targets.splice(-1, 1, x.pos) } p = 0, v.forEach((function (e) { var n = s / 2; e.targets.forEach((function () { t[p].attr("y", e.pos + n), n += s, p++ })) })); var b = [], w = []; t.forEach((function (t) { var e = r.anchors.find((function (e) { return e.id === t.id })); e.angle >= 0 && e.angle <= Math.PI ? w.push(t) : b.push(t) })), [b, w].forEach((function (s, c) { if (s.length) { var h = c ? o.last(s).getBBox().maxY - l.y : l.y - o.head(s).getBBox().minY; h = Math.max(u, h); var p = r.getOffsetOfLabel(), f = r.getCrookDistance(), d = Math.max.apply(0, o.map(t, (function (t) { return t.getBBox().width }))) + p + f, g = Math.max(u, Math.min((h + u) / 2, l.x - (n.minX + d))), v = g * g, y = h * h; s.forEach((function (t) { var n = t.getBBox(), o = (n.minX, n.width, n.minY + n.height / 2), s = Math.pow(o - l.y, 2), u = r.anchors.find((function (e) { return e.id === t.id })), c = a.getEndPoint(l, u.angle, e.getRadius()), h = (i ? 1 : -1) * f * 2; if (s > y) console.warn("异常(一般不会出现)", t.attr("text")), t.attr("x", c.x + h); else { var p = l.x + (i ? 1 : -1) * Math.sqrt((1 - s / y) * v); if (l.x === c.x && o === c.y || l.y === c.y && p === c.x) p = c.x; else { var d = (l.y - c.y) / (l.x - c.x), g = (o - c.y) / (p - c.x), m = Math.atan((d - g) / (1 + d * g)); Math.cos(m) > 0 && (i ? p < c.x : p > c.x) && (p = c.x) } t.attr("x", p + h) } })) } })) }, n.prototype._adjustLabelPosition = function (t, e, n) { var i = this, r = this.getCrookDistance(); t.forEach((function (t) { var e = i.anchors.find((function (e) { return e.id === t.id })), n = "left" === e.textAlign; t.attr("x", e.x + (n ? 2 * r : 2 * -r)), t.attr("y", e.y), t.attr("textBaseline", "middle") })) }, n.prototype._getLinePath = function (t, e, n) { var i = this.getLabelOptions(), r = !!i.line && i.line.smooth, o = this.anchors.find((function (e) { return e.id === t.id })), s = o.angle, u = e.getCenter(), l = this.getCrookDistance(), c = a.getEndPoint(u, s, e.getRadius()), h = a.getEndPoint(u, s, e.getRadius() + 4), p = c.x - o.x <= 0, f = { x: t.attr("x") + (p ? -l : l), y: t.attr("y") }, d = ["C", f.x + (p ? -4 : 4), f.y, 2 * h.x - c.x, 2 * h.y - c.y, h.x, h.y], g = ["L", h.x, h.y], v = r ? d : g; return ["M", f.x, f.y].concat(v).concat("L", c.x, c.y).join(",") }, n.prototype.getCrookDistance = function () { var t = this.get("labelOptions").offset; return t < 2 * e.CROOK_DISTANCE ? t / 2 : e.CROOK_DISTANCE }, n.prototype.getLabelHeight = function () { var t = this.get("labelOptions"); if (!t.labelHeight) { var e = this.get("labelsRenderer").get("group").get("children"); return o.head(e) ? o.head(e).getBBox().height : 14 } return t.labelHeight }, n.prototype.getDefaultOffset = function (n) { var i = t.prototype.getDefaultOffset.call(this, n); return void 0 === i ? e.DEFAULT_OFFSET : i <= e.CROOK_DISTANCE ? 1 : i - e.CROOK_DISTANCE }, n }(s.default); r.registerElementLabels("outer", l) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = i.__importStar(n(236)), a = n(34), s = i.__importDefault(n(54)), u = n(15); function l(t) { return Number(t.endsWith("%") ? t.slice(0, -1) : t) / 100 } e.percent2Number = l; var c = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.adjustPosition = function (t, e, n) { var i = this, r = n.getCenter(), o = n.getRadius() + this.getOffsetOfLabel(); t.forEach((function (s, u) { var l = e.find((function (t) { return t.id === s.id })), c = a.getEndPoint(r, l.angle, o), h = c.x, p = c.y; if (s.attr("x", h), s.attr("y", p), s.attr("textBaseline", "middle"), u > 0) { var f = t[u - 1]; i.resolveCollision(s, f, l, n) } })) }, e.prototype.adjustLines = function (t, e, n, i) { n.forEach((function (t) { return t.set("visible", !1) })) }, e.prototype.adjustLabelText = function () { }, e.prototype.getOffsetOfLabel = function () { var t = this.get("labelOptions").offset, e = this.get("coord").getRadius(); return o.isString(t) && (t = e * l(t)), t > 0 ? 0 : t }, e.prototype.resolveCollision = function (t, e, n, i) { var r = n.angle, s = t.getBBox(), l = e.getBBox(), c = { x: (s.minX + s.maxX) / 2, y: (s.minY + s.maxY) / 2 }, h = o.clone(c), p = o.clone(c); if (e.id !== t.id) { var f = a.getOverlapInfo(s, l), d = f.xOverlap, g = f.yOverlap; if (d && (h.x = c.x + d, h.y = c.y + Math.tan(r) * d), g) { var v = g, y = i.getCenter(); v = c.y < y.y ? v < 0 ? v : l.minY - s.maxY : v > 0 ? v : l.maxY - s.minY, p.y = c.y + v, p.x = c.x + v / Math.tan(r) } var m = u.distBetweenPoints(c, h) < u.distBetweenPoints(c, p) ? h : p; t.attr("x", m.x), t.attr("y", m.y) } }, e }(s.default); r.registerElementLabels("inner", c) }, function (t, e) { (function (e) { t.exports = e }).call(this, {}) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = n(9), s = i.__importDefault(n(50)); n(261), n(262); var u = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "stackArea", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { label: { visible: !1, type: "area" } }) }, e.prototype.label = function () { var t = this.options, e = t.label; if (e && !1 === e.visible) this.area.label = !1; else { var n = this.getLabelType(e); "areaLine" !== n && "area" !== n || (e.offset = 0), "area" === n && (e.style = r.deepMix({}, e.style, { lineWidth: 0, stroke: "rgba(0,0,0,0)" })), this.area.label = a.getComponent("label", i.__assign({ fields: [this.getLabelField(n, t)], labelType: n, plot: this }, e)) } }, e.prototype.adjustArea = function (t) { t.adjust = [{ type: "stack" }] }, e.prototype.adjustLine = function (t) { t.adjust = [{ type: "stack" }] }, e.prototype.adjustPoint = function (t) { t.adjust = [{ type: "stack" }] }, e.prototype.getLabelField = function (t, e) { return { point: e.yField, areaLine: e.stackField, area: e.stackField }[t] }, e.prototype.getLabelType = function (t) { return "line" === t.type ? "areaLine" : t.type }, e }(s.default); e.default = u, o.registerPlotType("stackArea", u) }, function (t, e, n) { "use strict"; var i; Object.defineProperty(e, "__esModule", { value: !0 }); var r = n(65); e.default = ((i = {})["g2-tooltip"] = { position: "absolute", display: "none", zIndex: 8, transition: "visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)", backgroundColor: "rgba(255, 255, 255, 0.9)", boxShadow: "0px 0px 10px #aeaeae", borderRadius: "3px", color: "rgb(87, 87, 87)", fontSize: "12px", fontFamily: r.FONT_FAMILY, lineHeight: "20px", padding: "10px 10px 6px 10px" }, i["g2-tooltip-title"] = { marginBottom: "4px" }, i["g2-tooltip-list"] = { margin: 0, listStyleType: "none", padding: 0 }, i["g2-tooltip-list-item"] = { marginBottom: "4px" }, i["g2-tooltip-marker"] = { width: "5px", height: "5px", borderRadius: "50%", display: "inline-block", marginRight: "8px" }, i["g2-tooltip-value"] = { display: "inline-block", float: "right", marginLeft: "30px" }, i) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0); e.splitPoints = function (t) { var e = [], n = t.x, r = t.y; return r = i.isArray(r) ? r : [r], i.each(r, (function (t, r) { var o = { x: i.isArray(n) ? n[r] : n, y: t }; e.push(o) })), e }, e.setFillStyle = function (t, e) { var n = e.color, r = e.opacity; n && (t.fill = n), i.isNumber(r) && (t.opacity = t.fillOpacity = r) }, e.setStrokeStyle = function (t, e) { var n = e.color, r = e.opacity; n && (t.stroke = n), i.isNumber(r) && (t.opacity = t.strokeOpacity = r) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(2), a = function () { function t(t) { this.destroyed = !1, this.dataSlides = {}; var e = this.getDefaultOptions(); this.options = r.deepMix({}, e, t), this.view = this.options.view, this.afterRender = !0, this.init() } return t.prototype.init = function () { this.layout = this.getLayout(), this.width = this.options.width ? this.options.width : this.getDefaultWidth(), this.height = this.options.height ? this.options.height : this.getDefaultHeight(); var t = this.options.plot.container; this.container = t.addGroup() }, t.prototype.render = function () { var t = this.view.get("scales"), e = this.options.plot.options.colorField; this.colorScale = t[e]; var n = this.colorScale, i = n.min, r = n.max, o = this.options.plot.options.color; "horizontal" === this.layout ? this.renderHorizontal(i, r, o) : this.renderVertical(i, r, o), this.legendLayout(), this.addInteraction() }, t.prototype.hide = function () { this.container.set("visible", !1), this.options.plot.canvas.draw() }, t.prototype.show = function () { this.container.set("visible", !0), this.options.plot.canvas.draw() }, t.prototype.clear = function () { this.container && this.container.clear() }, t.prototype.destroy = function () { this.container && this.container.remove(), this.destroyed = !0 }, t.prototype.getBBox = function () { var t = this.container.getBBox(); return new o.BBox(this.x, this.y, t.width, t.height) }, t.prototype.renderVertical = function (t, e, n) { var o = this, a = (e - t) / (n.length - 1), s = 1 / (n.length - 1), u = this.height / (n.length - 1), l = "l(90)"; r.each(n, (function (t, e) { l += s * e + ":" + t + " " })), this.container.addShape("rect", { attrs: { x: 0, y: 0, width: this.width, height: this.height, fill: l } }), r.each(n, (function (t, e) { var n = u * e; o.container.addShape("path", { attrs: i.__assign({ path: [["M", 0, n], ["L", o.width, n]] }, o.options.ticklineStyle) }); var r = Math.round(a * e); o.container.addShape("text", { attrs: i.__assign({ text: r, textAlign: "left", textBaseline: "middle", x: o.width + 4, y: n }, o.options.text.style) }) })); var c = [["M", -10, -7], ["L", 0, 0], ["L", -10, 7], ["Z"]]; this.anchor = this.container.addShape("path", { attrs: i.__assign({ path: c }, this.options.anchorStyle) }), this.anchor.set("visible", !1) }, t.prototype.renderHorizontal = function (t, e, n) { var o = this, a = (e - t) / (n.length - 1), s = 1 / (n.length - 1), u = this.width / (n.length - 1), l = "l(0)"; r.each(n, (function (t, e) { l += s * e + ":" + t + " " })), this.container.addShape("rect", { attrs: { x: 0, y: 0, width: this.width, height: this.height, fill: l } }), r.each(n, (function (t, e) { var n = u * e; o.container.addShape("path", { attrs: i.__assign({ path: [["M", n, 0], ["L", n, o.height]] }, o.options.ticklineStyle) }); var r = Math.round(a * e); o.container.addShape("text", { attrs: i.__assign({ text: r, textAlign: "center", textBaseline: "top", x: n, y: o.height + 4 }, o.options.text.style) }) })); var c = [["M", 0, 0], ["L", -7, -10], ["L", 7, -10], ["Z"]]; this.anchor = this.container.addShape("path", { attrs: i.__assign({ path: c }, this.options.anchorStyle) }), this.anchor.set("visible", !1) }, t.prototype.getLayout = function () { var t = this.options.position.split("-"); return this.position = t[0], "left" === t[0] || "right" === t[0] ? "vertical" : "horizontal" }, t.prototype.getDefaultWidth = function () { return "horizontal" === this.layout ? this.view.get("panelRange").width : 10 }, t.prototype.getDefaultHeight = function () { return "vertical" === this.layout ? this.view.get("panelRange").height : 10 }, t.prototype.legendLayout = function () { var t = this, e = this.view.get("panelRange"), n = this.options.plot.getPlotTheme().bleeding; r.isArray(n) && r.each(n, (function (e, i) { "function" == typeof n[i] && (n[i] = n[i](t.options.plot.options)) })); var i = this.container.getBBox(), o = 0, a = 0, s = this.options.position.split("-"), u = this.options.plot.width, l = this.options.plot.height; "left" === s[0] ? o = n[3] : "right" === s[0] ? o = u - n[1] - i.width : "center" === s[1] ? o = this.width === e.width ? e.x : (u - i.width) / 2 : "left" === s[1] ? o = n[3] : "right" === s[1] && (o = this.options.plot.width - n[1] - i.width), "bottom" === s[0] ? a = l - n[2] - i.height : "top" === s[0] ? a = this.getTopPosition(n) : "center" === s[1] ? a = this.height === e.height ? e.y : (l - i.height) / 2 : "top" === s[1] ? a = n[0] : "bottom" === s[1] && (a = l - n[2] - i.height), this.x = o, this.y = a, this.container.translate(o, a) }, t.prototype.getDefaultOptions = function () { return { text: { style: { fontSize: 12, fill: "rgba(0, 0, 0, 0.45)" } }, ticklineStyle: { lineWidth: 1, stroke: "rgba(0, 0, 0, 0.8)" }, anchorStyle: { fill: "rgba(0,0,0,0.5)" }, triggerOn: "mousemove" } }, t.prototype.addInteraction = function () { var t = this, e = ("rect" === this.options.plot.options.shapeType ? "polygon" : "point") + ":" + this.options.triggerOn, n = "label:" + this.options.triggerOn, i = this.options.plot.options.colorField, r = this.colorScale, o = r.min, a = r.max; this.view.on(e, (function (e) { var n = (e.data._origin[i] - o) / (a - o); t.moveAnchor(n) })), this.view.on(n, (function (e) { var n = (e.data[i] - o) / (a - o); t.moveAnchor(n) })), this.options.plot.canvas.on("mouseleave", (function (e) { t.anchor.set("visible", !1) })) }, t.prototype.moveAnchor = function (t) { if (this.anchor.set("visible", !0), "vertical" === this.layout) { var e = this.height * t; (n = [1, 0, 0, 0, 1, 0, 0, 0, 1])[7] = e, this.anchor.stopAnimate(), this.anchor.animate({ matrix: n }, 400, "easeLinear") } else { var n; e = this.width * t; (n = [1, 0, 0, 0, 1, 0, 0, 0, 1])[6] = e, this.anchor.stopAnimate(), this.anchor.animate({ matrix: n }, 400, "easeLinear") } }, t.prototype.getTopPosition = function (t) { return this.options.plot.description ? this.options.plot.description.getBBox().maxY + 10 : this.options.plot.title ? this.options.plot.title.getBBox().maxY + 10 : t[0] }, t }(); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = n(11), s = i.__importDefault(n(35)), u = i.__importDefault(n(319)), l = i.__importStar(n(320)), c = { progress: "interval" }, h = { interval: "progress" }, p = ["#55A6F3", "#E8EDF3"], f = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "progress", e.isEntered = !1, e } return i.__extends(e, t), e.prototype.processProps = function () { var t = this.options; t.data = this.processData(); var e = { padding: [0, 0, 0, 0], xField: "value", yField: "1", stackField: "type", barSize: t.size ? t.size : this.getSize(), barStyle: t.progressStyle, color: this.parseColorProps(t) || p }; t = r.mix(t, e) }, e.prototype.init = function () { this.processProps(), t.prototype.init.call(this) }, e.prototype.update = function (t) { var e = this.options; if (r.hasKey(t, "percent") && (e.percent = t.percent, this.changeData(this.processData())), t.style && (this.styleUpdateAnimation(t.style), this.updateColorConfigByStyle(t.style)), t.color) { var n = void 0; r.isArray(t.color) ? (this.options.color = t.color, n = [{ fill: t.color[0] }, { fill: t.color[1] }]) : (this.options.color[0] = t.color, n = { fill: t.color }), this.styleUpdateAnimation(n) } t.marker && (this.updateMarkers(t.marker), this.options.marker = t.marker) }, e.prototype.destroy = function () { this.markers && this.markers.length > 0 && (r.each(this.markers, (function (t) { t.destroy() })), this.markers = []), t.prototype.destroy.call(this) }, e.prototype.afterRender = function () { var t = this; this.options.marker && !this.markers && (this.markers = [], r.each(this.options.marker, (function (e) { var n = r.mix({ canvas: t.canvas, view: t.view, progressSize: t.options.barSize }, e), i = new u.default(n); t.markers.push(i) }))); var e = this.view.get("elements")[0].get("container"), n = e.getBBox(), i = e.addShape("rect", { attrs: { width: n.width, height: n.height, x: n.minX, y: n.minY, fill: "rgba(0,0,0,0)" } }); this.canvas.draw(), i.on("mouseenter", (function (e) { t.isEntered = !0, t.view.emit("progress:mouseenter", e) })), i.on("mouseleave", (function (e) { t.isEntered = !1, t.view.emit("progress:mouseleave", e) })), this.canvas.get("canvasDOM").addEventListener("mouseleave", (function (e) { t.isEntered && (t.view.emit("progress:mouseleave", e), t.isEntered = !1) })) }, e.prototype.geometryParser = function (t, e) { return "g2" === t ? c[e] : h[e] }, e.prototype.coord = function () { this.setConfig("coord", { actions: [["transpose"]] }) }, e.prototype.addGeometry = function () { var t = this.options, e = a.getGeom("interval", "main", { positionFields: [t.yField, t.xField], plot: this }); e.adjust = [{ type: "stack" }], r.has(t, "animation") && (e.animate = t.animation), this.setConfig("element", e) }, e.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, l) }, e.prototype.parseColorProps = function (t) { var e; if (t.color) { if (e = r.isFunction(t.color) ? t.color(t.percent) : t.color, r.isString(e)) { var n = r.clone(p); return n[0] = e, n } return e } return t.color }, e.prototype.processData = function () { var t = this.options; return [{ type: "current", value: t.percent }, { type: "rest", value: 1 - t.percent }] }, e.prototype.updateMarkers = function (t) { var e = t.length, n = this.getUpdateAnimationOptions(); if (r.each(this.markers, (function (i, r) { r > e - 1 ? i.destroy() : i.update(t[r], n.duration, n.easing) })), this.markers.length < e) for (var i = this.markers.length; i < e; i++) { var o = r.deepMix({}, { canvas: this.canvas, view: this.view, progressSize: this.options.barSize }, t[i]), a = new u.default(o); this.markers.push(a) } }, e.prototype.getSize = function () { return this.height >= 50 ? 10 : 4 }, e.prototype.styleUpdateAnimation = function (t) { var e = this.getUpdateAnimationOptions(), n = e.duration, i = e.easing, o = [], a = this.view.get("elements"); r.each(a, (function (t) { if ("interval" === t.get("shapeType")) { var e = t.getShapes(); o.push.apply(o, e) } })), r.isArray(t) ? r.each(t, (function (t, e) { o[e].animate(t, n, i) })) : o[0].animate(t, n, i) }, e.prototype.getUpdateAnimationOptions = function () { var t = 450, e = "easeQuadInOut", n = this.options.animation; return n && n.update && (n.update.duration && (t = n.update.duration), n.update.easing && (e = n.update.easing)), { duration: t, easing: e } }, e.prototype.updateColorConfigByStyle = function (t) { var e = this; r.isArray(t) ? r.each(t, (function (t, n) { t.fill && (e.options.color[n] = t.fill) })) : t.fill && (this.options.color[0] = t.fill) }, e }(s.default); e.default = f, o.registerPlotType("progress", f) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(23), o = ["line", "area", "column", "bar", "bubble", "scatter"]; function a(t, e) { return !!i.contains(o, t) && (("line" !== t || !i.has(e, "seriesField")) && ("column" !== t || !i.has(e, "colorField"))) } e.getColorConfig = function (t, e, n) { if (e.color) return { single: !1, color: e.color }; var i = a(t, e), o = r.getGlobalTheme().colors; return i && !e.color ? { single: !0, color: o[n] } : void 0 }, e.isSingleGraph = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(2), o = i.__importStar(n(0)), a = n(23); e.getOverlappingPadding = function (t, e) { var n = a.getGlobalTheme().bleeding; o.isArray(n) && o.each(n, (function (t, e) { "function" == typeof n[e] && (n[e] = n[e]({})) })); var i = t.layerBBox.minX, s = t.layerBBox.maxX, u = o.clone(t.layerBBox.minY), l = t.layerBBox.maxY; o.each(e, (function (t) { var e = t.position, n = t.getBBox(), r = n.minX, o = n.maxX, a = n.minY, c = n.maxY; c > u && c < l && "top" === e && (u = c), a > u && a < l && "bottom" === e && (l = a), o > i && o < s && "left" === e && (i = o), r > i && o < s && "right" === e && (s = r) })); var c = new r.BBox(i, u, s - i, l - u), h = c.minY - t.layerBBox.minY; return 0 === h && (h = n[0]), [h, t.layerBBox.maxX - c.maxX, t.layerBBox.maxY - c.maxY, c.minX - t.layerBBox.minX] } }, function (t, e, n) { "use strict"; n.r(e); var i = n(1), r = n(3), o = n(2), a = n(0), s = { default: { trackColor: "rgba(0,0,0,0)", thumbColor: "rgba(0,0,0,0.15)", size: 8, lineCap: "round" }, hover: { thumbColor: "rgba(0,0,0,0.2)" } }, u = function (t) { function e(e) { var n = t.call(this) || this; n._isMobile = !1, n._onStartEvent = function (t) { return function (e) { n._isMobile = t, e.event.preventDefault(); var i = n._isMobile ? a.get(e.event, "touches.0", e) : e, r = i.clientX, o = i.clientY; n._startPos = n.isHorizontal ? r : o, n._bindLaterEvent() } }, n._onTrackClick = function (t) { var e = n.get("canvas").get("containerDOM").getBoundingClientRect(), i = t.clientX, r = t.clientY, o = n.isHorizontal ? i - e.left - n.position.x - n.thumbLen / 2 : r - e.top - n.position.y - n.thumbLen / 2, a = n._validateRange(o); n.updateThumbOffset(a) }, n._onMouseMove = function (t) { t.preventDefault(); var e = n._isMobile ? a.get(t, "touches.0", t) : t, i = e.clientX, r = e.clientY, o = n.isHorizontal ? i : r, s = o - n._startPos; n._startPos = o, n.updateThumbOffset(n.thumbOffset + s) }, n._onMouseUp = function (t) { t.preventDefault(), n._clearEvents() }, n._onTrackMouseOver = function (t) { var e = n.theme.hover.thumbColor; n.thumbShape.attr("stroke", e), n.get("canvas").draw() }, n._onTrackMouseOut = function (t) { var e = n.theme.default.thumbColor; n.thumbShape.attr("stroke", e), n.get("canvas").draw() }; var i = e.isHorizontal, r = void 0 !== i && i, o = e.trackLen, u = e.thumbLen, l = e.position, c = e.minThumbLen, h = void 0 === c ? 20 : c, p = e.thumbOffset, f = void 0 === p ? 0 : p, d = e.theme; return n.isHorizontal = r, n.thumbOffset = f, n.trackLen = o, n.thumbLen = u, n.position = l, n.minThumbLen = h, n.theme = a.deepMix({}, s, d), n._initScrollBar(), n } return Object(i.__extends)(e, t), e.prototype.current = function () { var t = this.thumbLen / this.trackLen; return this.thumbOffset / this.trackLen / (1 - t) }, e.prototype.updateTrackLen = function (t) { if (this.trackLen !== t) { var e = t * (this.thumbLen / this.trackLen), n = t * (this.thumbOffset / this.trackLen); this.trackLen = t, this.isHorizontal ? this.trackShape.attr("x2", t) : this.trackShape.attr("y2", t), this.updateThumbLen(e), this.updateThumbOffset(n), this._renderNewScrollBar() } }, e.prototype.updateThumbLen = function (t) { this.thumbLen !== t && (this.thumbLen = t, this.isHorizontal ? this.thumbShape.attr("x2", this.thumbOffset + t) : this.thumbShape.attr("y2", this.thumbOffset + t), this._renderNewScrollBar()) }, e.prototype.updateThumbOffset = function (t) { var e = this._validateRange(t); this.thumbOffset !== e && (this.thumbOffset = e, this.isHorizontal ? this.thumbShape.attr({ x1: e, x2: e + this.thumbLen }) : this.thumbShape.attr({ y1: e, y2: e + this.thumbLen }), this._renderNewScrollBar()) }, e.prototype.updateScrollBarPos = function (t) { t.x === this.position.x && t.y === this.position.y || (this.position = t, this.scrollBarGroup.move(t.x, t.y), this._renderNewScrollBar()) }, e.prototype._renderNewScrollBar = function () { this.emit("scrollchange", { thumbOffset: this.thumbOffset, ratio: a.clamp(this.thumbOffset / (this.trackLen - this.thumbLen), 0, 1) }), this.get("canvas").draw() }, e.prototype.updateTheme = function (t) { this.theme = a.deepMix({}, s, t), this.thumbShape.attr("stroke", this.theme.default.thumbColor), this.thumbShape.attr("lineWidth", this.theme.default.size), this.thumbShape.attr("lineCap", this.theme.default.lineCap), this.get("canvas").draw() }, e.prototype._initScrollBar = function () { this.scrollBarGroup = this._createScrollBarGroup(), this.scrollBarGroup.move(this.position.x, this.position.y), this._bindEvents() }, e.prototype._createScrollBarGroup = function () { var t = this.addGroup({ className: this.isHorizontal ? "horizontalBar" : "verticalBar" }); return this.trackShape = this._createTrackShape(t), this.thumbShape = this._createThumbShape(t), t }, e.prototype._createTrackShape = function (t) { var e = this.theme.default, n = e.lineCap, i = e.trackColor, r = e.size; return this.isHorizontal ? t.addShape("line", { attrs: { x1: 0, y1: r / 2, x2: this.trackLen, y2: r / 2, lineWidth: r, stroke: i, lineCap: n } }) : t.addShape("line", { attrs: { x1: r / 2, y1: 0, x2: r / 2, y2: this.trackLen, lineWidth: r, stroke: i, lineCap: n } }) }, e.prototype._createThumbShape = function (t) { var e = this.theme.default, n = e.size, i = e.lineCap, r = e.thumbColor; return this.isHorizontal ? t.addShape("line", { attrs: { x1: this.thumbOffset, y1: n / 2, x2: this.thumbOffset + this.thumbLen, y2: n / 2, lineWidth: n, stroke: r, lineCap: i, cursor: "default" } }) : t.addShape("line", { attrs: { x1: n / 2, y1: this.thumbOffset, x2: n / 2, y2: this.thumbOffset + this.thumbLen, lineWidth: n, stroke: r, lineCap: i, cursor: "default" } }) }, e.prototype._bindEvents = function () { this.on("mousedown", this._onStartEvent(!1)), this.on("mouseup", this._onMouseUp), this.on("touchstart", this._onStartEvent(!0)), this.on("touchend", this._onMouseUp), this.trackShape.on("click", this._onTrackClick), this.thumbShape.on("mouseover", this._onTrackMouseOver), this.thumbShape.on("mouseout", this._onTrackMouseOut) }, e.prototype._bindLaterEvent = function () { var t = this.get("canvas").get("containerDOM"), e = []; e = this._isMobile ? [r.addEventListener(t, "touchmove", this._onMouseMove), r.addEventListener(t, "touchend", this._onMouseUp), r.addEventListener(t, "touchcancel", this._onMouseUp)] : [r.addEventListener(t, "mousemove", this._onMouseMove), r.addEventListener(t, "mouseup", this._onMouseUp), r.addEventListener(t, "mouseleave", this._onMouseUp)], this._clearEvents = function () { e.forEach((function (t) { t.remove() })) } }, e.prototype._validateRange = function (t) { var e = t; return t + this.thumbLen > this.trackLen ? e = this.trackLen - this.thumbLen : t + this.thumbLen < this.thumbLen && (e = 0), e }, e }(o.Group), l = function (t) { function e(e) { var n = t.call(this, e) || this, r = e.position, o = void 0 === r ? { x: 0, y: 0 } : r, a = e.icon, s = e.text, u = void 0 === s ? "" : s, l = e.spacing, c = void 0 === l ? 8 : l, h = e.iconStyle, p = e.textStyle, f = e.interactive, d = void 0 !== f && f; return n.position = o, n.icon = a, n.text = u, n.spacing = c, n.iconStyle = Object(i.__assign)({ fontFamily: "iconfont", fontSize: 16, textAlign: "left", textBaseline: "top", fill: "#1890ff" }, h), n.textStyle = Object(i.__assign)({ fontSize: 12, textAlign: "left", textBaseline: "middle", fill: "#000" }, p), n.interactive = d, n._initIcon(), n.interactive && n._bindEvent(), n } return Object(i.__extends)(e, t), e.prototype._initIcon = function () { var t = this.position, e = t.x, n = t.y, r = String.fromCharCode(parseInt(this.icon, 16)), o = this.addShape("text", { attrs: Object(i.__assign)({ x: e, y: n, text: r }, this.iconStyle) }); if (this.text) { var a = o.getBBox(); this.addShape("text", { attrs: Object(i.__assign)({ x: e + a.width + this.spacing, y: n + a.height / 2, text: this.text }, this.textStyle) }) } var s = this.getBBox(); this.bg = this.addShape("rect", { attrs: { x: s.x, y: s.y, width: s.width, height: s.height, radius: 2, fill: "#fff" }, zIndex: -1 }), this.sort() }, e.prototype._bindEvent = function () { var t = this; this.on("mouseover", (function () { t.bg.attr("fill", "#F5F5F5"), t.get("canvas").draw() })), this.on("mouseout", (function () { t.bg.attr("fill", "#fff"), t.get("canvas").draw() })) }, e }(o.Group), c = { right: 90 * Math.PI / 180, left: 270 * Math.PI / 180, up: 0, down: 180 * Math.PI / 180 }, h = function (t) { function e(e) { var n = t.call(this) || this, i = e.position, r = void 0 === i ? { x: 0, y: 0 } : i, o = e.width, a = void 0 === o ? 10 : o, s = e.height, u = void 0 === s ? 10 : s, l = e.direction, c = void 0 === l ? "right" : l, h = e.shapeAttrs, p = void 0 === h ? {} : h; return n.position = r, n.width = a, n.height = u, n.direction = c, n.shapeAttrs = p, n._init(), n } return Object(i.__extends)(e, t), e.prototype._init = function () { var t = this, e = this.width / 2, n = this.height / 2, r = [{ x: 0, y: -n }, { x: -e, y: n }, { x: e, y: n }], a = new o.Path({ attrs: Object(i.__assign)({ path: [["M", r[0].x, r[0].y], ["L", r[1].x, r[1].y], ["L", r[2].x, r[2].y], ["Z"]] }, this.shapeAttrs) }); this.add(a), this.rotate(c[this.direction]), this.move(this.position.x, this.position.y), a.on("click", (function (e) { e.stopPropagation(), t.emit("click", e) })) }, e }(o.Group), p = { opacity: 0 }, f = { stroke: "#C5C5C5", strokeOpacity: .85 }, d = { fill: "#CACED4", opacity: .85 }, g = n(18), v = n(110), y = n.n(v), m = n(111), x = n.n(m); function _(t) { return function (t) { return a.map(t, (function (t, e) { return [0 === e ? "M" : "L", t[0], t[1]] })) }(t) } function b(t, e, n, i) { void 0 === i && (i = !0); var r = new x.a({ values: t }), o = new y.a({ values: a.map(t, (function (t, e) { return e })) }), s = a.map(t, (function (t, i) { return [o.scale(i) * e, n - r.scale(t) * n] })); return i ? function (t) { if (t.length <= 2) return _(t); var e = []; a.each(t, (function (t) { a.isEqual(t, e.slice(e.length - 2)) || e.push(t[0], t[1]) })); var n = g.a(e, !1), i = a.head(t), r = i[0], o = i[1]; return n.unshift(["M", r, o]), n }(s) : _(s) } var w = function (t) { function e(e) { var n = t.call(this) || this, i = e.x, r = void 0 === i ? 0 : i, o = e.y, s = void 0 === o ? 0 : o, u = e.width, l = void 0 === u ? 200 : u, c = e.height, h = void 0 === c ? 16 : c, g = e.smooth, v = void 0 === g || g, y = e.isArea, m = void 0 !== y && y, x = e.data, _ = void 0 === x ? [] : x, b = e.backgroundStyle, w = e.lineStyle, M = e.areaStyle; return n.x = r, n.y = s, n.width = l, n.height = h, n.data = _, n.smooth = v, n.isArea = m, n.backgroundStyle = a.assign({}, p, b), n.lineStyle = a.assign({}, f, w), n.areaStyle = a.assign({}, d, M), n._initial(), n } return Object(i.__extends)(e, t), e.prototype._initial = function () { var t = this, e = t.x, n = t.y, r = t.width, o = t.height, a = t.data, s = t.smooth, u = t.isArea, l = t.backgroundStyle, c = t.lineStyle, h = t.areaStyle; this.backgroundShape = this.addShape("rect", { attrs: Object(i.__assign)({ x: 0, y: 0, width: r, height: o }, l) }); var p = b(a, r, o, s); this.lineShape = this.addShape("path", { attrs: Object(i.__assign)({ path: p }, c) }); var f = function (t, e, n) { var r = Object(i.__spreadArrays)(t); return r.push(["L", e, 0]), r.push(["L", 0, n]), r.push(["Z"]), r }(p, r, o); u && (this.areaShape = this.addShape("path", { attrs: Object(i.__assign)({ path: f }, h) })), this.move(e, n) }, e }(o.Group), M = { fill: "#416180 ", opacity: .05 }, S = { fill: "#5B8FF9", opacity: .15, cursor: "move" }, C = { width: 10, height: 24 }, O = { textBaseline: "middle", fill: "#000", opacity: .45 }, k = { fill: "#F7F7F7", stroke: "#BFBFBF", radius: 2, opacity: 1, cursor: "ew-resize", highLightFill: "#FFF" }, P = function (t) { function e(e) { var n = t.call(this) || this, r = e.x, o = void 0 === r ? 0 : r, a = e.y, s = void 0 === a ? 0 : a, u = e.width, l = void 0 === u ? 10 : u, c = e.height, h = void 0 === c ? 24 : c, p = e.style, f = void 0 === p ? {} : p; return n.x = o, n.y = s, n.width = l, n.height = h, n.style = Object(i.__assign)(Object(i.__assign)({}, k), f), n._initial(), n } return Object(i.__extends)(e, t), e.prototype.setX = function (t) { this.setXY(t, void 0) }, e.prototype.setY = function (t) { this.setXY(void 0, t) }, e.prototype.setXY = function (t, e) { a.isNumber(t) && (this.x = t), a.isNumber(e) && (this.y = e), this._updateXY() }, e.prototype._initial = function () { var t = this.width, e = this.height, n = this.style, i = n.fill, r = n.stroke, o = n.radius, a = n.opacity, s = n.cursor; this.background = this.addShape("rect", { attrs: { x: 0, y: 0, width: t, height: e, fill: i, stroke: r, radius: o, opacity: a, cursor: s } }); var u = 1 / 3 * t, l = 2 / 3 * t, c = .25 * e, h = .75 * e; this.addShape("line", { attrs: { x1: u, y1: c, x2: u, y2: h, stroke: r, cursor: s } }), this.addShape("line", { attrs: { x1: l, y1: c, x2: l, y2: h, stroke: r, cursor: s } }), this._updateXY(), this._bindEvents() }, e.prototype._bindEvents = function () { var t = this; this.on("mouseenter", (function () { var e = t.style.highLightFill; t.background.attr("fill", e), t._getCanvas().draw() })), this.on("mouseleave", (function () { var e = t.style.fill; t.background.attr("fill", e), t._getCanvas().draw() })) }, e.prototype._updateXY = function () { this.move(this.x, this.y) }, e.prototype._getCanvas = function () { for (var t = this; t.get("parent");)t = t.get("parent"); return t }, e }(o.Group), A = function (t) { function e(e) { var n = t.call(this) || this; n.prevX = 0, n.prevY = 0, n.onMouseDown = function (t) { return function (e) { n.currentHandler = t; var i = e.event; i.stopPropagation(), i.preventDefault(), n.prevX = a.get(i, "touches.0.pageX", i.pageX), n.prevY = a.get(i, "touches.0.pageY", i.pageY); var r = n.get("canvas").get("containerDOM"); r.addEventListener("mousemove", n.onMouseMove), r.addEventListener("mouseup", n.onMouseUp), r.addEventListener("mouseleave", n.onMouseUp), r.addEventListener("touchmove", n.onMouseMove), r.addEventListener("touchend", n.onMouseUp), r.addEventListener("touchcancel", n.onMouseUp) } }, n.onMouseMove = function (t) { t.stopPropagation(), t.preventDefault(); var e = a.get(t, "touches.0.pageX", t.pageX), i = a.get(t, "touches.0.pageY", t.pageY), r = e - n.prevX, o = n.adjustOffsetRange(r / n.width); n.updateStartEnd(o), n._updateUI(), n.prevX = e, n.prevY = i, n.get("canvas").draw(), n.emit("sliderchange", [n.start, n.end].sort()) }, n.onMouseUp = function () { n.currentHandler && (n.currentHandler = void 0); var t = n.get("canvas").get("containerDOM"); t && (t.removeEventListener("mousemove", n.onMouseMove), t.removeEventListener("mouseup", n.onMouseUp), t.removeEventListener("mouseleave", n.onMouseUp), t.removeEventListener("touchmove", n.onMouseMove), t.removeEventListener("touchend", n.onMouseUp), t.removeEventListener("touchcancel", n.onMouseUp)) }; var r = e.x, o = void 0 === r ? 0 : r, s = e.y, u = void 0 === s ? 0 : s, l = e.width, c = void 0 === l ? 100 : l, h = e.height, p = void 0 === h ? 16 : h, f = e.trendCfg, d = e.backgroundStyle, g = void 0 === d ? {} : d, v = e.foregroundStyle, y = void 0 === v ? {} : v, m = e.handlerStyle, x = void 0 === m ? {} : m, _ = e.textStyle, b = void 0 === _ ? {} : _, w = e.start, k = void 0 === w ? 0 : w, P = e.end, A = void 0 === P ? 1 : P, L = e.minText, T = void 0 === L ? "" : L, D = e.maxText, j = void 0 === D ? "" : D; return n.x = o, n.y = u, n.width = c, n.height = p, n.trendCfg = f, n.backgroundStyle = Object(i.__assign)(Object(i.__assign)({}, M), g), n.foregroundStyle = Object(i.__assign)(Object(i.__assign)({}, S), y), n.handlerStyle = Object(i.__assign)(Object(i.__assign)({}, C), x), n.textStyle = Object(i.__assign)(Object(i.__assign)({}, O), b), n.start = k, n.end = A, n.minText = T, n.maxText = j, n._initial(), n } return Object(i.__extends)(e, t), e.prototype.update = function (t) { var e = t.x, n = t.y, i = t.width, r = t.height, o = t.minText, s = t.maxText, u = t.start, l = t.end; this.start = Math.min(1, Math.max(u, 0)), this.end = Math.min(1, Math.max(l, 0)), a.assign(this, { x: e, y: n, width: i, height: r, minText: o, maxText: s }), this._updateUI() }, e.prototype._initial = function () { var t = this.width, e = this.height; a.size(a.get(this.trendCfg, "data")) && (this.trendShape = new w(Object(i.__assign)({ x: 0, y: 0, width: t, height: e }, this.trendCfg)), this.add(this.trendShape)), this.backgroundShape = this.addShape("rect", { attrs: Object(i.__assign)({ x: 0, y: 0, width: t, height: e }, this.backgroundStyle) }), this.minTextShape = this.addShape("text", { attrs: Object(i.__assign)({ y: e / 2, textAlign: "right", text: this.minText, silent: !1 }, this.textStyle) }), this.maxTextShape = this.addShape("text", { attrs: Object(i.__assign)({ y: e / 2, textAlign: "left", text: this.maxText, silent: !1 }, this.textStyle) }), this.foregroundShape = this.addShape("rect", { attrs: Object(i.__assign)({ y: 0, height: e }, this.foregroundStyle) }); a.get(this.handlerStyle, "width", 10); var n = a.get(this.handlerStyle, "height", 24); this.minHandlerShape = new P(Object(i.__assign)({ x: 0, y: (e - n) / 2, width: t, height: n, cursor: "ew-resize" }, this.handlerStyle)), this.add(this.minHandlerShape), this.maxHandlerShape = new P(Object(i.__assign)({ x: 0, y: (e - n) / 2, width: t, height: n, cursor: "ew-resize" }, this.handlerStyle)), this.add(this.maxHandlerShape), this._updateUI(), this.move(this.x, this.y), this._bindEvents() }, e.prototype._bindEvents = function () { this.minHandlerShape.on("mousedown", this.onMouseDown(this.minHandlerShape)), this.minHandlerShape.on("touchstart", this.onMouseDown(this.minHandlerShape)), this.maxHandlerShape.on("mousedown", this.onMouseDown(this.maxHandlerShape)), this.maxHandlerShape.on("touchstart", this.onMouseDown(this.maxHandlerShape)), this.foregroundShape.on("mousedown", this.onMouseDown(this.foregroundShape)), this.foregroundShape.on("touchstart", this.onMouseDown(this.foregroundShape)) }, e.prototype.adjustOffsetRange = function (t) { switch (this.currentHandler) { case this.minHandlerShape: var e = 0 - this.start, n = 1 - this.start; return Math.min(n, Math.max(e, t)); case this.maxHandlerShape: e = 0 - this.end, n = 1 - this.end; return Math.min(n, Math.max(e, t)); case this.foregroundShape: e = 0 - this.start, n = 1 - this.end; return Math.min(n, Math.max(e, t)); default: return 0 } }, e.prototype.updateStartEnd = function (t) { switch (this.currentHandler) { case this.minHandlerShape: this.start += t; break; case this.maxHandlerShape: this.end += t; break; case this.foregroundShape: this.start += t, this.end += t } }, e.prototype._updateUI = function () { var t = this, e = this.start * this.width, n = this.end * this.width; this.foregroundShape.attr("x", e), this.foregroundShape.attr("width", n - e); var i = a.get(this.handlerStyle, "width", 10); this.minTextShape.attr("text", this.minText), this.maxTextShape.attr("text", this.maxText); var r = this._dodgeText([e, n]), o = r[0], s = r[1]; this.minHandlerShape.setX(e - i / 2), a.each(o, (function (e, n) { return t.minTextShape.attr(n, e) })), this.maxHandlerShape.setX(n - i / 2), a.each(s, (function (e, n) { return t.maxTextShape.attr(n, e) })) }, e.prototype._dodgeText = function (t) { var e, n, i = a.get(this.handlerStyle, "width", 10), r = this.minTextShape, o = this.maxTextShape, s = t[0], u = t[1], l = !1; s > u && (s = (e = [u, s])[0], u = e[1], r = (n = [o, r])[0], o = n[1], l = !0); var c = r.getBBox(), h = o.getBBox(), p = c.width > s - 2 ? { x: s + i / 2 + 2, textAlign: "left" } : { x: s - i / 2 - 2, textAlign: "right" }, f = h.width > this.width - u - 2 ? { x: u - i / 2 - 2, textAlign: "right" } : { x: u + i / 2 + 2, textAlign: "left" }; return l ? [f, p] : [p, f] }, e }(o.Group); n.d(e, "ScrollBar", (function () { return u })), n.d(e, "Icon", (function () { return l })), n.d(e, "Arrow", (function () { return h })), n.d(e, "Slider", (function () { return A })), n.d(e, "Trend", (function () { return w })) }, function (t) { t.exports = JSON.parse('{"a":"3.6.0-beta.18"}') }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.forEach = e.sqrLen = e.len = e.sqrDist = e.dist = e.div = e.mul = e.sub = void 0, e.create = r, e.clone = function (t) { var e = new i.ARRAY_TYPE(3); return e[0] = t[0], e[1] = t[1], e[2] = t[2], e }, e.length = o, e.fromValues = a, e.copy = function (t, e) { return t[0] = e[0], t[1] = e[1], t[2] = e[2], t }, e.set = function (t, e, n, i) { return t[0] = e, t[1] = n, t[2] = i, t }, e.add = function (t, e, n) { return t[0] = e[0] + n[0], t[1] = e[1] + n[1], t[2] = e[2] + n[2], t }, e.subtract = s, e.multiply = u, e.divide = l, e.ceil = function (t, e) { return t[0] = Math.ceil(e[0]), t[1] = Math.ceil(e[1]), t[2] = Math.ceil(e[2]), t }, e.floor = function (t, e) { return t[0] = Math.floor(e[0]), t[1] = Math.floor(e[1]), t[2] = Math.floor(e[2]), t }, e.min = function (t, e, n) { return t[0] = Math.min(e[0], n[0]), t[1] = Math.min(e[1], n[1]), t[2] = Math.min(e[2], n[2]), t }, e.max = function (t, e, n) { return t[0] = Math.max(e[0], n[0]), t[1] = Math.max(e[1], n[1]), t[2] = Math.max(e[2], n[2]), t }, e.round = function (t, e) { return t[0] = Math.round(e[0]), t[1] = Math.round(e[1]), t[2] = Math.round(e[2]), t }, e.scale = function (t, e, n) { return t[0] = e[0] * n, t[1] = e[1] * n, t[2] = e[2] * n, t }, e.scaleAndAdd = function (t, e, n, i) { return t[0] = e[0] + n[0] * i, t[1] = e[1] + n[1] * i, t[2] = e[2] + n[2] * i, t }, e.distance = c, e.squaredDistance = h, e.squaredLength = p, e.negate = function (t, e) { return t[0] = -e[0], t[1] = -e[1], t[2] = -e[2], t }, e.inverse = function (t, e) { return t[0] = 1 / e[0], t[1] = 1 / e[1], t[2] = 1 / e[2], t }, e.normalize = f, e.dot = d, e.cross = function (t, e, n) { var i = e[0], r = e[1], o = e[2], a = n[0], s = n[1], u = n[2]; return t[0] = r * u - o * s, t[1] = o * a - i * u, t[2] = i * s - r * a, t }, e.lerp = function (t, e, n, i) { var r = e[0], o = e[1], a = e[2]; return t[0] = r + i * (n[0] - r), t[1] = o + i * (n[1] - o), t[2] = a + i * (n[2] - a), t }, e.hermite = function (t, e, n, i, r, o) { var a = o * o, s = a * (2 * o - 3) + 1, u = a * (o - 2) + o, l = a * (o - 1), c = a * (3 - 2 * o); return t[0] = e[0] * s + n[0] * u + i[0] * l + r[0] * c, t[1] = e[1] * s + n[1] * u + i[1] * l + r[1] * c, t[2] = e[2] * s + n[2] * u + i[2] * l + r[2] * c, t }, e.bezier = function (t, e, n, i, r, o) { var a = 1 - o, s = a * a, u = o * o, l = s * a, c = 3 * o * s, h = 3 * u * a, p = u * o; return t[0] = e[0] * l + n[0] * c + i[0] * h + r[0] * p, t[1] = e[1] * l + n[1] * c + i[1] * h + r[1] * p, t[2] = e[2] * l + n[2] * c + i[2] * h + r[2] * p, t }, e.random = function (t, e) { e = e || 1; var n = 2 * i.RANDOM() * Math.PI, r = 2 * i.RANDOM() - 1, o = Math.sqrt(1 - r * r) * e; return t[0] = Math.cos(n) * o, t[1] = Math.sin(n) * o, t[2] = r * e, t }, e.transformMat4 = function (t, e, n) { var i = e[0], r = e[1], o = e[2], a = n[3] * i + n[7] * r + n[11] * o + n[15]; return a = a || 1, t[0] = (n[0] * i + n[4] * r + n[8] * o + n[12]) / a, t[1] = (n[1] * i + n[5] * r + n[9] * o + n[13]) / a, t[2] = (n[2] * i + n[6] * r + n[10] * o + n[14]) / a, t }, e.transformMat3 = function (t, e, n) { var i = e[0], r = e[1], o = e[2]; return t[0] = i * n[0] + r * n[3] + o * n[6], t[1] = i * n[1] + r * n[4] + o * n[7], t[2] = i * n[2] + r * n[5] + o * n[8], t }, e.transformQuat = function (t, e, n) { var i = n[0], r = n[1], o = n[2], a = n[3], s = e[0], u = e[1], l = e[2], c = r * l - o * u, h = o * s - i * l, p = i * u - r * s, f = r * p - o * h, d = o * c - i * p, g = i * h - r * c, v = 2 * a; return c *= v, h *= v, p *= v, f *= 2, d *= 2, g *= 2, t[0] = s + c + f, t[1] = u + h + d, t[2] = l + p + g, t }, e.rotateX = function (t, e, n, i) { var r = [], o = []; return r[0] = e[0] - n[0], r[1] = e[1] - n[1], r[2] = e[2] - n[2], o[0] = r[0], o[1] = r[1] * Math.cos(i) - r[2] * Math.sin(i), o[2] = r[1] * Math.sin(i) + r[2] * Math.cos(i), t[0] = o[0] + n[0], t[1] = o[1] + n[1], t[2] = o[2] + n[2], t }, e.rotateY = function (t, e, n, i) { var r = [], o = []; return r[0] = e[0] - n[0], r[1] = e[1] - n[1], r[2] = e[2] - n[2], o[0] = r[2] * Math.sin(i) + r[0] * Math.cos(i), o[1] = r[1], o[2] = r[2] * Math.cos(i) - r[0] * Math.sin(i), t[0] = o[0] + n[0], t[1] = o[1] + n[1], t[2] = o[2] + n[2], t }, e.rotateZ = function (t, e, n, i) { var r = [], o = []; return r[0] = e[0] - n[0], r[1] = e[1] - n[1], r[2] = e[2] - n[2], o[0] = r[0] * Math.cos(i) - r[1] * Math.sin(i), o[1] = r[0] * Math.sin(i) + r[1] * Math.cos(i), o[2] = r[2], t[0] = o[0] + n[0], t[1] = o[1] + n[1], t[2] = o[2] + n[2], t }, e.angle = function (t, e) { var n = a(t[0], t[1], t[2]), i = a(e[0], e[1], e[2]); f(n, n), f(i, i); var r = d(n, i); return r > 1 ? 0 : r < -1 ? Math.PI : Math.acos(r) }, e.str = function (t) { return "vec3(" + t[0] + ", " + t[1] + ", " + t[2] + ")" }, e.exactEquals = function (t, e) { return t[0] === e[0] && t[1] === e[1] && t[2] === e[2] }, e.equals = function (t, e) { var n = t[0], r = t[1], o = t[2], a = e[0], s = e[1], u = e[2]; return Math.abs(n - a) <= i.EPSILON * Math.max(1, Math.abs(n), Math.abs(a)) && Math.abs(r - s) <= i.EPSILON * Math.max(1, Math.abs(r), Math.abs(s)) && Math.abs(o - u) <= i.EPSILON * Math.max(1, Math.abs(o), Math.abs(u)) }; var i = function (t) { if (t && t.__esModule) return t; var e = {}; if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]); return e.default = t, e }(n(41)); function r() { var t = new i.ARRAY_TYPE(3); return i.ARRAY_TYPE != Float32Array && (t[0] = 0, t[1] = 0, t[2] = 0), t } function o(t) { var e = t[0], n = t[1], i = t[2]; return Math.sqrt(e * e + n * n + i * i) } function a(t, e, n) { var r = new i.ARRAY_TYPE(3); return r[0] = t, r[1] = e, r[2] = n, r } function s(t, e, n) { return t[0] = e[0] - n[0], t[1] = e[1] - n[1], t[2] = e[2] - n[2], t } function u(t, e, n) { return t[0] = e[0] * n[0], t[1] = e[1] * n[1], t[2] = e[2] * n[2], t } function l(t, e, n) { return t[0] = e[0] / n[0], t[1] = e[1] / n[1], t[2] = e[2] / n[2], t } function c(t, e) { var n = e[0] - t[0], i = e[1] - t[1], r = e[2] - t[2]; return Math.sqrt(n * n + i * i + r * r) } function h(t, e) { var n = e[0] - t[0], i = e[1] - t[1], r = e[2] - t[2]; return n * n + i * i + r * r } function p(t) { var e = t[0], n = t[1], i = t[2]; return e * e + n * n + i * i } function f(t, e) { var n = e[0], i = e[1], r = e[2], o = n * n + i * i + r * r; return o > 0 && (o = 1 / Math.sqrt(o), t[0] = e[0] * o, t[1] = e[1] * o, t[2] = e[2] * o), t } function d(t, e) { return t[0] * e[0] + t[1] * e[1] + t[2] * e[2] } var g; e.sub = s, e.mul = u, e.div = l, e.dist = c, e.sqrDist = h, e.len = o, e.sqrLen = p, e.forEach = (g = r(), function (t, e, n, i, r, o) { var a = void 0, s = void 0; for (e || (e = 3), n || (n = 0), s = i ? Math.min(i * e + n, t.length) : t.length, a = n; a < s; a += e)g[0] = t[a], g[1] = t[a + 1], g[2] = t[a + 2], r(g, g, o), t[a] = g[0], t[a + 1] = g[1], t[a + 2] = g[2]; return t }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(120), r = n(121), o = n(56); e.default = function t(e, n) { if (e === n) return !0; if (!e || !n) return !1; if (o.default(e) || o.default(n)) return !1; if (r.default(e) || r.default(n)) { if (e.length !== n.length) return !1; for (var a = !0, s = 0; s < e.length && (a = t(e[s], n[s])); s++); return a } if (i.default(e) || i.default(n)) { var u = Object.keys(e), l = Object.keys(n); if (u.length !== l.length) return !1; for (a = !0, s = 0; s < u.length && (a = t(e[u[s]], n[u[s]])); s++); return a } return !1 } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(70), a = n(71), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.translate = function (t) { var e = r.indexOf(this.values, t); return -1 === e ? r.isNumber(t) ? t : NaN : e }, e.prototype.scale = function (t) { var e = this.translate(t), n = this._calcPercent(e, this.min, this.max); return this._calcValue(n, r.head(this.range), r.last(this.range)) }, e.prototype.invert = function (t) { if (!r.isNumber(t)) return t; var e = r.size(this.values) - 1, n = this._calcPercent(t, r.head(this.range), r.last(this.range)), i = Math.round(e * n); return this.values[i] }, e.prototype.getText = function (e) { for (var n = [], o = 1; o < arguments.length; o++)n[o - 1] = arguments[o]; var a = e; return r.isNumber(e) && !r.includes(this.values, e) && (a = this.values[a]), t.prototype.getText.apply(this, i.__spreadArrays([a], n)) }, e.prototype._initDefaultCfg = function () { this.type = "cat", this.values = [], this.isCategory = !0 }, e.prototype._init = function () { var t = r.size(this.values); this.min = 0, this.max = t > 1 ? t - 1 : t, r.isEmpty(this.ticks) && (this.ticks = this._setTicks()) }, e.prototype._setTicks = function () { var t = this, e = this.values; if (r.isNumber(this.tickInterval)) return r.filter(e, (function (e, n) { return n % (t.tickInterval + 1) == 0 })); if (r.isNumber(this.tickCount)) { var n = a.ALL_Q.filter((function (t) { return Number.isInteger(t) })), i = a.default(this.min, this.max, this.tickCount, !1, n).ticks; return r.filter(i, (function (e) { return e >= t.min && e <= t.max })).map((function (e) { return t.values[e] })) } return this.values }, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(70), a = n(71), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.scale = function (t) { if (r.isNil(t)) return NaN; var e = this._transform(this.max), n = this._transform(this.min); if (n === e) return .5; var i = Math.min(Math.max(this._transform(t), n), e), o = this._calcPercent(i, n, e), a = r.head(this.range), s = r.last(this.range); return this._calcValue(o, a, s) }, e.prototype.invert = function (t) { var e = r.head(this.range), n = r.last(this.range), i = this._transform(this.max), o = this._transform(this.min), a = this._calcPercent(t, e, n); return this._calcValue(a, o, i) }, e.prototype._initDefaultCfg = function () { this.values = [], this.type = "linear", this.isLinear = !0, this.nice = !0, this.tickCount = 5, this.maxTickCount = 10 }, e.prototype._init = function () { this._setDomain(), r.isEmpty(this.ticks) && (this.ticks = this._setTicks()) }, e.prototype._setDomain = function () { var t = r.getRange(this.values), e = t.min, n = t.max; r.isNil(this.min) && (this.min = e), r.isNil(this.max) && (this.max = n), this.min > this.max && (console.error("min should less than max"), this.min = e, this.max = n) }, e.prototype._transform = function (t) { return t }, e.prototype._setTicks = function () { var t, e, n, i, o = this, s = this._getAlgoParams(), u = s.onlyLoose, l = s.Q, c = s.w, h = s.m, p = [], f = h, d = this.minLimit, g = this.maxLimit; r.isNil(d) || r.isNil(g) || d !== g || (console.error("minLimit should less than maxLimit"), 0 === (d /= 2) && (g = 1)), (n = r.isNil(d) ? this.min : this.minLimit) > (i = r.isNil(g) ? this.max : this.maxLimit) && (console.error("minLimit should less than maxLimit"), n = (t = [i, n])[0], i = t[1], d = (e = [g, d])[0], g = e[1]); do { var v = a.default(n, i, f, u, l, c), y = v.min, m = v.max, x = v.ticks; if (p = [], this.nice && (this.min = y, this.max = m), r.isNil(d) || (this.min = d), r.isNil(g) || (this.max = g), p.push(this.min), r.each(x, (function (t) { t > o.min && t < o.max && p.push(t) })), p[p.length - 1] < this.max && p.push(this.max), r.isNil(d) && r.isNil(g)) break; if (x.indexOf(this.min) >= 0 && x.indexOf(this.max) >= 0) break; f += 1 } while (f < this.maxTickCount); return p }, e.prototype._getAlgoParams = function () { var t = this.algoParam || {}, e = t.onlyLoose, n = t.Q, i = t.w, o = n, s = this.tickCount; if (this.minTickInterval) { var u = Math.abs(this.minTickInterval), l = Math.floor(Math.log10(u)), c = u / Math.pow(10, l); o = a.ALL_Q.filter((function (t) { return t >= c })), r.includes(o, c) || o.push(c), s = Math.ceil((this.max - this.min) / this.minTickInterval) + 1, 1 === o.length && o.push(1) } return { m: s, w: i, Q: o, onlyLoose: e } }, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1); i.__exportStar(n(57), e); var r = n(28); e.Layer = r.default, e.LayerConfig = r.LayerConfig; var o = n(8); e.ViewLayer = o.default, e.ViewConfig = o.ViewConfig; var a = n(6); e.Base = a.default, e.PlotConfig = a.PlotConfig, i.__exportStar(n(76), e); var s = n(35); e.TinyLayerConfig = s.TinyLayerConfig; var u = n(318); e.Progress = u.default, e.ProgressConfig = u.ProgressConfig; var l = n(321); e.RingProgress = l.default, e.RingProgressConfig = l.RingProgressConfig; var c = n(325); e.TinyColumn = c.default, e.TinyColumnConfig = c.TinyColumnConfig; var h = n(328); e.TinyArea = h.default, e.TinyAreaConfig = h.TinyAreaConfig; var p = n(331); e.TinyLine = p.default, e.TinyLineConfig = p.TinyLineConfig; var f = n(334); e.OverlappedComboPlot = f.default, e.OverlappedComboPlotConfig = f.OverlappedComboPlotConfig; var d = n(20); e.registerTheme = d.registerTheme, e.registerGlobalTheme = d.registerGlobalTheme; var g = n(81); e.registerResponsiveConstraint = g.registerResponsiveConstraint, e.IConstraint = g.IConstraint; var v = n(82); e.registerResponsiveRule = v.registerResponsiveRule; var y = n(31); e.registerResponsiveTheme = y.registerResponsiveTheme, e.getResponsiveTheme = y.getResponsiveTheme; var m = n(69); e.StateManager = m.default }, function (t, e, n) { "use strict"; e.__esModule = !0, e.default = function (t, e, n) { if (t) { if ("function" == typeof t.addEventListener) return t.addEventListener(e, n, !1), { remove: function () { t.removeEventListener(e, n, !1) } }; if ("function" == typeof t.attachEvent) return t.attachEvent("on" + e, n), { remove: function () { t.detachEvent("on" + e, n) } } } } }, function (t, e, n) { "use strict"; var i, r, o, a; e.__esModule = !0, e.default = function (t) { i || (i = document.createElement("table"), r = document.createElement("tr"), o = /^\s*<(\w+|!)[^>]*>/, a = { tr: document.createElement("tbody"), tbody: i, thead: i, tfoot: i, td: r, th: r, "*": document.createElement("div") }); var e = o.test(t) && RegExp.$1; e && e in a || (e = "*"); var n = a[e]; t = t.replace(/(^\s*)|(\s*$)/g, ""), n.innerHTML = "" + t; var s = n.childNodes[0]; return n.removeChild(s), s } }, function (t, e, n) { "use strict"; e.__esModule = !0; var i = n(29), r = n(60); e.default = function (t, e) { var n = r.default(t, e), o = parseFloat(i.default(t, "borderTopWidth")) || 0, a = parseFloat(i.default(t, "paddingTop")) || 0, s = parseFloat(i.default(t, "paddingBottom")) || 0; return n + o + (parseFloat(i.default(t, "borderBottomWidth")) || 0) + a + s + (parseFloat(i.default(t, "marginTop")) || 0) + (parseFloat(i.default(t, "marginBottom")) || 0) } }, function (t, e, n) { "use strict"; e.__esModule = !0; var i = n(29), r = n(61); e.default = function (t, e) { var n = r.default(t, e), o = parseFloat(i.default(t, "borderLeftWidth")) || 0, a = parseFloat(i.default(t, "paddingLeft")) || 0, s = parseFloat(i.default(t, "paddingRight")) || 0, u = parseFloat(i.default(t, "borderRightWidth")) || 0, l = parseFloat(i.default(t, "marginRight")) || 0; return n + o + u + a + s + (parseFloat(i.default(t, "marginLeft")) || 0) + l } }, function (t, e, n) { "use strict"; e.__esModule = !0, e.default = function () { return window.devicePixelRatio ? window.devicePixelRatio : 2 } }, function (t, e, n) { "use strict"; e.__esModule = !0, e.default = function (t, e) { if (t) for (var n in e) e.hasOwnProperty(n) && (t.style[n] = e[n]); return t } }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } Object.defineProperty(e, "__esModule", { value: !0 }), e.default = function (t) { var e = i(t); return null !== t && "object" === e || "function" === e } }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } Object.defineProperty(e, "__esModule", { value: !0 }); e.default = function (t) { return "object" === i(t) && null !== t } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); e.default = function (t) { return null !== t && "function" != typeof t && isFinite(t.length) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(123); e.Size = i.default; var r = n(125); e.Color = r.default }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(2), o = n(64), a = function (t) { function e(e) { return t.call(this, i.__assign({ type: "size-legend" }, e)) || this } return i.__extends(e, t), e.prototype.getBackgroundShapeAttr = function () { var t = this.get("width"), e = this.get("height"), n = t / 2, i = e / 2; return { points: "rect" === this.get("handleIcon") ? this.isHorizontal() ? [[0, e], [0, e - 4], [t, 0], [t, e]] : [[0, 0], [t, 0], [t, e], [t - 4, e]] : this.isHorizontal() ? [[0, i + 2], [0, i - 2], [t, i - 2], [t, i + 2]] : [[n + 2, 0], [n - 2, 0], [n - 2, e], [n + 2, e]] } }, e.prototype.createBackgroundGroup = function () { var t = this.getBackgroundShapeAttr(), e = this.get("backgroundStyle"), n = this.get("fillStyle"), o = new r.Polygon({ attrs: i.__assign(i.__assign({}, t), e) }), a = new r.Polygon({ attrs: i.__assign(i.__assign(i.__assign({}, t), e), n) }), s = new r.Group; return this.isOperational() ? (s.add(o), s.add(a)) : s.add(a), { group: s, background: o, frontend: a } }, e }(o.default); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(2), o = n(3), a = n(44), s = function (t) { function e(e) { var n = t.call(this) || this; n.onMouseMove = function (t) { var e = t.clientX, i = t.clientY; n.updateSliderStatus(e, i) }, n.onMouseUp = function () { n.clearAllEvents && n.clearAllEvents(), n.currentTarget = void 0 }; var i = e.layout, r = e.sliderType, o = e.sliderSize, s = e.operational, u = e.width, l = e.height, c = e.textStyle, h = e.min, p = e.max, f = e.range, d = e.formatter; n.layout = i, n.sliderType = r; var g = o || [], v = g[0], y = void 0 === v ? a.SLIDER_WIDTH : v, m = g[1], x = void 0 === m ? a.SLIDER_HEIGHT : m; return n.sliderSize = [y, x], n.operational = s, n.width = u, n.height = l, n.min = h, n.max = p, n.range = f, n.textStyle = c, n.formatter = d, n.initialSlider(), n } return i.__extends(e, t), e.prototype.setBackground = function (t) { this.backgroundGroup && this.backgroundGroup.destroy(); var e = t.group, n = (t.background, t.frontend); this.backgroundGroup = e, this.backgroundGroup.set("zIndex", 0), this.operational && this.rangeSliderShape && n && n.attr("clip", this.rangeSliderShape), this.add(this.backgroundGroup), this.sort() }, e.prototype.isHorizontal = function () { return "horizontal" === this.layout }, e.prototype.initialSlider = function () { if (this.operational) { this.rangeSliderShape = this.createRangeSliderShape(), this.rangeSliderShape.set("zIndex", 1), this.minSliderGroup = this.createMinSliderGroup(), this.minSliderGroup.set("zIndex", 2), this.maxSliderGroup = this.createMaxSliderGroup(), this.maxSliderGroup.set("zIndex", 2); var t = this.range, e = t[0], n = t[1]; this.renderUIWithRange(e, n) } this.bindEvent() }, e.prototype.getSliderCursor = function () { return this.isHorizontal() ? "ew-resize" : "ns-resize" }, e.prototype.createMinSliderGroup = function () { var t = this.addGroup(); return this.minSliderShape = this.createSliderButton(t, !0), this.minTextShape = this.createSliderText(t, !0), t }, e.prototype.createMaxSliderGroup = function () { var t = this.addGroup(); return this.maxSliderShape = this.createSliderButton(t, !1), this.maxTextShape = this.createSliderText(t, !1), t }, e.prototype.createRangeSliderShape = function () { return this.addShape("rect", { attrs: { fill: "#fff", fillOpacity: 0, cursor: "move" } }) }, e.prototype.getRectButtonAttribute = function (t) { var e = this.sliderSize, n = e[0], i = e[1]; return this.isHorizontal() ? { x: t ? -n : 0, y: this.height / 2 - i / 2, width: n, height: i } : { x: this.width / 2 - i / 2, y: t ? 0 : -n, width: i, height: n } }, e.prototype.getCircleButtonAttribute = function (t) { return this.isHorizontal() ? { x: 0, y: this.height / 2, r: a.SLIDER_CIRCLE_MAX_SIZE / 2 } : { x: this.width / 2, y: 0, r: a.SLIDER_CIRCLE_MAX_SIZE / 2 } }, e.prototype.createSliderButton = function (t, e) { var n = "rect" === this.sliderType ? this.getRectButtonAttribute(e) : "circle" === this.sliderType ? this.getCircleButtonAttribute(e) : {}, r = i.__assign(i.__assign(i.__assign({}, n), a.SliderBtnStyle), { cursor: this.getSliderCursor() }); return t.addShape(this.sliderType, { attrs: r }) }, e.prototype.getRectTextAttribute = function (t) { var e = this.sliderSize, n = e[0], i = e[1]; return this.isHorizontal() ? { x: t ? -n / 2 : n / 2, y: this.height / 2 + i / 2 + 4, textAlign: "center", textBaseline: "top" } : { x: this.width / 2 + i / 2 + 4, y: t ? n / 2 : -n / 2, textAlign: "left", textBaseline: "middle" } }, e.prototype.getCircleTextAttribute = function (t) { return this.isHorizontal() ? { x: 0, y: this.height / 2 + a.SLIDER_CIRCLE_MAX_SIZE / 2 + 4, textAlign: "center", textBaseline: "top" } : { x: this.width / 2 + a.SLIDER_CIRCLE_MAX_SIZE / 2 + 4, y: 0, textAlign: "left", textBaseline: "middle" } }, e.prototype.createSliderText = function (t, e) { var n = "rect" === this.sliderType ? this.getRectTextAttribute(e) : "circle" === this.sliderType ? this.getCircleTextAttribute(e) : {}, r = i.__assign(i.__assign(i.__assign({}, this.textStyle), n), { text: "" }); return t.addShape("text", { attrs: r }) }, e.prototype.bindEvent = function () { this.operational && this.on("mousedown", this.onMouseDown) }, e.prototype.onMouseDown = function (t) { this.currentTarget = t.target; var e = t.event; e.stopPropagation(), e.preventDefault(); var n = e.clientX, i = e.clientY; this.pos = this.isHorizontal() ? n : i, this.bindCanvasEvents() }, e.prototype.bindCanvasEvents = function () { var t = this.get("canvas").get("containerDOM"), e = o.addEventListener(t, "mousemove", this.onMouseMove), n = o.addEventListener(t, "mouseup", this.onMouseUp), i = o.addEventListener(t, "mouseleave", this.onMouseUp); this.clearAllEvents = function () { e.remove(), n.remove(), i.remove() } }, e.prototype.isDragMin = function () { return this.currentTarget === this.minSliderShape }, e.prototype.isDragMax = function () { return this.currentTarget === this.maxSliderShape }, e.prototype.isDragAll = function () { return this.currentTarget === this.rangeSliderShape }, e.prototype.updateSliderStatus = function (t, e) { var n = this, i = this.isHorizontal() ? this.width : this.height, r = this.isHorizontal() ? 1 : -1, o = this.range, a = o[0], s = o[1], u = this.pos, l = this.isHorizontal() ? t : e, c = (l - u) / i * r, h = [a, s]; this.isDragAll() ? h = c >= 0 && s + c > 1 ? [a + (1 - s), 1] : c < 0 && a + c < 0 ? [0, s - a] : [a + c, s + c] : (this.isDragMin() && (h[0] = this.getNewRange(a, c)), this.isDragMax() && (h[1] = this.getNewRange(s, c)), h[1] < h[0] && (h = Array(2).fill(this.isDragMin() ? h[0] : h[1]))), this.pos = l, this.range = h, this.emit("sliderchange", { range: h, value: h.map((function (t) { return n.getValue(t) })) }), this.renderUIWithRange(h[0], h[1]), this.get("canvas").draw() }, e.prototype.renderUIWithRange = function (t, e) { var n = this.width, i = this.height; this.minSliderGroup.resetMatrix(), this.maxSliderGroup.resetMatrix(), this.isHorizontal() ? (this.rangeSliderShape.attr({ x: n * t, y: 0, width: (e - t) * n, height: i }), this.minSliderGroup.translate(t * n, 0), this.maxSliderGroup.translate(e * n, 0)) : (this.rangeSliderShape.attr({ x: 0, y: i * (1 - e), width: n, height: (e - t) * i }), this.minSliderGroup.translate(0, (1 - t) * i), this.maxSliderGroup.translate(0, (1 - e) * i)), this.minTextShape.attr("text", this.formatter(this.getValue(t))), this.maxTextShape.attr("text", this.formatter(this.getValue(e))), "circle" === this.sliderType && (this.minSliderShape.attr({ r: (a.SLIDER_HEIGHT + t * (a.SLIDER_CIRCLE_MAX_SIZE - a.SLIDER_HEIGHT)) / 2 }), this.maxSliderShape.attr({ r: (a.SLIDER_HEIGHT + e * (a.SLIDER_CIRCLE_MAX_SIZE - a.SLIDER_HEIGHT)) / 2 })) }, e.prototype.getNewRange = function (t, e) { var n = e + t; return n > 1 ? 1 : n < 0 ? 0 : n }, e.prototype.getValue = function (t) { var e = this.min + (this.max - this.min) * t; return Number(e.toFixed(e > 1 ? 0 : 2)) }, e }(r.Group); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(2), a = n(16), s = n(64), u = n(44), l = function (t) { function e(e) { return t.call(this, i.__assign({ type: "color-legend" }, e)) || this } return i.__extends(e, t), e.prototype.calculatePercent = function (t) { var e = r.head(t).value, n = r.last(t).value - e; return r.map(t, (function (t) { return i.__assign(i.__assign({}, t), { percentage: (Number(t.value) - e) / n }) })) }, e.prototype.isSegment = function () { return !!this.get("isSegment") }, e.prototype.getOperationalGroup = function () { var t, e = this.get("width"), n = this.get("height"), s = this.calculatePercent(this.get("items")), u = this.get("backgroundStyle"), l = ""; this.isHorizontal() ? (l += "l (0) ", r.each(s, (function (e) { t = a.default.toRGB(e.color), l += e.percentage + ":" + t + " " }))) : (l += "l (90) ", r.each(s, (function (e) { t = a.default.toRGB(e.color), l += 1 - e.percentage + ":" + t + " " }))); var c = new o.Rect({ attrs: i.__assign({ x: 0, y: 0, width: e, height: n, strokeOpacity: 0 }, u) }), h = new o.Rect({ attrs: { x: 0, y: 0, width: e, height: n, fill: l, strokeOpacity: 0 } }), p = new o.Group; return this.isOperational() ? (p.add(c), p.add(h)) : p.add(h), { group: p, background: c, frontend: h } }, e.prototype.getUnOperationalGroup = function () { var t, e = this, n = this.get("width"), s = this.get("height"), l = this.calculatePercent(this.get("items")), c = this.get("textStyle"), h = new o.Group, p = "", f = [], d = l.length; this.isHorizontal() ? (p += "l (0) ", r.each(l, (function (r, o) { if (0 !== o && o !== d - 1 && (f.push(["M", r.percentage * n, 0]), f.push(["L", r.percentage * n, s])), t = a.default.toRGB(l[o].color), e.isSegment() && o > 0) { var g = a.default.toRGB(l[o - 1].color); p += r.percentage + ":" + g + " " } p += r.percentage + ":" + t + " ", h.addShape("text", { attrs: i.__assign(i.__assign({ x: r.percentage * n, y: s + u.TEXT_OFFSET, text: "" + e.formatterValue(r.value) }, c), { textBaseline: "top", textAlign: "center" }) }) }))) : (p += "l (90) ", r.each(l, (function (r, o) { if (0 !== o && o !== d - 1 && (f.push(["M", 0, s - r.percentage * s]), f.push(["L", n, s - r.percentage * s])), t = a.default.toRGB(l[o].color), p += 1 - r.percentage + ":" + t + " ", e.isSegment() && o > 0) { var g = a.default.toRGB(l[o - 1].color); p += 1 - r.percentage + ":" + g + " " } h.addShape("text", { attrs: i.__assign(i.__assign({ x: n + u.TEXT_OFFSET, y: (1 - r.percentage) * s, text: "" + e.formatterValue(r.value) }, c), { textAlign: "start", textBaseline: "middle" }) }) }))); var g = h.addShape("rect", { attrs: { x: 0, y: 0, width: n, height: s, fill: p, strokeOpacity: 0 } }); return h.addShape("path", { attrs: { path: f, lineWidth: 1, stroke: "#fff" } }), { group: h, background: g, frontend: void 0 } }, e.prototype.createBackgroundGroup = function () { return this.isOperational() ? this.getOperationalGroup() : this.getUnOperationalGroup() }, e }(s.default); e.default = l }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(127); e.CanvasCategory = i.default; var r = n(129); e.HtmlCategory = r.default }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(2), o = n(0), a = n(128), s = function (t) { function e(e) { return t.call(this, i.__assign({ type: "category-legend" }, e)) || this } return i.__extends(e, t), e.prototype.init = function () { this.isFlipped = !1; var t = this.get("container"); this.set("canvas", t.get("canvas")); var e = t.addGroup(); this.set("itemsGroup", e), this.get("flipPage") && this.set("autoWrap", !0) }, e.prototype.renderTitle = function () { var t = this.get("title"); if (t) { var e = this.get("container"), n = this.get("titleStyle"), r = e.addShape("text", { attrs: i.__assign({ x: 0, y: 0, text: t }, n) }); r.name = "legend-title", this.set("titleShape", r) } }, e.prototype.renderItems = function () { var t = this, e = this.get("items"); this.get("reversed") && e.reverse(), o.each(e, (function (e) { t._addItem(e) })), this.get("autoWrap") && this._adjustItems(); var n = this._getMaxItemSize(), i = n.maxItemWidth, r = n.maxItemHeight; this.set("maxItemWidth", i), this.set("maxItemHeight", r), this.isNeedFlip() && this.flipPage(), this._adjustPositionOffset(), this._renderBack() }, e.prototype.isNeedFlip = function () { var t = this.get("maxWidth"), e = this.get("maxItemHeight"), n = this.get("itemsGroup").getBBox(), i = this.get("layout"); if (this.get("flipPage")) { if ("vertical" === i && t < n.width) return !0; if ("horizontal" === i && e < n.height) return !0 } return !1 }, e.prototype.flipPage = function () { var t = this; this.isFlipped = !0; var e = this.get("maxItemWidth"), n = this.get("maxItemHeight"), i = this.get("maxWidth"), a = this.get("maxHeight"), s = this.get("itemsGroup"), u = s.getBBox(), l = this.get("layout"), c = this._getPaginationCfg(), h = 0, p = "up-down", f = u.tl.x, d = u.tl.y, g = 0, v = new r.Rect({ attrs: { x: f, y: d, width: i - c.size, height: a } }); if ("horizontal" === l) { var y = Math.max(i, u.width); if (v.attr("width", y), v.attr("height", n), this.set("maxWidth", y), this.set("maxHeight", n), h = Math.ceil(u.height / (n + this.get("itemMarginBottom"))), f = f + y - c.size, d = Math.ceil(d + n / 2), g = n, d - this._getHorizontalPaginationHeight() / 2 < 0) { var m = (this.get("offsetY") || 0) + this._getHorizontalPaginationHeight() / 2 - d; this.set("offsetY", m) } } if ("vertical" === l) { v.attr("width", e); var x = Math.max(a, u.height); v.attr("height", x), this.set("maxWidth", e), this.set("maxHeight", x), h = Math.ceil(u.width / (e + this.get("itemDistance"))), d = d + x + 10, p = "left-right", g = e } s.attr("clip", v), this.set("clip", v); var _ = this.flipPageUI(f, d, g, h, p); this.flipUI = _; var b = 1, w = _.arrows[0], M = _.arrows[1]; w.on("click", (function () { if (b > 1) { b -= 1, _.text.attr("text", b + " / " + h); var i = o.clone(s.attr("matrix")); if ("vertical" === l) { var r = t.get("itemDistance") + e; i[6] += r } else { r = n + t.get("itemMarginBottom"); i[7] += r } s.stopAnimate(), s.animate({ matrix: i }, 100), t.get("canvas").draw() } })), M.on("click", (function () { if (b < h) { b += 1, _.text.attr("text", b + " / " + h); var i = o.clone(s.attr("matrix")); if ("vertical" === l) { var r = t.get("itemDistance") + e; i[6] -= r } else { r = n + t.get("itemMarginBottom"); i[7] -= r } s.stopAnimate(), s.animate({ matrix: i }, 100) } })) }, e.prototype.flipPageUI = function (t, e, n, i, r) { var s, u = this._getPaginationCfg(), l = this.get("container").addGroup(), c = []; if ("left-right" === r) { var h = new a.default(o.mix({}, u.arrow, { x: t + u.arrow.width / 2, y: e, direction: "left" })); l.add(h.shape), c.push(h.shape); var p = new a.default(o.mix({}, u.arrow, { x: t + n - u.arrow.width / 2, y: e, direction: "right" })); l.add(p.shape), c.push(p.shape), s = l.addShape("text", { attrs: o.mix({}, u.text, { x: t + n / 2, y: e, text: "1 / " + i }) }) } else { var f = this._getHorizontalPaginationHeight(), d = new a.default(o.mix({}, u.arrow, { x: t, y: e - f / 2 + u.arrow.height / 2, direction: "up" })); l.add(d.shape), c.push(d.shape); var g = new a.default(o.mix({}, u.arrow, { x: t, y: e + f / 2 - u.arrow.height / 2, direction: "down" })); l.add(g.shape), c.push(g.shape), s = l.addShape("text", { attrs: o.mix({}, u.text, { x: t, y: e, text: "1 / " + i }) }) } return { arrows: c, text: s, container: l } }, e.prototype._getPaginationCfg = function () { return { arrow: { x: 0, y: 0, width: 10, height: 8, attrs: { fill: "#ccc", cursor: "pointer" }, direction: "right" }, text: { fontSize: 12, fill: "#ccc", textAlign: "center", textBaseline: "middle" }, size: 40 } }, e.prototype._getHorizontalPaginationHeight = function () { var t = this._getPaginationCfg(); return t.text.fontSize + 2 * t.arrow.height + 4 }, e.prototype.bindEvents = function () { var t = this.get("itemsGroup"); this.get("hoverable") && (t.on("mousemove", o.wrapBehavior(this, "_onMousemove")), t.on("mouseleave", o.wrapBehavior(this, "_onMouseleave"))), this.get("clickable") && t.on("click", o.wrapBehavior(this, "_onClick")) }, e.prototype.clear = function () { var t = this.get("container"); t && !t.destroyed && t.clear() }, e.prototype.destroy = function () { t.prototype.destroy.call(this); var e = this.get("container"); e && !e.destroyed && (e.get("parent") && e.remove(), e.destroy()) }, e.prototype.getCheckedCount = function () { var t = this.get("itemsGroup").get("children"); return o.filter(t, (function (t) { return t.get("checked") })).length }, e.prototype.getWidth = function () { return this.getBBox().width }, e.prototype.getHeight = function () { return this.getBBox().height }, e.prototype.getBBox = function () { if (this.isFlipped) { var t = this.get("clip"), e = this.flipUI.container; return this._mergeBBox([t.getBBox(), e.getBBox()]) } return this.get("container").getBBox() }, e.prototype._adjustPositionOffset = function () { var t = this.get("offsetX"), e = this.get("offsetY"); this.get("container").move(t, e) }, e.prototype._addItem = function (t) { var e = this.get("itemsGroup"), n = this._getNextX(), i = this._getNextY(), r = this.get("unSelectedColor"), o = e.addGroup({ x: n, y: i, value: t.value, checked: t.checked }), a = this.get("textStyle"), s = this.get("wordSpacing"), u = 0; if (t.marker) { var l = Object.assign({}, t.marker, { x: t.marker.radius + n, y: i }); t.checked || (l.fill && (l.fill = r), l.stroke && (l.stroke = r)); var c = o.addShape("marker", { type: "marker", attrs: l }); c.attr("cursor", "pointer"), c.name = "legend-marker", u += c.getBBox().width + s } var h = Object.assign({}, a, { x: u + n, y: i - (t.marker ? t.marker.radius / 2 : 0) + a.fontSize / 4, text: this.formatterValue(t.value) }); t.checked || Object.assign(h, { fill: r }); var p = o.addShape("text", { attrs: h }); p.attr("cursor", "pointer"), p.name = "legend-text"; var f = o.getBBox(), d = this.get("itemWidth"), g = o.addShape("rect", { attrs: { x: n, y: i - f.height / 2, fill: "#fff", fillOpacity: 0, width: d || f.width, height: f.height } }); return g.attr("cursor", "pointer"), g.set("origin", t), g.name = "legend-item", o.name = "legendGroup", o }, e.prototype._getNextX = function () { var t = this.get("layout"), e = this.get("itemDistance"), n = this.get("itemsGroup"), i = this.get("itemWidth"), r = n.get("children"), a = 0; return "horizontal" === t && o.each(r, (function (t) { a += (i || t.getBBox().width) + e })), a }, e.prototype._getNextY = function () { var t = this.get("itemMarginBottom"), e = this.get("titleDistance"), n = this.get("layout"), i = this.get("itemsGroup"), r = this.get("titleShape"), a = i.get("children"), s = e; return r && (s += r.getBBox().height), "vertical" === n && o.each(a, (function (e) { s += e.getBBox().height + t })), s }, e.prototype._adjustHorizontal = function () { var t, e, n, i = this.flipPage ? this._getPaginationCfg().size : 0, r = this.get("itemsGroup"), a = r.get("children"), s = this.get("maxWidth") - i, u = this.get("itemDistance"), l = this.get("itemMarginBottom"), c = this.get("titleDistance"), h = 0, p = 0, f = this.get("itemWidth"); r.getBBox().width > s && o.each(a, (function (i) { n = i.getBBox(), t = f || n.width, e = n.height + l, s - p < t && (h++ , p = 0), i.move(p, h * e + c), p += t + u })) }, e.prototype._adjustVertical = function () { var t, e, n = this._getMaxItemSize().maxItemWidth, i = this.get("itemsGroup"), r = this.get("titleShape"), a = i.get("children"), s = this.get("maxLength"), u = this.get("itemDistance"), l = this.get("itemMarginBottom"), c = this.get("titleDistance"), h = r ? r.getBBox().height + c : 0, p = this.get("itemWidth") ? this.get("itemWidth") : 0, f = h + i.getBBox().height; n = Math.max(n, p) + u; var d = 0; f > s && o.each(a, (function (i, r) { e = i.getBBox(), e.width, t = e.height, s - f < t ? (f = h, r > 0 && (d += n), i.move(d, h)) : i.move(d, f), f += t + l })) }, e.prototype._adjustItems = function () { "horizontal" === this.get("layout") ? this._adjustHorizontal() : this._adjustVertical() }, e.prototype._renderBack = function () { var t = this.get("container"), e = this.get("backgroundPadding"), n = this.get("backgroundStyle"); o.isNumber(e) && (e = [e, e, e, e]), n && t.renderBack(e, n) }, e.prototype._onMousemove = function (t) { var e = this._getLegendItem(t.target); if (e && e.get("checked")) { var n = new r.Event("itemmouseover", t, !0, !0); n.item = this._findItem(e), n.checked = e.get("checked"), this.emit("itemmouseover", n), this.get("canvas").draw() } }, e.prototype._onMouseleave = function (t) { var e = this._getLegendItem(t.target); if (e && e.get("checked")) { var n = new r.Event("itemmouseleave", t, !0, !0); n.item = this._findItem(e), n.checked = e.get("checked"), this.emit("itemmouseleave", n), this.get("canvas").draw() } }, e.prototype._onClick = function (t) { var e = this, n = this._getLegendItem(t.target); if (n && !n.get("destroyed")) { var a = n.get("checked"); if (!this.get("allowAllCanceled") && a && 1 === this.getCheckedCount()) return; var s = this.get("selectedMode"), u = this._findItem(n), l = new r.Event("itemclick", t, !0, !0); l.item = u, l.currentTarget = n, l.checked = "single" === s || !a; var c, h, p, f = this.get("unSelectedColor"), d = this.get("textStyle").fill; if ("single" === s) { var g = this.get("itemsGroup").get("children"); o.each(g, (function (t) { c = e._findShapeByName(t, "legend-marker"), h = e._findShapeByName(t, "legend-text"), p = e._findShapeByName(t, "legend-item"), t !== n ? (c.attr("fill") && c.attr("fill", f), c.attr("stroke") && c.attr("stroke", f), h.attr("fill", f), c.set("checked", !1), c.set("rawAttrs", i.__assign({}, c.get("attrs"))), h.set("checked", !1), p.set("checked", !1), t.set("checked", !1)) : (c.attr("fill") && c.attr("fill", u.marker.fill), c.attr("stroke") && c.attr("stroke", u.marker.stroke), h.attr("fill", d), c.set("rawAttrs", i.__assign({}, c.get("attrs"))), c.set("checked", !0), h.set("checked", !0), p.set("checked", !0), t.set("checked", !0)) })) } else c = this._findShapeByName(n, "legend-marker"), h = this._findShapeByName(n, "legend-text"), p = this._findShapeByName(n, "legend-item"), c.attr("fill") && c.attr("fill", a ? f : u.marker.fill), c.attr("stroke") && c.attr("stroke", a ? f : u.marker.stroke), h.attr("fill", a ? f : d), n.set("checked", !a), c.set("checked", !a), h.set("checked", !a), p.set("checked", !a); this.emit("itemclick", l), this.get("canvas").draw() } }, e.prototype._getLegendItem = function (t) { var e = t.get("parent"); return e && "legendGroup" === e.name ? e : null }, e.prototype._findItem = function (t) { var e = this.get("items"), n = null, i = t instanceof r.Group ? t.get("value") : t; return o.each(e, (function (t) { if (t.value === i) return n = t, !1 })), n }, e.prototype._findShapeByName = function (t, e) { return t.findBy((function (t) { return t.name === e })) }, e.prototype._getMaxItemSize = function () { var t = -1 / 0, e = -1 / 0, n = this.get("itemsGroup").get("children"); return o.each(n, (function (n) { var i = n.getBBox(); t < i.width && (t = i.width), e < i.height && (e = i.height) })), { maxItemWidth: t, maxItemHeight: e } }, e.prototype._mergeBBox = function (t) { var e = 1 / 0, n = -1 / 0, i = 1 / 0, a = -1 / 0; return o.each(t, (function (t) { var r = t; e = Math.min(r.minX, e), n = Math.max(r.maxX, n), i = Math.min(r.minY, i), a = Math.max(r.maxY, a) })), new r.BBox(e, i, n - e, a - i) }, e }(n(66).default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(2), r = n(0), o = { right: 90 * Math.PI / 180, left: 270 * Math.PI / 180, up: 0, down: 180 * Math.PI / 180 }, a = function () { function t(t) { this.width = 10, this.height = 10, this.direction = "right", r.assign(this, t), this._init() } return t.prototype._init = function () { var t = this.width / 2, e = this.height / 2, n = [{ x: 0, y: -e }, { x: -t, y: e }, { x: t, y: e }]; this.shape = new i.Path({ attrs: r.deepMix({ path: [["M", n[0].x, n[0].y], ["L", n[1].x, n[1].y], ["L", n[2].x, n[2].y], ["Z"]] }, this.attrs) }); var a = []; a.push(["r", o[this.direction]]), a.push(["t", this.x, this.y]), this.shape.transform(a) }, t }(); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(3), o = n(2), a = n(0), s = n(66), u = { position: "absolute", overflow: "auto", top: 0, left: 0 }, l = { marginBottom: "4px" }, c = { listStyleType: "none", margin: 0, padding: 0 }, h = { cursor: "pointer", marginBottom: "5px", marginRight: "16px", userSelect: "none" }, p = { width: "9px", height: "9px", borderRadius: "50%", display: "inline-block", marginRight: "8px", verticalAlign: "middle" }, f = { activeColor: "#000", inactiveColor: "#ccc", arrowSize: 8, animation: !0 }; function d(t, e) { var n = t.className; return a.isNil(n) ? t : (n = n.split(" ")).indexOf(e) > -1 ? t : t.parentNode ? t.parentNode.className === e ? t.parentNode : d(t.parentNode, e) : null } function g(t, e) { return t.getElementsByClassName(e)[0] } var v = function (t) { function e(e) { return t.call(this, i.__assign({ type: "html-legend", prefixClassName: "g2-legend", pagination: !0, highlight: !1 }, e)) || this } return i.__extends(e, t), e.prototype.init = function () { var t = this.get("fontFamily"), e = this.get("layout"), n = this.get("maxWidth"), o = this.get("maxHeight"), s = this.get("prefixClassName"), l = this.get("containerTpl"); l || (l = '<div class="' + s + '">\n        <div class="' + s + '-title"></div>\n        <ul class="' + s + '-list"></ul>\n      </div>'); var c = r.createDom(l), h = a.deepMix({}, u, this.get("backgroundStyle")); r.modifyCSS(c, i.__assign({ fontFamily: t, maxHeight: o + "px", width: "100%", height: "auto" }, h)), "horizontal" === e && r.modifyCSS(c, { maxWidth: n + "px" }); var p = this.get("container"); if (p) if (/^\#/.test(p)) { var f = p.replace("#", ""); (p = document.getElementById(f)).appendChild(c) } else p.appendChild(c); else this.get("canvas").get("el").parentNode.appendChild(c); this.set("_legendContainer", c) }, e.prototype.renderTitle = function () { var t = this.get("title"); if (t) { var e = this.get("prefixClassName"), n = this.get("_legendContainer"), i = g(n, e + "-title"); i || (i = r.createDom('<div class="' + e + '-title"></div>'), n.appendChild(i)), i.innerHTML = t; var o = a.deepMix({}, l, this.get("titleStyle")); r.modifyCSS(i, o), this.set("_titleContainer", i) } }, e.prototype.renderItems = function () { var t = this, e = this.get("items"); if (e && e.length) { var n = this.get("_legendContainer"), i = this.get("layout"), o = this.get("prefixClassName"); this.get("reversed") && e.reverse(); var s = g(n, o + "-list"); s || (s = r.createDom('<ul class="' + o + '-list"></ul>')); var u = a.deepMix({}, c, this.get("listStyle")); "horizontal" === i && (u.width = "max-content"), r.modifyCSS(s, u); var l = r.createDom("<div></div>"); n.appendChild(l), l.appendChild(s), this.set("_clipContainer", l), this.set("_itemGroupContainer", s); var f = this.get("itemTpl"); f || (f = '<li class="' + o + '-item">\n      <span class="' + o + '-item-marker"></span>\n      <span class="' + o + '-item-text"></span>\n      </li>'); var d = this.get("unSelectedColor"), v = a.deepMix({}, h, this.get("itemStyle")), y = a.deepMix({}, p, this.get("markerStyle")); "horizontal" === i ? v.display = "inline-block" : "vertical" === i && (v.display = "block"); var m = {}; a.each(e, (function (e, n) { var i, u = e.checked, l = t.formatterValue(e.value), c = e.marker.fill || e.marker.stroke, h = u ? c : d; if (a.isFunction(f)) { var p = f(l, h, u, n); i = r.createDom(p) } else { g(i = r.createDom(f), o + "-item-text").innerHTML = l } v.color = h, y.backgroundColor = h, r.modifyCSS(i, v), i.setAttribute("data-checked", u), i.setAttribute("data-value", e.value), i.setAttribute("data-color", c); var x = g(i, o + "-item-marker"); x && r.modifyCSS(x, y), s.appendChild(i), m[e.value] = e })), this.set("_itemMap", m), "horizontal" === i ? this._renderHorizontalPagination() : this._renderPagination() } }, e.prototype.bindEvents = function () { var t = this, e = this.get("_itemGroupContainer"); e && (this.get("clickable") && (e.onclick = function (e) { return t._onClick(e) }), this.get("hoverable") && (e.onmousemove = function (e) { return t._onMousemove(e) }, e.onmouseout = function (e) { return t._onMouseout(e) })) }, e.prototype.getWidth = function () { var t = this.get("_legendContainer"); return r.getOuterWidth(t) }, e.prototype.getHeight = function () { var t = this.get("_legendContainer"); return r.getOuterHeight(t) }, e.prototype.getBBox = function () { return new o.BBox(this.get("x") || 0, this.get("y") || 0, this.getWidth(), this.getHeight()) }, e.prototype.moveTo = function (t, e) { var n = this.get("_legendContainer"); r.modifyCSS(n, { left: t + "px", top: e + "px" }), this.set("x", t), this.set("y", e) }, e.prototype.destroy = function () { t.prototype.destroy.call(this); var e = this.get("_legendContainer"); e && e.parentNode && e.parentNode.removeChild(e) }, e.prototype.draw = function () { return null }, e.prototype._updateStatus = function (t, e, n, i) { e && (e.style.background = n), t.style.color = n, t.setAttribute("data-checked", i) }, e.prototype._onClick = function (t) { var e = this, n = (this.get("items"), this.get("_itemGroupContainer")), i = this.get("prefixClassName"), r = i + "-item", o = i + "-item-marker", s = t.target, u = s.className.split(" "); if (!(a.indexOf(u, i + "-list") > -1)) { var l = d(s, r), c = g(l, o), h = this.get("_itemMap"), p = h[l.getAttribute("data-value")], f = l.getAttribute("data-color"), v = this.get("selectedMode"), y = this.get("unSelectedColor"), m = n.childNodes; if ("single" === v) p.checked = !0, a.each(m, (function (t) { if (t !== l) { var n = g(t, o); e._updateStatus(t, n, y, "false"), h[t.getAttribute("data-value")].checked = !1 } else e._updateStatus(l, c, f, "true") })); else { var x = "true" === l.getAttribute("data-checked"), _ = 0; if (a.each(m, (function (t) { "true" === t.getAttribute("data-checked") && _++ })), !this.get("allowAllCanceled") && x && 1 === _) return; p.checked = !p.checked, x ? this._updateStatus(l, c, y, "false") : this._updateStatus(l, c, f, "true") } this.emit("itemclick", { item: p, currentTarget: l, checked: "single" === v || p.checked }) } }, e.prototype._onMousemove = function (t) { var e = this.get("_lastActiveItem"), n = (this.get("items"), this.get("_itemMap")), i = this.get("prefixClassName"), r = i + "-list", o = i + "-item", s = t.target, u = s.className.split(" "); if (!(a.indexOf(u, r) > -1)) { var l = d(s, o), c = n[l.getAttribute("data-value")]; if (c) { var h = this.get("highlight"); if (c.checked && e !== c) { if (l.className += " active", h) this.get("_itemGroupContainer").childNodes.forEach((function (t) { t !== l && "true" === t.getAttribute("data-checked") && (t.className += " inactive") })); this.set("_lastActiveItem", c) } this.emit("itemmouseover", { item: c, currentTarget: l, checked: c.checked }) } } }, e.prototype._onMouseout = function (t) { this.get("_itemGroupContainer").childNodes.forEach((function (t) { var e = t.className.split(" "); a.remove(e, (function (t) { return "active" === t || "inactive" === t })), t.className = e.join(" ") })), this.set("_lastActiveItem", null), this.emit("itemmouseleave", t) }, e.prototype._renderPagination = function () { var t = this.get("pagination"), e = this.get("_legendContainer"), n = this.get("_itemGroupContainer"); if (t && e.scrollHeight > e.offsetHeight) { r.modifyCSS(e, { overflow: "hidden", height: this.get("maxHeight") + "px" }); var i = r.createDom('\n      <div style="position: absolute;bottom: 0;left: 0;user-select: none;margin-top: 5px;">\n        <div class="pre-page"\n          style="display:inline-block;-webkit-transform: rotate(-135deg);transform: rotate(-135deg);margin-left: 2px;">\n        </div>\n        <span class="current-page-number">1</span> /  <span class="total-page-number">0</span>\n        <div class="next-page"\n          style="display:inline-block;-webkit-transform: rotate(45deg);transform: rotate(45deg);margin-right: 2px;">\n        </div>\n      </div>\n    '); e.appendChild(i); var o = this.getHeight() - (this.get("_titleContainer") ? r.getOuterHeight(this.get("_titleContainer")) : 0) - r.getOuterHeight(i), s = n.offsetHeight, u = this.get("_clipContainer"); r.modifyCSS(u, { maxHeight: o + "px", overflow: "hidden" }); var l = Math.ceil(s / o), c = r.getOuterHeight(n.childNodes[0]), h = Math.floor(o / c) * c, p = g(i, "current-page-number"), d = g(i, "total-page-number"), v = g(i, "pre-page"), y = g(i, "next-page"); d.innerHTML = l; var m = a.deepMix({}, f, t), x = { cursor: "pointer", border: m.activeColor + " solid", borderWidth: "2px 2px 0 0", width: m.arrowSize + "px", height: m.arrowSize + "px" }, _ = { cursor: "default", border: m.inactiveColor + " solid", borderWidth: "2px 2px 0 0", width: m.arrowSize + "px", height: m.arrowSize + "px" }; r.modifyCSS(v, _), r.modifyCSS(y, x), m.animation && r.modifyCSS(n, { transition: "transform .3s ease-in" }); var b = 1, w = 0; v.onclick = function () { 1 !== b && (b -= 1, w += h, p.innerHTML = b, r.modifyCSS(v, x), r.modifyCSS(y, x), r.modifyCSS(n, { transform: "translateY(" + w + "px)" }), 1 === b && r.modifyCSS(v, _)) }, y.onclick = function () { b !== l && (b += 1, w -= h, p.innerHTML = b, r.modifyCSS(y, x), r.modifyCSS(v, x), r.modifyCSS(n, { transform: "translateY(" + w + "px)" }), b === l && r.modifyCSS(y, _)) } } }, e.prototype._renderHorizontalPagination = function () { var t = this.get("pagination"), e = this.get("_legendContainer"), n = this.get("_itemGroupContainer"); if (t && e.scrollWidth > e.offsetWidth) { r.modifyCSS(e, { overflow: "hidden", width: this.get("maxWidth") + "px" }); var i = r.createDom('\n      <div style="position: absolute;bottom: 4px;right: 12px;user-select: none;margin-top: 5px;background: #fff;">\n        <div class="pre-page"\n          style="display:inline-block;-webkit-transform: rotate(-135deg);transform: rotate(-135deg);margin-left: 2px;">\n        </div>\n        <span class="current-page-number">1</span> /  <span class="total-page-number">0</span>\n        <div class="next-page"\n          style="display:inline-block;-webkit-transform: rotate(45deg);transform: rotate(45deg);margin-right: 2px;">\n        </div>\n      </div>\n    '); e.appendChild(i); var o = this.getWidth() - r.getOuterWidth(i) - 40, s = n.offsetWidth, u = this.get("_clipContainer"); r.modifyCSS(u, { maxWidth: o + "px", overflow: "hidden" }); var l = Math.ceil(s / o), c = (r.getOuterWidth(n.childNodes[0]), o), h = g(i, "current-page-number"), p = g(i, "total-page-number"), d = g(i, "pre-page"), v = g(i, "next-page"); p.innerHTML = l; var y = a.deepMix({}, f, t), m = { cursor: "pointer", border: y.activeColor + " solid", borderWidth: "2px 2px 0 0", width: y.arrowSize + "px", height: y.arrowSize + "px" }, x = { cursor: "default", border: y.inactiveColor + " solid", borderWidth: "2px 2px 0 0", width: y.arrowSize + "px", height: y.arrowSize + "px" }; r.modifyCSS(d, x), r.modifyCSS(v, m), y.animation && r.modifyCSS(n, { transition: "transform .3s ease-in" }); var _ = 1, b = 0; d.onclick = function () { 1 !== _ && (_ -= 1, b += c, h.innerHTML = _, r.modifyCSS(d, m), r.modifyCSS(v, m), r.modifyCSS(n, { transform: "translateX(" + b + "px)" }), 1 === _ && r.modifyCSS(d, x)) }, v.onclick = function () { _ !== l && (_ += 1, b -= c, h.innerHTML = _, r.modifyCSS(v, m), r.modifyCSS(d, m), r.modifyCSS(n, { transform: "translateX(" + b + "px)" }), _ === l && r.modifyCSS(v, x)) } } }, e }(s.default); e.default = v }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(2), o = i.__importStar(n(0)), a = n(45), s = function () { function t(t) { this.position = "top", this.destroyed = !1, o.assign(this, t), this._init() } return t.prototype.getBBox = function () { var t = this; if (this.shape) { var e = this.shape.getBBox(); if (0 === this.index) return e; var n = this.plot.theme.description.padding; return o.isArray(n) && o.each(n, (function (e, i) { "function" == typeof n[i] && (n[i] = n[i](t.plot.options.legend.position)) })), new r.BBox(e.maxX, e.minY, e.width, e.height + n[2]) } return null }, t.prototype.clear = function () { this.shape && this.shape.attr("text", "") }, t.prototype.destroy = function () { this.shape && this.shape.remove(), this.destroyed = !0 }, t.prototype._init = function () { var t = this._textWrapper(); this.shape = this.container.addShape("text", { attrs: o.mix({ x: this.leftMargin, y: this.topMargin, text: t }, this.style) }), this.shape.name = this.name }, t.prototype._textWrapper = function () { var t = this.wrapperWidth, e = this.style, n = this.text, o = new r.Text({ attrs: i.__assign({ text: "", x: 0, y: 0 }, e) }), s = n.split("\n").map((function (e) { for (var n = "", i = e.split(""), r = [], s = 0; s < i.length; s++) { var u = i[s]; if (o.attr("text", n += u), o.getBBox().width - 1 > t) { if (0 === s) break; r.push(s), n = "" } } return a.breakText(i, r) })); return o.remove(), s.join("\n") }, t }(); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(46); function a(t, e, n) { t[n] && (e[n] = t[n]) } var s = function () { function t(t) { this.config = !1, this.plot = t.plot, this.dim = t.dim, this.init() } return t.prototype.init = function () { this.config = !1; var t = this.plot.getPlotTheme(); this.themeConfig = t && t.axis && t.axis[this.dim], this._needDraw() && this._styleParser() }, t.prototype._styleParser = function () { this.config = i.__assign({}, this.localProps), this._isVisible("line") ? this._lineParser() : this.config.line = null, this._isVisible("grid") ? this._gridParser() : this.config.grid = null, this._isVisible("tickLine") ? this._tickLineParser() : this.config.tickLine = null, this._isVisible("label") ? this._labelParser() : this.config.label = null, this._isVisible("title") ? this._titleParser() : this.config.title = null, a(this.localProps, this.config, "autoHideLabel"), a(this.localProps, this.config, "autoRotateLabel"), a(this.localProps, this.config, "autoRotateTitle") }, t.prototype._needDraw = function () { var t = this.plot.options, e = t[this.dim + "Axis"] ? t[this.dim + "Axis"] : {}, n = r.deepMix({}, this.themeConfig, e); return this.localProps = n, !!n.visible }, t.prototype._lineParser = function () { this.config.line = this.localProps.line, this.localProps.line.style && (this.config.line = this.localProps.line.style), this.applyThemeConfig("line") }, t.prototype._gridParser = function () { var t = this, e = this.localProps.grid.style; r.isFunction(e) ? this.config.grid = function (n, i, o) { var a = e(n, i, o); return r.deepMix({}, r.get(t.themeConfig, "grid.style"), a) } : e && (this.config.grid = e, this.applyThemeConfig("grid")) }, t.prototype._tickLineParser = function () { this.config.tickLine = this.localProps.tickLine, this.localProps.tickLine.style && (this.config.tickLine = this.localProps.tickLine.style), this.applyThemeConfig("tickLine") }, t.prototype._labelParser = function () { var t = this.localProps.label, e = t.style, n = i.__rest(t, ["style"]), o = i.__assign({}, n); e && (o.textStyle = this.localProps.label.style), o.textStyle = r.deepMix({}, r.get(this.themeConfig, "label.style"), o.textStyle); var a = this.parseFormatter(o); o.formatter = a, this.config.label = o }, t.prototype._titleParser = function () { var t = i.__assign({}, this.localProps.title), e = this.localProps.title, n = e.visible, o = e.style, a = e.text; n ? (this.config.showTitle = !0, o && (t.textStyle = o), t.textStyle = r.deepMix({}, r.get(this.config, "title.style"), t.textStyle), a && (t.text = a)) : this.config.showTitle = !1, this.config.title = t }, t.prototype._isVisible = function (t) { return !(!this.localProps[t] || !this.localProps[t].visible) }, t.prototype.applyThemeConfig = function (t) { this.config[t] = r.deepMix({}, r.get(this.themeConfig, t + ".style"), this.config[t]) }, t.prototype.parseFormatter = function (t) { var e = o.combineFormatter(o.getNoopFormatter(), o.getPrecisionFormatter(t.precision), o.getSuffixFormatter(t.suffix)); return t.formatter && (e = o.combineFormatter(e, t.formatter)), e }, t }(); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(13), o = i.__importStar(n(0)), a = n(15), s = function () { function t(t) { o.assign(this, t), this._init() } return t.prototype._init = function () { var t = this.plot.options, e = this.getDefaultStyle(), n = { type: "line", top: !0, start: this.cfg.start, end: this.cfg.end }; if (n.line = o.deepMix({}, e.line, { style: this.cfg.lineStyle }), n.text = o.deepMix({}, e.text, this.cfg.text), this.cfg.type) { var i = this._getState(this.cfg.type), a = this._getState("min"), s = this._getState("max"), u = 100 * (1 - new (r.getScale("linear"))(o.mix({}, { min: "column" === this.plot.type ? 0 : a, max: s, nice: !0, values: this.values }, this.plot.config.scales[t.yField])).scale(i)) + "%", l = ["0%", u], c = ["100%", u]; this.config = o.mix({ start: l, end: c }, n) } else this.config = n }, t.prototype._getState = function (t) { return this.values = this._extractValues(), "median" === t ? a.getMedian(this.values) : "mean" === t ? a.getMean(this.values) : "max" === t ? Math.max.apply(Math, this.values) : "min" === t ? Math.min.apply(Math, this.values) : void 0 }, t.prototype._extractValues = function () { var t = this.plot.options, e = t.yField, n = []; return o.each(t.data, (function (t) { n.push(t[e]) })), n }, t.prototype.getDefaultStyle = function () { return this.getDefaultTextAlign(), { line: { style: { lineWidth: 2, stroke: "#333333", opacity: .7, lineDash: [0, 0] } }, text: { offsetY: -5, style: { fontSize: 14, stroke: "white", lineWidth: 2, textAlign: this.getDefaultTextAlign() } } } }, t.prototype.getDefaultTextAlign = function () { var t = this.cfg.text; if (t) { if (!t.position || "start" === t.position) return "left"; if ("center" === t.position) return "center"; if ("end" === t.position) return "right" } }, t }(); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i, r, o = n(1).__importStar(n(0)); function a(t, e) { i || s(t), o.each(i, (function (t, n) { var i = u(t, e); if (l(i.labelData, i.con)) { r[n]; var o = { opacity: 1, fontWeight: 600, fill: "red" }; t.shape.attr(o) } })) } function s(t) { i = [], r = []; var e = t.view.get("axisController").axes; o.each(e, (function (e) { var n = [], a = function (t, e) { var n = t.options, i = "y", r = e.get("position"); "bottom" !== r && "top" !== r || (i = "x"); var o = n[i + "Field"]; return t.view.get("scales")[o] }(t, e), s = e.get("labelRenderer").get("group").get("children"); if (o.each(s, (function (t) { "text" === t.type && (n.push({ shape: t }), r.push(t.attr())) })), a) { var u = a.ticks, l = a.field; o.each(n, (function (t, e) { t.value = u[e], t.scaleField = l, t.type = a.type })) } i.push.apply(i, n) })) } function u(t, e) { var n, i = ((n = {})[t.scaleField] = t.value, n), r = o.clone(e); return "time" === t.type && o.isObject(e) && !o.isFunction(r.exp) && (r.exp = new Date(r.exp).getTime()), { labelData: i, con: r } } function l(t, e) { if (!o.isFunction(e)) { var n = e.name, i = e.exp; return !!t[n] && (o.isFunction(i) ? i(t[n]) : t[n] === i) } return e(t) } e.default = { active: a, selected: a, disable: function (t, e) { i || s(t), o.each(i, (function (t, n) { var i = u(t, e); if (l(i.labelData, i.con)) { var o = r[n], a = { opacity: .2 * (o.opacity || 1) }; t.shape.attr(a) } })) } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i, r, o = n(1).__importStar(n(0)), a = n(36); function s(t, e) { i || u(t), o.each(i, (function (t, n) { var i = t.get("origin"); if (a.compare(i, e)) { var s = r[n], u = o.mix({}, s, { opacity: 1 }); t.attr(u) } })) } function u(t) { i = [], r = []; var e = t.view.get("elements"); o.each(e, (function (t) { var e = t.get("labels"); e && o.each(e, (function (t) { i.push(t), r.push(t.attr()) })) })) } e.default = { active: s, selected: s, disable: function (t, e) { i || u(t), o.each(i, (function (t, n) { var i = t.get("origin"); if (a.compare(i, e)) { var o = r[n], s = { opacity: .2 * (o.opacity || 1) }; t.attr(s) } })) } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(36), o = ["xField", "yField", "angleField"]; function a(t, e) { var n = t.options; if (function (t, e) { var n = function (t) { var e = []; return i.each(o, (function (n) { i.has(t, n) && e.push(n) })), e }(t); return !i.isFunction(e) && n.indexOf(e.name) }(n, e)) { var a = n.data; i.each(a, (function (n) { if (r.compare(n, e)) { var i = t.view.getXY(n); t.view.on("tooltip:create", (function (t) { s(e, t, !1) })), t.view.showTooltip(i) } })) } } function s(t, e, n) { var o = !n, a = i.clone(e.items); e.items.splice(0), i.each(a, (function (n) { var i = n.point._origin; r.compare(i, t) === o && e.items.push(n) })) } e.default = { active: a, selected: a, disable: function (t, e) { t.view.on("tooltip:change", (function (t) { s(e, t, !0) })) } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(30)), o = i.__importDefault(n(137)), a = i.__importDefault(n(138)); r.default.registerInteraction("slider", a.default), r.default.registerInteraction("scrollbar", o.default), i.__exportStar(n(30), e), e.default = r.default }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(2), o = n(106), a = n(0), s = i.__importDefault(n(30)), u = n(72), l = function (t) { void 0 === t && (t = {}); var e = i.__assign({ type: "horizontal", categorySize: 32, width: 8, height: 8, padding: [0, 0, 0, 0] }, t); return t.padding || (e.padding = "horizontal" === e.type ? [4, 0, 4, 0] : [0, 4, 0, 4]), e }, c = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.onChangeFn = a.throttle(e.onChange.bind(e), 20, { leading: !0 }), e } return i.__extends(e, t), e.getInteractionRange = function (t, e) { var n = l(e), i = n.padding, o = i[0], a = i[1], s = i[2], u = i[3]; return "horizontal" === n.type ? new r.BBox(t.minX, t.maxY - n.height - o - s, t.width, n.height + o + s) : new r.BBox(t.maxX - n.width - u - a, t.minY, n.width + u + a, t.height) }, e.prototype.render = function () { var t = this, e = this.view; this.ratio = 0, this.thumbOffset = 0, e.on("afterrender", (function () { var e = t.view.get("padding"); a.isEqual([0, 0, 0, 0], e) || (t.trackLen ? t.renderScrollbar() : (t.measureScrollBar(), t.changeViewData(t.getScrollRange()))) })) }, e.prototype.clear = function () { this.scrollBar && (this.scrollBar.destroy(), this.scrollBar = null), this.container && (this.container.remove(!0), this.container = null), this.trackLen = null, this.thumbLen = null }, e.prototype.renderScrollbar = function () { var t = l(this.getInteractionConfig()), e = this.getRange(), n = "vertical" !== t.type, i = this.view.get("panelRange"), r = t.padding, a = r[0], s = r[3], u = n ? { x: i.minX + s, y: e.tl.y + a } : { x: e.tl.x + s, y: i.minY + a }; this.scrollBar ? (this.scrollBar.updateTrackLen(this.trackLen), this.scrollBar.updateThumbLen(this.thumbLen), this.scrollBar.updateScrollBarPos(u), this.scrollBar.updateThumbOffset(this.thumbOffset)) : (this.container = this.canvas.addGroup(), this.scrollBar = new o.ScrollBar({ isHorizontal: n, trackLen: this.trackLen, thumbLen: this.thumbLen, position: u, thumbOffset: this.ratio * this.trackLen }), this.container.add(this.scrollBar), this.scrollBar.set("zIndex", 999), this.scrollBar.on("scrollchange", this.onChangeFn)) }, e.prototype.measureScrollBar = function () { var t = l(this.getInteractionConfig()), e = t.padding, n = e[0], i = e[1], r = e[2], o = e[3], s = "vertical" !== t.type, u = this.view.get("panelRange"), c = this.view.getXScale(), h = this.view.getYScales(); this.cnt = c.values.length, this.xScaleCfg = { field: c.field, values: c.values || [] }, this.yScalesCfg = a.map(h, (function (t) { return { field: t.field, type: t.type, min: t.min, max: t.max, ticks: t.ticks, formatter: t.formatter } })), this.step = Math.floor((s ? u.width : u.height) / t.categorySize), this.trackLen = s ? u.width - o - i : u.height - n - r, this.thumbLen = Math.max(this.trackLen * a.clamp(this.step / c.values.length, 0, 1), 8) }, e.prototype.getScrollRange = function () { var t = Math.floor((this.cnt - this.step) * a.clamp(this.ratio, 0, 1)); return [t, Math.min(t + this.step, this.cnt)] }, e.prototype.changeViewData = function (t) { var e = this, n = t[0], r = t[1], o = l(this.getInteractionConfig()), s = this.getViewLayer(), c = s.options.meta, h = s.getData(), p = u.getDataByScaleRange(this.xScaleCfg.field, this.xScaleCfg.values, h, [n, r], "vertical" === o.type); this.yScalesCfg.forEach((function (t) { var n = a.get(c, t.field) || {}; e.view.scale(t.field, i.__assign(i.__assign({ formatter: t.formatter }, n), { type: t.type, min: t.min, max: t.max })) })), this.view.set("data", p), this.view.repaint() }, e.prototype.onChange = function (t) { var e = t.ratio, n = t.thumbOffset; this.ratio = e, this.thumbOffset = n; var i = this.view.get("animation"); this.view.animate(!1), this.changeViewData(this.getScrollRange()), this.view.animate(i) }, e }(s.default); e.default = c }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(2), o = n(106), a = n(0), s = i.__importDefault(n(30)), u = n(72), l = function (t) { void 0 === t && (t = {}); var e = i.__assign({ type: "horizontal", start: 0, end: 1, width: void 0, height: void 0, padding: [0, 0, 0, 0], backgroundColor: void 0, foregroundColor: void 0 }, t); t.padding || (e.padding = "horizontal" === e.type ? [4, 0, 4, 0] : [0, 4, 0, 4]), t.height || (e.height = 16), t.width || (e.width = 16); var n = a.clamp(Math.min(e.start, e.end), 0, 1), r = a.clamp(Math.max(e.start, e.end), 0, 1); return e.start = n, e.end = r, e }, c = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.onChangeFn = a.throttle(e.onChange.bind(e), 20, { leading: !0 }), e } return i.__extends(e, t), e.getInteractionRange = function (t, e) { var n = l(e), i = n.padding || [0, 0, 0, 0], o = i[0], a = i[1], s = i[2], u = i[3]; return "horizontal" === n.type ? new r.BBox(t.minX, t.maxY - n.height - o - s, t.width, n.height + o + s) : new r.BBox(t.maxX - n.width - u - a, t.minY, n.width + u + a, t.height) }, e.prototype.render = function () { var t = this, e = l(this.getInteractionConfig()); this.curStart = e.start, this.curEnd = e.end, this.xScaleCfg = void 0, this.view.on("afterrender", (function () { if (t.xScaleCfg) t.renderSlider(); else { var e = t.view.getXScale(); t.xScaleCfg = { field: e.field, values: e.values || [] }, t.view.set("data", t.getSliderData(t.curStart, t.curEnd)), t.view.repaint() } })) }, e.prototype.clear = function () { this.slider && (this.slider.destroy(), this.slider = null), this.container && (this.container.remove(!0), this.container = null) }, e.prototype.renderSlider = function () { this.slider ? this.slider.update(this.getSliderConfig()) : (this.container = this.canvas.addGroup(), this.slider = new o.Slider(this.getSliderConfig()), this.slider.on("sliderchange", this.onChangeFn), this.container.add(this.slider)) }, e.prototype.getSliderConfig = function () { var t = this.view.get("panelRange"), e = this.getRange(), n = l(this.getInteractionConfig()) || {}, i = n.padding, r = void 0 === i ? [0, 0, 0, 0] : i, o = n.foregroundColor, a = n.backgroundColor, s = r[0], u = r[1], c = r[2], h = r[3], p = this.getSliderMinMaxText(this.curStart, this.curEnd), f = p.minText, d = p.maxText, g = { x: t.minX + h, y: e.tl.y + s, width: t.width - h - u, height: e.height - s - c, start: this.curStart, end: this.curEnd, minText: f, maxText: d, trendCfg: { data: this.getSliderTrendData(), isArea: !1, smooth: !1 }, foregroundStyle: {}, backgroundStyle: {} }; return o && (g.foregroundStyle.fill = o), a && (g.backgroundStyle.fill = a), g }, e.prototype.getSliderTrendData = function () { var t = this.getViewLayer().options, e = t.data, n = t.yField; return a.map(e, (function (t) { return t[n] })) }, e.prototype.getSliderData = function (t, e) { var n = this.getViewLayer().getData(), i = a.size(this.xScaleCfg.values), r = Math.round(t * i), o = Math.max(r + 1, Math.round(e * i)); return u.getDataByScaleRange(this.xScaleCfg.field, this.xScaleCfg.values, n, [r, o]) }, e.prototype.getSliderMinMaxText = function (t, e) { var n = this.getViewLayer().options, i = n.data, r = void 0 === i ? [] : i, o = n.xField, s = a.size(r), u = Math.round(t * s), l = Math.max(u + 1, Math.round(e * s)), c = r.slice(u, l); return { minText: a.head(c)[o], maxText: a.last(c)[o] } }, e.prototype.onChange = function (t) { var e = this.view, n = a.clamp(Math.min(t[0], t[1]), 0, 1), i = a.clamp(Math.max(t[0], t[1]), 0, 1), r = this.getSliderData(n, i), o = this.getSliderMinMaxText(n, i), s = o.minText, u = o.maxText; this.curStart = n, this.curEnd = i, this.slider.update({ start: n, end: i, minText: s, maxText: u }); var l = e.get("animation"); e.animate(!1), e.changeData(r), e.animate(l) }, e }(s.default); e.default = c }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(2), o = i.__importStar(n(0)), a = function () { function t(t) { this.innerPaddingComponents = [], this.outerPaddingComponents = [], this.plot = t.plot } return t.prototype.registerPadding = function (t, e, n) { void 0 === e && (e = "outer"), void 0 === n && (n = !1), "inner" === e ? n && this.innerPaddingComponents.find((function (e) { return e == t })) || this.innerPaddingComponents.push(t) : n && this.outerPaddingComponents.find((function (e) { return e == t })) || this.outerPaddingComponents.push(t) }, t.prototype.clear = function () { this.innerPaddingComponents = [], this.outerPaddingComponents = o.filter(this.outerPaddingComponents, (function (t) { return t.afterRender })) }, t.prototype.clearOuterComponents = function () { o.each(this.outerPaddingComponents, (function (t) { t.afterRender && t.destroy() })), this.outerPaddingComponents = [] }, t.prototype.getPadding = function () { var t = this.plot.options, e = t.padding ? t.padding : this.plot.config.theme.padding; return "auto" === e ? [0, 0, 0, 0] : e }, t.prototype.processAutoPadding = function () { var t = this._getInnerAutoPadding(); this.plot.updateConfig({ padding: t }), this.plot.render() }, t.prototype.processOuterPadding = function () { var t = this.plot.layerBBox.minX, e = this.plot.layerBBox.maxX, n = this.plot.layerBBox.minY, i = this.plot.layerBBox.maxY; return o.each(this.outerPaddingComponents, (function (r) { var o = r.position, a = r.getBBox(), s = a.minX, u = a.maxX, l = a.minY, c = a.maxY; c >= n && c <= i && "top" === o && (n = c), l >= n && l <= i && "bottom" === o && (i = l), u > t && u <= e && "left" === o && (t = u), s >= t && u <= e && "right" === o && (e = s) })), new r.BBox(t, n, e - t, i - n) }, t.prototype._getInnerAutoPadding = function () { var t = this.plot.options, e = this.plot.view, n = e.get("viewRange"), i = n.maxX, r = n.maxY, a = this.plot.config.theme.bleeding; o.isArray(a) && o.each(a, (function (e, n) { "function" == typeof a[n] && (a[n] = a[n](t)) })), this.plot.config.theme.legend.margin = a, this.bleeding = o.clone(a); var s = [e.get("panelRange")]; this._getAxis(e, s); var u = this._mergeBBox(s); this._getLegend(e, s, u), u = this._mergeBBox(s); var l = this.innerPaddingComponents; o.each(l, (function (t) { var e = t.getBBox(); s.push(e) })); var c = (u = this._mergeBBox(s)).minY; c === n.minY && (c = 0); var h = [0 - c + this.bleeding[0], u.maxX - i + this.bleeding[1], u.maxY - r + this.bleeding[2], 0 - u.minX + this.bleeding[3]]; this.adjustAxisPadding(e, h); var p = this._getPanel(e, u); return h[0] += p[0], h[1] += p[1], h[2] += p[2], h[3] += p[3], h }, t.prototype._getAxis = function (t, e) { var n = t.get("axisController").axes; n.length > 0 && o.each(n, (function (t) { var n = t.get("group").getBBox(); e.push(n) })) }, t.prototype._getLegend = function (t, e, n) { var i = this, a = t.get("viewRange"), s = t.get("legendController").legends; s.length > 0 && o.each(s, (function (o) { var s = o; i._adjustLegend(s, t, n); var u = s.getBBox(), l = u.width, c = u.height, h = 0, p = 0, f = s.get("position").split("-"); "right" === f[0] && (h = a.maxX, p = u.minY), "left" === f[0] && (h = n.minX - l, p = u.minY), "top" === f[0] && (h = u.minX, p = -c), "bottom" === f[0] && (h = u.minX, p = a.maxY + c); var d = new r.BBox(h, p, l, c); e.push(d); var g = i._getLegendInnerPadding(s); i._mergeBleeding(g) })) }, t.prototype._getPanel = function (t, e) { var n = [], i = t.get("elements"); o.each(i, (function (t) { if (t.get("labelController")) { var e = t.get("labelController").labelsContainer; e && n.push(e) } })); var r = 1 / 0, a = -1 / 0, s = 1 / 0, u = -1 / 0; o.each(n, (function (t) { t.get("children").forEach((function (t) { if ("group" !== t.type || 0 !== t.get("children").length) { var e = t.getBBox(); e.minX < r && (r = e.minX), e.maxX > a && (a = e.maxX), e.minY < s && (s = e.minY), e.maxY > u && (u = e.maxY) } })) })); var l = t.get("panelRange"), c = Math.max(a - parseFloat(l.maxX), 0); c > 0 && (c *= l.width / (l.width + c)); var h = Math.max(parseFloat(l.minX) - r, 0); h > 0 && (h *= l.width / (l.width + h)); var p = Math.max(parseFloat(l.minY) - s, 0); p > 0 && (p *= l.height / (l.height + p)); var f = Math.max(u - parseFloat(l.maxY), 0); f > 0 && (f *= l.height / (l.height + f)); return [p, c, f, h] }, t.prototype._mergeBBox = function (t) { var e = 1 / 0, n = -1 / 0, i = 1 / 0, r = -1 / 0; return o.each(t, (function (t) { var o = t; e = Math.min(o.minX, e), n = Math.max(o.maxX, n), i = Math.min(o.minY, i), r = Math.max(o.maxY, r) })), { minX: e, maxX: n, minY: i, maxY: r } }, t.prototype._adjustLegend = function (t, e, n) { var i = t.get("position").split("-"), r = t.get("container"), o = r.getBBox(), a = e.get("viewRange"), s = a.width, u = (a.height, a.maxX, a.minX, a.maxY), l = a.minY; "right" === i[0] && r.move(s, l), "left" === i[0] && r.move(n.minX - o.width, l), "top" === i[0] && r.move(0, n.minY - o.height), "bottom" === i[0] && r.move(0, Math.max(u, n.maxY)) }, t.prototype._getLegendInnerPadding = function (t) { var e = this.plot.theme.legend.innerPadding, n = t.get("position").split("-"); return "top" === n[0] ? [e[0], 0, 0, 0] : "bottom" === n[0] ? [0, 0, e[2], 0] : "left" === n[0] ? [0, 0, 0, e[3]] : "right" === n[0] ? [0, e[1], 0, 0] : void 0 }, t.prototype._mergeBleeding = function (t) { var e = this.bleeding; if (t.length === e.length) for (var n = 0; n < t.length; n++)e[n] += t[n] }, t.prototype.adjustAxisPadding = function (t, e) { var n = t.get("axisController").axes[0]; if (n && n.get("autoRotateLabel") && n.getOffsetByRotateAngle) { var i = n.get("labelRenderer").getLabels(), r = n.getOffsetByRotateAngle(n.get("autoRotateAngle")), o = Math.abs(n.get("end").x - n.get("start").x), a = o; i.length > 1 && (a = Math.abs(i[1].attr("x") - i[0].attr("x"))); var s = a * (o - e[1] - e[3]) / o, u = n.getOffsetByRotateAngle(n.getAutoRotateAngleByAvgWidth(s)); u > r && (e[2] += u - r) } }, t }(); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(74); e.DEFAULT_DARK_THEME = { backgroundStyle: { fill: "#262626" }, defaultColor: "#5B8FF9", width: 400, height: 400, bleeding: [i.TOP_BLEEDING, 24, i.BOTTOM_BLEEDING, 24], padding: "auto", title: { padding: [24, 24, 24, 24], fontFamily: "PingFang SC", fontSize: 18, fontWeight: "bold", fill: "rgba(255,255,255,0.65)", stroke: "rgba(0,0,0,0.95)", textAlign: "left", textBaseline: "top", lineHeight: 20, alignWithAxis: !1 }, description: { padding: [10, 24, i.DESCRIPTION_BOTTOM_MARGIN, 24], fontFamily: "PingFang SC", fontSize: 12, fill: "rgba(255, 255, 255, 0.65)", stroke: "rgba(0,0,0,0.95)", textAlign: "left", textBaseline: "top", lineHeight: 16, alignWithAxis: !1 }, axis: { y: { visible: !0, position: "left", autoHideLabel: !1, autoRotateLabel: !1, autoRotateTitle: !0, grid: { visible: !0, style: { stroke: "rgba(255, 255, 255, 0.15)", lineWidth: 1, lineDash: [0, 0] } }, line: { visible: !1, style: { stroke: "rgba(255, 255, 255, 0.45)", lineWidth: 1 } }, tickLine: { visible: !1, style: { stroke: "rgba(255, 255, 255, 0.45)", lineWidth: .5, length: 4 } }, label: { visible: !0, offset: 8, textStyle: { fill: "rgba(255, 255, 255, 0.45)", fontSize: 12 } }, title: { visible: !1, offset: 12, style: { fill: "rgba(255, 255, 255, 0.65)", fontSize: 12, textBaseline: "bottom" } } }, x: { visible: !0, position: "bottom", autoHideLabel: !1, autoRotateLabel: !1, autoRotateTitle: !1, grid: { visible: !1, style: { stroke: "rgba(255, 255, 255, 0.15)", lineWidth: 1, lineDash: [0, 0] } }, line: { visible: !1, style: { stroke: "rgba(255, 255, 255, 0.45)" } }, tickLine: { visible: !0, style: { length: 4, stroke: "rgba(255, 255, 255, 0.45)", lineWidth: .5 } }, label: { visible: !0, textStyle: { fill: "rgba(255, 255, 255, 0.65)", fontSize: 12 }, offset: 16 }, title: { visible: !1, offset: 12, style: { fill: "rgba(255, 255, 255, 0.65)", fontSize: 12 } } }, circle: { autoHideLabel: !1, autoRotateLabel: !0, autoRotateTitle: !0, grid: { style: { lineDash: null, lineWidth: 1, stroke: "#E3E8EC" } }, line: { style: { lineWidth: 1, stroke: "#BFBFBF" } }, tickLine: { style: { lineWidth: 1, stroke: "#bdc8d3", length: 4, alignWithLabel: !0 } }, label: { offset: 16, textStyle: { fill: "#a0a4aa", fontSize: 12 } }, title: { offset: 12, style: { fill: "#767b84", fontSize: 12 } } }, radius: { label: { offset: 12, textStyle: { fill: "#a0a4aa", fontSize: 12 } } } }, legend: { flipPage: !1, position: "bottom-center", innerPadding: [16, 16, 16, 16] }, label: { offset: 12, textStyle: { fill: "rgba(255, 255, 255, 0.65)" }, style: { fill: "rgba(255, 255, 255, 0.65)", lineWidth: 1 } }, tooltip: { "g2-tooltip": { backgroundColor: "rgba(33,33,33, 0.95)", boxShadow: "0px 0px 8px rgba(0,0,0,0.65)", color: "rgba(255, 255, 255, 0.65)" } } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = {}; e.registerTheme = function (t, e) { i[t.toLowerCase()] = e }, e.getTheme = function (t) { return i[t.toLowerCase()] || {} } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)); e.convertToG2Theme = function (t) { var e = i.clone(t); return e.legend || (e.legend = {}), e } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(144)); e.extractAxis = function (t, e) { return e ? (i.AxisStyleParser(t, e), t) : t }, e.processAxisVisible = function (t) { t.line && !1 === t.line.visible && (t.line = null), t.grid && !1 === t.grid.visible && (t.grid = null), t.tickLine && !1 === t.tickLine.visible && (t.tickLine = null), t.title && !1 === t.title.visible && (t.title = null), t.label && !1 === t.label.visible && (t.label = null) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)); e.AxisStyleParser = function (t, e) { if (e.line && (!1 === e.line.visible ? t.line = null : e.line.style && (t.line = i.clone(e.line.style))), e.title && (!1 === e.title.visible ? t.showTitle = !1 : (!0 === e.title.visible && (t.showTitle = !0), t.autoRotate && (t.autoRotateTitle = t.autoRotate), t.title = i.clone(e.title), t.title.style && (t.title.textStyle = t.title.style, delete t.title.style))), e.tickLine && (!1 === e.tickLine.visible ? t.tickLine = null : e.tickLine.style && (t.tickLine = i.clone(e.tickLine.style))), Object.prototype.hasOwnProperty.call(e, "autoHideLabel") && (t.autoHideLabel = e.autoHideLabel), Object.prototype.hasOwnProperty.call(e, "autoRotateLabel") && (t.autoRotateLabel = e.autoRotateLabel), e.label) if (!1 === e.label.visible) t.label = null; else { var n = i.clone(e.label); if (n.style && (n.textStyle = n.style, delete n.style), e.label.formatter) { var r = e.label.formatter; t.label = function (t) { return n.text = r(t), n } } else t.label = n } e.grid && (!1 === e.grid.visible ? t.grid = null : (t.grid = i.clone(e.grid), e.grid.style && (t.grid = i.clone(e.grid.style)))) }, e.TooltipStyleParser = function () { }, e.LabelStyleParser = function (t, e) { t.label.textStyle = e }, e.AnnotationStyleParser = function () { } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.DEFAULT_RESPONSIVE_THEME = { axis: { x: { category: { constraints: [{ name: "elementDist" }], rules: { elementDist: [{ name: "textWrapper", option: { lineNumber: 2 } }, { name: "textRotation", option: { degree: 45 } }, { name: "textRotation", option: { degree: 90 } }, { name: "textAbbreviate", option: { abbreviateBy: "end" } }, { name: "textHide" }] } }, linear: { constraints: [{ name: "elementDist" }], rules: { elementDist: [{ name: "nodesResampling", option: { keep: ["end"] } }, { name: "textRotation", option: { degree: 45 } }, { name: "textRotation", option: { degree: 90 } }, { name: "robustAbbrevaite", option: { unit: "thousand", decimal: 1, abbreviateBy: "end" } }, { name: "textHide" }] } }, dateTime: { constraints: [{ name: "elementDist" }], rules: { elementDist: [{ name: "datetimeStringAbbrevaite" }, { name: "nodesResamplingByAbbrevate", option: { keep: ["end"] } }, { name: "textRotation", option: { degree: 45 } }, { name: "textRotation", option: { degree: 90 } }, { name: "nodesResampling" }, { name: "nodesResampling" }, { name: "textHide" }] } } }, y: { linear: { constraints: [{ name: "elementDistVertical" }, { name: "elementWidth" }], rules: { elementDistVertical: [{ name: "nodesResampling" }, { name: "textHide" }], elementWidth: [{ name: "digitsAbbreviate" }, { name: "textHide" }] } }, category: { constraints: [{ name: "elementDistVertical" }, { name: "elementWidth" }], rules: { elementDistVertical: [{ name: "nodesResampling" }, { name: "textHide" }], elementWidth: [{ name: "textAbbreviate", option: { abbreviateBy: "end" } }, { name: "textHide" }] } } } } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(3), o = n(2), a = i.__importStar(n(0)), s = i.__importDefault(n(147)), u = n(23), l = i.__importDefault(n(73)), c = function () { function t(t) { var e = this; this.onResize = a.debounce((function () { if (!e.plot.destroyed) { var t = e.getCanvasSize(), n = t.width, i = t.height; e.width !== n && (e.width = n, e.height = i, e.plot.updateConfig({ width: n, height: i }), e.plot.render()) } }), 300); var n = t.containerDOM, i = t.plot; this.containerDOM = n, this.plot = i, this.init() } return t.prototype.getCanvasSize = function () { var t = u.getGlobalTheme(), e = this.plot.width ? this.plot.width : t.width, n = this.plot.height ? this.plot.height : t.height; return this.plot.forceFit && (e = this.containerDOM.offsetWidth ? this.containerDOM.offsetWidth : e, n = this.containerDOM.offsetHeight ? this.containerDOM.offsetHeight : n), { width: e, height: n } }, t.prototype.getCanvasDOM = function () { return this.canvas.get("canvasDOM") }, t.prototype.updateCanvasSize = function () { var t = this.getCanvasSize(), e = t.width, n = t.height; this.width = e, this.height = n, this.canvas.changeSize(e, n) }, t.prototype.updateCanvasTheme = function () { var t = this.plot.theme, e = l.default.getGlobalTheme(t), n = a.get(e, "backgroundStyle.fill"); n && this.updateCanvasStyle({ backgroundColor: n }) }, t.prototype.updateCanvasStyle = function (t) { r.modifyCSS(this.getCanvasDOM(), t) }, t.prototype.destroy = function () { this.resizeObserver && (this.resizeObserver.unobserve(this.containerDOM), this.resizeObserver.disconnect(), this.containerDOM = null), this.canvas.destroy() }, t.prototype.bindForceFit = function () { this.plot.forceFit && (this.resizeObserver = new s.default(this.onResize), this.resizeObserver.observe(this.containerDOM)) }, t.prototype.init = function () { this.initGCanvas(), this.bindForceFit() }, t.prototype.initGCanvas = function () { var t = this.plot, e = t.renderer, n = void 0 === e ? "canvas" : e, i = t.pixelRatio, r = this.getCanvasSize(), a = r.width, s = r.height; this.canvas = new o.Canvas({ containerDOM: this.containerDOM, width: a, height: s, renderer: n, pixelRatio: i }), this.width = a, this.height = s, this.updateCanvasTheme() }, t }(); e.default = c }, function (t, e, n) { "use strict"; n.r(e), function (t) { var n = function () { if ("undefined" != typeof Map) return Map; function t(t, e) { var n = -1; return t.some((function (t, i) { return t[0] === e && (n = i, !0) })), n } return (function () { function e() { this.__entries__ = [] } return Object.defineProperty(e.prototype, "size", { get: function () { return this.__entries__.length }, enumerable: !0, configurable: !0 }), e.prototype.get = function (e) { var n = t(this.__entries__, e), i = this.__entries__[n]; return i && i[1] }, e.prototype.set = function (e, n) { var i = t(this.__entries__, e); ~i ? this.__entries__[i][1] = n : this.__entries__.push([e, n]) }, e.prototype.delete = function (e) { var n = this.__entries__, i = t(n, e); ~i && n.splice(i, 1) }, e.prototype.has = function (e) { return !!~t(this.__entries__, e) }, e.prototype.clear = function () { this.__entries__.splice(0) }, e.prototype.forEach = function (t, e) { void 0 === e && (e = null); for (var n = 0, i = this.__entries__; n < i.length; n++) { var r = i[n]; t.call(e, r[1], r[0]) } }, e }()) }(), i = "undefined" != typeof window && "undefined" != typeof document && window.document === document, r = void 0 !== t && t.Math === Math ? t : "undefined" != typeof self && self.Math === Math ? self : "undefined" != typeof window && window.Math === Math ? window : Function("return this")(), o = "function" == typeof requestAnimationFrame ? requestAnimationFrame.bind(r) : function (t) { return setTimeout((function () { return t(Date.now()) }), 1e3 / 60) }; var a = ["top", "right", "bottom", "left", "width", "height", "size", "weight"], s = "undefined" != typeof MutationObserver, u = function () { function t() { this.connected_ = !1, this.mutationEventsAdded_ = !1, this.mutationsObserver_ = null, this.observers_ = [], this.onTransitionEnd_ = this.onTransitionEnd_.bind(this), this.refresh = function (t, e) { var n = !1, i = !1, r = 0; function a() { n && (n = !1, t()), i && u() } function s() { o(a) } function u() { var t = Date.now(); if (n) { if (t - r < 2) return; i = !0 } else n = !0, i = !1, setTimeout(s, e); r = t } return u }(this.refresh.bind(this), 20) } return t.prototype.addObserver = function (t) { ~this.observers_.indexOf(t) || this.observers_.push(t), this.connected_ || this.connect_() }, t.prototype.removeObserver = function (t) { var e = this.observers_, n = e.indexOf(t); ~n && e.splice(n, 1), !e.length && this.connected_ && this.disconnect_() }, t.prototype.refresh = function () { this.updateObservers_() && this.refresh() }, t.prototype.updateObservers_ = function () { var t = this.observers_.filter((function (t) { return t.gatherActive(), t.hasActive() })); return t.forEach((function (t) { return t.broadcastActive() })), t.length > 0 }, t.prototype.connect_ = function () { i && !this.connected_ && (document.addEventListener("transitionend", this.onTransitionEnd_), window.addEventListener("resize", this.refresh), s ? (this.mutationsObserver_ = new MutationObserver(this.refresh), this.mutationsObserver_.observe(document, { attributes: !0, childList: !0, characterData: !0, subtree: !0 })) : (document.addEventListener("DOMSubtreeModified", this.refresh), this.mutationEventsAdded_ = !0), this.connected_ = !0) }, t.prototype.disconnect_ = function () { i && this.connected_ && (document.removeEventListener("transitionend", this.onTransitionEnd_), window.removeEventListener("resize", this.refresh), this.mutationsObserver_ && this.mutationsObserver_.disconnect(), this.mutationEventsAdded_ && document.removeEventListener("DOMSubtreeModified", this.refresh), this.mutationsObserver_ = null, this.mutationEventsAdded_ = !1, this.connected_ = !1) }, t.prototype.onTransitionEnd_ = function (t) { var e = t.propertyName, n = void 0 === e ? "" : e; a.some((function (t) { return !!~n.indexOf(t) })) && this.refresh() }, t.getInstance = function () { return this.instance_ || (this.instance_ = new t), this.instance_ }, t.instance_ = null, t }(), l = function (t, e) { for (var n = 0, i = Object.keys(e); n < i.length; n++) { var r = i[n]; Object.defineProperty(t, r, { value: e[r], enumerable: !1, writable: !1, configurable: !0 }) } return t }, c = function (t) { return t && t.ownerDocument && t.ownerDocument.defaultView || r }, h = y(0, 0, 0, 0); function p(t) { return parseFloat(t) || 0 } function f(t) { for (var e = [], n = 1; n < arguments.length; n++)e[n - 1] = arguments[n]; return e.reduce((function (e, n) { return e + p(t["border-" + n + "-width"]) }), 0) } function d(t) { var e = t.clientWidth, n = t.clientHeight; if (!e && !n) return h; var i = c(t).getComputedStyle(t), r = function (t) { for (var e = {}, n = 0, i = ["top", "right", "bottom", "left"]; n < i.length; n++) { var r = i[n], o = t["padding-" + r]; e[r] = p(o) } return e }(i), o = r.left + r.right, a = r.top + r.bottom, s = p(i.width), u = p(i.height); if ("border-box" === i.boxSizing && (Math.round(s + o) !== e && (s -= f(i, "left", "right") + o), Math.round(u + a) !== n && (u -= f(i, "top", "bottom") + a)), !function (t) { return t === c(t).document.documentElement }(t)) { var l = Math.round(s + o) - e, d = Math.round(u + a) - n; 1 !== Math.abs(l) && (s -= l), 1 !== Math.abs(d) && (u -= d) } return y(r.left, r.top, s, u) } var g = "undefined" != typeof SVGGraphicsElement ? function (t) { return t instanceof c(t).SVGGraphicsElement } : function (t) { return t instanceof c(t).SVGElement && "function" == typeof t.getBBox }; function v(t) { return i ? g(t) ? function (t) { var e = t.getBBox(); return y(0, 0, e.width, e.height) }(t) : d(t) : h } function y(t, e, n, i) { return { x: t, y: e, width: n, height: i } } var m = function () { function t(t) { this.broadcastWidth = 0, this.broadcastHeight = 0, this.contentRect_ = y(0, 0, 0, 0), this.target = t } return t.prototype.isActive = function () { var t = v(this.target); return this.contentRect_ = t, t.width !== this.broadcastWidth || t.height !== this.broadcastHeight }, t.prototype.broadcastRect = function () { var t = this.contentRect_; return this.broadcastWidth = t.width, this.broadcastHeight = t.height, t }, t }(), x = function (t, e) { var n, i, r, o, a, s, u, c = (i = (n = e).x, r = n.y, o = n.width, a = n.height, s = "undefined" != typeof DOMRectReadOnly ? DOMRectReadOnly : Object, u = Object.create(s.prototype), l(u, { x: i, y: r, width: o, height: a, top: r, right: i + o, bottom: a + r, left: i }), u); l(this, { target: t, contentRect: c }) }, _ = function () { function t(t, e, i) { if (this.activeObservations_ = [], this.observations_ = new n, "function" != typeof t) throw new TypeError("The callback provided as parameter 1 is not a function."); this.callback_ = t, this.controller_ = e, this.callbackCtx_ = i } return t.prototype.observe = function (t) { if (!arguments.length) throw new TypeError("1 argument required, but only 0 present."); if ("undefined" != typeof Element && Element instanceof Object) { if (!(t instanceof c(t).Element)) throw new TypeError('parameter 1 is not of type "Element".'); var e = this.observations_; e.has(t) || (e.set(t, new m(t)), this.controller_.addObserver(this), this.controller_.refresh()) } }, t.prototype.unobserve = function (t) { if (!arguments.length) throw new TypeError("1 argument required, but only 0 present."); if ("undefined" != typeof Element && Element instanceof Object) { if (!(t instanceof c(t).Element)) throw new TypeError('parameter 1 is not of type "Element".'); var e = this.observations_; e.has(t) && (e.delete(t), e.size || this.controller_.removeObserver(this)) } }, t.prototype.disconnect = function () { this.clearActive(), this.observations_.clear(), this.controller_.removeObserver(this) }, t.prototype.gatherActive = function () { var t = this; this.clearActive(), this.observations_.forEach((function (e) { e.isActive() && t.activeObservations_.push(e) })) }, t.prototype.broadcastActive = function () { if (this.hasActive()) { var t = this.callbackCtx_, e = this.activeObservations_.map((function (t) { return new x(t.target, t.broadcastRect()) })); this.callback_.call(t, e, t), this.clearActive() } }, t.prototype.clearActive = function () { this.activeObservations_.splice(0) }, t.prototype.hasActive = function () { return this.activeObservations_.length > 0 }, t }(), b = "undefined" != typeof WeakMap ? new WeakMap : new n, w = function t(e) { if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function."); if (!arguments.length) throw new TypeError("1 argument required, but only 0 present."); var n = u.getInstance(), i = new _(e, n, this); b.set(this, i) };["observe", "unobserve", "disconnect"].forEach((function (t) { w.prototype[t] = function () { var e; return (e = b.get(this))[t].apply(e, arguments) } })); var M = void 0 !== r.ResizeObserver ? r.ResizeObserver : w; e.default = M }.call(this, n(75)) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)); var r = function () { function t(t) { this.plot = t.plot, this.canvas = t.canvas, this.pixelRatio = this.canvas.get("pixelRatio"), this.eventHandlers = [] } return t.prototype.bindEvents = function () { this.addEvent(this.canvas, "mousedown", i.wrapBehavior(this, "onEvents")), this.addEvent(this.canvas, "mousemove", i.wrapBehavior(this, "onMove")), this.addEvent(this.canvas, "mouseup", i.wrapBehavior(this, "onEvents")), this.addEvent(this.canvas, "click", i.wrapBehavior(this, "onEvents")), this.addEvent(this.canvas, "dblclick", i.wrapBehavior(this, "onEvents")), this.addEvent(this.canvas, "contextmenu", i.wrapBehavior(this, "onEvents")), this.addEvent(this.canvas, "wheel", i.wrapBehavior(this, "onEvents")) }, t.prototype.clearEvents = function () { var t = this.eventHandlers; i.each(t, (function (t) { t.target.off(t.type, t.handler) })) }, t.prototype.addEvent = function (t, e, n) { t.on(e, n), this.eventHandlers.push({ target: t, type: e, handler: n }) }, t.prototype.onEvents = function (t) { var e = this.getEventObj(t), n = t.target; n.isShape && !this.isShapeInView(n) && n.name && this.plot.emit(n.name + ":" + t.type, t), this.plot.emit("" + t.type, e); var i = this.plot.getLayers(); i.length > 0 && this.onLayerEvent(i, e, t.type) }, t.prototype.onMove = function (t) { var e, n, i = t.target, r = this.getEventObj(t); i.isShape && !this.isShapeInView(i) && i.name && (this.plot.emit(i.name + ":" + t.type, r), !this.lastShape || (e = i, n = this.lastShape, e && n && e === n) || (this.lastShape && this.plot.emit(this.lastShape.name + ":mouseleave", r), this.plot.emit(i.name + ":mouseenter", r)), this.lastShape = i), this.plot.emit("mousemove", r); var o = this.plot.getLayers(); o.length > 0 && this.onLayerEvent(o, r, "mousemove") }, t.prototype.isShapeInView = function (t) { for (var e = ["frontgroundGroup", "backgroundGroup", "panelGroup"], n = t.get("parent"); n;) { var r = n.get("name"); if (r && i.contains(e, r)) return !0; n = n.get("parent") } return !1 }, t.prototype.getEventObj = function (t) { return { x: t.x / this.pixelRatio, y: t.y / this.pixelRatio, target: t.target, event: t.event } }, t.prototype.onLayerEvent = function (t, e, n) { var r = this; i.each(t, (function (t) { var i = t.getGlobalBBox(); if (function (t, e) { return t.x >= e.minX && t.x <= e.maxX && t.y >= e.minY && t.y <= e.maxY }({ x: e.x, y: e.y }, i)) { t.emit("" + n, e); var o = t.layers; o.length > 0 && r.onLayerEvent(o, e, n) } })) }, t }(); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(77)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "line", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(78)), o = i.__importDefault(n(151)); e.default = { main: r.default, mini: o.default } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(5)), o = i.__importStar(n(0)), a = n(15), s = n(47), u = i.__importDefault(n(78)), l = r.Global.theme; function c(t, e, n) { var i = [], r = []; o.each(t.points, (function (t) { i.push(t[1]), r.push(t[0]) })), r = e.parsePoints(r.reverse()), i = a.lineSimplification(e.parsePoints(i)); var u = n ? s.getSplinePath(i, !1, [[0, 0], [1, 1]]) : h(i), l = h(r); return l[0][0] = "L", u.concat(l) } function h(t) { for (var e = [], n = 0; n < t.length; n++) { var i = t[n], r = 0 === n ? "M" : "L"; e.push([r, i.x, i.y]) } return e } function p(t) { return "l(90) 0:" + t + " 1:#ffffff" } r.registerShape("area", "miniArea", { draw: function (t, e) { var n = c(t, this, !1), i = o.deepMix({}, { lineJoin: "round", lineCap: "round" }, t.style); return e.addShape("path", { attrs: { path: n, fill: p(t.color || l.defaultColor), opacity: t.opacity || .4 }, style: i }) } }), r.registerShape("area", "miniAreaSmooth", { draw: function (t, e) { var n = c(t, this, !0); return e.addShape("path", { attrs: { path: n, fill: p(t.color || l.defaultColor), opacity: t.opacity || .5 } }) } }); var f = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.init = function () { t.prototype.init.call(this), this.parseShape() }, e.prototype.parseShape = function () { this.plot.options.smooth ? this.config.shape = { values: ["miniAreaSmooth"] } : this.config.shape = { values: ["miniArea"] } }, e }(u.default); e.default = f }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importDefault(n(153)); e.default = { main: i.default } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(32)), a = ["colorField", "stackField", "groupField"], s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.init = function () { this.type = "interval", t.prototype.init.call(this); var e = this.plot.options; this._needParserColor() && this.parseColor(), this.config.color || (this.config.color = { values: ["#5b8ff9"] }); var n = this._getSizeProps(e); n && this.parseSize(n); var i = this._getStyleProps(e); i && this.parseStyle(i) }, e.prototype.parseColor = function () { var t = this.plot.options, e = this._getColorMappingField(t), n = {}; e && (n.fields = e), t.color && (r.isString(t.color) ? n.values = [t.color] : r.isFunction(t.color) ? n.callback = t.color : r.isArray(t.color) ? n.values = t.color : r.isObject(t.color) && (n.fields = e, n.callback = function (e) { return t.color[e] })), this.config.color = n }, e.prototype.parseSize = function (t) { var e = this.plot.options, n = {}; r.isFunction(e[t]) ? (n.fields = [this.config.position.fields], n.callback = e[t]) : n.values = [e[t]], this.config.size = n }, e.prototype.parseStyle = function (t) { var e = this.plot.options[t], n = {}; r.isFunction(e) ? (n.fields = [this.config.position.fields], n.callback = e) : n.cfg = e, this.config.style = n }, e.prototype._getSizeProps = function (t) { for (var e = 0, n = ["columnSize", "barSize"]; e < n.length; e++) { var i = n[e]; if (r.get(t, i)) return i } }, e.prototype._getStyleProps = function (t) { for (var e = 0, n = ["columnStyle", "barStyle", "pieStyle", "ringStyle"]; e < n.length; e++) { var i = n[e]; if (r.get(t, i)) return i } }, e.prototype._getColorMappingField = function (t) { for (var e = 0, n = a; e < n.length; e++) { var i = n[e]; if (r.get(t, i)) return [t[i]] } }, e.prototype._needParserColor = function () { var t = this.plot.options; if (t.color) return !0; for (var e = 0, n = a; e < n.length; e++) { if (t[n[e]]) return !0 } return !1 }, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(155)), o = i.__importDefault(n(48)), a = i.__importDefault(n(79)); e.default = { main: o.default, guide: r.default, mini: a.default } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.init = function () { var t = this.plot.options; t.xField && t.yField && (this.config = { type: "line", position: { fields: [t.xField, t.yField] } }, (this._getColorMappingField() || this._needParseAttribute("color")) && this.parseColor(), this._needParseAttribute("size") && this.parseSize(), t.line.style && this.parseStyle(), t.smooth && (this.config.shape = { values: ["smooth"] })) }, e.prototype.parseSize = function () { var t = this.plot.options, e = {}; t.line.size ? e.values = [t.line.size] : e.values = [2], this.config.size = e }, e.prototype.parseColor = function () { var t = this.plot.options, e = {}, n = this._getColorMappingField(); n && (e.fields = n), t.line.color ? e.values = [t.line.color] : (n || (n = this.config.position.fields), r.isString(t.color) ? e.values = [t.color] : r.isFunction(t.color) ? (e.fields = n, e.callback = t.color) : r.isArray(t.color) && (e.fields = n, e.values = t.color)), this.config.color = e }, e.prototype.parseStyle = function () { var t = this.plot.options.line.style, e = {}; r.isFunction(t) ? (e.fields = this.config.position.fields, e.callback = t) : e.cfg = t, this.config.style = e }, e.prototype._needParseAttribute = function (t) { var e = this.plot.options; return !e.line || e.line[t] }, e.prototype._getColorMappingField = function () { for (var t = this.plot.options, e = 0, n = ["stackField", "seriesField"]; e < n.length; e++) { var i = n[e]; if (r.get(t, i)) return [t[i]] } }, e }(i.__importDefault(n(48)).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(157)), o = i.__importDefault(n(158)); e.default = { guide: o.default, circle: r.default } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.init = function () { var t = this.plot.options; this.style = t.pointStyle, t.xField && t.yField && (this.config = { type: "point", position: { fields: [t.xField, t.yField] } }, this.parseColor(), this.parseSize(), t.shape && this.parseShape(t.shape), t.pointStyle && this.parseStyle()) }, e.prototype.parseColor = function () { var t = this.plot.options, e = {}, n = t.colorField; n && (e.fields = r.isArray(n) ? n : [n]), t.color && this._parseColor(t, e), this.config.color = e }, e.prototype.parseSize = function () { var t = this.plot.options, e = {}; t.sizeField && (e.fields = [t.sizeField]), t.pointSize && (e.values = t.pointSize), this.config.size = e }, e.prototype.parseShape = function (t) { var e = { values: [t] }; this.config.shape = e }, e.prototype.parseStyle = function () { var t = this.plot.options, e = t.pointStyle, n = { fields: null, callback: null, cfg: null }, i = t.xField, o = t.yField, a = t.colorField; r.isFunction(e) ? (n.fields = a ? r.isArray(a) ? [i, o, a].concat(a) : [i, o, a] : [i, o], n.callback = e) : n.cfg = e, this.config.style = n }, e.prototype._parseColor = function (t, e) { r.isString(t.color) ? e.values = [t.color] : r.isFunction(t.color) ? e.callback = t.color : r.isArray(t.color) && (e.values = t.color) }, e }(i.__importDefault(n(32)).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(32)); var a = ["seriesField", "stackField"], s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.init = function () { var t = this.plot.options; this.style = t.point.style, t.xField && t.yField && (this.config = { type: "point", position: { fields: [t.xField, t.yField] } }, this.parseColor(), this._needParseAttribute("size") && this.parseSize(), t.point.shape && this.parseShape(t.point.shape), t.point.style && this.parseStyle()) }, e.prototype.parseColor = function () { var t = this.plot.options, e = {}, n = this._getColorMappingField(t); n ? this._parseColorByField(t, e, n) : t.point && t.point.color ? e.values = [t.point.color] : t.color && this._parseColor(t, e), this.config.color = e }, e.prototype.parseSize = function () { var t = this.plot.options, e = {}; e.values = [t.point.size], this.config.size = e }, e.prototype.parseShape = function (t) { var e = { values: [t] }; this.config.shape = e }, e.prototype.parseStyle = function () { var t = this.plot.options, e = t.point && t.point.style, n = { fields: null, callback: null, cfg: null }, i = this._getColorMappingField(t); r.isFunction(e) && i ? (n.fields = [i], n.callback = e) : n.cfg = e, this.config.style = n }, e.prototype._parseColorByField = function (t, e, n) { if (e.fields = [n], t.point.color) { for (var i = function (t, e) { var n = []; return r.each(e, (function (e) { var i = e[t]; n.push(i) })), r.uniq(n) }(n, t.data).length, o = [], a = 0; a < i; a++)o.push(t.point.color); e.values = o } else t.color && this._parseColor(t, e) }, e.prototype._parseColor = function (t, e) { r.isString(t.color) ? e.values = [t.color] : r.isFunction(t.color) ? e.callback = t.color : r.isArray(t.color) && (e.values = t.color) }, e.prototype._needParseAttribute = function (t) { var e = this.plot.options; return e.point && r.has(e.point, t) }, e.prototype._getColorMappingField = function (t) { for (var e = 0, n = a; e < n.length; e++) { var i = n[e]; if (r.get(t, i)) return [t[i]] } }, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(2)), o = n(5), a = i.__importStar(n(0)); function s(t, e) { var n = t.get("index"), i = t.get("coord"), o = t.get("scales")[e.yField], s = a.clone(t.get("origin")), l = function (t) { var e = t.start, n = t.end, i = (t.width, t.height), o = new r.Shapes.Rect({ attrs: { x: e.x, y: n.y, width: 0, height: i } }); return o.set("isClip", !0), o }(i); t.attr("clip", l), t.setSilent("animating", !0); var c = function (t, e) { var n, i = t.get("elements"); return a.each(i, (function (t) { if ("line" === t.get("type") && t.get("labelController")) { var i = t.get("labelController").labelsContainer; if (i) { var r = i.get("labelsRenderer").getLabels(); a.each(r, (function (t) { t.attr("text") === e && (n = t) })) } } })), n }(e.plot.view, s[0]._origin[e.seriesField]); c && !c.get("destroyed") && c.set("visible", !1); var h, p = t.get("parent"); e.seriesField && (h = p.addShape("text", { attrs: { x: i.start.x + 12, y: 0, text: s[0]._origin[e.seriesField], fill: t.attr("stroke"), fontSize: 12, textAlign: "start", textBaseline: "middle" } })); var f = h ? 16 : 0, d = p.addShape("text", { attrs: { x: i.start.x + 12, y: f, text: "test" + n, fill: t.attr("stroke"), fontSize: 12, textAlign: "start", textBaseline: "middle" } }); e.callback = function () { t && !t.get("destroyed") && (t.attr("clip", null), t.setSilent("cacheShape", null), t.setSilent("animating", !1), l.remove(), d.animate({ opacity: 0 }, 300, (function () { d.remove(), c && !c.get("destroyed") && (c.set("visible", !0), e.plot.canvas.draw()) })), h && d.animate({ opacity: 0 }, 300, (function () { d.remove() }))) }; var g = e.delay; a.isFunction(g) && (g = e.delay(n)); var v = e.easing; a.isFunction(v) && (v = e.easing(n)); l.animate({ width: i.getWidth() }, e.duration, v, e.callback, g), d.animate({ onFrame: function (t) { var e = u(t, s, i, 0); if (e) { d.attr("x", e[0] + 12), d.attr("y", e[1] + f); var n = function (t, e, n) { var i = (e - n.start.y) / (n.end.y - n.start.y); return t.invert(i).toFixed(2) }(o, e[1], i); o.formatter && (n = o.formatter(n)), d.attr("text", n) } } }, e.duration, v, e.callback, g), h && h.animate({ onFrame: function (t) { var e = u(t, s, i, 0); e && (h.attr("x", e[0] + 12), h.attr("y", e[1])) } }, e.duration, v, e.callback, g) } function u(t, e, n, i) { for (var r = n.start.x + n.getWidth() * t, o = 0; o < e.length - 1; o++) { var a = e[o], s = e[o + 1]; if (r >= a.x && r <= s.x) { var u = (s.y - a.y) / (s.x - a.x); return [r, a.y + u * (r - a.x)] } } } s.animationName = "clipingWithData", o.Animate.registerAnimation("appear", "clipingWithData", s) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(161)), o = i.__importDefault(n(178)), a = [{ name: "responsiveAxis", method: r.default }, { name: "responsivePointLabel", method: o.default }]; e.default = { preRender: [], afterRender: a } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importDefault(n(37)); e.default = function (t) { var e = t.getResponsiveTheme(), n = t.canvas; new i.default({ plot: t, responsiveTheme: e, dim: "x" }), new i.default({ plot: t, responsiveTheme: e, dim: "y" }), n.draw() } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.default = { type: "padding", usage: "assign", expression: function (t, e, n) { return void 0 === n && (n = { ratio: .6 }), e.width * n.ratio } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(15)); e.default = { type: "group", usage: "compare", expression: function (t, e) { var n = [t.topLeft, t.topRight, t.bottomRight, t.bottomLeft], r = [e.topLeft, e.topRight, e.bottomRight, e.bottomLeft], o = i.minDistBetweenConvexPolygon(n, r); return Math.round(o) >= 2 } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(15)); e.default = { type: "chain", usage: "compare", expression: function (t, e, n) { void 0 === n && (n = { value: 4 }); var r = [t.topLeft, t.topRight, t.bottomRight, t.bottomLeft], o = [e.topLeft, e.topRight, e.bottomRight, e.bottomLeft], a = i.minDistBetweenConvexPolygon(r, o); return Math.round(a) >= n.value } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.default = { type: "chain", usage: "compare", expression: function (t, e, n) { void 0 === n && (n = { value: 5 }); var i = Math.abs(t.bottom - e.top); return Math.round(i) >= n.value } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.default = { type: "padding", usage: "compare", expression: function (t, e, n) { return void 0 === n && (n = { ratio: .15 }), t.width < e.width * n.ratio } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.default = { type: "padding", usage: "assign", expression: function (t, e) { var n = e.coord.radius / 2; return Math.min(n, t.value) } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.default = { type: "padding", usage: "assign", expression: function (t, e, n) { return void 0 === n && (n = { ratio: .8 }), e.radius * n.ratio } } }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "assign", (function () { return u })), n.d(e, "format", (function () { return C })), n.d(e, "parse", (function () { return O })), n.d(e, "defaultI18n", (function () { return p })), n.d(e, "setGlobalDateI18n", (function () { return d })), n.d(e, "setGlobalDateMasks", (function () { return S })); var i = /d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g, r = "[^\\s]+", o = /\[([^]*?)\]/gm; function a(t, e) { for (var n = [], i = 0, r = t.length; i < r; i++)n.push(t[i].substr(0, e)); return n } var s = function (t) { return function (e, n) { var i = n[t].map((function (t) { return t.toLowerCase() })).indexOf(e.toLowerCase()); return i > -1 ? i : null } }; function u(t) { for (var e = [], n = 1; n < arguments.length; n++)e[n - 1] = arguments[n]; for (var i = 0, r = e; i < r.length; i++) { var o = r[i]; for (var a in o) t[a] = o[a] } return t } var l = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], c = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], h = a(c, 3), p = { dayNamesShort: a(l, 3), dayNames: l, monthNamesShort: h, monthNames: c, amPm: ["am", "pm"], DoFn: function (t) { return t + ["th", "st", "nd", "rd"][t % 10 > 3 ? 0 : (t - t % 10 != 10 ? 1 : 0) * t % 10] } }, f = u({}, p), d = function (t) { return f = u(f, t) }, g = function (t) { return t.replace(/[|\\{()[^$+*?.-]/g, "\\$&") }, v = function (t, e) { for (void 0 === e && (e = 2), t = String(t); t.length < e;)t = "0" + t; return t }, y = { D: function (t) { return String(t.getDate()) }, DD: function (t) { return v(t.getDate()) }, Do: function (t, e) { return e.DoFn(t.getDate()) }, d: function (t) { return String(t.getDay()) }, dd: function (t) { return v(t.getDay()) }, ddd: function (t, e) { return e.dayNamesShort[t.getDay()] }, dddd: function (t, e) { return e.dayNames[t.getDay()] }, M: function (t) { return String(t.getMonth() + 1) }, MM: function (t) { return v(t.getMonth() + 1) }, MMM: function (t, e) { return e.monthNamesShort[t.getMonth()] }, MMMM: function (t, e) { return e.monthNames[t.getMonth()] }, YY: function (t) { return v(String(t.getFullYear()), 4).substr(2) }, YYYY: function (t) { return v(t.getFullYear(), 4) }, h: function (t) { return String(t.getHours() % 12 || 12) }, hh: function (t) { return v(t.getHours() % 12 || 12) }, H: function (t) { return String(t.getHours()) }, HH: function (t) { return v(t.getHours()) }, m: function (t) { return String(t.getMinutes()) }, mm: function (t) { return v(t.getMinutes()) }, s: function (t) { return String(t.getSeconds()) }, ss: function (t) { return v(t.getSeconds()) }, S: function (t) { return String(Math.round(t.getMilliseconds() / 100)) }, SS: function (t) { return v(Math.round(t.getMilliseconds() / 10), 2) }, SSS: function (t) { return v(t.getMilliseconds(), 3) }, a: function (t, e) { return t.getHours() < 12 ? e.amPm[0] : e.amPm[1] }, A: function (t, e) { return t.getHours() < 12 ? e.amPm[0].toUpperCase() : e.amPm[1].toUpperCase() }, ZZ: function (t) { var e = t.getTimezoneOffset(); return (e > 0 ? "-" : "+") + v(100 * Math.floor(Math.abs(e) / 60) + Math.abs(e) % 60, 4) } }, m = function (t) { return +t - 1 }, x = [null, "[1-9]\\d?"], _ = [null, r], b = ["isPm", r, function (t, e) { var n = t.toLowerCase(); return n === e.amPm[0] ? 0 : n === e.amPm[1] ? 1 : null }], w = { D: ["day", "[1-9]\\d?"], DD: ["day", "\\d\\d"], Do: ["day", "[1-9]\\d?" + r, function (t) { return parseInt(t, 10) }], M: ["month", "[1-9]\\d?", m], MM: ["month", "\\d\\d", m], YY: ["year", "\\d\\d", function (t) { var e = +("" + (new Date).getFullYear()).substr(0, 2); return +("" + (+t > 68 ? e - 1 : e) + t) }], h: ["hour", "[1-9]\\d?", void 0, "isPm"], hh: ["hour", "\\d\\d", void 0, "isPm"], H: ["hour", "[1-9]\\d?"], HH: ["hour", "\\d\\d"], m: ["minute", "[1-9]\\d?"], mm: ["minute", "\\d\\d"], s: ["second", "[1-9]\\d?"], ss: ["second", "\\d\\d"], YYYY: ["year", "\\d{4}"], S: ["millisecond", "\\d", function (t) { return 100 * +t }], SS: ["millisecond", "\\d\\d", function (t) { return 10 * +t }], SSS: ["millisecond", "\\d{3}"], d: x, dd: x, ddd: _, dddd: _, MMM: ["month", r, s("monthNamesShort")], MMMM: ["month", r, s("monthNames")], a: b, A: b, ZZ: ["timezoneOffset", "[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?", function (t) { var e = (t + "").match(/([+-]|\d\d)/gi); if (e) { var n = 60 * +e[1] + parseInt(e[2], 10); return "+" === e[0] ? n : -n } return 0 }] }, M = { default: "ddd MMM DD YYYY HH:mm:ss", shortDate: "M/D/YY", mediumDate: "MMM D, YYYY", longDate: "MMMM D, YYYY", fullDate: "dddd, MMMM D, YYYY", shortTime: "HH:mm", mediumTime: "HH:mm:ss", longTime: "HH:mm:ss.SSS" }, S = function (t) { return u(M, t) }, C = function (t, e, n) { if (void 0 === e && (e = M.default), void 0 === n && (n = {}), "number" == typeof t && (t = new Date(t)), "[object Date]" !== Object.prototype.toString.call(t) || isNaN(t.getTime())) throw new Error("Invalid Date pass to format"); var r = []; e = (e = M[e] || e).replace(o, (function (t, e) { return r.push(e), "@@@" })); var a = u(u({}, f), n); return (e = e.replace(i, (function (e) { return y[e](t, a) }))).replace(/@@@/g, (function () { return r.shift() })) }; function O(t, e, n) { if (void 0 === n && (n = {}), "string" != typeof e) throw new Error("Invalid format in fecha parse"); if (e = M[e] || e, t.length > 1e3) return null; var r = { year: (new Date).getFullYear(), month: 0, day: 1, hour: 0, minute: 0, second: 0, millisecond: 0, isPm: null, timezoneOffset: null }, a = [], s = [], l = e.replace(o, (function (t, e) { return s.push(g(e)), "@@@" })), c = {}, h = {}; l = g(l).replace(i, (function (t) { var e = w[t], n = e[0], i = e[1], r = e[3]; if (c[n]) throw new Error("Invalid format. " + n + " specified twice in format"); return c[n] = !0, r && (h[r] = !0), a.push(e), "(" + i + ")" })), Object.keys(h).forEach((function (t) { if (!c[t]) throw new Error("Invalid format. " + t + " is required in specified format") })), l = l.replace(/@@@/g, (function () { return s.shift() })); var p = t.match(new RegExp(l, "i")); if (!p) return null; for (var d = u(u({}, f), n), v = 1; v < p.length; v++) { var y = a[v - 1], m = y[0], x = y[2], _ = x ? x(p[v], d) : +p[v]; if (null == _) return null; r[m] = _ } 1 === r.isPm && null != r.hour && 12 != +r.hour ? r.hour = +r.hour + 12 : 0 === r.isPm && 12 == +r.hour && (r.hour = 0); for (var b = new Date(r.year, r.month, r.day, r.hour, r.minute, r.second, r.millisecond), S = [["month", "getMonth"], ["day", "getDate"], ["hour", "getHours"], ["minute", "getMinutes"], ["second", "getSeconds"]], C = (v = 0, S.length); v < C; v++)if (c[S[v][0]] && r[S[v][0]] !== b[S[v][1]]()) return null; return null == r.timezoneOffset ? b : new Date(Date.UTC(r.year, r.month, r.day, r.hour, r.minute - r.timezoneOffset, r.second, r.millisecond)) } var k = { format: C, parse: O, defaultI18n: p, setGlobalDateI18n: d, setGlobalDateMasks: S }; e.default = k }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(15); e.default = function (t, e, n, r) { var o = r.nodes.nodes; if (n !== o.length - 1) { var a = function (t, e) { var n, r = { x: e.centerX - t.centerX, y: e.centerY - t.centerY }, o = Math.sqrt(r.x * r.x + r.y * r.y), a = { x: 10, y: 0 }, s = Math.sqrt(a.x * a.x + a.y * a.y), u = i.dotProduct2D(r, a) / (o * s) * 180 / Math.PI; u < 0 && (u = 360 - u); u = function (t) { if (t > 90 && t <= 180) return 180 - t; if (t > 180 && t < 270) return t - 180; return 360 - t }(u); var l = Math.abs(t.centerX - e.centerX), c = Math.abs(t.centerY - e.centerY); u > 45 ? n = "x" : u < 45 && (n = "y"); return { dir: n, distX: l, distY: c } }(o[n], o[n + 1]), s = a.dir, u = (a.distX, a.distY, t.get("startPoint")); "x" === s && t.attr("y", u.y + 20) } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(83); e.default = function (t, e, n, o) { var a = o.nodes.nodes; if (0 !== n) { var s = a[n], u = a[n - 1]; if (r.isNodeOverlap(s, u)) { var l = o.plot.plot.get("elements")[0], c = u.top - s.height / 2; if (c - 10 > o.region.top) { var h = s.shape.get("origin"), p = function (t, e) { var n; return i.each(e, (function (e) { var i = e; i.id === t && (n = i) })), n }(l.getShapeId(h), l.getShapes()).get("box"), f = p.left + p.width / 2, d = p.top, g = l.get("labelController").labelsContainer.addShape("path", { attrs: { path: [["M", f, d], ["L", s.shape.attr("x"), c]], stroke: "#ccc", lineWidth: 1 } }), v = { x: t.attr("x"), y: t.attr("y") }; s.shape.attr("y", c - 10), a[n] = o.nodes.measure(s.shape), a[n].line = g, a[n].origin_position = v } } } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(86), o = i.__importDefault(n(26)); e.default = function (t, e, n, i) { var a = i.nodes.nodes; r.isKeep(e.keep, n, a) || t.attr("text") !== t.get("origin").text && o.default(t) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(26)); e.default = function (t, e, n, i) { var a = i.nodes.nodes, s = function (t) { var e = r.deepMix([], t); return e.sort((function (t, e) { return e.width - t.width })), Math.round(e[0].width) }(a); if (!(n <= 1)) { var u = a[n], l = function (t, e) { for (var n = t - 1; n > 0; n--) { var i = e[n]; if (!i.shape.get("blank")) return i } }(n, a), c = l.centerX - u.centerX, h = l.centerY - u.centerY; Math.sqrt(c * c + h * h) < s && (o.default(t), t.set("blank", !0)) } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(26)); function a(t, e, n) { for (var i = 0, r = t; i < r.length; i++) { var o = r[i]; if (o.shape.get("origin")[e] === n) return o } } e.default = function (t, e, n, i) { var s = i.nodes.nodes, u = s[n]; u.line && u.line.remove(); var l = function (t, e, n) { var i = []; r.each(t, (function (t) { i.push(t[e]) })), i.sort((function (t, e) { return t - e })); var o = i[0], s = a(n, e, o), u = i[i.length - 1], l = a(n, e, u), c = function (t) { var e = r.clone(t); e.sort((function (t, e) { return t - e })); var n = Math.floor(e.length / 2); if (e.length % 2) return e[n]; return e[n] }(i), h = a(n, e, c); return { min: s, max: l, median: h } }(i.plot.initialProps.data, i.plot[i.plot.type].label.fields[0], s), c = !1; if (r.each(l, (function (t) { t.shape.get("origin") === u.shape.get("origin") && (c = !0) })), c) { if (u.origin_position) { var h = u.origin_position, p = h.x, f = h.y; t.attr("x", p), t.attr("y", f) } } else o.default(t) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(84)), o = i.__importDefault(n(85)), a = i.__importDefault(n(87)); e.default = function (t, e, n, i) { var s = i.nodes.nodes, u = t.attr("text"); /^\d+$/.test(u) ? o.default(t, e, n, s) : r.isTime(u) ? r.default(t, e, n, s) : a.default(t, e) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.default = function (t, e) { t.resetMatrix(), t.attr({ rotate: 360 - e.degree, textAlign: "right", textBaseline: "middle" }) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.default = function (t, e) { for (var n = t.attr("text"), i = Math.ceil(n.length / e.lineNumber), r = "", o = 1; o < e.lineNumber; o++) { var a = i * o; r = n.slice(0, a) + "\n" + n.slice(a) } var s = t.attr("fontSize"); t.attr({ text: r, lineHeight: s, textAlign: "center", textBaseline: "top" }) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.getType = function () { var t = this.plot.options; return t.label && t.label.type ? t.label.type : "point" }, e }(i.__importDefault(n(89)).default); e.default = function (t) { var e = t.getResponsiveTheme(); new r({ plot: t, responsiveTheme: e }) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); n(31).registerResponsiveTheme("line", { label: { point: { constraints: [{ name: "elementCollision" }], rules: { elementCollision: [{ name: "nodesResamplingByChange" }, { name: "clearOverlapping" }] } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = i.__importDefault(n(181)), a = i.__importDefault(n(40)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.showLabels = function (e, n) { var i = this, r = []; a.default(n, (function (t) { var e = t.get("origin"), n = o.default(e[e.length - 1]), i = t.getBBox(); n.x = i.maxX + 10, r.push(n) })), t.prototype.showLabels.call(this, r, n); var s = this.get("labelsRenderer"), u = (this.get("labelOptions").fields[0], s.get("group").get("children")), l = this.get("element").get("view"); a.default(u, (function (t) { t.attr("textAlign", "left"), t.attr("textBaseline", "middle"); var e = t.get("origin"), r = i.get("element").getShapeId(e), o = i._adjustColor(r, n); t.attr("fill", o) })), l.get("canvas").draw() }, e.prototype._adjustColor = function (t, e) { var n; return a.default(e, (function (e) { e.id === t && (n = e.attr("stroke")) })), n }, e }(r.ElementLabels); r.registerElementLabels("line", s) }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } Object.defineProperty(e, "__esModule", { value: !0 }); var r = n(27); e.default = function t(e) { if ("object" !== i(e) || null === e) return e; var n; if (r.default(e)) { n = []; for (var o = 0, a = e.length; o < a; o++)"object" === i(e[o]) && null != e[o] ? n[o] = t(e[o]) : n[o] = e[o] } else for (var s in n = {}, e) "object" === i(e[s]) && null != e[s] ? n[s] = t(e[s]) : n[s] = e[s]; return n } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.showLabels = function (e, n) { t.prototype.showLabels.call(this, e, n); var i = this.get("labelsRenderer"), r = (i.get("group").get("children"), this.get("element").get("view")); i.get("items").map((function (t) { return { x: t.start.x - 4, y: t.start.y - 4, width: 8, height: 8 } })); r.get("canvas").draw() }, e }(r.ElementLabels); r.registerElementLabels("point", o) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(10); e.EVENT_MAP = r.EVENT_MAP, e.onEvent = r.onEvent; i.assign(r.EVENT_MAP, { onLineClick: "line:click", onLineDoubleclick: "line:dblclick", onLineMousemove: "line:mousemove", onLineMouseenter: "line:mouseenter", onLineMouseleave: "line:mouseleave", onLineMousedown: "line:mousedown", onLineMouseup: "line:mouseup", onLineContextmenu: "line:contextmenu", onPointClick: "point:click", onPointDblclick: "point:dblclick", onPointMousemove: "point:mousemove", onPointMouseenter: "point:mouseenter", onPointMouseleave: "point:mouseleave", onPointMousedown: "point:mousedown", onPointMouseup: "point:mouseup", onPointContextmenu: "point:contextmenu" }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(185)); e.LineActive = r.default; var o = i.__importDefault(n(186)); e.LineSelect = o.default }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e(e) { return t.call(this, i.__assign({ processEvent: "mousemove" }, e)) || this } return i.__extends(e, t), e.prototype.process = function (t) { if ("line" === t.target.name) { var e = t.data[0]._origin; this.view.setActive((function (t) { return t === e })) } else this.view.setActive((function () { return !1 })) }, e }(n(5).Interaction); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e(e) { return t.call(this, i.__assign({ endEvent: "click" }, e)) || this } return i.__extends(e, t), e.prototype.end = function (t) { if ("line" === t.target.name) { var e = t.data[0]._origin; this.view.setInactive((function (t) { return t !== e })) } else this.view.setInactive((function () { return !1 })) }, e }(n(5).Interaction); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); n(20).registerTheme("line", { lineStyle: { normal: {}, active: function (t) { return { lineWidth: (t.lineWidth || 1) + 1 } }, disable: function (t) { return { opacity: .2 * (t.opacity || 1) } }, selected: function (t) { return { lineWidth: (t.lineWidth || 1) + 2 } } }, pointStyle: { normal: {}, active: {}, disable: {}, selected: {} } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(189)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "density", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(13), o = i.__importStar(n(0)), a = n(7), s = n(15), u = i.__importDefault(n(50)), l = { epanechnikov: function (t) { return Math.abs(t) <= 1 ? .75 * (1 - t * t) : 0 }, gaussian: function (t) { return 1 / Math.sqrt(2 * Math.PI) * Math.exp(-.5 * Math.pow(t, 2)) }, uniform: function (t) { return Math.abs(t) <= 1 ? .5 : 0 }, triangle: function (t) { return Math.abs(t) <= 1 ? 1 - Math.abs(t) : 0 }, quartic: function (t) { var e = 1 - t * t; return Math.abs(t) <= 1 ? .9375 * e * e : 0 }, triweight: function (t) { var e = 1 - t * t; return Math.abs(t) <= 1 ? .9375 * Math.pow(e, 3) : 0 }, cosinus: function (t) { var e = Math.PI / 4 * Math.cos(.5 * Math.PI * t); return Math.abs(t) <= 1 ? e : 0 } }, c = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "density", e } return i.__extends(e, t), e.prototype.init = function () { var e = this.options.xAxis ? o.clone(this.options.xAxis) : {}; this.options.xField = "value", this.options.yField = "density", this.options.xAxis = o.deepMix({}, e, { type: "linear" }), this.options.smooth = !0, t.prototype.init.call(this) }, e.prototype.processData = function (t) { var e = this, n = this.options, i = n.binField, a = n.binWidth, u = n.binNumber, c = n.kernel, h = l[c || "epanechnikov"], p = o.clone(t); o.sortBy(p, i); var f = o.valuesOfKey(p, i), d = o.getRange(f), g = d.max - d.min, v = u, y = a; !u && a && (v = Math.floor(g / a)), !a && u && (y = g / u), u || a || (v = s.sturges(f), y = g / u); var m = new (r.getScale("linear"))({ min: d.min, max: d.max, tickCount: v, nice: !1 }).getTicks(), x = []; return o.each(m, (function (t) { var n = e.kernelDensityEstimator(y, h, t, f); x.push({ value: t.text, density: n }) })), x }, e.prototype.kernelDensityEstimator = function (t, e, n, i) { var r = 0; return o.each(i, (function (i) { var o = (n.tickValue - i) / t; r += e(o) })), 0 === i.length ? 0 : r / i.length }, e }(u.default); e.default = c, a.registerPlotType("density", c) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = [{ name: "responsiveAxis", method: n(1).__importDefault(n(191)).default }]; e.default = { preRender: [], afterRender: i } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importDefault(n(37)); e.default = function (t) { var e = t.getResponsiveTheme(), n = t.canvas; new i.default({ plot: t, responsiveTheme: e, dim: "x" }), new i.default({ plot: t, responsiveTheme: e, dim: "y" }), n.draw() } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(10); e.EVENT_MAP = r.EVENT_MAP, e.onEvent = r.onEvent; i.assign(r.EVENT_MAP, { onAreaClick: "area:click", onAreaDblclick: "area:dblclick", onAreaMousemove: "area:mousemove", onAreaMouseenter: "area:mouseenter", onAreaMouseleave: "area:mouseleave", onAreaMousedown: "area:mousedown", onAreaMouseup: "area:mouseup", onAreaContextmenu: "area:contextmenu", onLineClick: "line:click", onLineDblclick: "line:dblclick", onLineMousemove: "line:mousemove", onLineMouseenter: "line:mouseenter", onLineMouseleave: "line:mouseleave", onLineMousedown: "line:mousedown", onLineMouseup: "line:mouseup", onLineContextmenu: "line:contextmenu", onPointClick: "point:click", onPointDblclick: "point:dblclick", onPointMousemove: "point:mousemove", onPointMouseenter: "point:mouseenter", onPointMouseleave: "point:mouseleave", onPointMousedown: "point:mousedown", onPointMouseup: "point:mouseup", onPointContextmenu: "point:contextmenu" }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); n(20).registerTheme("area", { areaStyle: { normal: {}, active: function (t) { return { opacity: t.opacity || 1 } }, disable: function (t) { return { opacity: .5 * (t.opacity || 1) } }, selected: { lineWidth: 1, stroke: "#333333" } }, lineStyle: { normal: {}, active: function (t) { return { opacity: t.opacity || 1 } }, disable: function (t) { return { opacity: .5 * (t.opacity || 1) } }, selected: function (t) { return { lineWidth: (t.lineWidth || 1) + 2 } } }, pointStyle: { normal: {}, active: function (t) { var e = t.fill || t.fillStyle, n = t.size || t.radius; return { radius: n + 1, shadowBlur: n, shadowColor: e, stroke: e, strokeOpacity: 1, lineWidth: 1 } }, disable: function (t) { return { opacity: .5 * (t.opacity || t.fillOpacity || 1) } }, selected: function (t) { var e = t.fill || t.fillStyle, n = t.size || t.radius; return { radius: n + 2, shadowBlur: n, shadowColor: e, stroke: e, strokeOpacity: 1, lineWidth: 2 } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(33)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "column", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(196)), o = i.__importDefault(n(197)), a = [{ name: "responsiveAxis", method: r.default }, { name: "responsiveLabel", method: o.default }]; e.default = { preRender: [], afterRender: a } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importDefault(n(37)); e.default = function (t) { var e = t.getResponsiveTheme(), n = t.canvas; new i.default({ plot: t, responsiveTheme: e, dim: "x" }), new i.default({ plot: t, responsiveTheme: e, dim: "y" }), n.draw() } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.getType = function () { return !this.plot.column.label || this.plot.column.label.position && "top" !== this.plot.column.label.position ? "inner" : "top" }, e }(i.__importDefault(n(89)).default); e.default = function (t) { var e = t.getResponsiveTheme(); new r({ plot: t, responsiveTheme: e }) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); n(31).registerResponsiveTheme("column", { label: { top: { constraints: [{ name: "elementCollision" }], rules: { elementCollision: [{ name: "nodeJitterUpward" }, { name: "nodesResamplingByState", option: { keep: ["min", "max", "median"] } }, { name: "textHide" }] } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); n(20).registerTheme("column", { columnStyle: { normal: {}, active: function (t) { return { opacity: .5 * (t.opacity || 1) } }, disable: function (t) { var e = t.opacity || 1; return { opacity: .5 * e, fillOpacity: .5 * e } }, selected: { lineWidth: 1, stroke: "black" } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(201)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "bubble", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7); n(52); var a = i.__importStar(n(90)), s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "bubble", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { pointSize: [8, 58], pointStyle: { strokeOpacity: 1, fillOpacity: 1, opacity: .5 }, label: { position: "middle" } }) }, e.prototype.legend = function () { var e; t.prototype.legend.call(this), this.setConfig("legends", { fields: (e = {}, e[this.options.sizeField] = !1, e) }) }, e.prototype.parseEvents = function () { t.prototype.parseEvents.call(this, a) }, e }(i.__importDefault(n(91)).default); e.default = s, o.registerPlotType("bubble", s) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(2), a = function () { function t(t) { this.xBaseline = 0, this.yBaseline = 0, this.quadrantGroups = [], this.regionData = [], this.lineData = [], this.options = t, this.view = this.options.view, this.init() } return t.prototype.init = function () { var t, e = this, n = this.options, i = n.xBaseline, a = n.yBaseline, s = this.view.get("coord"), u = this.view.get("scales"), l = u[this.options.plotOptions.xField], c = u[this.options.plotOptions.yField]; if (i > l.min && i < l.max) { var h = (i - l.min) / (l.max - l.min); t = [new o.BBox(s.start.x, s.end.y, s.width * h, s.height), new o.BBox(s.start.x + s.width * h, s.end.y, s.width * (1 - h), s.height)]; var p = { start: { x: s.start.x + s.width * h, y: s.end.y }, end: { x: s.start.x + s.width * h, y: s.start.y } }; this.lineData.push(p) } else t = new o.BBox(s.start.x, s.start.y, s.width, s.height); if (a > c.min && a < c.max) { var f = (a - c.min) / (c.max - c.min), d = { start: { x: s.start.x, y: s.end.y + s.height * f }, end: { x: s.end.x, y: s.end.y + s.height * f } }; this.lineData.push(d), r.each(t, (function (n, i) { var r = ["left", "right"], a = { name: t.length > 1 ? "top-" + r[i] : "top", bbox: new o.BBox(n.minX, n.minY, n.width, n.height * f) }; e.regionData.push(a); var s = { name: t.length > 1 ? "bottom-" + r[i] : "bottom", bbox: new o.BBox(n.minX, n.minY + n.height * f, n.width, n.height * (1 - f)) }; e.regionData.push(s) })) } else if (2 === t.length) { var g = { name: "left", bbox: t[0] }; this.regionData.push(g); var v = { name: "right", bbox: t[1] }; this.regionData.push(v) } this.container = this.view.get("backgroundGroup").addGroup() }, t.prototype.render = function () { var t = this; if (this.regionData.length > 0) { var e = this.getDefaultStyle(), n = this.getRegionStyle(this.regionData); r.each(this.regionData, (function (o, a) { var s = t.container.addGroup(), u = s.addShape("rect", { attrs: i.__assign({ x: o.bbox.minX, y: o.bbox.minY, width: o.bbox.width, height: o.bbox.height }, n[a]), name: "quadrant" }); if (t.options.label && t.options.label.text) { var l = r.deepMix({}, e.label, t.options.label), c = t.getLabelConfig(o, l, a); s.addShape("text", { attrs: i.__assign({}, c) }) } u.setSilent("data", o), t.quadrantGroups.push(s) })); var o = r.deepMix({}, e.line, this.options.lineStyle); r.each(this.lineData, (function (e) { t.container.addShape("path", { attrs: i.__assign({ path: [["M", e.start.x, e.start.y], ["L", e.end.x, e.end.y]] }, o) }) })), this.view.get("canvas").draw() } }, t.prototype.clear = function () { this.container && this.container.clear() }, t.prototype.destroy = function () { this.container && this.container.remove() }, t.prototype.getDefaultStyle = function () { return { line: { stroke: "#9ba29a", lineWidth: 1 }, region_2: [{ fill: "#000000", opacity: .05 }, { fill: "#ffffff", opacity: 0 }], region_4: [{ fill: "#000000", opacity: .05 }, { fill: "#ffffff", opacity: 0 }, { fill: "#ffffff", opacity: 0 }, { fill: "#000000", opacity: .05 }], label: { position: "outter-inner", offset: 10, style: { fontSize: 14, fill: "#ccc" } } } }, t.prototype.getRegionStyle = function (t) { var e, n = t.length, i = this.getDefaultStyle(); if (e = 2 === n ? i.region_2 : i.region_4, this.options.regionStyle) { var o = this.options.regionStyle; r.isArray(o) ? e = e.map((function (t, e) { return o.length >= e ? o[e] : t })) : r.isFunction(o) && r.each(t, (function (t, n) { e[n] = o(t) })) } return e }, t.prototype.getLabelConfig = function (t, e, n) { var o = 0, a = 0, s = {}, u = e.text; r.isFunction(u) ? u = u(t) : r.isArray(u) && (u = u[n]); var l = e.position.split("-"), c = t.name.split("-"); return "left" === c[1] ? ("inner" === l[0] && (o = t.bbox.maxX - e.offset, s.textAlign = "right"), "outter" === l[0] && (o = t.bbox.minX + e.offset, s.textAlign = "left")) : "right" === c[1] && ("inner" === l[0] && (o = t.bbox.minX + e.offset, s.textAlign = "left"), "outter" === l[0] && (o = t.bbox.maxX - e.offset, s.textAlign = "right")), "top" === c[0] ? ("inner" === l[1] && (a = t.bbox.maxY - e.offset, s.textBaseline = "bottom"), "outter" === l[1] && (a = t.bbox.minY + e.offset, s.textBaseline = "top")) : "bottom" === c[0] && ("inner" === l[1] && (a = t.bbox.minY + e.offset, s.textBaseline = "top"), "outter" === l[1] && (a = t.bbox.maxY - e.offset, s.textBaseline = "bottom")), (s = r.deepMix({}, e.style, s)).lineHeight = s.fontSize, i.__assign({ x: o, y: a, text: u }, s) }, t }(); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(13), a = n(340), s = n(47), u = { exp: a.regressionExp, linear: a.regressionLinear, loess: a.regressionLoess, log: a.regressionLog, poly: a.regressionPoly, pow: a.regressionPow, quad: a.regressionQuad }; var l = function () { function t(t) { this.options = r.deepMix({}, { type: "linear", style: { stroke: "#9ba29a", lineWidth: 2, opacity: .5, lineJoin: "round", lineCap: "round" }, showConfidence: !1, confidenceStyle: { fill: "#ccc", opacity: .1 } }, t), this.view = this.options.view, this.init() } return t.prototype.init = function () { var t = this.options.plotOptions, e = t.xField, n = t.yField, i = t.data, r = u[this.options.type]().x((function (t) { return t[e] })).y((function (t) { return t[n] })); this.data = this.processData(r(i)), this.container = this.view.get("backgroundGroup").addGroup() }, t.prototype.render = function () { var t = this.view.get("scales"), e = t[this.options.plotOptions.xField], n = t[this.options.plotOptions.yField], r = this.view.get("coord"), a = this.data.trendlineData, u = o.getScale("linear"), l = this.adjustScale(e, a, "x"), c = new u({ min: l.min, max: l.max, nice: e.nice }), h = this.adjustScale(n, a, "y"), p = new u({ min: h.min, max: h.max, nice: n.nice }); if (this.options.showConfidence) { var f = this.getConfidencePath(c, p, r); this.container.addShape("path", { attrs: i.__assign({ path: f }, this.options.confidenceStyle) }) } var d = this.getTrendlinePoints(c, p, r), g = s.getSplinePath(d, !1, [[0, 0], [1, 1]]); this.shape = this.container.addShape("path", { attrs: i.__assign({ path: g }, this.options.style) }) }, t.prototype.clear = function () { this.container && this.container.clear() }, t.prototype.destroy = function () { this.container && this.container.destroy() }, t.prototype.processData = function (t) { var e = [], n = []; return r.each(t, (function (i) { e.push({ x: i[0], y: i[1] }); var r, o, a = (r = t.rSquared, o = i[1], 1.96 * Math.sqrt(r * (1 - r) / o)); n.push({ x: i[0], y0: i[1] - a, y1: i[1] + a }) })), { trendlineData: e, confidenceData: n } }, t.prototype.getTrendlinePoints = function (t, e, n) { var i = []; return r.each(this.data.trendlineData, (function (r) { var o = t.scale(r.x), a = e.scale(r.y), s = n.start.x + n.width * o, u = n.start.y - n.height * a; i.push({ x: s, y: u }) })), i }, t.prototype.getConfidencePath = function (t, e, n) { var i = [], o = [], a = []; r.each(this.data.confidenceData, (function (r) { var a = t.scale(r.x), s = e.scale(r.y0), u = e.scale(r.y1), l = n.start.x + n.width * a, c = n.start.y - n.height * s, h = n.start.y - n.height * u; i.push({ x: l, y: c }), o.push({ x: l, y: h }) })); for (var s = 0; s < i.length; s++) { var u = 0 === s ? "M" : "L", l = i[s]; isNaN(l.x) || isNaN(l.y) || a.push([u, l.x, l.y]) } for (var c = o.length - 1; c > 0; c--) { l = o[c]; isNaN(l.x) || isNaN(l.y) || a.push(["L", l.x, l.y]) } return a }, t.prototype.adjustScale = function (t, e, n) { var i = t.min, o = t.max, a = this.options.plotOptions, s = a.data, u = a.xField, l = a.yField, c = "x" === n ? u : l, h = r.minBy(s, c)[c], p = r.maxBy(s, c)[c], f = (i - h) / (p - h), d = (o - p) / (p - h), g = r.minBy(e, n)[n], v = r.maxBy(e, n)[n]; return { min: g + f * (v - g), max: v + d * (v - g) } }, t }(); e.default = l }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(91)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "scatter", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(206)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "groupColumn", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(7), a = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "groupColumn", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { yAxis: { title: { visible: !0 } } }) }, e.prototype.getResponsiveTheme = function () { return this.themeController.getResponsiveTheme("column") }, e.prototype.addGeometry = function () { t.prototype.addGeometry.call(this) }, e.prototype.adjustColumn = function (t) { t.adjust = [{ type: "dodge", marginRatio: .1 }] }, e }(i.__importDefault(n(33)).default); e.default = a, o.registerPlotType("groupColumn", a) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(92)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "stackColumn", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(2), o = i.__importStar(n(0)), a = n(36); function s(t) { var e = [], n = t.get("coord"), i = t.get("origin").points; return o.each(i, (function (t) { e.push(n.convertPoint(t)) })), e } var u = function () { function t(t) { this.areas = [], this.lines = [], this._areaStyle = {}, this._lineStyle = {}, o.assign(this, t), this._init() } return t.prototype.draw = function () { var t = this, e = this._getGroupedShapes(); o.each(e, (function (e, n) { e.length > 0 && t._drawConnection(e, n) })), this.triggerOn ? this._addInteraction() : this.animation && this._initialAnimation() }, t.prototype.clear = function () { this.container && this.container.clear(), this.areas = [], this.lines = [] }, t.prototype.destory = function () { this.container && this.container.remove() }, t.prototype.setState = function (t, e) { "active" === t && this._onActive(e), "disabled" === t && this._onDisabled(e), "selected" === t && this._onSelected(e) }, t.prototype._init = function () { var t = this, e = this.view.get("backgroundGroup"); this.container = e.addGroup(), this.draw(), this.view.on("beforerender", (function () { t.clear() })) }, t.prototype._getGroupedShapes = function () { var t = this, e = this.view.get("scales")[this.field].values, n = this.view.get("elements")[0].getShapes(), i = {}; return o.each(e, (function (t) { i[t] = [] })), o.each(n, (function (e) { var n = e.get("origin")._origin[t.field]; i[n].push(e) })), i }, t.prototype._drawConnection = function (t, e) { var n = t[0].attr("fill"); this._areaStyle[e] = this._getShapeStyle(n, "area"), this._lineStyle[e] = this._getShapeStyle(n, "line"); for (var i = 0; i < t.length - 1; i++) { var r = s(t[i]), a = s(t[i + 1]), u = o.mix({}, this._areaStyle[e]), l = o.mix({}, this._lineStyle[e]); this.triggerOn && (u.opacity = 0, l.opacity = 0); var c = this.container.addShape("path", { attrs: o.mix({}, u, { path: [["M", r[2].x, r[2].y], ["L", a[1].x, a[1].y], ["L", a[0].x, a[0].y], ["L", r[3].x, r[3].y]] }), name: "connectedArea" }), h = this.container.addShape("path", { attrs: o.mix({}, l, { path: [["M", r[2].x, r[2].y], ["L", a[1].x, a[1].y]] }), name: "connectedArea" }), p = t[i].get("origin")._origin; c.set("data", p), h.set("data", p), this.areas.push(c), this.lines.push(h) } }, t.prototype._getShapeStyle = function (t, e) { var n = e + "Style"; if (this[n]) return this[n]; var i = { areaStyle: { opacity: .2 }, lineStyle: { lineWidth: 2, opacity: .1 } }[n], r = { fill: t }; return "line" === e && (r = { stroke: t }), o.mix(i, r) }, t.prototype._addInteraction = function () { var t = this, e = this.triggerOn; this.view.on("interval:" + e, (function (e) { var n = e.target.get("origin")._origin[t.field]; t.setState("active", { name: t.field, exp: n }), t.setState("disabled", { name: t.field, exp: function (t) { return t !== n } }), t.view.get("canvas").draw() })), this.view.on("mousemove", (function (e) { "interval" !== e.target.name && t.setState("disabled", { name: t.field, exp: function () { return !0 } }) })) }, t.prototype._initialAnimation = function () { var t = this.view.get("coord"), e = t.start, n = t.end, i = t.width, o = t.height, a = new r.Shapes.Rect({ attrs: { x: e.x, y: n.y, width: 0, height: o } }); this.container.attr("clip", a), this.container.setSilent("animating", !0), a.animate({ width: i }, 600, "easeQuadOut", (function () { }), 400) }, t.prototype._onActive = function (t) { var e = this; o.each(this.areas, (function (n) { var i = n.get("data"), r = i[e.field]; if (a.compare(i, t)) { var o = e._areaStyle[r].opacity || 1; n.stopAnimate(), n.animate({ opacity: o }, 400, "easeQuadOut") } })), o.each(this.lines, (function (n) { var i = n.get("data"), r = i[e.field]; if (a.compare(i, t)) { var o = e._lineStyle[r].opacity || 1; n.stopAnimate(), n.animate({ opacity: o }, 400, "easeQuadOut") } })) }, t.prototype._onDisabled = function (t) { o.each(this.areas, (function (e) { var n = e.get("data"); a.compare(n, t) && (e.stopAnimate(), e.animate({ opacity: 0 }, 400, "easeQuadOut")) })), o.each(this.lines, (function (e) { var n = e.get("data"); a.compare(n, t) && (e.stopAnimate(), e.animate({ opacity: 0 }, 400, "easeQuadOut")) })) }, t.prototype._onSelected = function (t) { this._onActive(t) }, t }(); e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.adjustPosition = function (t, e) { var n = t.getBBox(); e.getBBox().height <= n.height && (t.attr("opacity", 0), t.attr("fillOpacity", 0), t.attr("strokeOpacity", 0), t.set("capture", !1)) }, e }(n(51).ColumnLabels); r.registerElementLabels("stackColumnLabel", o) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(211)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "percentageStackColumn", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(92)), s = n(53), u = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "percentageStackColumn", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { label: { visible: !0, position: "middle", offset: 0 }, yAxis: { visible: !0, tick: { visible: !1 }, grid: { visible: !1 }, title: { visible: !0 }, label: { visible: !1 } } }) }, e.prototype.processData = function (t) { var e = this.options, n = e.xField, i = e.yField; return s.transformDataPercentage(t || [], n, [i]) }, e.prototype.scale = function () { var e = {}, n = this.options.yField; e[n] = { tickCount: 6, alias: n + " (%)", min: 0, max: 1, formatter: function (t) { return (100 * t).toFixed(1) + "%" } }, this.options.meta = e, t.prototype.scale.call(this) }, e }(a.default); e.default = u, o.registerPlotType("percentageStackColumn", u) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(213)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "histogram", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = n(15), s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "histogram", e } return i.__extends(e, t), e.prototype.init = function () { this.options.xField = "range", this.options.yField = "count", t.prototype.init.call(this) }, e.prototype.processData = function (t) { var e = this, n = this.options, i = n.binField, o = n.binWidth, s = n.binNumber, u = r.clone(t); r.sortBy(u, i); var l = r.valuesOfKey(u, i), c = r.getRange(l), h = c.max - c.min, p = o; if (!o && s && (p = h / s), !o && !s) { var f = a.sturges(l); p = h / f } var d = {}; r.each(u, (function (t) { var n = t[i], o = e.getBin(n, p), a = o[0] + "-" + o[1]; r.hasKey(d, a) || (d[a] = { name: a, range: o, count: 0, data: [] }), d[a].data.push(t), d[a].count += 1 })); var g = []; return r.each(d, (function (t) { g.push(t) })), g }, e.prototype.scale = function () { t.prototype.scale.call(this); var e = this.config.scales.range; e.nice = !1, e.type = "linear" }, e.prototype.getBin = function (t, e) { var n = Math.floor(t / e); return [e * n, e * (n + 1)] }, e }(i.__importDefault(n(33)).default); e.default = s, o.registerPlotType("histogram", s) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(39)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "bar", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = [{ name: "responsiveAxis", method: n(1).__importDefault(n(216)).default }]; e.default = { preRender: [], afterRender: i } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importDefault(n(37)); e.default = function (t) { var e = t.getResponsiveTheme(), n = t.canvas; new i.default({ plot: t, responsiveTheme: e, dim: "x" }), new i.default({ plot: t, responsiveTheme: e, dim: "y" }), n.draw() } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(10); e.EVENT_MAP = r.EVENT_MAP, e.onEvent = r.onEvent; i.assign(r.EVENT_MAP, { onBarClick: "interval:click", onBarDblclick: "interval:dblclick", onBarMousemove: "interval:mousemove", onBarMouseenter: "interval:mouseenter", onBarMouseleave: "interval:mouseleave", onBarMousedown: "interval:mousedown", onBarMouseup: "interval:mouseup", onBarContextmenu: "interval:contextmenu" }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); n(20).registerTheme("bar", { columnStyle: { normal: {}, active: function (t) { return { opacity: .5 * (t.opacity || 1) } }, disable: function (t) { return { opacity: .5 * (t.opacity || 1) } }, selected: { lineWidth: 1, stroke: "black" } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(94)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "stackBar", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.adjustPosition = function (t, e) { var n = t.getBBox(); e.getBBox().width <= n.width && (t.attr("opacity", 0), t.attr("fillOpacity", 0), t.attr("strokeOpacity", 0), t.set("capture", !1)) }, e }(n(93).BarLabels); r.registerElementLabels("stackBarLabel", o) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(222)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "percentageStackBar", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(94)), s = n(53), u = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "percentageStackBar", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { xAxis: { visible: !0, tickLine: { visible: !1 }, grid: { visible: !1 }, title: { visible: !0, formatter: function (t) { return t + " (%)" } }, label: { visible: !1, formatter: function (t) { return t.replace(/%/gi, "") } } } }) }, e.prototype.processData = function (e) { var n = this.options, i = n.xField, r = n.yField, o = t.prototype.processData.call(this, e); return s.transformDataPercentage(o, r, [i]) }, e.prototype.scale = function () { var e = {}, n = this.options.xField; e[n] = { tickCount: 6, alias: n + " (%)", min: 0, max: 1, formatter: function (t) { return (100 * t).toFixed(1) + "%" } }, this.options.meta = e, t.prototype.scale.call(this) }, e }(a.default); e.default = u, o.registerPlotType("percentageStackBar", u) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(224)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "groupBar", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "groupBar", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { xAxis: { visible: !0, grid: { visible: !0 } }, yAxis: { visible: !0, title: { visible: !1 } }, label: { visible: !0, position: "right", offset: 8, adjustColor: !0 }, legend: { visible: !0, position: "right-top" } }) }, e.prototype.afterRender = function () { t.prototype.afterRender.call(this); var e = r.valuesOfKey(this.options.data, this.options.groupField); this.view.on("tooltip:change", (function (t) { for (var n = t.items, i = r.clone(n), o = 0; o < e.length; o++)for (var a = e[o], s = 0; s < i.length; s++) { var u = i[s]; u.name === a && (t.items[o] = u) } })) }, e.prototype.scale = function () { var e = {}; e[this.options.groupField] = { values: r.valuesOfKey(this.options.data, this.options.groupField) }, this.options.meta ? this.options.meta = r.deepMix({}, this.options.meta, e) : this.options.meta = e, t.prototype.scale.call(this) }, e.prototype.adjustBar = function (t) { t.adjust = [{ type: "dodge", marginRatio: .1 }] }, e }(i.__importDefault(n(39)).default); e.default = a, o.registerPlotType("groupBar", a) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(226)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "rangeBar", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(39)), s = i.__importDefault(n(227)), u = n(228), l = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "rangeBar", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix(t.getDefaultOptions.call(this), { label: { visible: !0, position: "outer" }, xAxis: { visible: !0, autoHideLabel: !1, autoRotateLabel: !1, autoRotateTitle: !1, grid: { visible: !0 }, line: { visible: !1 }, tickLine: { visible: !1 }, label: { visible: !0 }, title: { visible: !0, offset: 12 } }, yAxis: { visible: !0, autoHideLabel: !1, autoRotateLabel: !1, autoRotateTitle: !0, grid: { visible: !1 }, line: { visible: !0 }, tickLine: { visible: !0 }, label: { visible: !0 }, title: { visible: !1, offset: 12 } } }, {}) }, e.prototype.afterRender = function () { this.options.label && this.options.label.visible && new s.default(i.__assign({ view: this.view, plot: this }, this.options.label)).render(); var e = [], n = this.view.get("elements"); r.each(n, (function (t) { var n = t.getShapes(); r.each(n, (function (t) { e.push(t) })) })), u.setShapeCache(e), t.prototype.afterRender.call(this) }, e.prototype.extractLabel = function () { }, e.prototype.animation = function () { t.prototype.animation.call(this), this.bar.animate = { appear: { animation: "clipInFromCenter", duration: 600 }, update: { animation: "updateFromCenter", duration: 600 } } }, e }(a.default); e.default = l, o.registerPlotType("rangeBar", l) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(21); var o = function () { function t(t) { this.destroyed = !1, this.view = t.view, this.plot = t.plot; var e = this.getDefaultOptions(); this.options = i.deepMix(e, t, {}), this.options.leftStyle || (this.options.leftStyle = this.options.style), this.options.rightStyle || (this.options.rightStyle = this.options.style), this.init() } return t.prototype.init = function () { var t = this, e = this.view.get("elements")[0].get("container"); this.container = e.addGroup(), this.view.on("beforerender", (function () { t.clear(), t.plot.canvas.draw() })) }, t.prototype.render = function () { var t = this, e = this.view.get("elements")[0], n = e.getShapes(); i.each(n, (function (e) { var n = t.getPosition(e), r = t.getValue(e), o = t.getTextAlign(), a = []; i.each(n, (function (n, s) { var u = 0 === s ? t.options.leftStyle : t.options.rightStyle, l = t.getTextColor(e, s); "inner" === t.options.position && t.options.adjustColor && "black" !== l && (u.stroke = null); var c = t.options.formatter, h = c ? c(r[s]) : r[s], p = t.container.addShape("text", { attrs: i.deepMix({}, u, { x: n.x, y: n.y, text: h, fill: l, textAlign: o[s], textBaseline: "middle" }) }); a.push(p), t.doAnimation(p) })), e.set("labelShapes", a), t.adjustPosition(a[0], a[1], e) })), e.get("labelController").labelsContainer = this.container, this.plot.canvas.draw() }, t.prototype.hide = function () { this.container.set("visible", !1), this.plot.canvas.draw() }, t.prototype.show = function () { this.container.set("visible", !0), this.plot.canvas.draw() }, t.prototype.clear = function () { this.container && this.container.clear() }, t.prototype.destory = function () { this.container && this.container.remove(), this.destroyed = !0 }, t.prototype.getBBox = function () { }, t.prototype.getDefaultOptions = function () { var t = this.plot.theme.label.style; return { position: "outer", offsetX: 8, offsetY: 0, style: i.clone(t), adjustColor: !0, adjustPosition: !0 } }, t.prototype.getPosition = function (t) { var e, n, i = t.get("origin"), r = i.x[0], o = i.x[1], a = this.options, s = a.offsetX, u = (a.offsetY, i.y[0]); return "outer" === this.options.position ? (e = r - s, n = o + s) : (e = r + s, n = o - s), [{ x: e, y: u }, { x: n, y: u }] }, t.prototype.getValue = function (t) { var e = this.plot.options.xField; return t.get("origin")._origin[e] }, t.prototype.getTextAlign = function () { return "outer" === this.options.position ? ["right", "left"] : ["left", "right"] }, t.prototype.getTextColor = function (t, e) { if (this.options.adjustColor && "inner" === this.options.position) { var n = t.attr("fill"), o = t.attr("opacity") ? t.attr("opacity") : 1, a = r.rgb2arr(n); return function (t, e) { var n; return i.each(t, (function (t) { var i = t; e >= i.from && e < i.to && (n = i.color) })), n }([{ from: 0, to: 85, color: "white" }, { from: 85, to: 170, color: "#F6F6F6" }, { from: 170, to: 255, color: "black" }], Math.round(.299 * a[0] + .587 * a[1] + .114 * a[2]) / o) } return 0 === e ? this.options.leftStyle.fill : this.options.rightStyle.fill }, t.prototype.doAnimation = function (t) { this.plot.animation && !1 === this.plot.animation || (t.attr("fillOpacity", 0), t.attr("strokeOpacity", 0), t.stopAnimate(), t.animate({ fillOpacity: 1, strokeOpacity: 1 }, 800, "easeLinear", 500)) }, t.prototype.adjustPosition = function (t, e, n) { var i = n.get("origin"), r = i.x[0], o = i.x[1], a = Math.abs(o - r), s = this.view.get("panelRange"), u = [t.getBBox(), e.getBBox()], l = t.attr("x"), c = e.attr("x"); if (this.options.adjustPosition && "inner" === this.options.position) { var h = u[0].width + u[1].width; (u[0].maxX - u[1].minX > 2 || h > a) && (l = r - this.options.offsetX, t.attr("fill", this.options.leftStyle.fill), t.attr("textAlign", "right"), u[0] = t.getBBox(), c = o + this.options.offsetX, e.attr("fill", this.options.rightStyle.fill), e.attr("textAlign", "left"), u[1] = e.getBBox()) } u[0].minX < s.minX && (l = s.minX + 8, t.attr("textAlign", "left")), t.attr("x", l), e.attr("x", c), this.plot.canvas.draw() }, t }(); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i, r = n(1), o = r.__importStar(n(2)), a = n(5), s = r.__importStar(n(0)); function u(t, e) { var n = t.getBBox(), i = n.minX + n.width / 2, r = new o.Rect({ attrs: { x: i, y: n.minY, width: 0, height: n.height } }); t.attr("clip", r), r.animate({ width: n.width, x: n.minX }, e.duration, e.easing, (function () { t.attr("clip", null) }), e.delay) } function l(t, e) { var n = function (t) { var e, n = t.id; return s.each(i, (function (t) { t.id === n && (e = t) })), e }(t).attr("path"), r = s.clone(t.attr("path")); t.attr("path", n), t.animate({ path: r }, e.duration, e.easing, e.callback, 100) } u.animationName = "clipInFromCenter", e.setShapeCache = function (t) { i = t }, l.animationName = "updateFromCenter", a.Animate.registerAnimation("appear", "clipInFromCenter", u), a.Animate.registerAnimation("update", "updateFromCenter", l) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(230)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "rangeColumn", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(33)), s = i.__importDefault(n(231)), u = n(232), l = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "rangeColumn", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix(t.getDefaultOptions.call(this), { label: { visible: !0, position: "outer" } }, {}) }, e.prototype.afterRender = function () { this.options.label && this.options.label.visible && new s.default(i.__assign({ view: this.view, plot: this }, this.options.label)).render(); var e = [], n = this.view.get("elements"); r.each(n, (function (t) { var n = t.getShapes(); r.each(n, (function (t) { e.push(t) })) })), u.setShapeCache(e), t.prototype.afterRender.call(this) }, e.prototype.extractLabel = function () { }, e.prototype.animation = function () { t.prototype.animation.call(this), this.column.animate = { appear: { animation: "clipInFromCenterVertical", duration: 600 }, update: { animation: "updateFromCenterVertical", duration: 600 } } }, e }(a.default); e.default = l, o.registerPlotType("rangeColumn", l) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(21); var o = function () { function t(t) { this.destroyed = !1, this.view = t.view, this.plot = t.plot; var e = this.getDefaultOptions(); this.options = i.deepMix(e, t, {}), this.options.topStyle || (this.options.topStyle = this.options.style), this.options.bottomStyle || (this.options.bottomStyle = this.options.style), this.init() } return t.prototype.init = function () { var t = this, e = this.view.get("elements")[0].get("container"); this.container = e.addGroup(), this.view.on("beforerender", (function () { t.clear(), t.plot.canvas.draw() })) }, t.prototype.render = function () { var t = this, e = this.view.get("elements")[0], n = e.getShapes(); i.each(n, (function (e) { var n = t.getPosition(e), r = t.getValue(e), o = t.getTextBaseline(), a = []; i.each(n, (function (n, s) { var u = 1 === s ? t.options.topStyle : t.options.bottomStyle, l = t.getTextColor(e, s); "inner" === t.options.position && t.options.adjustColor && "black" !== l && (u.stroke = null); var c = t.options.formatter, h = c ? c(r[s]) : r[s], p = t.container.addShape("text", { attrs: i.deepMix({}, u, { x: n.x, y: n.y, text: h, fill: l, textAlign: "center", textBaseline: o[s] }) }); a.push(p), t.doAnimation(p) })), e.set("labelShapes", a), t.adjustPosition(a[0], a[1], e) })), e.get("labelController").labelsContainer = this.container, this.plot.canvas.draw() }, t.prototype.hide = function () { this.container.set("visible", !1), this.plot.canvas.draw() }, t.prototype.show = function () { this.container.set("visible", !0), this.plot.canvas.draw() }, t.prototype.clear = function () { this.container && this.container.clear() }, t.prototype.destory = function () { this.container && this.container.remove(), this.destroyed = !0 }, t.prototype.getBBox = function () { }, t.prototype.getDefaultOptions = function () { var t = this.plot.theme.label.style; return { position: "outer", offsetX: 0, offsetY: 8, style: i.clone(t), adjustColor: !0, adjustPosition: !0 } }, t.prototype.getPosition = function (t) { var e, n, i = t.get("origin"), r = i.y[1], o = i.y[0], a = this.options, s = (a.offsetX, a.offsetY), u = i.x; return "outer" === this.options.position ? (e = r - s, n = o + s) : (e = r + s, n = o - s), [{ x: u, y: n }, { x: u, y: e }] }, t.prototype.getValue = function (t) { var e = this.plot.options.yField; return t.get("origin")._origin[e] }, t.prototype.getTextBaseline = function () { return "outer" === this.options.position ? ["top", "bottom"] : ["bottom", "top"] }, t.prototype.getTextColor = function (t, e) { if (this.options.adjustColor && "inner" === this.options.position) { var n = t.attr("fill"), o = t.attr("opacity") ? t.attr("opacity") : 1, a = r.rgb2arr(n); return function (t, e) { var n; return i.each(t, (function (t) { var i = t; e >= i.from && e < i.to && (n = i.color) })), n }([{ from: 0, to: 85, color: "white" }, { from: 85, to: 170, color: "#F6F6F6" }, { from: 170, to: 255, color: "black" }], Math.round(.299 * a[0] + .587 * a[1] + .114 * a[2]) / o) } return 1 === e ? this.options.topStyle.fill : this.options.bottomStyle.fill }, t.prototype.doAnimation = function (t) { this.plot.animation && !1 === this.plot.animation || (t.attr("fillOpacity", 0), t.attr("strokeOpacity", 0), t.stopAnimate(), t.animate({ fillOpacity: 1, strokeOpacity: 1 }, 800, "easeLinear", 500)) }, t.prototype.adjustPosition = function (t, e, n) { var i = n.get("origin"), r = i.y[1], o = i.y[0], a = Math.abs(o - r), s = this.view.get("panelRange"), u = [t.getBBox(), e.getBBox()], l = t.attr("y"), c = e.attr("y"); if (this.options.adjustPosition && "inner" === this.options.position) { var h = u[0].height + u[1].height; (u[1].maxY - u[0].minY > 2 || h > a) && (c = r - this.options.offsetY, e.attr("fill", this.options.topStyle.fill), e.attr("textBaseline", "bottom"), l = o + this.options.offsetY, t.attr("fill", this.options.bottomStyle.fill), t.attr("textBaseline", "top"), u[0] = t.getBBox(), u[1] = e.getBBox()) } u[0].maxY > s.maxY - 8 && (l = s.maxY - 4, t.attr("textBaseline", "bottom")), t.attr("y", l), e.attr("y", c), this.plot.canvas.draw() }, t }(); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i, r = n(1), o = r.__importStar(n(2)), a = n(5), s = r.__importStar(n(0)); function u(t, e) { var n = t.getBBox(), i = n.minY + n.height / 2, r = new o.Rect({ attrs: { x: n.minX, y: i, width: n.width, height: 0 } }); t.attr("clip", r), r.animate({ height: n.height, y: n.minY }, e.duration, e.easing, (function () { t.attr("clip", null) }), e.delay) } function l(t, e) { var n = function (t) { var e, n = t.id; return s.each(i, (function (t) { t.id === n && (e = t) })), e }(t).attr("path"), r = s.clone(t.attr("path")); t.attr("path", n), t.animate({ path: r }, e.duration, e.easing, e.callback, 100) } u.animationName = "clipInFromCenterVertical", e.setShapeCache = function (t) { i = t }, l.animationName = "updateFromCenterVertical", a.Animate.registerAnimation("appear", "clipInFromCenterVertical", u), a.Animate.registerAnimation("update", "updateFromCenterVertical", l) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(95)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "pie", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(2), o = i.__importStar(n(0)); function a(t, e, n) { return { x: t.x + n * Math.cos(e), y: t.y + n * Math.sin(e) } } var s = function () { function t(t) { this.view = t.view, this.fields = t.fields, this.formatter = t.formatter, this.offsetX = t.offsetX, this.offsetY = t.offsetY, this.config = o.assign({ text: { fill: "rgba(0, 0, 0, 0.65)", fontSize: 12 }, lineWidth: .5, lineStroke: "rgba(0, 0, 0, 0.45)", sidePadding: 20, lineHeight: 32 }, o.pick(t.style, ["lineStroke", "lineWidth"])), t.style && (this.config.text = o.mix(this.config.text, t.style)), this._adjustConfig(this.config), this._init() } return t.prototype.draw = function () { var t = this; if (this.view && !this.view.destroyed) { var e = o.clone(this.view.get("filteredData")); this.halves = [[], []], this.container = this.view.get("frontgroundGroup").addGroup(); var n = this.view.get("elements")[0].getShapes(), i = this.view.get("coord"), s = this.fields[0], u = this.view.get("scales")[s], l = i.center, c = i.startAngle, h = i.getRadius(), p = this.view.get("panelRange"), f = p.width, d = p.height; this.width = f, this.height = d; for (var g = c, v = function (t) { var i = e[t], c = u.scale(i[s]), p = g + 2 * Math.PI * c, f = g + (p - g) / 2; g = p; var d = a(l, f, h + 0), v = a(l, f, h + 15), m = "#CCC"; if (2 === y.fields.length) { var x = y.fields[1], _ = y.view.get("scales")[x].scale(i[x]), b = Math.floor(_ * (n.length - 1)); m = n[b].attr("fill") } var w = { _anchor: d, _inflection: v, _data: i, x: v.x, y: v.y, r: h + 15, fill: m, textGroup: null, _side: null }, M = []; if (o.each(y.fields, (function (t) { M.push(i[t]) })), y.formatter) { var S = y.formatter(i[s], { _origin: i, color: m }, t); o.isString(S) && (S = [S]), M = S } var C = new r.Group, O = { x: 0, y: 0, fontSize: y.config.text.fontSize, lineHeight: y.config.text.fontSize, fontWeight: y.config.text.fontWeight, fill: y.config.text.fill }, k = i[s]; y.formatter && (k = M[0]); var P = o.clone(O); (2 === M.length && (P.fontWeight = 700), C.addShape("text", { attrs: o.mix({ textBaseline: 2 === M.length ? "top" : "middle", text: k }, P), data: i, offsetY: 2 === M.length ? 2 : 0, name: "label" }).name = "label", 2 === M.length) && (C.addShape("text", { attrs: o.mix({ textBaseline: "bottom", text: M[1] }, O), data: i, offsetY: -2, name: "label" }).name = "label"); w.textGroup = C, d.x < l.x ? (w._side = "left", y.halves[0].push(w)) : (w._side = "right", y.halves[1].push(w)) }, y = this, m = 0; m < e.length; m++)v(m); var x = Math.floor(d / this.config.lineHeight); o.each(this.halves, (function (e) { e.length > x && e.splice(x, e.length - x), e.sort((function (t, e) { return t.y - e.y })), t._antiCollision(e) })), this.view.get("canvas").draw() } }, t.prototype.clear = function () { this.container && this.container.clear() }, t.prototype._init = function () { var t = this; this.view.on("beforerender", (function () { t.clear() })), this.view.on("afterrender", (function () { t.draw() })) }, t.prototype._antiCollision = function (t) { var e, n = this, i = this.view.get("coord"), r = i.getHeight(), o = i.center, a = i.getRadius(), s = o.y - a - 15 - this.config.lineHeight, u = !0, l = r, c = 0, h = Number.MIN_VALUE, p = 0, f = t.map((function (t) { var e = t.y; e > c && (c = e), e < h && (h = e); var i = t.textGroup.getBBox().width; return i >= p && (p = i), { size: n.config.lineHeight, targets: [e - s] } })); c - s > l && (l = c - s); for (; u;)for (f.forEach((function (t) { var e = (Math.min.apply(h, t.targets) + Math.max.apply(h, t.targets)) / 2; t.pos = Math.min(Math.max(h, e - t.size / 2), l - t.size) })), u = !1, e = f.length; e--;)if (e > 0) { var d = f[e - 1], g = f[e]; d.pos + d.size > g.pos && (d.size += g.size, d.targets = d.targets.concat(g.targets), d.pos + d.size > l && (d.pos = l - d.size), f.splice(e, 1), u = !0) } e = 0, f.forEach((function (i) { var r = s; i.targets.forEach((function () { t[e].y = i.pos + r + n.config.lineHeight / 2, r += n.config.lineHeight, e++ })) })); var v = []; t.forEach((function (t) { var e = n._drawLabel(t); n.container.add(e), n._drawLabelLine(t, p), v.push(e) })) }, t.prototype._drawLabel = function (t) { var e = this.view.get("coord"), n = e.getCenter(), i = e.getRadius(), r = (this.width, t.y), o = t.textGroup, a = o.get("children"), s = "left" === t._side ? 1 : -1, u = { textAlign: "left" === t._side ? "right" : "left", x: "left" === t._side ? n.x - i - this.config.sidePadding : n.x + i + this.config.sidePadding }; return this.offsetX && (u.x += this.offsetX * s), a.forEach((function (t) { var e = t.get("offsetY"), n = r + e; t.attr(u), t.attr("y", n) })), o }, t.prototype._drawLabelLine = function (t, e) { var n = [t._anchor.x, t._anchor.y], i = [t._inflection.x, t._inflection.y], r = (t.fill, t.y), o = t.textGroup; if (o) { var a = ["left" === t._side ? o.getBBox().maxX + 4 : o.getBBox().minX - 4, r], s = [n, i, a]; if (i[1] !== r) if (i[1] < r) { var u = i, l = a[0] + e + 15, c = a[0] - e - 15, h = ["left" === t._side ? l : c, i[1]], p = ["left" === t._side ? a[0] + e : a[0] - e, a[1]]; s = [n, u, h, p, a], ("right" === t._side && h[0] < u[0] || "left" === t._side && h[0] > u[0]) && (s = [n, p, a]) } else s = [n, [i[0], r], a]; for (var f = [], d = 0; d < s.length; d++) { var g = s[d], v = "L"; 0 === d && (v = "M"), f.push([v, g[0], g[1]]) } this.container.addShape("path", { attrs: { path: f, lineWidth: this.config.lineWidth, stroke: this.config.lineStroke } }) } }, t.prototype._adjustConfig = function (t) { t.text.fontSize && (t.lineHeight = 3 * t.text.fontSize) }, t }(); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = document.createElement("canvas").getContext("2d"); e.measureTextWidth = r.memoize((function (t, e) { void 0 === e && (e = {}); var n = e.fontSize, i = e.fontFamily, a = e.fontWeight, s = e.fontStyle, u = e.fontVariant; return o.font = [s, u, a, n + "px", i].join(" "), o.measureText(r.isString(t) ? t : "").width }), (function (t, e) { return e ? i.__spreadArrays([t], r.values(e)).join("") : t })), e.getEllipsisText = function (t, n, i, o) { var a, s = e.measureTextWidth("...", i); a = r.isString(t) ? t : r.toString(t); var u, l, c = n, h = []; if (e.measureTextWidth(t, i) <= n) return t; for (; u = a.substr(0, 16), !((l = e.measureTextWidth(u, i)) + s > c && l > c);)if (h.push(u), c -= l, !(a = a.substr(16))) return h.join(""); for (; u = a.substr(0, 1), !((l = e.measureTextWidth(u, i)) + s > c);)if (h.push(u), c -= l, !(a = a.substr(1))) return h.join(""); return h.join("") + "..." } }, function (t, e, n) {
        (function (t, i) {
            var r; function o(t) { return (o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) }
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function () { var a = "Expected a function", s = "__lodash_placeholder__", u = [["ary", 128], ["bind", 1], ["bindKey", 2], ["curry", 8], ["curryRight", 16], ["flip", 512], ["partial", 32], ["partialRight", 64], ["rearg", 256]], l = "[object Arguments]", c = "[object Array]", h = "[object Boolean]", p = "[object Date]", f = "[object Error]", d = "[object Function]", g = "[object GeneratorFunction]", v = "[object Map]", y = "[object Number]", m = "[object Object]", x = "[object RegExp]", _ = "[object Set]", b = "[object String]", w = "[object Symbol]", M = "[object WeakMap]", S = "[object ArrayBuffer]", C = "[object DataView]", O = "[object Float32Array]", k = "[object Float64Array]", P = "[object Int8Array]", A = "[object Int16Array]", L = "[object Int32Array]", T = "[object Uint8Array]", D = "[object Uint16Array]", j = "[object Uint32Array]", I = /\b__p \+= '';/g, B = /\b(__p \+=) '' \+/g, E = /(__e\(.*?\)|\b__t\)) \+\n'';/g, F = /&(?:amp|lt|gt|quot|#39);/g, R = /[&<>"']/g, z = RegExp(F.source), N = RegExp(R.source), Y = /<%-([\s\S]+?)%>/g, H = /<%([\s\S]+?)%>/g, G = /<%=([\s\S]+?)%>/g, W = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, V = /^\w*$/, X = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, q = /[\\^$.*+?()[\]{}|]/g, U = RegExp(q.source), Z = /^\s+|\s+$/g, Q = /^\s+/, $ = /\s+$/, K = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/, J = /\{\n\/\* \[wrapped with (.+)\] \*/, tt = /,? & /, et = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g, nt = /\\(\\)?/g, it = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, rt = /\w*$/, ot = /^[-+]0x[0-9a-f]+$/i, at = /^0b[01]+$/i, st = /^\[object .+?Constructor\]$/, ut = /^0o[0-7]+$/i, lt = /^(?:0|[1-9]\d*)$/, ct = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, ht = /($^)/, pt = /['\n\r\u2028\u2029\\]/g, ft = "\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff", dt = "\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", gt = "[\\ud800-\\udfff]", vt = "[" + dt + "]", yt = "[" + ft + "]", mt = "\\d+", xt = "[\\u2700-\\u27bf]", _t = "[a-z\\xdf-\\xf6\\xf8-\\xff]", bt = "[^\\ud800-\\udfff" + dt + mt + "\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]", wt = "\\ud83c[\\udffb-\\udfff]", Mt = "[^\\ud800-\\udfff]", St = "(?:\\ud83c[\\udde6-\\uddff]){2}", Ct = "[\\ud800-\\udbff][\\udc00-\\udfff]", Ot = "[A-Z\\xc0-\\xd6\\xd8-\\xde]", kt = "(?:" + _t + "|" + bt + ")", Pt = "(?:" + Ot + "|" + bt + ")", At = "(?:" + yt + "|" + wt + ")" + "?", Lt = "[\\ufe0e\\ufe0f]?" + At + ("(?:\\u200d(?:" + [Mt, St, Ct].join("|") + ")[\\ufe0e\\ufe0f]?" + At + ")*"), Tt = "(?:" + [xt, St, Ct].join("|") + ")" + Lt, Dt = "(?:" + [Mt + yt + "?", yt, St, Ct, gt].join("|") + ")", jt = RegExp("['’]", "g"), It = RegExp(yt, "g"), Bt = RegExp(wt + "(?=" + wt + ")|" + Dt + Lt, "g"), Et = RegExp([Ot + "?" + _t + "+(?:['’](?:d|ll|m|re|s|t|ve))?(?=" + [vt, Ot, "$"].join("|") + ")", Pt + "+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=" + [vt, Ot + kt, "$"].join("|") + ")", Ot + "?" + kt + "+(?:['’](?:d|ll|m|re|s|t|ve))?", Ot + "+(?:['’](?:D|LL|M|RE|S|T|VE))?", "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", mt, Tt].join("|"), "g"), Ft = RegExp("[\\u200d\\ud800-\\udfff" + ft + "\\ufe0e\\ufe0f]"), Rt = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/, zt = ["Array", "Buffer", "DataView", "Date", "Error", "Float32Array", "Float64Array", "Function", "Int8Array", "Int16Array", "Int32Array", "Map", "Math", "Object", "Promise", "RegExp", "Set", "String", "Symbol", "TypeError", "Uint8Array", "Uint8ClampedArray", "Uint16Array", "Uint32Array", "WeakMap", "_", "clearTimeout", "isFinite", "parseInt", "setTimeout"], Nt = -1, Yt = {}; Yt[O] = Yt[k] = Yt[P] = Yt[A] = Yt[L] = Yt[T] = Yt["[object Uint8ClampedArray]"] = Yt[D] = Yt[j] = !0, Yt[l] = Yt[c] = Yt[S] = Yt[h] = Yt[C] = Yt[p] = Yt[f] = Yt[d] = Yt[v] = Yt[y] = Yt[m] = Yt[x] = Yt[_] = Yt[b] = Yt[M] = !1; var Ht = {}; Ht[l] = Ht[c] = Ht[S] = Ht[C] = Ht[h] = Ht[p] = Ht[O] = Ht[k] = Ht[P] = Ht[A] = Ht[L] = Ht[v] = Ht[y] = Ht[m] = Ht[x] = Ht[_] = Ht[b] = Ht[w] = Ht[T] = Ht["[object Uint8ClampedArray]"] = Ht[D] = Ht[j] = !0, Ht[f] = Ht[d] = Ht[M] = !1; var Gt = { "\\": "\\", "'": "'", "\n": "n", "\r": "r", "\u2028": "u2028", "\u2029": "u2029" }, Wt = parseFloat, Vt = parseInt, Xt = "object" == (void 0 === t ? "undefined" : o(t)) && t && t.Object === Object && t, qt = "object" == ("undefined" == typeof self ? "undefined" : o(self)) && self && self.Object === Object && self, Ut = Xt || qt || Function("return this")(), Zt = "object" == o(e) && e && !e.nodeType && e, Qt = Zt && "object" == o(i) && i && !i.nodeType && i, $t = Qt && Qt.exports === Zt, Kt = $t && Xt.process, Jt = function () { try { var t = Qt && Qt.require && Qt.require("util").types; return t || Kt && Kt.binding && Kt.binding("util") } catch (t) { } }(), te = Jt && Jt.isArrayBuffer, ee = Jt && Jt.isDate, ne = Jt && Jt.isMap, ie = Jt && Jt.isRegExp, re = Jt && Jt.isSet, oe = Jt && Jt.isTypedArray; function ae(t, e, n) { switch (n.length) { case 0: return t.call(e); case 1: return t.call(e, n[0]); case 2: return t.call(e, n[0], n[1]); case 3: return t.call(e, n[0], n[1], n[2]) }return t.apply(e, n) } function se(t, e, n, i) { for (var r = -1, o = null == t ? 0 : t.length; ++r < o;) { var a = t[r]; e(i, a, n(a), t) } return i } function ue(t, e) { for (var n = -1, i = null == t ? 0 : t.length; ++n < i && !1 !== e(t[n], n, t);); return t } function le(t, e) { for (var n = null == t ? 0 : t.length; n-- && !1 !== e(t[n], n, t);); return t } function ce(t, e) { for (var n = -1, i = null == t ? 0 : t.length; ++n < i;)if (!e(t[n], n, t)) return !1; return !0 } function he(t, e) { for (var n = -1, i = null == t ? 0 : t.length, r = 0, o = []; ++n < i;) { var a = t[n]; e(a, n, t) && (o[r++] = a) } return o } function pe(t, e) { return !!(null == t ? 0 : t.length) && we(t, e, 0) > -1 } function fe(t, e, n) { for (var i = -1, r = null == t ? 0 : t.length; ++i < r;)if (n(e, t[i])) return !0; return !1 } function de(t, e) { for (var n = -1, i = null == t ? 0 : t.length, r = Array(i); ++n < i;)r[n] = e(t[n], n, t); return r } function ge(t, e) { for (var n = -1, i = e.length, r = t.length; ++n < i;)t[r + n] = e[n]; return t } function ve(t, e, n, i) { var r = -1, o = null == t ? 0 : t.length; for (i && o && (n = t[++r]); ++r < o;)n = e(n, t[r], r, t); return n } function ye(t, e, n, i) { var r = null == t ? 0 : t.length; for (i && r && (n = t[--r]); r--;)n = e(n, t[r], r, t); return n } function me(t, e) { for (var n = -1, i = null == t ? 0 : t.length; ++n < i;)if (e(t[n], n, t)) return !0; return !1 } var xe = Oe("length"); function _e(t, e, n) { var i; return n(t, (function (t, n, r) { if (e(t, n, r)) return i = n, !1 })), i } function be(t, e, n, i) { for (var r = t.length, o = n + (i ? 1 : -1); i ? o-- : ++o < r;)if (e(t[o], o, t)) return o; return -1 } function we(t, e, n) { return e == e ? function (t, e, n) { var i = n - 1, r = t.length; for (; ++i < r;)if (t[i] === e) return i; return -1 }(t, e, n) : be(t, Se, n) } function Me(t, e, n, i) { for (var r = n - 1, o = t.length; ++r < o;)if (i(t[r], e)) return r; return -1 } function Se(t) { return t != t } function Ce(t, e) { var n = null == t ? 0 : t.length; return n ? Ae(t, e) / n : NaN } function Oe(t) { return function (e) { return null == e ? void 0 : e[t] } } function ke(t) { return function (e) { return null == t ? void 0 : t[e] } } function Pe(t, e, n, i, r) { return r(t, (function (t, r, o) { n = i ? (i = !1, t) : e(n, t, r, o) })), n } function Ae(t, e) { for (var n, i = -1, r = t.length; ++i < r;) { var o = e(t[i]); void 0 !== o && (n = void 0 === n ? o : n + o) } return n } function Le(t, e) { for (var n = -1, i = Array(t); ++n < t;)i[n] = e(n); return i } function Te(t) { return function (e) { return t(e) } } function De(t, e) { return de(e, (function (e) { return t[e] })) } function je(t, e) { return t.has(e) } function Ie(t, e) { for (var n = -1, i = t.length; ++n < i && we(e, t[n], 0) > -1;); return n } function Be(t, e) { for (var n = t.length; n-- && we(e, t[n], 0) > -1;); return n } function Ee(t, e) { for (var n = t.length, i = 0; n--;)t[n] === e && ++i; return i } var Fe = ke({ "À": "A", "Á": "A", "Â": "A", "Ã": "A", "Ä": "A", "Å": "A", "à": "a", "á": "a", "â": "a", "ã": "a", "ä": "a", "å": "a", "Ç": "C", "ç": "c", "Ð": "D", "ð": "d", "È": "E", "É": "E", "Ê": "E", "Ë": "E", "è": "e", "é": "e", "ê": "e", "ë": "e", "Ì": "I", "Í": "I", "Î": "I", "Ï": "I", "ì": "i", "í": "i", "î": "i", "ï": "i", "Ñ": "N", "ñ": "n", "Ò": "O", "Ó": "O", "Ô": "O", "Õ": "O", "Ö": "O", "Ø": "O", "ò": "o", "ó": "o", "ô": "o", "õ": "o", "ö": "o", "ø": "o", "Ù": "U", "Ú": "U", "Û": "U", "Ü": "U", "ù": "u", "ú": "u", "û": "u", "ü": "u", "Ý": "Y", "ý": "y", "ÿ": "y", "Æ": "Ae", "æ": "ae", "Þ": "Th", "þ": "th", "ß": "ss", "Ā": "A", "Ă": "A", "Ą": "A", "ā": "a", "ă": "a", "ą": "a", "Ć": "C", "Ĉ": "C", "Ċ": "C", "Č": "C", "ć": "c", "ĉ": "c", "ċ": "c", "č": "c", "Ď": "D", "Đ": "D", "ď": "d", "đ": "d", "Ē": "E", "Ĕ": "E", "Ė": "E", "Ę": "E", "Ě": "E", "ē": "e", "ĕ": "e", "ė": "e", "ę": "e", "ě": "e", "Ĝ": "G", "Ğ": "G", "Ġ": "G", "Ģ": "G", "ĝ": "g", "ğ": "g", "ġ": "g", "ģ": "g", "Ĥ": "H", "Ħ": "H", "ĥ": "h", "ħ": "h", "Ĩ": "I", "Ī": "I", "Ĭ": "I", "Į": "I", "İ": "I", "ĩ": "i", "ī": "i", "ĭ": "i", "į": "i", "ı": "i", "Ĵ": "J", "ĵ": "j", "Ķ": "K", "ķ": "k", "ĸ": "k", "Ĺ": "L", "Ļ": "L", "Ľ": "L", "Ŀ": "L", "Ł": "L", "ĺ": "l", "ļ": "l", "ľ": "l", "ŀ": "l", "ł": "l", "Ń": "N", "Ņ": "N", "Ň": "N", "Ŋ": "N", "ń": "n", "ņ": "n", "ň": "n", "ŋ": "n", "Ō": "O", "Ŏ": "O", "Ő": "O", "ō": "o", "ŏ": "o", "ő": "o", "Ŕ": "R", "Ŗ": "R", "Ř": "R", "ŕ": "r", "ŗ": "r", "ř": "r", "Ś": "S", "Ŝ": "S", "Ş": "S", "Š": "S", "ś": "s", "ŝ": "s", "ş": "s", "š": "s", "Ţ": "T", "Ť": "T", "Ŧ": "T", "ţ": "t", "ť": "t", "ŧ": "t", "Ũ": "U", "Ū": "U", "Ŭ": "U", "Ů": "U", "Ű": "U", "Ų": "U", "ũ": "u", "ū": "u", "ŭ": "u", "ů": "u", "ű": "u", "ų": "u", "Ŵ": "W", "ŵ": "w", "Ŷ": "Y", "ŷ": "y", "Ÿ": "Y", "Ź": "Z", "Ż": "Z", "Ž": "Z", "ź": "z", "ż": "z", "ž": "z", "Ĳ": "IJ", "ĳ": "ij", "Œ": "Oe", "œ": "oe", "ŉ": "'n", "ſ": "s" }), Re = ke({ "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }); function ze(t) { return "\\" + Gt[t] } function Ne(t) { return Ft.test(t) } function Ye(t) { var e = -1, n = Array(t.size); return t.forEach((function (t, i) { n[++e] = [i, t] })), n } function He(t, e) { return function (n) { return t(e(n)) } } function Ge(t, e) { for (var n = -1, i = t.length, r = 0, o = []; ++n < i;) { var a = t[n]; a !== e && a !== s || (t[n] = s, o[r++] = n) } return o } function We(t) { var e = -1, n = Array(t.size); return t.forEach((function (t) { n[++e] = t })), n } function Ve(t) { var e = -1, n = Array(t.size); return t.forEach((function (t) { n[++e] = [t, t] })), n } function Xe(t) { return Ne(t) ? function (t) { var e = Bt.lastIndex = 0; for (; Bt.test(t);)++e; return e }(t) : xe(t) } function qe(t) { return Ne(t) ? function (t) { return t.match(Bt) || [] }(t) : function (t) { return t.split("") }(t) } var Ue = ke({ "&amp;": "&", "&lt;": "<", "&gt;": ">", "&quot;": '"', "&#39;": "'" }); var Ze = function t(e) { var n, i = (e = null == e ? Ut : Ze.defaults(Ut.Object(), e, Ze.pick(Ut, zt))).Array, r = e.Date, ft = e.Error, dt = e.Function, gt = e.Math, vt = e.Object, yt = e.RegExp, mt = e.String, xt = e.TypeError, _t = i.prototype, bt = dt.prototype, wt = vt.prototype, Mt = e["__core-js_shared__"], St = bt.toString, Ct = wt.hasOwnProperty, Ot = 0, kt = (n = /[^.]+$/.exec(Mt && Mt.keys && Mt.keys.IE_PROTO || "")) ? "Symbol(src)_1." + n : "", Pt = wt.toString, At = St.call(vt), Lt = Ut._, Tt = yt("^" + St.call(Ct).replace(q, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), Dt = $t ? e.Buffer : void 0, Bt = e.Symbol, Ft = e.Uint8Array, Gt = Dt ? Dt.allocUnsafe : void 0, Xt = He(vt.getPrototypeOf, vt), qt = vt.create, Zt = wt.propertyIsEnumerable, Qt = _t.splice, Kt = Bt ? Bt.isConcatSpreadable : void 0, Jt = Bt ? Bt.iterator : void 0, xe = Bt ? Bt.toStringTag : void 0, ke = function () { try { var t = to(vt, "defineProperty"); return t({}, "", {}), t } catch (t) { } }(), Qe = e.clearTimeout !== Ut.clearTimeout && e.clearTimeout, $e = r && r.now !== Ut.Date.now && r.now, Ke = e.setTimeout !== Ut.setTimeout && e.setTimeout, Je = gt.ceil, tn = gt.floor, en = vt.getOwnPropertySymbols, nn = Dt ? Dt.isBuffer : void 0, rn = e.isFinite, on = _t.join, an = He(vt.keys, vt), sn = gt.max, un = gt.min, ln = r.now, cn = e.parseInt, hn = gt.random, pn = _t.reverse, fn = to(e, "DataView"), dn = to(e, "Map"), gn = to(e, "Promise"), vn = to(e, "Set"), yn = to(e, "WeakMap"), mn = to(vt, "create"), xn = yn && new yn, _n = {}, bn = Po(fn), wn = Po(dn), Mn = Po(gn), Sn = Po(vn), Cn = Po(yn), On = Bt ? Bt.prototype : void 0, kn = On ? On.valueOf : void 0, Pn = On ? On.toString : void 0; function An(t) { if (Va(t) && !Ia(t) && !(t instanceof jn)) { if (t instanceof Dn) return t; if (Ct.call(t, "__wrapped__")) return Ao(t) } return new Dn(t) } var Ln = function () { function t() { } return function (e) { if (!Wa(e)) return {}; if (qt) return qt(e); t.prototype = e; var n = new t; return t.prototype = void 0, n } }(); function Tn() { } function Dn(t, e) { this.__wrapped__ = t, this.__actions__ = [], this.__chain__ = !!e, this.__index__ = 0, this.__values__ = void 0 } function jn(t) { this.__wrapped__ = t, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = !1, this.__iteratees__ = [], this.__takeCount__ = 4294967295, this.__views__ = [] } function In(t) { var e = -1, n = null == t ? 0 : t.length; for (this.clear(); ++e < n;) { var i = t[e]; this.set(i[0], i[1]) } } function Bn(t) { var e = -1, n = null == t ? 0 : t.length; for (this.clear(); ++e < n;) { var i = t[e]; this.set(i[0], i[1]) } } function En(t) { var e = -1, n = null == t ? 0 : t.length; for (this.clear(); ++e < n;) { var i = t[e]; this.set(i[0], i[1]) } } function Fn(t) { var e = -1, n = null == t ? 0 : t.length; for (this.__data__ = new En; ++e < n;)this.add(t[e]) } function Rn(t) { var e = this.__data__ = new Bn(t); this.size = e.size } function zn(t, e) { var n = Ia(t), i = !n && ja(t), r = !n && !i && Ra(t), o = !n && !i && !r && Ja(t), a = n || i || r || o, s = a ? Le(t.length, mt) : [], u = s.length; for (var l in t) !e && !Ct.call(t, l) || a && ("length" == l || r && ("offset" == l || "parent" == l) || o && ("buffer" == l || "byteLength" == l || "byteOffset" == l) || so(l, u)) || s.push(l); return s } function Nn(t) { var e = t.length; return e ? t[Fi(0, e - 1)] : void 0 } function Yn(t, e) { return Co(mr(t), Qn(e, 0, t.length)) } function Hn(t) { return Co(mr(t)) } function Gn(t, e, n) { (void 0 === n || La(t[e], n)) && (void 0 !== n || e in t) || Un(t, e, n) } function Wn(t, e, n) { var i = t[e]; Ct.call(t, e) && La(i, n) && (void 0 !== n || e in t) || Un(t, e, n) } function Vn(t, e) { for (var n = t.length; n--;)if (La(t[n][0], e)) return n; return -1 } function Xn(t, e, n, i) { return ei(t, (function (t, r, o) { e(i, t, n(t), o) })), i } function qn(t, e) { return t && xr(e, bs(e), t) } function Un(t, e, n) { "__proto__" == e && ke ? ke(t, e, { configurable: !0, enumerable: !0, value: n, writable: !0 }) : t[e] = n } function Zn(t, e) { for (var n = -1, r = e.length, o = i(r), a = null == t; ++n < r;)o[n] = a ? void 0 : vs(t, e[n]); return o } function Qn(t, e, n) { return t == t && (void 0 !== n && (t = t <= n ? t : n), void 0 !== e && (t = t >= e ? t : e)), t } function $n(t, e, n, i, r, o) { var a, s = 1 & e, u = 2 & e, c = 4 & e; if (n && (a = r ? n(t, i, r, o) : n(t)), void 0 !== a) return a; if (!Wa(t)) return t; var f = Ia(t); if (f) { if (a = function (t) { var e = t.length, n = new t.constructor(e); e && "string" == typeof t[0] && Ct.call(t, "index") && (n.index = t.index, n.input = t.input); return n }(t), !s) return mr(t, a) } else { var M = io(t), I = M == d || M == g; if (Ra(t)) return pr(t, s); if (M == m || M == l || I && !r) { if (a = u || I ? {} : oo(t), !s) return u ? function (t, e) { return xr(t, no(t), e) }(t, function (t, e) { return t && xr(e, ws(e), t) }(a, t)) : function (t, e) { return xr(t, eo(t), e) }(t, qn(a, t)) } else { if (!Ht[M]) return r ? t : {}; a = function (t, e, n) { var i = t.constructor; switch (e) { case S: return fr(t); case h: case p: return new i(+t); case C: return function (t, e) { var n = e ? fr(t.buffer) : t.buffer; return new t.constructor(n, t.byteOffset, t.byteLength) }(t, n); case O: case k: case P: case A: case L: case T: case "[object Uint8ClampedArray]": case D: case j: return dr(t, n); case v: return new i; case y: case b: return new i(t); case x: return function (t) { var e = new t.constructor(t.source, rt.exec(t)); return e.lastIndex = t.lastIndex, e }(t); case _: return new i; case w: return r = t, kn ? vt(kn.call(r)) : {} }var r }(t, M, s) } } o || (o = new Rn); var B = o.get(t); if (B) return B; o.set(t, a), Qa(t) ? t.forEach((function (i) { a.add($n(i, e, n, i, t, o)) })) : Xa(t) && t.forEach((function (i, r) { a.set(r, $n(i, e, n, r, t, o)) })); var E = f ? void 0 : (c ? u ? qr : Xr : u ? ws : bs)(t); return ue(E || t, (function (i, r) { E && (i = t[r = i]), Wn(a, r, $n(i, e, n, r, t, o)) })), a } function Kn(t, e, n) { var i = n.length; if (null == t) return !i; for (t = vt(t); i--;) { var r = n[i], o = e[r], a = t[r]; if (void 0 === a && !(r in t) || !o(a)) return !1 } return !0 } function Jn(t, e, n) { if ("function" != typeof t) throw new xt(a); return bo((function () { t.apply(void 0, n) }), e) } function ti(t, e, n, i) { var r = -1, o = pe, a = !0, s = t.length, u = [], l = e.length; if (!s) return u; n && (e = de(e, Te(n))), i ? (o = fe, a = !1) : e.length >= 200 && (o = je, a = !1, e = new Fn(e)); t: for (; ++r < s;) { var c = t[r], h = null == n ? c : n(c); if (c = i || 0 !== c ? c : 0, a && h == h) { for (var p = l; p--;)if (e[p] === h) continue t; u.push(c) } else o(e, h, i) || u.push(c) } return u } An.templateSettings = { escape: Y, evaluate: H, interpolate: G, variable: "", imports: { _: An } }, An.prototype = Tn.prototype, An.prototype.constructor = An, Dn.prototype = Ln(Tn.prototype), Dn.prototype.constructor = Dn, jn.prototype = Ln(Tn.prototype), jn.prototype.constructor = jn, In.prototype.clear = function () { this.__data__ = mn ? mn(null) : {}, this.size = 0 }, In.prototype.delete = function (t) { var e = this.has(t) && delete this.__data__[t]; return this.size -= e ? 1 : 0, e }, In.prototype.get = function (t) { var e = this.__data__; if (mn) { var n = e[t]; return "__lodash_hash_undefined__" === n ? void 0 : n } return Ct.call(e, t) ? e[t] : void 0 }, In.prototype.has = function (t) { var e = this.__data__; return mn ? void 0 !== e[t] : Ct.call(e, t) }, In.prototype.set = function (t, e) { var n = this.__data__; return this.size += this.has(t) ? 0 : 1, n[t] = mn && void 0 === e ? "__lodash_hash_undefined__" : e, this }, Bn.prototype.clear = function () { this.__data__ = [], this.size = 0 }, Bn.prototype.delete = function (t) { var e = this.__data__, n = Vn(e, t); return !(n < 0) && (n == e.length - 1 ? e.pop() : Qt.call(e, n, 1), --this.size, !0) }, Bn.prototype.get = function (t) { var e = this.__data__, n = Vn(e, t); return n < 0 ? void 0 : e[n][1] }, Bn.prototype.has = function (t) { return Vn(this.__data__, t) > -1 }, Bn.prototype.set = function (t, e) { var n = this.__data__, i = Vn(n, t); return i < 0 ? (++this.size, n.push([t, e])) : n[i][1] = e, this }, En.prototype.clear = function () { this.size = 0, this.__data__ = { hash: new In, map: new (dn || Bn), string: new In } }, En.prototype.delete = function (t) { var e = Kr(this, t).delete(t); return this.size -= e ? 1 : 0, e }, En.prototype.get = function (t) { return Kr(this, t).get(t) }, En.prototype.has = function (t) { return Kr(this, t).has(t) }, En.prototype.set = function (t, e) { var n = Kr(this, t), i = n.size; return n.set(t, e), this.size += n.size == i ? 0 : 1, this }, Fn.prototype.add = Fn.prototype.push = function (t) { return this.__data__.set(t, "__lodash_hash_undefined__"), this }, Fn.prototype.has = function (t) { return this.__data__.has(t) }, Rn.prototype.clear = function () { this.__data__ = new Bn, this.size = 0 }, Rn.prototype.delete = function (t) { var e = this.__data__, n = e.delete(t); return this.size = e.size, n }, Rn.prototype.get = function (t) { return this.__data__.get(t) }, Rn.prototype.has = function (t) { return this.__data__.has(t) }, Rn.prototype.set = function (t, e) { var n = this.__data__; if (n instanceof Bn) { var i = n.__data__; if (!dn || i.length < 199) return i.push([t, e]), this.size = ++n.size, this; n = this.__data__ = new En(i) } return n.set(t, e), this.size = n.size, this }; var ei = wr(li), ni = wr(ci, !0); function ii(t, e) { var n = !0; return ei(t, (function (t, i, r) { return n = !!e(t, i, r) })), n } function ri(t, e, n) { for (var i = -1, r = t.length; ++i < r;) { var o = t[i], a = e(o); if (null != a && (void 0 === s ? a == a && !Ka(a) : n(a, s))) var s = a, u = o } return u } function oi(t, e) { var n = []; return ei(t, (function (t, i, r) { e(t, i, r) && n.push(t) })), n } function ai(t, e, n, i, r) { var o = -1, a = t.length; for (n || (n = ao), r || (r = []); ++o < a;) { var s = t[o]; e > 0 && n(s) ? e > 1 ? ai(s, e - 1, n, i, r) : ge(r, s) : i || (r[r.length] = s) } return r } var si = Mr(), ui = Mr(!0); function li(t, e) { return t && si(t, e, bs) } function ci(t, e) { return t && ui(t, e, bs) } function hi(t, e) { return he(e, (function (e) { return Ya(t[e]) })) } function pi(t, e) { for (var n = 0, i = (e = ur(e, t)).length; null != t && n < i;)t = t[ko(e[n++])]; return n && n == i ? t : void 0 } function fi(t, e, n) { var i = e(t); return Ia(t) ? i : ge(i, n(t)) } function di(t) { return null == t ? void 0 === t ? "[object Undefined]" : "[object Null]" : xe && xe in vt(t) ? function (t) { var e = Ct.call(t, xe), n = t[xe]; try { t[xe] = void 0; var i = !0 } catch (t) { } var r = Pt.call(t); i && (e ? t[xe] = n : delete t[xe]); return r }(t) : function (t) { return Pt.call(t) }(t) } function gi(t, e) { return t > e } function vi(t, e) { return null != t && Ct.call(t, e) } function yi(t, e) { return null != t && e in vt(t) } function mi(t, e, n) { for (var r = n ? fe : pe, o = t[0].length, a = t.length, s = a, u = i(a), l = 1 / 0, c = []; s--;) { var h = t[s]; s && e && (h = de(h, Te(e))), l = un(h.length, l), u[s] = !n && (e || o >= 120 && h.length >= 120) ? new Fn(s && h) : void 0 } h = t[0]; var p = -1, f = u[0]; t: for (; ++p < o && c.length < l;) { var d = h[p], g = e ? e(d) : d; if (d = n || 0 !== d ? d : 0, !(f ? je(f, g) : r(c, g, n))) { for (s = a; --s;) { var v = u[s]; if (!(v ? je(v, g) : r(t[s], g, n))) continue t } f && f.push(g), c.push(d) } } return c } function xi(t, e, n) { var i = null == (t = yo(t, e = ur(e, t))) ? t : t[ko(No(e))]; return null == i ? void 0 : ae(i, t, n) } function _i(t) { return Va(t) && di(t) == l } function bi(t, e, n, i, r) { return t === e || (null == t || null == e || !Va(t) && !Va(e) ? t != t && e != e : function (t, e, n, i, r, o) { var a = Ia(t), s = Ia(e), u = a ? c : io(t), d = s ? c : io(e), g = (u = u == l ? m : u) == m, M = (d = d == l ? m : d) == m, O = u == d; if (O && Ra(t)) { if (!Ra(e)) return !1; a = !0, g = !1 } if (O && !g) return o || (o = new Rn), a || Ja(t) ? Wr(t, e, n, i, r, o) : function (t, e, n, i, r, o, a) { switch (n) { case C: if (t.byteLength != e.byteLength || t.byteOffset != e.byteOffset) return !1; t = t.buffer, e = e.buffer; case S: return !(t.byteLength != e.byteLength || !o(new Ft(t), new Ft(e))); case h: case p: case y: return La(+t, +e); case f: return t.name == e.name && t.message == e.message; case x: case b: return t == e + ""; case v: var s = Ye; case _: var u = 1 & i; if (s || (s = We), t.size != e.size && !u) return !1; var l = a.get(t); if (l) return l == e; i |= 2, a.set(t, e); var c = Wr(s(t), s(e), i, r, o, a); return a.delete(t), c; case w: if (kn) return kn.call(t) == kn.call(e) }return !1 }(t, e, u, n, i, r, o); if (!(1 & n)) { var k = g && Ct.call(t, "__wrapped__"), P = M && Ct.call(e, "__wrapped__"); if (k || P) { var A = k ? t.value() : t, L = P ? e.value() : e; return o || (o = new Rn), r(A, L, n, i, o) } } if (!O) return !1; return o || (o = new Rn), function (t, e, n, i, r, o) { var a = 1 & n, s = Xr(t), u = s.length, l = Xr(e).length; if (u != l && !a) return !1; var c = u; for (; c--;) { var h = s[c]; if (!(a ? h in e : Ct.call(e, h))) return !1 } var p = o.get(t); if (p && o.get(e)) return p == e; var f = !0; o.set(t, e), o.set(e, t); var d = a; for (; ++c < u;) { h = s[c]; var g = t[h], v = e[h]; if (i) var y = a ? i(v, g, h, e, t, o) : i(g, v, h, t, e, o); if (!(void 0 === y ? g === v || r(g, v, n, i, o) : y)) { f = !1; break } d || (d = "constructor" == h) } if (f && !d) { var m = t.constructor, x = e.constructor; m != x && "constructor" in t && "constructor" in e && !("function" == typeof m && m instanceof m && "function" == typeof x && x instanceof x) && (f = !1) } return o.delete(t), o.delete(e), f }(t, e, n, i, r, o) }(t, e, n, i, bi, r)) } function wi(t, e, n, i) { var r = n.length, o = r, a = !i; if (null == t) return !o; for (t = vt(t); r--;) { var s = n[r]; if (a && s[2] ? s[1] !== t[s[0]] : !(s[0] in t)) return !1 } for (; ++r < o;) { var u = (s = n[r])[0], l = t[u], c = s[1]; if (a && s[2]) { if (void 0 === l && !(u in t)) return !1 } else { var h = new Rn; if (i) var p = i(l, c, u, t, e, h); if (!(void 0 === p ? bi(c, l, 3, i, h) : p)) return !1 } } return !0 } function Mi(t) { return !(!Wa(t) || (e = t, kt && kt in e)) && (Ya(t) ? Tt : st).test(Po(t)); var e } function Si(t) { return "function" == typeof t ? t : null == t ? qs : "object" == o(t) ? Ia(t) ? Li(t[0], t[1]) : Ai(t) : nu(t) } function Ci(t) { if (!po(t)) return an(t); var e = []; for (var n in vt(t)) Ct.call(t, n) && "constructor" != n && e.push(n); return e } function Oi(t) { if (!Wa(t)) return function (t) { var e = []; if (null != t) for (var n in vt(t)) e.push(n); return e }(t); var e = po(t), n = []; for (var i in t) ("constructor" != i || !e && Ct.call(t, i)) && n.push(i); return n } function ki(t, e) { return t < e } function Pi(t, e) { var n = -1, r = Ea(t) ? i(t.length) : []; return ei(t, (function (t, i, o) { r[++n] = e(t, i, o) })), r } function Ai(t) { var e = Jr(t); return 1 == e.length && e[0][2] ? go(e[0][0], e[0][1]) : function (n) { return n === t || wi(n, t, e) } } function Li(t, e) { return lo(t) && fo(e) ? go(ko(t), e) : function (n) { var i = vs(n, t); return void 0 === i && i === e ? ys(n, t) : bi(e, i, 3) } } function Ti(t, e, n, i, r) { t !== e && si(e, (function (o, a) { if (r || (r = new Rn), Wa(o)) !function (t, e, n, i, r, o, a) { var s = xo(t, n), u = xo(e, n), l = a.get(u); if (l) return void Gn(t, n, l); var c = o ? o(s, u, n + "", t, e, a) : void 0, h = void 0 === c; if (h) { var p = Ia(u), f = !p && Ra(u), d = !p && !f && Ja(u); c = u, p || f || d ? Ia(s) ? c = s : Fa(s) ? c = mr(s) : f ? (h = !1, c = pr(u, !0)) : d ? (h = !1, c = dr(u, !0)) : c = [] : Ua(u) || ja(u) ? (c = s, ja(s) ? c = ss(s) : Wa(s) && !Ya(s) || (c = oo(u))) : h = !1 } h && (a.set(u, c), r(c, u, i, o, a), a.delete(u)); Gn(t, n, c) }(t, e, a, n, Ti, i, r); else { var s = i ? i(xo(t, a), o, a + "", t, e, r) : void 0; void 0 === s && (s = o), Gn(t, a, s) } }), ws) } function Di(t, e) { var n = t.length; if (n) return so(e += e < 0 ? n : 0, n) ? t[e] : void 0 } function ji(t, e, n) { var i = -1; return e = de(e.length ? e : [qs], Te($r())), function (t, e) { var n = t.length; for (t.sort(e); n--;)t[n] = t[n].value; return t }(Pi(t, (function (t, n, r) { return { criteria: de(e, (function (e) { return e(t) })), index: ++i, value: t } })), (function (t, e) { return function (t, e, n) { var i = -1, r = t.criteria, o = e.criteria, a = r.length, s = n.length; for (; ++i < a;) { var u = gr(r[i], o[i]); if (u) { if (i >= s) return u; var l = n[i]; return u * ("desc" == l ? -1 : 1) } } return t.index - e.index }(t, e, n) })) } function Ii(t, e, n) { for (var i = -1, r = e.length, o = {}; ++i < r;) { var a = e[i], s = pi(t, a); n(s, a) && Hi(o, ur(a, t), s) } return o } function Bi(t, e, n, i) { var r = i ? Me : we, o = -1, a = e.length, s = t; for (t === e && (e = mr(e)), n && (s = de(t, Te(n))); ++o < a;)for (var u = 0, l = e[o], c = n ? n(l) : l; (u = r(s, c, u, i)) > -1;)s !== t && Qt.call(s, u, 1), Qt.call(t, u, 1); return t } function Ei(t, e) { for (var n = t ? e.length : 0, i = n - 1; n--;) { var r = e[n]; if (n == i || r !== o) { var o = r; so(r) ? Qt.call(t, r, 1) : tr(t, r) } } return t } function Fi(t, e) { return t + tn(hn() * (e - t + 1)) } function Ri(t, e) { var n = ""; if (!t || e < 1 || e > 9007199254740991) return n; do { e % 2 && (n += t), (e = tn(e / 2)) && (t += t) } while (e); return n } function zi(t, e) { return wo(vo(t, e, qs), t + "") } function Ni(t) { return Nn(Ls(t)) } function Yi(t, e) { var n = Ls(t); return Co(n, Qn(e, 0, n.length)) } function Hi(t, e, n, i) { if (!Wa(t)) return t; for (var r = -1, o = (e = ur(e, t)).length, a = o - 1, s = t; null != s && ++r < o;) { var u = ko(e[r]), l = n; if (r != a) { var c = s[u]; void 0 === (l = i ? i(c, u, s) : void 0) && (l = Wa(c) ? c : so(e[r + 1]) ? [] : {}) } Wn(s, u, l), s = s[u] } return t } var Gi = xn ? function (t, e) { return xn.set(t, e), t } : qs, Wi = ke ? function (t, e) { return ke(t, "toString", { configurable: !0, enumerable: !1, value: Ws(e), writable: !0 }) } : qs; function Vi(t) { return Co(Ls(t)) } function Xi(t, e, n) { var r = -1, o = t.length; e < 0 && (e = -e > o ? 0 : o + e), (n = n > o ? o : n) < 0 && (n += o), o = e > n ? 0 : n - e >>> 0, e >>>= 0; for (var a = i(o); ++r < o;)a[r] = t[r + e]; return a } function qi(t, e) { var n; return ei(t, (function (t, i, r) { return !(n = e(t, i, r)) })), !!n } function Ui(t, e, n) { var i = 0, r = null == t ? i : t.length; if ("number" == typeof e && e == e && r <= 2147483647) { for (; i < r;) { var o = i + r >>> 1, a = t[o]; null !== a && !Ka(a) && (n ? a <= e : a < e) ? i = o + 1 : r = o } return r } return Zi(t, e, qs, n) } function Zi(t, e, n, i) { e = n(e); for (var r = 0, o = null == t ? 0 : t.length, a = e != e, s = null === e, u = Ka(e), l = void 0 === e; r < o;) { var c = tn((r + o) / 2), h = n(t[c]), p = void 0 !== h, f = null === h, d = h == h, g = Ka(h); if (a) var v = i || d; else v = l ? d && (i || p) : s ? d && p && (i || !f) : u ? d && p && !f && (i || !g) : !f && !g && (i ? h <= e : h < e); v ? r = c + 1 : o = c } return un(o, 4294967294) } function Qi(t, e) { for (var n = -1, i = t.length, r = 0, o = []; ++n < i;) { var a = t[n], s = e ? e(a) : a; if (!n || !La(s, u)) { var u = s; o[r++] = 0 === a ? 0 : a } } return o } function $i(t) { return "number" == typeof t ? t : Ka(t) ? NaN : +t } function Ki(t) { if ("string" == typeof t) return t; if (Ia(t)) return de(t, Ki) + ""; if (Ka(t)) return Pn ? Pn.call(t) : ""; var e = t + ""; return "0" == e && 1 / t == -1 / 0 ? "-0" : e } function Ji(t, e, n) { var i = -1, r = pe, o = t.length, a = !0, s = [], u = s; if (n) a = !1, r = fe; else if (o >= 200) { var l = e ? null : Rr(t); if (l) return We(l); a = !1, r = je, u = new Fn } else u = e ? [] : s; t: for (; ++i < o;) { var c = t[i], h = e ? e(c) : c; if (c = n || 0 !== c ? c : 0, a && h == h) { for (var p = u.length; p--;)if (u[p] === h) continue t; e && u.push(h), s.push(c) } else r(u, h, n) || (u !== s && u.push(h), s.push(c)) } return s } function tr(t, e) { return null == (t = yo(t, e = ur(e, t))) || delete t[ko(No(e))] } function er(t, e, n, i) { return Hi(t, e, n(pi(t, e)), i) } function nr(t, e, n, i) { for (var r = t.length, o = i ? r : -1; (i ? o-- : ++o < r) && e(t[o], o, t);); return n ? Xi(t, i ? 0 : o, i ? o + 1 : r) : Xi(t, i ? o + 1 : 0, i ? r : o) } function ir(t, e) { var n = t; return n instanceof jn && (n = n.value()), ve(e, (function (t, e) { return e.func.apply(e.thisArg, ge([t], e.args)) }), n) } function rr(t, e, n) { var r = t.length; if (r < 2) return r ? Ji(t[0]) : []; for (var o = -1, a = i(r); ++o < r;)for (var s = t[o], u = -1; ++u < r;)u != o && (a[o] = ti(a[o] || s, t[u], e, n)); return Ji(ai(a, 1), e, n) } function or(t, e, n) { for (var i = -1, r = t.length, o = e.length, a = {}; ++i < r;) { var s = i < o ? e[i] : void 0; n(a, t[i], s) } return a } function ar(t) { return Fa(t) ? t : [] } function sr(t) { return "function" == typeof t ? t : qs } function ur(t, e) { return Ia(t) ? t : lo(t, e) ? [t] : Oo(us(t)) } var lr = zi; function cr(t, e, n) { var i = t.length; return n = void 0 === n ? i : n, !e && n >= i ? t : Xi(t, e, n) } var hr = Qe || function (t) { return Ut.clearTimeout(t) }; function pr(t, e) { if (e) return t.slice(); var n = t.length, i = Gt ? Gt(n) : new t.constructor(n); return t.copy(i), i } function fr(t) { var e = new t.constructor(t.byteLength); return new Ft(e).set(new Ft(t)), e } function dr(t, e) { var n = e ? fr(t.buffer) : t.buffer; return new t.constructor(n, t.byteOffset, t.length) } function gr(t, e) { if (t !== e) { var n = void 0 !== t, i = null === t, r = t == t, o = Ka(t), a = void 0 !== e, s = null === e, u = e == e, l = Ka(e); if (!s && !l && !o && t > e || o && a && u && !s && !l || i && a && u || !n && u || !r) return 1; if (!i && !o && !l && t < e || l && n && r && !i && !o || s && n && r || !a && r || !u) return -1 } return 0 } function vr(t, e, n, r) { for (var o = -1, a = t.length, s = n.length, u = -1, l = e.length, c = sn(a - s, 0), h = i(l + c), p = !r; ++u < l;)h[u] = e[u]; for (; ++o < s;)(p || o < a) && (h[n[o]] = t[o]); for (; c--;)h[u++] = t[o++]; return h } function yr(t, e, n, r) { for (var o = -1, a = t.length, s = -1, u = n.length, l = -1, c = e.length, h = sn(a - u, 0), p = i(h + c), f = !r; ++o < h;)p[o] = t[o]; for (var d = o; ++l < c;)p[d + l] = e[l]; for (; ++s < u;)(f || o < a) && (p[d + n[s]] = t[o++]); return p } function mr(t, e) { var n = -1, r = t.length; for (e || (e = i(r)); ++n < r;)e[n] = t[n]; return e } function xr(t, e, n, i) { var r = !n; n || (n = {}); for (var o = -1, a = e.length; ++o < a;) { var s = e[o], u = i ? i(n[s], t[s], s, n, t) : void 0; void 0 === u && (u = t[s]), r ? Un(n, s, u) : Wn(n, s, u) } return n } function _r(t, e) { return function (n, i) { var r = Ia(n) ? se : Xn, o = e ? e() : {}; return r(n, t, $r(i, 2), o) } } function br(t) { return zi((function (e, n) { var i = -1, r = n.length, o = r > 1 ? n[r - 1] : void 0, a = r > 2 ? n[2] : void 0; for (o = t.length > 3 && "function" == typeof o ? (r-- , o) : void 0, a && uo(n[0], n[1], a) && (o = r < 3 ? void 0 : o, r = 1), e = vt(e); ++i < r;) { var s = n[i]; s && t(e, s, i, o) } return e })) } function wr(t, e) { return function (n, i) { if (null == n) return n; if (!Ea(n)) return t(n, i); for (var r = n.length, o = e ? r : -1, a = vt(n); (e ? o-- : ++o < r) && !1 !== i(a[o], o, a);); return n } } function Mr(t) { return function (e, n, i) { for (var r = -1, o = vt(e), a = i(e), s = a.length; s--;) { var u = a[t ? s : ++r]; if (!1 === n(o[u], u, o)) break } return e } } function Sr(t) { return function (e) { var n = Ne(e = us(e)) ? qe(e) : void 0, i = n ? n[0] : e.charAt(0), r = n ? cr(n, 1).join("") : e.slice(1); return i[t]() + r } } function Cr(t) { return function (e) { return ve(Ys(js(e).replace(jt, "")), t, "") } } function Or(t) { return function () { var e = arguments; switch (e.length) { case 0: return new t; case 1: return new t(e[0]); case 2: return new t(e[0], e[1]); case 3: return new t(e[0], e[1], e[2]); case 4: return new t(e[0], e[1], e[2], e[3]); case 5: return new t(e[0], e[1], e[2], e[3], e[4]); case 6: return new t(e[0], e[1], e[2], e[3], e[4], e[5]); case 7: return new t(e[0], e[1], e[2], e[3], e[4], e[5], e[6]) }var n = Ln(t.prototype), i = t.apply(n, e); return Wa(i) ? i : n } } function kr(t) { return function (e, n, i) { var r = vt(e); if (!Ea(e)) { var o = $r(n, 3); e = bs(e), n = function (t) { return o(r[t], t, r) } } var a = t(e, n, i); return a > -1 ? r[o ? e[a] : a] : void 0 } } function Pr(t) { return Vr((function (e) { var n = e.length, i = n, r = Dn.prototype.thru; for (t && e.reverse(); i--;) { var o = e[i]; if ("function" != typeof o) throw new xt(a); if (r && !s && "wrapper" == Zr(o)) var s = new Dn([], !0) } for (i = s ? i : n; ++i < n;) { var u = Zr(o = e[i]), l = "wrapper" == u ? Ur(o) : void 0; s = l && co(l[0]) && 424 == l[1] && !l[4].length && 1 == l[9] ? s[Zr(l[0])].apply(s, l[3]) : 1 == o.length && co(o) ? s[u]() : s.thru(o) } return function () { var t = arguments, i = t[0]; if (s && 1 == t.length && Ia(i)) return s.plant(i).value(); for (var r = 0, o = n ? e[r].apply(this, t) : i; ++r < n;)o = e[r].call(this, o); return o } })) } function Ar(t, e, n, r, o, a, s, u, l, c) { var h = 128 & e, p = 1 & e, f = 2 & e, d = 24 & e, g = 512 & e, v = f ? void 0 : Or(t); return function y() { for (var m = arguments.length, x = i(m), _ = m; _--;)x[_] = arguments[_]; if (d) var b = Qr(y), w = Ee(x, b); if (r && (x = vr(x, r, o, d)), a && (x = yr(x, a, s, d)), m -= w, d && m < c) { var M = Ge(x, b); return Er(t, e, Ar, y.placeholder, n, x, M, u, l, c - m) } var S = p ? n : this, C = f ? S[t] : t; return m = x.length, u ? x = mo(x, u) : g && m > 1 && x.reverse(), h && l < m && (x.length = l), this && this !== Ut && this instanceof y && (C = v || Or(C)), C.apply(S, x) } } function Lr(t, e) { return function (n, i) { return function (t, e, n, i) { return li(t, (function (t, r, o) { e(i, n(t), r, o) })), i }(n, t, e(i), {}) } } function Tr(t, e) { return function (n, i) { var r; if (void 0 === n && void 0 === i) return e; if (void 0 !== n && (r = n), void 0 !== i) { if (void 0 === r) return i; "string" == typeof n || "string" == typeof i ? (n = Ki(n), i = Ki(i)) : (n = $i(n), i = $i(i)), r = t(n, i) } return r } } function Dr(t) { return Vr((function (e) { return e = de(e, Te($r())), zi((function (n) { var i = this; return t(e, (function (t) { return ae(t, i, n) })) })) })) } function jr(t, e) { var n = (e = void 0 === e ? " " : Ki(e)).length; if (n < 2) return n ? Ri(e, t) : e; var i = Ri(e, Je(t / Xe(e))); return Ne(e) ? cr(qe(i), 0, t).join("") : i.slice(0, t) } function Ir(t) { return function (e, n, r) { return r && "number" != typeof r && uo(e, n, r) && (n = r = void 0), e = is(e), void 0 === n ? (n = e, e = 0) : n = is(n), function (t, e, n, r) { for (var o = -1, a = sn(Je((e - t) / (n || 1)), 0), s = i(a); a--;)s[r ? a : ++o] = t, t += n; return s }(e, n, r = void 0 === r ? e < n ? 1 : -1 : is(r), t) } } function Br(t) { return function (e, n) { return "string" == typeof e && "string" == typeof n || (e = as(e), n = as(n)), t(e, n) } } function Er(t, e, n, i, r, o, a, s, u, l) { var c = 8 & e; e |= c ? 32 : 64, 4 & (e &= ~(c ? 64 : 32)) || (e &= -4); var h = [t, e, r, c ? o : void 0, c ? a : void 0, c ? void 0 : o, c ? void 0 : a, s, u, l], p = n.apply(void 0, h); return co(t) && _o(p, h), p.placeholder = i, Mo(p, t, e) } function Fr(t) { var e = gt[t]; return function (t, n) { if (t = as(t), (n = null == n ? 0 : un(rs(n), 292)) && rn(t)) { var i = (us(t) + "e").split("e"); return +((i = (us(e(i[0] + "e" + (+i[1] + n))) + "e").split("e"))[0] + "e" + (+i[1] - n)) } return e(t) } } var Rr = vn && 1 / We(new vn([, -0]))[1] == 1 / 0 ? function (t) { return new vn(t) } : Ks; function zr(t) { return function (e) { var n = io(e); return n == v ? Ye(e) : n == _ ? Ve(e) : function (t, e) { return de(e, (function (e) { return [e, t[e]] })) }(e, t(e)) } } function Nr(t, e, n, r, o, u, l, c) { var h = 2 & e; if (!h && "function" != typeof t) throw new xt(a); var p = r ? r.length : 0; if (p || (e &= -97, r = o = void 0), l = void 0 === l ? l : sn(rs(l), 0), c = void 0 === c ? c : rs(c), p -= o ? o.length : 0, 64 & e) { var f = r, d = o; r = o = void 0 } var g = h ? void 0 : Ur(t), v = [t, e, n, r, o, f, d, u, l, c]; if (g && function (t, e) { var n = t[1], i = e[1], r = n | i, o = r < 131, a = 128 == i && 8 == n || 128 == i && 256 == n && t[7].length <= e[8] || 384 == i && e[7].length <= e[8] && 8 == n; if (!o && !a) return t; 1 & i && (t[2] = e[2], r |= 1 & n ? 0 : 4); var u = e[3]; if (u) { var l = t[3]; t[3] = l ? vr(l, u, e[4]) : u, t[4] = l ? Ge(t[3], s) : e[4] } (u = e[5]) && (l = t[5], t[5] = l ? yr(l, u, e[6]) : u, t[6] = l ? Ge(t[5], s) : e[6]); (u = e[7]) && (t[7] = u); 128 & i && (t[8] = null == t[8] ? e[8] : un(t[8], e[8])); null == t[9] && (t[9] = e[9]); t[0] = e[0], t[1] = r }(v, g), t = v[0], e = v[1], n = v[2], r = v[3], o = v[4], !(c = v[9] = void 0 === v[9] ? h ? 0 : t.length : sn(v[9] - p, 0)) && 24 & e && (e &= -25), e && 1 != e) y = 8 == e || 16 == e ? function (t, e, n) { var r = Or(t); return function o() { for (var a = arguments.length, s = i(a), u = a, l = Qr(o); u--;)s[u] = arguments[u]; var c = a < 3 && s[0] !== l && s[a - 1] !== l ? [] : Ge(s, l); if ((a -= c.length) < n) return Er(t, e, Ar, o.placeholder, void 0, s, c, void 0, void 0, n - a); var h = this && this !== Ut && this instanceof o ? r : t; return ae(h, this, s) } }(t, e, c) : 32 != e && 33 != e || o.length ? Ar.apply(void 0, v) : function (t, e, n, r) { var o = 1 & e, a = Or(t); return function e() { for (var s = -1, u = arguments.length, l = -1, c = r.length, h = i(c + u), p = this && this !== Ut && this instanceof e ? a : t; ++l < c;)h[l] = r[l]; for (; u--;)h[l++] = arguments[++s]; return ae(p, o ? n : this, h) } }(t, e, n, r); else var y = function (t, e, n) { var i = 1 & e, r = Or(t); return function e() { var o = this && this !== Ut && this instanceof e ? r : t; return o.apply(i ? n : this, arguments) } }(t, e, n); return Mo((g ? Gi : _o)(y, v), t, e) } function Yr(t, e, n, i) { return void 0 === t || La(t, wt[n]) && !Ct.call(i, n) ? e : t } function Hr(t, e, n, i, r, o) { return Wa(t) && Wa(e) && (o.set(e, t), Ti(t, e, void 0, Hr, o), o.delete(e)), t } function Gr(t) { return Ua(t) ? void 0 : t } function Wr(t, e, n, i, r, o) { var a = 1 & n, s = t.length, u = e.length; if (s != u && !(a && u > s)) return !1; var l = o.get(t); if (l && o.get(e)) return l == e; var c = -1, h = !0, p = 2 & n ? new Fn : void 0; for (o.set(t, e), o.set(e, t); ++c < s;) { var f = t[c], d = e[c]; if (i) var g = a ? i(d, f, c, e, t, o) : i(f, d, c, t, e, o); if (void 0 !== g) { if (g) continue; h = !1; break } if (p) { if (!me(e, (function (t, e) { if (!je(p, e) && (f === t || r(f, t, n, i, o))) return p.push(e) }))) { h = !1; break } } else if (f !== d && !r(f, d, n, i, o)) { h = !1; break } } return o.delete(t), o.delete(e), h } function Vr(t) { return wo(vo(t, void 0, Bo), t + "") } function Xr(t) { return fi(t, bs, eo) } function qr(t) { return fi(t, ws, no) } var Ur = xn ? function (t) { return xn.get(t) } : Ks; function Zr(t) { for (var e = t.name + "", n = _n[e], i = Ct.call(_n, e) ? n.length : 0; i--;) { var r = n[i], o = r.func; if (null == o || o == t) return r.name } return e } function Qr(t) { return (Ct.call(An, "placeholder") ? An : t).placeholder } function $r() { var t = An.iteratee || Us; return t = t === Us ? Si : t, arguments.length ? t(arguments[0], arguments[1]) : t } function Kr(t, e) { var n, i, r = t.__data__; return ("string" == (i = o(n = e)) || "number" == i || "symbol" == i || "boolean" == i ? "__proto__" !== n : null === n) ? r["string" == typeof e ? "string" : "hash"] : r.map } function Jr(t) { for (var e = bs(t), n = e.length; n--;) { var i = e[n], r = t[i]; e[n] = [i, r, fo(r)] } return e } function to(t, e) { var n = function (t, e) { return null == t ? void 0 : t[e] }(t, e); return Mi(n) ? n : void 0 } var eo = en ? function (t) { return null == t ? [] : (t = vt(t), he(en(t), (function (e) { return Zt.call(t, e) }))) } : ou, no = en ? function (t) { for (var e = []; t;)ge(e, eo(t)), t = Xt(t); return e } : ou, io = di; function ro(t, e, n) { for (var i = -1, r = (e = ur(e, t)).length, o = !1; ++i < r;) { var a = ko(e[i]); if (!(o = null != t && n(t, a))) break; t = t[a] } return o || ++i != r ? o : !!(r = null == t ? 0 : t.length) && Ga(r) && so(a, r) && (Ia(t) || ja(t)) } function oo(t) { return "function" != typeof t.constructor || po(t) ? {} : Ln(Xt(t)) } function ao(t) { return Ia(t) || ja(t) || !!(Kt && t && t[Kt]) } function so(t, e) { var n = o(t); return !!(e = null == e ? 9007199254740991 : e) && ("number" == n || "symbol" != n && lt.test(t)) && t > -1 && t % 1 == 0 && t < e } function uo(t, e, n) { if (!Wa(n)) return !1; var i = o(e); return !!("number" == i ? Ea(n) && so(e, n.length) : "string" == i && e in n) && La(n[e], t) } function lo(t, e) { if (Ia(t)) return !1; var n = o(t); return !("number" != n && "symbol" != n && "boolean" != n && null != t && !Ka(t)) || (V.test(t) || !W.test(t) || null != e && t in vt(e)) } function co(t) { var e = Zr(t), n = An[e]; if ("function" != typeof n || !(e in jn.prototype)) return !1; if (t === n) return !0; var i = Ur(n); return !!i && t === i[0] } (fn && io(new fn(new ArrayBuffer(1))) != C || dn && io(new dn) != v || gn && "[object Promise]" != io(gn.resolve()) || vn && io(new vn) != _ || yn && io(new yn) != M) && (io = function (t) { var e = di(t), n = e == m ? t.constructor : void 0, i = n ? Po(n) : ""; if (i) switch (i) { case bn: return C; case wn: return v; case Mn: return "[object Promise]"; case Sn: return _; case Cn: return M }return e }); var ho = Mt ? Ya : au; function po(t) { var e = t && t.constructor; return t === ("function" == typeof e && e.prototype || wt) } function fo(t) { return t == t && !Wa(t) } function go(t, e) { return function (n) { return null != n && (n[t] === e && (void 0 !== e || t in vt(n))) } } function vo(t, e, n) { return e = sn(void 0 === e ? t.length - 1 : e, 0), function () { for (var r = arguments, o = -1, a = sn(r.length - e, 0), s = i(a); ++o < a;)s[o] = r[e + o]; o = -1; for (var u = i(e + 1); ++o < e;)u[o] = r[o]; return u[e] = n(s), ae(t, this, u) } } function yo(t, e) { return e.length < 2 ? t : pi(t, Xi(e, 0, -1)) } function mo(t, e) { for (var n = t.length, i = un(e.length, n), r = mr(t); i--;) { var o = e[i]; t[i] = so(o, n) ? r[o] : void 0 } return t } function xo(t, e) { if (("constructor" !== e || "function" != typeof t[e]) && "__proto__" != e) return t[e] } var _o = So(Gi), bo = Ke || function (t, e) { return Ut.setTimeout(t, e) }, wo = So(Wi); function Mo(t, e, n) { var i = e + ""; return wo(t, function (t, e) { var n = e.length; if (!n) return t; var i = n - 1; return e[i] = (n > 1 ? "& " : "") + e[i], e = e.join(n > 2 ? ", " : " "), t.replace(K, "{\n/* [wrapped with " + e + "] */\n") }(i, function (t, e) { return ue(u, (function (n) { var i = "_." + n[0]; e & n[1] && !pe(t, i) && t.push(i) })), t.sort() }(function (t) { var e = t.match(J); return e ? e[1].split(tt) : [] }(i), n))) } function So(t) { var e = 0, n = 0; return function () { var i = ln(), r = 16 - (i - n); if (n = i, r > 0) { if (++e >= 800) return arguments[0] } else e = 0; return t.apply(void 0, arguments) } } function Co(t, e) { var n = -1, i = t.length, r = i - 1; for (e = void 0 === e ? i : e; ++n < e;) { var o = Fi(n, r), a = t[o]; t[o] = t[n], t[n] = a } return t.length = e, t } var Oo = function (t) { var e = Sa(t, (function (t) { return 500 === n.size && n.clear(), t })), n = e.cache; return e }((function (t) { var e = []; return 46 === t.charCodeAt(0) && e.push(""), t.replace(X, (function (t, n, i, r) { e.push(i ? r.replace(nt, "$1") : n || t) })), e })); function ko(t) { if ("string" == typeof t || Ka(t)) return t; var e = t + ""; return "0" == e && 1 / t == -1 / 0 ? "-0" : e } function Po(t) { if (null != t) { try { return St.call(t) } catch (t) { } try { return t + "" } catch (t) { } } return "" } function Ao(t) { if (t instanceof jn) return t.clone(); var e = new Dn(t.__wrapped__, t.__chain__); return e.__actions__ = mr(t.__actions__), e.__index__ = t.__index__, e.__values__ = t.__values__, e } var Lo = zi((function (t, e) { return Fa(t) ? ti(t, ai(e, 1, Fa, !0)) : [] })), To = zi((function (t, e) { var n = No(e); return Fa(n) && (n = void 0), Fa(t) ? ti(t, ai(e, 1, Fa, !0), $r(n, 2)) : [] })), Do = zi((function (t, e) { var n = No(e); return Fa(n) && (n = void 0), Fa(t) ? ti(t, ai(e, 1, Fa, !0), void 0, n) : [] })); function jo(t, e, n) { var i = null == t ? 0 : t.length; if (!i) return -1; var r = null == n ? 0 : rs(n); return r < 0 && (r = sn(i + r, 0)), be(t, $r(e, 3), r) } function Io(t, e, n) { var i = null == t ? 0 : t.length; if (!i) return -1; var r = i - 1; return void 0 !== n && (r = rs(n), r = n < 0 ? sn(i + r, 0) : un(r, i - 1)), be(t, $r(e, 3), r, !0) } function Bo(t) { return (null == t ? 0 : t.length) ? ai(t, 1) : [] } function Eo(t) { return t && t.length ? t[0] : void 0 } var Fo = zi((function (t) { var e = de(t, ar); return e.length && e[0] === t[0] ? mi(e) : [] })), Ro = zi((function (t) { var e = No(t), n = de(t, ar); return e === No(n) ? e = void 0 : n.pop(), n.length && n[0] === t[0] ? mi(n, $r(e, 2)) : [] })), zo = zi((function (t) { var e = No(t), n = de(t, ar); return (e = "function" == typeof e ? e : void 0) && n.pop(), n.length && n[0] === t[0] ? mi(n, void 0, e) : [] })); function No(t) { var e = null == t ? 0 : t.length; return e ? t[e - 1] : void 0 } var Yo = zi(Ho); function Ho(t, e) { return t && t.length && e && e.length ? Bi(t, e) : t } var Go = Vr((function (t, e) { var n = null == t ? 0 : t.length, i = Zn(t, e); return Ei(t, de(e, (function (t) { return so(t, n) ? +t : t })).sort(gr)), i })); function Wo(t) { return null == t ? t : pn.call(t) } var Vo = zi((function (t) { return Ji(ai(t, 1, Fa, !0)) })), Xo = zi((function (t) { var e = No(t); return Fa(e) && (e = void 0), Ji(ai(t, 1, Fa, !0), $r(e, 2)) })), qo = zi((function (t) { var e = No(t); return e = "function" == typeof e ? e : void 0, Ji(ai(t, 1, Fa, !0), void 0, e) })); function Uo(t) { if (!t || !t.length) return []; var e = 0; return t = he(t, (function (t) { if (Fa(t)) return e = sn(t.length, e), !0 })), Le(e, (function (e) { return de(t, Oe(e)) })) } function Zo(t, e) { if (!t || !t.length) return []; var n = Uo(t); return null == e ? n : de(n, (function (t) { return ae(e, void 0, t) })) } var Qo = zi((function (t, e) { return Fa(t) ? ti(t, e) : [] })), $o = zi((function (t) { return rr(he(t, Fa)) })), Ko = zi((function (t) { var e = No(t); return Fa(e) && (e = void 0), rr(he(t, Fa), $r(e, 2)) })), Jo = zi((function (t) { var e = No(t); return e = "function" == typeof e ? e : void 0, rr(he(t, Fa), void 0, e) })), ta = zi(Uo); var ea = zi((function (t) { var e = t.length, n = e > 1 ? t[e - 1] : void 0; return n = "function" == typeof n ? (t.pop(), n) : void 0, Zo(t, n) })); function na(t) { var e = An(t); return e.__chain__ = !0, e } function ia(t, e) { return e(t) } var ra = Vr((function (t) { var e = t.length, n = e ? t[0] : 0, i = this.__wrapped__, r = function (e) { return Zn(e, t) }; return !(e > 1 || this.__actions__.length) && i instanceof jn && so(n) ? ((i = i.slice(n, +n + (e ? 1 : 0))).__actions__.push({ func: ia, args: [r], thisArg: void 0 }), new Dn(i, this.__chain__).thru((function (t) { return e && !t.length && t.push(void 0), t }))) : this.thru(r) })); var oa = _r((function (t, e, n) { Ct.call(t, n) ? ++t[n] : Un(t, n, 1) })); var aa = kr(jo), sa = kr(Io); function ua(t, e) { return (Ia(t) ? ue : ei)(t, $r(e, 3)) } function la(t, e) { return (Ia(t) ? le : ni)(t, $r(e, 3)) } var ca = _r((function (t, e, n) { Ct.call(t, n) ? t[n].push(e) : Un(t, n, [e]) })); var ha = zi((function (t, e, n) { var r = -1, o = "function" == typeof e, a = Ea(t) ? i(t.length) : []; return ei(t, (function (t) { a[++r] = o ? ae(e, t, n) : xi(t, e, n) })), a })), pa = _r((function (t, e, n) { Un(t, n, e) })); function fa(t, e) { return (Ia(t) ? de : Pi)(t, $r(e, 3)) } var da = _r((function (t, e, n) { t[n ? 0 : 1].push(e) }), (function () { return [[], []] })); var ga = zi((function (t, e) { if (null == t) return []; var n = e.length; return n > 1 && uo(t, e[0], e[1]) ? e = [] : n > 2 && uo(e[0], e[1], e[2]) && (e = [e[0]]), ji(t, ai(e, 1), []) })), va = $e || function () { return Ut.Date.now() }; function ya(t, e, n) { return e = n ? void 0 : e, Nr(t, 128, void 0, void 0, void 0, void 0, e = t && null == e ? t.length : e) } function ma(t, e) { var n; if ("function" != typeof e) throw new xt(a); return t = rs(t), function () { return --t > 0 && (n = e.apply(this, arguments)), t <= 1 && (e = void 0), n } } var xa = zi((function (t, e, n) { var i = 1; if (n.length) { var r = Ge(n, Qr(xa)); i |= 32 } return Nr(t, i, e, n, r) })), _a = zi((function (t, e, n) { var i = 3; if (n.length) { var r = Ge(n, Qr(_a)); i |= 32 } return Nr(e, i, t, n, r) })); function ba(t, e, n) { var i, r, o, s, u, l, c = 0, h = !1, p = !1, f = !0; if ("function" != typeof t) throw new xt(a); function d(e) { var n = i, o = r; return i = r = void 0, c = e, s = t.apply(o, n) } function g(t) { return c = t, u = bo(y, e), h ? d(t) : s } function v(t) { var n = t - l; return void 0 === l || n >= e || n < 0 || p && t - c >= o } function y() { var t = va(); if (v(t)) return m(t); u = bo(y, function (t) { var n = e - (t - l); return p ? un(n, o - (t - c)) : n }(t)) } function m(t) { return u = void 0, f && i ? d(t) : (i = r = void 0, s) } function x() { var t = va(), n = v(t); if (i = arguments, r = this, l = t, n) { if (void 0 === u) return g(l); if (p) return hr(u), u = bo(y, e), d(l) } return void 0 === u && (u = bo(y, e)), s } return e = as(e) || 0, Wa(n) && (h = !!n.leading, o = (p = "maxWait" in n) ? sn(as(n.maxWait) || 0, e) : o, f = "trailing" in n ? !!n.trailing : f), x.cancel = function () { void 0 !== u && hr(u), c = 0, i = l = r = u = void 0 }, x.flush = function () { return void 0 === u ? s : m(va()) }, x } var wa = zi((function (t, e) { return Jn(t, 1, e) })), Ma = zi((function (t, e, n) { return Jn(t, as(e) || 0, n) })); function Sa(t, e) { if ("function" != typeof t || null != e && "function" != typeof e) throw new xt(a); var n = function n() { var i = arguments, r = e ? e.apply(this, i) : i[0], o = n.cache; if (o.has(r)) return o.get(r); var a = t.apply(this, i); return n.cache = o.set(r, a) || o, a }; return n.cache = new (Sa.Cache || En), n } function Ca(t) { if ("function" != typeof t) throw new xt(a); return function () { var e = arguments; switch (e.length) { case 0: return !t.call(this); case 1: return !t.call(this, e[0]); case 2: return !t.call(this, e[0], e[1]); case 3: return !t.call(this, e[0], e[1], e[2]) }return !t.apply(this, e) } } Sa.Cache = En; var Oa = lr((function (t, e) { var n = (e = 1 == e.length && Ia(e[0]) ? de(e[0], Te($r())) : de(ai(e, 1), Te($r()))).length; return zi((function (i) { for (var r = -1, o = un(i.length, n); ++r < o;)i[r] = e[r].call(this, i[r]); return ae(t, this, i) })) })), ka = zi((function (t, e) { return Nr(t, 32, void 0, e, Ge(e, Qr(ka))) })), Pa = zi((function (t, e) { return Nr(t, 64, void 0, e, Ge(e, Qr(Pa))) })), Aa = Vr((function (t, e) { return Nr(t, 256, void 0, void 0, void 0, e) })); function La(t, e) { return t === e || t != t && e != e } var Ta = Br(gi), Da = Br((function (t, e) { return t >= e })), ja = _i(function () { return arguments }()) ? _i : function (t) { return Va(t) && Ct.call(t, "callee") && !Zt.call(t, "callee") }, Ia = i.isArray, Ba = te ? Te(te) : function (t) { return Va(t) && di(t) == S }; function Ea(t) { return null != t && Ga(t.length) && !Ya(t) } function Fa(t) { return Va(t) && Ea(t) } var Ra = nn || au, za = ee ? Te(ee) : function (t) { return Va(t) && di(t) == p }; function Na(t) { if (!Va(t)) return !1; var e = di(t); return e == f || "[object DOMException]" == e || "string" == typeof t.message && "string" == typeof t.name && !Ua(t) } function Ya(t) { if (!Wa(t)) return !1; var e = di(t); return e == d || e == g || "[object AsyncFunction]" == e || "[object Proxy]" == e } function Ha(t) { return "number" == typeof t && t == rs(t) } function Ga(t) { return "number" == typeof t && t > -1 && t % 1 == 0 && t <= 9007199254740991 } function Wa(t) { var e = o(t); return null != t && ("object" == e || "function" == e) } function Va(t) { return null != t && "object" == o(t) } var Xa = ne ? Te(ne) : function (t) { return Va(t) && io(t) == v }; function qa(t) { return "number" == typeof t || Va(t) && di(t) == y } function Ua(t) { if (!Va(t) || di(t) != m) return !1; var e = Xt(t); if (null === e) return !0; var n = Ct.call(e, "constructor") && e.constructor; return "function" == typeof n && n instanceof n && St.call(n) == At } var Za = ie ? Te(ie) : function (t) { return Va(t) && di(t) == x }; var Qa = re ? Te(re) : function (t) { return Va(t) && io(t) == _ }; function $a(t) { return "string" == typeof t || !Ia(t) && Va(t) && di(t) == b } function Ka(t) { return "symbol" == o(t) || Va(t) && di(t) == w } var Ja = oe ? Te(oe) : function (t) { return Va(t) && Ga(t.length) && !!Yt[di(t)] }; var ts = Br(ki), es = Br((function (t, e) { return t <= e })); function ns(t) { if (!t) return []; if (Ea(t)) return $a(t) ? qe(t) : mr(t); if (Jt && t[Jt]) return function (t) { for (var e, n = []; !(e = t.next()).done;)n.push(e.value); return n }(t[Jt]()); var e = io(t); return (e == v ? Ye : e == _ ? We : Ls)(t) } function is(t) { return t ? (t = as(t)) === 1 / 0 || t === -1 / 0 ? 17976931348623157e292 * (t < 0 ? -1 : 1) : t == t ? t : 0 : 0 === t ? t : 0 } function rs(t) { var e = is(t), n = e % 1; return e == e ? n ? e - n : e : 0 } function os(t) { return t ? Qn(rs(t), 0, 4294967295) : 0 } function as(t) { if ("number" == typeof t) return t; if (Ka(t)) return NaN; if (Wa(t)) { var e = "function" == typeof t.valueOf ? t.valueOf() : t; t = Wa(e) ? e + "" : e } if ("string" != typeof t) return 0 === t ? t : +t; t = t.replace(Z, ""); var n = at.test(t); return n || ut.test(t) ? Vt(t.slice(2), n ? 2 : 8) : ot.test(t) ? NaN : +t } function ss(t) { return xr(t, ws(t)) } function us(t) { return null == t ? "" : Ki(t) } var ls = br((function (t, e) { if (po(e) || Ea(e)) xr(e, bs(e), t); else for (var n in e) Ct.call(e, n) && Wn(t, n, e[n]) })), cs = br((function (t, e) { xr(e, ws(e), t) })), hs = br((function (t, e, n, i) { xr(e, ws(e), t, i) })), ps = br((function (t, e, n, i) { xr(e, bs(e), t, i) })), fs = Vr(Zn); var ds = zi((function (t, e) { t = vt(t); var n = -1, i = e.length, r = i > 2 ? e[2] : void 0; for (r && uo(e[0], e[1], r) && (i = 1); ++n < i;)for (var o = e[n], a = ws(o), s = -1, u = a.length; ++s < u;) { var l = a[s], c = t[l]; (void 0 === c || La(c, wt[l]) && !Ct.call(t, l)) && (t[l] = o[l]) } return t })), gs = zi((function (t) { return t.push(void 0, Hr), ae(Ss, void 0, t) })); function vs(t, e, n) { var i = null == t ? void 0 : pi(t, e); return void 0 === i ? n : i } function ys(t, e) { return null != t && ro(t, e, yi) } var ms = Lr((function (t, e, n) { null != e && "function" != typeof e.toString && (e = Pt.call(e)), t[e] = n }), Ws(qs)), xs = Lr((function (t, e, n) { null != e && "function" != typeof e.toString && (e = Pt.call(e)), Ct.call(t, e) ? t[e].push(n) : t[e] = [n] }), $r), _s = zi(xi); function bs(t) { return Ea(t) ? zn(t) : Ci(t) } function ws(t) { return Ea(t) ? zn(t, !0) : Oi(t) } var Ms = br((function (t, e, n) { Ti(t, e, n) })), Ss = br((function (t, e, n, i) { Ti(t, e, n, i) })), Cs = Vr((function (t, e) { var n = {}; if (null == t) return n; var i = !1; e = de(e, (function (e) { return e = ur(e, t), i || (i = e.length > 1), e })), xr(t, qr(t), n), i && (n = $n(n, 7, Gr)); for (var r = e.length; r--;)tr(n, e[r]); return n })); var Os = Vr((function (t, e) { return null == t ? {} : function (t, e) { return Ii(t, e, (function (e, n) { return ys(t, n) })) }(t, e) })); function ks(t, e) { if (null == t) return {}; var n = de(qr(t), (function (t) { return [t] })); return e = $r(e), Ii(t, n, (function (t, n) { return e(t, n[0]) })) } var Ps = zr(bs), As = zr(ws); function Ls(t) { return null == t ? [] : De(t, bs(t)) } var Ts = Cr((function (t, e, n) { return e = e.toLowerCase(), t + (n ? Ds(e) : e) })); function Ds(t) { return Ns(us(t).toLowerCase()) } function js(t) { return (t = us(t)) && t.replace(ct, Fe).replace(It, "") } var Is = Cr((function (t, e, n) { return t + (n ? "-" : "") + e.toLowerCase() })), Bs = Cr((function (t, e, n) { return t + (n ? " " : "") + e.toLowerCase() })), Es = Sr("toLowerCase"); var Fs = Cr((function (t, e, n) { return t + (n ? "_" : "") + e.toLowerCase() })); var Rs = Cr((function (t, e, n) { return t + (n ? " " : "") + Ns(e) })); var zs = Cr((function (t, e, n) { return t + (n ? " " : "") + e.toUpperCase() })), Ns = Sr("toUpperCase"); function Ys(t, e, n) { return t = us(t), void 0 === (e = n ? void 0 : e) ? function (t) { return Rt.test(t) }(t) ? function (t) { return t.match(Et) || [] }(t) : function (t) { return t.match(et) || [] }(t) : t.match(e) || [] } var Hs = zi((function (t, e) { try { return ae(t, void 0, e) } catch (t) { return Na(t) ? t : new ft(t) } })), Gs = Vr((function (t, e) { return ue(e, (function (e) { e = ko(e), Un(t, e, xa(t[e], t)) })), t })); function Ws(t) { return function () { return t } } var Vs = Pr(), Xs = Pr(!0); function qs(t) { return t } function Us(t) { return Si("function" == typeof t ? t : $n(t, 1)) } var Zs = zi((function (t, e) { return function (n) { return xi(n, t, e) } })), Qs = zi((function (t, e) { return function (n) { return xi(t, n, e) } })); function $s(t, e, n) { var i = bs(e), r = hi(e, i); null != n || Wa(e) && (r.length || !i.length) || (n = e, e = t, t = this, r = hi(e, bs(e))); var o = !(Wa(n) && "chain" in n && !n.chain), a = Ya(t); return ue(r, (function (n) { var i = e[n]; t[n] = i, a && (t.prototype[n] = function () { var e = this.__chain__; if (o || e) { var n = t(this.__wrapped__), r = n.__actions__ = mr(this.__actions__); return r.push({ func: i, args: arguments, thisArg: t }), n.__chain__ = e, n } return i.apply(t, ge([this.value()], arguments)) }) })), t } function Ks() { } var Js = Dr(de), tu = Dr(ce), eu = Dr(me); function nu(t) { return lo(t) ? Oe(ko(t)) : function (t) { return function (e) { return pi(e, t) } }(t) } var iu = Ir(), ru = Ir(!0); function ou() { return [] } function au() { return !1 } var su = Tr((function (t, e) { return t + e }), 0), uu = Fr("ceil"), lu = Tr((function (t, e) { return t / e }), 1), cu = Fr("floor"); var hu, pu = Tr((function (t, e) { return t * e }), 1), fu = Fr("round"), du = Tr((function (t, e) { return t - e }), 0); return An.after = function (t, e) { if ("function" != typeof e) throw new xt(a); return t = rs(t), function () { if (--t < 1) return e.apply(this, arguments) } }, An.ary = ya, An.assign = ls, An.assignIn = cs, An.assignInWith = hs, An.assignWith = ps, An.at = fs, An.before = ma, An.bind = xa, An.bindAll = Gs, An.bindKey = _a, An.castArray = function () { if (!arguments.length) return []; var t = arguments[0]; return Ia(t) ? t : [t] }, An.chain = na, An.chunk = function (t, e, n) { e = (n ? uo(t, e, n) : void 0 === e) ? 1 : sn(rs(e), 0); var r = null == t ? 0 : t.length; if (!r || e < 1) return []; for (var o = 0, a = 0, s = i(Je(r / e)); o < r;)s[a++] = Xi(t, o, o += e); return s }, An.compact = function (t) { for (var e = -1, n = null == t ? 0 : t.length, i = 0, r = []; ++e < n;) { var o = t[e]; o && (r[i++] = o) } return r }, An.concat = function () { var t = arguments.length; if (!t) return []; for (var e = i(t - 1), n = arguments[0], r = t; r--;)e[r - 1] = arguments[r]; return ge(Ia(n) ? mr(n) : [n], ai(e, 1)) }, An.cond = function (t) { var e = null == t ? 0 : t.length, n = $r(); return t = e ? de(t, (function (t) { if ("function" != typeof t[1]) throw new xt(a); return [n(t[0]), t[1]] })) : [], zi((function (n) { for (var i = -1; ++i < e;) { var r = t[i]; if (ae(r[0], this, n)) return ae(r[1], this, n) } })) }, An.conforms = function (t) { return function (t) { var e = bs(t); return function (n) { return Kn(n, t, e) } }($n(t, 1)) }, An.constant = Ws, An.countBy = oa, An.create = function (t, e) { var n = Ln(t); return null == e ? n : qn(n, e) }, An.curry = function t(e, n, i) { var r = Nr(e, 8, void 0, void 0, void 0, void 0, void 0, n = i ? void 0 : n); return r.placeholder = t.placeholder, r }, An.curryRight = function t(e, n, i) { var r = Nr(e, 16, void 0, void 0, void 0, void 0, void 0, n = i ? void 0 : n); return r.placeholder = t.placeholder, r }, An.debounce = ba, An.defaults = ds, An.defaultsDeep = gs, An.defer = wa, An.delay = Ma, An.difference = Lo, An.differenceBy = To, An.differenceWith = Do, An.drop = function (t, e, n) { var i = null == t ? 0 : t.length; return i ? Xi(t, (e = n || void 0 === e ? 1 : rs(e)) < 0 ? 0 : e, i) : [] }, An.dropRight = function (t, e, n) { var i = null == t ? 0 : t.length; return i ? Xi(t, 0, (e = i - (e = n || void 0 === e ? 1 : rs(e))) < 0 ? 0 : e) : [] }, An.dropRightWhile = function (t, e) { return t && t.length ? nr(t, $r(e, 3), !0, !0) : [] }, An.dropWhile = function (t, e) { return t && t.length ? nr(t, $r(e, 3), !0) : [] }, An.fill = function (t, e, n, i) { var r = null == t ? 0 : t.length; return r ? (n && "number" != typeof n && uo(t, e, n) && (n = 0, i = r), function (t, e, n, i) { var r = t.length; for ((n = rs(n)) < 0 && (n = -n > r ? 0 : r + n), (i = void 0 === i || i > r ? r : rs(i)) < 0 && (i += r), i = n > i ? 0 : os(i); n < i;)t[n++] = e; return t }(t, e, n, i)) : [] }, An.filter = function (t, e) { return (Ia(t) ? he : oi)(t, $r(e, 3)) }, An.flatMap = function (t, e) { return ai(fa(t, e), 1) }, An.flatMapDeep = function (t, e) { return ai(fa(t, e), 1 / 0) }, An.flatMapDepth = function (t, e, n) { return n = void 0 === n ? 1 : rs(n), ai(fa(t, e), n) }, An.flatten = Bo, An.flattenDeep = function (t) { return (null == t ? 0 : t.length) ? ai(t, 1 / 0) : [] }, An.flattenDepth = function (t, e) { return (null == t ? 0 : t.length) ? ai(t, e = void 0 === e ? 1 : rs(e)) : [] }, An.flip = function (t) { return Nr(t, 512) }, An.flow = Vs, An.flowRight = Xs, An.fromPairs = function (t) { for (var e = -1, n = null == t ? 0 : t.length, i = {}; ++e < n;) { var r = t[e]; i[r[0]] = r[1] } return i }, An.functions = function (t) { return null == t ? [] : hi(t, bs(t)) }, An.functionsIn = function (t) { return null == t ? [] : hi(t, ws(t)) }, An.groupBy = ca, An.initial = function (t) { return (null == t ? 0 : t.length) ? Xi(t, 0, -1) : [] }, An.intersection = Fo, An.intersectionBy = Ro, An.intersectionWith = zo, An.invert = ms, An.invertBy = xs, An.invokeMap = ha, An.iteratee = Us, An.keyBy = pa, An.keys = bs, An.keysIn = ws, An.map = fa, An.mapKeys = function (t, e) { var n = {}; return e = $r(e, 3), li(t, (function (t, i, r) { Un(n, e(t, i, r), t) })), n }, An.mapValues = function (t, e) { var n = {}; return e = $r(e, 3), li(t, (function (t, i, r) { Un(n, i, e(t, i, r)) })), n }, An.matches = function (t) { return Ai($n(t, 1)) }, An.matchesProperty = function (t, e) { return Li(t, $n(e, 1)) }, An.memoize = Sa, An.merge = Ms, An.mergeWith = Ss, An.method = Zs, An.methodOf = Qs, An.mixin = $s, An.negate = Ca, An.nthArg = function (t) { return t = rs(t), zi((function (e) { return Di(e, t) })) }, An.omit = Cs, An.omitBy = function (t, e) { return ks(t, Ca($r(e))) }, An.once = function (t) { return ma(2, t) }, An.orderBy = function (t, e, n, i) { return null == t ? [] : (Ia(e) || (e = null == e ? [] : [e]), Ia(n = i ? void 0 : n) || (n = null == n ? [] : [n]), ji(t, e, n)) }, An.over = Js, An.overArgs = Oa, An.overEvery = tu, An.overSome = eu, An.partial = ka, An.partialRight = Pa, An.partition = da, An.pick = Os, An.pickBy = ks, An.property = nu, An.propertyOf = function (t) { return function (e) { return null == t ? void 0 : pi(t, e) } }, An.pull = Yo, An.pullAll = Ho, An.pullAllBy = function (t, e, n) { return t && t.length && e && e.length ? Bi(t, e, $r(n, 2)) : t }, An.pullAllWith = function (t, e, n) { return t && t.length && e && e.length ? Bi(t, e, void 0, n) : t }, An.pullAt = Go, An.range = iu, An.rangeRight = ru, An.rearg = Aa, An.reject = function (t, e) { return (Ia(t) ? he : oi)(t, Ca($r(e, 3))) }, An.remove = function (t, e) { var n = []; if (!t || !t.length) return n; var i = -1, r = [], o = t.length; for (e = $r(e, 3); ++i < o;) { var a = t[i]; e(a, i, t) && (n.push(a), r.push(i)) } return Ei(t, r), n }, An.rest = function (t, e) { if ("function" != typeof t) throw new xt(a); return zi(t, e = void 0 === e ? e : rs(e)) }, An.reverse = Wo, An.sampleSize = function (t, e, n) { return e = (n ? uo(t, e, n) : void 0 === e) ? 1 : rs(e), (Ia(t) ? Yn : Yi)(t, e) }, An.set = function (t, e, n) { return null == t ? t : Hi(t, e, n) }, An.setWith = function (t, e, n, i) { return i = "function" == typeof i ? i : void 0, null == t ? t : Hi(t, e, n, i) }, An.shuffle = function (t) { return (Ia(t) ? Hn : Vi)(t) }, An.slice = function (t, e, n) { var i = null == t ? 0 : t.length; return i ? (n && "number" != typeof n && uo(t, e, n) ? (e = 0, n = i) : (e = null == e ? 0 : rs(e), n = void 0 === n ? i : rs(n)), Xi(t, e, n)) : [] }, An.sortBy = ga, An.sortedUniq = function (t) { return t && t.length ? Qi(t) : [] }, An.sortedUniqBy = function (t, e) { return t && t.length ? Qi(t, $r(e, 2)) : [] }, An.split = function (t, e, n) { return n && "number" != typeof n && uo(t, e, n) && (e = n = void 0), (n = void 0 === n ? 4294967295 : n >>> 0) ? (t = us(t)) && ("string" == typeof e || null != e && !Za(e)) && !(e = Ki(e)) && Ne(t) ? cr(qe(t), 0, n) : t.split(e, n) : [] }, An.spread = function (t, e) { if ("function" != typeof t) throw new xt(a); return e = null == e ? 0 : sn(rs(e), 0), zi((function (n) { var i = n[e], r = cr(n, 0, e); return i && ge(r, i), ae(t, this, r) })) }, An.tail = function (t) { var e = null == t ? 0 : t.length; return e ? Xi(t, 1, e) : [] }, An.take = function (t, e, n) { return t && t.length ? Xi(t, 0, (e = n || void 0 === e ? 1 : rs(e)) < 0 ? 0 : e) : [] }, An.takeRight = function (t, e, n) { var i = null == t ? 0 : t.length; return i ? Xi(t, (e = i - (e = n || void 0 === e ? 1 : rs(e))) < 0 ? 0 : e, i) : [] }, An.takeRightWhile = function (t, e) { return t && t.length ? nr(t, $r(e, 3), !1, !0) : [] }, An.takeWhile = function (t, e) { return t && t.length ? nr(t, $r(e, 3)) : [] }, An.tap = function (t, e) { return e(t), t }, An.throttle = function (t, e, n) { var i = !0, r = !0; if ("function" != typeof t) throw new xt(a); return Wa(n) && (i = "leading" in n ? !!n.leading : i, r = "trailing" in n ? !!n.trailing : r), ba(t, e, { leading: i, maxWait: e, trailing: r }) }, An.thru = ia, An.toArray = ns, An.toPairs = Ps, An.toPairsIn = As, An.toPath = function (t) { return Ia(t) ? de(t, ko) : Ka(t) ? [t] : mr(Oo(us(t))) }, An.toPlainObject = ss, An.transform = function (t, e, n) { var i = Ia(t), r = i || Ra(t) || Ja(t); if (e = $r(e, 4), null == n) { var o = t && t.constructor; n = r ? i ? new o : [] : Wa(t) && Ya(o) ? Ln(Xt(t)) : {} } return (r ? ue : li)(t, (function (t, i, r) { return e(n, t, i, r) })), n }, An.unary = function (t) { return ya(t, 1) }, An.union = Vo, An.unionBy = Xo, An.unionWith = qo, An.uniq = function (t) { return t && t.length ? Ji(t) : [] }, An.uniqBy = function (t, e) { return t && t.length ? Ji(t, $r(e, 2)) : [] }, An.uniqWith = function (t, e) { return e = "function" == typeof e ? e : void 0, t && t.length ? Ji(t, void 0, e) : [] }, An.unset = function (t, e) { return null == t || tr(t, e) }, An.unzip = Uo, An.unzipWith = Zo, An.update = function (t, e, n) { return null == t ? t : er(t, e, sr(n)) }, An.updateWith = function (t, e, n, i) { return i = "function" == typeof i ? i : void 0, null == t ? t : er(t, e, sr(n), i) }, An.values = Ls, An.valuesIn = function (t) { return null == t ? [] : De(t, ws(t)) }, An.without = Qo, An.words = Ys, An.wrap = function (t, e) { return ka(sr(e), t) }, An.xor = $o, An.xorBy = Ko, An.xorWith = Jo, An.zip = ta, An.zipObject = function (t, e) { return or(t || [], e || [], Wn) }, An.zipObjectDeep = function (t, e) { return or(t || [], e || [], Hi) }, An.zipWith = ea, An.entries = Ps, An.entriesIn = As, An.extend = cs, An.extendWith = hs, $s(An, An), An.add = su, An.attempt = Hs, An.camelCase = Ts, An.capitalize = Ds, An.ceil = uu, An.clamp = function (t, e, n) { return void 0 === n && (n = e, e = void 0), void 0 !== n && (n = (n = as(n)) == n ? n : 0), void 0 !== e && (e = (e = as(e)) == e ? e : 0), Qn(as(t), e, n) }, An.clone = function (t) { return $n(t, 4) }, An.cloneDeep = function (t) { return $n(t, 5) }, An.cloneDeepWith = function (t, e) { return $n(t, 5, e = "function" == typeof e ? e : void 0) }, An.cloneWith = function (t, e) { return $n(t, 4, e = "function" == typeof e ? e : void 0) }, An.conformsTo = function (t, e) { return null == e || Kn(t, e, bs(e)) }, An.deburr = js, An.defaultTo = function (t, e) { return null == t || t != t ? e : t }, An.divide = lu, An.endsWith = function (t, e, n) { t = us(t), e = Ki(e); var i = t.length, r = n = void 0 === n ? i : Qn(rs(n), 0, i); return (n -= e.length) >= 0 && t.slice(n, r) == e }, An.eq = La, An.escape = function (t) { return (t = us(t)) && N.test(t) ? t.replace(R, Re) : t }, An.escapeRegExp = function (t) { return (t = us(t)) && U.test(t) ? t.replace(q, "\\$&") : t }, An.every = function (t, e, n) { var i = Ia(t) ? ce : ii; return n && uo(t, e, n) && (e = void 0), i(t, $r(e, 3)) }, An.find = aa, An.findIndex = jo, An.findKey = function (t, e) { return _e(t, $r(e, 3), li) }, An.findLast = sa, An.findLastIndex = Io, An.findLastKey = function (t, e) { return _e(t, $r(e, 3), ci) }, An.floor = cu, An.forEach = ua, An.forEachRight = la, An.forIn = function (t, e) { return null == t ? t : si(t, $r(e, 3), ws) }, An.forInRight = function (t, e) { return null == t ? t : ui(t, $r(e, 3), ws) }, An.forOwn = function (t, e) { return t && li(t, $r(e, 3)) }, An.forOwnRight = function (t, e) { return t && ci(t, $r(e, 3)) }, An.get = vs, An.gt = Ta, An.gte = Da, An.has = function (t, e) { return null != t && ro(t, e, vi) }, An.hasIn = ys, An.head = Eo, An.identity = qs, An.includes = function (t, e, n, i) { t = Ea(t) ? t : Ls(t), n = n && !i ? rs(n) : 0; var r = t.length; return n < 0 && (n = sn(r + n, 0)), $a(t) ? n <= r && t.indexOf(e, n) > -1 : !!r && we(t, e, n) > -1 }, An.indexOf = function (t, e, n) { var i = null == t ? 0 : t.length; if (!i) return -1; var r = null == n ? 0 : rs(n); return r < 0 && (r = sn(i + r, 0)), we(t, e, r) }, An.inRange = function (t, e, n) { return e = is(e), void 0 === n ? (n = e, e = 0) : n = is(n), function (t, e, n) { return t >= un(e, n) && t < sn(e, n) }(t = as(t), e, n) }, An.invoke = _s, An.isArguments = ja, An.isArray = Ia, An.isArrayBuffer = Ba, An.isArrayLike = Ea, An.isArrayLikeObject = Fa, An.isBoolean = function (t) { return !0 === t || !1 === t || Va(t) && di(t) == h }, An.isBuffer = Ra, An.isDate = za, An.isElement = function (t) { return Va(t) && 1 === t.nodeType && !Ua(t) }, An.isEmpty = function (t) { if (null == t) return !0; if (Ea(t) && (Ia(t) || "string" == typeof t || "function" == typeof t.splice || Ra(t) || Ja(t) || ja(t))) return !t.length; var e = io(t); if (e == v || e == _) return !t.size; if (po(t)) return !Ci(t).length; for (var n in t) if (Ct.call(t, n)) return !1; return !0 }, An.isEqual = function (t, e) { return bi(t, e) }, An.isEqualWith = function (t, e, n) { var i = (n = "function" == typeof n ? n : void 0) ? n(t, e) : void 0; return void 0 === i ? bi(t, e, void 0, n) : !!i }, An.isError = Na, An.isFinite = function (t) { return "number" == typeof t && rn(t) }, An.isFunction = Ya, An.isInteger = Ha, An.isLength = Ga, An.isMap = Xa, An.isMatch = function (t, e) { return t === e || wi(t, e, Jr(e)) }, An.isMatchWith = function (t, e, n) { return n = "function" == typeof n ? n : void 0, wi(t, e, Jr(e), n) }, An.isNaN = function (t) { return qa(t) && t != +t }, An.isNative = function (t) { if (ho(t)) throw new ft("Unsupported core-js use. Try https://npms.io/search?q=ponyfill."); return Mi(t) }, An.isNil = function (t) { return null == t }, An.isNull = function (t) { return null === t }, An.isNumber = qa, An.isObject = Wa, An.isObjectLike = Va, An.isPlainObject = Ua, An.isRegExp = Za, An.isSafeInteger = function (t) { return Ha(t) && t >= -9007199254740991 && t <= 9007199254740991 }, An.isSet = Qa, An.isString = $a, An.isSymbol = Ka, An.isTypedArray = Ja, An.isUndefined = function (t) { return void 0 === t }, An.isWeakMap = function (t) { return Va(t) && io(t) == M }, An.isWeakSet = function (t) { return Va(t) && "[object WeakSet]" == di(t) }, An.join = function (t, e) { return null == t ? "" : on.call(t, e) }, An.kebabCase = Is, An.last = No, An.lastIndexOf = function (t, e, n) { var i = null == t ? 0 : t.length; if (!i) return -1; var r = i; return void 0 !== n && (r = (r = rs(n)) < 0 ? sn(i + r, 0) : un(r, i - 1)), e == e ? function (t, e, n) { for (var i = n + 1; i--;)if (t[i] === e) return i; return i }(t, e, r) : be(t, Se, r, !0) }, An.lowerCase = Bs, An.lowerFirst = Es, An.lt = ts, An.lte = es, An.max = function (t) { return t && t.length ? ri(t, qs, gi) : void 0 }, An.maxBy = function (t, e) { return t && t.length ? ri(t, $r(e, 2), gi) : void 0 }, An.mean = function (t) { return Ce(t, qs) }, An.meanBy = function (t, e) { return Ce(t, $r(e, 2)) }, An.min = function (t) { return t && t.length ? ri(t, qs, ki) : void 0 }, An.minBy = function (t, e) { return t && t.length ? ri(t, $r(e, 2), ki) : void 0 }, An.stubArray = ou, An.stubFalse = au, An.stubObject = function () { return {} }, An.stubString = function () { return "" }, An.stubTrue = function () { return !0 }, An.multiply = pu, An.nth = function (t, e) { return t && t.length ? Di(t, rs(e)) : void 0 }, An.noConflict = function () { return Ut._ === this && (Ut._ = Lt), this }, An.noop = Ks, An.now = va, An.pad = function (t, e, n) { t = us(t); var i = (e = rs(e)) ? Xe(t) : 0; if (!e || i >= e) return t; var r = (e - i) / 2; return jr(tn(r), n) + t + jr(Je(r), n) }, An.padEnd = function (t, e, n) { t = us(t); var i = (e = rs(e)) ? Xe(t) : 0; return e && i < e ? t + jr(e - i, n) : t }, An.padStart = function (t, e, n) { t = us(t); var i = (e = rs(e)) ? Xe(t) : 0; return e && i < e ? jr(e - i, n) + t : t }, An.parseInt = function (t, e, n) { return n || null == e ? e = 0 : e && (e = +e), cn(us(t).replace(Q, ""), e || 0) }, An.random = function (t, e, n) { if (n && "boolean" != typeof n && uo(t, e, n) && (e = n = void 0), void 0 === n && ("boolean" == typeof e ? (n = e, e = void 0) : "boolean" == typeof t && (n = t, t = void 0)), void 0 === t && void 0 === e ? (t = 0, e = 1) : (t = is(t), void 0 === e ? (e = t, t = 0) : e = is(e)), t > e) { var i = t; t = e, e = i } if (n || t % 1 || e % 1) { var r = hn(); return un(t + r * (e - t + Wt("1e-" + ((r + "").length - 1))), e) } return Fi(t, e) }, An.reduce = function (t, e, n) { var i = Ia(t) ? ve : Pe, r = arguments.length < 3; return i(t, $r(e, 4), n, r, ei) }, An.reduceRight = function (t, e, n) { var i = Ia(t) ? ye : Pe, r = arguments.length < 3; return i(t, $r(e, 4), n, r, ni) }, An.repeat = function (t, e, n) { return e = (n ? uo(t, e, n) : void 0 === e) ? 1 : rs(e), Ri(us(t), e) }, An.replace = function () { var t = arguments, e = us(t[0]); return t.length < 3 ? e : e.replace(t[1], t[2]) }, An.result = function (t, e, n) { var i = -1, r = (e = ur(e, t)).length; for (r || (r = 1, t = void 0); ++i < r;) { var o = null == t ? void 0 : t[ko(e[i])]; void 0 === o && (i = r, o = n), t = Ya(o) ? o.call(t) : o } return t }, An.round = fu, An.runInContext = t, An.sample = function (t) { return (Ia(t) ? Nn : Ni)(t) }, An.size = function (t) { if (null == t) return 0; if (Ea(t)) return $a(t) ? Xe(t) : t.length; var e = io(t); return e == v || e == _ ? t.size : Ci(t).length }, An.snakeCase = Fs, An.some = function (t, e, n) { var i = Ia(t) ? me : qi; return n && uo(t, e, n) && (e = void 0), i(t, $r(e, 3)) }, An.sortedIndex = function (t, e) { return Ui(t, e) }, An.sortedIndexBy = function (t, e, n) { return Zi(t, e, $r(n, 2)) }, An.sortedIndexOf = function (t, e) { var n = null == t ? 0 : t.length; if (n) { var i = Ui(t, e); if (i < n && La(t[i], e)) return i } return -1 }, An.sortedLastIndex = function (t, e) { return Ui(t, e, !0) }, An.sortedLastIndexBy = function (t, e, n) { return Zi(t, e, $r(n, 2), !0) }, An.sortedLastIndexOf = function (t, e) { if (null == t ? 0 : t.length) { var n = Ui(t, e, !0) - 1; if (La(t[n], e)) return n } return -1 }, An.startCase = Rs, An.startsWith = function (t, e, n) { return t = us(t), n = null == n ? 0 : Qn(rs(n), 0, t.length), e = Ki(e), t.slice(n, n + e.length) == e }, An.subtract = du, An.sum = function (t) { return t && t.length ? Ae(t, qs) : 0 }, An.sumBy = function (t, e) { return t && t.length ? Ae(t, $r(e, 2)) : 0 }, An.template = function (t, e, n) { var i = An.templateSettings; n && uo(t, e, n) && (e = void 0), t = us(t), e = hs({}, e, i, Yr); var r, o, a = hs({}, e.imports, i.imports, Yr), s = bs(a), u = De(a, s), l = 0, c = e.interpolate || ht, h = "__p += '", p = yt((e.escape || ht).source + "|" + c.source + "|" + (c === G ? it : ht).source + "|" + (e.evaluate || ht).source + "|$", "g"), f = "//# sourceURL=" + (Ct.call(e, "sourceURL") ? (e.sourceURL + "").replace(/[\r\n]/g, " ") : "lodash.templateSources[" + ++Nt + "]") + "\n"; t.replace(p, (function (e, n, i, a, s, u) { return i || (i = a), h += t.slice(l, u).replace(pt, ze), n && (r = !0, h += "' +\n__e(" + n + ") +\n'"), s && (o = !0, h += "';\n" + s + ";\n__p += '"), i && (h += "' +\n((__t = (" + i + ")) == null ? '' : __t) +\n'"), l = u + e.length, e })), h += "';\n"; var d = Ct.call(e, "variable") && e.variable; d || (h = "with (obj) {\n" + h + "\n}\n"), h = (o ? h.replace(I, "") : h).replace(B, "$1").replace(E, "$1;"), h = "function(" + (d || "obj") + ") {\n" + (d ? "" : "obj || (obj = {});\n") + "var __t, __p = ''" + (r ? ", __e = _.escape" : "") + (o ? ", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n" : ";\n") + h + "return __p\n}"; var g = Hs((function () { return dt(s, f + "return " + h).apply(void 0, u) })); if (g.source = h, Na(g)) throw g; return g }, An.times = function (t, e) { if ((t = rs(t)) < 1 || t > 9007199254740991) return []; var n = 4294967295, i = un(t, 4294967295); t -= 4294967295; for (var r = Le(i, e = $r(e)); ++n < t;)e(n); return r }, An.toFinite = is, An.toInteger = rs, An.toLength = os, An.toLower = function (t) { return us(t).toLowerCase() }, An.toNumber = as, An.toSafeInteger = function (t) { return t ? Qn(rs(t), -9007199254740991, 9007199254740991) : 0 === t ? t : 0 }, An.toString = us, An.toUpper = function (t) { return us(t).toUpperCase() }, An.trim = function (t, e, n) { if ((t = us(t)) && (n || void 0 === e)) return t.replace(Z, ""); if (!t || !(e = Ki(e))) return t; var i = qe(t), r = qe(e); return cr(i, Ie(i, r), Be(i, r) + 1).join("") }, An.trimEnd = function (t, e, n) { if ((t = us(t)) && (n || void 0 === e)) return t.replace($, ""); if (!t || !(e = Ki(e))) return t; var i = qe(t); return cr(i, 0, Be(i, qe(e)) + 1).join("") }, An.trimStart = function (t, e, n) { if ((t = us(t)) && (n || void 0 === e)) return t.replace(Q, ""); if (!t || !(e = Ki(e))) return t; var i = qe(t); return cr(i, Ie(i, qe(e))).join("") }, An.truncate = function (t, e) { var n = 30, i = "..."; if (Wa(e)) { var r = "separator" in e ? e.separator : r; n = "length" in e ? rs(e.length) : n, i = "omission" in e ? Ki(e.omission) : i } var o = (t = us(t)).length; if (Ne(t)) { var a = qe(t); o = a.length } if (n >= o) return t; var s = n - Xe(i); if (s < 1) return i; var u = a ? cr(a, 0, s).join("") : t.slice(0, s); if (void 0 === r) return u + i; if (a && (s += u.length - s), Za(r)) { if (t.slice(s).search(r)) { var l, c = u; for (r.global || (r = yt(r.source, us(rt.exec(r)) + "g")), r.lastIndex = 0; l = r.exec(c);)var h = l.index; u = u.slice(0, void 0 === h ? s : h) } } else if (t.indexOf(Ki(r), s) != s) { var p = u.lastIndexOf(r); p > -1 && (u = u.slice(0, p)) } return u + i }, An.unescape = function (t) { return (t = us(t)) && z.test(t) ? t.replace(F, Ue) : t }, An.uniqueId = function (t) { var e = ++Ot; return us(t) + e }, An.upperCase = zs, An.upperFirst = Ns, An.each = ua, An.eachRight = la, An.first = Eo, $s(An, (hu = {}, li(An, (function (t, e) { Ct.call(An.prototype, e) || (hu[e] = t) })), hu), { chain: !1 }), An.VERSION = "4.17.15", ue(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], (function (t) { An[t].placeholder = An })), ue(["drop", "take"], (function (t, e) { jn.prototype[t] = function (n) { n = void 0 === n ? 1 : sn(rs(n), 0); var i = this.__filtered__ && !e ? new jn(this) : this.clone(); return i.__filtered__ ? i.__takeCount__ = un(n, i.__takeCount__) : i.__views__.push({ size: un(n, 4294967295), type: t + (i.__dir__ < 0 ? "Right" : "") }), i }, jn.prototype[t + "Right"] = function (e) { return this.reverse()[t](e).reverse() } })), ue(["filter", "map", "takeWhile"], (function (t, e) { var n = e + 1, i = 1 == n || 3 == n; jn.prototype[t] = function (t) { var e = this.clone(); return e.__iteratees__.push({ iteratee: $r(t, 3), type: n }), e.__filtered__ = e.__filtered__ || i, e } })), ue(["head", "last"], (function (t, e) { var n = "take" + (e ? "Right" : ""); jn.prototype[t] = function () { return this[n](1).value()[0] } })), ue(["initial", "tail"], (function (t, e) { var n = "drop" + (e ? "" : "Right"); jn.prototype[t] = function () { return this.__filtered__ ? new jn(this) : this[n](1) } })), jn.prototype.compact = function () { return this.filter(qs) }, jn.prototype.find = function (t) { return this.filter(t).head() }, jn.prototype.findLast = function (t) { return this.reverse().find(t) }, jn.prototype.invokeMap = zi((function (t, e) { return "function" == typeof t ? new jn(this) : this.map((function (n) { return xi(n, t, e) })) })), jn.prototype.reject = function (t) { return this.filter(Ca($r(t))) }, jn.prototype.slice = function (t, e) { t = rs(t); var n = this; return n.__filtered__ && (t > 0 || e < 0) ? new jn(n) : (t < 0 ? n = n.takeRight(-t) : t && (n = n.drop(t)), void 0 !== e && (n = (e = rs(e)) < 0 ? n.dropRight(-e) : n.take(e - t)), n) }, jn.prototype.takeRightWhile = function (t) { return this.reverse().takeWhile(t).reverse() }, jn.prototype.toArray = function () { return this.take(4294967295) }, li(jn.prototype, (function (t, e) { var n = /^(?:filter|find|map|reject)|While$/.test(e), i = /^(?:head|last)$/.test(e), r = An[i ? "take" + ("last" == e ? "Right" : "") : e], o = i || /^find/.test(e); r && (An.prototype[e] = function () { var e = this.__wrapped__, a = i ? [1] : arguments, s = e instanceof jn, u = a[0], l = s || Ia(e), c = function (t) { var e = r.apply(An, ge([t], a)); return i && h ? e[0] : e }; l && n && "function" == typeof u && 1 != u.length && (s = l = !1); var h = this.__chain__, p = !!this.__actions__.length, f = o && !h, d = s && !p; if (!o && l) { e = d ? e : new jn(this); var g = t.apply(e, a); return g.__actions__.push({ func: ia, args: [c], thisArg: void 0 }), new Dn(g, h) } return f && d ? t.apply(this, a) : (g = this.thru(c), f ? i ? g.value()[0] : g.value() : g) }) })), ue(["pop", "push", "shift", "sort", "splice", "unshift"], (function (t) { var e = _t[t], n = /^(?:push|sort|unshift)$/.test(t) ? "tap" : "thru", i = /^(?:pop|shift)$/.test(t); An.prototype[t] = function () { var t = arguments; if (i && !this.__chain__) { var r = this.value(); return e.apply(Ia(r) ? r : [], t) } return this[n]((function (n) { return e.apply(Ia(n) ? n : [], t) })) } })), li(jn.prototype, (function (t, e) { var n = An[e]; if (n) { var i = n.name + ""; Ct.call(_n, i) || (_n[i] = []), _n[i].push({ name: e, func: n }) } })), _n[Ar(void 0, 2).name] = [{ name: "wrapper", func: void 0 }], jn.prototype.clone = function () { var t = new jn(this.__wrapped__); return t.__actions__ = mr(this.__actions__), t.__dir__ = this.__dir__, t.__filtered__ = this.__filtered__, t.__iteratees__ = mr(this.__iteratees__), t.__takeCount__ = this.__takeCount__, t.__views__ = mr(this.__views__), t }, jn.prototype.reverse = function () { if (this.__filtered__) { var t = new jn(this); t.__dir__ = -1, t.__filtered__ = !0 } else (t = this.clone()).__dir__ *= -1; return t }, jn.prototype.value = function () { var t = this.__wrapped__.value(), e = this.__dir__, n = Ia(t), i = e < 0, r = n ? t.length : 0, o = function (t, e, n) { var i = -1, r = n.length; for (; ++i < r;) { var o = n[i], a = o.size; switch (o.type) { case "drop": t += a; break; case "dropRight": e -= a; break; case "take": e = un(e, t + a); break; case "takeRight": t = sn(t, e - a) } } return { start: t, end: e } }(0, r, this.__views__), a = o.start, s = o.end, u = s - a, l = i ? s : a - 1, c = this.__iteratees__, h = c.length, p = 0, f = un(u, this.__takeCount__); if (!n || !i && r == u && f == u) return ir(t, this.__actions__); var d = []; t: for (; u-- && p < f;) { for (var g = -1, v = t[l += e]; ++g < h;) { var y = c[g], m = y.iteratee, x = y.type, _ = m(v); if (2 == x) v = _; else if (!_) { if (1 == x) continue t; break t } } d[p++] = v } return d }, An.prototype.at = ra, An.prototype.chain = function () { return na(this) }, An.prototype.commit = function () { return new Dn(this.value(), this.__chain__) }, An.prototype.next = function () { void 0 === this.__values__ && (this.__values__ = ns(this.value())); var t = this.__index__ >= this.__values__.length; return { done: t, value: t ? void 0 : this.__values__[this.__index__++] } }, An.prototype.plant = function (t) { for (var e, n = this; n instanceof Tn;) { var i = Ao(n); i.__index__ = 0, i.__values__ = void 0, e ? r.__wrapped__ = i : e = i; var r = i; n = n.__wrapped__ } return r.__wrapped__ = t, e }, An.prototype.reverse = function () { var t = this.__wrapped__; if (t instanceof jn) { var e = t; return this.__actions__.length && (e = new jn(this)), (e = e.reverse()).__actions__.push({ func: ia, args: [Wo], thisArg: void 0 }), new Dn(e, this.__chain__) } return this.thru(Wo) }, An.prototype.toJSON = An.prototype.valueOf = An.prototype.value = function () { return ir(this.__wrapped__, this.__actions__) }, An.prototype.first = An.prototype.head, Jt && (An.prototype[Jt] = function () { return this }), An }(); "object" == o(n(98)) && n(98) ? (Ut._ = Ze, void 0 === (r = function () { return Ze }.call(e, n, e, i)) || (i.exports = r)) : Qt ? ((Qt.exports = Ze)._ = Ze, Zt._ = Ze) : Ut._ = Ze }).call(this)
        }).call(this, n(75), n(58)(t))
    }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = i.__importStar(n(0)), a = n(34), s = i.__importDefault(n(54)), u = n(96), l = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.adjustPosition = function (t, e, n, i) { this._adjustLabelPosition(t, e, n, i) }, e.prototype.adjustLines = function (t, e, n, i, r) { var a = this; o.each(t, (function (t, e) { var o = n[e], s = a._getLinePath(t, i, r); o.attr("path", s), o.set("visible", t.get("visible")) })) }, e.prototype.getOffsetOfLabel = function () { var t = this.get("labelOptions").offset; return void 0 === t ? u.DEFAULT_OFFSET : t <= u.CROOK_DISTANCE ? 1 : t - u.CROOK_DISTANCE }, e.prototype._adjustLabelPosition = function (t, e, n, i) { var r = this, o = n.getCenter(), s = n.getRadius(), u = this.getCrookDistance(); t.forEach((function (t, n) { var i = e[n], l = r.getOffsetOfLabel(), c = a.getEndPoint(o, i.angle, s + l), h = "left" === i.textAlign; t.attr("x", c.x + (h ? 2 * u : 2 * -u)), t.attr("y", c.y) })) }, e.prototype._getLinePath = function (t, e, n) { var i = this.getLabelOptions(), r = !!i.line && i.line.smooth, o = this.anchors.find((function (e) { return e.id === t.id })), s = o.angle, u = e.getCenter(), l = e.getRadius(), c = a.getEndPoint(u, s, l), h = this.getOffsetOfLabel(), p = "left" === o.textAlign, f = a.getEndPoint(u, s, l + h), d = this.getCrookDistance() * (p ? 1 : -1), g = { x: t.attr("x") - d, y: t.attr("y") }, v = ""; return v = ["M " + c.x, c.y + " Q" + f.x, f.y + " " + g.x, g.y].join(","), !1 === r && (v = ["M " + c.x, c.y + " L" + (f.x - d), g.y + " H" + g.x].join(",")), v }, e.prototype.getDefaultOffset = function (e) { var n = t.prototype.getDefaultOffset.call(this, e); return void 0 === n ? u.DEFAULT_OFFSET : n <= u.CROOK_DISTANCE ? 1 : n - u.CROOK_DISTANCE }, e.prototype.getCrookDistance = function () { var t = this.get("labelOptions").offset; return t < 2 * u.CROOK_DISTANCE ? t / 2 : u.CROOK_DISTANCE }, e }(s.default); r.registerElementLabels("outer-center", l) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(10); e.EVENT_MAP = r.EVENT_MAP, e.onEvent = r.onEvent; i.assign(r.EVENT_MAP, { onPieClick: "interval:click", onPieDblclick: "interval:dblclick", onPieMousemove: "interval:mousemove", onPieMouseenter: "interval:mouseenter", onPieMouseleave: "interval:mouseleave", onPieMousedown: "interval:mousedown", onPieMouseup: "interval:mouseup", onPieContextmenu: "interval:contextmenu" }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); n(20).registerTheme("pie", { columnStyle: { normal: {}, active: function (t) { return { opacity: .5 * (t.opacity || 1) } }, disable: function (t) { return { opacity: .5 * (t.opacity || 1) } }, selected: { lineWidth: 1, stroke: "black" } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(241)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "ring", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(95)), s = i.__importDefault(n(242)); n(245); var u = i.__importStar(n(246)), l = i.__importStar(n(247)), c = { ring: "interval" }, h = { interval: "ring" }, p = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "ring", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { radius: .8, innerRadius: .64, statistic: { visible: !0, triggerOn: "mouseenter", triggerOff: "mouseleave" } }) }, e.prototype.getOptions = function (e) { var n = t.prototype.getOptions.call(this, e), i = this.constructor.getDefaultOptions(); return r.deepMix({}, n, i, e) }, e.prototype.beforeInit = function () { t.prototype.beforeInit.call(this), e.centralId++ , this.statisticClass = "statisticClassId" + e.centralId; var n = this.options; n.responsive && "auto" !== n.padding && this.applyResponsive("preRender") }, e.prototype.afterInit = function () { var e = this; if (t.prototype.afterInit.call(this), this.statistic && this.statistic.visible && this.statistic.triggerOn) { var n = this.statistic.triggerOn; this.view.on("interval:" + n, r.debounce((function (t) { var n = e.parseStatisticData(t.data._origin), i = e.getStatisticHtmlString(n); document.getElementsByClassName(e.statisticClass)[0].innerHTML = i }), 150)); var i = this.statistic.triggerOff ? this.statistic.triggerOff : "mouseleave"; this.view.on("interval:" + i, r.debounce((function (t) { var n = e.getTotalValue(), i = e.parseStatisticData(n), r = e.getStatisticHtmlString(i); document.getElementsByClassName(e.statisticClass)[0].innerHTML = r }), 150)) } }, e.prototype.geometryParser = function (t, e) { return "g2" === t ? c[e] : h[e] }, e.prototype.coord = function () { var t = this.options, e = { type: "theta", cfg: { radius: t.radius, innerRadius: t.innerRadius } }; this.setConfig("coord", e) }, e.prototype.annotation = function () { var t = [], e = this.options; if (e.statistic && e.statistic.visible) { var n = this.drawStatistic(e.statistic); t.push(n), this.statistic = n } this.setConfig("annotations", t) }, e.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, l) }, e.prototype.drawStatistic = function (t) { var e, n, i = r.deepMix({}, { type: "html", top: !0, position: ["50%", "50%"], triggerOn: "mouseenter" }, t); if (t.content) e = t.content; else { var o = this.getTotalValue(); e = this.parseStatisticData(o) } return n = t.htmlContent ? t.htmlContent(e) : this.getStatisticTemplate(e), i.html = n, i.triggerOn && this.setConfig("tooltip", !1), i }, e.prototype.getTotalValue = function () { var t, e = this.options, n = 0; return r.each(e.data, (function (t) { "number" == typeof t[e.angleField] && (n += t[e.angleField]) })), (t = {})[e.angleField] = n, t[e.colorField] = "总计", t }, e.prototype.parseStatisticData = function (t) { var e = this.options, n = e.angleField; return e.colorField ? { name: t[e.colorField], value: t[n] } : t[n] }, e.prototype.getStatisticTemplate = function (t) { var e, n = this.getStatisticSize(); if (r.isString(t)) e = u.getSingleDataTemplate(t, this.statisticClass, n); else if (r.isObject(t) && 2 === r.keys(t).length) { var i = t; e = u.getTwoDataTemplate(i.name, i.value, this.statisticClass, n) } return e }, e.prototype.getStatisticHtmlString = function (t) { var e, n = this.statistic.triggerOn; return r.isString(n) && (e = this.getStatisticTemplate(t)), r.isFunction(n) && (e = n(t), e = '<div class="ring-guide-html ' + this.statisticClass + '">' + e + "</div>"), e }, e.prototype.applyResponsive = function (t) { var e = this, n = s.default[t]; r.each(n, (function (t) { t.method(e) })) }, e.prototype.getStatisticSize = function () { return this.width * this.options.radius }, e.prototype.adjustLabelDefaultOptions = function (t) { var e = i.__assign({}, t.label); if (e && "inner" === e.type) { var n = e.style || {}; n.textAlign || (n.textAlign = "center"), e.style = n, e.offset || (e.offset = (t.innerRadius - 1) / 2 * 100 + "%") } return e }, e.centralId = 0, e }(a.default); e.default = p, o.registerPlotType("ring", p) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = [{ name: "responsiveRing", method: n(1).__importDefault(n(243)).default }]; e.default = { preRender: i } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(24), o = i.__importDefault(n(244)), a = i.__importDefault(n(49)); e.default = function (t) { var e = t.options, n = t.getResponsiveTheme(), i = e.padding, s = e.radius ? e.radius : 1, u = t.width, l = t.height, c = { radius: s, coord: new (r.getCoordinate("polar"))({ radius: s, start: { x: i[3], y: i[0] }, end: { x: u - i[1], y: l - i[2] } }) }, h = new o.default({ nodes: [{ name: "innerRadius", value: 0 }] }), p = n.ring.constraints; new a.default({ nodes: h, constraints: p, region: c, plot: t, onEnd: function () { e.innerRadius = h.nodes[0].value } }) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = function () { function t(t) { this.type = "variable", i.assign(this, t) } return t.prototype.normalize = function () { }, t }(); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); n(31).registerResponsiveTheme("ring", { ring: { constraints: [{ name: "ringThickness" }, { name: "minRingThickness" }] } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = "color:#8c8c8c;font-size:14px;text-align:center;line-height:2;font-family:'-apple-system',BlinkMacSystemFont,'SegoeUI',Roboto,'HelveticaNeue',Helvetica,'PingFangSC','HiraginoSansGB','MicrosoftYaHei',SimSun,'sans-serif';pointer-events:none;", r = "font-size:32px;font-weight:bold;color:#4D4D4D"; e.getSingleDataTemplate = function (t, e, n) { return '<div class="ring-guide-html ' + e + '" style=' + (i + "width:" + n + "px;") + '><span class="ring-guide-value" style=' + r + ">" + t + "</span></div>" }, e.getTwoDataTemplate = function (t, e, n, o) { return '<div class="ring-guide-html ' + n + '" style=' + (i + "width:" + o + "px;") + '><span class="ring-guide-name" style=font-weight:300;>' + t + '</span><br/><span class="ring-guide-value" style=' + r + ">" + e + "</span></div>" } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(10); e.EVENT_MAP = r.EVENT_MAP, e.onEvent = r.onEvent; i.assign(r.EVENT_MAP, { onRingClick: "interval:click", onRingDblclick: "interval:dblclick", onRingMousemove: "interval:mousemove", onRingMouseenter: "interval:mouseenter", onRingMouseleave: "interval:mouseleave", onRingMousedown: "interval:mousedown", onRingMouseup: "interval:mouseup", onRingContextmenu: "interval:contextmenu" }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(249)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "radar", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(8)), s = n(9), u = n(11), l = n(17), c = i.__importStar(n(250)), h = { area: "area", line: "line", point: "point" }, p = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "radar", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { width: 400, height: 400, title: { visible: !1 }, description: { visible: !1 }, forceFit: !0, padding: "auto", radius: .8, smooth: !1, line: { visible: !0, size: 2, style: { opacity: 1 } }, area: { visible: !0, style: { opacity: .25 } }, point: { visible: !1, size: 4, shape: "point", style: { opacity: 1 } }, angleAxis: { visible: !0, autoHideLabel: !1, autoRotateLabel: !0, autoRotateTitle: !0, line: { visible: !1 }, tickLine: { visible: !1 }, grid: { visible: !0, style: { lineDash: [0, 0] } }, label: { visible: !0, offset: 8 }, title: { visible: !1 } }, radiusAxis: { min: 0, visible: !0, autoHideLabel: !1, autoRotateLabel: !0, autoRotateTitle: !0, line: { visible: !0 }, tickLine: { visible: !0 }, gridType: "line", grid: { visible: !0, style: { lineDash: [0, 0] } }, label: { visible: !0 }, title: { visible: !1 } }, label: { visible: !1, type: "point" }, legend: { visible: !0, position: "left-top" }, tooltip: { visible: !0, shared: !0, crosshairs: null } }) }, e.prototype.init = function () { var e = this.options; e.xField = e.angleField, e.yField = e.radiusField, t.prototype.init.call(this) }, e.prototype.getOptions = function (e) { var n = t.prototype.getOptions.call(this, e), i = this.constructor.getDefaultOptions(); return r.deepMix({}, n, i, e) }, e.prototype.geometryParser = function (t, e) { return h[e] }, e.prototype.scale = function () { var e = this.options, n = {}; n[e.angleField] = {}, r.has(e, "angleAxis") && l.extractScale(n[e.angleField], e.angleAxis), n[e.radiusField] = {}, r.has(e, "radiusAxis") && l.extractScale(n[e.radiusField], e.radiusAxis), this.setConfig("scales", n), t.prototype.scale.call(this) }, e.prototype.coord = function () { var t = { type: "polar", cfg: { radius: this.options.radius } }; this.setConfig("coord", t) }, e.prototype.axis = function () { var t = this.options, e = s.getComponent("axis", { plot: this, dim: "angle" }), n = s.getComponent("axis", { plot: this, dim: "radius" }), i = { fields: {} }; i.fields[t.angleField] = e, i.fields[t.radiusField] = n, this.setConfig("axes", i) }, e.prototype.addGeometry = function () { var t = this.options; if (t.area.visible) { var e = u.getGeom("area", "main", { plot: this }); this.setConfig("element", e), this.area = e } if (t.line && t.line.visible) { var n = u.getGeom("line", "guide", { plot: this }); this.setConfig("element", n), this.line = n } if (t.point && t.point.visible) { var i = u.getGeom("point", "guide", { plot: this }); this.setConfig("element", i), this.point = i } }, e.prototype.label = function () { }, e.prototype.annotation = function () { }, e.prototype.animation = function () { t.prototype.animation.call(this), !1 === this.options.animation && (this.area && (this.area.animate = !1), this.line && (this.line.animate = !1), this.point && (this.point.animate = !1)) }, e.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, c) }, e }(a.default); e.default = p, o.registerPlotType("radar", p) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(10); e.EVENT_MAP = r.EVENT_MAP, e.onEvent = r.onEvent; i.assign(r.EVENT_MAP, { onAreaClick: "area:click", onAreaDblclick: "area:dblclick", onAreaMousemove: "area:mousemove", onAreaMouseenter: "area:mouseenter", onAreaMouseleave: "area:mouseleave", onAreaMousedown: "area:mousedown", onAreaMouseup: "area:mouseup", onAreaContextmenu: "area:contextmenu", onLineClick: "line:click", onLineDblclick: "line:dblclick", onLineMousemove: "line:mousemove", onLineMouseenter: "line:mouseenter", onLineMouseleave: "line:mouseleave", onLineMousedown: "line:mousedown", onLineMouseup: "line:mouseup", onLineContextmenu: "line:contextmenu", onPointClick: "point:click", onPointDblclick: "point:dblclick", onPointMousemove: "point:mousemove", onPointMouseenter: "point:mouseenter", onPointMouseleave: "point:mouseleave", onPointMousedown: "point:mousedown", onPointMouseup: "point:mouseup", onPointContextmenu: "point:contextmenu" }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(252)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "liquid", t.prototype.createLayers.call(this, n) }, e.prototype.changeValue = function (t, e) { if (void 0 === e && (e = !1), e) this.eachLayer((function (e) { e instanceof a.default && e.changeValue(t) })); else { var n = this.layers[0]; n instanceof a.default && n.changeValue(t) } }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(2), a = n(7), s = i.__importDefault(n(8)), u = n(11), l = n(17); n(253), n(254); var c = n(21), h = { column: "interval" }, p = { interval: "liquid" }, f = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "liquid", e.shouldFadeInAnnotation = !0, e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { animation: { factor: .4, easing: "easeExpOut", duration: 800 }, liquidStyle: { lineWidth: 2 } }) }, e.prototype.init = function () { this.options.data = [{}], t.prototype.init.call(this) }, e.prototype.coord = function () { }, e.prototype.scale = function () { var e = this.options, n = e.min, i = e.max, r = { value: {} }; l.extractScale(r.value, { min: Math.min(n, i), max: Math.max(n, i) }), this.setConfig("scales", r), t.prototype.scale.call(this) }, e.prototype.axis = function () { this.setConfig("axes", !1) }, e.prototype.adjustLiquid = function (t) { var e = this.options; t.shape = { values: ["liquid-fill-gauge"] }, t.tooltip = !1; var n = e.liquidStyle; r.isFunction(n) && (n = n()), n && (t.style = n) }, e.prototype.addGeometry = function () { var t = u.getGeom("interval", "main", { positionFields: ["_", "value"], plot: this }); this.adjustLiquid(t), this.liquid = t, this.setConfig("element", t) }, e.prototype.animation = function () { var t = this.options; if (!1 === t.animation) this.liquid.animate = !1; else { var e = r.get(t, "animation.factor"), n = r.get(t, "animation.easing"), i = r.get(t, "animation.duration"); this.liquid.animate = { appear: { animation: "liquidMoveIn", factor: e, easing: n, duration: i } } } }, e.prototype.geometryParser = function (t, e) { return "g2" === t ? h[e] : p[e] }, e.prototype.annotation = function () { var t = [], e = this.extractStatistic(); t.push(e), this.setConfig("annotations", t) }, e.prototype.extractStatistic = function () { var t, e, n, i, o = this.options, a = o.statistic || {}; if (t = r.isFunction(a.formatter) ? a.formatter(o.value) : "" + o.value) { e = .8 * (o.width < o.height ? .8 * o.width : o.height) / t.length, n = Math.max(1, Math.ceil(.025 * e)) } !1 === a.visible && (i = 0); var s = r.deepMix({ style: { fontSize: e, shadowBlur: n } }, a, { top: !0, content: t, type: "text", position: ["_", "median"], style: { opacity: i, fill: "transparent", shadowColor: "transparent", textAlign: "center" } }); return delete s.visible, delete s.formatter, delete s.adjustColor, s }, e.prototype.afterRender = function () { this.fadeInAnnotation(); var t = this.options, e = t.padding ? t.padding : this.config.theme.padding; t.defaultState && "auto" !== e && this.stateController.defaultStates(t.defaultState), "auto" === e && this.paddingController.processAutoPadding() }, e.prototype.processData = function (t) { return [{ _: "_", value: this.options.value }] }, e.prototype.changeValue = function (t) { this.options.value = t, this.changeData([]) }, e.prototype.fadeInAnnotation = function () { var t = this, e = this.options.animation || {}, n = this.view.annotation().annotations[0].get("el"), i = this.calcAnnotationColorStyle(); this.shouldFadeInAnnotation ? n.animate(i, e.duration * Math.min(1, 1.5 * e.factor), null, (function () { t.shouldFadeInAnnotation = !1 })) : r.forIn(i, (function (t, e) { return n.attr(e, t) })) }, e.prototype.calcAnnotationColorStyle = function () { var t = this.options, e = { fill: "#303030", shadowColor: "white" }; if (!1 === r.get(t, "statistic.adjustColor")) return { fill: r.get(t, "statistic.style.fill", e.fill), shadowColor: r.get(t, "statistic.style.shadowColor", e.shadowColor) }; var n = t.min, i = t.max, o = t.value; if (((n = Math.min(n, i)) == (i = Math.max(n, i)) ? 1 : (o - n) / (i - n)) > .55) { var a = this.view.get("elements")[0].get("container").find((function (t) { return "waves" == t.get("name") })).getChildByIndex(0).attr("fill"), s = c.rgb2arr(a); return Math.round(.299 * s[0] + .587 * s[1] + .114 * s[2]) / .8 < 156 ? { fill: "#f6f6f6", shadowColor: "black" } : e } return e }, e.prototype.updateConfig = function (e) { t.prototype.updateConfig.call(this, e), this.shouldFadeInAnnotation = !0 }, e.prototype.getViewRange = function () { var e = t.prototype.getViewRange.call(this), n = this.options.liquidStyle, i = n.lineWidth ? n.lineWidth : 2, r = e.minX, a = e.minY, s = e.width, u = e.height, l = Math.min(s, u) - 2 * i, c = r + s / 2 - l / 2, h = a + u / 2 - l / 2; return new o.BBox(c, h, l, l) }, e }(s.default); e.default = f, a.registerPlotType("liquid", f) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(2), o = n(5), a = i.__importStar(n(0)), s = function (t, e) { e.color && !t.fill && (t.fill = e.color), a.isNumber(e.opacity) && (t.opacity = t.fillOpacity = e.opacity) }, u = function (t, e) { e.color && !t.stroke && (t.stroke = e.color), a.isNumber(e.opacity) && (t.opacity = t.strokeOpacity = e.opacity) }, l = function (t, e, n) { return (1 - n) * t + n * e }, c = function (t) { var e = o.Global.theme.shape.hollowInterval, n = a.mix({}, e, t.style); return u(n, t), n }; function h(t, e, n, i) { return 0 === e ? [[t + .5 * n / Math.PI / 2, i / 2], [t + .5 * n / Math.PI, i], [t + n / 4, i]] : 1 === e ? [[t + .5 * n / Math.PI / 2 * (Math.PI - 2), i], [t + .5 * n / Math.PI / 2 * (Math.PI - 1), i / 2], [t + n / 4, 0]] : 2 === e ? [[t + .5 * n / Math.PI / 2, -i / 2], [t + .5 * n / Math.PI, -i], [t + n / 4, -i]] : [[t + .5 * n / Math.PI / 2 * (Math.PI - 2), -i], [t + .5 * n / Math.PI / 2 * (Math.PI - 1), -i / 2], [t + n / 4, 0]] } function p(t, e, n, i, r, o, a) { for (var s = 2 * Math.ceil(2 * t / n * 4), u = [], l = i; l < 2 * -Math.PI;)l += 2 * Math.PI; for (; l > 0;)l -= 2 * Math.PI; var c = o - t + (l = l / Math.PI / 2 * n) - 2 * t; u.push(["M", c, e]); for (var p = 0, f = 0; f < s; ++f) { var d = h(f * n / 4, f % 4, n, r); u.push(["C", d[0][0] + c, -d[0][1] + e, d[1][0] + c, -d[1][1] + e, d[2][0] + c, -d[2][1] + e]), f === s - 1 && (p = d[2][0]) } return u.push(["L", p + c, a + t]), u.push(["L", c, a + t]), u.push(["L", c, e]), u } o.registerShape("interval", "liquid-fill-gauge", { draw: function (t, e) { var n = 0, i = 1 / 0; a.each(t.points, (function (t) { t.x < i && (i = t.x), n += t.x })); var u = n / t.points.length, h = this.parsePoint({ x: u, y: .5 }), f = this.parsePoint({ x: i, y: .5 }), d = h.x - f.x, g = Math.min(d, f.y), v = function (t) { var e = o.Global.theme.shape.interval, n = a.mix({}, e, t.style); return s(n, t), t.color && !n.stroke && (n.stroke = n.stroke || t.color), n }(t).fill, y = new r.Circle({ attrs: { x: h.x, y: h.y, r: g } }), m = e.addGroup({ name: "waves", attrs: { x: h.x, y: h.y, clip: y } }); return function (t, e, n, i, r, a, s, u) { for (var c = s.getBBox(), h = c.maxX - c.minX, f = c.maxY - c.minY, d = 0; d < i; d++) { var g = i <= 1 ? 0 : d / (i - 1), v = a.addShape("path", { attrs: { path: p(u, c.minY + f * n, h / 4, 0, h / l(56, 64, g), t, e), fill: r, clip: s, opacity: l(.6, .3, g) } }); "canvas" === o.Global.renderer && v.animate({ transform: [["t", h / 2, 0]], repeat: !0 }, l(5e3, 3500, g)) } }(h.x, h.y, 1 - t.points[1].y, 3, v, m, y, 4 * g), e.addShape("circle", { name: "wrap", attrs: a.mix(c(t), { x: h.x, y: h.y, r: g, fill: "transparent" }) }) } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = i.__importStar(n(0)); function a(t, e) { var n = t.get("parent"), i = n.getBBox(), r = Math.min(Math.max(0, o.get(e, "factor", .5)), 1), a = o.get(e, "delay", 0), s = o.get(e, "duration", 800), u = e.callback, l = (i.minX + i.maxX) / 2, c = i.maxY, h = n.find((function (t) { return "wrap" == t.get("name") })), p = h.attr("opacity"); h.attr("opacity", 0), h.animate({ opacity: p }, s * r, "easeLinear", null, a); var f = n.find((function (t) { return "waves" == t.get("name") })), d = o.clone(f.attr("matrix")); f.attr("transform", [["t", -l, -c], ["s", 1, 0], ["t", l, c]]), f.animate({ matrix: d }, s, e.easing, (function () { return u && u(n, h, f) }), a) } a.animationName = "liquidMoveIn", r.Animate.registerAnimation("appear", "liquidMoveIn", a) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(256)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "gauge", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(8)), s = n(17); n(257), n(258); var u = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "gauge", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { startAngle: -7 / 6, endAngle: 1 / 6, range: [0, 25, 50, 75, 100], gaugeStyle: { tickLineColor: "rgba(0,0,0,0)", pointerColor: "#bfbfbf", statisticPos: ["50%", "100%"] } }) }, e.prototype.init = function () { var e = this.options, n = e.value, i = e.range.map((function (t) { return +t })).sort((function (t, e) { return t - e })), r = this.options, o = r.min, a = void 0 === o ? i[0] : o, s = r.max, u = void 0 === s ? i[i.length - 1] : s, l = r.format, c = void 0 === l ? function (t) { return "" + t } : l, h = c(n), p = this.getStyleMix(); this.options.styleMix = p, this.options.data = [{ value: n || 0 }], this.options.valueText = h, this.options.min = a, this.options.max = u, this.options.format = c, t.prototype.init.call(this) }, e.prototype.geometryParser = function (t, e) { throw new Error("Method not implemented.") }, e.prototype.getStyleMix = function () { var t = this.options.gaugeStyle, e = void 0 === t ? {} : t, n = this.width, i = this.height, r = Math.max(n, i) / 20, o = Object.assign({}, this.theme, { stripWidth: r, tickLabelSize: r / 2, statisticSize: 1.5 * r }); return Object.assign(o, e) }, e.prototype.scale = function () { var e = this.options, n = e.min, i = e.max, r = e.format, o = e.styleMix, a = { value: {} }; s.extractScale(a.value, { min: n, max: i, minLimit: n, maxLimit: i, nice: !0, formatter: r, tickInterval: o.tickInterval }), this.setConfig("scales", a), t.prototype.scale.call(this) }, e.prototype.coord = function () { var t = { type: "polar", cfg: { radius: .9, startAngle: this.options.startAngle * Math.PI, endAngle: this.options.endAngle * Math.PI } }; this.setConfig("coord", t) }, e.prototype.axis = function () { var t = this.options.styleMix, e = "number" == typeof t.tickLabelPos ? -t.tickLabelPos : "outer" === t.tickLabelPos ? .8 : -.8, n = { fields: { value: {}, 1: {} } }; n.fields.value = { line: null, label: { offset: e * (t.stripWidth / 1.8 + t.tickLabelSize / 1.5), textStyle: { fontSize: t.tickLabelSize, fill: t.tickLabelColor, textAlign: "center", textBaseline: "middle" } }, tickLine: { length: e * (t.stripWidth + 4), stroke: t.tickLineColor, lineWidth: 2, lineDash: [0, t.stripWidth / 2, Math.abs(e * (t.stripWidth + 4))] }, subTickCount: t.subTickCount, subTickLine: { length: e * (t.stripWidth + 1), stroke: t.tickLineColor, lineWidth: 1, lineDash: [0, t.stripWidth / 2, Math.abs(e * (t.stripWidth + 1))] }, labelAutoRotate: !0 }, n.fields[1] = !1, this.setConfig("axes", n) }, e.prototype.addGeometry = function () { var t = { type: "point", position: { fields: ["value", "1"] }, shape: { values: ["pointer"] }, color: { values: [this.options.styleMix.pointerColor || this.config.theme.defaultColor] }, animate: !1 }; this.setConfig("element", t) }, e.prototype.annotation = function () { var t = this.options, e = (t.min, t.max, t.statistic), n = t.range, i = t.styleMix, r = []; if (!1 !== e) { var o = this.renderStatistic(); r.push(o) } var a = this.renderArcs(n, 1, i), s = r.concat(a); this.setConfig("annotations", s) }, e.prototype.renderArcs = function (t, e, n) { var o, a = this, s = n.colors || this.config.theme.colors, u = t.length - 1, l = [], c = [], h = (o = u, i.__spreadArrays(Array(o).fill(0).map((function (t, e) { return e })))); return r.each(h, (function (i) { var o = i === h.length - 1 ? 0 : a.calGapAngle(), u = { type: "arc", start: [t[i], e], end: [t[i + 1] - o, e], style: { stroke: s[i % s.length], lineWidth: n.stripWidth } }, p = r.deepMix({}, u, { style: { stroke: n.stripBackColor } }); c.push(p), l.push(u) })), 0 !== t[0] && c.push({ type: "arc", start: [0, e], end: [t[0] - this.calGapAngle(), e], style: { stroke: n.stripBackColor, lineWidth: n.stripWidth } }), 100 !== t[t.length - 1] && c.push({ type: "arc", start: [t[t.length - 1] + this.calGapAngle(), e], end: [100, e], style: { stroke: n.stripBackColor, lineWidth: n.stripWidth } }), c.concat(l) }, e.prototype.statisticHtml = function () { var t = this.options, e = t.value, n = t.format, i = this.options.statistic, r = n(e); return "boolean" == typeof i && !0 === i ? null !== e ? r : "--" : "string" == typeof i ? i : "function" == typeof i ? i(e, r) : null }, e.prototype.renderStatistic = function () { var t = this.options, e = t.statistic, n = t.styleMix, i = this.statisticHtml(); return "function" != typeof e ? { type: "text", content: i, top: !0, position: n.statisticPos, style: { fill: n.statisticColor, fontSize: n.statisticSize, textAlign: "center" } } : "function" == typeof e ? { type: "html", zIndex: 10, position: n.statisticPos, html: i } : void 0 }, e.prototype.calGapAngle = function () { var t = Math.abs(this.options.startAngle - this.options.endAngle) / Math.PI * 100; return 1 / (this.width / 2 * .9) * t }, e }(a.default); e.default = u, o.registerPlotType("gauge", u) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(5); i.registerShape("point", "pointer", { draw: function (t, e) { var n = t.points[0], i = this.parsePoint({ x: 0, y: 0 }), r = this.parsePoint({ x: n.x, y: .5 }), o = { x: i.x - r.x, y: i.y - r.y }, a = Math.sqrt(o.x * o.x + o.y * o.y); o.x *= 1 / a, o.y *= 1 / a; var s = -Math.PI / 2, u = Math.cos(s) * o.x - Math.sin(s) * o.y, l = Math.sin(s) * o.x + Math.cos(s) * o.y, c = Math.PI / 2, h = Math.cos(c) * o.x - Math.sin(c) * o.y, p = Math.sin(c) * o.x + Math.cos(c) * o.y, f = Math.atan2(o.y, o.x), d = i.x + -8 * Math.cos(f), g = i.y + -8 * Math.sin(f), v = [["M", r.x + 1 * u, r.y + 1 * l], ["L", d + 3 * u, g + 3 * l], ["L", d + 3 * h, g + 3 * p], ["L", r.x + 1 * h, r.y + 1 * p], ["Z"]]; return e.addShape("circle", { attrs: { x: i.x, y: i.y, r: 10, lineWidth: 4, stroke: t.color } }), e.addShape("path", { attrs: { path: v, fill: t.color } }) } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), n(20).registerTheme("gauge", { stripWidth: 30, stripBackColor: "#ddd", tickInterval: 20, tickLabelPos: "inner", tickLabelSize: 16, tickLabelColor: "#aaa", tickLineColor: "#aaa", subTickCount: 4, labelPos: ["50%", "80%"], labelColor: "#666", labelSize: 30 }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(50)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "area", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(99)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "stackArea", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(2), o = n(5), a = i.__importStar(n(0)); function s(t, e, n) { var i = e[0], r = e[e.length - 1]; a.each(e, (function (e) { if (e.x === t) return e.y[n]; e.x < t && e.x > i.x && (i = e), e.x > t && e.x < r.x && (r = e) })); var o = (t - i.x) / (r.x - i.x); return i.y[n] * (1 - o) + r.y[n] * o } function u(t, e) { var n; for (n = 0; n < t.length; n++) { var i = t[n]; if (i.x === e || i.x > e) break } return n } var l = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.scaleFactor = [], e } return i.__extends(e, t), e.prototype.showLabels = function (e, n) { var i = this, r = this.get("element").get("attrs").color.scales[0].field, o = this._groupPoints(e, r), s = []; a.each(o, (function (t, e) { var n = i._drawLabel(t, e); n && (s.push(a.mix({}, t[0], n)), i.scaleFactor.push(n.scaleFactor)) })), t.prototype.showLabels.call(this, s, n), this.get("labelOptions").autoScale && this._adjuestLabelSize() }, e.prototype._groupPoints = function (t, e) { var n = {}; return a.each(t, (function (t) { var i = t._origin[e]; a.has(n, i) || (n[i] = []), n[i].push(t) })), n }, e.prototype._drawLabel = function (t, e) { var n = function (t) { var e = -1 / 0, n = 1 / 0, i = -1 / 0; return a.each(t, (function (t) { n = Math.min(t.x, n), i = Math.max(t.x, i); var r = Math.abs(t.y[0] - t.y[1]); e = Math.max(e, r) })), { xRange: [n, i], maxHeight: e } }(t), i = n.xRange, r = n.maxHeight, o = i[1] - i[0], s = this._getInterpolatedPoints(i[0], o, t), u = this._getLabelBbox(e), l = { xRange: i, aspect: u.width / u.height, data: s, justTest: !0 }, c = this._bisection(12, r, this._testFit, l, .01, 100); if (null !== c) { l.justTest = !1; var h = this._testFit(l); return h.x = h.x, h.y = h.y0 + (h.y1 - h.y0) / 2, h.scaleFactor = c / u.height * .4, h } }, e.prototype._getInterpolatedPoints = function (t, e, n) { for (var i = [], r = t; r < e; r += 2) { var o = s(r, n, 0), a = s(r, n, 1); i.push({ x: r, y: [o, a] }) } return i }, e.prototype._bisection = function (t, e, n, i, r, o) { for (var a = 0; a < o; a++) { var s = (t + e) / 2, u = i; u.height = s, u.width = s * u.aspect; var l = n(u); if (l && (e - t) / 2 < r) return s; l ? t = s : e = s } return null }, e.prototype._testFit = function (t) { for (var e = t.xRange, n = t.width, i = t.height, r = t.data, o = t.justTest, a = 0; a < r.length; a++) { var s = r[a].x, l = s + n; if (l > e[1]) break; for (var c = u(r, l), h = -1 / 0, p = null, f = 1 / 0, d = a; d < c; d++) { var g = r[d].y[1], v = r[d].y[0]; if (v < f && (f = v), g > h && (h = g, p = v), f - h < i) break } if (f - h >= i) return !!o || { x: s, y0: h, y1: p, width: n, height: i } } return !1 }, e.prototype._getLabelBbox = function (t) { var e = this.get("labelOptions").plot, n = a.clone(e.theme.label.textStyle); return n.fontSize = 12, new r.Text({ attrs: i.__assign({ text: t, x: 0, y: 0 }, n) }).getBBox() }, e.prototype._adjuestLabelSize = function () { var t = this, e = this.get("labelsRenderer").get("group").get("children"), n = this.get("element").get("view"); a.each(e, (function (e, n) { var i = t.scaleFactor[n]; e.attr("fontSize", 12), e.transform([["t", -e.attr("x"), -e.attr("y")], ["s", i, i], ["t", e.attr("x"), e.attr("y")]]) })), n.get("canvas").draw() }, e }(o.ElementLabels); o.registerElementLabels("area", l) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = n(0), a = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.showLabels = function (e, n) { var i = this, r = []; o.each(n, (function (t) { var e = t.get("origin"), n = o.deepMix({}, e[e.length - 1]), i = t.getBBox(); n.x = i.maxX + 10, n.y = n.y[1], r.push(n) })), t.prototype.showLabels.call(this, r, n); var a = this.get("labelsRenderer").get("group").get("children"), s = this.get("element").get("view"); o.each(a, (function (t) { t.attr("textAlign", "left"), t.attr("textBaseline", "middle"); var e = t.get("origin"), r = i.get("element").getShapeId(e), o = i._adjustColor(r, n); t.attr("fill", o) })), s.get("canvas").draw() }, e.prototype._adjustColor = function (t, e) { var n; return o.each(e, (function (e) { e.id === t && (n = e.attr("fill")) })), n }, e }(r.ElementLabels); r.registerElementLabels("areaLine", a) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(264)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "percentageStackArea", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(99)), s = n(53), u = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "percentageStackArea", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { yAxis: { visible: !0, label: { visible: !0, formatter: function (t) { return t.replace(/%/gi, "") } } } }) }, e.prototype.processData = function (t) { var e = this.options, n = e.xField, i = e.yField; return s.transformDataPercentage(t, n, [i]) }, e.prototype.scale = function () { var e = {}, n = this.options.yField; e[this.options.yField] = { tickCount: 6, alias: n + " (%)", min: 0, max: 1, formatter: function (t) { return (100 * t).toFixed(1) + "%" } }, this.options.meta = r.deepMix({}, e, this.options.meta), t.prototype.scale.call(this) }, e }(a.default); e.default = u, o.registerPlotType("percentageStackArea", u) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(266)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "funnel", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importStar(n(3)), a = n(5), s = i.__importDefault(n(100)), u = n(7), l = i.__importDefault(n(8)), c = n(11); n(267), n(268), n(269), n(270), n(271), n(272); var h = i.__importDefault(n(273)); function p(t, e, n) { return (1 - n) * t + n * e } var f = { column: "interval" }, d = { interval: "funnel" }, g = function (t) { function e(e) { var n = t.call(this, e) || this; return n.type = "funnel", n.legendsListenerAttached = !1, n.shouldShowLabels = !1, n.shouldResetPercentages = !0, n.shouldResetCompareTexts = !0, n._onLegendContainerMouseDown = function (t) { var e = n.options; if ("legend-item" == t.target.name) { if (n.refreshPercentages(), e.dynamicHeight) { var i = n._findCheckedDataByMouseDownLegendItem(t.target); n._genCustomFieldForDynamicHeight(i) } if (e.compareField) { i = n._findCheckedDataByMouseDownLegendItem(t.target); n._updateDataForCompare(i), n.refreshCompareTexts() } } }, n.adjustProps(n.options), e.dynamicHeight && n._genCustomFieldForDynamicHeight(n.getData()), e.compareField && (n.options.data = n._reduceDataForCompare(n.getData())), n } return i.__extends(e, t), e.getDefaultOptions = function (e) { var n = { label: { visible: !0, adjustColor: !0, formatter: e && (e.compareField || e.transpose) ? function (t, e, n, i, r) { return "" + i } : function (t, e, n, i, r) { return t + " " + i } }, percentage: { visible: !0, offsetX: e.transpose ? 0 : 40, offsetY: e.transpose ? 40 : 0, spacing: 4, line: { visible: !0, style: { lineWidth: 1, stroke: "rgba(0, 0, 0, 0.15)" } }, text: { content: "转化率", style: { fill: "rgba(0, 0, 0, 0.65)" } }, value: { visible: !0, style: { fill: "black" }, formatter: function (t, e) { return (100 * e / t).toFixed(2) + "%" } } }, tooltip: { visible: !0, shared: !0, showTitle: !1, crosshairs: { type: "cross", style: { stroke: null } } }, animation: r.deepMix({}, a.Animate.defaultCfg, { appear: { duration: 800 } }), dynamicHeight: !1, compareText: { visible: !0, offsetX: -16, offsetY: -16, style: { fill: "black" } } }; return r.deepMix({}, t.getDefaultOptions.call(this), n) }, e.prototype.coord = function () { var t = this.options, e = { actions: t.transpose ? t.dynamicHeight ? [["transpose"], ["scale", 1, -1]] : [["scale", 1, -1]] : t.dynamicHeight ? [] : [["transpose"], ["scale", 1, -1]] }; this.setConfig("coord", e) }, e.prototype.axis = function () { this.setConfig("axes", !1) }, e.prototype.adjustFunnel = function (t) { var e = this.options; t.shape = { values: [e.dynamicHeight ? "funnel-dynamic-rect" : "funnel-basic-rect"] }, t.color = { fields: [e.xField], values: e.color && (Array.isArray(e.color) ? e.color : [e.color]) }, r.isFunction(e.funnelStyle) ? t.style = { callback: e.funnelStyle } : t.style = { cfg: e.funnelStyle }, t.adjust = [{ type: e.dynamicHeight ? "stack" : "symmetric" }] }, e.prototype.tooltip = function () { var e = this.options; e.compareField && r.deepMix(e.tooltip, { htmlContent: function (t, e) { var n, i, a, u; n = "g2-tooltip", i = o.createDom('<div class="' + n + '"></div>'), o.modifyCSS(i, s.default[n]); var l = i; if (t) { n = "g2-tooltip-title", i = o.createDom('<div class="' + n + '"></div>'), o.modifyCSS(i, s.default[n]), l.appendChild(i); var c = i; n = "g2-tooltip-marker", i = o.createDom('<span class="' + n + '"></span>'), o.modifyCSS(i, s.default[n]), o.modifyCSS(i, { width: "10px", height: "10px" }), c.appendChild(i), u = i, i = o.createDom("<span>" + t + "</span>"), c.appendChild(i) } if (e) { n = "g2-tooltip-list", i = o.createDom('<ul class="' + n + '"></ul>'), o.modifyCSS(i, s.default[n]), l.appendChild(i); var h = i; e.reduce((function (t, e) { a || (a = e.color); var n = r.get(e, "point._origin.__compare__.compareValues"); return r.get(e, "point._origin.__compare__.yValues").forEach((function (e, i) { return t.push([n[i], e]) })), t }), []).forEach((function (t, e) { var r = t[0], a = t[1]; n = "g2-tooltip-list-item", i = o.createDom('<li class="' + n + '" data-index=' + e + "></li>"), o.modifyCSS(i, s.default[n]), h.appendChild(i); var u = i; i = o.createDom("<span>" + r + "</span>"), u.appendChild(i), n = "g2-tooltip-value", i = o.createDom('<span class="' + n + '">' + a + "</span>"), o.modifyCSS(i, s.default[n]), u.appendChild(i) })) } return a && u && o.modifyCSS(u, { backgroundColor: a }), l } }), t.prototype.tooltip.call(this) }, e.prototype.addGeometry = function () { var t = this.options, e = c.getGeom("interval", "main", { positionFields: [t.dynamicHeight ? "_" : t.xField, t.yField], plot: this }); t.label && (e.label = this.extractLabel()), this.adjustFunnel(e), this.funnel = e, this.setConfig("element", e) }, e.prototype.animation = function () { var t = this, e = this.options; if (!1 === e.animation) this.funnel.animate = !1, this.shouldShowLabels = !0; else { var n = r.get(e, "animation.appear.duration"), i = n / (this.getData().length || 1); this.animationAppearTimeoutHandler && (clearTimeout(this.animationAppearTimeoutHandler), delete this.animationAppearTimeoutHandler), this.animationAppearTimeoutHandler = setTimeout((function () { t._teardownAnimationMask(), t.shouldShowLabels = !0, t.fadeInPercentages(i), e.compareField && t.fadeInCompareTexts(i), delete t.animationAppearTimeoutHandler }), n), this.funnel.animate = r.deepMix({}, e.animation, { appear: { animation: e.transpose ? "funnelScaleInX" : "funnelScaleInY", duration: i, reverse: e.dynamicHeight && !e.transpose, callback: function (e) { t.shouldShowLabels = !0, t.showLabels(e) } } }) } }, e.prototype.geometryParser = function (t, e) { return "g2" === t ? f[e] : d[e] }, e.prototype.afterRender = function () { var e = this.options; if (this.resetPercentages(), e.compareField && this.resetCompareTexts(), "auto" == e.padding) { var n = this._findPercentageContainer(); n && this.paddingController.registerPadding(n, "inner", !0); var i = this._findCompareTextContainer(); i && this.paddingController.registerPadding(i, "inner", !0) } (t.prototype.afterRender.call(this), this.animationAppearTimeoutHandler && (this._setupAnimationMask(), e.compareField && this.fadeInCompareTexts()), this.showLabels(), !1 === e.animation && (this.fadeInPercentages(), e.compareField && this.fadeInCompareTexts()), this.legendsListenerAttached) || (this.legendsListenerAttached = !0, this.view.get("legendController").container.on("mousedown", this._onLegendContainerMouseDown)) }, e.prototype.updateConfig = function (e) { e = this.adjustProps(e), t.prototype.updateConfig.call(this, e), this.legendsListenerAttached = !1, this.shouldShowLabels = !1 }, e.prototype.changeData = function (e) { var n = this.options; if (!1 !== n.animation && (this.shouldResetPercentages = !1, this.shouldResetCompareTexts = !1), n.dynamicHeight) { var i = this._findCheckedDataInNewData(e); this._genCustomFieldForDynamicHeight(i) } if (n.compareField) { e = this._reduceDataForCompare(e); i = this._findCheckedDataInNewData(e); this._updateDataForCompare(i) } t.prototype.changeData.call(this, e), this.refreshPercentages(), n.compareField && this.refreshCompareTexts(), this._refreshAnimationMaskForPercentageRefresh() }, e.prototype.extractLabel = function () { var t = this.options, e = t.label; return (!e || !1 !== e.visible) && new h.default(r.deepMix({ textStyle: { stroke: null } }, e, { plot: this, labelType: "funnelLabel", position: "middle", textStyle: { opacity: 0 }, fields: [t.xField, t.yField] })).getConfig() }, e.prototype.showLabels = function (t) { this.shouldShowLabels && this.view.get("elements").forEach((function (e) { var n = e.get("labelController").labelsContainer; n && n.get("labelsRenderer").get("group").get("children").forEach((function (n) { t ? e.getShapeId(n.get("origin")) == t.id && n.attr("opacity", 1) : n.attr("opacity", 1) })) })) }, e.prototype.adjustProps = function (t) { return t.compareField && (t.dynamicHeight = !1), t.dynamicHeight && (r.set(t, "meta." + t.yField + ".nice", !1), r.set(t, "tooltip.shared", !1)), t }, e.prototype.resetPercentages = function () { var t = this; if (this.shouldResetPercentages) { var e, n = this.options, i = n.percentage || {}, o = i.offsetX, a = i.offsetY, s = i.spacing, u = i.line, l = void 0 === u ? {} : u, c = i.text, h = void 0 === c ? {} : c, p = i.value, f = void 0 === p ? {} : p, d = Date.now(), g = this._findPercentageContainer(!0), v = this.view.get("coord"), y = 0; this.view.eachShape((function (i, u) { if (y++ > 0) { var c = u.getBBox(), p = c.minX, m = c.maxX, x = c.maxY, _ = c.minY, b = v.invertMatrix(n.transpose ? p : m, n.transpose ? n.compareField ? _ : x : n.dynamicHeight ? _ : x, 1), w = b[0], M = b[1], S = t._findPercentageMembersInContainerByShape(g, u, !0), C = S.line, O = S.text, k = S.value, P = [function (t, u, c, p, g) { c && (c.attr(r.deepMix({}, l.style, { x1: t, y1: u, x2: n.transpose ? t + o : t - o, y2: u - a, opacity: 0 })), c.set("adjustTimestamp", d)); var v = 0, y = 0, m = function () { p && (p.attr(r.deepMix({}, h.style, { x: n.transpose ? t + o : t - o - s - y - s, y: n.transpose ? u - a - s : u - a, opacity: 0, text: h.content, textAlign: n.transpose ? "left" : "right", textBaseline: n.transpose ? "bottom" : "middle" })), p.set("adjustTimestamp", d), v = p.getBBox().width) }, x = function () { g && (g.attr(r.deepMix({}, f.style, { x: n.transpose ? t + o + v + s : t - o - s, y: n.transpose ? u - a - s : u - a, opacity: 0, text: r.isFunction(f.formatter) ? n.compareField ? f.formatter(r.get(e, "__compare__.yValues.0"), r.get(i, "__compare__.yValues.0")) : f.formatter(e[n.yField], i[n.yField]) : "", textAlign: n.transpose ? "left" : "right", textBaseline: n.transpose ? "bottom" : "middle" })), g.set("adjustTimestamp", d), y = g.getBBox().width) }; n.transpose ? (m(), x()) : (x(), m()) }, function (t, u, c, p, g) { c && (c.attr(r.deepMix({}, l.style, { x1: t, y1: u, x2: t + o, y2: n.transpose ? n.compareField ? u + a : u - a : u + a, opacity: 0 })), c.set("adjustTimestamp", d)); var v = 0; p && (p.attr(r.deepMix({}, h.style, { x: n.transpose ? t + o : t + o + s, y: n.transpose ? n.compareField ? u + a + s : u - a - s : u + a, opacity: 0, text: h.content, textAlign: "left", textBaseline: n.transpose ? n.compareField ? "top" : "bottom" : "middle" })), p.set("adjustTimestamp", d), v = p.getBBox().width), g && (g.attr(r.deepMix({}, f.style, { x: n.transpose ? t + o + v + s : t + o + s + v + s, y: n.transpose ? n.compareField ? u + a + s : u - a - s : u + a, opacity: 0, text: r.isFunction(f.formatter) ? n.compareField ? f.formatter(r.get(e, "__compare__.yValues.1"), r.get(i, "__compare__.yValues.1")) : f.formatter(e[n.yField], i[n.yField]) : "", textAlign: "left", textBaseline: n.transpose ? n.compareField ? "top" : "bottom" : "middle" })), g.set("adjustTimestamp", d)) }]; if (n.compareField) { var A = v.invertMatrix(p, x, 1);[[A[0], A[1]], [w, M]].forEach((function (t, e) { var n = t[0], i = t[1]; return P[e](n, i, C && C[e], O && O[e], k && k[e]) })) } else P[1](w, M, C, O, k) } e = i })), g.get("children").forEach((function (t) { t.get("adjustTimestamp") != d && (t.attr({ opacity: 0 }), g.set(t.get("id"), null), setTimeout((function () { return t.remove() }))) })) } }, e.prototype.fadeInPercentages = function (t, e) { var n = this, i = this.options, o = this._findPercentageContainer(), a = function (e) { var i = { minX: 1 / 0, maxX: -1 / 0, minY: 1 / 0, maxY: -1 / 0 }; n.view.eachShape((function (a, s) { var u = n._findPercentageMembersInContainerByShape(o, s), l = { minX: 1 / 0, maxX: -1 / 0, minY: 1 / 0, maxY: -1 / 0 }, c = function (t) { if (t && "text" == t.get("type")) { var e = t.getBBox(), n = e.minX, i = e.maxX, r = e.minY, o = e.maxY; n < l.minX && (l.minX = n), i > l.maxX && (l.maxX = i), r < l.minY && (l.minY = r), o > l.maxY && (l.maxY = o) } }; if (r.each(u, (function (t) { return r.isArray(t) ? c(t[e]) : c(t) })), l.minX > i.maxX || l.maxX < i.minX || l.minY > i.maxY || l.maxY < i.minY) { var h = function (e) { if (e) { var n = { opacity: 1 }; t ? e.animate(n, t) : e.attr(n) } }; r.each(u, (function (t) { return r.isArray(t) ? h(t[e]) : h(t) })), r.assign(i, l) } })) }; i.compareField ? [0, 1].forEach(a) : a(), t && e && setTimeout(e, t) }, e.prototype.fadeOutPercentages = function (t, e) { var n = this, i = this._findPercentageContainer(); this.view.eachShape((function (e, o) { var a = n._findPercentageMembersInContainerByShape(i, o), s = function (e) { if (e) { var n = { opacity: 0 }; t ? e.animate(n, t) : e.attr(n) } }; r.each(a, (function (t) { return r.isArray(t) ? t.forEach(s) : s(t) })) })), t && e && setTimeout(e, t) }, e.prototype.refreshPercentages = function (t) { var e = this; if (!1 !== this.options.animation) { var n = this._calcRefreshFadeDurations(), i = n.fadeOutDuration, r = n.fadeInDuration; this.shouldResetPercentages = !1, this.fadeOutPercentages(i, (function () { e.shouldResetPercentages = !0, e.resetPercentages(), e.fadeInPercentages(r, t) })) } }, e.prototype._calcRefreshFadeDurations = function () { var t = this.options, e = r.get(t, "animation.update.duration"), n = r.get(t, "animation.enter.duration"); return { fadeInDuration: .6 * Math.min(n, e), fadeOutDuration: 1.2 * Math.max(n, e) } }, e.prototype._findPercentageContainer = function (t) { var e; if (void 0 === t && (t = !1), this.view) { var n = this.view.get("elements"); if (n.find((function (t) { return e = t.get("percentageContainer") })), !e && t && n.length) { var i = n[0]; e = i.get("container").addGroup(), i.set("percentageContainer", e) } } return e }, e.prototype._findPercentageMembersInContainerByShape = function (t, e, n) { void 0 === n && (n = !1); var i = this.options, r = i.percentage || {}, o = r.visible, a = r.line, s = void 0 === a ? {} : a, u = r.text, l = void 0 === u ? {} : u, c = r.value, h = void 0 === c ? {} : c, p = { line: void 0, text: void 0, value: void 0 }; if (!1 === o || !t) return p; if (!1 !== s.visible) { var f = function (i) { var r = "_percentage-line-" + e.id + "-" + i, o = t.get(r); return !o && n && (o = t.addShape("line", { id: r }), t.set(r, o)), o }, d = i.compareField ? [0, 1].map(f) : f(0); p.line = d } if (!1 !== l.visible) { f = function (i) { var r = "_percentage-text-" + e.id + "-" + i, o = t.get(r); return !o && n && (o = t.addShape("text", { id: r }), t.set(r, o)), o }; var g = i.compareField ? [0, 1].map(f) : f(0); p.text = g } if (!1 !== h.visible) { f = function (i) { var r = "_percentage-value-" + e.id + "-" + i, o = t.get(r); return !o && n && (o = t.addShape("text", { id: r }), t.set(r, o)), o }; var v = i.compareField ? [0, 1].map(f) : f(0); p.value = v } return p }, e.prototype._genCustomFieldForDynamicHeight = function (t) { var e = this.options, n = t.reduce((function (t, n) { return t + n[e.yField] }), 0), i = 1; t.forEach((function (r, o) { var a = r[e.yField], s = i - a / n; r.__custom__ = { datumIndex: o, dataLength: t.length, ratioUpper: i, ratioLower: s, reverse: e.transpose }, i = s })) }, e.prototype.resetCompareTexts = function () { if (this.shouldResetCompareTexts) { var t, e, n = this.options, i = this._findCheckedData(this.getData())[0]; if (this.view.eachShape((function (n, o) { n == i && (t = o.get("parent").getBBox(), e = r.get(n, "__compare__")) })), t && e && !1 !== r.get(n, "compareText.visible")) { var o = this.view.get("coord"), a = this._findCompareTextContainer(!0), s = e.yValuesMax, u = e.compareValues, l = o.invertMatrix(t.minX, t.minY, 1), c = o.invertMatrix(t.maxX, t.maxY, 1), h = Math.min(l[0], c[0]), f = Math.max(l[0], c[0]), d = Math.min(l[1], c[1]), g = Math.max(l[1], c[1]), v = a.get("children");[0, 1].forEach((function (t) { var e = v[t]; e || (e = a.addShape("text")), e.attr(r.deepMix({}, r.get(n, "compareText.style"), { text: n.transpose ? u[t] : t ? "  " + u[t] : u[t] + "  ", x: n.transpose ? h + r.get(n, "compareText.offsetX") : p(h, f, s[0] / (s[0] + s[1])), y: n.transpose ? p(d, g, s[0] / (s[0] + s[1])) + (t ? 8 : -8) : d + r.get(n, "compareText.offsetY"), opacity: 0, textAlign: n.transpose ? "right" : t ? "left" : "right", textBaseline: n.transpose && t ? "top" : "bottom" })) })) } } }, e.prototype.fadeInCompareTexts = function (t, e) { var n = this._findCompareTextContainer(); if (n) { var i = n.get("children");[0, 1].forEach((function (e) { var n = i[e]; if (n) { var r = { opacity: 1 }; t ? n.animate(r, t) : n.attr(r) } })) } t && e && setTimeout(e, t) }, e.prototype.fadeOutCompareTexts = function (t, e) { var n = this._findCompareTextContainer(); if (n) { var i = n.get("children");[0, 1].forEach((function (e) { var n = i[e]; if (n) { var r = { opacity: 0 }; t ? n.animate(r, t) : n.attr(r) } })) } t && e && setTimeout(e, t) }, e.prototype.refreshCompareTexts = function (t) { var e = this; if (!1 !== this.options.animation) { var n = this._calcRefreshFadeDurations(), i = n.fadeInDuration, r = n.fadeOutDuration; this.shouldResetCompareTexts = !1, this.fadeOutCompareTexts(r, (function () { e.shouldResetCompareTexts = !0, e.resetCompareTexts(), e.fadeInCompareTexts(i, t) })) } }, e.prototype._findCompareTextContainer = function (t) { var e; if (void 0 === t && (t = !1), this.view) { var n = this.view.get("elements"); if (n.find((function (t) { return e = t.get("compareTextContainer") })), !e && t && n.length) { var i = n[0]; e = i.get("container").addGroup(), i.set("compareTextContainer", e) } } return e }, e.prototype._reduceDataForCompare = function (t) { var e, n = this.options, i = [-1 / 0, -1 / 0]; return (t = t.reduce((function (t, r) { var o, a = r[n.xField], s = r[n.yField], u = r[n.compareField]; e || (e = u); var l = t.find((function (t) { return t[n.xField] == a })); l || ((o = {})[n.xField] = a, o[n.yField] = 0, o.__compare__ = { compareValues: [], yValues: [], yValuesMax: [], yValuesNext: void 0, transpose: n.transpose }, l = o, t.push(l)); var c = u == e ? 0 : 1; return l.__compare__.yValues[c] = s, i[c] < s && (i[c] = s), l.__compare__.compareValues[c] = u, t }), [])).forEach((function (e, o) { e[n.yField] = r.get(e, "__compare__.yValues", []).reduce((function (t, e) { return t + e }), 0), r.set(e, "__compare__.yValuesMax", i), r.set(e, "__compare__.yValuesNext", r.get(t, o + 1 + ".__compare__.yValues")) })), t }, e.prototype._updateDataForCompare = function (t) { var e = [-1 / 0, -1 / 0]; t.forEach((function (t) { var n = r.get(t, "__compare__.yValues");[0, 1].forEach((function (t) { n[t] > e[t] && (e[t] = n[t]) })) })), t.forEach((function (n, i) { r.set(n, "__compare__.yValuesMax", e), r.set(n, "__compare__.yValuesNext", r.get(t, i + 1 + ".__compare__.yValues")) })) }, e.prototype._findCheckedData = function (t) { var e = this.options, n = this.view.get("canvas").findAll((function (t) { return "legend-item" == t.name && t.get("parent").get("checked") })).map((function (t) { return t.get("origin").value })); return t.filter((function (t) { return r.contains(n, t[e.xField]) })) }, e.prototype._findCheckedDataInNewData = function (t) { var e = this.options, n = this.view.get("canvas").findAll((function (t) { return "legend-item" == t.name && t.get("parent").get("checked") })).map((function (t) { return t.get("origin").value })), i = this.getData().map((function (t) { return t[e.xField] })).filter((function (t) { return !r.contains(n, t) })); return t.filter((function (t) { return !r.contains(i, t[e.xField]) })) }, e.prototype._findCheckedDataByMouseDownLegendItem = function (t) { var e = this.options, n = t.get("origin"), i = t.get("parent").get("parent").findAll((function (e) { return e != t && "legend-item" == e.name && e.get("parent").get("checked") })).map((function (t) { return t.get("origin").value })), o = []; return this.getData().forEach((function (a) { var s = a[e.xField]; (n.value == s && !t.get("parent").get("checked") || r.contains(i, s)) && o.push(a) })), o }, e.prototype._setupAnimationMask = function () { var t = this.view.get("canvas"), e = t.get("animation-mask"); e || (e = t.addShape("rect"), t.set("animation-mask", e)), e.attr({ x: 0, y: 0, fill: "transparent", width: t.get("width"), height: t.get("height") }) }, e.prototype._teardownAnimationMask = function () { var t = this.view.get("canvas"), e = t.get("animation-mask"); e && e.attr({ x: -t.get("width") }) }, e.prototype._refreshAnimationMaskForPercentageRefresh = function () { var t = this; if (!1 !== this.options.animation) { var e = this._calcRefreshFadeDurations(), n = e.fadeOutDuration, i = e.fadeInDuration; this._setupAnimationMask(), setTimeout((function () { return t._teardownAnimationMask() }), n + i) } }, e }(l.default); e.default = g, u.registerPlotType("funnel", g) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), n(20).registerTheme("funnel", {}) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(5), a = n(21); function s(t, e, n) { return (1 - n) * t + n * e } var u = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.setLabelPosition = function (t, e, n) { var i = this.get("coord"), r = i.isTransposed, o = i.convertPoint(e.points[0]), a = i.convertPoint(e.points[2]), s = (o.x - a.x) / 2 * (r ? -1 : 1), u = (o.y - a.y) / 2 * (r ? -1 : 1); r ? t.x -= s : t.y += u, t.textAlign = "center", t.textBaseline = "middle" }, e.prototype.getLabelPoint = function (t, e, n) { var i = t.text.length; function o(e, n) { var i, o, a = e; return r.isArray(a) && (1 === t.text.length ? a.length <= 2 ? a = a[e.length - 1] : (i = a, o = 0, r.each(i, (function (t) { o += t })), a = o / i.length) : a = a[n]), a } var a = { text: t.text[n], x: 0, y: 0, start: { x: 0, y: 0 }, color: "#fff" }; a.x = o(e.x, n), a.y = o(e.y, n), this.setLabelPosition(a, e, n); var s = this.getLabelOffset(t, n, i); return t.offsetX && (s.x += t.offsetX), t.offsetY && (s.y += t.offsetY), this.transLabelPoint(a), a.start = { x: a.x, y: a.y }, a.x += s.x, a.y += s.y, a.color = e.color, a }, e.prototype.showLabels = function (e, n) { var i = this; t.prototype.showLabels.call(this, e, n); var o = this.get("labelsRenderer").get("group").get("children"), a = this.get("element").get("view"); r.each(o, (function (t, e) { var r = t, o = r.get("origin"), a = i.get("element").getShapeId(o), s = i._getShape(a, n); i.get("labelOptions").adjustColor && i.adjustColor(r, s) })), a.get("canvas").draw() }, e.prototype.adjustColor = function (t, e) { var n = e.attr("fill"), i = r.isNumber(e.attr("opacity")) ? Math.min(Math.max(0, e.attr("opacity")), 1) : 1, o = a.rgb2arr(n), u = Math.round(.299 * o[0] + .587 * o[1] + .114 * o[2]) / i < 156 ? "#f6f6f6" : "#303030"; t.attr("fill", u); var l = this.get("coord"), c = e.getBBox(), h = l.invertMatrix(c.x, c.y, 1), p = h[0], f = h[1], d = l.invertMatrix(c.width, c.height, 0), g = [p + d[0], f + d[1]], v = g[0], y = g[1], m = Math.min(p, v), x = Math.max(p, v), _ = Math.min(f, y), b = Math.max(f, y), w = e.get("__compare__"); if (w) { var M = w.yValues; t.attr({ x: w.transpose ? (m + x) / 2 : s(m, x, M[0] / (M[0] + M[1])), y: w.transpose ? s(_, b, M[0] / (M[0] + M[1])) : (_ + b) / 2 }) } var S = t.getBBox(), C = S.minX >= m && S.maxX <= x && S.minY >= _ && S.maxY <= b; t.set("visible", C) }, e.prototype._getShape = function (t, e) { var n; return r.each(e, (function (e) { var i = e; i.id === t && (n = i) })), n }, e }(o.ElementLabels); e.FunnelLabel = u, o.registerElementLabels("funnelLabel", u) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(2)), o = n(5), a = i.__importStar(n(0)); function s(t, e, n) { var i = e || {}, o = i.duration, s = void 0 === o ? 200 : o, u = i.easing, l = i.callback, c = i.reverse, h = t.getBBox(), p = c ? h.maxX : h.minX, f = (h.minY + h.maxY) / 2, d = t.get("index"), g = function (t) { var e = t.start, n = t.end, i = t.width, o = t.height; return new r.Shapes.Rect({ attrs: { x: e.x, y: n.y, width: i, height: o } }) }(n), v = a.clone(g.attr("matrix")); g.attr("transform", [["t", -p, -f], ["s", 0, 1], ["t", p, f]]); var y = t.attr("fillOpacity"); t.attr("fillOpacity", 0), t.attr("clip", g), g.animate({ matrix: v }, s, u, (function () { g.remove(), t.attr("clip", null) }), d * s), t.animate({ fillOpacity: y }, s, u, null, d * s), l && setTimeout((function () { return l(t) }), s + d * s) } s.animationName = "funnelScaleInX", o.Animate.registerAnimation("appear", "funnelScaleInX", s) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(2)), o = n(5), a = i.__importStar(n(0)); function s(t, e, n) { var i = e || {}, o = i.duration, s = void 0 === o ? 200 : o, u = i.easing, l = i.callback, c = i.reverse, h = t.getBBox(), p = (h.minX + h.maxX) / 2, f = c ? h.minY : h.maxY, d = t.get("index"), g = function (t) { var e = t.start, n = t.end, i = t.width, o = t.height; return new r.Shapes.Rect({ attrs: { x: e.x, y: n.y, width: i, height: o } }) }(n), v = a.clone(g.attr("matrix")); g.attr("transform", [["t", -p, -f], ["s", 1, 0], ["t", p, f]]); var y = t.attr("fillOpacity"); t.attr("fillOpacity", 0), t.attr("clip", g), g.animate({ matrix: v }, s, u, (function () { g.remove(), t.attr("clip", null) }), d * s), t.animate({ fillOpacity: y }, s, u, null, d * s), l && setTimeout((function () { return l(t) }), s + d * s) } s.animationName = "funnelScaleInY", o.Animate.registerAnimation("appear", "funnelScaleInY", s) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(5), a = n(101); o.registerShape("interval", "funnel-basic-rect", { getPoints: function (t) { return t.size = 1.8 * t.size, function (t, e) { void 0 === e && (e = !1); var n, i, o, a, s = t.x, u = t.y, l = t.y0, c = t.size; r.isArray(u) ? (n = u[0], i = u[1]) : (n = l, i = u), r.isArray(s) ? (o = s[0], a = s[1]) : (o = s - c / 2, a = s + c / 2); var h = [{ x: o, y: n }, { x: o, y: i }]; return e ? h.push({ x: a, y: (i + n) / 2 }) : h.push({ x: a, y: i }, { x: a, y: n }), h }(t) }, draw: function (t, e) { var n, s = function (t) { var e = o.Global.theme.shape.interval.rect.default, n = r.mix({}, e, t.style); return a.setFillStyle(n, t), n }(t), u = r.get(t, "origin._origin.__compare__"), l = function (t, e) { var n = [], i = t.points, o = t.nextPoints; if (e) { var a = e.yValues, s = e.yValuesMax, u = e.yValuesNext, l = (i[0].y + i[1].y) / 2, c = a[0] + a[1], h = a.map((function (t) { return t / c / .5 })), p = .9 * (s[0] / (s[0] + s[1]) - .5); if (r.isNil(o)) n.push(["M", i[0].x, p + (i[0].y - l) * h[0] + l], ["L", i[1].x, p + l], ["L", i[2].x, p + l], ["L", i[3].x, p + (i[3].y - l) * h[0] + l], ["Z"]), n.push(["M", i[0].x, p + .002 + l], ["L", i[1].x, p + .002 + (i[1].y - l) * h[1] + l], ["L", i[2].x, p + .002 + (i[2].y - l) * h[1] + l], ["L", i[3].x, p + .002 + l], ["Z"]); else { var f = u[0] + u[1], d = u.map((function (t) { return t / f / .5 })); n.push(["M", i[0].x, p + (i[0].y - l) * h[0] + l - .001], ["L", i[1].x, p + l - .001], ["L", o[1].x, p + l - .001], ["L", o[0].x, p + (o[3].y - l) * d[0] + l - .001], ["Z"]), n.push(["M", i[0].x, p + l + .001], ["L", i[1].x, p + (i[1].y - l) * h[1] + l + .001], ["L", o[1].x, p + (o[2].y - l) * d[1] + l + .001], ["L", o[0].x, p + l + .001], ["Z"]) } } else r.isNil(o) ? n.push(["M", i[0].x, i[0].y], ["L", i[1].x, i[1].y], ["L", i[2].x, i[2].y], ["L", i[3].x, i[3].y], ["Z"]) : n.push(["M", i[0].x, i[0].y], ["L", i[1].x, i[1].y], ["L", o[1].x, o[1].y], ["L", o[0].x, o[0].y], ["Z"]); return n }(t, u); return l = this.parsePath(l), e.addShape("path", ((n = { attrs: i.__assign(i.__assign({}, s), { path: l }) }).__compare__ = u, n)) }, getMarkerStyle: function (t) { var e = { symbol: "square", radius: 4 }; return a.setFillStyle(e, t), e } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(5), a = n(101); function s(t, e, n) { return (1 - n) * t + n * e } o.registerShape("interval", "funnel-dynamic-rect", { draw: function (t, e) { var n = function (t) { var e = o.Global.theme.shape.interval.rect.default, n = r.mix({}, e, t.style); return a.setFillStyle(n, t), n }(t), u = function (t, e) { var n = e.reverse, i = e.ratioUpper, r = e.ratioLower, o = [], a = t[0], u = (t[1].x + t[2].x) / 2; if (n) { var l = r; r = i, i = l } var c = (a.x - u) * s(.6, 1.2, r) + u; o.push(["M", c, a.y]); for (var h = 1, p = t.length; h < p; h++) { var f = t[h].x; switch (h) { case 1: case 2: f = (f - u) * s(.6, 1.2, i) + u; break; case 3: f = (f - u) * s(.6, 1.2, r) + u }o.push(["L", f, t[h].y]) } return o.push(["L", c, a.y]), o.push(["z"]), o }(t.points, r.get(t, "origin._origin.__custom__")); return u = this.parsePath(u), e.addShape("path", { attrs: i.__assign(i.__assign({}, n), { path: u }) }) }, getMarkerStyle: function (t) { var e = t.isInCircle, n = { symbol: e ? "circle" : "square", radius: e ? 4.5 : 4 }; return a.setFillStyle(n, t), n } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(68)), a = n(46), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.parseFormatter = function (t) { for (var e = this, n = [], i = 1; i < arguments.length; i++)n[i - 1] = arguments[i]; var o = this.originConfig, s = a.combineFormatter(a.getNoopFormatter(), a.getPrecisionFormatter(o.precision), a.getSuffixFormatter(o.suffix)), u = this.plot.options; t.formatter = function (n, i, a) { var l = function (t, e) { var u = s(t, i, a); return r.isFunction(o.formatter) ? o.formatter(n, i, a, t, e) : n + " " + u }; if (u.compareField) { var c = r.get(i, "_origin.__compare__.yValues"), h = r.get(e.plot.getData(), "0.__compare__.yValues"); return u.transpose && r.set(t, "textStyle.lineHeight", r.get(t, "textStyle.fontSize", 12)), [0, 1].map((function (t) { var e = c[t], n = h[t]; return l(e, n) })).join(u.transpose ? "\n\n" : "    ") } var p = r.get(i, "_origin." + u.yField), f = r.get(e.plot.getData(), "0." + u.yField); return l(p, f) } }, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(275)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "heatmap", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(8)), s = n(9), u = n(11), l = n(17); n(276); var c = i.__importDefault(n(277)), h = i.__importDefault(n(278)); n(52); var p = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "heatmap", e.count = 0, e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { xAxis: { visible: !0, autoHideLabel: !0, autoRotateLabel: !0, autoRotateTitle: !1, grid: { visible: !1 }, line: { visible: !0 }, tickLine: { visible: !0 }, label: { visible: !0 }, title: { visible: !0, offset: 12 } }, yAxis: { visible: !0, autoHideLabel: !0, autoRotateLabel: !1, autoRotateTitle: !0, grid: { visible: !1 }, line: { visible: !0 }, tickLine: { visible: !0 }, label: { visible: !0 }, title: { visible: !0, offset: 12 } }, tooltip: { visible: !0, crosshairs: { type: "cross", style: { lineWidth: 2 } } }, legend: { visible: !0, position: "bottom-center" }, color: ["rgba(33,102,172,0)", "rgb(103,169,207)", "rgb(209,229,240)", "rgb(253,219,199)", "rgb(239,138,98)", "rgb(178,24,43)"] }) }, e.prototype.afterRender = function () { this.options.legend && this.options.legend.visible && (this.heatmapLegend = new c.default(i.__assign({ view: this.view, plot: this }, this.options.legend)), this.heatmapLegend.render(), this.paddingController.registerPadding(this.heatmapLegend, "outer")), this.options.background && "auto" !== this.options.padding && (this.background = new h.default(i.__assign({ view: this.view, plot: this }, this.options.background)), this.background.render()), t.prototype.afterRender.call(this), this.count += 1 }, e.prototype.destroy = function () { this.heatmapLegend && (this.heatmapLegend.destroy(), this.heatmapLegend = null), this.background && (this.background.destroy(), this.background = null), t.prototype.destroy.call(this) }, e.prototype.scale = function () { var e = this.options, n = {}; n[e.xField] = {}, r.has(e, "xAxis") && l.extractScale(n[e.xField], e.xAxis), n[e.yField] = {}, r.has(e, "yAxis") && l.extractScale(n[e.yField], e.yAxis), this.setConfig("scales", n), t.prototype.scale.call(this) }, e.prototype.coord = function () { }, e.prototype.geometryParser = function (t, e) { return "heatmap" }, e.prototype.addGeometry = function () { var t = { type: "linearHeatmap", position: { fields: [this.options.xField, this.options.yField] }, color: { fields: [this.options.colorField], values: this.options.color } }; this.options.radius && (t.radius = this.options.radius), this.options.intensity && (t.intensity = this.options.intensity), this.setConfig("element", t), this.addPoint() }, e.prototype.addPoint = function () { var t = this.options, e = { visible: !1, size: 0 }; t.point && t.point.visible ? t.point = r.deepMix(e, t.point) : t.point = e; var n = u.getGeom("point", "guide", { plot: this }); n.active = !1, n.label = this.extractLabel(), this.setConfig("element", n) }, e.prototype.extractLabel = function () { var t = this.options, e = t.label; return (!e || !1 !== e.visible) && s.getComponent("label", i.__assign({ plot: this, labelType: "scatterLabel", fields: [t.xField, t.yField], position: "middle", offset: 0 }, e)) }, e.prototype.legend = function () { this.setConfig("legends", !1) }, e.prototype.animation = function () { }, e }(a.default); e.default = p, o.registerPlotType("heatmap", p) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = i.__importStar(n(0)), a = i.__importStar(n(21)), s = function (t) { function e(e) { return t.call(this, i.__assign({ type: "linearHeatmap", shapeType: "point", paletteCache: {} }, e)) || this } return i.__extends(e, t), e.prototype._prepareRange = function () { var t = this.get("mappedData"), e = this.getAttr("color").scales[0].field, n = 1 / 0, i = -1 / 0; t.forEach((function (t) { var r = t._origin[e]; r > i && (i = r), r < n && (n = r) })), n === i && (n = i - 1); var r = [n, i]; this.set("valueRange", r) }, e.prototype._prepareSize = function () { var t; this.get("radius") ? t = this.get("radius") : (t = this.getDefaultValue("size"), o.isNumber(t) || (t = this.getDefaultSize())); var e = this.get("styleOptions"), n = e && o.isObject(e.cfg) ? e.cfg.blur : null; o.isFinite(n) && null !== n || (n = t / 2), this.set("heatmapSize", { blur: n, radius: t }) }, e.prototype.getDefaultSize = function () { var t = this.getAttr("position"), e = this.get("coord"); return Math.min(e.width / (4 * t.scales[0].ticks.length), e.height / (4 * t.scales[1].ticks.length)) }, e.prototype._colorize = function (t) { for (var e = this.getAttr("color"), n = t.data, i = this.get("paletteCache"), r = 3; r < n.length; r += 4) { var o = n[r]; if (o) { var s = void 0; i[o] ? s = i[o] : (s = a.rgb2arr(e.gradient(o / 256)), i[o] = s), n[r - 3] = s[0], n[r - 2] = s[1], n[r - 1] = s[2], n[r] = o } } }, e.prototype._prepareGreyScaleBlurredCircle = function (t) { var e = this.get("grayScaleBlurredCanvas"); e || (e = document.createElement("canvas"), this.set("grayScaleBlurredCanvas", e)); var n = this.get("intensity") ? this.get("intensity") : 2, i = Math.sqrt(-2 * Math.log(1 / 255 / 16 / t / n / .3989422804014327)) / 3 * t, r = i - t, o = i + r, a = e.getContext("2d"); e.width = e.height = 2 * o, a.clearRect(0, 0, e.width, e.height), a.shadowOffsetX = a.shadowOffsetY = 2 * o, a.shadowBlur = r, a.shadowColor = "black", a.beginPath(), a.arc(-o, -o, t, 0, 2 * Math.PI, !0), a.closePath(), a.fill() }, e.prototype._drawGrayScaleBlurredCircle = function (t, e, n, i, r) { var o = this.get("grayScaleBlurredCanvas"); r.globalAlpha = i, r.drawImage(o, t - n, e - n) }, e.prototype._getShadowCanvasCtx = function () { var t = this.get("shadowCanvas"); t || (t = document.createElement("canvas"), this.set("shadowCanvas", t)); var e = this.get("view").get("panelRange"); t.width = e.width, t.height = e.height; var n = t.getContext("2d"); return n.globalCompositeOperation = "lighter", n }, e.prototype._clearShadowCanvasCtx = function () { var t = this._getShadowCanvasCtx(); t.clearRect(0, 0, t.canvas.width, t.canvas.height) }, e.prototype._getImageShape = function () { var t = this.get("imageShape"); return t || (t = this.get("container").addShape("Image", {}), this.set("imageShape", t), t) }, e.prototype.clear = function () { this._clearShadowCanvasCtx(), t.prototype.clear.call(this) }, e.prototype.drawWithRange = function (t) { var e = this.get("coord"), n = e.start, i = e.end, r = e.width, o = e.height, a = this.getAttr("color").scales[0].field, s = this.get("heatmapSize"); this._clearShadowCanvasCtx(); var u = this._getShadowCanvasCtx(), l = this.get("mappedData"); t && (l = l.filter((function (e) { return e._origin[a] <= t[1] && e._origin[a] >= t[0] }))); for (var c = this.get("scales")[a], h = 0; h < l.length; h++) { var p = l[h], f = this.getDrawCfg(p), d = c.scale(p._origin[a]); this._drawGrayScaleBlurredCircle(f.x - n.x, f.y - i.y, s.radius + s.blur, d, u) } var g = u.getImageData(0, 0, r, o); this._clearShadowCanvasCtx(), this._colorize(g), u.putImageData(g, 0, 0); var v = new Image; v.src = u.canvas.toDataURL("image/png"), this._getImageShape().attr({ x: n.x, y: i.y, width: r, height: o, img: v }) }, e.prototype.draw = function (t) { this.set("mappedData", t), this._prepareRange(), this._prepareSize(); var e = this.get("heatmapSize"); this._prepareGreyScaleBlurredCircle(e.radius); var n = this.get("valueRange"); this.drawWithRange(n) }, e }(r.Element); r.registerElement("linearHeatmap", s) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(2), a = function () { function t(t) { this.destroyed = !1, this.dataSlides = {}; var e = this.getDefaultOptions(); t.plot.options.theme && "dark" === t.plot.options.theme && (e = this.getDarkOptions()), this.options = r.deepMix({}, e, t), this.view = this.options.view, this.afterRender = !0, this.init() } return t.prototype.init = function () { this.layout = this.getLayout(), this.width = this.options.width ? this.options.width : this.getDefaultWidth(), this.height = this.options.height ? this.options.height : this.getDefaultHeight(); var t = this.options.plot.container; this.container = t.addGroup() }, t.prototype.render = function () { var t = this.view.get("scales"), e = this.options.plot.options.colorField; this.colorScale = t[e]; var n = this.colorScale, i = n.min, r = n.max, o = this.options.plot.options.color; "horizontal" === this.layout ? this.renderHorizontal(i, r, o) : this.renderVertical(i, r, o), this.legendLayout(), this.addInteraction() }, t.prototype.hide = function () { this.container.set("visible", !1), this.options.plot.canvas.draw() }, t.prototype.show = function () { this.container.set("visible", !0), this.options.plot.canvas.draw() }, t.prototype.clear = function () { this.container && this.container.clear() }, t.prototype.destroy = function () { this.container && this.container.remove(), this.destroyed = !0 }, t.prototype.getBBox = function () { var t = this.container.getBBox(); return new o.BBox(this.x, this.y, t.width, t.height) }, t.prototype.renderVertical = function (t, e, n) { var a = this, s = this.width, u = this.height / n.length, l = new o.Group, c = r.clone(n).reverse(), h = (e - t) / n.length; r.each(c, (function (t, n) { var r = u * n, o = { to: e - h * n, from: e - h * (n + 1) }; a.container.addShape("rect", { attrs: { x: 0, y: r, width: s, height: u, fill: t, opacity: 1, cursor: "pointer" }, name: "grid" }).set("info", o); var c = a.getDataSlide(o); a.dataSlides[o.from + "-" + o.to] = { mode: "active", data: c }; l.addShape("path", { attrs: i.__assign({ path: [["M", 0, r + u], ["L", s, r + u]] }, a.options.gridlineStyle) }) })); this.container.addShape("text", { attrs: i.__assign({ text: e, x: s / 2, y: -4, textAlign: "center", textBaseline: "bottom" }, this.options.text.style) }), this.container.addShape("text", { attrs: i.__assign({ text: t, x: s / 2, y: this.height + 4, textAlign: "center", textBaseline: "top" }, this.options.text.style) }), l.addShape("path", { attrs: i.__assign({ path: [["M", 0, 0], ["L", this.width, 0], ["L", this.width, this.height], ["L", 0, this.height], ["L", 0, 0]] }, this.options.gridlineStyle) }); this.container.add(l) }, t.prototype.renderHorizontal = function (t, e, n) { var a = this, s = this.width / n.length, u = this.height, l = new o.Group, c = (e - t) / n.length; r.each(n, (function (t, e) { var n = s * e, r = { from: c * e, to: c * (e + 1) }; a.container.addShape("rect", { attrs: { x: n, y: 0, width: s, height: u, fill: t, opacity: .8, cursor: "pointer" }, name: "grid" }).set("info", r); l.addShape("path", { attrs: i.__assign({ path: [["M", n + s, 0], ["L", n + s, u]] }, a.options.gridlineStyle) }) })), this.container.addShape("text", { attrs: i.__assign(i.__assign({ text: t, x: -4, y: u / 2 }, this.options.text.style), { textAlign: "right", textBaseline: "middle" }) }), this.container.addShape("text", { attrs: i.__assign({ text: e, x: this.width + 4, y: u / 2, textAlign: "left", textBaseline: "middle" }, this.options.text.style) }), l.addShape("path", { attrs: i.__assign({ path: [["M", 0, 0], ["L", this.width, 0], ["L", this.width, this.height], ["L", 0, this.height], ["L", 0, 0]] }, this.options.gridlineStyle) }), this.container.add(l) }, t.prototype.getLayout = function () { var t = this.options.position.split("-"); return this.position = t[0], "left" === t[0] || "right" === t[0] ? "vertical" : "horizontal" }, t.prototype.getDefaultWidth = function () { return "horizontal" === this.layout ? .5 * this.options.plot.options.width : 10 }, t.prototype.getDefaultHeight = function () { return "vertical" === this.layout ? .5 * this.options.plot.options.height : 10 }, t.prototype.legendLayout = function () { var t = this, e = this.options.plot.getPlotTheme().bleeding; r.isArray(e) && r.each(e, (function (n, i) { "function" == typeof e[i] && (e[i] = e[i](t.options.plot.options)) })); var n = this.container.getBBox(), i = 0, o = 0, a = this.options.position.split("-"), s = this.options.plot.width, u = this.options.plot.height; "left" === a[0] ? i = e[3] : "right" === a[0] ? i = s - e[1] - n.width : "center" === a[1] ? i = (s - n.width) / 2 : "left" === a[1] ? i = e[3] : "right" === a[1] && (i = this.options.plot.width - e[1] - n.width), "bottom" === a[0] ? o = u - e[2] - n.height : "top" === a[0] ? o = this.getTopPosition(e) : "center" === a[1] ? o = (u - n.height) / 2 : "top" === a[1] ? o = e[0] : "bottom" === a[1] && (o = u - e[2] - n.height), this.x = i, this.y = o, this.container.translate(i, o) }, t.prototype.getDefaultOptions = function () { return { text: { style: { fontSize: 12, fill: "rgba(0, 0, 0, 0.45)" } }, gridlineStyle: { lineWidth: 1, stroke: "rgba(0, 0, 0, 0.45)" } } }, t.prototype.getDarkOptions = function () { return { text: { style: { fontSize: 12, fill: "rgba(255, 255, 255, 0.45)" } }, gridlineStyle: { lineWidth: 1, stroke: "rgba(255, 255, 255, 0.25)" } } }, t.prototype.addInteraction = function () { var t = this, e = this.options.plot.options, n = e.colorField; e.data; this.container.on("click", (function (e) { var i = e.target; if ("grid" === i.get("name")) { var r = i.get("info"), o = r.from + "-" + r.to, a = t.dataSlides[o]; "active" === a.mode ? (a.mode = "deactive", i.stopAnimate(), i.animate({ opacity: .4 }, 200)) : (a.mode = "active", i.stopAnimate(), i.animate({ opacity: 1 }, 200)); var s = t.getFilteredData(); s.length > 0 && (t.view.set("data", s), t.view.scale(n, { min: t.colorScale.min, max: t.colorScale.max, nice: t.colorScale.nice }), t.view.render()) } })) }, t.prototype.getFilteredData = function () { var t = []; return r.each(this.dataSlides, (function (e) { "active" == e.mode && t.push.apply(t, e.data) })), t }, t.prototype.getDataSlide = function (t) { var e = [], n = this.options.plot.options, i = n.colorField, o = n.data; return r.each(o, (function (n) { var r = n[i]; r >= t.from && r < t.to && e.push(n) })), e }, t.prototype.getTopPosition = function (t) { return this.options.plot.description ? this.options.plot.description.getBBox().maxY + 10 : this.options.plot.title ? this.options.plot.title.getBBox().maxY + 10 : t[0] }, t }(); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e(e) { var n = t.call(this) || this; return n.options = e, n.view = n.options.view, n.init(), n } return i.__extends(e, t), e.prototype.init = function () { var t = this.view.get("coord"); this.width = t.width, this.height = t.height, this.x = t.start.x, this.y = t.end.y; var e = this.options.plot.container; this.container = e.addGroup(), this.container.setZIndex(-100) }, e.prototype.render = function () { if ("color" === this.options.type) this.renderColorBackground(); else if ("image" === this.options.type) this.renderImageBackground(); else if (this.options.callback) { var t = { x: this.x, y: this.y, width: this.width, height: this.height, container: this.container }; this.options.callback(t) } }, e.prototype.renderColorBackground = function () { this.container.addShape("rect", { attrs: { x: this.x, y: this.y, width: this.width, height: this.height, fill: this.options.value } }) }, e.prototype.renderImageBackground = function () { this.container.addShape("image", { attrs: { x: this.x, y: this.y, width: this.width, height: this.height, img: this.options.src } }) }, e.prototype.clear = function () { this.container && (this.container.clear(), this.emit("background:clear")) }, e.prototype.destroy = function () { this.container && (this.container.remove(), this.emit("background:destroy")) }, e }(i.__importDefault(n(22)).default); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(280)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "matrix", t.prototype.createLayers.call(this, n) }, e.prototype.changeShape = function (t) { this.layers[0].changeShape(t) }, e.prototype.mappingSize = function (t) { this.layers[0].mappingSize(t) }, e.prototype.disableMappingSize = function () { this.layers[0].disableMappingSize() }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(2), a = n(13), s = n(7), u = i.__importDefault(n(8)), l = n(9), c = i.__importDefault(n(102)), h = n(281); n(282), n(102); var p = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "matrix", e.gridSize = [], e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { forceSquare: !1, shapeType: "rect", legend: { visible: !0, position: "right-center" }, tooltip: { shared: !1, crosshairs: !1 }, xAxis: { visible: !0, gridAlign: "center", grid: { visible: !0 }, tickLine: { visible: !0 }, line: { visible: !1 }, autoRotateLabel: !0 }, yAxis: { visible: !0, gridAlign: "center", grid: { visible: !0, align: "center" }, tickLine: { visible: !0 }, autoRotateLabel: !0 }, color: ["#9ae3d5", "#66cdbb", "#e7a744", "#f1e066", "#f27664", "#e7c1a2"], label: { visible: !0, adjustColor: !0, adjustPosition: !0, offset: 0, style: { stroke: "rgba(255,255,255,0)", lineWidth: 0 } } }) }, e.prototype.afterInit = function () { if (t.prototype.afterInit.call(this), this.options.forceSquare) { var e = this.view.get("panelRange"), n = this.options, i = n.xField, a = n.yField, s = n.data, u = r.valuesOfKey(s, i).length, l = r.valuesOfKey(s, a).length, c = Math.min(e.width, e.height) / Math.max(u, l), h = c * u, p = c * l; this.view.set("panelRange", new o.BBox(e.x, e.y, h, p)) } }, e.prototype.afterRender = function () { this.options.legend && this.options.legend.visible && (this.matrixLegend = new c.default(i.__assign({ view: this.view, plot: this }, this.options.legend)), this.matrixLegend.render(), this.paddingController.registerPadding(this.matrixLegend, "outer")), t.prototype.afterRender.call(this) }, e.prototype.changeShape = function (t) { if (this.options.shapeType !== t) if (this.options.shapeType = t, "rect" === t) { var e = this.view.get("elements")[0].getShapes(); this.circleToRect(e) } else if ("circle" === t) { e = this.view.get("elements")[0].getShapes(); this.rectToCircle(e) } }, e.prototype.mappingSize = function (t) { if (!this.options.sizeField || this.options.sizeField !== t) { var e = r.valuesOfKey(this.options.data, t), n = Math.min.apply(Math, e), i = Math.max.apply(Math, e), o = new (a.getScale("linear"))({ min: n, max: i }), s = this.view.get("elements")[0].getShapes(); "rect" === this.options.shapeType ? this.rectSizeMapping(s, o, t) : "circle" === this.options.shapeType && this.circleSizeMapping(s, o, t) } }, e.prototype.disableMappingSize = function () { var t = this.view.get("elements")[0].getShapes(); "rect" === this.options.shapeType ? this.rectDisableSizeMapping(t) : "circle" === this.options.shapeType && this.circleDisableSizeMapping(t) }, e.prototype.geometryParser = function () { return "" }, e.prototype.coord = function () { }, e.prototype.legend = function () { this.setConfig("legends", !1) }, e.prototype.addGeometry = function () { if (this.gridSize = this.getGridSize(), "rect" === this.options.shapeType) { var t = this.addRect(); this.setConfig("element", t) } else { var e = this.addCircle(); this.setConfig("element", e) } }, e.prototype.addRect = function () { var t = [.3, .9]; this.options.shapeSize && (t[0] = this.options.shapeSize[0] / this.gridSize[0], t[1] = this.options.shapeSize[1] / this.gridSize[1]); var e = { type: "polygon", position: { fields: [this.options.xField, this.options.yField] }, color: { fields: [this.options.colorField], values: this.options.color }, shape: { values: ["rect"] }, label: this.extractLabel() }; return this.options.sizeField ? e.size = { fields: [this.options.sizeField], values: t } : e.size = { values: [1] }, e }, e.prototype.addCircle = function () { var t = [.3, .9]; this.options.shapeSize ? t = this.options.shapeSize : (t[0] = this.gridSize[0] * t[0] * .5, t[1] = this.gridSize[1] * t[1] * .5); var e = { type: "point", position: { fields: [this.options.xField, this.options.yField] }, color: { fields: [this.options.colorField], values: this.options.color }, shape: { values: ["curvePoint"] }, label: this.extractLabel() }; return this.options.sizeField ? e.size = { fields: [this.options.sizeField], values: t } : e.size = { values: [.5 * Math.min(this.gridSize[0], this.gridSize[1]) * .9] }, e }, e.prototype.extractLabel = function () { var t = this.options.label; return !!t.visible && (!(!this.options.sizeField && !this.options.colorField) && l.getComponent("label", i.__assign({ plot: this, top: !0, labelType: "matrixLabel", fields: this.options.colorField ? [this.options.colorField] : [this.options.sizeField] }, t))) }, e.prototype.getGridSize = function () { if ("auto" === this.options.padding) return [0, 0]; var t = this.getViewRange(), e = this.options, n = e.padding, i = e.xField, o = e.yField, a = e.data, s = t.width - n[1] - n[3], u = t.height - n[0] - n[2]; return [s / r.valuesOfKey(a, i).length, u / r.valuesOfKey(a, o).length] }, e.prototype.circleToRect = function (t) { var e = this, n = this.gridSize; r.each(t, (function (t) { var i = t.get("origin"), r = i.x, o = i.y, a = i.size, s = 2 * a / Math.min(n[0], n[1]); e.options.sizeField || (s = 1); var u = h.getCircleCurve(r, o, a), l = h.getRectPath(r, o, n[0], n[1], s); t.stopAnimate(), t.attr("path", u), t.animate({ path: l }, 500, "easeLinear") })) }, e.prototype.rectToCircle = function (t) { var e = this; r.each(t, (function (t) { var n = t.get("coord"), i = t.get("origin").points, o = []; r.each(i, (function (t) { o.push(n.convertPoint(t)) })); var a = t.getBBox(), s = a.width, u = a.height, l = a.minX + s / 2, c = a.minY + u / 2, p = e.options.sizeField ? 1 : .9, f = h.getCircleCurve(l, c, Math.min(s, u) / 2 * p), d = h.getCirclePath(l, c, Math.min(s, u) / 2 * p); t.stopAnimate(), t.animate({ path: f }, 500, "easeLinear", (function () { t.attr("path", d) })) })) }, e.prototype.rectSizeMapping = function (t, e, n) { r.each(t, (function (t) { var i = t.get("origin")._origin, r = .3 + .6 * e.scale(i[n]); t.get("origin").size = r; var o = t.getBBox(), a = o.width, s = o.height, u = o.minX + a / 2, l = o.minY + s / 2, c = h.getRectPath(u, l, a, s, r); t.stopAnimate(), t.animate({ path: c }, 500, "easeLinear") })) }, e.prototype.circleSizeMapping = function (t, e, n) { r.each(t, (function (t) { var i = t.get("origin")._origin, r = .3 + .6 * e.scale(i[n]), o = t.get("origin"), a = o.x, s = o.y, u = o.size, l = h.getCirclePath(a, s, u * r); t.get("origin").size = u * r, t.stopAnimate(), t.animate({ path: l }, 500, "easeLinear") })) }, e.prototype.circleDisableSizeMapping = function (t) { var e = this; r.each(t, (function (t) { var n = t.get("origin"), i = n.x, r = n.y, o = .9 * Math.min(e.gridSize[0], e.gridSize[1]); t.get("origin").size = o / 2; var a = h.getCirclePath(i, r, o / 2); t.stopAnimate(), t.animate({ path: a }, 500, "easeLinear") })) }, e.prototype.rectDisableSizeMapping = function (t) { var e = this; r.each(t, (function (t) { var n = t.getBBox(), i = n.width, r = n.height, o = n.minX + i / 2, a = n.minY + r / 2, s = h.getRectPath(o, a, e.gridSize[0], e.gridSize[1], 1); t.get("origin").size = 1, t.stopAnimate(), t.animate({ path: s }, 500, "easeLinear") })) }, e }(u.default); e.default = p, s.registerPlotType("matrix", p) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(5); function r(t, e, n, i, r) { var o = n * r, a = i * r; return [["M", t - o / 2, e + a / 2], ["Q", t - o / 2, e, t - o / 2, e - a / 2], ["Q", t, e - a / 2, t + o / 2, e - a / 2], ["Q", t + o / 2, e, t + o / 2, e + a / 2], ["Q", t, e + a / 2, t - o / 2, e + a / 2], ["Z"]] } function o(t, e, n) { return [["M", t, e], ["m", -n, 0], ["a", n, n, 0, 1, 0, 2 * n, 0], ["a", n, n, 0, 1, 0, -2 * n, 0], ["Z"]] } e.getRectPath = r, e.getCirclePath = o, e.getCircleCurve = function (t, e, n) { return [["M", t - n, e], ["Q", t - n, e - n, t, e - n], ["Q", t + n, e - n, t + n, e], ["Q", t + n, e + n, t, e + n], ["Q", t - n, e + n, t - n, e], ["Z"]] }, i.registerShape("polygon", "rect", { draw: function (t, e) { var n = this.parsePoints(t.points), i = n[2].x - n[0].x, o = n[0].y - n[1].y, a = r(n[0].x + i / 2, n[1].y + o / 2, i, o, t.origin.size); return e.addShape("path", { attrs: { path: a, fill: t.color, opacity: 1 } }) } }), i.registerShape("point", "curvePoint", { draw: function (t, e) { var n = o(t.x, t.y, t.size); return e.addShape("path", { attrs: { path: n, fill: t.color, opacity: 1 } }) } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = i.__importStar(n(0)), a = n(21), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.showLabels = function (e, n) { var i = this; t.prototype.showLabels.call(this, e, n); var r = this.get("labelsRenderer"), a = r.get("group").get("children"), s = r.get("items"), u = this.get("element").get("view"); o.each(a, (function (t, e) { var r = t, o = (s[e], r.get("origin")), a = i.get("element").getShapeId(o), u = i._getShape(a, n), l = i.get("labelOptions"), c = l.adjustColor, h = l.adjustPosition; c && i.adjustColor(r, u), h && i.adjustPosition(r, u) })), u.get("canvas").draw() }, e.prototype._getShape = function (t, e) { var n; return o.each(e, (function (e) { var i = e; i.id === t && (n = i) })), n }, e.prototype.adjustColor = function (t, e) { var n = t.getBBox(), i = e.getBBox(); if (n.minY >= i.minY && n.maxY <= i.maxY) { var r = e.attr("fill"), o = e.attr("opacity") ? e.attr("opacity") : 1, s = a.rgb2arr(r), u = Math.round(.299 * s[0] + .587 * s[1] + .114 * s[2]) / o, l = this.mappingColor([{ from: 0, to: 85, color: "white" }, { from: 85, to: 170, color: "#F6F6F6" }, { from: 170, to: 255, color: "black" }], u); t.attr("fill", l) } }, e.prototype.mappingColor = function (t, e) { var n; return o.each(t, (function (t) { var i = t; e >= i.from && e < i.to && (n = i.color) })), n }, e.prototype.adjustPosition = function (t, e) { var n = t.getBBox(), i = e.getBBox(); (n.width > i.width || n.height > i.height) && (t.attr("opacity", 0), t.attr("fillOpacity", 0), t.attr("strokeOpacity", 0), t.set("capture", !1)) }, e }(r.ElementLabels); e.MatrixLabels = s, r.registerElementLabels("matrixLabel", s) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(55)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "waterfall", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = i.__importStar(n(0)); var a = function (t, e) { e.color && (t.fill = e.color), o.isNumber(e.opacity) && (t.opacity = t.fillOpacity = e.opacity) }; r.registerShape("interval", "waterfall", { draw: function (t, e) { var n = function (t) { var e = r.Global.theme.shape.interval, n = o.mix({}, e, t.style); return a(n, t), t.color && (n.stroke = n.stroke || t.color), n }(t), s = function (t) { for (var e = [], n = 0; n < t.length; n++) { var i = t[n]; if (i) { var r = 0 === n ? "M" : "L"; e.push([r, i.x, i.y]) } } var o = t[0]; return e.push(["L", o.x, o.y]), e.push(["Z"]), e }(t.points); s = this.parsePath(s); var u = e.addShape("path", { attrs: o.mix(n, { path: s }) }), l = o.get(t.style, "leaderLine"); if (l && l.visible) { var c = l.style || {}; if (t.nextPoints) { var h = [["M", t.points[2].x, t.points[2].y], ["L", t.nextPoints[0].x, t.nextPoints[0].y]]; h = this.parsePath(h), e.addShape("path", { attrs: i.__assign({ path: h, stroke: "#d3d3d3", lineDash: [4, 2], lineWidth: 1 }, c) }).name = "leader-line" } } return u } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(38); e.EVENT_MAP = i.EVENT_MAP, e.onEvent = i.onEvent }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = i.__importStar(n(0)), a = n(51), s = n(55), u = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.adjustPosition = function (t, e, n) { var i = e.getBBox(), r = t.get("origin"), a = n.fields[0], u = r[s.VALUE_FIELD], l = r[a], c = o.isArray(u) ? u[1] : u, h = (i.minY + i.maxY) / 2, p = "bottom"; l < 0 ? (h = i.maxY + 2, p = "top") : h = i.minY - 2, t.attr("y", h), t.attr("text", c), t.attr("textBaseline", p) }, e }(a.ColumnLabels); r.registerElementLabels("waterfall", u) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(2), o = i.__importStar(n(0)), a = n(55); var s = function () { function t(t) { this.textAttrs = {}, this.view = t.view, this.fields = t.fields, this.formatter = t.formatter, this.textAttrs = o.mix({ fill: "#fff", fontSize: 12, lineHeight: 12, stroke: "rgba(0, 0, 0, 0.45)" }, t.style), this._init() } return t.prototype.draw = function () { var t = this; if (this.view && !this.view.destroyed) { var e = o.clone(this.view.get("data")); this.container = this.view.get("frontgroundGroup").addGroup(); var n = this.view.get("elements")[0].getShapes().filter((function (t) { return "interval" === t.name })), s = new r.Group; o.each(n, (function (r, u) { if (r.get("origin")) { var l = r.get("origin")._origin, c = r.getBBox(), h = l[a.VALUE_FIELD], p = h; o.isArray(h) && (p = h[1] - h[0]), p = p > 0 ? "+" + p : p, l[a.IS_TOTAL] && (p = h[0] - h[1]); var f = p; if (t.formatter) { var d = n[u].attr("fill"); f = t.formatter("" + p, { _origin: e[u], color: d }, u) } var g = s.addShape("text", { attrs: i.__assign({ text: f, textBaseline: "middle", textAlign: "center", x: (c.minX + c.maxX) / 2, y: (c.minY + c.maxY) / 2 }, t.textAttrs) }); g.getBBox().height > c.height && g.set("visible", !1) } })), this.container.add(s), this.view.get("canvas").draw() } }, t.prototype.clear = function () { this.container && this.container.clear() }, t.prototype._init = function () { var t = this; this.view.on("beforerender", (function () { t.clear() })), this.view.on("afterrender", (function () { t.draw() })) }, t }(); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(289)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "treemap", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(8)), s = n(9), u = i.__importDefault(n(290)), l = n(293), c = i.__importStar(n(298)); n(299); var h = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "line", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { maxLevel: 2, padding: [0, 0, 0, 0], tooltip: { visible: !1 }, legend: { visible: !1 }, xAxis: { visible: !1 }, yAxis: { visible: !1 }, xField: "x", yField: "y", label: { visible: !0, adjustPosition: !0, style: { stroke: "rgba(0,0,0,0)", lineWidth: 0, fontSize: 12 } }, meta: { x: { nice: !1 }, y: { nice: !1 } } }) }, e.prototype.beforeInit = function () { var t = this, e = this.options.interactions; e && r.each(e, (function (e) { "drilldown" === e.type && (t.isDrilldown = !0, t.options.maxLevel = 1) })) }, e.prototype.geometryParser = function (t, e) { return "polygon" }, e.prototype.getTreemapData = function (t, e) { var n = this.getViewRange(), i = u.default(t, n.x, n.y, n.width, n.height); this.recursive(i, 1); var r = []; return this.getAllNodes(i, r, e), r.sort((function (t, e) { return t.depth - e.depth })), this.options.xField = "x", this.options.yField = "y", r }, e.prototype.processData = function () { return this.rootData }, e.prototype.beforInit = function () { t.prototype.beforeInit.call(this); var e = this.options.data, n = this.getTreemapData(e); this.rootData = n }, e.prototype.coord = function () { }, e.prototype.addGeometry = function () { var t = this, e = this.options, n = e.data, i = e.colorField, o = e.color, a = this.getTreemapData(n); this.rootData = a; var s = this.options.maxLevel; this.rect = { type: "polygon", position: { fields: ["x", "y"] }, color: { fields: [i], values: o }, style: { fields: ["depth"], callback: function (e) { var n = { lineWidth: 1, stroke: "rgba(0,0,0,0.3)", opacity: e / s }; return 1 === e && (n = { lineWidth: 1, stroke: "black", opacity: e / s }), r.deepMix({}, n, t.options.rectStyle) } }, label: this.extractLabel() }, this.setConfig("element", this.rect) }, e.prototype.applyInteractions = function () { var t = this, e = this.options.interactions, n = this.view.get("interactions"); r.each(e, (function (e) { var i = l.INTERACTION_MAP[e.type]; if (i) { var o = new i(r.deepMix({}, { view: t.view, plot: t, startEvent: "polygon:click" }, e.cfg)); n[e.type] = o } })) }, e.prototype.animation = function () { t.prototype.animation.call(this), this.isDrilldown && (this.rect.animate = !1) }, e.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, c) }, e.prototype.extractLabel = function () { var t = this.options.label; return !!t.visible && s.getComponent("label", i.__assign({ labelType: "treemapLabel", plot: this, top: !0, fields: ["name"], maxLevel: this.options.maxLevel }, t)) }, e.prototype.recursive = function (t, e) { var n = this, i = this.options.colorField; r.each(t, (function (t) { r.each(t.children, (function (o) { if (o.depth = e, e > 1 && (o.parent = t), r.hasKey(o, i) || (o[i] = t[i]), o.showLabel = !0, !n.isLeaf(o)) { var a = Math.abs(o.y1 - o.y0), s = n.getLabelHeight(), l = a / 2 > s ? s : 4; o.showLabel = 4 !== l; var c = u.default(o, o.x0 + 4, o.y0 + l, o.x1 - 4, o.y1 - 4); n.fillColorField(c, i, o[i]), n.recursive(c, o.depth + 1) } })) })) }, e.prototype.getAllNodes = function (t, e, n) { var o = this, a = n || this.options.maxLevel, s = this.getViewRange(); r.each(t, (function (t) { r.hasKey(t, "x0") && t.depth <= a && e.push(i.__assign(i.__assign({}, t), { x: [t.x0, t.x1, t.x1, t.x0], y: [s.height - t.y1, s.height - t.y1, s.height - t.y0, s.height - t.y0] })), r.hasKey(t, "children") && o.getAllNodes(t.children, e) })) }, e.prototype.fillColorField = function (t, e, n) { r.each(t, (function (t) { r.hasKey(t, e) || (t[e] = n) })) }, e.prototype.getLabelHeight = function () { var t = this.options.label, e = this.getTheme().label.textStyle.fontSize, n = 0; if (t && t.visible) { var i = t.style; n = i && i.fontSize ? i.fontSize : e } return n + 8 }, e.prototype.isLeaf = function (t) { return !t.children || 0 === t.children.length }, e }(a.default); e.default = h, o.registerPlotType("treemap", h) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(291), r = n(292), o = (1 + Math.sqrt(5)) / 2; e.default = function (t, e, n, a, s) { var u = t.children, l = t.value; u.sort((function (t, e) { return e.value - t.value })); for (var c, h, p, f, d, g, v, y, m = [], x = 0, _ = 0; x < u.length;) { var b = a - e, w = s - n; for (h = c = u[_++].value, p = c, d = c * c * (f = Math.max(w / b, b / w) / (l * o)), v = Math.max(h / d, d / p); _ < u.length; _++) { if ((y = u[_].value) < p && (p = y), y > h && (h = y), d = (c += y) * c * f, (g = Math.max(h / d, d / p)) > v) { c -= y; break } v = g } var M = { value: c, dice: b < w, children: u.slice(x, _) }; if (m.push(M), M.dice) { var S = l ? w * c / l : w; i.dice(M, e, n, a, n + S), l && (n += S) } else { var C = l ? b * c / l : b; r.slice(M, e, n, e + C, s), l && (e += C) } l -= c, x = _ } return m } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0); e.dice = function (t, e, n, r, o) { var a = r - e, s = t.children, u = t.value; s.sort((function (t, e) { return e.value - t.value })); var l = a / u, c = e; i.each(s, (function (t) { t.y0 = n, t.y1 = o, t.x0 = c, c += t.value * l, t.x1 = t.x0 + t.value * l })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0); e.slice = function (t, e, n, r, o) { var a = o - n, s = t.children, u = t.value; s.sort((function (t, e) { return e.value - t.value })); var l = a / u, c = n; i.each(s, (function (t) { t.x0 = e, t.x1 = r, t.y0 = c, c += t.value * l, t.y1 = t.y0 + t.value * l })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importDefault(n(294)); e.INTERACTION_MAP = { drilldown: i.default } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(295)), o = i.__importDefault(n(30)), a = n(2), s = n(0), u = n(297), l = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.getInteractionRange = function (t, e) { var n, r = (void 0 === (n = e) && (n = {}), i.__assign({ x: 0, y: 0, startNode: { name: "root" }, itemWidth: 100, itemHeight: 30, padding: [0, 0, 0, 0] }, n)), o = r.padding, s = o[0], u = o[1]; return new a.BBox(t.minX, t.maxY - r.itemHeight - s - u, t.width, r.itemHeight + s + u) }, e.prototype.start = function (t) { var e = this, n = t.data._origin; n.children && (this.parentNode = { shape: t.target, data: { name: s.clone(this.currentNode.name), value: s.clone(this.currentNode.value) }, depth: s.clone(this.currentDepth) }, this.currentDepth++ , u.drillingDown(t.target, this.view, (function () { e.update(n) }))) }, e.prototype.update = function (t) { s.hasKey(this.cache, t.name) || (this.cache[t.name] = t); var e = this.plot.getTreemapData(t, t.depth); this.view.changeData(e), this.adjustScale(this.currentDepth), this.currentNode = t, this.render() }, e.prototype.render = function () { if (this.breadcrumb) { var t = this.getItems(); this.breadcrumb.update({ items: t }), this.layout() } else this.initGeometry(), this.cache = {}, this.saveOriginMapping(), this.container = this.container = this.canvas.addGroup(), this.startNode || (this.startNode = { name: "root" }), "root" === this.startNode.name ? (this.startNodeName = s.hasKey(this.plot.options.data, "name") ? this.plot.options.data.name : "root", this.currentNode = this.plot.options.data, this.currentDepth = 1) : (this.startNodeName = this.startNode.name, this.currentNode = this.startNode), this.y = this.view.get("viewRange").maxY + 10, this.breadcrumb = new r.default({ container: this.container, x: 0, y: this.y, items: this.getItems() }), this.breadcrumb.render(), this.layout(); this.onInteraction() }, e.prototype.clear = function () { }, e.prototype.layout = function () { var t = this.container.getBBox().width, e = (this.plot.width - t) / 2; this.breadcrumb.update({ x: e, y: this.y }) }, e.prototype.getItems = function () { var t = []; if (this.currentNode.name && this.currentNode.name === this.startNodeName) { var e = this.getRootItem(); t.push(e) } else { t = []; var n = []; this.findParent(this.currentNode, n), t.push(this.getRootItem()), s.each(n, (function (e, n) { t.push({ key: String(n + 2), text: e.name, data: e }) })), t.push({ key: String(n.length + 2), text: this.currentNode.name, data: this.currentNode }) } return t }, e.prototype.findParent = function (t, e) { t.parent && (s.hasKey(this.cache, t.parent.name) ? e.push(this.cache[t.parent.name]) : e.push(t.parent), this.findParent(t.parent, e)) }, e.prototype.onInteraction = function () { var t = this; this.container.on("click", (function (e) { var n = e.target.get("parent"); if (n && "item-group" === n.get("class")) { var i = n.get("data"); if (i.data) if (i.text === t.startNodeName) { t.currentDepth - 1 == 1 ? u.rollingUp(t.currentNode.name, t.view, (function () { t.updateRoot(i) })) : t.updateRoot(i), t.currentDepth = 1 } else { if (t.currentNode === i.data) return; var r = s.clone(t.currentDepth); t.currentDepth = parseInt(i.key), r - 1 === t.currentDepth ? u.rollingUp(t.currentNode.name, t.view, (function () { t.update(i.data) })) : t.update(i.data) } } })) }, e.prototype.getRootItem = function () { var t = this.plot.options.data; return { key: "1", text: s.hasKey(t, "name") ? t.name : "root", data: this.plot.rootData } }, e.prototype.saveOriginMapping = function () { var t = this.plot.options, e = { field: t.colorField, values: t.colors }; this.originMapping = e }, e.prototype.adjustScale = function (t) { var e = this.view; if (s.hasKey(this.mapping, String(t))) { if ((i = s.clone(this.mapping[t])).values && s.isFunction(i.values)) { var n = i.values(this.parentNode, this.currentNode); i.values = n } this.view.get("elements")[0].color(i.field, i.values) } else { var i = s.clone(this.originMapping); this.view.get("elements")[0].color(i.field, i.values) } e.render() }, e.prototype.initGeometry = function () { this.geometry = this.view.get("elements")[0]; var t = this.view.get("viewRange"), e = this.geometry.get("container"), n = new a.Rect({ attrs: { x: t.minX, y: t.minY, width: t.width, height: t.height } }); e.attr("clip", n) }, e.prototype.updateRoot = function (t) { this.view.changeData(t.data), this.adjustScale(1), this.currentNode = this.plot.options.data, this.render() }, e }(o.default); e.default = l, o.default.registerInteraction("drilldown", l) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(296)), o = n(2), a = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.listeners = [], e.onItemGroupToggleActive = function (t, n) { return function () { var i = t.get("children").find((function (t) { return "item-background" === t.get("class") })); i && i.attr(n ? e.itemActiveBackgroundStyle : e.itemBackgroundStyle), e.getCanvas().draw() } }, e } return i.__extends(e, t), e.prototype.destroy = function () { this.offEvents(), t.prototype.destroy.call(this) }, e.prototype.init = function (t) { this.x = t.x, this.y = t.y, this.items = t.items || [], this.itemPadding = t.itemPadding || [2, 8, 2, 8], this.backgroundStyle = i.__assign({ lineWidth: 1, stroke: "#ffffff" }, t.backgroundStyle || {}), this.itemBackgroundStyle = i.__assign({ fill: "#fff" }, t.itemBackgroundStyle || {}), this.itemActiveBackgroundStyle = i.__assign({ fill: "#ccc", opacity: .2 }, t.itemActiveBackgroundStyle || {}), this.separator = t.separator || "/", this.separatorStyle = i.__assign({ textBaseline: "top", fill: "#000", opacity: .45 }, t.separatorStyle || {}), this.itemWidth = t.itemWidth, this.itemHeight = t.itemHeight, this.maxItemWidth = t.maxItemWidth, this.textStyle = i.__assign({ textBaseline: "top", fill: "#000", opacity: .45 }, t.textStyle || {}) }, e.prototype.renderInner = function (t) { this.offEvents(), this.renderItems(t, 0, 0), this.group.move(this.x, this.y) }, e.prototype.renderItems = function (t, e, n) { var r, a = this, s = this.itemPadding, u = s[0], l = s[1], c = s[2], h = s[3], p = t.addShape("rect", { class: "breadcrumb-background", attrs: i.__assign({ x: e, y: n, width: 1, height: 1 }, this.backgroundStyle) }); this.items.forEach((function (s, p) { var f = t.addGroup({ id: "item-group-" + s.key, data: s, class: "item-group", attrs: { cursor: "pointer" } }), d = f.addShape("rect", { id: "item-background-" + s.key, class: "item-background", attrs: i.__assign(i.__assign({ x: e, y: n, width: h + l, height: u + c }, a.itemBackgroundStyle), { cursor: "pointer" }) }); d.name = "breadcrumb"; var g = f.addShape("text", { id: "item-text-" + s.key, class: "item-text", attrs: i.__assign(i.__assign({ x: e + h, y: n + u, text: s.text }, a.textStyle), { cursor: "pointer" }) }); g.name = "breadcrumb"; var v = g.getBBox(); r = a.itemHeight || v.height; var y = a.itemWidth || v.width; a.maxItemWidth && (y = Math.min(y, a.maxItemWidth)); var m = { x: e, y: n, width: y + h + l, height: r + u + c }; if (d.attr("width", m.width), d.attr("height", m.height), f.attr("clip", new o.Rect({ attrs: m })), e += m.width, p !== a.items.length - 1) { var x = t.addShape("text", { attrs: i.__assign({ x: e, y: n + u, text: a.separator }, a.separatorStyle), class: "separator" }); e += x.getBBox().width } })), p.attr({ width: e, height: r + u + c }) }, e.prototype.bindEvents = function (t) { var e = this, n = this.items, i = t.get("children").filter((function (t) { return "item-group" === t.get("class") })), r = function (t, i, r) { return function () { var t = i.get("data"), o = n.find((function (e) { return e.key === t })); e.emit(r, { item: o }) } }; i.forEach((function (t) { var n = r(0, t, "onItemClick"), i = r(0, t, "onItemDblclick"), o = e.onItemGroupToggleActive(t, !0), a = e.onItemGroupToggleActive(t, !1); t.on("click", n), t.on("dblclick", i), t.on("mouseenter", o), t.on("mouseleave", a), e.listeners.push({ target: t, event: "click", callback: n }), e.listeners.push({ target: t, event: "dblclick", callback: i }), e.listeners.push({ target: t, event: "mouseenter", callback: o }), e.listeners.push({ target: t, event: "mouseleave", callback: a }) })) }, e.prototype.offEvents = function () { this.listeners && this.listeners.forEach((function (t) { var e = t.target, n = t.event, i = t.callback; e.off(n, i) })), this.listeners = [] }, e }(r.default); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e(e) { var n = t.call(this) || this; return n.container = e.container, n.destroyed = !1, n.group = n.container.addGroup(), n.config = e, n.init(e), n } return i.__extends(e, t), e.prototype.getGroup = function () { return this.group }, e.prototype.getBBox = function () { return this.getGroup().getBBox() }, e.prototype.render = function () { this.renderInner(this.group), this.getCanvas().draw() }, e.prototype.update = function (t) { this.config = i.__assign(i.__assign({}, this.config), t), this.init(i.__assign(i.__assign({}, this.config), { config: t })), this.group.clear(), this.renderInner(this.group), this.getCanvas().draw() }, e.prototype.destroy = function () { this.group.remove(!0), this.destroyed = !0 }, e.prototype.getCanvas = function () { return this.container.get("canvas") }, e.prototype.init = function (t) { }, e.prototype.renderInner = function (t) { }, e }(i.__importDefault(n(22)).default); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(2), o = [1, 0, 0, 0, 1, 0, 0, 0, 1], a = "easeQuadInOut"; function s(t, e) { var n = t.getShapes(), r = []; return i.each(n, (function (t) { var n = e.addShape("path", { attrs: i.deepMix({}, t.attrs, { capture: !1 }) }); r.push(n) })), r } function u(t) { var e = t.get("viewRange"); return { minX: e.minX, minY: e.minY, centerX: (e.maxX - e.minX) / 2, centerY: (e.maxY - e.minY) / 2, width: e.width, height: e.height } } function l(t) { var e = t.attr("path"), n = e[0][1], i = e[0][2], r = e[1][1], o = e[2][2]; return { minX: n, minY: o, centerX: (r - n) / 2, centerY: (i - o) / 2, width: Math.abs(r - n), height: Math.abs(i - o) } } function c(t) { t.get("labelController").labelsContainer.set("visible", !1) } function h(t) { t.get("labelController").labelsContainer.set("visible", !0) } e.drillingDown = function (t, e, n) { var p = l(t), f = u(e), d = f.width / p.width, g = f.height / p.height, v = { transform: [["s", d, g], ["t", (f.minX - p.minX) * d, (f.minY - p.minY) * g]] }, y = e.get("elements")[0]; c(y); var m = new r.Rect({ attrs: { x: f.minX, y: f.minY, width: f.width, height: f.height } }), x = e.get("container").addGroup(); x.set("zIndex", -100), x.attr("clip", m); var _ = s(y, x); y.get("container").set("visible", !1), e.get("canvas").draw(), n(), window.setTimeout((function () { i.each(_, (function (t, n) { 0 === n ? t.animate(v, 400, a, (function () { x.remove(), e.get("canvas").draw() })) : t.animate(v, 400) })), c(y = e.get("elements")[0]); var t = y.getShapes(); i.each(t, (function (t) { t.attr("opacity", 0), t.animate({ opacity: 1 }, 400, a) })); var n = y.get("container"); n.stopAnimate(), n.set("visible", !0), n.attr("matrix", i.clone(o)), n.transform([["s", p.width / f.width, p.height / f.height], ["t", p.minX, p.minY]]); var r = i.clone(o); y.get("container").animate({ matrix: r }, 400, a, (function () { h(y) })), e.get("canvas").draw() }), 16) }, e.rollingUp = function (t, e, n) { var p = e.get("elements")[0]; c(p); var f = p.get("container"); f.attr("matrix", i.clone(o)); var d = e.get("container").addGroup(); d.set("zIndex", -100); var g = s(p, d); f.set("visible", !1), e.get("canvas").draw(), n(), c(p = e.get("elements")[0]), f = p.get("container"); var v = l(function (t, e) { var n; return i.each(t, (function (t) { t.get("origin")._origin.name === e && (n = t) })), n }(p.getShapes(), t)), y = u(e), m = new r.Rect({ attrs: { x: y.minX, y: y.minY, width: y.width, height: y.height } }), x = f.get("parent"); x.attr("clip") || x.attr("clip", m), function (t, e, n, r) { var o = n.width / r.width, s = n.height / r.height, u = { transform: [["s", o, s], ["t", n.minX, n.minY]] }; t.animate(u, 400, a, (function () { t.remove() })), i.each(e, (function (t) { t.animate({ opacity: 0 }, 400, a) })) }(d, g, v, y); var _ = y.width / v.width, b = y.height / v.height, w = (y.minX - v.minX) * _, M = (y.minY - v.minY) * b; f.transform([["s", _, b], ["t", w, M]]), f.set("visible", !0), f.animate({ matrix: o }, 400, a, (function () { h(p) })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(10); e.EVENT_MAP = r.EVENT_MAP, e.onEvent = r.onEvent; i.assign(r.EVENT_MAP, { onRectClick: "polygon:click", onRectDblclick: "polygon:dblclick", onRectMousemove: "polygon:mousemove", onRectMouseenter: "polygon:mouseenter", onRectMouseleave: "polygon:mouseleave", onRectMousedown: "polygon:mousedown", onRectMouseup: "polygon:mouseup", onRectContextmenu: "polygon:contextmenu", test: "breadcrumb:click" }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(2), o = n(5), a = i.__importStar(n(0)), s = n(45); function u(t, e, n) { for (var i = new r.Text({ attrs: { text: "...", x: 0, y: 0, fontSize: e } }).getBBox().width, o = new r.Text({ attrs: { text: "", x: 0, y: 0, fontSize: e } }), a = "", s = n - i, u = 0; u < t.length; u++) { var l = t[u]; if (o.attr("text", a += l), o.getBBox().width >= s) { var c = a.substr(0, a.length - 1); if (c.length > 0) return c + "..." } } return a } var l = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.showLabels = function (e, n) { var i = this; t.prototype.showLabels.call(this, e, n); var r = this.get("labelsRenderer").get("group").get("children"), o = this.get("element").get("view"), s = this.get("labelOptions").maxLevel; a.each(r, (function (t, e) { var r = t, o = t.get("origin"), a = r.get("origin"), l = function (t, e) { return !t.children || t.depth >= e }(o, s), c = i.get("element").getShapeId(a), h = i.getShape(c, n).getBBox(); if (!l && o.showLabel) { var p = h.x + h.width / 2, f = h.y + 4; t.attr("x", p), t.attr("y", f), t.attr("textBaseline", "top"), t.attr("fontWeight", 600); var d = h.width - 8; if (t.getBBox().width > d) { var g = u(t.attr("text"), t.attr("fontSize"), d); t.attr("text", g) } } else i.leafText(h, t) })), o.get("canvas").draw() }, e.prototype.getShape = function (t, e) { var n; return a.each(e, (function (e) { var i = e; i.id === t && (n = i) })), n }, e.prototype.leafText = function (t, e) { var n = e.getBBox(), i = a.clone(e.attr("text")), o = 1 === e.get("origin").depth ? 0 : 2, l = Math.max(e.attr("fontSize") - o, 8), c = t.x + t.width / 2, h = t.y + t.height / 2; e.attr({ x: c, y: h, textAlign: "center", textBaseline: "middle", lineHeight: l, fontSize: l }); var p = t.width - 8; if (n.width > t.width && n.height > t.height) e.attr("text", ""); else if (p < l) e.attr("text", ""); else if (n.width > t.width) { var f = function (t, e) { var n = t.attr("fontSize"), i = t.attr("text"), o = new r.Text({ attrs: { text: "", x: 0, y: 0, fontSize: n } }), a = i.split("\n").map((function (t) { for (var n = "", i = t.split(""), r = [], a = 0; a < i.length; a++) { var u = i[a]; if (o.attr("text", n += u), o.getBBox().width - 1 > e) { if (0 === a) break; r.push(a), n = "" } } return s.breakText(i, r) })); return o.remove(), a.join("\n") }(e, p); if (e.attr({ lineHeight: e.attr("fontSize"), text: f }), e.getBBox().height > t.height) { var d = u(i, l, p); e.attr("text", d) } } }, e }(o.ElementLabels); e.TreemapLabels = l, o.registerElementLabels("treemapLabel", l) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(301), a = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "step-line", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = o.StepLineLayer.getDefaultOptions, e }(i.__importDefault(n(6)).default); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(77)), o = n(7), a = i.__importStar(n(0)), s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "step-line", e } return i.__extends(e, t), e.getDefaultOptions = function () { return a.deepMix({}, t.getDefaultOptions.call(this), { step: "hv" }) }, e }(r.default); e.StepLineLayer = s, o.registerPlotType("step-line", s) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(303)), s = n(7), u = function (t) { function e(e, n) { return n.renderer = "canvas", t.call(this, e, n) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "wordCloud", t.prototype.createLayers.call(this, n) }, e }(o.default); e.default = u, s.registerPlotType("wordCloud", a.default) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(28)), a = i.__importDefault(n(304)), s = i.__importDefault(n(309)), u = function (t) { function e(e) { var n = t.call(this, e) || this; return n._toolTipsAction = function (t, e, i, r) { e ? (n._toolTips.setContent("", [{ color: t.color || "red", name: t.word, value: t.weight }]), n._toolTips.setPosition(i.layerX, i.layerY), n._toolTips.show()) : n._toolTips.hide(), n._configHoverAction && n._configHoverAction(t, e, i, r) }, n._configHoverAction = e.onWordCloudHover, n._enableToolTips = r.get(e, "tooltip.visible", !0), n.options = r.deepMix({}, { width: 400, height: 400, enableToolTips: !0 }, e, { onWordCloudHover: n._enableToolTips ? n._toolTipsAction : n._configHoverAction }), n } return i.__extends(e, t), e.prototype.init = function () { t.prototype.init.call(this), this._initToolTips() }, e.prototype.render = function () { t.prototype.render.call(this), this._render() }, e.prototype._initToolTips = function () { this._toolTips = new a.default({ showTitle: !1, visible: !0, canvas: this.canvas, follow: !0, inPanel: !1 }) }, e.prototype._render = function () { this._targetCanvas = this.canvas.get("el"), this.options.maskImage ? this._handleMaskImage() : this._start() }, e.prototype._handleMaskImage = function () { var t = this, e = new Image; e.src = this.options.maskImage, e.crossOrigin = "Anonymous", e.onload = function () { e.naturalHeight + e.naturalWidth === 0 || e.width + e.height === 0 ? t._start() : t._startWithMaskImage(e) }, e.onerror = function () { console.error("image %s load failed !!!", t.options.maskImage), t._start() } }, e.prototype._start = function () { this._handleG2PlotConfig(), s.default(this._targetCanvas, this.options) }, e.prototype._handleG2PlotConfig = function () { var t, e, n, i = this.options.wordStyle.fontSize || [10, 60], o = this.options.wordStyle.rotation || [-Math.PI / 2, Math.PI / 2]; this.options.wordStyle.active ? (t = !0, e = this.options.wordStyle.active.shadowColor || "#333", n = this.options.wordStyle.active.shadowBlur || 10) : t = !1, this.options = r.deepMix({}, this.options, { minFontSize: i[0], maxFontSize: i[1], minRotation: o[0], maxRotation: o[1], active: t, shadowColor: e, shadowBlur: n }) }, e.prototype._startWithMaskImage = function (t) { var e = this._scaleMaskImageCanvas(this._transformWhite2BlackPixels(t)), n = e.maskImageCanvas, i = e.maskImageContext, o = document.createElement("canvas").getContext("2d"); o.fillStyle = this.options.backgroundColor || "#fff", o.fillRect(0, 0, 1, 1); for (var a = o.getImageData(0, 0, 1, 1).data, s = i.getImageData(0, 0, n.width, n.height), u = i.createImageData(s), l = 0; l < s.data.length; l += 4)s.data[l + 3] > 128 ? (u.data[l] = a[0], u.data[l + 1] = a[1], u.data[l + 2] = a[2], u.data[l + 3] = a[3]) : (u.data[l] = a[0], u.data[l + 1] = a[1], u.data[l + 2] = a[2], u.data[l + 3] = 254); i.putImageData(u, 0, 0), this._targetCanvas.getContext("2d").drawImage(n, 0, 0), this.options = r.deepMix({}, this.options, { clearCanvas: !1 }), this._start() }, e.prototype._scaleMaskImageCanvas = function (t) { var e = document.createElement("canvas"); e.width = this.canvas.get("widthCanvas"), e.height = this.canvas.get("heightCanvas"); var n = e.getContext("2d"); return n.imageSmoothingEnabled = !0, n.drawImage(t, 0, 0, t.width, t.height, 0, 0, e.width, e.height), { maskImageCanvas: e, maskImageContext: n } }, e.prototype._transformWhite2BlackPixels = function (t) { var e = document.createElement("canvas"); e.width = t.width, e.height = t.height; var n = e.getContext("2d"); n.drawImage(t, 0, 0, t.width, t.height); for (var i = n.getImageData(0, 0, e.width, e.height), r = 0; r < i.data.length; r += 4) { var o = i.data[r] + i.data[r + 1] + i.data[r + 2]; i.data[r + 3] < 128 || o > 750 ? (i.data[r] = 255, i.data[r + 1] = 255, i.data[r + 2] = 255, i.data[r + 3] = 0) : (i.data[r] = 0, i.data[r + 1] = 0, i.data[r + 2] = 0, i.data[r + 3] = 255) } return n.putImageData(i, 0, 0), e }, e }(o.default); e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = function (t) { function e(e) { var n = r.deepMix({}, e, { itemTpl: '<div data-index={index}>\n        <span style="background-color:{color};" class="g2-tooltip-marker"></span>\n        {name}<span class="g2-tooltip-value">{value}</span></div>' }); return t.call(this, n) || this } return i.__extends(e, t), e.prototype.show = function () { var t = this.get("container"); t.style.visibility = "visible", t.style.display = "block"; var e = this.get("crosshairGroup"); e && e.show(); var n = this.get("markerGroup"); n && n.show(), this.set("visible", !0) }, e.prototype.hide = function () { var t = this.get("container"); t.style.visibility = "hidden", t.style.display = "none"; var e = this.get("crosshairGroup"); e && e.hide(); var n = this.get("markerGroup"); n && n.hide(), this.set("visible", !1) }, e }(i.__importDefault(n(305)).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(3), o = n(0), a = n(306), s = n(307), u = n(100), l = n(308), c = function (t, e) { return t.getElementsByClassName(e)[0] }, h = function (t) { function e(e) { var n = t.call(this, i.__assign({ containerTpl: '<div class="g2-tooltip">\n        <div class="g2-tooltip-title"></div>\n        <ul class="g2-tooltip-list"></ul>\n        </div>', itemTpl: '<li data-index={index}>\n        <span style="background-color:{color};" class="g2-tooltip-marker"></span>\n        {name}<span class="g2-tooltip-value">{value}</span></li>', htmlContent: null, follow: !0, enterable: !1 }, e)) || this, r = u.default; n.style = function (t, e) { return Object.keys(t).forEach((function (n) { e[n] && (t[n] = o.mix(t[n], e[n])) })), t }(r, e), n._init_(), n.get("items") && n.render(); var a = n.get("crosshairs"); if (a) { var l = "rect" === a.type ? n.get("backgroundGroup") : n.get("frontgroundGroup"), c = new s.default(o.mix({ plot: l, panelRange: n.get("panelRange"), canvas: n.get("canvas") }, n.get("crosshairs"))); c.hide(), n.set("crosshairGroup", c) } return n } return i.__extends(e, t), e.prototype._init_ = function () { var t, e = this.get("containerTpl"), n = this.get("canvas").get("el").parentNode; if (this.get("htmlContent")) t = this._getHtmlContent(); else if (/^\#/.test(e)) { var i = e.replace("#", ""); t = document.getElementById(i) } else t = r.createDom(e); this.set("container", t), r.modifyCSS(t, this.style["g2-tooltip"]), n.appendChild(t), n.style.position = "relative" }, e.prototype.render = function () { if (this.clear(), this.get("htmlContent")) { var t = this.get("canvas").get("el").parentNode, e = this._getHtmlContent(); t.appendChild(e), r.modifyCSS(e, this.style["g2-tooltip"]), this.set("container", e) } else this._renderTpl() }, e.prototype._renderTpl = function () { var t = this, e = this.get("showTitle"), n = this.get("titleContent"), i = this.get("container"), a = c(i, "g2-tooltip-title"), s = c(i, "g2-tooltip-list"), u = this.get("items"); a && e && (r.modifyCSS(a, this.style["g2-tooltip-title"]), a.innerHTML = n), s && (r.modifyCSS(s, this.style["g2-tooltip-list"]), o.each(u, (function (e, n) { s.appendChild(t._addItem(e, n)) }))) }, e.prototype.clear = function () { var t = this.get("container"); if (t && this.get("htmlContent")) t.remove(); else { var e = c(t, "g2-tooltip-title"), n = c(t, "g2-tooltip-list"); e && (e.innerHTML = ""), n && (n.innerHTML = "") } }, e.prototype.show = function () { var e = this.get("container"); e.style.visibility = "visible", e.style.display = "block"; var n = this.get("crosshairGroup"); n && n.show(); var i = this.get("markerGroup"); i && i.show(), t.prototype.show.call(this), this.get("canvas").draw() }, e.prototype.hide = function () { var e = this.get("container"); e.style.visibility = "hidden", e.style.display = "none"; var n = this.get("crosshairGroup"); n && n.hide(); var i = this.get("markerGroup"); i && i.hide(), t.prototype.hide.call(this), this.get("canvas").draw() }, e.prototype.destroy = function () { var e = this.get("container"), n = this.get("containerTpl"); e && !/^\#/.test(n) && e.parentNode.removeChild(e); var i = this.get("crosshairGroup"); i && i.destroy(); var r = this.get("markerGroup"); r && r.remove(), t.prototype.destroy.call(this) }, e.prototype._addItem = function (t, e) { var n = this.get("itemTpl"), i = o.substitute(n, o.mix({ index: e }, t)), a = r.createDom(i); r.modifyCSS(a, this.style["g2-tooltip-list-item"]); var s = c(a, "g2-tooltip-marker"); s && r.modifyCSS(s, this.style["g2-tooltip-marker"]); var u = c(a, "g2-tooltip-value"); return u && r.modifyCSS(u, this.style["g2-tooltip-value"]), a }, e.prototype._getHtmlContent = function () { var t = this.get("htmlContent")(this.get("titleContent"), this.get("items")); return o.isElement(t) ? t : r.createDom(t) }, e.prototype.setPosition = function (e, n, i) { var a, s = e, u = n, c = this.get("container"), h = this.get("canvas").get("el"), p = r.getWidth(h), f = r.getHeight(h), d = c.clientWidth, g = c.clientHeight, v = s, y = u, m = this.get("prePosition") || { x: 0, y: 0 }; if (d || (c.style.display = "block", d = c.clientWidth, g = c.clientHeight, c.style.display = "none"), this.get("enterable") ? (a = [s, u -= c.clientHeight / 2], m && s - m.x > 0 ? s -= c.clientWidth + 1 : s += 1) : this.get("position") ? (s = (a = l.defaultPosition(s, u, this.get("position"), d, g, i))[0], u = a[1]) : (s = (a = l.constraintPositionInBoundary(s, u, d, g, p, f))[0], u = a[1]), this.get("inPanel")) { var x = this.get("panelRange"), _ = this.get("panelGroup").attr("clip"); s = (a = l.constraintPositionInPanel(s, u, d, g, _ ? _.getBBox() : x, this.get("enterable")))[0], u = a[1] } var b = this.get("markerItems"); o.isEmpty(b) || (v = b[0].x, y = b[0].y), this.set("prePosition", a), this.get("follow") && (c.style.left = s + "px", c.style.top = u + "px"); var w = this.get("crosshairGroup"); if (w) { var M = this.get("items"); w.setPosition(v, y, M) } t.prototype.setPosition.call(this, s, u) }, e }(a.default); e.default = h }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = function (t) { function e(e) { return t.call(this, i.__assign({ x: 0, y: 0, items: null, titleContent: null, showTitle: !0, panelRange: null, inPanel: !0, crosshairs: null }, e)) || this } return i.__extends(e, t), e.prototype.isContentChange = function (t, e) { var n = this.get("titleContent"), i = this.get("items"), o = !(t === n && i.length === e.length); return o || r.each(e, (function (t, e) { var n = i[e], a = Object.keys(t); if (o = a.some((function (e) { return !r.isObject(t[e]) && t[e] !== n[e] }))) return !1 })), o }, e.prototype.setContent = function (t, e) { return this.set("items", e), this.set("titleContent", t), this.render(), this }, e.prototype.setPosition = function (t, e, n) { this.set("x", t), this.set("y", e) }, e.prototype.setMarkers = function (t, e) { var n = this.get("markerGroup"), i = this.get("frontgroundGroup"); n ? n.clear() : (n = i.addGroup({ zIndex: 1, capture: !1 }), this.set("markerGroup", n)), r.each(t, (function (t) { n.addShape("marker", { color: t.color, attrs: r.mix({ fill: t.color, symbol: "circle", shadowColor: t.color }, e, { x: t.x, y: t.y }) }) })), this.set("markerItems", t) }, e.prototype.clearMarkers = function () { var t = this.get("markerGroup"); t && t.clear() }, e.prototype.render = function () { }, e.prototype.clear = function () { }, e.prototype.show = function () { this.set("visible", !0) }, e.prototype.hide = function () { this.set("visible", !1) }, e }(n(43).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = function (t) { function e(e) { var n = t.call(this, i.__assign({ type: null, plot: null, panelRange: null, rectStyle: { fill: "#CCD6EC", opacity: .3 }, lineStyle: { stroke: "rgba(0, 0, 0, 0.25)", lineWidth: 1 }, isTransposed: !1 }, e)) || this; return n._init_(), n.render(), n } return i.__extends(e, t), e.prototype._init_ = function () { var t = this.get("plot").addGroup(); this.set("container", t) }, e.prototype._addLineShape = function (t, e) { var n = this.get("container").addShape("line", { attrs: t, capture: !1 }); return this.set("crossLineShape" + e, n), n }, e.prototype._renderHorizontalLine = function (t, e) { var n = r.mix(this.get("lineStyle"), this.get("style")), i = r.mix({ x1: e ? e.bl.x : t.get("width"), y1: 0, x2: e ? e.br.x : 0, y2: 0 }, n); this._addLineShape(i, "X") }, e.prototype._renderVerticalLine = function (t, e) { var n = r.mix(this.get("lineStyle"), this.get("style")), i = r.mix({ x1: 0, y1: e ? e.bl.y : t.get("height"), x2: 0, y2: e ? e.tl.y : 0 }, n); this._addLineShape(i, "Y") }, e.prototype._renderBackground = function (t, e) { var n = r.mix(this.get("rectStyle"), this.get("style")), i = this.get("container"), o = r.mix({ x: e ? e.tl.x : 0, y: e ? e.tl.y : t.get("height"), width: e ? e.br.x - e.bl.x : t.get("width"), height: e ? Math.abs(e.tl.y - e.bl.y) : t.get("height") }, n), a = i.addShape("rect", { attrs: o, capture: !1 }); return this.set("crosshairsRectShape", a), a }, e.prototype._updateRectShape = function (t) { var e, n = this.get("crosshairsRectShape"), i = this.get("isTransposed"), o = t[0], a = t[t.length - 1], s = i ? "y" : "x", u = i ? "height" : "width", l = o[s]; if (t.length > 1 && o[s] > a[s] && (l = a[s]), this.get("width")) n.attr(s, l - this.get("crosshairs").width / 2), n.attr(u, this.get("width")); else if (r.isArray(o.point[s]) && !o.size) { var c = o.point[s][1] - o.point[s][0]; n.attr(s, o.point[s][0]), n.attr(u, c) } else e = 3 * o.size / 4, n.attr(s, l - e), 1 === t.length ? n.attr(u, 3 * o.size / 2) : n.attr(u, Math.abs(a[s] - o[s]) + 2 * e) }, e.prototype.render = function () { var t = this.get("canvas"), e = this.get("panelRange"), n = this.get("isTransposed"); switch (this.clear(), this.get("type")) { case "x": this._renderHorizontalLine(t, e); break; case "y": this._renderVerticalLine(t, e); break; case "cross": this._renderHorizontalLine(t, e), this._renderVerticalLine(t, e); break; case "rect": this._renderBackground(t, e); break; default: n ? this._renderHorizontalLine(t, e) : this._renderVerticalLine(t, e) } }, e.prototype.show = function () { this.get("container").show() }, e.prototype.hide = function () { this.get("container").hide() }, e.prototype.clear = function () { var t = this.get("container"); this.set("crossLineShapeX", null), this.set("crossLineShapeY", null), this.set("crosshairsRectShape", null), t.clear() }, e.prototype.destroy = function () { var e = this.get("container"); t.prototype.destroy.call(this), e.remove() }, e.prototype.setPosition = function (t, e, n) { var i = this.get("crossLineShapeX"), r = this.get("crossLineShapeY"), o = this.get("crosshairsRectShape"); r && !r.get("destroyed") && r.move(t, 0), i && !i.get("destroyed") && i.move(0, e), o && !o.get("destroyed") && this._updateRectShape(n) }, e }(n(43).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); e.defaultPosition = function (t, e, n, i, r, o) { var a = t, s = e, u = 0, l = 0, c = 20; if (o) { var h = o.getBBox(); u = h.width, l = h.height, a = h.x, s = h.y, c = 5 } switch (n) { case "inside": a = a + u / 2 - i / 2, s = s + l / 2 - r / 2; break; case "top": a = a + u / 2 - i / 2, s = s - r - c; break; case "left": a = a - i - c, s = s + l / 2 - r / 2; break; case "right": a = a + u + c, s = s + l / 2 - r / 2; break; case "bottom": default: a = a + u / 2 - i / 2, s = s + l + c }return [a, s] }, e.constraintPositionInBoundary = function (t, e, n, i, r, o) { var a = t, s = e; return a + n + 20 > r ? a = (a -= n + 20) < 0 ? 0 : a : a + 20 < 0 ? a = 20 : a += 20, s + i + 20 > o ? s = (s -= i + 20) < 0 ? 0 : s : s + 20 < 0 ? s = 20 : s += 20, [a, s] }, e.constraintPositionInPanel = function (t, e, n, i, r, o) { var a = t, s = e; return a + n > r.tr.x && (a -= n + 40), a < r.tl.x && (a = r.tl.x), o || (s + i > r.bl.y && (s -= i + 40), s < r.tl.y && (s = r.tl.y)), [a, s] } }, function (t, e, n) {
        "use strict";
/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2013 Tim Chien
 * Released under the MIT license
 */Object.defineProperty(e, "__esModule", { value: !0 }), window.setImmediate || (window.setImmediate = window.msSetImmediate || window.webkitSetImmediate || window.mozSetImmediate || window.oSetImmediate || function () { if (!window.postMessage || !window.addEventListener) return null; var t = [void 0], e = "zero-timeout-message"; return window.addEventListener("message", (function (n) { if ("string" == typeof n.data && n.data.substr(0, e.length) === e) { n.stopImmediatePropagation(); var i = parseInt(n.data.substr(e.length), 36); t[i] && (t[i](), t[i] = void 0) } }), !0), window.clearImmediate = function (e) { t[e] && (t[e] = void 0) }, function (n) { var i = t.length; return t.push(n), window.postMessage(e + i.toString(36), "*"), i } }() || function (t) { window.setTimeout(t, 0) }), window.clearImmediate || (window.clearImmediate = window.msClearImmediate || window.webkitClearImmediate || window.mozClearImmediate || window.oClearImmediate || function (t) { window.clearTimeout(t) }); var i = function () { var t = document.createElement("canvas"); if (!t || !t.getContext) return !1; var e = t.getContext("2d"); return !!e.getImageData && (!!e.fillText && (!!Array.prototype.some && !!Array.prototype.push)) }(), r = function () { if (i) { for (var t, e, n = document.createElement("canvas").getContext("2d"), r = 20; r;) { if (n.font = r.toString(10) + "px sans-serif", n.measureText("Ｗ").width === t && n.measureText("m").width === e) return r + 1; t = n.measureText("Ｗ").width, e = n.measureText("m").width, r-- } return 0 } }(), o = function (t) { for (var e, n, i = t.length; i; e = Math.floor(Math.random() * i), n = t[--i], t[i] = t[e], t[e] = n); return t }, a = function (t, e) { if (i) { Array.isArray(t) || (t = [t]), t.forEach((function (e, n) { if ("string" == typeof e) { if (t[n] = document.getElementById(e), !t[n]) throw "The element id specified is not found." } else if (!e.tagName && !e.appendChild) throw "You must pass valid HTML elements, or ID of the element." })); var n = { data: [], fontFamily: '"Trebuchet MS", "Heiti TC", "微軟正黑體", "Arial Unicode MS", "Droid Fallback Sans", sans-serif', fontWeight: "normal", color: "random-dark", minFontSize: r, maxFontSize: 60, clearCanvas: !0, backgroundColor: "#fff", gridSize: 8, drawOutOfBound: !1, origin: null, drawMask: !1, maskColor: "rgba(255,0,0,0.3)", maskGapWidth: .3, wait: 0, abortThreshold: 0, abort: function () { }, minRotation: -Math.PI / 2, maxRotation: Math.PI / 2, rotateRatio: .5, rotationSteps: 1, shuffle: !0, shape: "circle", ellipticity: 1, active: !0, selected: -1, shadowColor: "#333", shadowBlur: 10, classes: null, onWordCloudHover: null, onWordCloudClick: null }, a = []; if (e) for (var s in e) if ("wordStyle" === s) for (var u in e[s]) u in n && (n[u] = e[s][u]); else s in n && (n[s] = e[s]); if (n.minFontSize < r && (n.minFontSize = r), n.minFontSize > n.maxFontSize) console.error("minSize cant bigger than maxSize"); else { for (var l = 0, c = 0; c < n.data.length; c++)l < n.data[c].weight && (l = n.data[c].weight); var h = !1; if ("function" != typeof n.shape) switch (n.shape) { case "circle": default: n.shape = "circle"; break; case "cardioid": n.shape = function (t) { return 1 - Math.sin(t) }, h = !0; break; case "diamond": n.shape = function (t) { var e = t % (2 * Math.PI / 4); return 1 / (Math.cos(e) + Math.sin(e)) }; break; case "square": n.shape = function (t) { var e = (t + Math.PI / 4) % (2 * Math.PI / 4); return 1 / (Math.cos(e) + Math.sin(e)) }; break; case "triangle-forward": n.shape = function (t) { var e = t % (2 * Math.PI / 3); return 1 / (Math.cos(e) + Math.sqrt(3) * Math.sin(e)) }; break; case "triangle-backward": n.shape = function (t) { var e = (t + Math.PI) % (2 * Math.PI / 3); return 1 / (Math.cos(e) + Math.sqrt(3) * Math.sin(e)) }; break; case "triangle": case "triangle-up": n.shape = function (t) { var e = (t + 3 * Math.PI / 2) % (2 * Math.PI / 3); return 1 / (Math.cos(e) + Math.sqrt(3) * Math.sin(e)) }; break; case "triangle-down": n.shape = function (t) { var e = (t + 5 * Math.PI / 2) % (2 * Math.PI / 3); return 1 / (Math.cos(e) + Math.sqrt(3) * Math.sin(e)) }; break; case "pentagon": n.shape = function (t) { var e = (t + .955) % (2 * Math.PI / 5); return 1 / (Math.cos(e) + .726543 * Math.sin(e)) }; break; case "star": n.shape = function (t) { var e = (t + .955) % (2 * Math.PI / 10); return (t + .955) % (2 * Math.PI / 5) - 2 * Math.PI / 10 >= 0 ? 1 / (Math.cos(2 * Math.PI / 10 - e) + 3.07768 * Math.sin(2 * Math.PI / 10 - e)) : 1 / (Math.cos(e) + 3.07768 * Math.sin(e)) } }n.gridSize = Math.max(Math.floor(n.gridSize), 4); var p, f, d, g, v, y, m, x = n.gridSize, _ = x - n.maskGapWidth, b = Math.abs(n.maxRotation - n.minRotation), w = Math.min(n.maxRotation, n.minRotation), M = n.rotationSteps; switch (n.color) { case "random-dark": m = function () { return G(10, 50) }; break; case "random-light": m = function () { return G(50, 90) }; break; default: "function" == typeof n.color && (m = n.color) }var S = null; "function" == typeof n.classes && (S = n.classes); var C, O = !1, k = [], P = function (t) { var e, n, i = t.currentTarget, r = i.getBoundingClientRect(); t.touches ? (e = t.touches[0].clientX, n = t.touches[0].clientY) : (e = t.clientX, n = t.clientY); var o = e - r.left, a = n - r.top, s = Math.floor(o * (i.width / r.width || 1) / x), u = Math.floor(a * (i.height / r.height || 1) / x); return k[s][u] }, A = function (t, e, n, i) { i(t ? t.id : -1) }, L = function (t) { var e = P(t); if (C !== e) { if (!e) return n.onWordCloudHover(void 0, void 0, t, H), void (n.active && A(void 0, 0, 0, H)); n.onWordCloudHover(e.item, e.dimension, t, H), n.active && A(e.item, e.dimension, 0, H), C = e } }, T = function (t) { var e = P(t); e && (n.onWordCloudClick(e.item, e.dimension, t), t.preventDefault()) }, D = [], j = function (t) { if (D[t]) return D[t]; var e = 8 * t, i = e, r = []; for (0 === t && r.push([g[0], g[1], 0]); i--;) { var o = 1; "circle" !== n.shape && (o = n.shape(i / e * 2 * Math.PI)), r.push([g[0] + t * o * Math.cos(-i / e * 2 * Math.PI), g[1] + t * o * Math.sin(-i / e * 2 * Math.PI) * n.ellipticity, i / e * 2 * Math.PI]) } return D[t] = r, r }, I = function () { return n.abortThreshold > 0 && (new Date).getTime() - y > n.abortThreshold }, B = function (t, e, i) { var o = function (t) { return Math.min(Math.max(n.minFontSize, n.maxFontSize * t / l), n.maxFontSize) }(e); if (o <= 0) return !1; var a = 1; o < r && (a = function () { for (var t = 2; t * o < r;)t += 2; return t }()); var s = document.createElement("canvas"), u = s.getContext("2d", { willReadFrequently: !0 }); u.font = n.fontWeight + " " + (o * a).toString(10) + "px " + n.fontFamily; var c = u.measureText(t).width / a, h = Math.max(o * a, u.measureText("m").width, u.measureText("Ｗ").width) / a, p = c + 2 * h, f = 3 * h, d = Math.ceil(p / x), g = Math.ceil(f / x); p = d * x, f = g * x; var v, y = -c / 2, m = .4 * -h, _ = Math.ceil((p * Math.abs(Math.sin(i)) + f * Math.abs(Math.cos(i))) / x), b = Math.ceil((p * Math.abs(Math.cos(i)) + f * Math.abs(Math.sin(i))) / x), w = b * x, M = _ * x; s.setAttribute("width", w), s.setAttribute("height", M), u.scale(1 / a, 1 / a), u.translate(w * a / 2, M * a / 2), u.rotate(-i), u.font = n.fontWeight + " " + (o * a).toString(10) + "px " + n.fontFamily, u.fillStyle = "#000", u.textBaseline = "middle", u.fillText(t, y * a, (m + .5 * o) * a); try { v = u.getImageData(0, 0, w, M).data } catch (t) { return !1 } if (I()) return !1; for (var S, C, O, k = [], P = b, A = [_ / 2, b / 2, _ / 2, b / 2]; P--;)for (S = _; S--;) { O = x; t: { for (; O--;)for (C = x; C--;)if (v[4 * ((S * x + O) * w + (P * x + C)) + 3]) { k.push([P, S]), P < A[3] && (A[3] = P), P > A[1] && (A[1] = P), S < A[0] && (A[0] = S), S > A[2] && (A[2] = S); break t } 0 } } return { mu: a, occupied: k, bounds: A, gw: b, gh: _, fillTextOffsetX: y, fillTextOffsetY: m, fillTextWidth: c, fillTextHeight: h, fontSize: o } }, E = function (e, i, r, o, s, u, l, c, h, p, f) { var d = r.fontSize, g = n.color, v = n.classes; if (f) { var y = Y(p); g = y ? y.color : n.color } else g = m ? m(o, s, d, u, l) : n.color, v = S ? S(o, s, d, u, l) : n.classes; var _ = r.bounds; _[3], _[0], _[1], _[3], _[2], _[0], t.forEach((function (t) { if (t.getContext) { var y = t.getContext("2d"), m = r.mu; y.save(); var _ = n.fontWeight + " " + (d * m).toString(10) + "px " + n.fontFamily; y.scale(1 / m, 1 / m), y.font = _, y.fillStyle = g; var b = (e + r.gw / 2) * x * m, w = (i + r.gh / 2) * x * m; y.translate(b, w), 0 !== c && y.rotate(-c), y.textBaseline = "middle", n.selected === p && (y.shadowColor = n.shadowColor, y.shadowBlur = n.shadowBlur), y.fillText(o, r.fillTextOffsetX * m, (r.fillTextOffsetY + .5 * d) * m), f || a.push({ gx: e, gy: i, info: r, word: o, weight: s, distance: u, theta: l, rotateDeg: c, attributes: h, id: p, color: g }), y.restore() } else { var M = document.createElement("span"), S = ""; S = "rotate(" + -c / Math.PI * 180 + "deg) ", 1 !== r.mu && (S += "translateX(-" + r.fillTextWidth / 4 + "px) scale(" + 1 / r.mu + ")"); var C = { position: "absolute", display: "block", font: n.fontWeight + " " + d * r.mu + "px " + n.fontFamily, left: (e + r.gw / 2) * x + r.fillTextOffsetX + "px", top: (i + r.gh / 2) * x + r.fillTextOffsetY + "px", width: r.fillTextWidth + "px", height: r.fillTextHeight + "px", lineHeight: d + "px", whiteSpace: "nowrap", transform: S, webkitTransform: S, msTransform: S, transformOrigin: "50% 40%", webkitTransformOrigin: "50% 40%", msTransformOrigin: "50% 40%" }; for (var O in g && (C.color = g), M.textContent = o, C) M.style[O] = C[O]; if (h) for (var k in h) M.setAttribute(k, h[k]); v && (M.className += v), t.appendChild(M) } })) }, F = function (e, n, i, r, o) { if (!(e >= f || n >= d || e < 0 || n < 0)) { if (p[e][n] = !1, i) t[0].getContext("2d").fillRect(e * x, n * x, _, _); O && (k[e][n] = { item: o, dimension: r }) } }, R = function (e, i, r, o, a, s, u, l) { var c = Math.floor(e[0] - i.gw / 2), h = Math.floor(e[1] - i.gh / 2); i.gw, i.gh; return !!function (t, e, i, r, o) { for (var a = o.length; a--;) { var s = t + o[a][0], u = e + o[a][1]; if (s >= f || u >= d || s < 0 || u < 0) { if (!n.drawOutOfBound) return !1 } else if (!p[s][u]) return !1 } return !0 }(c, h, 0, 0, i.occupied) && (E(c, h, i, r, o, a, e[2], s, u, l, !1), function (e, i, r, o, a) { var s, u, l = a.occupied, c = n.drawMask; if (c && ((s = t[0].getContext("2d")).save(), s.fillStyle = n.maskColor), O) { var h = a.bounds; u = { x: (e + h[3]) * x, y: (i + h[0]) * x, w: (h[1] - h[3] + 1) * x, h: (h[2] - h[0] + 1) * x } } for (var p = l.length; p--;) { var g = e + l[p][0], v = i + l[p][1]; if (!(g >= f || v >= d || g < 0 || v < 0)) { var y = Y(a.item.id); y && (a.item.color = y.color), F(g, v, c, u, a.item) } } c && s.restore() }(c, h, 0, 0, i), { gx: c, gy: h, rot: s, info: i }) }, z = function (t) { var e, i, r, a; Array.isArray(t) ? (e = t[0], i = t[1]) : (e = t.word, i = t.weight, r = t.attributes, a = t.id); var s = 0 === n.rotateRatio ? 0 : Math.random() > n.rotateRatio ? 0 : 0 === b ? w : M > 0 ? w + Math.floor(Math.random() * M) * b / M : w + Math.random() * b, u = B(e, i, s); if (u.item = t, !u) return !1; if (I()) return !1; if (!n.drawOutOfBound) { var l = u.bounds; if (l[1] - l[3] + 1 > f || l[2] - l[0] + 1 > d) return !1 } for (var c = v + 1; c--;) { var h = j(v - c); n.shuffle && (h = [].concat(h), o(h)); for (var p = 0; p < h.length; p++) { var g = R(h[p], u, e, i, v - c, s, r, a); if (g) return g } } return null }, N = function (e, n, i) { if (n) return !t.some((function (t) { var r = document.createEvent("CustomEvent"); return r.initCustomEvent(e, !0, n, i || {}), !t.dispatchEvent(r) }), this); t.forEach((function (t) { var r = document.createEvent("CustomEvent"); r.initCustomEvent(e, !0, n, i || {}), t.dispatchEvent(r) }), this) }, Y = function (t) { for (var e = 0; e < a.length; e++) { var n = a[e]; if (a[e].id === t) return n } }, H = function (e) { if (void 0 === e) { var i = t[0]; if (i.getContext) f = Math.ceil(i.width / x), d = Math.ceil(i.height / x); else { var r = i.getBoundingClientRect(); f = Math.ceil(r.width / x), d = Math.ceil(r.height / x) } if (N("wordcloudstart", !0)) { var o, s, u, l, c; if (g = n.origin ? [n.origin[0] / x, n.origin[1] / x] : [f / 2, d / (h ? 4 : 2)], v = Math.floor(Math.sqrt(f * f + d * d)), p = [], !i.getContext || n.clearCanvas) for (t.forEach((function (t) { if (t.getContext) { var e = t.getContext("2d"); e.fillStyle = n.backgroundColor, e.clearRect(0, 0, f * (x + 1), d * (x + 1)), e.fillRect(0, 0, f * (x + 1), d * (x + 1)) } else t.textContent = "", t.style.backgroundColor = n.backgroundColor, t.style.position = "relative" })), o = f; o--;)for (p[o] = [], s = d; s--;)p[o][s] = !0; else { var m = document.createElement("canvas").getContext("2d"); m.fillStyle = n.backgroundColor, m.fillRect(0, 0, 1, 1); var _, b, w = m.getImageData(0, 0, 1, 1).data, M = i.getContext("2d").getImageData(0, 0, f * x, d * x).data; for (o = f; o--;)for (p[o] = [], s = d; s--;) { b = x; t: for (; b--;)for (_ = x; _--;)for (u = 4; u--;)if (M[4 * ((s * x + b) * f * x + (o * x + _)) + u] !== w[u]) { p[o][s] = !1; break t } !1 !== p[o][s] && (p[o][s] = !0) } M = m = w = void 0 } if (n.onWordCloudHover || n.onWordCloudClick) { for (O = !0, o = f + 1; o--;)k[o] = []; n.onWordCloudHover && i.addEventListener("mousemove", L), n.onWordCloudClick && (i.addEventListener("click", T), i.addEventListener("touchstart", T), i.addEventListener("touchend", (function (t) { t.preventDefault() })), i.style.webkitTapHighlightColor = "rgba(0, 0, 0, 0)"), i.addEventListener("wordcloudstart", (function t() { i.removeEventListener("wordcloudstart", t), i.removeEventListener("mousemove", L), i.removeEventListener("click", T), C = void 0 })) } u = 0, 0 !== n.wait ? (l = window.setTimeout, c = window.clearTimeout) : (l = window.setImmediate, c = window.clearImmediate); var S = function (e, n) { t.forEach((function (t) { t.removeEventListener(e, n) }), this) }, P = function t() { S("wordcloudstart", t), c(A) }; !function (e, n) { t.forEach((function (t) { t.addEventListener(e, n) }), this) }("wordcloudstart", P); var A = l((function t() { if (u >= n.data.length) return c(A), N("wordcloudstop", !1), void S("wordcloudstart", P); y = (new Date).getTime(); var e = z(n.data[u]), i = !N("wordclouddrawn", !0, { item: n.data[u], drawn: e }); if (I() || i) return c(A), n.abort(), N("wordcloudabort", !1), N("wordcloudstop", !1), void S("wordcloudstart", P); u++ , A = l(t, n.wait) }), n.wait) } } else if (n.selected !== e && t[0].getContext) { n.selected = e; var D = t[0].getContext("2d"); D.fillStyle = n.backgroundColor, D.clearRect(0, 0, t[0].width, t[0].height), D.fillRect(0, 0, t[0].width, t[0].height); for (var j = 0; j < a.length; j++) { var B = a[j]; E(B.gx, B.gy, B.info, B.word, B.weight, B.distance, B.theta, B.rotateDeg, B.attributes, B.id, !0) } } }; H() } } function G(t, e) { return "hsl(" + (360 * Math.random()).toFixed() + "," + (30 * Math.random() + 70).toFixed() + "%," + (Math.random() * (e - t) + t).toFixed() + "%)" } }; a.isSupported = i, a.minFontSize = r, e.default = a
    }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(311)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "rose", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importDefault(n(8)), s = n(9), u = n(11), l = i.__importStar(n(38)); n(312); var c = { rose: "interval" }, h = { rose: "column" }, p = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "rose", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { width: 400, height: 400, title: { visible: !1 }, description: { visible: !1 }, forceFit: !0, padding: "auto", radius: .8, innerRadius: 0, label: { visible: !0, type: "inner", autoRotate: !0, adjustColor: !1 }, legend: { visible: !0, position: "bottom-center" }, tooltip: { visible: !0, shared: !1, crosshairs: null }, columnStyle: { stroke: "white", lineWidth: 1 }, xAxis: { autoRotateLabel: !0, line: { visible: !1 }, tickLine: { visible: !1 }, grid: { visible: !0, style: { lineWidth: .5 } }, label: { offset: 5 } }, yAxis: { visible: !1 } }) }, e.prototype.getOptions = function (e) { var n = t.prototype.getOptions.call(this, e), i = this.constructor.getDefaultOptions(), o = e.sectorStyle, a = e.categoryField, s = e.radiusField; return r.deepMix({}, n, i, { columnStyle: o, xField: a, yField: s }, e) }, e.prototype.geometryParser = function (t, e) { return "g2" === t ? c[e] : h[e] }, e.prototype.scale = function () { var t = this.options, e = {}; e[t.radiusField] = {}, e[t.categoryField] = { type: "cat" }, this.setConfig("scales", e) }, e.prototype.axis = function () { t.prototype.axis.call(this); var e = this.options; e.stackField || e.groupField || this.setConfig("axes", !1) }, e.prototype.coord = function () { var t = this.options, e = { type: "polar", cfg: { radius: t.radius, innerRadius: t.innerRadius || 0 } }; this.setConfig("coord", e) }, e.prototype.addGeometry = function () { var t = this.options; this.adjustColorFieldMapping(), this.adjustLegendOptions(); var e = u.getGeom("interval", "main", { plot: this, positionFields: [t.categoryField, t.radiusField], widthRatio: 1 }); e.label = this.extractLabel(), e.adjust = this.adjustRoseAdjust(), this.rose = e, this.setConfig("element", e) }, e.prototype.adjustColorFieldMapping = function () { var t = this.options; (t.stackField || t.groupField) && (this.options.colorField = null) }, e.prototype.adjustRoseAdjust = function () { return this.options.stackField ? [{ type: "stack" }] : this.options.groupField ? [{ type: "dodge", marginRatio: 0 }] : null }, e.prototype.animation = function () { t.prototype.animation.call(this), !1 === this.options.animation && (this.rose.animate = !1) }, e.prototype.annotation = function () { }, e.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, l) }, e.prototype.extractLabel = function () { var t = this.options; if (!t.label || !t.label.visible) return !1; var e = r.deepMix({}, t.label); this.adjustLabelOptions(e); var n = [t.categoryField, t.radiusField]; return (t.stackField || t.groupField) && n.push(t.stackField || t.groupField), s.getComponent("label", i.__assign({ plot: this, labelType: "roseLabel", fields: n }, e)) }, e.prototype.adjustLabelOptions = function (t) { var e = this.options.radiusField; if (t) { var n = t.offset, i = t.type, r = t.formatter; "inner" === i ? t.offset = n < 0 ? n : -10 : "outer" === i && (t.offset = n >= 0 ? n : 10), r || (t.formatter = function (t, n) { return "" + n._origin[e] }) } }, e.prototype.adjustLegendOptions = function () { var t = this.options, e = t.legend; e && (t.stackField || t.groupField || (e.clickable = !1)) }, e }(a.default); e.default = p, o.registerPlotType("rose", p) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(5), o = i.__importStar(n(0)), a = n(34), s = n(15), u = n(313), l = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.showLabels = function (e, n) { var i = this; t.prototype.showLabels.call(this, e, n); var r = this.get("labelsRenderer").get("group").get("children"), o = this.get("element").get("view"), l = this.get("labelOptions"), c = l.fields, h = l.offset, p = l.adjustColor, f = l.type, d = o.get("coord"), g = d.center, v = d.startAngle, y = c[0], m = c[2], x = o.get("scales")[y]; m || r.forEach((function (t) { var e = t.get("origin"), r = i.get("element").getShapeId(e), o = i._getShape(r, n), l = x.scale(e[y]), c = v + 2 * Math.PI * l, d = o.get("origin"), m = s.distBetweenPoints(g, d) + h, _ = a.getEndPoint(g, c, m); t.attr("x", _.x), t.attr("y", _.y), t.attr("textBaseline", "middle"), i.adjustTextAlign(t, o), p && "inner" === f && u.autoAdjustColor(t, o) })), o.get("canvas").draw() }, e.prototype._getShape = function (t, e) { var n; return o.each(e, (function (e) { var i = e; i.id === t && (n = i) })), n }, e.prototype.adjustTextAlign = function (t, e) { var n = t.getBBox(), i = n.x + n.width / 2, r = (n.y, n.height, e.get("origin")), o = this.get("labelOptions").autoRotate; t.attr("textAlign", "center"), o || (i > r.x ? t.attr("textAlign", "left") : i < r.x && t.attr("textAlign", "right")) }, e }(r.getElementLabels("polar")); e.RoseLabels = l, r.registerElementLabels("roseLabel", l) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(21), o = i.__importStar(n(0)); function a(t, e) { var n; return o.each(t, (function (t) { var i = t; e >= i.from && e < i.to && (n = i.color) })), n } e.mappingColor = a, e.autoAdjustColor = function (t, e) { var n = t.getBBox(), i = e.getBBox(); if (n.minY >= i.minY && n.maxY <= i.maxY) { var s = e.attr("fill"), u = e.attr("opacity") ? e.attr("opacity") : 1, l = r.rgb2arr(s), c = a([{ from: 0, to: 85, color: "white" }, { from: 85, to: 170, color: "#F6F6F6" }, { from: 170, to: 255, color: "black" }], Math.round(.299 * l[0] + .587 * l[1] + .114 * l[2]) / u); t.attr("fill", c), "black" !== c ? (t.attr("stroke", null), t.attr("lineWidth", 0)) : (t.attr("stroke", "white"), t.attr("lineWidth", 2)) } else if (n.maxY < i.minY) { var h = this.get("theme"), p = o.get(h, "label.textStyle.fill", "black"); t.attr("fill", p) } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(315)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "bullet", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = i.__importStar(n(316)), s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "bullet", e } return i.__extends(e, t), e.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { value: 0, xField: "x", yField: "value" }) }, e.prototype.drawBullets = function () { var t = this.options, e = this.view.get("elements")[0].get("container"), n = this.view.get("elements")[0].get("shapeContainer"); this.drawBullet(e, n.getBBox(), t.value), this.canvas.draw() }, e.prototype.adjustYAxisOptions = function (t) { t.yAxis.maxLimit = Math.max(t.max, t.value) }, e.prototype.adjustDataOptions = function (t) { var e, n, i = [], r = t.range.map((function (e) { return e / 100 * (t.max - t.min) })); 0 !== r[0] && i.push(((e = { x: "1" })[a.STACK_FIELD] = "" + r[0], e.value = r[0], e)); for (var o = 1; o < r.length; o += 1)i.push(((n = { x: "1" })[a.STACK_FIELD] = t.range[o - 1] + "-" + t.range[o], n.value = r[o] - r[o - 1], n)); t.data = i }, e }(a.default); e.default = s, o.registerPlotType("bullet", s) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importStar(n(317)), a = i.__importDefault(n(8)), s = n(17), u = n(11), l = { bullet: "interval" }, c = { interval: "bullet" }; e.STACK_FIELD = "$$type$$"; var h = function (t) { function n() { return null !== t && t.apply(this, arguments) || this } return i.__extends(n, t), n.getDefaultOptions = function () { return r.deepMix({}, t.getDefaultOptions.call(this), { xAxis: { visible: !1, line: { visible: !1 }, tickLine: { visible: !1 }, label: { visible: !1 } }, yAxis: { visible: !1 }, tooltip: { visible: !1, trigger: "item", crosshairs: !1 }, bulletStyle: { color: "#1890FF" }, barSize: 20, barStyle: { fillOpacity: .2 }, label: { visible: !0, style: { fill: "rgba(0, 0, 0, 0.45)", stroke: "#fff", lineWidth: 1, textBaseline: "middle", textAlign: "left" } }, range: [0, 100], ticks: { visible: !1, values: ["0", "1", "2", "3", "4", "5"], style: { fill: "rgba(0, 0, 0, 0.25)", textBaseline: "bottom", textAlign: "center", fontSize: 12, lineHeight: 16 } }, min: 0, stackField: e.STACK_FIELD }) }, n.prototype.scale = function () { var e = this.options, n = {}; n[e.yField] = {}, r.has(e, "yAxis") && s.extractScale(n[e.yField], e.yAxis), n[e.xField] = { type: "cat" }, r.has(e, "xAxis") && s.extractScale(n[e.xField], e.xAxis), this.setConfig("scales", n), t.prototype.scale.call(this) }, n.prototype.getOptions = function (e) { var n = t.prototype.getOptions.call(this, e); return this.adjustOptions(n), n }, n.prototype.afterRender = function () { t.prototype.afterRender.call(this), this.drawBullets() }, n.prototype.drawBullet = function (t, e, n) { var r = this.options, o = r.bulletStyle.color, a = r.bulletStyle.size || .6 * r.barSize; r.ticks && r.ticks.visible && this.drawBulletTicks(t, e); var s = t.addShape("rect", { attrs: { width: e.width * (n / r.max), height: a, x: e.minX, y: e.minY + (e.height - a) / 2, fill: o } }); if (s.name = "bullet", t.addShape("rect", { attrs: { width: 2, height: e.height, x: e.minX + e.width * (r.goal / r.max), y: e.minY, fill: o } }).name = "target", r.label.visible) { var u = r.label.style; t.addShape("text", { attrs: i.__assign({ x: s.getBBox().maxX + 4, y: s.getBBox().minY + s.getBBox().height / 2, text: "" + n }, u) }).name = "label" } }, n.prototype.drawBulletTicks = function (t, e) { var n = this.options, o = n.ticks.values || [], a = n.ticks.style, s = e.width / (o.length - 1), u = r.get(a, "lineHeight", 0) - a.fontSize; o.forEach((function (n, r) { var l = e.minX + s * r; t.addShape("text", { attrs: i.__assign({ x: l, y: e.minY - u, text: "" + n }, a) }).name = "tick", r > 0 && r !== o.length - 1 && t.addShape("path", { attrs: { path: [["M", l, e.minY], ["L", l, e.maxY]], stroke: "#fff", lineDash: [2, 2], lineWidth: 1 } }) })) }, n.prototype.geometryParser = function (t, e) { return "g2" === t ? l[e] : c[e] }, n.prototype.coord = function () { this.setConfig("coord", { actions: [["transpose"]] }) }, n.prototype.legend = function () { var t = this.options, e = t.bulletStyle.color, n = [{ value: "实际进度", marker: { symbol: "square", fill: e } }, { value: "目标值", marker: { symbol: "line", stroke: e, lineWidth: 2 } }]; if (t.range.length > 2) for (var o = t.color || (r.size(t.range) <= 10 ? this.theme.colors : this.theme.colors_20), a = 1; a < t.range.length; a += 1)n.push({ value: t.range[a - 1] + "-" + t.range[a], marker: { symbol: "square", fill: o[a - 1] } }); var s = i.__assign(i.__assign({ custom: !0, items: n }, t.legend), { clickable: !1 }); this.setConfig("legends", s) }, n.prototype.addGeometry = function () { var t = this.options, e = u.getGeom("interval", "main", { positionFields: [t.xField, t.yField], plot: this }); e.adjust = [{ type: "stack" }], this.bullet = e, this.setConfig("element", e) }, n.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, o) }, n.prototype.adjustOptions = function (t) { t.max || (t.max = t.goal), this.adjustYAxisOptions(t), this.adjustDataOptions(t) }, n }(a.default); e.default = h }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(38); e.EVENT_MAP = i.EVENT_MAP, e.onEvent = i.onEvent }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(103)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "progress", t.prototype.createLayers.call(this, n) }, e.prototype.update = function (t, e) { this.layers[0].update(t, e) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = function () { function t(t) { r.assign(this, t), this.init() } return t.prototype.destroy = function () { this.shape && this.shape.destroy() }, t.prototype.update = function (t, e, n) { var i = {}; if (r.assign(this, t), this.coord = this.view.get("coord"), t.value) { var o = [1, 0, 0, 0, 1, 0, this.coord.convert({ x: 0, y: this.value }).x, 0, 1]; i.matrix = o } if (t.style) { var a = this.shape.attrs, s = r.deepMix({}, a, t.style); i = r.deepMix({}, s, i) } this.shape.stopAnimate(), this.shape.animate(i, e, n) }, t.prototype.init = function () { this.coord = this.view.get("coord"), this.container = this.view.get("container"); var t = this.coord.convert({ x: 0, y: this.value }).x, e = this.coord.center.y - this.progressSize / 2 - 2, n = this.coord.center.y + this.progressSize / 2 + 2, o = r.deepMix({}, { stroke: "grey", lineWidth: 1 }, this.style); this.shape = this.container.addShape("path", { attrs: i.__assign({ path: [["M", 0, e], ["L", 0, n]] }, o), name: "progress-marker" }), this.shape.move(t, 0), this.canvas.draw() }, t }(); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(10); e.EVENT_MAP = r.EVENT_MAP, e.onEvent = r.onEvent; i.assign(r.EVENT_MAP, { onProgressClick: "interval:click", onProgressDblclick: "interval:dblclick", onProgressMousemove: "interval:mousemove", onProgressMousedown: "interval:mousedown", onProgressMouseup: "interval:mouseup", onProgressMouseenter: "progress:mouseenter", onProgressMouseleave: "progress:mouseleave", onProgressContextmenu: "interval:contextmenu" }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(322)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "ringProgress", t.prototype.createLayers.call(this, n) }, e.prototype.update = function (t) { this.layers[0].update(t) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = n(11), s = i.__importDefault(n(103)), u = n(323), l = i.__importStar(n(324)), c = ["#55A6F3", "#E8EDF3"], h = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "ringProgrsss", e } return i.__extends(e, t), e.prototype.processProps = function () { var t = this.options; t.data = this.processData(); var e = { padding: [0, 0, 0, 0], xField: "value", yField: "1", stackField: "type", barStyle: t.progressStyle, color: this.parseColorProps(t) || c }; t = r.mix(t, e) }, e.prototype.afterRender = function () { t.prototype.afterRender.call(this); var e = this.view.get("coord"), n = this.view.get("elements"); r.each(n, (function (t) { var n = t.getShapes(); r.each(n, (function (t) { var n = u.getAngle(t, e), i = n.startAngle, r = n.endAngle; u.setShapeInfo(t, i, r) })) })) }, e.prototype.coord = function () { var t = { type: "theta", cfg: { radius: 1, innerRadius: this.getThickness(this.options.size) } }; this.setConfig("coord", t) }, e.prototype.annotation = function () { }, e.prototype.addGeometry = function () { var t = this.options; this.ring = a.getGeom("interval", "main", { positionFields: [t.yField, t.xField], plot: this }), this.ring.adjust = [{ type: "stack" }], this.setConfig("element", this.ring) }, e.prototype.animation = function () { this.ring.animate = { appear: { duration: 1e3 }, update: { easing: "easeLinear", animation: "groupProgress", duration: 1e3 } } }, e.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, l) }, e.prototype.getThickness = function (t) { var e = this.width, n = this.height, i = Math.min(e, n); return t ? 1 - t / i : i >= 60 ? 1 - 20 / i : 1 - 10 / i }, e }(s.default); e.default = h, o.registerPlotType("ringProgress", h) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(2)), o = n(5), a = i.__importStar(n(0)), s = {}; function u(t, e, n) { s[t.id] || (s[t.id] = {}), s[t.id].preStart = e, s[t.id].preEnd = n, s[t.id].prePath = t.attr("path") } function l(t, e, n) { var i = t.getCenter(), o = t.getRadius(); return new r.Shapes.Fan({ attrs: { x: i.x, y: i.y, rs: 0, re: o + 200, startAngle: e, endAngle: n } }) } function c(t, e) { var n, i, r = function (t) { if (a.isEmpty(t)) return null; var e = t[0].x, n = t[0].x, i = t[0].y, r = t[0].y; return a.each(t, (function (t) { e = e > t.x ? t.x : e, n = n < t.x ? t.x : n, i = i > t.y ? t.y : i, r = r < t.y ? t.y : r })), { minX: e, maxX: n, minY: i, maxY: r, centerX: (e + n) / 2, centerY: (i + r) / 2 } }(t.points || t.get("origin").points), o = e.startAngle, s = e.endAngle - o; return e.isTransposed ? (n = r.maxY * s, i = r.minY * s) : (n = r.maxX * s, i = r.minX * s), { startAngle: i += o, endAngle: n += o } } e.setShapeInfo = u, e.getAngle = c, o.Animate.registerAnimation("update", "groupProgress", (function (t, e, n) { var i, r = t.attr("path"), o = {}, h = t.get("index"), p = c(t, n), f = p.startAngle, d = p.endAngle; if (s[t.id]) { var g = function (t) { return s[t.id] || null }(t), v = g.preStart, y = g.preEnd, m = g.prePath, x = function (t, e) { if (t === e) return "start"; return "end" }(v, f), _ = function (t, e, n, i) { if (t < n || e > i) return "antiClockWise"; return "clockWise" }(v, y, f, d); "antiClockWise" === _ && t.attr("path", m), "start" === x ? (i = l(n, f, y), o.endAngle = d) : (i = l(n, v, d), o.startAngle = f), t.attr("clip", i), t.setSilent("animating", !0), e.callback = function () { t && !t.get("destroyed") && (t.attr("clip", null), t.setSilent("cacheShape", null), t.setSilent("animating", !1), i.remove(), "antiClockWise" === _ && t.attr("path", r)) }; var b = e.delay; a.isFunction(b) && (b = e.delay(h)); var w = e.easing; a.isFunction(w) && (w = e.easing(h)), i.animate(o, e.duration, w, e.callback, b) } u(t, f, d) })) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(10); e.EVENT_MAP = r.EVENT_MAP, e.onEvent = r.onEvent; i.assign(r.EVENT_MAP, { onRingProgressClick: "interval:click", onRingProgressDblclick: "interval:dblclick", onRingProgressMousemove: "interval:mousemove", onRingProgressMousedown: "interval:mousedown", onRingProgressMouseup: "interval:mouseup", onRingProgressMouseenter: "interval:mouseenter", onRingProgressMouseleave: "interval:mouseleave", onRingProgressContextmenu: "interval:contextmenu" }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(326)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "tinyColumn", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = n(7), a = n(11), s = i.__importDefault(n(35)), u = i.__importStar(n(327)), l = { column: "interval" }, c = { interval: "column" }, h = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "tinyColumn", e } return i.__extends(e, t), e.prototype.init = function () { this.processProps(), t.prototype.init.call(this) }, e.prototype.geometryParser = function (t, e) { return "g2" === t ? l[e] : c[e] }, e.prototype.scale = function () { var t = {}; t[this.options.xField] = { type: "cat" }, this.setConfig("scales", t) }, e.prototype.addGeometry = function () { var t = this.options, e = a.getGeom("interval", "main", { positionFields: [t.xField, t.yField], plot: this }); this.setConfig("element", e) }, e.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, u) }, e.prototype.processProps = function () { var t = this.options, e = { padding: [0, 0, 0, 0], columnSize: this.getSize() }; t = r.mix(t, e) }, e.prototype.getSize = function () { var t = this.options, e = this.getColumnNum(t.data, t.xField); return this.width / e * .6 }, e.prototype.getColumnNum = function (t, e) { var n = []; return r.each(t, (function (t) { var i = t[e]; n.indexOf(i) < 0 && n.push(i) })), n.length }, e }(s.default); e.default = h, o.registerPlotType("tinyColumn", h) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(10); e.EVENT_MAP = r.EVENT_MAP, e.onEvent = r.onEvent; i.assign(r.EVENT_MAP, { onColumnClick: "interval:click", onColumnDblclick: "interval:dblclick", onColumnMousemove: "interval:mousemove", onColumnMousedown: "interval:mousedown", onColumnMouseup: "interval:mouseup", onColumnMouseenter: "interval:mouseenter", onColumnMouseleave: "interval:mouseleave", onColumnContextmenu: "interval:contextmenu" }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(329)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "tinyArea", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(7), o = n(11), a = i.__importDefault(n(35)), s = i.__importStar(n(330)), u = { area: "area", line: "line" }, l = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "tinyArea", e } return i.__extends(e, t), e.prototype.geometryParser = function (t, e) { return u[e] }, e.prototype.addGeometry = function () { this.area = o.getGeom("area", "mini", { plot: this }), this.setConfig("element", this.area), this.line = o.getGeom("line", "mini", { plot: this }), this.setConfig("element", this.line) }, e.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, s) }, e }(a.default); e.default = l, r.registerPlotType("tinyArea", l) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(10); e.EVENT_MAP = r.EVENT_MAP, e.onEvent = r.onEvent; i.assign(r.EVENT_MAP, { onAreaClick: "area:click", onAreaDblclick: "area:dblclick", onAreaMousemove: "area:mousemove", onAreaMousedown: "area:mousedown", onAreaMouseup: "area:mouseup", onAreaMouseenter: "area:mouseenter", onAreaMouseleave: "area:mouseleave", onAreaContextmenu: "area:contextmenu", onLineClick: "line:click", onLineDblclick: "line:dblclick", onLineMousemove: "line:mousemove", onLineMousedown: "line:mousedown", onLineMouseup: "line:mouseup", onLineMouseenter: "line:mouseenter", onLineMouseleave: "line:mouseleave", onLineContextmenu: "line:contextmenu" }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importStar(n(0)), o = i.__importDefault(n(6)), a = i.__importDefault(n(332)), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.createLayers = function (e) { var n = r.deepMix({}, e); n.type = "tinyLine", t.prototype.createLayers.call(this, n) }, e.getDefaultOptions = a.default.getDefaultOptions, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(7), o = n(11), a = i.__importDefault(n(35)), s = i.__importStar(n(333)), u = { line: "line" }, l = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "tinyLine", e } return i.__extends(e, t), e.prototype.geometryParser = function (t, e) { return u[e] }, e.prototype.addGeometry = function () { this.line = o.getGeom("line", "mini", { plot: this }), this.setConfig("element", this.line) }, e.prototype.parseEvents = function (e) { t.prototype.parseEvents.call(this, s) }, e }(a.default); e.default = l, r.registerPlotType("tinyLine", l) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1).__importStar(n(0)), r = n(10); e.EVENT_MAP = r.EVENT_MAP, e.onEvent = r.onEvent; i.assign(r.EVENT_MAP, { onLineClick: "line:click", onLineDblclick: "line:dblclick", onLineMousemove: "line:mousemove", onLineMousedown: "line:mousedown", onLineMouseup: "line:mouseup", onLineMouseenter: "line:mouseenter", onLineMouseleave: "line:mouseleave", onLineContextmenu: "line:contextmenu" }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(335)), o = i.__importStar(n(0)), a = n(7), s = i.__importDefault(n(28)); n(76); var u = i.__importStar(n(336)), l = n(105), c = n(23), h = function (t) { function e(e, n) { var i = t.call(this, e, n) || this; return i.options = n, i } return i.__extends(e, t), e.prototype.getDefaultOptions = function () { return { xAxis: { visible: !0, autoHideLabel: !1, autoRotateLabel: !1, autoRotateTitle: !1, grid: { visible: !1 }, line: { visible: !0 }, tickLine: { visible: !0 }, label: { visible: !0 }, title: { visible: !1, offset: 12 } }, yAxis: { visible: !0, autoHideLabel: !1, autoRotateLabel: !1, autoRotateTitle: !0, grid: { visible: !0 }, line: { visible: !0 }, tickLine: { visible: !0 }, label: { visible: !0 }, title: { visible: !1, offset: 12 }, colorMapping: !0, synchroTick: !0 }, label: { visible: !1 }, tooltip: { visible: !0, sort: !0 }, legend: { visible: !0, position: "top-left" } } }, e.prototype.createComboLayers = function () { var e = this; t.prototype.createComboLayers.call(this), this.legendInfo = [], this.axisInfo = [], this.paddingComponents = [], this.globalComponents = [], this.singleGeomCount = 0, this.backLayer = new s.default({ canvas: this.getCanvas(), width: this.width, height: this.height }), this.options.layers.length > 0 && o.each(this.options.layers, (function (t) { var n, i, r = e.getOverlappedConfig(t), s = a.getPlotType(t.type), l = o.deepMix({}, t, { canvas: e.canvas, x: 0, y: 0, width: e.width, height: e.height }, r), c = new s(l); c.hide(), c.render(), (n = e.axisInfo).push.apply(n, u.getAxisData(c, l, e.globalOptions)), (i = e.legendInfo).push.apply(i, u.getLegendData(c, l)), e.addLayer(c) })), this.topLayer = new s.default({ canvas: this.getCanvas(), width: this.width, height: this.height }) }, e.prototype.getOverlappedConfig = function (t) { var e = u.getColorConfig(t.type, t, this.singleGeomCount); return e && e.single && this.singleGeomCount++ , o.deepMix({}, { xAxis: { visible: !1 }, yAxis: { visible: !1 }, legend: { visible: !1 }, tooltip: { visible: !1 }, padding: [0, 0, 0, 0], color: e ? e.color : null }) }, e.prototype.overlappingLegend = function () { var t = u.mergeLegendData(this.legendInfo); return this.legendContainer = this.topLayer.container.addGroup(), u.createLegend(t, this.width, this.height, this.getCanvas(), this.globalOptions.legend.position) }, e.prototype.render = function () { var t, e = this; this.doDestroy(), this.createComboLayers(); var n = c.getGlobalTheme().bleeding; if (this.globalOptions.legend.visible) { var i = this.overlappingLegend(); this.globalComponents.push({ type: "legend", component: i.component }), this.paddingComponents.push(i) } var r = l.getOverlappingPadding(this.layers[0], this.paddingComponents), a = u.axesLayout(this.globalOptions, this.axisInfo, r, this.layers[0], this.width, this.height, this.getCanvas()); (t = this.paddingComponents).push.apply(t, a), o.each(a, (function (t) { e.globalComponents.push({ type: "axis", component: t.component }) })); var s = l.getOverlappingPadding(this.layers[0], this.paddingComponents); if (this.globalOptions.xAxis.visible || (s[2] += n[2]), o.each(this.layers, (function (t) { t.updateConfig({ padding: s }), t.show(), t.render(), t.view.get("backgroundGroup").get("backShape").remove(), t.view.get("panelGroup").get("backShape").remove() })), this.globalOptions.yAxis.grid.visible) { var h = a[0].component, p = this.layers[0], f = p.view.get("coord"), d = p.view.get("backgroundGroup"); u.drawYGrid(h, f, d, this.globalOptions) } if (this.globalOptions.tooltip.visible) { var g = u.showTooltip(this.canvas, this.layers, this.globalOptions.tooltip); this.globalComponents.push({ type: "tooltip", component: g }) } }, e.prototype.doDestroy = function () { this.clearComponents(), this.eachLayer((function (t) { t.destroy() })), this.layers = [] }, e.prototype.clearComponents = function () { o.each(this.globalComponents, (function (t) { "legend" !== t.type && "tooltip" !== t.type || t.component.destroy(), "axis" === t.type && t.component.clear() })), this.paddingComponents = [], this.globalComponents = [] }, e }(r.default); e.default = h }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(6)), o = n(0), a = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.getDefaultOptions = function () { return {} }, e.prototype.getGlobalOptions = function (t) { return { xAxis: t.xAxis, yAxis: t.yAxis, theme: t.theme, legend: t.legend } }, e.prototype.createComboLayers = function () { this.globalOptions = o.deepMix({}, this.getDefaultOptions(), this.getGlobalOptions(this.options)) }, e }(r.default); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(104); e.getColorConfig = i.getColorConfig; var r = n(337); e.getLegendData = r.getLegendData, e.mergeLegendData = r.mergeLegendData, e.createLegend = r.createLegend; var o = n(338); e.getAxisData = o.getAxisData, e.mergeAxisScale = o.mergeAxisScale, e.createAxis = o.createAxis, e.axesLayout = o.axesLayout, e.drawYGrid = o.drawYGrid; var a = n(339); e.showTooltip = a.showTooltip }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(12), o = n(2), a = i.__importStar(n(0)), s = n(23); e.getLegendData = function (t, e) { var n = [], i = t.view.get("elements")[0], r = i.getAttr("color"), o = { isInCircle: i.isInCircle(), color: r.values[0] }, s = i.get("shapeFactory").getMarkerStyle(i.get("type"), o); if (0 === r.scales.length) n.push({ value: e.name, checked: !0, marker: s, isSingle: !0, layer: t }); else { var u = r.scales[0].values; a.each(u, (function (e, o) { var a = r.values[o], s = e, u = { isInCircle: i.isInCircle(), color: a }, l = i.get("shapeFactory").getMarkerStyle(i.get("type"), u); n.push({ field: r.scales[0].field, value: s, checked: !0, marker: l, isSingle: !1, layer: t }) })) } return n }, e.mergeLegendData = function (t) { return t }, e.createLegend = function (t, e, n, i, u) { var l = s.getGlobalTheme().legend, c = u.split("-"), h = "horizontal"; "left" !== c[0] && "right" !== c[0] || (h = "vertical"); var p = { type: "category-legend", items: t, maxSize: e, container: i.addGroup(), layout: h, textStyle: { fill: "#8C8C8C", fontSize: 12, textAlign: "start", textBaseline: "middle", lineHeight: 20 }, titleDistance: 10, autoWrap: !0, itemMarginBottom: 4, backgroundPadding: 0, maxLength: e }, f = new r.Legend.CanvasCategory(p); !function (t, e, n, i) { console.log(i); var r = s.getGlobalTheme().bleeding; a.isArray(r) && a.each(r, (function (t, e) { "function" == typeof r[e] && (r[e] = r[e]({})) })); var o = n.get("itemsGroup").getBBox(), u = 0, l = 0, c = i.split("-"); "left" === c[0] ? u = r[3] : "right" === c[0] ? u = t - r[1] - o.width : "center" === c[1] ? u = (t - o.width) / 2 : "left" === c[1] ? u = r[3] : "right" === c[1] && (u = t - r[1] - o.width); "bottom" === c[0] ? l = e - r[2] - o.height : "top" === c[0] ? l = r[0] : "center" === c[1] ? l = (e - o.height) / 2 : "top" === c[1] ? l = r[0] : "bottom" === c[1] && (l = e - r[2] - o.height); n.moveTo(u, l), n.draw() }(e, n, f, u), function (t) { var e = []; t.on("itemclick", (function (t) { var n = t.item, i = t.checked; if (n.isSingle) i ? n.layer.show() : n.layer.hide(); else { var r = n.layer.view; if (i) a.pull(e, n.value), r.filter(n.value, (function (t) { return !a.contains(e, t) })), r.repaint(), n.layer.visibility || n.layer.show(); else e.push(n.value), r.filter(n.field, (function (t) { return !a.contains(e, t) })), r.repaint(), 0 === r.get("filteredData").length ? n.layer.hide() : n.layer.visibility || n.layer.show() } })) }(f); var d, g = f.get("itemsGroup").getBBox(), v = l.innerPadding; return "left" === c[0] ? d = new o.BBox(f.get("x") + v[3], f.get("y"), g.width, g.height) : "right" === c[0] ? d = new o.BBox(f.get("x") - v[1], f.get("y"), g.width, g.height) : "top" === c[0] ? d = new o.BBox(f.get("x"), f.get("y") + v[0], g.width, g.height) : "bottom" === c[0] && (d = new o.BBox(f.get("x"), f.get("y") - v[2], g.width, g.height)), { position: c[0], component: f, getBBox: function () { return d } } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(12), o = n(2), a = n(13), s = i.__importStar(n(0)), u = n(20), l = n(104), c = n(105), h = n(9); function p(t, e, n) { return "x" === e ? function (t) { if (!d(t)) return [t[0].scale]; return "cat" === t[0].scale.type ? function (t) { for (var e = [], n = 0, i = t; n < i.length; n++) { var r = i[n]; e.push.apply(e, r.scale.values) } return new (a.getScale("cat"))({ values: s.uniq(e) }) }(t) : f(t, 5) }(t.filter((function (t) { if ("x" === t.dim) return t }))) : function (t, e) { var n = d(t), i = t[0].scale.tickCount, r = a.getScale("linear"); return n ? f(t, i) : t.map((function (t) { var n = t.scale, o = function (t, e) { for (var n = [], i = t.min, r = (t.max - i) / e, o = 0; o < e; o++) { var a = i + r * o; n.push(a) } return n }(n, i); if (e) { var a = new r({ min: n.min, max: n.max, ticks: o, tickCount: i, color: t.color }); return a.layer = t.layer, a } return n.layer = t.layer, n.color = t.color, n })) }(t.filter((function (t) { if ("y" === t.dim) return t })), n.synchroTick) } function f(t, e) { for (var n = t[0].scale.min, i = t[0].scale.max, r = 0, o = t; r < o.length; r++) { var s = o[r]; n = Math.min(n, s.scale.min), i = Math.max(i, s.scale.max) } return new (a.getScale("linear"))({ min: n, max: i, tickCount: e }) } function d(t) { for (var e = t[0].originalData, n = t[0].scale.field, i = 0, r = t; i < r.length; i++) { var o = r[i], a = o.originalData, s = o.scale.field; if (a !== e || s !== n) return !1 } return !0 } function g(t, e, n, i, o) { var a, l = v(o), c = "x" !== e; a = t.layer ? t.layer.container.addGroup() : n.addGroup(); var p, f, d = function (t, e) { var n = [], i = t.ticks, r = t.range, o = (r[1] - r[0]) / (i.length - 1); return s.each(i, (function (t, i) { var a = "y" === e ? 1 - (r[0] + o * i) : r[0] + o * i; n.push({ text: t, value: a }) })), n }(t, e), g = h.getComponent("axis", { dim: e, plot: { options: o, getPlotTheme: function () { return u.getGlobalTheme() } } }), y = l.axis && l.axis[e] ? function (t) { var e = {}; return s.each(t, (function (t, n) { s.hasKey(t, "style") && (e[n] = t.style) })), e }(l.axis[e]) : {}; t.color && (p = t.color, y = { line: (f = g).line ? { stroke: p, lineWidth: 1 } : null, tickLine: f.tickLine ? { stroke: p, lineWidth: 1, length: 5 } : null, label: f.label ? { textStyle: { fill: p } } : null }); var m = s.deepMix({}, g, { type: "line", group: a, canvas: n, start: i.start, end: i.end, isVertical: c, factor: i.factor, ticks: d, label: function (t) { return { text: t, textStyle: g.label.textStyle } } }, y), x = new r.Axis.Line(m); return x.layer = t.layer, x.render(), x } function v(t) { var e = u.getGlobalTheme(); return t.theme && (s.isString(t.theme) ? e = u.getGlobalTheme(t.theme) : s.isObject(t.theme) && (e = t.theme)), e } e.getAxisData = function (t, e, n) { var i = t.view.get("scales"), r = [], o = l.isSingleGraph(t.type, e); if (e.xField) { var a = { dim: "x", scale: i[e.xField], originalData: e.data }; r.push(a) } if (e.yField) { a = { dim: "y", scale: i[e.yField], originalData: e.data, color: o && n.yAxis.colorMapping ? e.color : null, layer: t }; r.push(a) } return r }, e.mergeAxisScale = p, e.createAxis = g, e.axesLayout = function (t, e, n, i, r, a, l) { var h = u.getGlobalTheme().bleeding; s.each(n, (function (t, e) { 0 === t && (n[e] = h[e]) })); var f, d, v = [], y = [], m = 0; if (t.xAxis.visible && (f = p(e, "x"), d = g(f[0], "x", l, { start: { x: 0, y: 0 }, end: { x: r, y: 0 }, factor: 1 }, t), m += d.get("group").getBBox().height), t.yAxis.visible) { var x = p(e, "y", t.yAxis); s.each(x, (function (e, i) { var r = 0 === i ? -1 : 1, o = g(e, "y", l, { start: { x: 0, y: n[0] }, end: { x: 0, y: a - m - n[2] }, factor: r }, t); 0 === i && o.get("group").translate(n[3], 0), y.push(o) })), function (t, e, n, i) { var r = t[0], a = r.get("group"), s = a.getBBox(); a.translate(s.width, 0), e.push({ position: "left", component: r, getBBox: function () { var t = a.attr("matrix"); return new o.BBox(s.minX + t[6], s.minY, s.width, s.height) } }); for (var u = i[1], l = function (i) { var r = t[i], a = r.get("group"), s = a.getBBox(); a.translate(n - u - s.width, 0), u += s.width + 4; var l = { position: "right", component: r, getBBox: function () { var t = a.attr("matrix"); return new o.BBox(s.minX + t[6], s.minX, s.width, s.height) } }; e.push(l) }, c = t.length - 1; c > 0; c--)l(c) }(y, v, r, n) } if (t.xAxis.visible) { var _ = c.getOverlappingPadding(i, v), b = 0 === y.length ? a - m - n[2] : y[0].get("group").getBBox().maxY; d.destroy(), d = g(f[0], "x", l, { start: { x: _[3], y: b }, end: { x: r - _[1], y: b }, factor: 1 }, t), v.push({ position: "bottom", component: d, getBBox: function () { var t = d.get("group").getBBox(); return new o.BBox(t.minX, t.minY + b, t.width, t.height) } }) } return v }, e.drawYGrid = function (t, e, n, r) { var o = v(r), a = r.yAxis.grid, u = o.axis.y.grid.style, l = s.deepMix({}, u, a.style), c = n.addGroup(), h = t.get("labelItems"); s.each(h, (function (t, n) { n > 0 && c.addShape("path", { attrs: i.__assign({ path: [["M", e.start.x, t.point.y], ["L", e.end.x, t.point.y]] }, l) }) })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(12), o = n(5), a = n(23), s = ["line", "area", "path", "areaStack"]; e.showTooltip = function (t, e, n) { var u = function (t, e) { var n = a.getGlobalTheme().tooltip, i = { panelGroup: t.view.get("panelGroup"), panelRange: t.view.get("panelRange"), capture: !1, canvas: e, frontgroundGroup: t.view.get("frontgroundGroup"), theme: n, backgroundGroup: t.view.get("backgroundGroup") }; return new r.Tooltip.Html(i) }(e[0], t); return t.on("mousemove", (function (t) { var r, a, l = [], c = { x: t.x / 2, y: t.y / 2 }; i.each(e, (function (t) { var e = t.view; if (e && t.visibility) { var n = e.get("coord"), r = e.get("elements"); i.each(r, (function (t) { var e = t.get("type"), r = t.get("dataArray"); if (i.contains(["area", "line", "path", "interval"], e)) { var a = function (t, e, n, r, a) { var u = []; return i.each(r, (function (r) { var l = e.findPoint(t, r); if (l) { var c = e.getTooltipItems(l, null); i.each(c, (function (t) { var r = t.point; if (!i.isNil(r) && !i.isNil(r.x) && !i.isNil(r.y)) { var l = i.isArray(r.x) ? r.x[r.x.length - 1] : r.x, c = i.isArray(r.y) ? r.y[r.y.length - 1] : r.y; r = a.applyMatrix(l, c, 1), t.x = r[0], t.y = r[1], t.showMarker = !0; var h = function (t, e) { var n = t.get("shapeType") || "point", i = t.getDefaultValue("shape") || "circle", r = o.getShapeFactory(n), a = { color: e }; return r.getMarkerStyle(i, a) }(e, t.color); h.radius = 40, t.marker = h, -1 !== i.indexOf(s, n) && u.push(t) } })), u.push.apply(u, c) } })), u }(c, t, e, r, n); l.push.apply(l, a) } else { var u = function (t, e) { var n = [], r = t.get("children"); return i.each(r, (function (t) { var i = t.getBBox(); i.minX < e && i.maxX > e && n.push(t) })), n }(t.get("shapeContainer"), c.x); i.each(u, (function (e) { if (e.get("visible") && e.get("origin")) { var n = t.getTooltipItems(e.get("origin"), null); l.push.apply(l, n) } })) } })) } })), function (t, e, n) { if (e.get("origin")) { var r; r = i.isArray(e.get("origin")) ? function (t, e) { for (var n in e) { var r = e[n]._origin, o = i.keys(r); for (var a in o) { var s = o[a]; if (r[s] === t) return { data: r, key: s } } } }(t[0].title, e.get("origin")).data : e.get("origin")._origin, i.each(t, (function (t) { t.point._origin !== r && (t.color = "#ccc") })) } n.sort && t.sort((function (t, e) { return parseFloat(e.value) - parseFloat(t.value) })) }(l, t.target, n), l.length > 0 ? (u.setContent("", (r = l, a = [], i.each(r, (function (t) { -1 === function (t, e) { var n = -1; return i.each(t, (function (t, r) { var o = !0; for (var a in e) if (i.has(e, a) && !i.isObject(e[a]) && e[a] !== t[a]) { o = !1; break } if (o) return n = r, !1 })), n }(a, t) && a.push(t) })), a)), u.setPosition(c.x, c.y, t.target), u.show()) : u.get("visible") && u.hide() })), u } }, function (t, e, n) { "use strict"; function i(t, e, n, i) { t = t.filter((function (t) { var i = e(t), r = n(t); return null != i && isFinite(i) && null != r && isFinite(r) })), i && t.sort((function (t, n) { return e(t) - e(n) })); for (var r, o, a, s = t.length, u = new Float64Array(s), l = new Float64Array(s), c = 0, h = 0, p = 0; p < s;)a = t[p], u[p] = r = +e(a), l[p] = o = +n(a), c += (r - c) / ++p, h += (o - h) / p; for (var f = 0; f < s; ++f)u[f] -= c, l[f] -= h; return [u, l, c, h] } function r(t, e, n, i) { for (var r = 0, o = 0, a = t.length; o < a; o++) { var s = t[o], u = +e(s), l = +n(s); null != u && isFinite(u) && null != l && isFinite(l) && i(u, l, r++) } } function o(t, e, n, i, o) { var a = 0, s = 0; return r(t, e, n, (function (t, e) { var n = e - o(t), r = e - i; a += n * n, s += r * r })), 1 - a / s } function a(t) { return 180 * Math.atan2(t[1][1] - t[0][1], t[1][0] - t[0][0]) / Math.PI } function s(t, e, n) { for (var i = Math.log(e - t) * Math.LOG10E + 1 | 0, r = 1 * Math.pow(10, -i / 2 - 1), o = [u(t), u(e)], s = 0; l(o) && s < 1e4;); return o; function u(t) { return [t, n(t)] } function l(t) { s++; for (var e, n = t.length, i = !1, o = 0; o < n - 1; o++) { var l = t[o], c = t[o + 1], h = [((e = [l, c])[0][0] + e[1][0]) / 2, (e[0][1] + e[1][1]) / 2], p = u(h[0]), f = a([l, h]), d = a([l, p]); Math.abs(f - d) > r && (t.splice(o + 1, 0, p), i = !0) } return i } } function u(t, e, n, i) { var r = i - t * t, o = Math.abs(r) < 1e-24 ? 0 : (n - t * e) / r; return [e - o * t, o] } function l(t, e) { return function (t) { if (Array.isArray(t)) return t }(t) || function (t, e) { if (!(Symbol.iterator in Object(t) || "[object Arguments]" === Object.prototype.toString.call(t))) return; var n = [], i = !0, r = !1, o = void 0; try { for (var a, s = t[Symbol.iterator](); !(i = (a = s.next()).done) && (n.push(a.value), !e || n.length !== e); i = !0); } catch (t) { r = !0, o = t } finally { try { i || null == s.return || s.return() } finally { if (r) throw o } } return n }(t, e) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance") }() } n.r(e); var c = function () { var t, e = function (t) { return t[0] }, n = function (t) { return t[1] }; function i(i) { var a = 0, c = 0, h = 0, p = 0, f = 0, d = 0, g = t ? +t[0] : 1 / 0, v = t ? +t[1] : -1 / 0; r(i, e, n, (function (e, n) { var i = Math.log(n), r = e * n; ++a, c += (n - c) / a, p += (r - p) / a, d += (e * r - d) / a, h += (n * i - h) / a, f += (r * i - f) / a, t || (e < g && (g = e), e > v && (v = e)) })); var y = l(u(p / c, h / c, f / c, d / c), 2), m = y[0], x = y[1]; m = Math.exp(m); var _ = function (t) { return m * Math.exp(x * t) }, b = s(g, v, _); return b.a = m, b.b = x, b.predict = _, b.rSquared = o(i, e, n, c, _), b } return i.domain = function (e) { return arguments.length ? (t = e, i) : t }, i.x = function (t) { return arguments.length ? (e = t, i) : e }, i.y = function (t) { return arguments.length ? (n = t, i) : n }, i }; function h(t, e) { return function (t) { if (Array.isArray(t)) return t }(t) || function (t, e) { if (!(Symbol.iterator in Object(t) || "[object Arguments]" === Object.prototype.toString.call(t))) return; var n = [], i = !0, r = !1, o = void 0; try { for (var a, s = t[Symbol.iterator](); !(i = (a = s.next()).done) && (n.push(a.value), !e || n.length !== e); i = !0); } catch (t) { r = !0, o = t } finally { try { i || null == s.return || s.return() } finally { if (r) throw o } } return n }(t, e) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance") }() } var p = function () { var t, e = function (t) { return t[0] }, n = function (t) { return t[1] }; function i(i) { var a = 0, s = 0, l = 0, c = 0, p = 0, f = t ? +t[0] : 1 / 0, d = t ? +t[1] : -1 / 0; r(i, e, n, (function (e, n) { ++a, s += (e - s) / a, l += (n - l) / a, c += (e * n - c) / a, p += (e * e - p) / a, t || (e < f && (f = e), e > d && (d = e)) })); var g = h(u(s, l, c, p), 2), v = g[0], y = g[1], m = function (t) { return y * t + v }, x = [[f, m(f)], [d, m(d)]]; return x.a = y, x.b = v, x.predict = m, x.rSquared = o(i, e, n, l, m), x } return i.domain = function (e) { return arguments.length ? (t = e, i) : t }, i.x = function (t) { return arguments.length ? (e = t, i) : e }, i.y = function (t) { return arguments.length ? (n = t, i) : n }, i }; function f(t) { t.sort((function (t, e) { return t - e })); var e = t.length / 2; return e % 1 == 0 ? (t[e - 1] + t[e]) / 2 : t[Math.floor(e)] } function d(t, e) { return function (t) { if (Array.isArray(t)) return t }(t) || function (t, e) { if (!(Symbol.iterator in Object(t) || "[object Arguments]" === Object.prototype.toString.call(t))) return; var n = [], i = !0, r = !1, o = void 0; try { for (var a, s = t[Symbol.iterator](); !(i = (a = s.next()).done) && (n.push(a.value), !e || n.length !== e); i = !0); } catch (t) { r = !0, o = t } finally { try { i || null == s.return || s.return() } finally { if (r) throw o } } return n }(t, e) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance") }() } var g = function () { var t = function (t) { return t[0] }, e = function (t) { return t[1] }, n = .3; function r(r) { for (var o = d(i(r, t, e, !0), 4), a = o[0], s = o[1], l = o[2], c = o[3], h = a.length, p = Math.max(2, ~~(n * h)), g = new Float64Array(h), m = new Float64Array(h), x = new Float64Array(h).fill(1), _ = -1; ++_ <= 2;) { for (var b = [0, p - 1], w = 0; w < h; ++w) { for (var M = a[w], S = b[0], C = b[1], O = M - a[S] > a[C] - M ? S : C, k = 0, P = 0, A = 0, L = 0, T = 0, D = 1 / Math.abs(a[O] - M || 1), j = S; j <= C; ++j) { var I = a[j], B = s[j], E = v(Math.abs(M - I) * D) * x[j], F = I * E; k += E, P += F, A += B * E, L += B * F, T += I * F } var R = d(u(P / k, A / k, L / k, T / k), 2), z = R[0], N = R[1]; g[w] = z + N * M, m[w] = Math.abs(s[w] - g[w]), y(a, w + 1, b) } if (2 === _) break; var Y = f(m); if (Math.abs(Y) < 1e-12) break; for (var H, G, W = 0; W < h; ++W)H = m[W] / (6 * Y), x[W] = H >= 1 ? 1e-12 : (G = 1 - H * H) * G } return function (t, e, n, i) { for (var r, o = t.length, a = [], s = 0, u = 0, l = []; s < o; ++s)r = t[s] + n, l[0] === r ? l[1] += (e[s] - l[1]) / ++u : (u = 0, l[1] += i, l = [r, e[s]], a.push(l)); return l[1] += i, a }(a, g, l, c) } return r.bandwidth = function (t) { return arguments.length ? (n = t, r) : n }, r.x = function (e) { return arguments.length ? (t = e, r) : t }, r.y = function (t) { return arguments.length ? (e = t, r) : e }, r }; function v(t) { return (t = 1 - t * t * t) * t * t } function y(t, e, n) { var i = t[e], r = n[0], o = n[1] + 1; if (!(o >= t.length)) for (; e > r && t[o] - i <= i - t[r];)n[0] = ++r, n[1] = o, ++o } function m(t, e) { return function (t) { if (Array.isArray(t)) return t }(t) || function (t, e) { if (!(Symbol.iterator in Object(t) || "[object Arguments]" === Object.prototype.toString.call(t))) return; var n = [], i = !0, r = !1, o = void 0; try { for (var a, s = t[Symbol.iterator](); !(i = (a = s.next()).done) && (n.push(a.value), !e || n.length !== e); i = !0); } catch (t) { r = !0, o = t } finally { try { i || null == s.return || s.return() } finally { if (r) throw o } } return n }(t, e) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance") }() } var x = function () { var t, e = function (t) { return t[0] }, n = function (t) { return t[1] }; function i(i) { var a = 0, l = 0, c = 0, h = 0, p = 0, f = t ? +t[0] : 1 / 0, d = t ? +t[1] : -1 / 0; r(i, e, n, (function (e, n) { var i = Math.log(e); ++a, l += (i - l) / a, c += (n - c) / a, h += (i * n - h) / a, p += (i * i - p) / a, t || (e < f && (f = e), e > d && (d = e)) })); var g = m(u(l, c, h, p), 2), v = g[0], y = g[1], x = function (t) { return y * Math.log(t) + v }, _ = s(f, d, x); return _.a = y, _.b = v, _.predict = x, _.rSquared = o(i, e, n, c, x), _ } return i.domain = function (e) { return arguments.length ? (t = e, i) : t }, i.x = function (t) { return arguments.length ? (e = t, i) : e }, i.y = function (t) { return arguments.length ? (n = t, i) : n }, i }; function _(t, e) { return function (t) { if (Array.isArray(t)) return t }(t) || function (t, e) { if (!(Symbol.iterator in Object(t) || "[object Arguments]" === Object.prototype.toString.call(t))) return; var n = [], i = !0, r = !1, o = void 0; try { for (var a, s = t[Symbol.iterator](); !(i = (a = s.next()).done) && (n.push(a.value), !e || n.length !== e); i = !0); } catch (t) { r = !0, o = t } finally { try { i || null == s.return || s.return() } finally { if (r) throw o } } return n }(t, e) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance") }() } var b = function () { var t, e = function (t) { return t[0] }, n = function (t) { return t[1] }; function a(a) { var u, l, c, h, p = _(i(a, e, n), 4), f = p[0], d = p[1], g = p[2], v = p[3], y = f.length, m = 0, x = 0, b = 0, w = 0, M = 0; for (u = 0; u < y;)l = f[u], c = d[u++], m += ((h = l * l) - m) / u, x += (h * l - x) / u, b += (h * h - b) / u, w += (l * c - w) / u, M += (h * c - M) / u; var S = 0, C = 0, O = t ? +t[0] : 1 / 0, k = t ? +t[1] : -1 / 0; r(a, e, n, (function (e, n) { C++ , S += (n - S) / C, t || (e < O && (O = e), e > k && (k = e)) })); var P = b - m * m, A = m * P - x * x, L = (M * m - w * x) / A, T = (w * P - M * x) / A, D = -L * m, j = function (t) { return L * (t -= g) * t + T * t + D + v }, I = s(O, k, j); return I.a = L, I.b = T - 2 * L * g, I.c = D - T * g + L * g * g + v, I.predict = j, I.rSquared = o(a, e, n, S, j), I } return a.domain = function (e) { return arguments.length ? (t = e, a) : t }, a.x = function (t) { return arguments.length ? (e = t, a) : e }, a.y = function (t) { return arguments.length ? (n = t, a) : n }, a }; function w(t, e) { return function (t) { if (Array.isArray(t)) return t }(t) || function (t, e) { if (!(Symbol.iterator in Object(t) || "[object Arguments]" === Object.prototype.toString.call(t))) return; var n = [], i = !0, r = !1, o = void 0; try { for (var a, s = t[Symbol.iterator](); !(i = (a = s.next()).done) && (n.push(a.value), !e || n.length !== e); i = !0); } catch (t) { r = !0, o = t } finally { try { i || null == s.return || s.return() } finally { if (r) throw o } } return n }(t, e) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance") }() } var M = function () { var t, e = function (t) { return t[0] }, n = function (t) { return t[1] }, a = 3; function u(u) { if (1 === a) { var l = p().x(e).y(n).domain(t)(u); return l.coefficients = [l.b, l.a], delete l.a, delete l.b, l } if (2 === a) { var c = b().x(e).y(n).domain(t)(u); return c.coefficients = [c.c, c.b, c.a], delete c.a, delete c.b, delete c.c, c } var h, f, d, g, v, y = w(i(u, e, n), 4), m = y[0], x = y[1], _ = y[2], M = y[3], S = m.length, C = [], O = [], k = a + 1, P = 0, A = 0, L = t ? +t[0] : 1 / 0, T = t ? +t[1] : -1 / 0; for (r(u, e, n, (function (e, n) { ++A, P += (n - P) / A, t || (e < L && (L = e), e > T && (T = e)) })), h = 0; h < k; ++h) { for (d = 0, g = 0; d < S; ++d)g += Math.pow(m[d], h) * x[d]; for (C.push(g), v = new Float64Array(k), f = 0; f < k; ++f) { for (d = 0, g = 0; d < S; ++d)g += Math.pow(m[d], h + f); v[f] = g } O.push(v) } O.push(C); var D = function (t) { var e, n, i, r, o, a = t.length - 1, s = []; for (e = 0; e < a; ++e) { for (r = e, n = e + 1; n < a; ++n)Math.abs(t[e][n]) > Math.abs(t[e][r]) && (r = n); for (i = e; i < a + 1; ++i)o = t[i][e], t[i][e] = t[i][r], t[i][r] = o; for (n = e + 1; n < a; ++n)for (i = a; i >= e; i--)t[i][n] -= t[i][e] * t[e][n] / t[e][e] } for (n = a - 1; n >= 0; --n) { for (o = 0, i = n + 1; i < a; ++i)o += t[i][n] * s[i]; s[n] = (t[a][n] - o) / t[n][n] } return s }(O), j = function (t) { t -= _; var e = M + D[0] + D[1] * t + D[2] * t * t; for (h = 3; h < k; ++h)e += D[h] * Math.pow(t, h); return e }, I = s(L, T, j); return I.coefficients = function (t, e, n, i) { var r, o, a, s, u = Array(t); for (r = 0; r < t; ++r)u[r] = 0; for (r = t - 1; r >= 0; --r)for (a = e[r], s = 1, u[r] += a, o = 1; o <= r; ++o)s *= (r + 1 - o) / o, u[r - o] += a * Math.pow(n, o) * s; return u[0] += i, u }(k, D, -_, M), I.predict = j, I.rSquared = o(u, e, n, P, j), I } return u.domain = function (e) { return arguments.length ? (t = e, u) : t }, u.x = function (t) { return arguments.length ? (e = t, u) : e }, u.y = function (t) { return arguments.length ? (n = t, u) : n }, u.order = function (t) { return arguments.length ? (a = t, u) : a }, u }; function S(t, e) { return function (t) { if (Array.isArray(t)) return t }(t) || function (t, e) { if (!(Symbol.iterator in Object(t) || "[object Arguments]" === Object.prototype.toString.call(t))) return; var n = [], i = !0, r = !1, o = void 0; try { for (var a, s = t[Symbol.iterator](); !(i = (a = s.next()).done) && (n.push(a.value), !e || n.length !== e); i = !0); } catch (t) { r = !0, o = t } finally { try { i || null == s.return || s.return() } finally { if (r) throw o } } return n }(t, e) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance") }() } var C = function () { var t, e = function (t) { return t[0] }, n = function (t) { return t[1] }; function i(i) { var a = 0, l = 0, c = 0, h = 0, p = 0, f = 0, d = t ? +t[0] : 1 / 0, g = t ? +t[1] : -1 / 0; r(i, e, n, (function (e, n) { var i = Math.log(e), r = Math.log(n); ++a, l += (i - l) / a, c += (r - c) / a, h += (i * r - h) / a, p += (i * i - p) / a, f += (n - f) / a, t || (e < d && (d = e), e > g && (g = e)) })); var v = S(u(l, c, h, p), 2), y = v[0], m = v[1]; y = Math.exp(y); var x = function (t) { return y * Math.pow(t, m) }, _ = s(d, g, x); return _.a = y, _.b = m, _.predict = x, _.rSquared = o(i, e, n, f, x), _ } return i.domain = function (e) { return arguments.length ? (t = e, i) : t }, i.x = function (t) { return arguments.length ? (e = t, i) : e }, i.y = function (t) { return arguments.length ? (n = t, i) : n }, i }; n.d(e, "regressionExp", (function () { return c })), n.d(e, "regressionLinear", (function () { return p })), n.d(e, "regressionLoess", (function () { return g })), n.d(e, "regressionLog", (function () { return x })), n.d(e, "regressionPoly", (function () { return M })), n.d(e, "regressionPow", (function () { return C })), n.d(e, "regressionQuad", (function () { return b })) }])
}));
//# sourceMappingURL=g2plot.js.ma